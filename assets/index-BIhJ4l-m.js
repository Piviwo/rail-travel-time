function QC(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(a,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}})();var TA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eE={exports:{}},Sg={},tE={exports:{}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=Symbol.for("react.element"),IA=Symbol.for("react.portal"),PA=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),kA=Symbol.for("react.profiler"),AA=Symbol.for("react.provider"),RA=Symbol.for("react.context"),zA=Symbol.for("react.forward_ref"),LA=Symbol.for("react.suspense"),OA=Symbol.for("react.memo"),DA=Symbol.for("react.lazy"),Fw=Symbol.iterator;function FA(e){return e===null||typeof e!="object"?null:(e=Fw&&e[Fw]||e["@@iterator"],typeof e=="function"?e:null)}var rE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nE=Object.assign,iE={};function Lu(e,t,r){this.props=e,this.context=t,this.refs=iE,this.updater=r||rE}Lu.prototype.isReactComponent={};Lu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Lu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oE(){}oE.prototype=Lu.prototype;function x1(e,t,r){this.props=e,this.context=t,this.refs=iE,this.updater=r||rE}var b1=x1.prototype=new oE;b1.constructor=x1;nE(b1,Lu.prototype);b1.isPureReactComponent=!0;var Bw=Array.isArray,aE=Object.prototype.hasOwnProperty,w1={current:null},sE={key:!0,ref:!0,__self:!0,__source:!0};function lE(e,t,r){var a,l={},h=null,f=null;if(t!=null)for(a in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(h=""+t.key),t)aE.call(t,a)&&!sE.hasOwnProperty(a)&&(l[a]=t[a]);var u=arguments.length-2;if(u===1)l.children=r;else if(1<u){for(var w=Array(u),C=0;C<u;C++)w[C]=arguments[C+2];l.children=w}if(e&&e.defaultProps)for(a in u=e.defaultProps,u)l[a]===void 0&&(l[a]=u[a]);return{$$typeof:df,type:e,key:h,ref:f,props:l,_owner:w1.current}}function BA(e,t){return{$$typeof:df,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function S1(e){return typeof e=="object"&&e!==null&&e.$$typeof===df}function $A(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $w=/\/+/g;function kv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$A(""+e.key):t.toString(36)}function fm(e,t,r,a,l){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(h){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case df:case IA:f=!0}}if(f)return f=e,l=l(f),e=a===""?"."+kv(f,0):a,Bw(l)?(r="",e!=null&&(r=e.replace($w,"$&/")+"/"),fm(l,t,r,"",function(C){return C})):l!=null&&(S1(l)&&(l=BA(l,r+(!l.key||f&&f.key===l.key?"":(""+l.key).replace($w,"$&/")+"/")+e)),t.push(l)),1;if(f=0,a=a===""?".":a+":",Bw(e))for(var u=0;u<e.length;u++){h=e[u];var w=a+kv(h,u);f+=fm(h,t,r,w,l)}else if(w=FA(e),typeof w=="function")for(e=w.call(e),u=0;!(h=e.next()).done;)h=h.value,w=a+kv(h,u++),f+=fm(h,t,r,w,l);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Fp(e,t,r){if(e==null)return e;var a=[],l=0;return fm(e,a,"","",function(h){return t.call(r,h,l++)}),a}function NA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ci={current:null},pm={transition:null},jA={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:pm,ReactCurrentOwner:w1};function cE(){throw Error("act(...) is not supported in production builds of React.")}rr.Children={map:Fp,forEach:function(e,t,r){Fp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fp(e,function(){t++}),t},toArray:function(e){return Fp(e,function(t){return t})||[]},only:function(e){if(!S1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rr.Component=Lu;rr.Fragment=PA;rr.Profiler=kA;rr.PureComponent=x1;rr.StrictMode=MA;rr.Suspense=LA;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jA;rr.act=cE;rr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=nE({},e.props),l=e.key,h=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,f=w1.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(w in t)aE.call(t,w)&&!sE.hasOwnProperty(w)&&(a[w]=t[w]===void 0&&u!==void 0?u[w]:t[w])}var w=arguments.length-2;if(w===1)a.children=r;else if(1<w){u=Array(w);for(var C=0;C<w;C++)u[C]=arguments[C+2];a.children=u}return{$$typeof:df,type:e.type,key:l,ref:h,props:a,_owner:f}};rr.createContext=function(e){return e={$$typeof:RA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AA,_context:e},e.Consumer=e};rr.createElement=lE;rr.createFactory=function(e){var t=lE.bind(null,e);return t.type=e,t};rr.createRef=function(){return{current:null}};rr.forwardRef=function(e){return{$$typeof:zA,render:e}};rr.isValidElement=S1;rr.lazy=function(e){return{$$typeof:DA,_payload:{_status:-1,_result:e},_init:NA}};rr.memo=function(e,t){return{$$typeof:OA,type:e,compare:t===void 0?null:t}};rr.startTransition=function(e){var t=pm.transition;pm.transition={};try{e()}finally{pm.transition=t}};rr.unstable_act=cE;rr.useCallback=function(e,t){return Ci.current.useCallback(e,t)};rr.useContext=function(e){return Ci.current.useContext(e)};rr.useDebugValue=function(){};rr.useDeferredValue=function(e){return Ci.current.useDeferredValue(e)};rr.useEffect=function(e,t){return Ci.current.useEffect(e,t)};rr.useId=function(){return Ci.current.useId()};rr.useImperativeHandle=function(e,t,r){return Ci.current.useImperativeHandle(e,t,r)};rr.useInsertionEffect=function(e,t){return Ci.current.useInsertionEffect(e,t)};rr.useLayoutEffect=function(e,t){return Ci.current.useLayoutEffect(e,t)};rr.useMemo=function(e,t){return Ci.current.useMemo(e,t)};rr.useReducer=function(e,t,r){return Ci.current.useReducer(e,t,r)};rr.useRef=function(e){return Ci.current.useRef(e)};rr.useState=function(e){return Ci.current.useState(e)};rr.useSyncExternalStore=function(e,t,r){return Ci.current.useSyncExternalStore(e,t,r)};rr.useTransition=function(){return Ci.current.useTransition()};rr.version="18.3.1";tE.exports=rr;var L=tE.exports;const rt=uf(L),Kl=QC({__proto__:null,default:rt},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA=L,UA=Symbol.for("react.element"),HA=Symbol.for("react.fragment"),WA=Object.prototype.hasOwnProperty,GA=VA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qA={key:!0,ref:!0,__self:!0,__source:!0};function uE(e,t,r){var a,l={},h=null,f=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(f=t.ref);for(a in t)WA.call(t,a)&&!qA.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)l[a]===void 0&&(l[a]=t[a]);return{$$typeof:UA,type:e,key:h,ref:f,props:l,_owner:GA.current}}Sg.Fragment=HA;Sg.jsx=uE;Sg.jsxs=uE;eE.exports=Sg;var ve=eE.exports,I0={},dE={exports:{}},so={},hE={exports:{}},fE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(xe,De){var $e=xe.length;xe.push(De);e:for(;0<$e;){var Ve=$e-1>>>1,Ze=xe[Ve];if(0<l(Ze,De))xe[Ve]=De,xe[$e]=Ze,$e=Ve;else break e}}function r(xe){return xe.length===0?null:xe[0]}function a(xe){if(xe.length===0)return null;var De=xe[0],$e=xe.pop();if($e!==De){xe[0]=$e;e:for(var Ve=0,Ze=xe.length,gt=Ze>>>1;Ve<gt;){var Ct=2*(Ve+1)-1,Ht=xe[Ct],Ut=Ct+1,Nt=xe[Ut];if(0>l(Ht,$e))Ut<Ze&&0>l(Nt,Ht)?(xe[Ve]=Nt,xe[Ut]=$e,Ve=Ut):(xe[Ve]=Ht,xe[Ct]=$e,Ve=Ct);else if(Ut<Ze&&0>l(Nt,$e))xe[Ve]=Nt,xe[Ut]=$e,Ve=Ut;else break e}}return De}function l(xe,De){var $e=xe.sortIndex-De.sortIndex;return $e!==0?$e:xe.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var f=Date,u=f.now();e.unstable_now=function(){return f.now()-u}}var w=[],C=[],I=1,k=null,A=3,q=!1,G=!1,Z=!1,K=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(xe){for(var De=r(C);De!==null;){if(De.callback===null)a(C);else if(De.startTime<=xe)a(C),De.sortIndex=De.expirationTime,t(w,De);else break;De=r(C)}}function J(xe){if(Z=!1,$(xe),!G)if(r(w)!==null)G=!0,Oe(ne);else{var De=r(C);De!==null&&Pe(J,De.startTime-xe)}}function ne(xe,De){G=!1,Z&&(Z=!1,j(be),be=-1),q=!0;var $e=A;try{for($(De),k=r(w);k!==null&&(!(k.expirationTime>De)||xe&&!Ae());){var Ve=k.callback;if(typeof Ve=="function"){k.callback=null,A=k.priorityLevel;var Ze=Ve(k.expirationTime<=De);De=e.unstable_now(),typeof Ze=="function"?k.callback=Ze:k===r(w)&&a(w),$(De)}else a(w);k=r(w)}if(k!==null)var gt=!0;else{var Ct=r(C);Ct!==null&&Pe(J,Ct.startTime-De),gt=!1}return gt}finally{k=null,A=$e,q=!1}}var oe=!1,le=null,be=-1,Ee=5,ke=-1;function Ae(){return!(e.unstable_now()-ke<Ee)}function Ye(){if(le!==null){var xe=e.unstable_now();ke=xe;var De=!0;try{De=le(!0,xe)}finally{De?He():(oe=!1,le=null)}}else oe=!1}var He;if(typeof O=="function")He=function(){O(Ye)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Je=Le.port2;Le.port1.onmessage=Ye,He=function(){Je.postMessage(null)}}else He=function(){K(Ye,0)};function Oe(xe){le=xe,oe||(oe=!0,He())}function Pe(xe,De){be=K(function(){xe(e.unstable_now())},De)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(xe){xe.callback=null},e.unstable_continueExecution=function(){G||q||(G=!0,Oe(ne))},e.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<xe?Math.floor(1e3/xe):5},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return r(w)},e.unstable_next=function(xe){switch(A){case 1:case 2:case 3:var De=3;break;default:De=A}var $e=A;A=De;try{return xe()}finally{A=$e}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(xe,De){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var $e=A;A=xe;try{return De()}finally{A=$e}},e.unstable_scheduleCallback=function(xe,De,$e){var Ve=e.unstable_now();switch(typeof $e=="object"&&$e!==null?($e=$e.delay,$e=typeof $e=="number"&&0<$e?Ve+$e:Ve):$e=Ve,xe){case 1:var Ze=-1;break;case 2:Ze=250;break;case 5:Ze=1073741823;break;case 4:Ze=1e4;break;default:Ze=5e3}return Ze=$e+Ze,xe={id:I++,callback:De,priorityLevel:xe,startTime:$e,expirationTime:Ze,sortIndex:-1},$e>Ve?(xe.sortIndex=$e,t(C,xe),r(w)===null&&xe===r(C)&&(Z?(j(be),be=-1):Z=!0,Pe(J,$e-Ve))):(xe.sortIndex=Ze,t(w,xe),G||q||(G=!0,Oe(ne))),xe},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(xe){var De=A;return function(){var $e=A;A=De;try{return xe.apply(this,arguments)}finally{A=$e}}}})(fE);hE.exports=fE;var ZA=hE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KA=L,io=ZA;function it(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,zh={};function oc(e,t){_u(e,t),_u(e+"Capture",t)}function _u(e,t){for(zh[e]=t,e=0;e<t.length;e++)pE.add(t[e])}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=Object.prototype.hasOwnProperty,XA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nw={},jw={};function YA(e){return P0.call(jw,e)?!0:P0.call(Nw,e)?!1:XA.test(e)?jw[e]=!0:(Nw[e]=!0,!1)}function JA(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function QA(e,t,r,a){if(t===null||typeof t>"u"||JA(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ei(e,t,r,a,l,h,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=f}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kn[e]=new Ei(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kn[t]=new Ei(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kn[e]=new Ei(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kn[e]=new Ei(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kn[e]=new Ei(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kn[e]=new Ei(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kn[e]=new Ei(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kn[e]=new Ei(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kn[e]=new Ei(e,5,!1,e.toLowerCase(),null,!1,!1)});var C1=/[\-:]([a-z])/g;function E1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(C1,E1);Kn[t]=new Ei(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(C1,E1);Kn[t]=new Ei(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(C1,E1);Kn[t]=new Ei(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kn[e]=new Ei(e,1,!1,e.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Ei("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kn[e]=new Ei(e,1,!1,e.toLowerCase(),null,!0,!0)});function T1(e,t,r,a){var l=Kn.hasOwnProperty(t)?Kn[t]:null;(l!==null?l.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(QA(t,r,l,a)&&(r=null),a||l===null?YA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,a=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var es=KA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bp=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Jc=Symbol.for("react.fragment"),I1=Symbol.for("react.strict_mode"),M0=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),gE=Symbol.for("react.context"),P1=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),A0=Symbol.for("react.suspense_list"),M1=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),Vw=Symbol.iterator;function ih(e){return e===null||typeof e!="object"?null:(e=Vw&&e[Vw]||e["@@iterator"],typeof e=="function"?e:null)}var Xr=Object.assign,Av;function ph(e){if(Av===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Av=t&&t[1]||""}return`
`+Av+e}var Rv=!1;function zv(e,t){if(!e||Rv)return"";Rv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var a=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){a=C}e.call(t.prototype)}else{try{throw Error()}catch(C){a=C}e()}}catch(C){if(C&&a&&typeof C.stack=="string"){for(var l=C.stack.split(`
`),h=a.stack.split(`
`),f=l.length-1,u=h.length-1;1<=f&&0<=u&&l[f]!==h[u];)u--;for(;1<=f&&0<=u;f--,u--)if(l[f]!==h[u]){if(f!==1||u!==1)do if(f--,u--,0>u||l[f]!==h[u]){var w=`
`+l[f].replace(" at new "," at ");return e.displayName&&w.includes("<anonymous>")&&(w=w.replace("<anonymous>",e.displayName)),w}while(1<=f&&0<=u);break}}}finally{Rv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ph(e):""}function e5(e){switch(e.tag){case 5:return ph(e.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return e=zv(e.type,!1),e;case 11:return e=zv(e.type.render,!1),e;case 1:return e=zv(e.type,!0),e;default:return""}}function R0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jc:return"Fragment";case Yc:return"Portal";case M0:return"Profiler";case I1:return"StrictMode";case k0:return"Suspense";case A0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gE:return(e.displayName||"Context")+".Consumer";case mE:return(e._context.displayName||"Context")+".Provider";case P1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M1:return t=e.displayName||null,t!==null?t:R0(e.type)||"Memo";case Ts:t=e._payload,e=e._init;try{return R0(e(t))}catch{}}return null}function t5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R0(t);case 8:return t===I1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r5(e){var t=vE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,h.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $p(e){e._valueTracker||(e._valueTracker=r5(e))}function _E(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=vE(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Dm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z0(e,t){var r=t.checked;return Xr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Uw(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Hs(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xE(e,t){t=t.checked,t!=null&&T1(e,"checked",t,!1)}function L0(e,t){xE(e,t);var r=Hs(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?O0(e,t.type,r):t.hasOwnProperty("defaultValue")&&O0(e,t.type,Hs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hw(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function O0(e,t,r){(t!=="number"||Dm(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var mh=Array.isArray;function hu(e,t,r,a){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Hs(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function D0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(it(91));return Xr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ww(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(it(92));if(mh(r)){if(1<r.length)throw Error(it(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hs(r)}}function bE(e,t){var r=Hs(t.value),a=Hs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Gw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Np,SE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Np=Np||document.createElement("div"),Np.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Np.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lh(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n5=["Webkit","ms","Moz","O"];Object.keys(xh).forEach(function(e){n5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xh[t]=xh[e]})});function CE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xh.hasOwnProperty(e)&&xh[e]?(""+t).trim():t+"px"}function EE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,l=CE(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,l):e[r]=l}}var i5=Xr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function B0(e,t){if(t){if(i5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(it(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(it(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(it(61))}if(t.style!=null&&typeof t.style!="object")throw Error(it(62))}}function $0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N0=null;function k1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var j0=null,fu=null,pu=null;function qw(e){if(e=pf(e)){if(typeof j0!="function")throw Error(it(280));var t=e.stateNode;t&&(t=Pg(t),j0(e.stateNode,e.type,t))}}function TE(e){fu?pu?pu.push(e):pu=[e]:fu=e}function IE(){if(fu){var e=fu,t=pu;if(pu=fu=null,qw(e),t)for(e=0;e<t.length;e++)qw(t[e])}}function PE(e,t){return e(t)}function ME(){}var Lv=!1;function kE(e,t,r){if(Lv)return e(t,r);Lv=!0;try{return PE(e,t,r)}finally{Lv=!1,(fu!==null||pu!==null)&&(ME(),IE())}}function Oh(e,t){var r=e.stateNode;if(r===null)return null;var a=Pg(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(it(231,t,typeof r));return r}var V0=!1;if(Za)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){V0=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{V0=!1}function o5(e,t,r,a,l,h,f,u,w){var C=Array.prototype.slice.call(arguments,3);try{t.apply(r,C)}catch(I){this.onError(I)}}var bh=!1,Fm=null,Bm=!1,U0=null,a5={onError:function(e){bh=!0,Fm=e}};function s5(e,t,r,a,l,h,f,u,w){bh=!1,Fm=null,o5.apply(a5,arguments)}function l5(e,t,r,a,l,h,f,u,w){if(s5.apply(this,arguments),bh){if(bh){var C=Fm;bh=!1,Fm=null}else throw Error(it(198));Bm||(Bm=!0,U0=C)}}function ac(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function AE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zw(e){if(ac(e)!==e)throw Error(it(188))}function c5(e){var t=e.alternate;if(!t){if(t=ac(e),t===null)throw Error(it(188));return t!==e?null:e}for(var r=e,a=t;;){var l=r.return;if(l===null)break;var h=l.alternate;if(h===null){if(a=l.return,a!==null){r=a;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===r)return Zw(l),e;if(h===a)return Zw(l),t;h=h.sibling}throw Error(it(188))}if(r.return!==a.return)r=l,a=h;else{for(var f=!1,u=l.child;u;){if(u===r){f=!0,r=l,a=h;break}if(u===a){f=!0,a=l,r=h;break}u=u.sibling}if(!f){for(u=h.child;u;){if(u===r){f=!0,r=h,a=l;break}if(u===a){f=!0,a=h,r=l;break}u=u.sibling}if(!f)throw Error(it(189))}}if(r.alternate!==a)throw Error(it(190))}if(r.tag!==3)throw Error(it(188));return r.stateNode.current===r?e:t}function RE(e){return e=c5(e),e!==null?zE(e):null}function zE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zE(e);if(t!==null)return t;e=e.sibling}return null}var LE=io.unstable_scheduleCallback,Kw=io.unstable_cancelCallback,u5=io.unstable_shouldYield,d5=io.unstable_requestPaint,gn=io.unstable_now,h5=io.unstable_getCurrentPriorityLevel,A1=io.unstable_ImmediatePriority,OE=io.unstable_UserBlockingPriority,$m=io.unstable_NormalPriority,f5=io.unstable_LowPriority,DE=io.unstable_IdlePriority,Cg=null,ga=null;function p5(e){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(Cg,e,void 0,(e.current.flags&128)===128)}catch{}}var Zo=Math.clz32?Math.clz32:y5,m5=Math.log,g5=Math.LN2;function y5(e){return e>>>=0,e===0?32:31-(m5(e)/g5|0)|0}var jp=64,Vp=4194304;function gh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nm(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,l=e.suspendedLanes,h=e.pingedLanes,f=r&268435455;if(f!==0){var u=f&~l;u!==0?a=gh(u):(h&=f,h!==0&&(a=gh(h)))}else f=r&~l,f!==0?a=gh(f):h!==0&&(a=gh(h));if(a===0)return 0;if(t!==0&&t!==a&&!(t&l)&&(l=a&-a,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-Zo(t),l=1<<r,a|=e[r],t&=~l;return a}function v5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _5(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var f=31-Zo(h),u=1<<f,w=l[f];w===-1?(!(u&r)||u&a)&&(l[f]=v5(u,t)):w<=t&&(e.expiredLanes|=u),h&=~u}}function H0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function FE(){var e=jp;return jp<<=1,!(jp&4194240)&&(jp=64),e}function Ov(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zo(t),e[t]=r}function x5(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Zo(r),h=1<<l;t[l]=0,a[l]=-1,e[l]=-1,r&=~h}}function R1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-Zo(r),l=1<<a;l&t|e[a]&t&&(e[a]|=t),r&=~l}}var mr=0;function BE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $E,z1,NE,jE,VE,W0=!1,Up=[],Os=null,Ds=null,Fs=null,Dh=new Map,Fh=new Map,Ps=[],b5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xw(e,t){switch(e){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Dh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(t.pointerId)}}function ah(e,t,r,a,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:h,targetContainers:[l]},t!==null&&(t=pf(t),t!==null&&z1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function w5(e,t,r,a,l){switch(t){case"focusin":return Os=ah(Os,e,t,r,a,l),!0;case"dragenter":return Ds=ah(Ds,e,t,r,a,l),!0;case"mouseover":return Fs=ah(Fs,e,t,r,a,l),!0;case"pointerover":var h=l.pointerId;return Dh.set(h,ah(Dh.get(h)||null,e,t,r,a,l)),!0;case"gotpointercapture":return h=l.pointerId,Fh.set(h,ah(Fh.get(h)||null,e,t,r,a,l)),!0}return!1}function UE(e){var t=Ll(e.target);if(t!==null){var r=ac(t);if(r!==null){if(t=r.tag,t===13){if(t=AE(r),t!==null){e.blockedOn=t,VE(e.priority,function(){NE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=G0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);N0=a,r.target.dispatchEvent(a),N0=null}else return t=pf(r),t!==null&&z1(t),e.blockedOn=r,!1;t.shift()}return!0}function Yw(e,t,r){mm(e)&&r.delete(t)}function S5(){W0=!1,Os!==null&&mm(Os)&&(Os=null),Ds!==null&&mm(Ds)&&(Ds=null),Fs!==null&&mm(Fs)&&(Fs=null),Dh.forEach(Yw),Fh.forEach(Yw)}function sh(e,t){e.blockedOn===t&&(e.blockedOn=null,W0||(W0=!0,io.unstable_scheduleCallback(io.unstable_NormalPriority,S5)))}function Bh(e){function t(l){return sh(l,e)}if(0<Up.length){sh(Up[0],e);for(var r=1;r<Up.length;r++){var a=Up[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Os!==null&&sh(Os,e),Ds!==null&&sh(Ds,e),Fs!==null&&sh(Fs,e),Dh.forEach(t),Fh.forEach(t),r=0;r<Ps.length;r++)a=Ps[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ps.length&&(r=Ps[0],r.blockedOn===null);)UE(r),r.blockedOn===null&&Ps.shift()}var mu=es.ReactCurrentBatchConfig,jm=!0;function C5(e,t,r,a){var l=mr,h=mu.transition;mu.transition=null;try{mr=1,L1(e,t,r,a)}finally{mr=l,mu.transition=h}}function E5(e,t,r,a){var l=mr,h=mu.transition;mu.transition=null;try{mr=4,L1(e,t,r,a)}finally{mr=l,mu.transition=h}}function L1(e,t,r,a){if(jm){var l=G0(e,t,r,a);if(l===null)Wv(e,t,a,Vm,r),Xw(e,a);else if(w5(l,e,t,r,a))a.stopPropagation();else if(Xw(e,a),t&4&&-1<b5.indexOf(e)){for(;l!==null;){var h=pf(l);if(h!==null&&$E(h),h=G0(e,t,r,a),h===null&&Wv(e,t,a,Vm,r),h===l)break;l=h}l!==null&&a.stopPropagation()}else Wv(e,t,a,null,r)}}var Vm=null;function G0(e,t,r,a){if(Vm=null,e=k1(a),e=Ll(e),e!==null)if(t=ac(e),t===null)e=null;else if(r=t.tag,r===13){if(e=AE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vm=e,null}function HE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h5()){case A1:return 1;case OE:return 4;case $m:case f5:return 16;case DE:return 536870912;default:return 16}default:return 16}}var ks=null,O1=null,gm=null;function WE(){if(gm)return gm;var e,t=O1,r=t.length,a,l="value"in ks?ks.value:ks.textContent,h=l.length;for(e=0;e<r&&t[e]===l[e];e++);var f=r-e;for(a=1;a<=f&&t[r-a]===l[h-a];a++);return gm=l.slice(e,1<a?1-a:void 0)}function ym(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hp(){return!0}function Jw(){return!1}function lo(e){function t(r,a,l,h,f){this._reactName=r,this._targetInst=l,this.type=a,this.nativeEvent=h,this.target=f,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Hp:Jw,this.isPropagationStopped=Jw,this}return Xr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hp)},persist:function(){},isPersistent:Hp}),t}var Ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D1=lo(Ou),ff=Xr({},Ou,{view:0,detail:0}),T5=lo(ff),Dv,Fv,lh,Eg=Xr({},ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lh&&(lh&&e.type==="mousemove"?(Dv=e.screenX-lh.screenX,Fv=e.screenY-lh.screenY):Fv=Dv=0,lh=e),Dv)},movementY:function(e){return"movementY"in e?e.movementY:Fv}}),Qw=lo(Eg),I5=Xr({},Eg,{dataTransfer:0}),P5=lo(I5),M5=Xr({},ff,{relatedTarget:0}),Bv=lo(M5),k5=Xr({},Ou,{animationName:0,elapsedTime:0,pseudoElement:0}),A5=lo(k5),R5=Xr({},Ou,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),z5=lo(R5),L5=Xr({},Ou,{data:0}),e2=lo(L5),O5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=F5[e])?!!t[e]:!1}function F1(){return B5}var $5=Xr({},ff,{key:function(e){if(e.key){var t=O5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ym(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?D5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F1,charCode:function(e){return e.type==="keypress"?ym(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ym(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N5=lo($5),j5=Xr({},Eg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t2=lo(j5),V5=Xr({},ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F1}),U5=lo(V5),H5=Xr({},Ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),W5=lo(H5),G5=Xr({},Eg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),q5=lo(G5),Z5=[9,13,27,32],B1=Za&&"CompositionEvent"in window,wh=null;Za&&"documentMode"in document&&(wh=document.documentMode);var K5=Za&&"TextEvent"in window&&!wh,GE=Za&&(!B1||wh&&8<wh&&11>=wh),r2=" ",n2=!1;function qE(e,t){switch(e){case"keyup":return Z5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qc=!1;function X5(e,t){switch(e){case"compositionend":return ZE(t);case"keypress":return t.which!==32?null:(n2=!0,r2);case"textInput":return e=t.data,e===r2&&n2?null:e;default:return null}}function Y5(e,t){if(Qc)return e==="compositionend"||!B1&&qE(e,t)?(e=WE(),gm=O1=ks=null,Qc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return GE&&t.locale!=="ko"?null:t.data;default:return null}}var J5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J5[e.type]:t==="textarea"}function KE(e,t,r,a){TE(a),t=Um(t,"onChange"),0<t.length&&(r=new D1("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Sh=null,$h=null;function Q5(e){aT(e,0)}function Tg(e){var t=ru(e);if(_E(t))return e}function e4(e,t){if(e==="change")return t}var XE=!1;if(Za){var $v;if(Za){var Nv="oninput"in document;if(!Nv){var o2=document.createElement("div");o2.setAttribute("oninput","return;"),Nv=typeof o2.oninput=="function"}$v=Nv}else $v=!1;XE=$v&&(!document.documentMode||9<document.documentMode)}function a2(){Sh&&(Sh.detachEvent("onpropertychange",YE),$h=Sh=null)}function YE(e){if(e.propertyName==="value"&&Tg($h)){var t=[];KE(t,$h,e,k1(e)),kE(Q5,t)}}function t4(e,t,r){e==="focusin"?(a2(),Sh=t,$h=r,Sh.attachEvent("onpropertychange",YE)):e==="focusout"&&a2()}function r4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tg($h)}function n4(e,t){if(e==="click")return Tg(t)}function i4(e,t){if(e==="input"||e==="change")return Tg(t)}function o4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jo=typeof Object.is=="function"?Object.is:o4;function Nh(e,t){if(Jo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var l=r[a];if(!P0.call(t,l)||!Jo(e[l],t[l]))return!1}return!0}function s2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function l2(e,t){var r=s2(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=s2(r)}}function JE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?JE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function QE(){for(var e=window,t=Dm();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Dm(e.document)}return t}function $1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function a4(e){var t=QE(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&JE(r.ownerDocument.documentElement,r)){if(a!==null&&$1(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,h=Math.min(a.start,l);a=a.end===void 0?h:Math.min(a.end,l),!e.extend&&h>a&&(l=a,a=h,h=l),l=l2(r,h);var f=l2(r,a);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>a?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var s4=Za&&"documentMode"in document&&11>=document.documentMode,eu=null,q0=null,Ch=null,Z0=!1;function c2(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Z0||eu==null||eu!==Dm(a)||(a=eu,"selectionStart"in a&&$1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ch&&Nh(Ch,a)||(Ch=a,a=Um(q0,"onSelect"),0<a.length&&(t=new D1("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=eu)))}function Wp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var tu={animationend:Wp("Animation","AnimationEnd"),animationiteration:Wp("Animation","AnimationIteration"),animationstart:Wp("Animation","AnimationStart"),transitionend:Wp("Transition","TransitionEnd")},jv={},eT={};Za&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Ig(e){if(jv[e])return jv[e];if(!tu[e])return e;var t=tu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eT)return jv[e]=t[r];return e}var tT=Ig("animationend"),rT=Ig("animationiteration"),nT=Ig("animationstart"),iT=Ig("transitionend"),oT=new Map,u2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(e,t){oT.set(e,t),oc(t,[e])}for(var Vv=0;Vv<u2.length;Vv++){var Uv=u2[Vv],l4=Uv.toLowerCase(),c4=Uv[0].toUpperCase()+Uv.slice(1);Zs(l4,"on"+c4)}Zs(tT,"onAnimationEnd");Zs(rT,"onAnimationIteration");Zs(nT,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs(iT,"onTransitionEnd");_u("onMouseEnter",["mouseout","mouseover"]);_u("onMouseLeave",["mouseout","mouseover"]);_u("onPointerEnter",["pointerout","pointerover"]);_u("onPointerLeave",["pointerout","pointerover"]);oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u4=new Set("cancel close invalid load scroll toggle".split(" ").concat(yh));function d2(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,l5(a,t,void 0,e),e.currentTarget=null}function aT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],l=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var f=a.length-1;0<=f;f--){var u=a[f],w=u.instance,C=u.currentTarget;if(u=u.listener,w!==h&&l.isPropagationStopped())break e;d2(l,u,C),h=w}else for(f=0;f<a.length;f++){if(u=a[f],w=u.instance,C=u.currentTarget,u=u.listener,w!==h&&l.isPropagationStopped())break e;d2(l,u,C),h=w}}}if(Bm)throw e=U0,Bm=!1,U0=null,e}function Rr(e,t){var r=t[Q0];r===void 0&&(r=t[Q0]=new Set);var a=e+"__bubble";r.has(a)||(sT(t,e,2,!1),r.add(a))}function Hv(e,t,r){var a=0;t&&(a|=4),sT(r,e,a,t)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function jh(e){if(!e[Gp]){e[Gp]=!0,pE.forEach(function(r){r!=="selectionchange"&&(u4.has(r)||Hv(r,!1,e),Hv(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gp]||(t[Gp]=!0,Hv("selectionchange",!1,t))}}function sT(e,t,r,a){switch(HE(t)){case 1:var l=C5;break;case 4:l=E5;break;default:l=L1}r=l.bind(null,t,r,e),l=void 0,!V0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function Wv(e,t,r,a,l){var h=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var f=a.tag;if(f===3||f===4){var u=a.stateNode.containerInfo;if(u===l||u.nodeType===8&&u.parentNode===l)break;if(f===4)for(f=a.return;f!==null;){var w=f.tag;if((w===3||w===4)&&(w=f.stateNode.containerInfo,w===l||w.nodeType===8&&w.parentNode===l))return;f=f.return}for(;u!==null;){if(f=Ll(u),f===null)return;if(w=f.tag,w===5||w===6){a=h=f;continue e}u=u.parentNode}}a=a.return}kE(function(){var C=h,I=k1(r),k=[];e:{var A=oT.get(e);if(A!==void 0){var q=D1,G=e;switch(e){case"keypress":if(ym(r)===0)break e;case"keydown":case"keyup":q=N5;break;case"focusin":G="focus",q=Bv;break;case"focusout":G="blur",q=Bv;break;case"beforeblur":case"afterblur":q=Bv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Qw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=P5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=U5;break;case tT:case rT:case nT:q=A5;break;case iT:q=W5;break;case"scroll":q=T5;break;case"wheel":q=q5;break;case"copy":case"cut":case"paste":q=z5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=t2}var Z=(t&4)!==0,K=!Z&&e==="scroll",j=Z?A!==null?A+"Capture":null:A;Z=[];for(var O=C,$;O!==null;){$=O;var J=$.stateNode;if($.tag===5&&J!==null&&($=J,j!==null&&(J=Oh(O,j),J!=null&&Z.push(Vh(O,J,$)))),K)break;O=O.return}0<Z.length&&(A=new q(A,G,null,r,I),k.push({event:A,listeners:Z}))}}if(!(t&7)){e:{if(A=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",A&&r!==N0&&(G=r.relatedTarget||r.fromElement)&&(Ll(G)||G[Ka]))break e;if((q||A)&&(A=I.window===I?I:(A=I.ownerDocument)?A.defaultView||A.parentWindow:window,q?(G=r.relatedTarget||r.toElement,q=C,G=G?Ll(G):null,G!==null&&(K=ac(G),G!==K||G.tag!==5&&G.tag!==6)&&(G=null)):(q=null,G=C),q!==G)){if(Z=Qw,J="onMouseLeave",j="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Z=t2,J="onPointerLeave",j="onPointerEnter",O="pointer"),K=q==null?A:ru(q),$=G==null?A:ru(G),A=new Z(J,O+"leave",q,r,I),A.target=K,A.relatedTarget=$,J=null,Ll(I)===C&&(Z=new Z(j,O+"enter",G,r,I),Z.target=$,Z.relatedTarget=K,J=Z),K=J,q&&G)t:{for(Z=q,j=G,O=0,$=Z;$;$=Gc($))O++;for($=0,J=j;J;J=Gc(J))$++;for(;0<O-$;)Z=Gc(Z),O--;for(;0<$-O;)j=Gc(j),$--;for(;O--;){if(Z===j||j!==null&&Z===j.alternate)break t;Z=Gc(Z),j=Gc(j)}Z=null}else Z=null;q!==null&&h2(k,A,q,Z,!1),G!==null&&K!==null&&h2(k,K,G,Z,!0)}}e:{if(A=C?ru(C):window,q=A.nodeName&&A.nodeName.toLowerCase(),q==="select"||q==="input"&&A.type==="file")var ne=e4;else if(i2(A))if(XE)ne=i4;else{ne=r4;var oe=t4}else(q=A.nodeName)&&q.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(ne=n4);if(ne&&(ne=ne(e,C))){KE(k,ne,r,I);break e}oe&&oe(e,A,C),e==="focusout"&&(oe=A._wrapperState)&&oe.controlled&&A.type==="number"&&O0(A,"number",A.value)}switch(oe=C?ru(C):window,e){case"focusin":(i2(oe)||oe.contentEditable==="true")&&(eu=oe,q0=C,Ch=null);break;case"focusout":Ch=q0=eu=null;break;case"mousedown":Z0=!0;break;case"contextmenu":case"mouseup":case"dragend":Z0=!1,c2(k,r,I);break;case"selectionchange":if(s4)break;case"keydown":case"keyup":c2(k,r,I)}var le;if(B1)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Qc?qE(e,r)&&(be="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(be="onCompositionStart");be&&(GE&&r.locale!=="ko"&&(Qc||be!=="onCompositionStart"?be==="onCompositionEnd"&&Qc&&(le=WE()):(ks=I,O1="value"in ks?ks.value:ks.textContent,Qc=!0)),oe=Um(C,be),0<oe.length&&(be=new e2(be,e,null,r,I),k.push({event:be,listeners:oe}),le?be.data=le:(le=ZE(r),le!==null&&(be.data=le)))),(le=K5?X5(e,r):Y5(e,r))&&(C=Um(C,"onBeforeInput"),0<C.length&&(I=new e2("onBeforeInput","beforeinput",null,r,I),k.push({event:I,listeners:C}),I.data=le))}aT(k,t)})}function Vh(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Um(e,t){for(var r=t+"Capture",a=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Oh(e,r),h!=null&&a.unshift(Vh(e,h,l)),h=Oh(e,t),h!=null&&a.push(Vh(e,h,l))),e=e.return}return a}function Gc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function h2(e,t,r,a,l){for(var h=t._reactName,f=[];r!==null&&r!==a;){var u=r,w=u.alternate,C=u.stateNode;if(w!==null&&w===a)break;u.tag===5&&C!==null&&(u=C,l?(w=Oh(r,h),w!=null&&f.unshift(Vh(r,w,u))):l||(w=Oh(r,h),w!=null&&f.push(Vh(r,w,u)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var d4=/\r\n?/g,h4=/\u0000|\uFFFD/g;function f2(e){return(typeof e=="string"?e:""+e).replace(d4,`
`).replace(h4,"")}function qp(e,t,r){if(t=f2(t),f2(e)!==t&&r)throw Error(it(425))}function Hm(){}var K0=null,X0=null;function Y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var J0=typeof setTimeout=="function"?setTimeout:void 0,f4=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,p4=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(e){return p2.resolve(null).then(e).catch(m4)}:J0;function m4(e){setTimeout(function(){throw e})}function Gv(e,t){var r=t,a=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(a===0){e.removeChild(l),Bh(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=l}while(r);Bh(t)}function Bs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function m2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Du=Math.random().toString(36).slice(2),pa="__reactFiber$"+Du,Uh="__reactProps$"+Du,Ka="__reactContainer$"+Du,Q0="__reactEvents$"+Du,g4="__reactListeners$"+Du,y4="__reactHandles$"+Du;function Ll(e){var t=e[pa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ka]||r[pa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=m2(e);e!==null;){if(r=e[pa])return r;e=m2(e)}return t}e=r,r=e.parentNode}return null}function pf(e){return e=e[pa]||e[Ka],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ru(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(it(33))}function Pg(e){return e[Uh]||null}var e_=[],nu=-1;function Ks(e){return{current:e}}function zr(e){0>nu||(e.current=e_[nu],e_[nu]=null,nu--)}function Mr(e,t){nu++,e_[nu]=e.current,e.current=t}var Ws={},oi=Ks(Ws),Li=Ks(!1),Xl=Ws;function xu(e,t){var r=e.type.contextTypes;if(!r)return Ws;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in r)l[h]=t[h];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Oi(e){return e=e.childContextTypes,e!=null}function Wm(){zr(Li),zr(oi)}function g2(e,t,r){if(oi.current!==Ws)throw Error(it(168));Mr(oi,t),Mr(Li,r)}function lT(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var l in a)if(!(l in t))throw Error(it(108,t5(e)||"Unknown",l));return Xr({},r,a)}function Gm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,Xl=oi.current,Mr(oi,e),Mr(Li,Li.current),!0}function y2(e,t,r){var a=e.stateNode;if(!a)throw Error(it(169));r?(e=lT(e,t,Xl),a.__reactInternalMemoizedMergedChildContext=e,zr(Li),zr(oi),Mr(oi,e)):zr(Li),Mr(Li,r)}var ja=null,Mg=!1,qv=!1;function cT(e){ja===null?ja=[e]:ja.push(e)}function v4(e){Mg=!0,cT(e)}function Xs(){if(!qv&&ja!==null){qv=!0;var e=0,t=mr;try{var r=ja;for(mr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}ja=null,Mg=!1}catch(l){throw ja!==null&&(ja=ja.slice(e+1)),LE(A1,Xs),l}finally{mr=t,qv=!1}}return null}var iu=[],ou=0,qm=null,Zm=0,xo=[],bo=0,Yl=null,Ua=1,Ha="";function Ml(e,t){iu[ou++]=Zm,iu[ou++]=qm,qm=e,Zm=t}function uT(e,t,r){xo[bo++]=Ua,xo[bo++]=Ha,xo[bo++]=Yl,Yl=e;var a=Ua;e=Ha;var l=32-Zo(a)-1;a&=~(1<<l),r+=1;var h=32-Zo(t)+l;if(30<h){var f=l-l%5;h=(a&(1<<f)-1).toString(32),a>>=f,l-=f,Ua=1<<32-Zo(t)+l|r<<l|a,Ha=h+e}else Ua=1<<h|r<<l|a,Ha=e}function N1(e){e.return!==null&&(Ml(e,1),uT(e,1,0))}function j1(e){for(;e===qm;)qm=iu[--ou],iu[ou]=null,Zm=iu[--ou],iu[ou]=null;for(;e===Yl;)Yl=xo[--bo],xo[bo]=null,Ha=xo[--bo],xo[bo]=null,Ua=xo[--bo],xo[bo]=null}var no=null,eo=null,Vr=!1,Go=null;function dT(e,t){var r=wo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function v2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,no=e,eo=Bs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,no=e,eo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yl!==null?{id:Ua,overflow:Ha}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,no=e,eo=null,!0):!1;default:return!1}}function t_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function r_(e){if(Vr){var t=eo;if(t){var r=t;if(!v2(e,t)){if(t_(e))throw Error(it(418));t=Bs(r.nextSibling);var a=no;t&&v2(e,t)?dT(a,r):(e.flags=e.flags&-4097|2,Vr=!1,no=e)}}else{if(t_(e))throw Error(it(418));e.flags=e.flags&-4097|2,Vr=!1,no=e}}}function _2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;no=e}function Zp(e){if(e!==no)return!1;if(!Vr)return _2(e),Vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Y0(e.type,e.memoizedProps)),t&&(t=eo)){if(t_(e))throw hT(),Error(it(418));for(;t;)dT(e,t),t=Bs(t.nextSibling)}if(_2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(it(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){eo=Bs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}eo=null}}else eo=no?Bs(e.stateNode.nextSibling):null;return!0}function hT(){for(var e=eo;e;)e=Bs(e.nextSibling)}function bu(){eo=no=null,Vr=!1}function V1(e){Go===null?Go=[e]:Go.push(e)}var _4=es.ReactCurrentBatchConfig;function ch(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(it(309));var a=r.stateNode}if(!a)throw Error(it(147,e));var l=a,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(f){var u=l.refs;f===null?delete u[h]:u[h]=f},t._stringRef=h,t)}if(typeof e!="string")throw Error(it(284));if(!r._owner)throw Error(it(290,e))}return e}function Kp(e,t){throw e=Object.prototype.toString.call(t),Error(it(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x2(e){var t=e._init;return t(e._payload)}function fT(e){function t(j,O){if(e){var $=j.deletions;$===null?(j.deletions=[O],j.flags|=16):$.push(O)}}function r(j,O){if(!e)return null;for(;O!==null;)t(j,O),O=O.sibling;return null}function a(j,O){for(j=new Map;O!==null;)O.key!==null?j.set(O.key,O):j.set(O.index,O),O=O.sibling;return j}function l(j,O){return j=Vs(j,O),j.index=0,j.sibling=null,j}function h(j,O,$){return j.index=$,e?($=j.alternate,$!==null?($=$.index,$<O?(j.flags|=2,O):$):(j.flags|=2,O)):(j.flags|=1048576,O)}function f(j){return e&&j.alternate===null&&(j.flags|=2),j}function u(j,O,$,J){return O===null||O.tag!==6?(O=e0($,j.mode,J),O.return=j,O):(O=l(O,$),O.return=j,O)}function w(j,O,$,J){var ne=$.type;return ne===Jc?I(j,O,$.props.children,J,$.key):O!==null&&(O.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ts&&x2(ne)===O.type)?(J=l(O,$.props),J.ref=ch(j,O,$),J.return=j,J):(J=Cm($.type,$.key,$.props,null,j.mode,J),J.ref=ch(j,O,$),J.return=j,J)}function C(j,O,$,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=t0($,j.mode,J),O.return=j,O):(O=l(O,$.children||[]),O.return=j,O)}function I(j,O,$,J,ne){return O===null||O.tag!==7?(O=Hl($,j.mode,J,ne),O.return=j,O):(O=l(O,$),O.return=j,O)}function k(j,O,$){if(typeof O=="string"&&O!==""||typeof O=="number")return O=e0(""+O,j.mode,$),O.return=j,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Bp:return $=Cm(O.type,O.key,O.props,null,j.mode,$),$.ref=ch(j,null,O),$.return=j,$;case Yc:return O=t0(O,j.mode,$),O.return=j,O;case Ts:var J=O._init;return k(j,J(O._payload),$)}if(mh(O)||ih(O))return O=Hl(O,j.mode,$,null),O.return=j,O;Kp(j,O)}return null}function A(j,O,$,J){var ne=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ne!==null?null:u(j,O,""+$,J);if(typeof $=="object"&&$!==null){switch($.$$typeof){case Bp:return $.key===ne?w(j,O,$,J):null;case Yc:return $.key===ne?C(j,O,$,J):null;case Ts:return ne=$._init,A(j,O,ne($._payload),J)}if(mh($)||ih($))return ne!==null?null:I(j,O,$,J,null);Kp(j,$)}return null}function q(j,O,$,J,ne){if(typeof J=="string"&&J!==""||typeof J=="number")return j=j.get($)||null,u(O,j,""+J,ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Bp:return j=j.get(J.key===null?$:J.key)||null,w(O,j,J,ne);case Yc:return j=j.get(J.key===null?$:J.key)||null,C(O,j,J,ne);case Ts:var oe=J._init;return q(j,O,$,oe(J._payload),ne)}if(mh(J)||ih(J))return j=j.get($)||null,I(O,j,J,ne,null);Kp(O,J)}return null}function G(j,O,$,J){for(var ne=null,oe=null,le=O,be=O=0,Ee=null;le!==null&&be<$.length;be++){le.index>be?(Ee=le,le=null):Ee=le.sibling;var ke=A(j,le,$[be],J);if(ke===null){le===null&&(le=Ee);break}e&&le&&ke.alternate===null&&t(j,le),O=h(ke,O,be),oe===null?ne=ke:oe.sibling=ke,oe=ke,le=Ee}if(be===$.length)return r(j,le),Vr&&Ml(j,be),ne;if(le===null){for(;be<$.length;be++)le=k(j,$[be],J),le!==null&&(O=h(le,O,be),oe===null?ne=le:oe.sibling=le,oe=le);return Vr&&Ml(j,be),ne}for(le=a(j,le);be<$.length;be++)Ee=q(le,j,be,$[be],J),Ee!==null&&(e&&Ee.alternate!==null&&le.delete(Ee.key===null?be:Ee.key),O=h(Ee,O,be),oe===null?ne=Ee:oe.sibling=Ee,oe=Ee);return e&&le.forEach(function(Ae){return t(j,Ae)}),Vr&&Ml(j,be),ne}function Z(j,O,$,J){var ne=ih($);if(typeof ne!="function")throw Error(it(150));if($=ne.call($),$==null)throw Error(it(151));for(var oe=ne=null,le=O,be=O=0,Ee=null,ke=$.next();le!==null&&!ke.done;be++,ke=$.next()){le.index>be?(Ee=le,le=null):Ee=le.sibling;var Ae=A(j,le,ke.value,J);if(Ae===null){le===null&&(le=Ee);break}e&&le&&Ae.alternate===null&&t(j,le),O=h(Ae,O,be),oe===null?ne=Ae:oe.sibling=Ae,oe=Ae,le=Ee}if(ke.done)return r(j,le),Vr&&Ml(j,be),ne;if(le===null){for(;!ke.done;be++,ke=$.next())ke=k(j,ke.value,J),ke!==null&&(O=h(ke,O,be),oe===null?ne=ke:oe.sibling=ke,oe=ke);return Vr&&Ml(j,be),ne}for(le=a(j,le);!ke.done;be++,ke=$.next())ke=q(le,j,be,ke.value,J),ke!==null&&(e&&ke.alternate!==null&&le.delete(ke.key===null?be:ke.key),O=h(ke,O,be),oe===null?ne=ke:oe.sibling=ke,oe=ke);return e&&le.forEach(function(Ye){return t(j,Ye)}),Vr&&Ml(j,be),ne}function K(j,O,$,J){if(typeof $=="object"&&$!==null&&$.type===Jc&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case Bp:e:{for(var ne=$.key,oe=O;oe!==null;){if(oe.key===ne){if(ne=$.type,ne===Jc){if(oe.tag===7){r(j,oe.sibling),O=l(oe,$.props.children),O.return=j,j=O;break e}}else if(oe.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Ts&&x2(ne)===oe.type){r(j,oe.sibling),O=l(oe,$.props),O.ref=ch(j,oe,$),O.return=j,j=O;break e}r(j,oe);break}else t(j,oe);oe=oe.sibling}$.type===Jc?(O=Hl($.props.children,j.mode,J,$.key),O.return=j,j=O):(J=Cm($.type,$.key,$.props,null,j.mode,J),J.ref=ch(j,O,$),J.return=j,j=J)}return f(j);case Yc:e:{for(oe=$.key;O!==null;){if(O.key===oe)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){r(j,O.sibling),O=l(O,$.children||[]),O.return=j,j=O;break e}else{r(j,O);break}else t(j,O);O=O.sibling}O=t0($,j.mode,J),O.return=j,j=O}return f(j);case Ts:return oe=$._init,K(j,O,oe($._payload),J)}if(mh($))return G(j,O,$,J);if(ih($))return Z(j,O,$,J);Kp(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,O!==null&&O.tag===6?(r(j,O.sibling),O=l(O,$),O.return=j,j=O):(r(j,O),O=e0($,j.mode,J),O.return=j,j=O),f(j)):r(j,O)}return K}var wu=fT(!0),pT=fT(!1),Km=Ks(null),Xm=null,au=null,U1=null;function H1(){U1=au=Xm=null}function W1(e){var t=Km.current;zr(Km),e._currentValue=t}function n_(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function gu(e,t){Xm=e,U1=au=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ri=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(U1!==e)if(e={context:e,memoizedValue:t,next:null},au===null){if(Xm===null)throw Error(it(308));au=e,Xm.dependencies={lanes:0,firstContext:e}}else au=au.next=e;return t}var Ol=null;function G1(e){Ol===null?Ol=[e]:Ol.push(e)}function mT(e,t,r,a){var l=t.interleaved;return l===null?(r.next=r,G1(t)):(r.next=l.next,l.next=r),t.interleaved=r,Xa(e,a)}function Xa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Is=!1;function q1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,lr&2){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,Xa(e,r)}return l=a.interleaved,l===null?(t.next=t,G1(a)):(t.next=l.next,l.next=t),a.interleaved=t,Xa(e,r)}function vm(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,R1(e,r)}}function b2(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var l=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?l=h=f:h=h.next=f,r=r.next}while(r!==null);h===null?l=h=t:h=h.next=t}else l=h=t;r={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ym(e,t,r,a){var l=e.updateQueue;Is=!1;var h=l.firstBaseUpdate,f=l.lastBaseUpdate,u=l.shared.pending;if(u!==null){l.shared.pending=null;var w=u,C=w.next;w.next=null,f===null?h=C:f.next=C,f=w;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==f&&(u===null?I.firstBaseUpdate=C:u.next=C,I.lastBaseUpdate=w))}if(h!==null){var k=l.baseState;f=0,I=C=w=null,u=h;do{var A=u.lane,q=u.eventTime;if((a&A)===A){I!==null&&(I=I.next={eventTime:q,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var G=e,Z=u;switch(A=t,q=r,Z.tag){case 1:if(G=Z.payload,typeof G=="function"){k=G.call(q,k,A);break e}k=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=Z.payload,A=typeof G=="function"?G.call(q,k,A):G,A==null)break e;k=Xr({},k,A);break e;case 2:Is=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,A=l.effects,A===null?l.effects=[u]:A.push(u))}else q={eventTime:q,lane:A,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(C=I=q,w=k):I=I.next=q,f|=A;if(u=u.next,u===null){if(u=l.shared.pending,u===null)break;A=u,u=A.next,A.next=null,l.lastBaseUpdate=A,l.shared.pending=null}}while(!0);if(I===null&&(w=k),l.baseState=w,l.firstBaseUpdate=C,l.lastBaseUpdate=I,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);Ql|=f,e.lanes=f,e.memoizedState=k}}function w2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(l!==null){if(a.callback=null,a=r,typeof l!="function")throw Error(it(191,l));l.call(a)}}}var mf={},ya=Ks(mf),Hh=Ks(mf),Wh=Ks(mf);function Dl(e){if(e===mf)throw Error(it(174));return e}function Z1(e,t){switch(Mr(Wh,t),Mr(Hh,e),Mr(ya,mf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:F0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=F0(t,e)}zr(ya),Mr(ya,t)}function Su(){zr(ya),zr(Hh),zr(Wh)}function yT(e){Dl(Wh.current);var t=Dl(ya.current),r=F0(t,e.type);t!==r&&(Mr(Hh,e),Mr(ya,r))}function K1(e){Hh.current===e&&(zr(ya),zr(Hh))}var Zr=Ks(0);function Jm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zv=[];function X1(){for(var e=0;e<Zv.length;e++)Zv[e]._workInProgressVersionPrimary=null;Zv.length=0}var _m=es.ReactCurrentDispatcher,Kv=es.ReactCurrentBatchConfig,Jl=0,Kr=null,Tn=null,Dn=null,Qm=!1,Eh=!1,Gh=0,x4=0;function ri(){throw Error(it(321))}function Y1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Jo(e[r],t[r]))return!1;return!0}function J1(e,t,r,a,l,h){if(Jl=h,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_m.current=e===null||e.memoizedState===null?C4:E4,e=r(a,l),Eh){h=0;do{if(Eh=!1,Gh=0,25<=h)throw Error(it(301));h+=1,Dn=Tn=null,t.updateQueue=null,_m.current=T4,e=r(a,l)}while(Eh)}if(_m.current=eg,t=Tn!==null&&Tn.next!==null,Jl=0,Dn=Tn=Kr=null,Qm=!1,t)throw Error(it(300));return e}function Q1(){var e=Gh!==0;return Gh=0,e}function fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Kr.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function Eo(){if(Tn===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=Tn.next;var t=Dn===null?Kr.memoizedState:Dn.next;if(t!==null)Dn=t,Tn=e;else{if(e===null)throw Error(it(310));Tn=e,e={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Dn===null?Kr.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function qh(e,t){return typeof t=="function"?t(e):t}function Xv(e){var t=Eo(),r=t.queue;if(r===null)throw Error(it(311));r.lastRenderedReducer=e;var a=Tn,l=a.baseQueue,h=r.pending;if(h!==null){if(l!==null){var f=l.next;l.next=h.next,h.next=f}a.baseQueue=l=h,r.pending=null}if(l!==null){h=l.next,a=a.baseState;var u=f=null,w=null,C=h;do{var I=C.lane;if((Jl&I)===I)w!==null&&(w=w.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),a=C.hasEagerState?C.eagerState:e(a,C.action);else{var k={lane:I,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};w===null?(u=w=k,f=a):w=w.next=k,Kr.lanes|=I,Ql|=I}C=C.next}while(C!==null&&C!==h);w===null?f=a:w.next=u,Jo(a,t.memoizedState)||(Ri=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=w,r.lastRenderedState=a}if(e=r.interleaved,e!==null){l=e;do h=l.lane,Kr.lanes|=h,Ql|=h,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Yv(e){var t=Eo(),r=t.queue;if(r===null)throw Error(it(311));r.lastRenderedReducer=e;var a=r.dispatch,l=r.pending,h=t.memoizedState;if(l!==null){r.pending=null;var f=l=l.next;do h=e(h,f.action),f=f.next;while(f!==l);Jo(h,t.memoizedState)||(Ri=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,a]}function vT(){}function _T(e,t){var r=Kr,a=Eo(),l=t(),h=!Jo(a.memoizedState,l);if(h&&(a.memoizedState=l,Ri=!0),a=a.queue,ex(wT.bind(null,r,a,e),[e]),a.getSnapshot!==t||h||Dn!==null&&Dn.memoizedState.tag&1){if(r.flags|=2048,Zh(9,bT.bind(null,r,a,l,t),void 0,null),Fn===null)throw Error(it(349));Jl&30||xT(r,t,l)}return l}function xT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bT(e,t,r,a){t.value=r,t.getSnapshot=a,ST(t)&&CT(e)}function wT(e,t,r){return r(function(){ST(t)&&CT(e)})}function ST(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Jo(e,r)}catch{return!0}}function CT(e){var t=Xa(e,1);t!==null&&Ko(t,e,1,-1)}function S2(e){var t=fa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:e},t.queue=e,e=e.dispatch=S4.bind(null,Kr,e),[t.memoizedState,e]}function Zh(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function ET(){return Eo().memoizedState}function xm(e,t,r,a){var l=fa();Kr.flags|=e,l.memoizedState=Zh(1|t,r,void 0,a===void 0?null:a)}function kg(e,t,r,a){var l=Eo();a=a===void 0?null:a;var h=void 0;if(Tn!==null){var f=Tn.memoizedState;if(h=f.destroy,a!==null&&Y1(a,f.deps)){l.memoizedState=Zh(t,r,h,a);return}}Kr.flags|=e,l.memoizedState=Zh(1|t,r,h,a)}function C2(e,t){return xm(8390656,8,e,t)}function ex(e,t){return kg(2048,8,e,t)}function TT(e,t){return kg(4,2,e,t)}function IT(e,t){return kg(4,4,e,t)}function PT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function MT(e,t,r){return r=r!=null?r.concat([e]):null,kg(4,4,PT.bind(null,t,e),r)}function tx(){}function kT(e,t){var r=Eo();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Y1(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function AT(e,t){var r=Eo();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Y1(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function RT(e,t,r){return Jl&21?(Jo(r,t)||(r=FE(),Kr.lanes|=r,Ql|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ri=!0),e.memoizedState=r)}function b4(e,t){var r=mr;mr=r!==0&&4>r?r:4,e(!0);var a=Kv.transition;Kv.transition={};try{e(!1),t()}finally{mr=r,Kv.transition=a}}function zT(){return Eo().memoizedState}function w4(e,t,r){var a=js(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},LT(e))OT(t,r);else if(r=mT(e,t,r,a),r!==null){var l=wi();Ko(r,e,a,l),DT(r,t,a)}}function S4(e,t,r){var a=js(e),l={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(LT(e))OT(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var f=t.lastRenderedState,u=h(f,r);if(l.hasEagerState=!0,l.eagerState=u,Jo(u,f)){var w=t.interleaved;w===null?(l.next=l,G1(t)):(l.next=w.next,w.next=l),t.interleaved=l;return}}catch{}finally{}r=mT(e,t,l,a),r!==null&&(l=wi(),Ko(r,e,a,l),DT(r,t,a))}}function LT(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function OT(e,t){Eh=Qm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function DT(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,R1(e,r)}}var eg={readContext:Co,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},C4={readContext:Co,useCallback:function(e,t){return fa().memoizedState=[e,t===void 0?null:t],e},useContext:Co,useEffect:C2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xm(4194308,4,PT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xm(4194308,4,e,t)},useInsertionEffect:function(e,t){return xm(4,2,e,t)},useMemo:function(e,t){var r=fa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=fa();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=w4.bind(null,Kr,e),[a.memoizedState,e]},useRef:function(e){var t=fa();return e={current:e},t.memoizedState=e},useState:S2,useDebugValue:tx,useDeferredValue:function(e){return fa().memoizedState=e},useTransition:function(){var e=S2(!1),t=e[0];return e=b4.bind(null,e[1]),fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Kr,l=fa();if(Vr){if(r===void 0)throw Error(it(407));r=r()}else{if(r=t(),Fn===null)throw Error(it(349));Jl&30||xT(a,t,r)}l.memoizedState=r;var h={value:r,getSnapshot:t};return l.queue=h,C2(wT.bind(null,a,h,e),[e]),a.flags|=2048,Zh(9,bT.bind(null,a,h,r,t),void 0,null),r},useId:function(){var e=fa(),t=Fn.identifierPrefix;if(Vr){var r=Ha,a=Ua;r=(a&~(1<<32-Zo(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Gh++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=x4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},E4={readContext:Co,useCallback:kT,useContext:Co,useEffect:ex,useImperativeHandle:MT,useInsertionEffect:TT,useLayoutEffect:IT,useMemo:AT,useReducer:Xv,useRef:ET,useState:function(){return Xv(qh)},useDebugValue:tx,useDeferredValue:function(e){var t=Eo();return RT(t,Tn.memoizedState,e)},useTransition:function(){var e=Xv(qh)[0],t=Eo().memoizedState;return[e,t]},useMutableSource:vT,useSyncExternalStore:_T,useId:zT,unstable_isNewReconciler:!1},T4={readContext:Co,useCallback:kT,useContext:Co,useEffect:ex,useImperativeHandle:MT,useInsertionEffect:TT,useLayoutEffect:IT,useMemo:AT,useReducer:Yv,useRef:ET,useState:function(){return Yv(qh)},useDebugValue:tx,useDeferredValue:function(e){var t=Eo();return Tn===null?t.memoizedState=e:RT(t,Tn.memoizedState,e)},useTransition:function(){var e=Yv(qh)[0],t=Eo().memoizedState;return[e,t]},useMutableSource:vT,useSyncExternalStore:_T,useId:zT,unstable_isNewReconciler:!1};function Vo(e,t){if(e&&e.defaultProps){t=Xr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function i_(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Xr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ag={isMounted:function(e){return(e=e._reactInternals)?ac(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=wi(),l=js(e),h=Wa(a,l);h.payload=t,r!=null&&(h.callback=r),t=$s(e,h,l),t!==null&&(Ko(t,e,l,a),vm(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=wi(),l=js(e),h=Wa(a,l);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=$s(e,h,l),t!==null&&(Ko(t,e,l,a),vm(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wi(),a=js(e),l=Wa(r,a);l.tag=2,t!=null&&(l.callback=t),t=$s(e,l,a),t!==null&&(Ko(t,e,a,r),vm(t,e,a))}};function E2(e,t,r,a,l,h,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,f):t.prototype&&t.prototype.isPureReactComponent?!Nh(r,a)||!Nh(l,h):!0}function FT(e,t,r){var a=!1,l=Ws,h=t.contextType;return typeof h=="object"&&h!==null?h=Co(h):(l=Oi(t)?Xl:oi.current,a=t.contextTypes,h=(a=a!=null)?xu(e,l):Ws),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ag,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function T2(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Ag.enqueueReplaceState(t,t.state,null)}function o_(e,t,r,a){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},q1(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Co(h):(h=Oi(t)?Xl:oi.current,l.context=xu(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(i_(e,t,h,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ag.enqueueReplaceState(l,l.state,null),Ym(e,r,l,a),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Cu(e,t){try{var r="",a=t;do r+=e5(a),a=a.return;while(a);var l=r}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function Jv(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function a_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var I4=typeof WeakMap=="function"?WeakMap:Map;function BT(e,t,r){r=Wa(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){rg||(rg=!0,g_=a),a_(e,t)},r}function $T(e,t,r){r=Wa(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var l=t.value;r.payload=function(){return a(l)},r.callback=function(){a_(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){a_(e,t),typeof a!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function I2(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new I4;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(r)||(l.add(r),e=j4.bind(null,e,t,r),t.then(e,e))}function P2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M2(e,t,r,a,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wa(-1,1),t.tag=2,$s(r,t,1))),r.lanes|=1),e)}var P4=es.ReactCurrentOwner,Ri=!1;function bi(e,t,r,a){t.child=e===null?pT(t,null,r,a):wu(t,e.child,r,a)}function k2(e,t,r,a,l){r=r.render;var h=t.ref;return gu(t,l),a=J1(e,t,r,a,h,l),r=Q1(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ya(e,t,l)):(Vr&&r&&N1(t),t.flags|=1,bi(e,t,a,l),t.child)}function A2(e,t,r,a,l){if(e===null){var h=r.type;return typeof h=="function"&&!cx(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,NT(e,t,h,a,l)):(e=Cm(r.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&l)){var f=h.memoizedProps;if(r=r.compare,r=r!==null?r:Nh,r(f,a)&&e.ref===t.ref)return Ya(e,t,l)}return t.flags|=1,e=Vs(h,a),e.ref=t.ref,e.return=t,t.child=e}function NT(e,t,r,a,l){if(e!==null){var h=e.memoizedProps;if(Nh(h,a)&&e.ref===t.ref)if(Ri=!1,t.pendingProps=a=h,(e.lanes&l)!==0)e.flags&131072&&(Ri=!0);else return t.lanes=e.lanes,Ya(e,t,l)}return s_(e,t,r,a,l)}function jT(e,t,r){var a=t.pendingProps,l=a.children,h=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(lu,Ji),Ji|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mr(lu,Ji),Ji|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=h!==null?h.baseLanes:r,Mr(lu,Ji),Ji|=a}else h!==null?(a=h.baseLanes|r,t.memoizedState=null):a=r,Mr(lu,Ji),Ji|=a;return bi(e,t,l,r),t.child}function VT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function s_(e,t,r,a,l){var h=Oi(r)?Xl:oi.current;return h=xu(t,h),gu(t,l),r=J1(e,t,r,a,h,l),a=Q1(),e!==null&&!Ri?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ya(e,t,l)):(Vr&&a&&N1(t),t.flags|=1,bi(e,t,r,l),t.child)}function R2(e,t,r,a,l){if(Oi(r)){var h=!0;Gm(t)}else h=!1;if(gu(t,l),t.stateNode===null)bm(e,t),FT(t,r,a),o_(t,r,a,l),a=!0;else if(e===null){var f=t.stateNode,u=t.memoizedProps;f.props=u;var w=f.context,C=r.contextType;typeof C=="object"&&C!==null?C=Co(C):(C=Oi(r)?Xl:oi.current,C=xu(t,C));var I=r.getDerivedStateFromProps,k=typeof I=="function"||typeof f.getSnapshotBeforeUpdate=="function";k||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==a||w!==C)&&T2(t,f,a,C),Is=!1;var A=t.memoizedState;f.state=A,Ym(t,a,f,l),w=t.memoizedState,u!==a||A!==w||Li.current||Is?(typeof I=="function"&&(i_(t,r,I,a),w=t.memoizedState),(u=Is||E2(t,r,u,a,A,w,C))?(k||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=w),f.props=a,f.state=w,f.context=C,a=u):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,gT(e,t),u=t.memoizedProps,C=t.type===t.elementType?u:Vo(t.type,u),f.props=C,k=t.pendingProps,A=f.context,w=r.contextType,typeof w=="object"&&w!==null?w=Co(w):(w=Oi(r)?Xl:oi.current,w=xu(t,w));var q=r.getDerivedStateFromProps;(I=typeof q=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(u!==k||A!==w)&&T2(t,f,a,w),Is=!1,A=t.memoizedState,f.state=A,Ym(t,a,f,l);var G=t.memoizedState;u!==k||A!==G||Li.current||Is?(typeof q=="function"&&(i_(t,r,q,a),G=t.memoizedState),(C=Is||E2(t,r,C,a,A,G,w)||!1)?(I||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,G,w),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,G,w)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=G),f.props=a,f.state=G,f.context=w,a=C):(typeof f.componentDidUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),a=!1)}return l_(e,t,r,a,h,l)}function l_(e,t,r,a,l,h){VT(e,t);var f=(t.flags&128)!==0;if(!a&&!f)return l&&y2(t,r,!1),Ya(e,t,h);a=t.stateNode,P4.current=t;var u=f&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&f?(t.child=wu(t,e.child,null,h),t.child=wu(t,null,u,h)):bi(e,t,u,h),t.memoizedState=a.state,l&&y2(t,r,!0),t.child}function UT(e){var t=e.stateNode;t.pendingContext?g2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g2(e,t.context,!1),Z1(e,t.containerInfo)}function z2(e,t,r,a,l){return bu(),V1(l),t.flags|=256,bi(e,t,r,a),t.child}var c_={dehydrated:null,treeContext:null,retryLane:0};function u_(e){return{baseLanes:e,cachePool:null,transitions:null}}function HT(e,t,r){var a=t.pendingProps,l=Zr.current,h=!1,f=(t.flags&128)!==0,u;if((u=f)||(u=e!==null&&e.memoizedState===null?!1:(l&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Mr(Zr,l&1),e===null)return r_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=a.children,e=a.fallback,h?(a=t.mode,h=t.child,f={mode:"hidden",children:f},!(a&1)&&h!==null?(h.childLanes=0,h.pendingProps=f):h=Lg(f,a,0,null),e=Hl(e,a,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=u_(r),t.memoizedState=c_,e):rx(t,f));if(l=e.memoizedState,l!==null&&(u=l.dehydrated,u!==null))return M4(e,t,f,a,u,l,r);if(h){h=a.fallback,f=t.mode,l=e.child,u=l.sibling;var w={mode:"hidden",children:a.children};return!(f&1)&&t.child!==l?(a=t.child,a.childLanes=0,a.pendingProps=w,t.deletions=null):(a=Vs(l,w),a.subtreeFlags=l.subtreeFlags&14680064),u!==null?h=Vs(u,h):(h=Hl(h,f,r,null),h.flags|=2),h.return=t,a.return=t,a.sibling=h,t.child=a,a=h,h=t.child,f=e.child.memoizedState,f=f===null?u_(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},h.memoizedState=f,h.childLanes=e.childLanes&~r,t.memoizedState=c_,a}return h=e.child,e=h.sibling,a=Vs(h,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function rx(e,t){return t=Lg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xp(e,t,r,a){return a!==null&&V1(a),wu(t,e.child,null,r),e=rx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function M4(e,t,r,a,l,h,f){if(r)return t.flags&256?(t.flags&=-257,a=Jv(Error(it(422))),Xp(e,t,f,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=a.fallback,l=t.mode,a=Lg({mode:"visible",children:a.children},l,0,null),h=Hl(h,l,f,null),h.flags|=2,a.return=t,h.return=t,a.sibling=h,t.child=a,t.mode&1&&wu(t,e.child,null,f),t.child.memoizedState=u_(f),t.memoizedState=c_,h);if(!(t.mode&1))return Xp(e,t,f,null);if(l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var u=a.dgst;return a=u,h=Error(it(419)),a=Jv(h,a,void 0),Xp(e,t,f,a)}if(u=(f&e.childLanes)!==0,Ri||u){if(a=Fn,a!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(a.suspendedLanes|f)?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,Xa(e,l),Ko(a,e,l,-1))}return lx(),a=Jv(Error(it(421))),Xp(e,t,f,a)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=V4.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,eo=Bs(l.nextSibling),no=t,Vr=!0,Go=null,e!==null&&(xo[bo++]=Ua,xo[bo++]=Ha,xo[bo++]=Yl,Ua=e.id,Ha=e.overflow,Yl=t),t=rx(t,a.children),t.flags|=4096,t)}function L2(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),n_(e.return,t,r)}function Qv(e,t,r,a,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=a,h.tail=r,h.tailMode=l)}function WT(e,t,r){var a=t.pendingProps,l=a.revealOrder,h=a.tail;if(bi(e,t,a.children,r),a=Zr.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L2(e,r,t);else if(e.tag===19)L2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Mr(Zr,a),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Jm(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Qv(t,!1,l,r,h);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Jm(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Qv(t,!0,r,null,h);break;case"together":Qv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ql|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(it(153));if(t.child!==null){for(e=t.child,r=Vs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function k4(e,t,r){switch(t.tag){case 3:UT(t),bu();break;case 5:yT(t);break;case 1:Oi(t.type)&&Gm(t);break;case 4:Z1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;Mr(Km,a._currentValue),a._currentValue=l;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Mr(Zr,Zr.current&1),t.flags|=128,null):r&t.child.childLanes?HT(e,t,r):(Mr(Zr,Zr.current&1),e=Ya(e,t,r),e!==null?e.sibling:null);Mr(Zr,Zr.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return WT(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Mr(Zr,Zr.current),a)break;return null;case 22:case 23:return t.lanes=0,jT(e,t,r)}return Ya(e,t,r)}var GT,d_,qT,ZT;GT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};d_=function(){};qT=function(e,t,r,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,Dl(ya.current);var h=null;switch(r){case"input":l=z0(e,l),a=z0(e,a),h=[];break;case"select":l=Xr({},l,{value:void 0}),a=Xr({},a,{value:void 0}),h=[];break;case"textarea":l=D0(e,l),a=D0(e,a),h=[];break;default:typeof l.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Hm)}B0(r,a);var f;r=null;for(C in l)if(!a.hasOwnProperty(C)&&l.hasOwnProperty(C)&&l[C]!=null)if(C==="style"){var u=l[C];for(f in u)u.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(zh.hasOwnProperty(C)?h||(h=[]):(h=h||[]).push(C,null));for(C in a){var w=a[C];if(u=l!=null?l[C]:void 0,a.hasOwnProperty(C)&&w!==u&&(w!=null||u!=null))if(C==="style")if(u){for(f in u)!u.hasOwnProperty(f)||w&&w.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in w)w.hasOwnProperty(f)&&u[f]!==w[f]&&(r||(r={}),r[f]=w[f])}else r||(h||(h=[]),h.push(C,r)),r=w;else C==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,u=u?u.__html:void 0,w!=null&&u!==w&&(h=h||[]).push(C,w)):C==="children"?typeof w!="string"&&typeof w!="number"||(h=h||[]).push(C,""+w):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(zh.hasOwnProperty(C)?(w!=null&&C==="onScroll"&&Rr("scroll",e),h||u===w||(h=[])):(h=h||[]).push(C,w))}r&&(h=h||[]).push("style",r);var C=h;(t.updateQueue=C)&&(t.flags|=4)}};ZT=function(e,t,r,a){r!==a&&(t.flags|=4)};function uh(e,t){if(!Vr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function ni(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags&14680064,a|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function A4(e,t,r){var a=t.pendingProps;switch(j1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(t),null;case 1:return Oi(t.type)&&Wm(),ni(t),null;case 3:return a=t.stateNode,Su(),zr(Li),zr(oi),X1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Zp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Go!==null&&(__(Go),Go=null))),d_(e,t),ni(t),null;case 5:K1(t);var l=Dl(Wh.current);if(r=t.type,e!==null&&t.stateNode!=null)qT(e,t,r,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(it(166));return ni(t),null}if(e=Dl(ya.current),Zp(t)){a=t.stateNode,r=t.type;var h=t.memoizedProps;switch(a[pa]=t,a[Uh]=h,e=(t.mode&1)!==0,r){case"dialog":Rr("cancel",a),Rr("close",a);break;case"iframe":case"object":case"embed":Rr("load",a);break;case"video":case"audio":for(l=0;l<yh.length;l++)Rr(yh[l],a);break;case"source":Rr("error",a);break;case"img":case"image":case"link":Rr("error",a),Rr("load",a);break;case"details":Rr("toggle",a);break;case"input":Uw(a,h),Rr("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!h.multiple},Rr("invalid",a);break;case"textarea":Ww(a,h),Rr("invalid",a)}B0(r,h),l=null;for(var f in h)if(h.hasOwnProperty(f)){var u=h[f];f==="children"?typeof u=="string"?a.textContent!==u&&(h.suppressHydrationWarning!==!0&&qp(a.textContent,u,e),l=["children",u]):typeof u=="number"&&a.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&qp(a.textContent,u,e),l=["children",""+u]):zh.hasOwnProperty(f)&&u!=null&&f==="onScroll"&&Rr("scroll",a)}switch(r){case"input":$p(a),Hw(a,h,!0);break;case"textarea":$p(a),Gw(a);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(a.onclick=Hm)}a=l,t.updateQueue=a,a!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=f.createElement(r,{is:a.is}):(e=f.createElement(r),r==="select"&&(f=e,a.multiple?f.multiple=!0:a.size&&(f.size=a.size))):e=f.createElementNS(e,r),e[pa]=t,e[Uh]=a,GT(e,t,!1,!1),t.stateNode=e;e:{switch(f=$0(r,a),r){case"dialog":Rr("cancel",e),Rr("close",e),l=a;break;case"iframe":case"object":case"embed":Rr("load",e),l=a;break;case"video":case"audio":for(l=0;l<yh.length;l++)Rr(yh[l],e);l=a;break;case"source":Rr("error",e),l=a;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),l=a;break;case"details":Rr("toggle",e),l=a;break;case"input":Uw(e,a),l=z0(e,a),Rr("invalid",e);break;case"option":l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=Xr({},a,{value:void 0}),Rr("invalid",e);break;case"textarea":Ww(e,a),l=D0(e,a),Rr("invalid",e);break;default:l=a}B0(r,l),u=l;for(h in u)if(u.hasOwnProperty(h)){var w=u[h];h==="style"?EE(e,w):h==="dangerouslySetInnerHTML"?(w=w?w.__html:void 0,w!=null&&SE(e,w)):h==="children"?typeof w=="string"?(r!=="textarea"||w!=="")&&Lh(e,w):typeof w=="number"&&Lh(e,""+w):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zh.hasOwnProperty(h)?w!=null&&h==="onScroll"&&Rr("scroll",e):w!=null&&T1(e,h,w,f))}switch(r){case"input":$p(e),Hw(e,a,!1);break;case"textarea":$p(e),Gw(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Hs(a.value));break;case"select":e.multiple=!!a.multiple,h=a.value,h!=null?hu(e,!!a.multiple,h,!1):a.defaultValue!=null&&hu(e,!!a.multiple,a.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Hm)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ni(t),null;case 6:if(e&&t.stateNode!=null)ZT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(it(166));if(r=Dl(Wh.current),Dl(ya.current),Zp(t)){if(a=t.stateNode,r=t.memoizedProps,a[pa]=t,(h=a.nodeValue!==r)&&(e=no,e!==null))switch(e.tag){case 3:qp(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qp(a.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[pa]=t,t.stateNode=a}return ni(t),null;case 13:if(zr(Zr),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vr&&eo!==null&&t.mode&1&&!(t.flags&128))hT(),bu(),t.flags|=98560,h=!1;else if(h=Zp(t),a!==null&&a.dehydrated!==null){if(e===null){if(!h)throw Error(it(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(it(317));h[pa]=t}else bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ni(t),h=!1}else Go!==null&&(__(Go),Go=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Zr.current&1?In===0&&(In=3):lx())),t.updateQueue!==null&&(t.flags|=4),ni(t),null);case 4:return Su(),d_(e,t),e===null&&jh(t.stateNode.containerInfo),ni(t),null;case 10:return W1(t.type._context),ni(t),null;case 17:return Oi(t.type)&&Wm(),ni(t),null;case 19:if(zr(Zr),h=t.memoizedState,h===null)return ni(t),null;if(a=(t.flags&128)!==0,f=h.rendering,f===null)if(a)uh(h,!1);else{if(In!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Jm(e),f!==null){for(t.flags|=128,uh(h,!1),a=f.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)h=r,e=a,h.flags&=14680066,f=h.alternate,f===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=f.childLanes,h.lanes=f.lanes,h.child=f.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=f.memoizedProps,h.memoizedState=f.memoizedState,h.updateQueue=f.updateQueue,h.type=f.type,e=f.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Mr(Zr,Zr.current&1|2),t.child}e=e.sibling}h.tail!==null&&gn()>Eu&&(t.flags|=128,a=!0,uh(h,!1),t.lanes=4194304)}else{if(!a)if(e=Jm(f),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),uh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Vr)return ni(t),null}else 2*gn()-h.renderingStartTime>Eu&&r!==1073741824&&(t.flags|=128,a=!0,uh(h,!1),t.lanes=4194304);h.isBackwards?(f.sibling=t.child,t.child=f):(r=h.last,r!==null?r.sibling=f:t.child=f,h.last=f)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=gn(),t.sibling=null,r=Zr.current,Mr(Zr,a?r&1|2:r&1),t):(ni(t),null);case 22:case 23:return sx(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ji&1073741824&&(ni(t),t.subtreeFlags&6&&(t.flags|=8192)):ni(t),null;case 24:return null;case 25:return null}throw Error(it(156,t.tag))}function R4(e,t){switch(j1(t),t.tag){case 1:return Oi(t.type)&&Wm(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Su(),zr(Li),zr(oi),X1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return K1(t),null;case 13:if(zr(Zr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(it(340));bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return zr(Zr),null;case 4:return Su(),null;case 10:return W1(t.type._context),null;case 22:case 23:return sx(),null;case 24:return null;default:return null}}var Yp=!1,ii=!1,z4=typeof WeakSet=="function"?WeakSet:Set,bt=null;function su(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){an(e,t,a)}else r.current=null}function h_(e,t,r){try{r()}catch(a){an(e,t,a)}}var O2=!1;function L4(e,t){if(K0=jm,e=QE(),$1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var l=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var f=0,u=-1,w=-1,C=0,I=0,k=e,A=null;t:for(;;){for(var q;k!==r||l!==0&&k.nodeType!==3||(u=f+l),k!==h||a!==0&&k.nodeType!==3||(w=f+a),k.nodeType===3&&(f+=k.nodeValue.length),(q=k.firstChild)!==null;)A=k,k=q;for(;;){if(k===e)break t;if(A===r&&++C===l&&(u=f),A===h&&++I===a&&(w=f),(q=k.nextSibling)!==null)break;k=A,A=k.parentNode}k=q}r=u===-1||w===-1?null:{start:u,end:w}}else r=null}r=r||{start:0,end:0}}else r=null;for(X0={focusedElem:e,selectionRange:r},jm=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){t=bt;try{var G=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var Z=G.memoizedProps,K=G.memoizedState,j=t.stateNode,O=j.getSnapshotBeforeUpdate(t.elementType===t.type?Z:Vo(t.type,Z),K);j.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(it(163))}}catch(J){an(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}return G=O2,O2=!1,G}function Th(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&h_(t,r,h)}l=l.next}while(l!==a)}}function Rg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function f_(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function KT(e){var t=e.alternate;t!==null&&(e.alternate=null,KT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pa],delete t[Uh],delete t[Q0],delete t[g4],delete t[y4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function XT(e){return e.tag===5||e.tag===3||e.tag===4}function D2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||XT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function p_(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Hm));else if(a!==4&&(e=e.child,e!==null))for(p_(e,t,r),e=e.sibling;e!==null;)p_(e,t,r),e=e.sibling}function m_(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(m_(e,t,r),e=e.sibling;e!==null;)m_(e,t,r),e=e.sibling}var Gn=null,Uo=!1;function Cs(e,t,r){for(r=r.child;r!==null;)YT(e,t,r),r=r.sibling}function YT(e,t,r){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(Cg,r)}catch{}switch(r.tag){case 5:ii||su(r,t);case 6:var a=Gn,l=Uo;Gn=null,Cs(e,t,r),Gn=a,Uo=l,Gn!==null&&(Uo?(e=Gn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Gn.removeChild(r.stateNode));break;case 18:Gn!==null&&(Uo?(e=Gn,r=r.stateNode,e.nodeType===8?Gv(e.parentNode,r):e.nodeType===1&&Gv(e,r),Bh(e)):Gv(Gn,r.stateNode));break;case 4:a=Gn,l=Uo,Gn=r.stateNode.containerInfo,Uo=!0,Cs(e,t,r),Gn=a,Uo=l;break;case 0:case 11:case 14:case 15:if(!ii&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){l=a=a.next;do{var h=l,f=h.destroy;h=h.tag,f!==void 0&&(h&2||h&4)&&h_(r,t,f),l=l.next}while(l!==a)}Cs(e,t,r);break;case 1:if(!ii&&(su(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(u){an(r,t,u)}Cs(e,t,r);break;case 21:Cs(e,t,r);break;case 22:r.mode&1?(ii=(a=ii)||r.memoizedState!==null,Cs(e,t,r),ii=a):Cs(e,t,r);break;default:Cs(e,t,r)}}function F2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new z4),t.forEach(function(a){var l=U4.bind(null,e,a);r.has(a)||(r.add(a),a.then(l,l))})}}function $o(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];try{var h=e,f=t,u=f;e:for(;u!==null;){switch(u.tag){case 5:Gn=u.stateNode,Uo=!1;break e;case 3:Gn=u.stateNode.containerInfo,Uo=!0;break e;case 4:Gn=u.stateNode.containerInfo,Uo=!0;break e}u=u.return}if(Gn===null)throw Error(it(160));YT(h,f,l),Gn=null,Uo=!1;var w=l.alternate;w!==null&&(w.return=null),l.return=null}catch(C){an(l,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)JT(t,e),t=t.sibling}function JT(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($o(t,e),ha(e),a&4){try{Th(3,e,e.return),Rg(3,e)}catch(Z){an(e,e.return,Z)}try{Th(5,e,e.return)}catch(Z){an(e,e.return,Z)}}break;case 1:$o(t,e),ha(e),a&512&&r!==null&&su(r,r.return);break;case 5:if($o(t,e),ha(e),a&512&&r!==null&&su(r,r.return),e.flags&32){var l=e.stateNode;try{Lh(l,"")}catch(Z){an(e,e.return,Z)}}if(a&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,f=r!==null?r.memoizedProps:h,u=e.type,w=e.updateQueue;if(e.updateQueue=null,w!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&xE(l,h),$0(u,f);var C=$0(u,h);for(f=0;f<w.length;f+=2){var I=w[f],k=w[f+1];I==="style"?EE(l,k):I==="dangerouslySetInnerHTML"?SE(l,k):I==="children"?Lh(l,k):T1(l,I,k,C)}switch(u){case"input":L0(l,h);break;case"textarea":bE(l,h);break;case"select":var A=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var q=h.value;q!=null?hu(l,!!h.multiple,q,!1):A!==!!h.multiple&&(h.defaultValue!=null?hu(l,!!h.multiple,h.defaultValue,!0):hu(l,!!h.multiple,h.multiple?[]:"",!1))}l[Uh]=h}catch(Z){an(e,e.return,Z)}}break;case 6:if($o(t,e),ha(e),a&4){if(e.stateNode===null)throw Error(it(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(Z){an(e,e.return,Z)}}break;case 3:if($o(t,e),ha(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Bh(t.containerInfo)}catch(Z){an(e,e.return,Z)}break;case 4:$o(t,e),ha(e);break;case 13:$o(t,e),ha(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(ox=gn())),a&4&&F2(e);break;case 22:if(I=r!==null&&r.memoizedState!==null,e.mode&1?(ii=(C=ii)||I,$o(t,e),ii=C):$o(t,e),ha(e),a&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!I&&e.mode&1)for(bt=e,I=e.child;I!==null;){for(k=bt=I;bt!==null;){switch(A=bt,q=A.child,A.tag){case 0:case 11:case 14:case 15:Th(4,A,A.return);break;case 1:su(A,A.return);var G=A.stateNode;if(typeof G.componentWillUnmount=="function"){a=A,r=A.return;try{t=a,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(Z){an(a,r,Z)}}break;case 5:su(A,A.return);break;case 22:if(A.memoizedState!==null){$2(k);continue}}q!==null?(q.return=A,bt=q):$2(k)}I=I.sibling}e:for(I=null,k=e;;){if(k.tag===5){if(I===null){I=k;try{l=k.stateNode,C?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=k.stateNode,w=k.memoizedProps.style,f=w!=null&&w.hasOwnProperty("display")?w.display:null,u.style.display=CE("display",f))}catch(Z){an(e,e.return,Z)}}}else if(k.tag===6){if(I===null)try{k.stateNode.nodeValue=C?"":k.memoizedProps}catch(Z){an(e,e.return,Z)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;I===k&&(I=null),k=k.return}I===k&&(I=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:$o(t,e),ha(e),a&4&&F2(e);break;case 21:break;default:$o(t,e),ha(e)}}function ha(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(XT(r)){var a=r;break e}r=r.return}throw Error(it(160))}switch(a.tag){case 5:var l=a.stateNode;a.flags&32&&(Lh(l,""),a.flags&=-33);var h=D2(e);m_(e,h,l);break;case 3:case 4:var f=a.stateNode.containerInfo,u=D2(e);p_(e,u,f);break;default:throw Error(it(161))}}catch(w){an(e,e.return,w)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O4(e,t,r){bt=e,QT(e)}function QT(e,t,r){for(var a=(e.mode&1)!==0;bt!==null;){var l=bt,h=l.child;if(l.tag===22&&a){var f=l.memoizedState!==null||Yp;if(!f){var u=l.alternate,w=u!==null&&u.memoizedState!==null||ii;u=Yp;var C=ii;if(Yp=f,(ii=w)&&!C)for(bt=l;bt!==null;)f=bt,w=f.child,f.tag===22&&f.memoizedState!==null?N2(l):w!==null?(w.return=f,bt=w):N2(l);for(;h!==null;)bt=h,QT(h),h=h.sibling;bt=l,Yp=u,ii=C}B2(e)}else l.subtreeFlags&8772&&h!==null?(h.return=l,bt=h):B2(e)}}function B2(e){for(;bt!==null;){var t=bt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ii||Rg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!ii)if(r===null)a.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Vo(t.type,r.memoizedProps);a.componentDidUpdate(l,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&w2(t,h,a);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}w2(t,f,r)}break;case 5:var u=t.stateNode;if(r===null&&t.flags&4){r=u;var w=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":w.autoFocus&&r.focus();break;case"img":w.src&&(r.src=w.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var I=C.memoizedState;if(I!==null){var k=I.dehydrated;k!==null&&Bh(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(it(163))}ii||t.flags&512&&f_(t)}catch(A){an(t,t.return,A)}}if(t===e){bt=null;break}if(r=t.sibling,r!==null){r.return=t.return,bt=r;break}bt=t.return}}function $2(e){for(;bt!==null;){var t=bt;if(t===e){bt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,bt=r;break}bt=t.return}}function N2(e){for(;bt!==null;){var t=bt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Rg(4,t)}catch(w){an(t,r,w)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var l=t.return;try{a.componentDidMount()}catch(w){an(t,l,w)}}var h=t.return;try{f_(t)}catch(w){an(t,h,w)}break;case 5:var f=t.return;try{f_(t)}catch(w){an(t,f,w)}}}catch(w){an(t,t.return,w)}if(t===e){bt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,bt=u;break}bt=t.return}}var D4=Math.ceil,tg=es.ReactCurrentDispatcher,nx=es.ReactCurrentOwner,So=es.ReactCurrentBatchConfig,lr=0,Fn=null,wn=null,qn=0,Ji=0,lu=Ks(0),In=0,Kh=null,Ql=0,zg=0,ix=0,Ih=null,Ai=null,ox=0,Eu=1/0,Na=null,rg=!1,g_=null,Ns=null,Jp=!1,As=null,ng=0,Ph=0,y_=null,wm=-1,Sm=0;function wi(){return lr&6?gn():wm!==-1?wm:wm=gn()}function js(e){return e.mode&1?lr&2&&qn!==0?qn&-qn:_4.transition!==null?(Sm===0&&(Sm=FE()),Sm):(e=mr,e!==0||(e=window.event,e=e===void 0?16:HE(e.type)),e):1}function Ko(e,t,r,a){if(50<Ph)throw Ph=0,y_=null,Error(it(185));hf(e,r,a),(!(lr&2)||e!==Fn)&&(e===Fn&&(!(lr&2)&&(zg|=r),In===4&&Ms(e,qn)),Di(e,a),r===1&&lr===0&&!(t.mode&1)&&(Eu=gn()+500,Mg&&Xs()))}function Di(e,t){var r=e.callbackNode;_5(e,t);var a=Nm(e,e===Fn?qn:0);if(a===0)r!==null&&Kw(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Kw(r),t===1)e.tag===0?v4(j2.bind(null,e)):cT(j2.bind(null,e)),p4(function(){!(lr&6)&&Xs()}),r=null;else{switch(BE(a)){case 1:r=A1;break;case 4:r=OE;break;case 16:r=$m;break;case 536870912:r=DE;break;default:r=$m}r=sI(r,eI.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function eI(e,t){if(wm=-1,Sm=0,lr&6)throw Error(it(327));var r=e.callbackNode;if(yu()&&e.callbackNode!==r)return null;var a=Nm(e,e===Fn?qn:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ig(e,a);else{t=a;var l=lr;lr|=2;var h=rI();(Fn!==e||qn!==t)&&(Na=null,Eu=gn()+500,Ul(e,t));do try{$4();break}catch(u){tI(e,u)}while(!0);H1(),tg.current=h,lr=l,wn!==null?t=0:(Fn=null,qn=0,t=In)}if(t!==0){if(t===2&&(l=H0(e),l!==0&&(a=l,t=v_(e,l))),t===1)throw r=Kh,Ul(e,0),Ms(e,a),Di(e,gn()),r;if(t===6)Ms(e,a);else{if(l=e.current.alternate,!(a&30)&&!F4(l)&&(t=ig(e,a),t===2&&(h=H0(e),h!==0&&(a=h,t=v_(e,h))),t===1))throw r=Kh,Ul(e,0),Ms(e,a),Di(e,gn()),r;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(it(345));case 2:kl(e,Ai,Na);break;case 3:if(Ms(e,a),(a&130023424)===a&&(t=ox+500-gn(),10<t)){if(Nm(e,0)!==0)break;if(l=e.suspendedLanes,(l&a)!==a){wi(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=J0(kl.bind(null,e,Ai,Na),t);break}kl(e,Ai,Na);break;case 4:if(Ms(e,a),(a&4194240)===a)break;for(t=e.eventTimes,l=-1;0<a;){var f=31-Zo(a);h=1<<f,f=t[f],f>l&&(l=f),a&=~h}if(a=l,a=gn()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*D4(a/1960))-a,10<a){e.timeoutHandle=J0(kl.bind(null,e,Ai,Na),a);break}kl(e,Ai,Na);break;case 5:kl(e,Ai,Na);break;default:throw Error(it(329))}}}return Di(e,gn()),e.callbackNode===r?eI.bind(null,e):null}function v_(e,t){var r=Ih;return e.current.memoizedState.isDehydrated&&(Ul(e,t).flags|=256),e=ig(e,t),e!==2&&(t=Ai,Ai=r,t!==null&&__(t)),e}function __(e){Ai===null?Ai=e:Ai.push.apply(Ai,e)}function F4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var l=r[a],h=l.getSnapshot;l=l.value;try{if(!Jo(h(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ms(e,t){for(t&=~ix,t&=~zg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Zo(t),a=1<<r;e[r]=-1,t&=~a}}function j2(e){if(lr&6)throw Error(it(327));yu();var t=Nm(e,0);if(!(t&1))return Di(e,gn()),null;var r=ig(e,t);if(e.tag!==0&&r===2){var a=H0(e);a!==0&&(t=a,r=v_(e,a))}if(r===1)throw r=Kh,Ul(e,0),Ms(e,t),Di(e,gn()),r;if(r===6)throw Error(it(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Ai,Na),Di(e,gn()),null}function ax(e,t){var r=lr;lr|=1;try{return e(t)}finally{lr=r,lr===0&&(Eu=gn()+500,Mg&&Xs())}}function ec(e){As!==null&&As.tag===0&&!(lr&6)&&yu();var t=lr;lr|=1;var r=So.transition,a=mr;try{if(So.transition=null,mr=1,e)return e()}finally{mr=a,So.transition=r,lr=t,!(lr&6)&&Xs()}}function sx(){Ji=lu.current,zr(lu)}function Ul(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,f4(r)),wn!==null)for(r=wn.return;r!==null;){var a=r;switch(j1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Wm();break;case 3:Su(),zr(Li),zr(oi),X1();break;case 5:K1(a);break;case 4:Su();break;case 13:zr(Zr);break;case 19:zr(Zr);break;case 10:W1(a.type._context);break;case 22:case 23:sx()}r=r.return}if(Fn=e,wn=e=Vs(e.current,null),qn=Ji=t,In=0,Kh=null,ix=zg=Ql=0,Ai=Ih=null,Ol!==null){for(t=0;t<Ol.length;t++)if(r=Ol[t],a=r.interleaved,a!==null){r.interleaved=null;var l=a.next,h=r.pending;if(h!==null){var f=h.next;h.next=l,a.next=f}r.pending=a}Ol=null}return e}function tI(e,t){do{var r=wn;try{if(H1(),_m.current=eg,Qm){for(var a=Kr.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Qm=!1}if(Jl=0,Dn=Tn=Kr=null,Eh=!1,Gh=0,nx.current=null,r===null||r.return===null){In=1,Kh=t,wn=null;break}e:{var h=e,f=r.return,u=r,w=t;if(t=qn,u.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){var C=w,I=u,k=I.tag;if(!(I.mode&1)&&(k===0||k===11||k===15)){var A=I.alternate;A?(I.updateQueue=A.updateQueue,I.memoizedState=A.memoizedState,I.lanes=A.lanes):(I.updateQueue=null,I.memoizedState=null)}var q=P2(f);if(q!==null){q.flags&=-257,M2(q,f,u,h,t),q.mode&1&&I2(h,C,t),t=q,w=C;var G=t.updateQueue;if(G===null){var Z=new Set;Z.add(w),t.updateQueue=Z}else G.add(w);break e}else{if(!(t&1)){I2(h,C,t),lx();break e}w=Error(it(426))}}else if(Vr&&u.mode&1){var K=P2(f);if(K!==null){!(K.flags&65536)&&(K.flags|=256),M2(K,f,u,h,t),V1(Cu(w,u));break e}}h=w=Cu(w,u),In!==4&&(In=2),Ih===null?Ih=[h]:Ih.push(h),h=f;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var j=BT(h,w,t);b2(h,j);break e;case 1:u=w;var O=h.type,$=h.stateNode;if(!(h.flags&128)&&(typeof O.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ns===null||!Ns.has($)))){h.flags|=65536,t&=-t,h.lanes|=t;var J=$T(h,u,t);b2(h,J);break e}}h=h.return}while(h!==null)}iI(r)}catch(ne){t=ne,wn===r&&r!==null&&(wn=r=r.return);continue}break}while(!0)}function rI(){var e=tg.current;return tg.current=eg,e===null?eg:e}function lx(){(In===0||In===3||In===2)&&(In=4),Fn===null||!(Ql&268435455)&&!(zg&268435455)||Ms(Fn,qn)}function ig(e,t){var r=lr;lr|=2;var a=rI();(Fn!==e||qn!==t)&&(Na=null,Ul(e,t));do try{B4();break}catch(l){tI(e,l)}while(!0);if(H1(),lr=r,tg.current=a,wn!==null)throw Error(it(261));return Fn=null,qn=0,In}function B4(){for(;wn!==null;)nI(wn)}function $4(){for(;wn!==null&&!u5();)nI(wn)}function nI(e){var t=aI(e.alternate,e,Ji);e.memoizedProps=e.pendingProps,t===null?iI(e):wn=t,nx.current=null}function iI(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=R4(r,t),r!==null){r.flags&=32767,wn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{In=6,wn=null;return}}else if(r=A4(r,t,Ji),r!==null){wn=r;return}if(t=t.sibling,t!==null){wn=t;return}wn=t=e}while(t!==null);In===0&&(In=5)}function kl(e,t,r){var a=mr,l=So.transition;try{So.transition=null,mr=1,N4(e,t,r,a)}finally{So.transition=l,mr=a}return null}function N4(e,t,r,a){do yu();while(As!==null);if(lr&6)throw Error(it(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(it(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(x5(e,h),e===Fn&&(wn=Fn=null,qn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Jp||(Jp=!0,sI($m,function(){return yu(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=So.transition,So.transition=null;var f=mr;mr=1;var u=lr;lr|=4,nx.current=null,L4(e,r),JT(r,e),a4(X0),jm=!!K0,X0=K0=null,e.current=r,O4(r),d5(),lr=u,mr=f,So.transition=h}else e.current=r;if(Jp&&(Jp=!1,As=e,ng=l),h=e.pendingLanes,h===0&&(Ns=null),p5(r.stateNode),Di(e,gn()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],a(l.value,{componentStack:l.stack,digest:l.digest});if(rg)throw rg=!1,e=g_,g_=null,e;return ng&1&&e.tag!==0&&yu(),h=e.pendingLanes,h&1?e===y_?Ph++:(Ph=0,y_=e):Ph=0,Xs(),null}function yu(){if(As!==null){var e=BE(ng),t=So.transition,r=mr;try{if(So.transition=null,mr=16>e?16:e,As===null)var a=!1;else{if(e=As,As=null,ng=0,lr&6)throw Error(it(331));var l=lr;for(lr|=4,bt=e.current;bt!==null;){var h=bt,f=h.child;if(bt.flags&16){var u=h.deletions;if(u!==null){for(var w=0;w<u.length;w++){var C=u[w];for(bt=C;bt!==null;){var I=bt;switch(I.tag){case 0:case 11:case 15:Th(8,I,h)}var k=I.child;if(k!==null)k.return=I,bt=k;else for(;bt!==null;){I=bt;var A=I.sibling,q=I.return;if(KT(I),I===C){bt=null;break}if(A!==null){A.return=q,bt=A;break}bt=q}}}var G=h.alternate;if(G!==null){var Z=G.child;if(Z!==null){G.child=null;do{var K=Z.sibling;Z.sibling=null,Z=K}while(Z!==null)}}bt=h}}if(h.subtreeFlags&2064&&f!==null)f.return=h,bt=f;else e:for(;bt!==null;){if(h=bt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Th(9,h,h.return)}var j=h.sibling;if(j!==null){j.return=h.return,bt=j;break e}bt=h.return}}var O=e.current;for(bt=O;bt!==null;){f=bt;var $=f.child;if(f.subtreeFlags&2064&&$!==null)$.return=f,bt=$;else e:for(f=O;bt!==null;){if(u=bt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Rg(9,u)}}catch(ne){an(u,u.return,ne)}if(u===f){bt=null;break e}var J=u.sibling;if(J!==null){J.return=u.return,bt=J;break e}bt=u.return}}if(lr=l,Xs(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(Cg,e)}catch{}a=!0}return a}finally{mr=r,So.transition=t}}return!1}function V2(e,t,r){t=Cu(r,t),t=BT(e,t,1),e=$s(e,t,1),t=wi(),e!==null&&(hf(e,1,t),Di(e,t))}function an(e,t,r){if(e.tag===3)V2(e,e,r);else for(;t!==null;){if(t.tag===3){V2(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ns===null||!Ns.has(a))){e=Cu(r,e),e=$T(t,e,1),t=$s(t,e,1),e=wi(),t!==null&&(hf(t,1,e),Di(t,e));break}}t=t.return}}function j4(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=wi(),e.pingedLanes|=e.suspendedLanes&r,Fn===e&&(qn&r)===r&&(In===4||In===3&&(qn&130023424)===qn&&500>gn()-ox?Ul(e,0):ix|=r),Di(e,t)}function oI(e,t){t===0&&(e.mode&1?(t=Vp,Vp<<=1,!(Vp&130023424)&&(Vp=4194304)):t=1);var r=wi();e=Xa(e,t),e!==null&&(hf(e,t,r),Di(e,r))}function V4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),oI(e,r)}function U4(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(it(314))}a!==null&&a.delete(t),oI(e,r)}var aI;aI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Li.current)Ri=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ri=!1,k4(e,t,r);Ri=!!(e.flags&131072)}else Ri=!1,Vr&&t.flags&1048576&&uT(t,Zm,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;bm(e,t),e=t.pendingProps;var l=xu(t,oi.current);gu(t,r),l=J1(null,t,a,e,l,r);var h=Q1();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(a)?(h=!0,Gm(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,q1(t),l.updater=Ag,t.stateNode=l,l._reactInternals=t,o_(t,a,e,r),t=l_(null,t,a,!0,h,r)):(t.tag=0,Vr&&h&&N1(t),bi(null,t,l,r),t=t.child),t;case 16:a=t.elementType;e:{switch(bm(e,t),e=t.pendingProps,l=a._init,a=l(a._payload),t.type=a,l=t.tag=W4(a),e=Vo(a,e),l){case 0:t=s_(null,t,a,e,r);break e;case 1:t=R2(null,t,a,e,r);break e;case 11:t=k2(null,t,a,e,r);break e;case 14:t=A2(null,t,a,Vo(a.type,e),r);break e}throw Error(it(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Vo(a,l),s_(e,t,a,l,r);case 1:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Vo(a,l),R2(e,t,a,l,r);case 3:e:{if(UT(t),e===null)throw Error(it(387));a=t.pendingProps,h=t.memoizedState,l=h.element,gT(e,t),Ym(t,a,null,r);var f=t.memoizedState;if(a=f.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=Cu(Error(it(423)),t),t=z2(e,t,a,r,l);break e}else if(a!==l){l=Cu(Error(it(424)),t),t=z2(e,t,a,r,l);break e}else for(eo=Bs(t.stateNode.containerInfo.firstChild),no=t,Vr=!0,Go=null,r=pT(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bu(),a===l){t=Ya(e,t,r);break e}bi(e,t,a,r)}t=t.child}return t;case 5:return yT(t),e===null&&r_(t),a=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,f=l.children,Y0(a,l)?f=null:h!==null&&Y0(a,h)&&(t.flags|=32),VT(e,t),bi(e,t,f,r),t.child;case 6:return e===null&&r_(t),null;case 13:return HT(e,t,r);case 4:return Z1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=wu(t,null,a,r):bi(e,t,a,r),t.child;case 11:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Vo(a,l),k2(e,t,a,l,r);case 7:return bi(e,t,t.pendingProps,r),t.child;case 8:return bi(e,t,t.pendingProps.children,r),t.child;case 12:return bi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,h=t.memoizedProps,f=l.value,Mr(Km,a._currentValue),a._currentValue=f,h!==null)if(Jo(h.value,f)){if(h.children===l.children&&!Li.current){t=Ya(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){f=h.child;for(var w=u.firstContext;w!==null;){if(w.context===a){if(h.tag===1){w=Wa(-1,r&-r),w.tag=2;var C=h.updateQueue;if(C!==null){C=C.shared;var I=C.pending;I===null?w.next=w:(w.next=I.next,I.next=w),C.pending=w}}h.lanes|=r,w=h.alternate,w!==null&&(w.lanes|=r),n_(h.return,r,t),u.lanes|=r;break}w=w.next}}else if(h.tag===10)f=h.type===t.type?null:h.child;else if(h.tag===18){if(f=h.return,f===null)throw Error(it(341));f.lanes|=r,u=f.alternate,u!==null&&(u.lanes|=r),n_(f,r,t),f=h.sibling}else f=h.child;if(f!==null)f.return=h;else for(f=h;f!==null;){if(f===t){f=null;break}if(h=f.sibling,h!==null){h.return=f.return,f=h;break}f=f.return}h=f}bi(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,gu(t,r),l=Co(l),a=a(l),t.flags|=1,bi(e,t,a,r),t.child;case 14:return a=t.type,l=Vo(a,t.pendingProps),l=Vo(a.type,l),A2(e,t,a,l,r);case 15:return NT(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:Vo(a,l),bm(e,t),t.tag=1,Oi(a)?(e=!0,Gm(t)):e=!1,gu(t,r),FT(t,a,l),o_(t,a,l,r),l_(null,t,a,!0,e,r);case 19:return WT(e,t,r);case 22:return jT(e,t,r)}throw Error(it(156,t.tag))};function sI(e,t){return LE(e,t)}function H4(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(e,t,r,a){return new H4(e,t,r,a)}function cx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function W4(e){if(typeof e=="function")return cx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===P1)return 11;if(e===M1)return 14}return 2}function Vs(e,t){var r=e.alternate;return r===null?(r=wo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cm(e,t,r,a,l,h){var f=2;if(a=e,typeof e=="function")cx(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Jc:return Hl(r.children,l,h,t);case I1:f=8,l|=8;break;case M0:return e=wo(12,r,t,l|2),e.elementType=M0,e.lanes=h,e;case k0:return e=wo(13,r,t,l),e.elementType=k0,e.lanes=h,e;case A0:return e=wo(19,r,t,l),e.elementType=A0,e.lanes=h,e;case yE:return Lg(r,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mE:f=10;break e;case gE:f=9;break e;case P1:f=11;break e;case M1:f=14;break e;case Ts:f=16,a=null;break e}throw Error(it(130,e==null?e:typeof e,""))}return t=wo(f,r,t,l),t.elementType=e,t.type=a,t.lanes=h,t}function Hl(e,t,r,a){return e=wo(7,e,a,t),e.lanes=r,e}function Lg(e,t,r,a){return e=wo(22,e,a,t),e.elementType=yE,e.lanes=r,e.stateNode={isHidden:!1},e}function e0(e,t,r){return e=wo(6,e,null,t),e.lanes=r,e}function t0(e,t,r){return t=wo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function G4(e,t,r,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ov(0),this.expirationTimes=Ov(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ov(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ux(e,t,r,a,l,h,f,u,w){return e=new G4(e,t,r,u,w),t===1?(t=1,h===!0&&(t|=8)):t=0,h=wo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},q1(h),e}function q4(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function lI(e){if(!e)return Ws;e=e._reactInternals;e:{if(ac(e)!==e||e.tag!==1)throw Error(it(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(it(171))}if(e.tag===1){var r=e.type;if(Oi(r))return lT(e,r,t)}return t}function cI(e,t,r,a,l,h,f,u,w){return e=ux(r,a,!0,e,l,h,f,u,w),e.context=lI(null),r=e.current,a=wi(),l=js(r),h=Wa(a,l),h.callback=t??null,$s(r,h,l),e.current.lanes=l,hf(e,l,a),Di(e,a),e}function Og(e,t,r,a){var l=t.current,h=wi(),f=js(l);return r=lI(r),t.context===null?t.context=r:t.pendingContext=r,t=Wa(h,f),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=$s(l,t,f),e!==null&&(Ko(e,l,f,h),vm(e,l,f)),f}function og(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function U2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function dx(e,t){U2(e,t),(e=e.alternate)&&U2(e,t)}function Z4(){return null}var uI=typeof reportError=="function"?reportError:function(e){console.error(e)};function hx(e){this._internalRoot=e}Dg.prototype.render=hx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(it(409));Og(e,t,null,null)};Dg.prototype.unmount=hx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ec(function(){Og(null,e,null,null)}),t[Ka]=null}};function Dg(e){this._internalRoot=e}Dg.prototype.unstable_scheduleHydration=function(e){if(e){var t=jE();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ps.length&&t!==0&&t<Ps[r].priority;r++);Ps.splice(r,0,e),r===0&&UE(e)}};function fx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function H2(){}function K4(e,t,r,a,l){if(l){if(typeof a=="function"){var h=a;a=function(){var C=og(f);h.call(C)}}var f=cI(t,a,e,0,null,!1,!1,"",H2);return e._reactRootContainer=f,e[Ka]=f.current,jh(e.nodeType===8?e.parentNode:e),ec(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof a=="function"){var u=a;a=function(){var C=og(w);u.call(C)}}var w=ux(e,0,!1,null,null,!1,!1,"",H2);return e._reactRootContainer=w,e[Ka]=w.current,jh(e.nodeType===8?e.parentNode:e),ec(function(){Og(t,w,r,a)}),w}function Bg(e,t,r,a,l){var h=r._reactRootContainer;if(h){var f=h;if(typeof l=="function"){var u=l;l=function(){var w=og(f);u.call(w)}}Og(t,f,e,l)}else f=K4(r,t,e,l,a);return og(f)}$E=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gh(t.pendingLanes);r!==0&&(R1(t,r|1),Di(t,gn()),!(lr&6)&&(Eu=gn()+500,Xs()))}break;case 13:ec(function(){var a=Xa(e,1);if(a!==null){var l=wi();Ko(a,e,1,l)}}),dx(e,1)}};z1=function(e){if(e.tag===13){var t=Xa(e,134217728);if(t!==null){var r=wi();Ko(t,e,134217728,r)}dx(e,134217728)}};NE=function(e){if(e.tag===13){var t=js(e),r=Xa(e,t);if(r!==null){var a=wi();Ko(r,e,t,a)}dx(e,t)}};jE=function(){return mr};VE=function(e,t){var r=mr;try{return mr=e,t()}finally{mr=r}};j0=function(e,t,r){switch(t){case"input":if(L0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var l=Pg(a);if(!l)throw Error(it(90));_E(a),L0(a,l)}}}break;case"textarea":bE(e,r);break;case"select":t=r.value,t!=null&&hu(e,!!r.multiple,t,!1)}};PE=ax;ME=ec;var X4={usingClientEntryPoint:!1,Events:[pf,ru,Pg,TE,IE,ax]},dh={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y4={bundleType:dh.bundleType,version:dh.version,rendererPackageName:dh.rendererPackageName,rendererConfig:dh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RE(e),e===null?null:e.stateNode},findFiberByHostInstance:dh.findFiberByHostInstance||Z4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qp.isDisabled&&Qp.supportsFiber)try{Cg=Qp.inject(Y4),ga=Qp}catch{}}so.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X4;so.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fx(t))throw Error(it(200));return q4(e,t,null,r)};so.createRoot=function(e,t){if(!fx(e))throw Error(it(299));var r=!1,a="",l=uI;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=ux(e,1,!1,null,null,r,!1,a,l),e[Ka]=t.current,jh(e.nodeType===8?e.parentNode:e),new hx(t)};so.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(it(188)):(e=Object.keys(e).join(","),Error(it(268,e)));return e=RE(t),e=e===null?null:e.stateNode,e};so.flushSync=function(e){return ec(e)};so.hydrate=function(e,t,r){if(!Fg(t))throw Error(it(200));return Bg(null,e,t,!0,r)};so.hydrateRoot=function(e,t,r){if(!fx(e))throw Error(it(405));var a=r!=null&&r.hydratedSources||null,l=!1,h="",f=uI;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=cI(t,null,e,1,r??null,l,!1,h,f),e[Ka]=t.current,jh(e),a)for(e=0;e<a.length;e++)r=a[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Dg(t)};so.render=function(e,t,r){if(!Fg(t))throw Error(it(200));return Bg(null,e,t,!1,r)};so.unmountComponentAtNode=function(e){if(!Fg(e))throw Error(it(40));return e._reactRootContainer?(ec(function(){Bg(null,null,e,!1,function(){e._reactRootContainer=null,e[Ka]=null})}),!0):!1};so.unstable_batchedUpdates=ax;so.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Fg(r))throw Error(it(200));if(e==null||e._reactInternals===void 0)throw Error(it(38));return Bg(e,t,r,!1,a)};so.version="18.3.1-next-f1338f8080-20240426";function dI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dI)}catch(e){console.error(e)}}dI(),dE.exports=so;var Fu=dE.exports;const x_=uf(Fu),J4=QC({__proto__:null,default:x_},[Fu]);var W2=Fu;I0.createRoot=W2.createRoot,I0.hydrateRoot=W2.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xh.apply(this,arguments)}var Rs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rs||(Rs={}));const G2="popstate";function Q4(e){e===void 0&&(e={});function t(l,h){let{pathname:f="/",search:u="",hash:w=""}=sc(l.location.hash.substr(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),b_("",{pathname:f,search:u,hash:w},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function r(l,h){let f=l.document.querySelector("base"),u="";if(f&&f.getAttribute("href")){let w=l.location.href,C=w.indexOf("#");u=C===-1?w:w.slice(0,C)}return u+"#"+(typeof h=="string"?h:ag(h))}function a(l,h){px(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(h)+")")}return tR(t,r,a,e)}function sn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function px(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function eR(){return Math.random().toString(36).substr(2,8)}function q2(e,t){return{usr:e.state,key:e.key,idx:t}}function b_(e,t,r,a){return r===void 0&&(r=null),Xh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sc(t):t,{state:r,key:t&&t.key||a||eR()})}function ag(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function sc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function tR(e,t,r,a){a===void 0&&(a={});let{window:l=document.defaultView,v5Compat:h=!1}=a,f=l.history,u=Rs.Pop,w=null,C=I();C==null&&(C=0,f.replaceState(Xh({},f.state,{idx:C}),""));function I(){return(f.state||{idx:null}).idx}function k(){u=Rs.Pop;let K=I(),j=K==null?null:K-C;C=K,w&&w({action:u,location:Z.location,delta:j})}function A(K,j){u=Rs.Push;let O=b_(Z.location,K,j);r&&r(O,K),C=I()+1;let $=q2(O,C),J=Z.createHref(O);try{f.pushState($,"",J)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;l.location.assign(J)}h&&w&&w({action:u,location:Z.location,delta:1})}function q(K,j){u=Rs.Replace;let O=b_(Z.location,K,j);r&&r(O,K),C=I();let $=q2(O,C),J=Z.createHref(O);f.replaceState($,"",J),h&&w&&w({action:u,location:Z.location,delta:0})}function G(K){let j=l.location.origin!=="null"?l.location.origin:l.location.href,O=typeof K=="string"?K:ag(K);return O=O.replace(/ $/,"%20"),sn(j,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,j)}let Z={get action(){return u},get location(){return e(l,f)},listen(K){if(w)throw new Error("A history only accepts one active listener");return l.addEventListener(G2,k),w=K,()=>{l.removeEventListener(G2,k),w=null}},createHref(K){return t(l,K)},createURL:G,encodeLocation(K){let j=G(K);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:A,replace:q,go(K){return f.go(K)}};return Z}var Z2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Z2||(Z2={}));function rR(e,t,r){r===void 0&&(r="/");let a=typeof t=="string"?sc(t):t,l=Tu(a.pathname||"/",r);if(l==null)return null;let h=hI(e);nR(h);let f=null;for(let u=0;f==null&&u<h.length;++u){let w=pR(l);f=hR(h[u],w)}return f}function hI(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let l=(h,f,u)=>{let w={relativePath:u===void 0?h.path||"":u,caseSensitive:h.caseSensitive===!0,childrenIndex:f,route:h};w.relativePath.startsWith("/")&&(sn(w.relativePath.startsWith(a),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(a.length));let C=Us([a,w.relativePath]),I=r.concat(w);h.children&&h.children.length>0&&(sn(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+C+'".')),hI(h.children,t,I,C)),!(h.path==null&&!h.index)&&t.push({path:C,score:uR(C,h.index),routesMeta:I})};return e.forEach((h,f)=>{var u;if(h.path===""||!((u=h.path)!=null&&u.includes("?")))l(h,f);else for(let w of fI(h.path))l(h,f,w)}),t}function fI(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,l=r.endsWith("?"),h=r.replace(/\?$/,"");if(a.length===0)return l?[h,""]:[h];let f=fI(a.join("/")),u=[];return u.push(...f.map(w=>w===""?h:[h,w].join("/"))),l&&u.push(...f),u.map(w=>e.startsWith("/")&&w===""?"/":w)}function nR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:dR(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const iR=/^:[\w-]+$/,oR=3,aR=2,sR=1,lR=10,cR=-2,K2=e=>e==="*";function uR(e,t){let r=e.split("/"),a=r.length;return r.some(K2)&&(a+=cR),t&&(a+=aR),r.filter(l=>!K2(l)).reduce((l,h)=>l+(iR.test(h)?oR:h===""?sR:lR),a)}function dR(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function hR(e,t){let{routesMeta:r}=e,a={},l="/",h=[];for(let f=0;f<r.length;++f){let u=r[f],w=f===r.length-1,C=l==="/"?t:t.slice(l.length)||"/",I=w_({path:u.relativePath,caseSensitive:u.caseSensitive,end:w},C);if(!I)return null;Object.assign(a,I.params);let k=u.route;h.push({params:a,pathname:Us([l,I.pathname]),pathnameBase:vR(Us([l,I.pathnameBase])),route:k}),I.pathnameBase!=="/"&&(l=Us([l,I.pathnameBase]))}return h}function w_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=fR(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let h=l[0],f=h.replace(/(.)\/+$/,"$1"),u=l.slice(1);return{params:a.reduce((C,I,k)=>{let{paramName:A,isOptional:q}=I;if(A==="*"){let Z=u[k]||"";f=h.slice(0,h.length-Z.length).replace(/(.)\/+$/,"$1")}const G=u[k];return q&&!G?C[A]=void 0:C[A]=(G||"").replace(/%2F/g,"/"),C},{}),pathname:h,pathnameBase:f,pattern:e}}function fR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),px(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,u,w)=>(a.push({paramName:u,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function pR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return px(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Tu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function mR(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:l=""}=typeof e=="string"?sc(e):e;return{pathname:r?r.startsWith("/")?r:gR(r,t):t,search:_R(a),hash:xR(l)}}function gR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function r0(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function pI(e,t){let r=yR(e);return t?r.map((a,l)=>l===e.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function mI(e,t,r,a){a===void 0&&(a=!1);let l;typeof e=="string"?l=sc(e):(l=Xh({},e),sn(!l.pathname||!l.pathname.includes("?"),r0("?","pathname","search",l)),sn(!l.pathname||!l.pathname.includes("#"),r0("#","pathname","hash",l)),sn(!l.search||!l.search.includes("#"),r0("#","search","hash",l)));let h=e===""||l.pathname==="",f=h?"/":l.pathname,u;if(f==null)u=r;else{let k=t.length-1;if(!a&&f.startsWith("..")){let A=f.split("/");for(;A[0]==="..";)A.shift(),k-=1;l.pathname=A.join("/")}u=k>=0?t[k]:"/"}let w=mR(l,u),C=f&&f!=="/"&&f.endsWith("/"),I=(h||f===".")&&r.endsWith("/");return!w.pathname.endsWith("/")&&(C||I)&&(w.pathname+="/"),w}const Us=e=>e.join("/").replace(/\/\/+/g,"/"),vR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_R=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gI=["post","put","patch","delete"];new Set(gI);const wR=["get",...gI];new Set(wR);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Yh.apply(this,arguments)}const $g=L.createContext(null),yI=L.createContext(null),Ys=L.createContext(null),Ng=L.createContext(null),lc=L.createContext({outlet:null,matches:[],isDataRoute:!1}),vI=L.createContext(null);function SR(e,t){let{relative:r}=t===void 0?{}:t;gf()||sn(!1);let{basename:a,navigator:l}=L.useContext(Ys),{hash:h,pathname:f,search:u}=jg(e,{relative:r}),w=f;return a!=="/"&&(w=f==="/"?a:Us([a,f])),l.createHref({pathname:w,search:u,hash:h})}function gf(){return L.useContext(Ng)!=null}function yf(){return gf()||sn(!1),L.useContext(Ng).location}function _I(e){L.useContext(Ys).static||L.useLayoutEffect(e)}function CR(){let{isDataRoute:e}=L.useContext(lc);return e?FR():ER()}function ER(){gf()||sn(!1);let e=L.useContext($g),{basename:t,future:r,navigator:a}=L.useContext(Ys),{matches:l}=L.useContext(lc),{pathname:h}=yf(),f=JSON.stringify(pI(l,r.v7_relativeSplatPath)),u=L.useRef(!1);return _I(()=>{u.current=!0}),L.useCallback(function(C,I){if(I===void 0&&(I={}),!u.current)return;if(typeof C=="number"){a.go(C);return}let k=mI(C,JSON.parse(f),h,I.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Us([t,k.pathname])),(I.replace?a.replace:a.push)(k,I.state,I)},[t,a,f,h,e])}function jg(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=L.useContext(Ys),{matches:l}=L.useContext(lc),{pathname:h}=yf(),f=JSON.stringify(pI(l,a.v7_relativeSplatPath));return L.useMemo(()=>mI(e,JSON.parse(f),h,r==="path"),[e,f,h,r])}function TR(e,t){return IR(e,t)}function IR(e,t,r,a){gf()||sn(!1);let{navigator:l}=L.useContext(Ys),{matches:h}=L.useContext(lc),f=h[h.length-1],u=f?f.params:{};f&&f.pathname;let w=f?f.pathnameBase:"/";f&&f.route;let C=yf(),I;if(t){var k;let K=typeof t=="string"?sc(t):t;w==="/"||(k=K.pathname)!=null&&k.startsWith(w)||sn(!1),I=K}else I=C;let A=I.pathname||"/",q=A;if(w!=="/"){let K=w.replace(/^\//,"").split("/");q="/"+A.replace(/^\//,"").split("/").slice(K.length).join("/")}let G=rR(e,{pathname:q}),Z=RR(G&&G.map(K=>Object.assign({},K,{params:Object.assign({},u,K.params),pathname:Us([w,l.encodeLocation?l.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Us([w,l.encodeLocation?l.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,r,a);return t&&Z?L.createElement(Ng.Provider,{value:{location:Yh({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Rs.Pop}},Z):Z}function PR(){let e=DR(),t=bR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),r?L.createElement("pre",{style:l},r):null,null)}const MR=L.createElement(PR,null);class kR extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?L.createElement(lc.Provider,{value:this.props.routeContext},L.createElement(vI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AR(e){let{routeContext:t,match:r,children:a}=e,l=L.useContext($g);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),L.createElement(lc.Provider,{value:t},a)}function RR(e,t,r,a){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var h;if((h=r)!=null&&h.errors)e=r.matches;else return null}let f=e,u=(l=r)==null?void 0:l.errors;if(u!=null){let I=f.findIndex(k=>k.route.id&&(u==null?void 0:u[k.route.id])!==void 0);I>=0||sn(!1),f=f.slice(0,Math.min(f.length,I+1))}let w=!1,C=-1;if(r&&a&&a.v7_partialHydration)for(let I=0;I<f.length;I++){let k=f[I];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(C=I),k.route.id){let{loaderData:A,errors:q}=r,G=k.route.loader&&A[k.route.id]===void 0&&(!q||q[k.route.id]===void 0);if(k.route.lazy||G){w=!0,C>=0?f=f.slice(0,C+1):f=[f[0]];break}}}return f.reduceRight((I,k,A)=>{let q,G=!1,Z=null,K=null;r&&(q=u&&k.route.id?u[k.route.id]:void 0,Z=k.route.errorElement||MR,w&&(C<0&&A===0?(G=!0,K=null):C===A&&(G=!0,K=k.route.hydrateFallbackElement||null)));let j=t.concat(f.slice(0,A+1)),O=()=>{let $;return q?$=Z:G?$=K:k.route.Component?$=L.createElement(k.route.Component,null):k.route.element?$=k.route.element:$=I,L.createElement(AR,{match:k,routeContext:{outlet:I,matches:j,isDataRoute:r!=null},children:$})};return r&&(k.route.ErrorBoundary||k.route.errorElement||A===0)?L.createElement(kR,{location:r.location,revalidation:r.revalidation,component:Z,error:q,children:O(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):O()},null)}var xI=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xI||{}),sg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(sg||{});function zR(e){let t=L.useContext($g);return t||sn(!1),t}function LR(e){let t=L.useContext(yI);return t||sn(!1),t}function OR(e){let t=L.useContext(lc);return t||sn(!1),t}function bI(e){let t=OR(),r=t.matches[t.matches.length-1];return r.route.id||sn(!1),r.route.id}function DR(){var e;let t=L.useContext(vI),r=LR(sg.UseRouteError),a=bI(sg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function FR(){let{router:e}=zR(xI.UseNavigateStable),t=bI(sg.UseNavigateStable),r=L.useRef(!1);return _I(()=>{r.current=!0}),L.useCallback(function(l,h){h===void 0&&(h={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Yh({fromRouteId:t},h)))},[e,t])}function S_(e){sn(!1)}function BR(e){let{basename:t="/",children:r=null,location:a,navigationType:l=Rs.Pop,navigator:h,static:f=!1,future:u}=e;gf()&&sn(!1);let w=t.replace(/^\/*/,"/"),C=L.useMemo(()=>({basename:w,navigator:h,static:f,future:Yh({v7_relativeSplatPath:!1},u)}),[w,u,h,f]);typeof a=="string"&&(a=sc(a));let{pathname:I="/",search:k="",hash:A="",state:q=null,key:G="default"}=a,Z=L.useMemo(()=>{let K=Tu(I,w);return K==null?null:{location:{pathname:K,search:k,hash:A,state:q,key:G},navigationType:l}},[w,I,k,A,q,G,l]);return Z==null?null:L.createElement(Ys.Provider,{value:C},L.createElement(Ng.Provider,{children:r,value:Z}))}function $R(e){let{children:t,location:r}=e;return TR(C_(t),r)}new Promise(()=>{});function C_(e,t){t===void 0&&(t=[]);let r=[];return L.Children.forEach(e,(a,l)=>{if(!L.isValidElement(a))return;let h=[...t,l];if(a.type===L.Fragment){r.push.apply(r,C_(a.props.children,h));return}a.type!==S_&&sn(!1),!a.props.index||!a.props.children||sn(!1);let f={id:a.props.id||h.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=C_(a.props.children,h)),r.push(f)}),r}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lg.apply(this,arguments)}function wI(e,t){if(e==null)return{};var r={},a=Object.keys(e),l,h;for(h=0;h<a.length;h++)l=a[h],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function NR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function jR(e,t){return e.button===0&&(!t||t==="_self")&&!NR(e)}const VR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],UR=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],HR="6";try{window.__reactRouterVersion=HR}catch{}const WR=L.createContext({isTransitioning:!1}),GR="startTransition",X2=Kl[GR];function qR(e){let{basename:t,children:r,future:a,window:l}=e,h=L.useRef();h.current==null&&(h.current=Q4({window:l,v5Compat:!0}));let f=h.current,[u,w]=L.useState({action:f.action,location:f.location}),{v7_startTransition:C}=a||{},I=L.useCallback(k=>{C&&X2?X2(()=>w(k)):w(k)},[w,C]);return L.useLayoutEffect(()=>f.listen(I),[f,I]),L.createElement(BR,{basename:t,children:r,location:u.location,navigationType:u.action,navigator:f,future:a})}const ZR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XR=L.forwardRef(function(t,r){let{onClick:a,relative:l,reloadDocument:h,replace:f,state:u,target:w,to:C,preventScrollReset:I,unstable_viewTransition:k}=t,A=wI(t,VR),{basename:q}=L.useContext(Ys),G,Z=!1;if(typeof C=="string"&&KR.test(C)&&(G=C,ZR))try{let $=new URL(window.location.href),J=C.startsWith("//")?new URL($.protocol+C):new URL(C),ne=Tu(J.pathname,q);J.origin===$.origin&&ne!=null?C=ne+J.search+J.hash:Z=!0}catch{}let K=SR(C,{relative:l}),j=JR(C,{replace:f,state:u,target:w,preventScrollReset:I,relative:l,unstable_viewTransition:k});function O($){a&&a($),$.defaultPrevented||j($)}return L.createElement("a",lg({},A,{href:G||K,onClick:Z||h?a:O,ref:r,target:w}))}),Y2=L.forwardRef(function(t,r){let{"aria-current":a="page",caseSensitive:l=!1,className:h="",end:f=!1,style:u,to:w,unstable_viewTransition:C,children:I}=t,k=wI(t,UR),A=jg(w,{relative:k.relative}),q=yf(),G=L.useContext(yI),{navigator:Z,basename:K}=L.useContext(Ys),j=G!=null&&QR(A)&&C===!0,O=Z.encodeLocation?Z.encodeLocation(A).pathname:A.pathname,$=q.pathname,J=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;l||($=$.toLowerCase(),J=J?J.toLowerCase():null,O=O.toLowerCase()),J&&K&&(J=Tu(J,K)||J);const ne=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let oe=$===O||!f&&$.startsWith(O)&&$.charAt(ne)==="/",le=J!=null&&(J===O||!f&&J.startsWith(O)&&J.charAt(O.length)==="/"),be={isActive:oe,isPending:le,isTransitioning:j},Ee=oe?a:void 0,ke;typeof h=="function"?ke=h(be):ke=[h,oe?"active":null,le?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof u=="function"?u(be):u;return L.createElement(XR,lg({},k,{"aria-current":Ee,className:ke,ref:r,style:Ae,to:w,unstable_viewTransition:C}),typeof I=="function"?I(be):I)});var E_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(E_||(E_={}));var J2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(J2||(J2={}));function YR(e){let t=L.useContext($g);return t||sn(!1),t}function JR(e,t){let{target:r,replace:a,state:l,preventScrollReset:h,relative:f,unstable_viewTransition:u}=t===void 0?{}:t,w=CR(),C=yf(),I=jg(e,{relative:f});return L.useCallback(k=>{if(jR(k,r)){k.preventDefault();let A=a!==void 0?a:ag(C)===ag(I);w(e,{replace:A,state:l,preventScrollReset:h,relative:f,unstable_viewTransition:u})}},[C,w,I,a,l,r,e,h,f,u])}function QR(e,t){t===void 0&&(t={});let r=L.useContext(WR);r==null&&sn(!1);let{basename:a}=YR(E_.useViewTransitionState),l=jg(e,{relative:t.relative});if(!r.isTransitioning)return!1;let h=Tu(r.currentLocation.pathname,a)||r.currentLocation.pathname,f=Tu(r.nextLocation.pathname,a)||r.nextLocation.pathname;return w_(l.pathname,f)!=null||w_(l.pathname,h)!=null}const ez="modulepreload",tz=function(e){return"/rail-travel-time/"+e},Q2={},rz=function(t,r,a){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));l=Promise.all(r.map(u=>{if(u=tz(u),u in Q2)return;Q2[u]=!0;const w=u.endsWith(".css"),C=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${C}`))return;const I=document.createElement("link");if(I.rel=w?"stylesheet":ez,w||(I.as="script",I.crossOrigin=""),I.href=u,f&&I.setAttribute("nonce",f),document.head.appendChild(I),w)return new Promise((k,A)=>{I.addEventListener("load",k),I.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${u}`)))})}))}return l.then(()=>t()).catch(h=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h})},nz=L.createContext(null);function iz(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return r===l&&a===h}function Qi(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Qi(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(const l of r)if(!t.hasOwnProperty(l)||!Qi(e[l],t[l]))return!1;return!0}return!1}function oz(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function eS(e,t){if(!e.getProjection)return;const r=e.getProjection(),a=t.getProjection();Qi(r,a)||t.setProjection(r)}function tS(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function rS(e,t){const r=t.viewState||t;let a=!1;if("longitude"in r&&"latitude"in r){const l=e.center;e.center=new l.constructor(r.longitude,r.latitude),a=a||l!==e.center}if("zoom"in r){const l=e.zoom;e.zoom=r.zoom,a=a||l!==e.zoom}if("bearing"in r){const l=e.bearing;e.bearing=r.bearing,a=a||l!==e.bearing}if("pitch"in r){const l=e.pitch;e.pitch=r.pitch,a=a||l!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(a=!0,e.padding=r.padding),a}const az=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nS(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const a of e.layers)t[a.id]=a;const r=e.layers.map(a=>{let l=null;"interactive"in a&&(l=Object.assign({},a),delete l.interactive);const h=t[a.ref];if(h){l=l||Object.assign({},a),delete l.ref;for(const f of az)f in h&&(l[f]=h[f])}return l||a});return{...e,layers:r}}var iS={};const oS={version:8,sources:{},layers:[]},aS={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},n0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},sS={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},sz=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],lz=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Iu{constructor(t,r,a){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const h=this.props[sS[l.type]];h?h(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const h=this.props[aS[l.type]];h&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),h(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const h=this.props[n0[l.type]];h&&h(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=r,this._initialize(a)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const a=this._updateSettings(t,r);a&&this._createShadowTransform(this._map);const l=this._updateSize(t),h=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(a||l||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const a=Iu.savedMaps.pop();if(!a)return null;const l=a.map,h=l.getContainer();for(r.className=h.className;h.childNodes.length>0;)r.appendChild(h.childNodes[0]);l._container=r;const f=l._resizeObserver;f&&(f.disconnect(),f.observe(r)),a.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:u}=t;return u&&(u.bounds?l.fitBounds(u.bounds,{...u.fitBoundsOptions,duration:0}):a._updateViewState(u,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),a}_initialize(t){const{props:r}=this,{mapStyle:a=oS}=r,l={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||cz()||null,container:t,style:nS(a)},h=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),r.gl){const I=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=I,r.gl)}const f=new this._MapClass(l);h.padding&&f.setPadding(h.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._createShadowTransform(f);const u=f._render;f._render=I=>{this._inRender=!0,u.call(f,I),this._inRender=!1};const w=f._renderTaskQueue.run;f._renderTaskQueue.run=I=>{w.call(f._renderTaskQueue,I),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const C=f.fire;f.fire=this._fireEvent.bind(this,C),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),eS(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const I in aS)f.on(I,this._onPointerEvent);for(const I in n0)f.on(I,this._onCameraEvent);for(const I in sS)f.on(I,this._onEvent);this._map=f}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Iu.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=oz(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const a=this._map;if(r.width!==a.transform.width||r.height!==a.transform.height)return a.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const a=this._map,l=this._renderTransform,{zoom:h,pitch:f,bearing:u}=l,w=a.isMoving();w&&(l.cameraElevationReference="sea");const C=rS(l,{...tS(a.transform),...t});if(w&&(l.cameraElevationReference="ground"),C&&r){const I=this._deferredEvents;I.move=!0,I.zoom||(I.zoom=h!==l.zoom),I.rotate||(I.rotate=u!==l.bearing),I.pitch||(I.pitch=f!==l.pitch)}return w||rS(a.transform,t),C}_updateSettings(t,r){const a=this._map;let l=!1;for(const h of sz)if(h in t&&!Qi(t[h],r[h])){l=!0;const f=a[`set${h[0].toUpperCase()}${h.slice(1)}`];f==null||f.call(a,t[h])}return l}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:a=oS,styleDiffing:l=!0}=t,h={diff:l};return"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(nS(a),h),!0}return!1}_updateStyleComponents(t,r){const a=this._map;let l=!1;return a.isStyleLoaded()&&("light"in t&&a.setLight&&!Qi(t.light,r.light)&&(l=!0,a.setLight(t.light)),"fog"in t&&a.setFog&&!Qi(t.fog,r.fog)&&(l=!0,a.setFog(t.fog)),"terrain"in t&&a.setTerrain&&!Qi(t.terrain,r.terrain)&&(!t.terrain||a.getSource(t.terrain.source))&&(l=!0,a.setTerrain(t.terrain))),l}_updateHandlers(t,r){var a,l;const h=this._map;let f=!1;for(const u of lz){const w=(a=t[u])!==null&&a!==void 0?a:!0,C=(l=r[u])!==null&&l!==void 0?l:!0;Qi(w,C)||(f=!0,w?h[u].enable(w):h[u].disable())}return f}_queryRenderedFeatures(t){const r=this._map,a=r.transform,{interactiveLayerIds:l=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:l.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=a}}_updateHover(t){var r;const{props:a}=this;if(a.interactiveLayerIds&&(a.onMouseMove||a.onMouseEnter||a.onMouseLeave)){const h=t.type,f=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,u=this._queryRenderedFeatures(t.point),w=u.length>0;!w&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=u,w&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=h}else this._hoveredFeatures=null}_fireEvent(t,r,a){const l=this._map,h=l.transform,f=typeof r=="string"?r:r.type;return f==="move"&&this._updateViewState(this.props,!1),f in n0&&(typeof r=="object"&&(r.viewState=tS(h)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,r,a),l.transform=h,l):(t.call(l,r,a),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const a in this._deferredEvents)this._deferredEvents[a]&&t.fire(a);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{eS(this._renderTransform,r),t.transform=r}}}Iu.savedMaps=[];function cz(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||iS.MapboxAccessToken}catch{}try{e=e||iS.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const uz=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function dz(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:a=>{const l=t.transform;t.transform=e.transform;const h=t.project(a);return t.transform=l,h},unproject:a=>{const l=t.transform;t.transform=e.transform;const h=t.unproject(a);return t.transform=l,h},queryTerrainElevation:(a,l)=>{const h=t.transform;t.transform=e.transform;const f=t.queryTerrainElevation(a,l);return t.transform=h,f},queryRenderedFeatures:(a,l)=>{const h=t.transform;t.transform=e.transform;const f=t.queryRenderedFeatures(a,l);return t.transform=h,f}};for(const a of hz(t))!(a in r)&&!uz.includes(a)&&(r[a]=t[a].bind(t));return r}function hz(e){const t=new Set;let r=e;for(;r;){for(const a of Object.getOwnPropertyNames(r))a[0]!=="_"&&typeof e[a]=="function"&&a!=="fire"&&a!=="setEventedParent"&&t.add(a);r=Object.getPrototypeOf(r)}return Array.from(t)}const fz=typeof document<"u"?L.useLayoutEffect:L.useEffect,pz=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function mz(e,t){for(const a of pz)a in t&&(e[a]=t[a]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,a=>{a&&console.error(a)},!0)}const Bu=L.createContext(null);function gz(e,t,r){const a=L.useContext(nz),[l,h]=L.useState(null),f=L.useRef(),{current:u}=L.useRef({mapLib:null,map:null});L.useEffect(()=>{const I=e.mapLib;let k=!0,A;return Promise.resolve(I||r).then(q=>{if(!k)return;if(!q)throw new Error("Invalid mapLib");const G="Map"in q?q:q.default;if(!G.Map)throw new Error("Invalid mapLib");if(mz(G,e),!G.supported||G.supported(e))e.reuseMaps&&(A=Iu.reuse(e,f.current)),A||(A=new Iu(G.Map,e,f.current)),u.map=dz(A),u.mapLib=G,h(A),a==null||a.onMapMount(u.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(q=>{const{onError:G}=e;G?G({type:"error",target:null,originalEvent:null,error:q}):console.error(q)}),()=>{k=!1,A&&(a==null||a.onMapUnmount(e.id),e.reuseMaps?A.recycle():A.destroy())}},[]),fz(()=>{l&&l.setProps(e)}),L.useImperativeHandle(t,()=>u.map,[l]);const w=L.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),C={height:"100%"};return L.createElement("div",{id:e.id,ref:f,style:w},l&&L.createElement(Bu.Provider,{value:u},L.createElement("div",{"mapboxgl-children":"",style:C},e.children)))}const yz=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function cc(e,t){if(!e||!t)return;const r=e.style;for(const a in t){const l=t[a];Number.isFinite(l)&&!yz.test(a)?r[a]=`${l}px`:r[a]=l}}function vz(e,t){const{map:r,mapLib:a}=L.useContext(Bu),l=L.useRef({props:e});l.current.props=e;const h=L.useMemo(()=>{let Z=!1;L.Children.forEach(e.children,O=>{O&&(Z=!0)});const K={...e,element:Z?document.createElement("div"):null},j=new a.Marker(K);return j.setLngLat([e.longitude,e.latitude]),j.getElement().addEventListener("click",O=>{var $,J;(J=($=l.current.props).onClick)===null||J===void 0||J.call($,{type:"click",target:j,originalEvent:O})}),j.on("dragstart",O=>{var $,J;const ne=O;ne.lngLat=h.getLngLat(),(J=($=l.current.props).onDragStart)===null||J===void 0||J.call($,ne)}),j.on("drag",O=>{var $,J;const ne=O;ne.lngLat=h.getLngLat(),(J=($=l.current.props).onDrag)===null||J===void 0||J.call($,ne)}),j.on("dragend",O=>{var $,J;const ne=O;ne.lngLat=h.getLngLat(),(J=($=l.current.props).onDragEnd)===null||J===void 0||J.call($,ne)}),j},[]);L.useEffect(()=>(h.addTo(r.getMap()),()=>{h.remove()}),[]);const{longitude:f,latitude:u,offset:w,style:C,draggable:I=!1,popup:k=null,rotation:A=0,rotationAlignment:q="auto",pitchAlignment:G="auto"}=e;return L.useEffect(()=>{cc(h.getElement(),C)},[C]),L.useImperativeHandle(t,()=>h,[]),(h.getLngLat().lng!==f||h.getLngLat().lat!==u)&&h.setLngLat([f,u]),w&&!iz(h.getOffset(),w)&&h.setOffset(w),h.isDraggable()!==I&&h.setDraggable(I),h.getRotation()!==A&&h.setRotation(A),h.getRotationAlignment()!==q&&h.setRotationAlignment(q),h.getPitchAlignment()!==G&&h.setPitchAlignment(G),h.getPopup()!==k&&h.setPopup(k),Fu.createPortal(e.children,h.getElement())}const _z=L.memo(L.forwardRef(vz));function lS(e){return new Set(e?e.trim().split(/\s+/):[])}function xz(e,t){const{map:r,mapLib:a}=L.useContext(Bu),l=L.useMemo(()=>document.createElement("div"),[]),h=L.useRef({props:e});h.current.props=e;const f=L.useMemo(()=>{const u={...e},w=new a.Popup(u);return w.setLngLat([e.longitude,e.latitude]),w.once("open",C=>{var I,k;(k=(I=h.current.props).onOpen)===null||k===void 0||k.call(I,C)}),w},[]);if(L.useEffect(()=>{const u=w=>{var C,I;(I=(C=h.current.props).onClose)===null||I===void 0||I.call(C,w)};return f.on("close",u),f.setDOMContent(l).addTo(r.getMap()),()=>{f.off("close",u),f.isOpen()&&f.remove()}},[]),L.useEffect(()=>{cc(f.getElement(),e.style)},[e.style]),L.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Qi(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const u=lS(f.options.className),w=lS(e.className);for(const C of u)w.has(C)||f.removeClassName(C);for(const C of w)u.has(C)||f.addClassName(C);f.options.className=e.className}return Fu.createPortal(e.children,l)}L.memo(L.forwardRef(xz));function vf(e,t,r,a){const l=L.useContext(Bu),h=L.useMemo(()=>e(l),[]);return L.useEffect(()=>{const f=t,u=typeof t=="function"&&typeof r=="function"?t:null,w=typeof t=="function"?t:null,{map:C}=l;return C.hasControl(h)||(C.addControl(h,f==null?void 0:f.position),u&&u(l)),()=>{w&&w(l),C.hasControl(h)&&C.removeControl(h)}},[]),h}function bz(e){const t=vf(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return L.useEffect(()=>{cc(t._container,e.style)},[e.style]),null}L.memo(bz);function wz(e){const t=vf(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return L.useEffect(()=>{cc(t._controlContainer,e.style)},[e.style]),null}L.memo(wz);function Sz(e,t){const r=L.useRef({props:e}),a=vf(({mapLib:l})=>{const h=new l.GeolocateControl(e),f=h._setupUI;return h._setupUI=u=>{h._container.hasChildNodes()||f(u)},h.on("geolocate",u=>{var w,C;(C=(w=r.current.props).onGeolocate)===null||C===void 0||C.call(w,u)}),h.on("error",u=>{var w,C;(C=(w=r.current.props).onError)===null||C===void 0||C.call(w,u)}),h.on("outofmaxbounds",u=>{var w,C;(C=(w=r.current.props).onOutOfMaxBounds)===null||C===void 0||C.call(w,u)}),h.on("trackuserlocationstart",u=>{var w,C;(C=(w=r.current.props).onTrackUserLocationStart)===null||C===void 0||C.call(w,u)}),h.on("trackuserlocationend",u=>{var w,C;(C=(w=r.current.props).onTrackUserLocationEnd)===null||C===void 0||C.call(w,u)}),h},{position:e.position});return r.current.props=e,L.useImperativeHandle(t,()=>a,[]),L.useEffect(()=>{cc(a._container,e.style)},[e.style]),null}L.memo(L.forwardRef(Sz));function Cz(e){const t=vf(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return L.useEffect(()=>{cc(t._container,e.style)},[e.style]),null}L.memo(Cz);function Ez(e){const t=vf(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),r=L.useRef(e),a=r.current;r.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==a.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==a.unit&&t.setUnit(e.unit),L.useEffect(()=>{cc(t._container,l)},[l]),null}L.memo(Ez);function cg(e,t){if(!e)throw new Error(t)}function Tz(e,t,r,a){if(cg(r.id===a.id,"layer id changed"),cg(r.type===a.type,"layer type changed"),r.type==="custom"||a.type==="custom")return;const{layout:l={},paint:h={},filter:f,minzoom:u,maxzoom:w,beforeId:C}=r;if(C!==a.beforeId&&e.moveLayer(t,C),l!==a.layout){const I=a.layout||{};for(const k in l)Qi(l[k],I[k])||e.setLayoutProperty(t,k,l[k]);for(const k in I)l.hasOwnProperty(k)||e.setLayoutProperty(t,k,void 0)}if(h!==a.paint){const I=a.paint||{};for(const k in h)Qi(h[k],I[k])||e.setPaintProperty(t,k,h[k]);for(const k in I)h.hasOwnProperty(k)||e.setPaintProperty(t,k,void 0)}Qi(f,a.filter)||e.setFilter(t,f),(u!==a.minzoom||w!==a.maxzoom)&&e.setLayerZoomRange(t,u,w)}function Iz(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const a={...r,id:t};delete a.beforeId,e.addLayer(a,r.beforeId)}}let Pz=0;function Mz(e){const t=L.useContext(Bu).map.getMap(),r=L.useRef(e),[,a]=L.useState(0),l=L.useMemo(()=>e.id||`jsx-layer-${Pz++}`,[]);if(L.useEffect(()=>{if(t){const f=()=>a(u=>u+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{Tz(t,l,e,r.current)}catch(f){console.warn(f)}else Iz(t,l,e);return r.current=e,null}let kz=0;function Az(e,t,r){if(e.style&&e.style._loaded){const a={...r};return delete a.id,delete a.children,e.addSource(t,a),e.getSource(t)}return null}function Rz(e,t,r){cg(t.id===r.id,"source id changed"),cg(t.type===r.type,"source type changed");let a="",l=0;for(const f in t)f!=="children"&&f!=="id"&&!Qi(r[f],t[f])&&(a=f,l++);if(!l)return;const h=t.type;if(h==="geojson")e.setData(t.data);else if(h==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&l===1&&a==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(a){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${a}`)}function zz(e){const t=L.useContext(Bu).map.getMap(),r=L.useRef(e),[,a]=L.useState(0),l=L.useMemo(()=>e.id||`jsx-source-${kz++}`,[]);L.useEffect(()=>{if(t){const f=()=>setTimeout(()=>a(u=>u+1),0);return t.on("styledata",f),f(),()=>{var u;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(l)){const w=(u=t.getStyle())===null||u===void 0?void 0:u.layers;if(w)for(const C of w)C.source===l&&t.removeLayer(C.id);t.removeSource(l)}}}},[t]);let h=t&&t.style&&t.getSource(l);return h?Rz(h,e,r.current):h=Az(t,l,e),r.current=e,h&&L.Children.map(e.children,f=>f&&L.cloneElement(f,{source:l}))||null}const Lz=rz(()=>import("./mapbox-gl-DOTIQn7L.js").then(e=>e.m),[]),Oz=L.forwardRef(function(t,r){return gz(t,r,Lz)}),i0=_z,cS=Mz,uS=zz;var SI={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.2.0/LICENSE.txt
 */(function(e,t){(function(r,a){e.exports=a()})(TA,function(){var r={},a={};function l(f,u,w){if(a[f]=w,f==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(r,I),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),r}}l("shared",["exports"],function(f){function u(o,n,s,d){return new(s||(s=Promise))(function(m,v){function _(P){try{E(d.next(P))}catch(z){v(z)}}function b(P){try{E(d.throw(P))}catch(z){v(z)}}function E(P){var z;P.done?m(P.value):(z=P.value,z instanceof s?z:new s(function(D){D(z)})).then(_,b)}E((d=d.apply(o,n||[])).next())})}function w(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var C=I;function I(o,n){this.x=o,this.y=n}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,s=o.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),s=Math.sin(o),d=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=d,this},_rotateAround:function(o,n){var s=Math.cos(o),d=Math.sin(o),m=n.y+d*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-d*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(o){return o instanceof I?o:Array.isArray(o)?new I(o[0],o[1]):o};var k=w(C),A=q;function q(o,n,s,d){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=d}q.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,d=0;d<8;d++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var _=0,b=1;for(s=o,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));d++)o>m?_=s:b=s,s=.5*(b-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var G=w(A);let Z,K;function j(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function O(){if(K==null&&(K=!1,j())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const m=4*d;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&s[d]!==d){K=!0;break}}}return K||!1}function $(o,n,s,d){const m=new G(o,n,s,d);return v=>m.solve(v)}const J=$(.25,.1,.25,1);function ne(o,n,s){return Math.min(s,Math.max(n,o))}function oe(o,n,s){const d=s-n,m=((o-n)%d+d)%d+n;return m===n?s:m}function le(o,...n){for(const s of n)for(const d in s)o[d]=s[d];return o}let be=1;function Ee(o,n,s){const d={};for(const m in o)d[m]=n.call(this,o[m],m,o);return d}function ke(o,n,s){const d={};for(const m in o)n.call(this,o[m],m,o)&&(d[m]=o[m]);return d}function Ae(o){return Array.isArray(o)?o.map(Ae):typeof o=="object"&&o?Ee(o,Ae):o}const Ye={};function He(o){Ye[o]||(typeof console<"u"&&console.warn(o),Ye[o]=!0)}function Le(o,n,s){return(s.y-o.y)*(n.x-o.x)>(n.y-o.y)*(s.x-o.x)}function Je(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Oe=null;function Pe(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function De(o,n,s,d,m){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const _=v==null?void 0:v.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const b=_.startsWith("BGR"),E=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(E,function(P,z,D,N,W){const Y=4*Math.max(-z,0),ee=(Math.max(0,D)-D)*N*4+Y,se=4*N,de=Math.max(0,z),Se=Math.max(0,D);return{rect:{x:de,y:Se,width:Math.min(P.width,z+N)-de,height:Math.min(P.height,D+W)-Se},layout:[{offset:ee,stride:se}]}}(o,n,s,d,m)),b)for(let P=0;P<E.length;P+=4){const z=E[P];E[P]=E[P+2],E[P+2]=z}return E}finally{v.close()}})}let $e,Ve;const Ze="AbortError";function gt(){return new Error(Ze)}const Ct={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ht(o){return Ct.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Ut="global-dispatcher";class Nt extends Error{constructor(n,s,d,m){super(`AJAXError: ${s} (${n}): ${d}`),this.status=n,this.statusText=s,this.url=d,this.body=m}}const zt=()=>Je(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Lr=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const d=Ht(o.url);if(d)return d(o,n);if(Je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Ut},n)}if(!(/^file:/.test(s=o.url)||/^file:/.test(zt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return u(this,void 0,void 0,function*(){const v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:zt(),signal:m.signal});d.type==="json"&&v.headers.set("Accept","application/json");const _=yield fetch(v);if(!_.ok){const P=yield _.blob();throw new Nt(_.status,_.statusText,d.url,P)}let b;b=d.type==="arrayBuffer"||d.type==="image"?_.arrayBuffer():d.type==="json"?_.json():_.text();const E=yield b;if(m.signal.aborted)throw gt();return{data:E,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(o,n);if(Je(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Ut},n)}var s;return function(d,m){return new Promise((v,_)=>{const b=new XMLHttpRequest;b.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(b.responseType="arraybuffer");for(const E in d.headers)b.setRequestHeader(E,d.headers[E]);d.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=d.credentials==="include",b.onerror=()=>{_(new Error(b.statusText))},b.onload=()=>{if(!m.signal.aborted)if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let E=b.response;if(d.type==="json")try{E=JSON.parse(b.response)}catch(P){return void _(P)}v({data:E,cacheControl:b.getResponseHeader("Cache-Control"),expires:b.getResponseHeader("Expires")})}else{const E=new Blob([b.response],{type:b.getResponseHeader("Content-Type")});_(new Nt(b.status,b.statusText,d.url,E))}},m.signal.addEventListener("abort",()=>{b.abort(),_(gt())}),b.send(d.body)})}(o,n)};function Yr(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function xr(o,n,s){s[o]&&s[o].indexOf(n)!==-1||(s[o]=s[o]||[],s[o].push(n))}function Cr(o,n,s){if(s&&s[o]){const d=s[o].indexOf(n);d!==-1&&s[o].splice(d,1)}}class Xt{constructor(n,s={}){le(this,s),this.type=n}}class er extends Xt{constructor(n,s={}){super("error",le({error:n},s))}}class br{on(n,s){return this._listeners=this._listeners||{},xr(n,s,this._listeners),this}off(n,s){return Cr(n,s,this._listeners),Cr(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},xr(n,s,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,s){typeof n=="string"&&(n=new Xt(n,s||{}));const d=n.type;if(this.listens(d)){n.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const b of m)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const b of v)Cr(d,b,this._oneTimeListeners),b.call(this,n);const _=this._eventedParent;_&&(le(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof er&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const kr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Sn(o,n){const s={};for(const d in o)d!=="ref"&&(s[d]=o[d]);return kr.forEach(d=>{d in n&&(s[d]=n[d])}),s}function Et(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let s=0;s<o.length;s++)if(!Et(o[s],n[s]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const s in o)if(!Et(o[s],n[s]))return!1;return!0}return o===n}function Mt(o,n){o.push(n)}function sr(o,n,s){Mt(s,{command:"addSource",args:[o,n[o]]})}function ln(o,n,s){Mt(n,{command:"removeSource",args:[o]}),s[o]=!0}function ci(o,n,s,d){ln(o,s,d),sr(o,n,s)}function ui(o,n,s){let d;for(d in o[s])if(Object.prototype.hasOwnProperty.call(o[s],d)&&d!=="data"&&!Et(o[s][d],n[s][d]))return!1;for(d in n[s])if(Object.prototype.hasOwnProperty.call(n[s],d)&&d!=="data"&&!Et(o[s][d],n[s][d]))return!1;return!0}function yn(o,n,s,d,m,v){o=o||{},n=n||{};for(const _ in o)Object.prototype.hasOwnProperty.call(o,_)&&(Et(o[_],n[_])||s.push({command:v,args:[d,_,n[_],m]}));for(const _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(Et(o[_],n[_])||s.push({command:v,args:[d,_,n[_],m]}))}function yr(o){return o.id}function Ur(o,n){return o[n.id]=n,o}class Qe{constructor(n,s,d,m){this.message=(n?`${n}: `:"")+d,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Jr(o,...n){for(const s of n)for(const d in s)o[d]=s[d];return o}class Hr extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class co{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[d,m]of s)this.bindings[d]=m}concat(n){return new co(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const Ti={kind:"null"},et={kind:"number"},Ot={kind:"string"},kt={kind:"boolean"},Wr={kind:"color"},Gr={kind:"object"},It={kind:"value"},Cn={kind:"collator"},Xn={kind:"formatted"},Er={kind:"padding"},Q={kind:"resolvedImage"},B={kind:"variableAnchorOffsetCollection"};function U(o,n){return{kind:"array",itemType:o,N:n}}function H(o){if(o.kind==="array"){const n=H(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ae=[Ti,et,Ot,kt,Wr,Xn,Gr,U(It),Er,Q,B];function ge(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ge(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const s of ae)if(!ge(s,n))return null}}return`Expected ${H(o)} but found ${H(n)} instead.`}function fe(o,n){return n.some(s=>s.kind===o.kind)}function ye(o,n){return n.some(s=>s==="null"?o===null:s==="array"?Array.isArray(o):s==="object"?o&&!Array.isArray(o)&&typeof o=="object":s===typeof o)}function he(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const Ce=.96422,Ue=.82521,Ne=4/29,Be=6/29,xt=3*Be*Be,wt=Be*Be*Be,Lt=Math.PI/180,At=180/Math.PI;function Kt(o){return(o%=360)<0&&(o+=360),o}function Jt([o,n,s,d]){let m,v;const _=Qr((.2225045*(o=vr(o))+.7168786*(n=vr(n))+.0606169*(s=vr(s)))/1);o===n&&n===s?m=v=_:(m=Qr((.4360747*o+.3850649*n+.1430804*s)/Ce),v=Qr((.0139322*o+.0971045*n+.7141733*s)/Ue));const b=116*_-16;return[b<0?0:b,500*(m-_),200*(_-v),d]}function vr(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Qr(o){return o>wt?Math.pow(o,1/3):o/xt+Ne}function Wt([o,n,s,d]){let m=(o+16)/116,v=isNaN(n)?m:m+n/500,_=isNaN(s)?m:m-s/200;return m=1*cn(m),v=Ce*cn(v),_=Ue*cn(_),[Tr(3.1338561*v-1.6168667*m-.4906146*_),Tr(-.9787684*v+1.9161415*m+.033454*_),Tr(.0719453*v-.2289914*m+1.4052427*_),d]}function Tr(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function cn(o){return o>Be?o*o*o:xt*(o-Ne)}function Mn(o){return parseInt(o.padEnd(2,o),16)/255}function Ii(o,n){return Or(n?o/100:o,0,1)}function Or(o,n,s){return Math.min(Math.max(n,o),s)}function ts(o){return!o.some(Number.isNaN)}const my={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class cr{constructor(n,s,d,m=1,v=!0){this.r=n,this.g=s,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,d,m]))}static parse(n){if(n instanceof cr)return n;if(typeof n!="string")return;const s=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=my[d];if(m){const[_,b,E]=m;return[_/255,b/255,E/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const _=d.length<6?1:2;let b=1;return[Mn(d.slice(b,b+=_)),Mn(d.slice(b,b+=_)),Mn(d.slice(b,b+=_)),Mn(d.slice(b,b+_)||"ff")]}if(d.startsWith("rgb")){const _=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,E,P,z,D,N,W,Y,ee,se,de,Se]=_,pe=[z||" ",W||" ",se].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const we=[P,N,ee].join(""),je=we==="%%%"?100:we===""?255:0;if(je){const We=[Or(+E/je,0,1),Or(+D/je,0,1),Or(+Y/je,0,1),de?Ii(+de,Se):1];if(ts(We))return We}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,b,E,P,z,D,N,W,Y]=v,ee=[E||" ",z||" ",N].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const se=[+b,Or(+P,0,100),Or(+D,0,100),W?Ii(+W,Y):1];if(ts(se))return function([de,Se,pe,we]){function je(We){const ct=(We+de/30)%12,mt=Se*Math.min(pe,1-pe);return pe-mt*Math.max(-1,Math.min(ct-3,9-ct,1))}return de=Kt(de),Se/=100,pe/=100,[je(0),je(8),je(4),we]}(se)}}}(n);return s?new cr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,s/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,d,m,v]=Jt(n),_=Math.sqrt(d*d+m*m);return[Math.round(1e4*_)?Kt(Math.atan2(m,d)*At):NaN,_,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Jt(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,d,m]=this.rgb;return`rgba(${[n,s,d].map(v=>Math.round(255*v)).join(",")},${m})`}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class Wu{constructor(n,s,d){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Gu{constructor(n,s,d,m,v){this.text=n,this.image=s,this.scale=d,this.fontStack=m,this.textColor=v}}class di{constructor(n){this.sections=n}static fromString(n){return new di([new Gu(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof di?n:di.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class hi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof hi)return n;if(typeof n=="number")return new hi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new hi(n)}}toString(){return JSON.stringify(this.values)}}const Mf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class kn{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof kn)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const d=n[s],m=n[s+1];if(typeof d!="string"||!Mf.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new kn(n)}}toString(){return JSON.stringify(this.values)}}class Pi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Pi({name:n,available:!1}):null}}function kf(o,n,s,d){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[o,n,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[o,n,s,d]:[o,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ko(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof cr||o instanceof Wu||o instanceof di||o instanceof hi||o instanceof kn||o instanceof Pi)return!0;if(Array.isArray(o)){for(const n of o)if(!ko(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!ko(o[n]))return!1;return!0}return!1}function en(o){if(o===null)return Ti;if(typeof o=="string")return Ot;if(typeof o=="boolean")return kt;if(typeof o=="number")return et;if(o instanceof cr)return Wr;if(o instanceof Wu)return Cn;if(o instanceof di)return Xn;if(o instanceof hi)return Er;if(o instanceof kn)return B;if(o instanceof Pi)return Q;if(Array.isArray(o)){const n=o.length;let s;for(const d of o){const m=en(d);if(s){if(s===m)continue;s=It;break}s=m}return U(s||It,n)}return Gr}function Js(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof cr||o instanceof di||o instanceof hi||o instanceof kn||o instanceof Pi?o.toString():JSON.stringify(o)}class xa{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!ko(n[1]))return s.error("invalid value");const d=n[1];let m=en(d);const v=s.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new xa(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Dr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ba={string:Ot,number:et,boolean:kt,object:Gr};class ji{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let d,m=1;const v=n[0];if(v==="array"){let b,E;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in ba)||P==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=ba[P],m++}else b=It;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=n[2],m++}d=U(b,E)}else{if(!ba[v])throw new Error(`Types doesn't contain name = ${v}`);d=ba[v]}const _=[];for(;m<n.length;m++){const b=s.parse(n[m],m,It);if(!b)return null;_.push(b)}return new ji(d,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(n);if(!ge(this.type,en(d)))return d;if(s===this.args.length-1)throw new Dr(`Expected value to be of type ${H(this.type)}, but found ${H(en(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const dc={"to-boolean":kt,"to-color":Wr,"to-number":et,"to-string":Ot};class uo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[0];if(!dc[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=dc[d],v=[];for(let _=1;_<n.length;_++){const b=s.parse(n[_],_,It);if(!b)return null;v.push(b)}return new uo(m,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,d;for(const m of this.args){if(s=m.evaluate(n),d=null,s instanceof cr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:kf(s[0],s[1],s[2],s[3]),!d))return new cr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Dr(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const d of this.args){s=d.evaluate(n);const m=hi.parse(s);if(m)return m}throw new Dr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const d of this.args){s=d.evaluate(n);const m=kn.parse(s);if(m)return m}throw new Dr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const d of this.args){if(s=d.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new Dr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return di.fromString(Js(this.args[0].evaluate(n)));case"resolvedImage":return Pi.fromString(Js(this.args[0].evaluate(n)));default:return Js(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const qu=["Unknown","Point","LineString","Polygon"];class rs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=cr.parse(n)),s}}class or{constructor(n,s,d=[],m,v=new co,_=[]){this.registry=n,this.path=d,this.key=d.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=_,this.expectedType=m,this._isConstant=s}parse(n,s,d,m,v={}){return s?this.concat(s,d,m)._parse(n,v):this._parse(n,v)}_parse(n,s){function d(m,v,_){return _==="assert"?new ji(v,[m]):_==="coerce"?new uo(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,E=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(b.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(b,E))return null}else _=d(_,b,s.typeAnnotation||"coerce");else _=d(_,b,s.typeAnnotation||"coerce");else _=d(_,b,s.typeAnnotation||"coerce");else _=d(_,b,s.typeAnnotation||"assert")}if(!(_ instanceof xa)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const b=new rs;try{_=new xa(_.type,_.evaluate(b))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,d){const m=typeof n=="number"?this.path.concat(n):this.path,v=d?this.scope.concat(d):this.scope;return new or(this.registry,this._isConstant,m,s||null,v,this.errors)}error(n,...s){const d=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Hr(d,n))}checkSubtype(n,s){const d=ge(n,s);return d&&this.error(d),d}}class hc{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=s.parse(n[v+1],v+1);if(!b)return null;d.push([_,b])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,d);return m?new hc(d,m):null}outputDefined(){return this.result.outputDefined()}}class ns{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=n[1];return s.scope.has(d)?new ns(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Zu{constructor(n,s,d){this.type=n,this.index=s,this.input=d}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,et),m=s.parse(n[2],2,U(s.expectedType||It));return d&&m?new Zu(m.type.itemType,d,m):null}evaluate(n){const s=this.index.evaluate(n),d=this.input.evaluate(n);if(s<0)throw new Dr(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Dr(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Dr(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class fc{constructor(n,s){this.type=kt,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,It),m=s.parse(n[2],2,It);return d&&m?fe(d.type,[kt,Ot,et,Ti,It])?new fc(d,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(d.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!ye(s,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${H(en(s))} instead.`);if(!ye(d,["string","array"]))throw new Dr(`Expected second argument to be of type array or string, but found ${H(en(d))} instead.`);return d.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Qs{constructor(n,s,d){this.type=et,this.needle=n,this.haystack=s,this.fromIndex=d}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,It),m=s.parse(n[2],2,It);if(!d||!m)return null;if(!fe(d.type,[kt,Ot,et,Ti,It]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${H(d.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,et);return v?new Qs(d,m,v):null}return new Qs(d,m)}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!ye(s,["boolean","string","number","null"]))throw new Dr(`Expected first argument to be of type boolean, string, number or null, but found ${H(en(s))} instead.`);if(!ye(d,["string","array"]))throw new Dr(`Expected second argument to be of type array or string, but found ${H(en(d))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return d.indexOf(s,m)}return d.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Ku{constructor(n,s,d,m,v,_){this.inputType=n,this.type=s,this.input=d,this.cases=m,this.outputs=v,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let d,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const v={},_=[];for(let P=2;P<n.length-1;P+=2){let z=n[P];const D=n[P+1];Array.isArray(z)||(z=[z]);const N=s.concat(P);if(z.length===0)return N.error("Expected at least one branch label.");for(const Y of z){if(typeof Y!="number"&&typeof Y!="string")return N.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return N.error("Numeric branch labels must be integer values.");if(d){if(N.checkSubtype(d,en(Y)))return null}else d=en(Y);if(v[String(Y)]!==void 0)return N.error("Branch labels must be unique.");v[String(Y)]=_.length}const W=s.parse(D,P,m);if(!W)return null;m=m||W.type,_.push(W)}const b=s.parse(n[1],1,It);if(!b)return null;const E=s.parse(n[n.length-1],n.length-1,m);return E?b.type.kind!=="value"&&s.concat(1).checkSubtype(d,b.type)?null:new Ku(d,m,b,v,_,E):null}evaluate(n){const s=this.input.evaluate(n);return(en(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class pc{constructor(n,s,d){this.type=n,this.branches=s,this.otherwise=d}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const m=[];for(let _=1;_<n.length-1;_+=2){const b=s.parse(n[_],_,kt);if(!b)return null;const E=s.parse(n[_+1],_+1,d);if(!E)return null;m.push([b,E]),d=d||E.type}const v=s.parse(n[n.length-1],n.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new pc(d,m,v)}evaluate(n){for(const[s,d]of this.branches)if(s.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,d]of this.branches)n(s),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class el{constructor(n,s,d,m){this.type=n,this.input=s,this.beginIndex=d,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,It),m=s.parse(n[2],2,et);if(!d||!m)return null;if(!fe(d.type,[U(It),Ot,It]))return s.error(`Expected first argument to be of type array or string, but found ${H(d.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,et);return v?new el(d.type,d,m,v):null}return new el(d.type,d,m)}evaluate(n){const s=this.input.evaluate(n),d=this.beginIndex.evaluate(n);if(!ye(s,["string","array"]))throw new Dr(`Expected first argument to be of type array or string, but found ${H(en(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(d,m)}return s.slice(d)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function mc(o,n){const s=o.length-1;let d,m,v=0,_=s,b=0;for(;v<=_;)if(b=Math.floor((v+_)/2),d=o[b],m=o[b+1],d<=n){if(b===s||n<m)return b;v=b+1}else{if(!(d>n))throw new Dr("Input is not a number.");_=b-1}return 0}class tl{constructor(n,s,d){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(n[1],1,et);if(!d)return null;const m=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<n.length;_+=2){const b=_===1?-1/0:n[_],E=n[_+1],P=_,z=_+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(m.length&&m[m.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const D=s.parse(E,z,v);if(!D)return null;v=v||D.type,m.push([b,D])}return new tl(v,d,m)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return d[0].evaluate(n);const v=s.length;return m>=s[v-1]?d[v-1].evaluate(n):d[mc(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function gy(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var yy=Xu;function Xu(o,n,s,d){this.cx=3*o,this.bx=3*(s-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=s,this.p2y=d}Xu.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var s=o,d=0;d<8;d++){var m=this.sampleCurveX(s)-o;if(Math.abs(m)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var _=0,b=1;for(s=o,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-o)<n));d++)o>m?_=s:b=s,s=.5*(b-_)+_;return s},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Af=gy(yy);function wa(o,n,s){return o+s*(n-o)}function gc(o,n,s){return o.map((d,m)=>wa(d,n[m],s))}const Bn={number:wa,color:function(o,n,s,d="rgb"){switch(d){case"rgb":{const[m,v,_,b]=gc(o.rgb,n.rgb,s);return new cr(m,v,_,b,!1)}case"hcl":{const[m,v,_,b]=o.hcl,[E,P,z,D]=n.hcl;let N,W;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?N=NaN:(N=E,_!==1&&_!==0||(W=P)):(N=m,z!==1&&z!==0||(W=v));else{let Se=E-m;E>m&&Se>180?Se-=360:E<m&&m-E>180&&(Se+=360),N=m+s*Se}const[Y,ee,se,de]=function([Se,pe,we,je]){return Se=isNaN(Se)?0:Se*Lt,Wt([we,Math.cos(Se)*pe,Math.sin(Se)*pe,je])}([N,W??wa(v,P,s),wa(_,z,s),wa(b,D,s)]);return new cr(Y,ee,se,de,!1)}case"lab":{const[m,v,_,b]=Wt(gc(o.lab,n.lab,s));return new cr(m,v,_,b,!1)}}},array:gc,padding:function(o,n,s){return new hi(gc(o.values,n.values,s))},variableAnchorOffsetCollection:function(o,n,s){const d=o.values,m=n.values;if(d.length!==m.length)throw new Dr(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let _=0;_<d.length;_+=2){if(d[_]!==m[_])throw new Dr(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${d[_]}, to[${_}]: ${m[_]}`);v.push(d[_]);const[b,E]=d[_+1],[P,z]=m[_+1];v.push([wa(b,P,s),wa(E,z,s)])}return new kn(v)}};class fi{constructor(n,s,d,m,v){this.type=n,this.operator=s,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[_,b]of v)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(n,s,d,m){let v=0;if(n.name==="exponential")v=Yu(s,n.base,d,m);else if(n.name==="linear")v=Yu(s,1,d,m);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new Af(_[0],_[1],_[2],_[3]).solve(Yu(s,1,d,m))}return v}static parse(n,s){let[d,m,v,..._]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const P=m[1];if(typeof P!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:P}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const P=m.slice(1);if(P.length!==4||P.some(z=>typeof z!="number"||z<0||z>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,et),!v)return null;const b=[];let E=null;d==="interpolate-hcl"||d==="interpolate-lab"?E=Wr:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let P=0;P<_.length;P+=2){const z=_[P],D=_[P+1],N=P+3,W=P+4;if(typeof z!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(b.length&&b[b.length-1][0]>=z)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const Y=s.parse(D,W,E);if(!Y)return null;E=E||Y.type,b.push([z,Y])}return he(E,et)||he(E,Wr)||he(E,Er)||he(E,B)||he(E,U(et))?new fi(E,d,m,v,b):s.error(`Type ${H(E)} is not interpolatable.`)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return d[0].evaluate(n);const v=s.length;if(m>=s[v-1])return d[v-1].evaluate(n);const _=mc(s,m),b=fi.interpolationFactor(this.interpolation,m,s[_],s[_+1]),E=d[_].evaluate(n),P=d[_+1].evaluate(n);switch(this.operator){case"interpolate":return Bn[this.type.kind](E,P,b);case"interpolate-hcl":return Bn.color(E,P,b,"hcl");case"interpolate-lab":return Bn.color(E,P,b,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Yu(o,n,s,d){const m=d-s,v=o-s;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class yc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let d=null;const m=s.expectedType;m&&m.kind!=="value"&&(d=m);const v=[];for(const b of n.slice(1)){const E=s.parse(b,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,v.push(E)}if(!d)throw new Error("No output type");const _=m&&v.some(b=>ge(m,b.type));return new yc(_?It:d,v)}evaluate(n){let s,d=null,m=0;for(const v of this.args)if(m++,d=v.evaluate(n),d&&d instanceof Pi&&!d.available&&(s||(s=d.name),d=null,m===this.args.length&&(d=s)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function Ju(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Qu(o,n,s,d){return d.compare(n,s)===0}function is(o,n,s){const d=o!=="=="&&o!=="!=";return class CI{constructor(v,_,b){this.type=kt,this.lhs=v,this.rhs=_,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const b=v[0];let E=_.parse(v[1],1,It);if(!E)return null;if(!Ju(b,E.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${H(E.type)}'.`);let P=_.parse(v[2],2,It);if(!P)return null;if(!Ju(b,P.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${H(P.type)}'.`);if(E.type.kind!==P.type.kind&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${H(E.type)}' and '${H(P.type)}'.`);d&&(E.type.kind==="value"&&P.type.kind!=="value"?E=new ji(P.type,[E]):E.type.kind!=="value"&&P.type.kind==="value"&&(P=new ji(E.type,[P])));let z=null;if(v.length===4){if(E.type.kind!=="string"&&P.type.kind!=="string"&&E.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(z=_.parse(v[3],3,Cn),!z)return null}return new CI(E,P,z)}evaluate(v){const _=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const E=en(_),P=en(b);if(E.kind!==P.kind||E.kind!=="string"&&E.kind!=="number")throw new Dr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${E.kind}, ${P.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=en(_),P=en(b);if(E.kind!=="string"||P.kind!=="string")return n(v,_,b)}return this.collator?s(v,_,b,this.collator.evaluate(v)):n(v,_,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const vy=is("==",function(o,n,s){return n===s},Qu),Rf=is("!=",function(o,n,s){return n!==s},function(o,n,s,d){return!Qu(0,n,s,d)}),zf=is("<",function(o,n,s){return n<s},function(o,n,s,d){return d.compare(n,s)<0}),_y=is(">",function(o,n,s){return n>s},function(o,n,s,d){return d.compare(n,s)>0}),xy=is("<=",function(o,n,s){return n<=s},function(o,n,s,d){return d.compare(n,s)<=0}),by=is(">=",function(o,n,s){return n>=s},function(o,n,s,d){return d.compare(n,s)>=0});class vc{constructor(n,s,d){this.type=Cn,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const m=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,kt);if(!m)return null;const v=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,kt);if(!v)return null;let _=null;return d.locale&&(_=s.parse(d.locale,1,Ot),!_)?null:new vc(m,v,_)}evaluate(n){return new Wu(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class ed{constructor(n,s,d,m,v){this.type=Ot,this.number=n,this.locale=s,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const d=s.parse(n[1],1,et);if(!d)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=s.parse(m.locale,1,Ot),!v))return null;let _=null;if(m.currency&&(_=s.parse(m.currency,1,Ot),!_))return null;let b=null;if(m["min-fraction-digits"]&&(b=s.parse(m["min-fraction-digits"],1,et),!b))return null;let E=null;return m["max-fraction-digits"]&&(E=s.parse(m["max-fraction-digits"],1,et),!E)?null:new ed(d,v,_,b,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class _c{constructor(n){this.type=Xn,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const m=[];let v=!1;for(let _=1;_<=n.length-1;++_){const b=n[_];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let E=null;if(b["font-scale"]&&(E=s.parse(b["font-scale"],1,et),!E))return null;let P=null;if(b["text-font"]&&(P=s.parse(b["text-font"],1,U(Ot)),!P))return null;let z=null;if(b["text-color"]&&(z=s.parse(b["text-color"],1,Wr),!z))return null;const D=m[m.length-1];D.scale=E,D.font=P,D.textColor=z}else{const E=s.parse(n[_],1,It);if(!E)return null;const P=E.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new _c(m)}evaluate(n){return new di(this.sections.map(s=>{const d=s.content.evaluate(n);return en(d)===Q?new Gu("",d,null,null,null):new Gu(Js(d),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class td{constructor(n){this.type=Q,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const d=s.parse(n[1],1,Ot);return d?new td(d):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),d=Pi.fromString(s);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(s)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class rl{constructor(n){this.type=et,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=s.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${H(d.type)} instead.`):new rl(d):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Dr(`Expected value to be of type string or array, but found ${H(en(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const pi=8192;function ar(o,n){const s=(180+o[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*pi),Math.round(d*m*pi)]}function rd(o,n){const s=Math.pow(2,n.z);return[(m=(o[0]/pi+n.x)/s,360*m-180),(d=(o[1]/pi+n.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function nl(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function il(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function wy(o,n,s){const d=o[0]-n[0],m=o[1]-n[1],v=o[0]-s[0],_=o[1]-s[1];return d*_-v*m==0&&d*v<=0&&m*_<=0}function xc(o,n,s,d){return(m=[d[0]-s[0],d[1]-s[1]])[0]*(v=[n[0]-o[0],n[1]-o[1]])[1]-m[1]*v[0]!=0&&!(!Of(o,n,s,d)||!Of(s,d,o,n));var m,v}function Sy(o,n,s){for(const d of s)for(let m=0;m<d.length-1;++m)if(xc(o,n,d[m],d[m+1]))return!0;return!1}function os(o,n,s=!1){let d=!1;for(const b of n)for(let E=0;E<b.length-1;E++){if(wy(o,b[E],b[E+1]))return s;(v=b[E])[1]>(m=o)[1]!=(_=b[E+1])[1]>m[1]&&m[0]<(_[0]-v[0])*(m[1]-v[1])/(_[1]-v[1])+v[0]&&(d=!d)}var m,v,_;return d}function Cy(o,n){for(const s of n)if(os(o,s))return!0;return!1}function Lf(o,n){for(const s of o)if(!os(s,n))return!1;for(let s=0;s<o.length-1;++s)if(Sy(o[s],o[s+1],n))return!1;return!0}function Ey(o,n){for(const s of n)if(Lf(o,s))return!0;return!1}function Of(o,n,s,d){const m=d[0]-s[0],v=d[1]-s[1],_=(o[0]-s[0])*v-m*(o[1]-s[1]),b=(n[0]-s[0])*v-m*(n[1]-s[1]);return _>0&&b<0||_<0&&b>0}function nd(o,n,s){const d=[];for(let m=0;m<o.length;m++){const v=[];for(let _=0;_<o[m].length;_++){const b=ar(o[m][_],s);nl(n,b),v.push(b)}d.push(v)}return d}function Df(o,n,s){const d=[];for(let m=0;m<o.length;m++){const v=nd(o[m],n,s);d.push(v)}return d}function Ff(o,n,s,d){if(o[0]<s[0]||o[0]>s[2]){const m=.5*d;let v=o[0]-s[0]>m?-d:s[0]-o[0]>m?d:0;v===0&&(v=o[0]-s[2]>m?-d:s[2]-o[0]>m?d:0),o[0]+=v}nl(n,o)}function Bf(o,n,s,d){const m=Math.pow(2,d.z)*pi,v=[d.x*pi,d.y*pi],_=[];for(const b of o)for(const E of b){const P=[E.x+v[0],E.y+v[1]];Ff(P,n,s,m),_.push(P)}return _}function $f(o,n,s,d){const m=Math.pow(2,d.z)*pi,v=[d.x*pi,d.y*pi],_=[];for(const E of o){const P=[];for(const z of E){const D=[z.x+v[0],z.y+v[1]];nl(n,D),P.push(D)}_.push(P)}if(n[2]-n[0]<=m/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of _)for(const P of E)Ff(P,n,s,m)}var b;return _}class Sa{constructor(n,s){this.type=kt,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ko(n[1])){const d=n[1];if(d.type==="FeatureCollection"){const m=[];for(const v of d.features){const{type:_,coordinates:b}=v.geometry;_==="Polygon"&&m.push(b),_==="MultiPolygon"&&m.push(...b)}if(m.length)return new Sa(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Sa(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Sa(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(d.type==="Polygon"){const b=nd(d.coordinates,v,_),E=Bf(s.geometry(),m,v,_);if(!il(m,v))return!1;for(const P of E)if(!os(P,b))return!1}if(d.type==="MultiPolygon"){const b=Df(d.coordinates,v,_),E=Bf(s.geometry(),m,v,_);if(!il(m,v))return!1;for(const P of E)if(!Cy(P,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,d){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(d.type==="Polygon"){const b=nd(d.coordinates,v,_),E=$f(s.geometry(),m,v,_);if(!il(m,v))return!1;for(const P of E)if(!Lf(P,b))return!1}if(d.type==="MultiPolygon"){const b=Df(d.coordinates,v,_),E=$f(s.geometry(),m,v,_);if(!il(m,v))return!1;for(const P of E)if(!Ey(P,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Nf=class{constructor(o=[],n=Ty){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:s}=this,d=n[o];for(;o>0;){const m=o-1>>1,v=n[m];if(s(d,v)>=0)break;n[o]=v,o=m}n[o]=d}_down(o){const{data:n,compare:s}=this,d=this.length>>1,m=n[o];for(;o<d;){let v=1+(o<<1),_=n[v];const b=v+1;if(b<this.length&&s(n[b],_)<0&&(v=b,_=n[b]),s(_,m)>=0)break;n[o]=_,o=v}n[o]=m}};function Ty(o,n){return o<n?-1:o>n?1:0}function Iy(o,n,s,d,m){jf(o,n,s,d||o.length-1,m||Py)}function jf(o,n,s,d,m){for(;d>s;){if(d-s>600){var v=d-s+1,_=n-s+1,b=Math.log(v),E=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*E*(v-E)/v)*(_-v/2<0?-1:1);jf(o,n,Math.max(s,Math.floor(n-_*E/v+P)),Math.min(d,Math.floor(n+(v-_)*E/v+P)),m)}var z=o[n],D=s,N=d;for(ol(o,s,n),m(o[d],z)>0&&ol(o,s,d);D<N;){for(ol(o,D,N),D++,N--;m(o[D],z)<0;)D++;for(;m(o[N],z)>0;)N--}m(o[s],z)===0?ol(o,s,N):ol(o,++N,d),N<=n&&(s=N+1),n<=N&&(d=N-1)}}function ol(o,n,s){var d=o[n];o[n]=o[s],o[s]=d}function Py(o,n){return o<n?-1:o>n?1:0}function bc(o,n){if(o.length<=1)return[o];const s=[];let d,m;for(const v of o){const _=ky(v);_!==0&&(v.area=Math.abs(_),m===void 0&&(m=_<0),m===_<0?(d&&s.push(d),d=[v]):d.push(v))}if(d&&s.push(d),n>1)for(let v=0;v<s.length;v++)s[v].length<=n||(Iy(s[v],n,1,s[v].length-1,My),s[v]=s[v].slice(0,n));return s}function My(o,n){return n.area-o.area}function ky(o){let n=0;for(let s,d,m=0,v=o.length,_=v-1;m<v;_=m++)s=o[m],d=o[_],n+=(d.x-s.x)*(s.y+d.y);return n}const Vf=1/298.257223563,Uf=Vf*(2-Vf),Hf=Math.PI/180;class id{constructor(n){const s=6378.137*Hf*1e3,d=Math.cos(n*Hf),m=1/(1-Uf*(1-d*d)),v=Math.sqrt(m);this.kx=s*v*d,this.ky=s*v*m*(1-Uf)}distance(n,s){const d=this.wrap(n[0]-s[0])*this.kx,m=(n[1]-s[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(n,s){let d,m,v,_,b=1/0;for(let E=0;E<n.length-1;E++){let P=n[E][0],z=n[E][1],D=this.wrap(n[E+1][0]-P)*this.kx,N=(n[E+1][1]-z)*this.ky,W=0;D===0&&N===0||(W=(this.wrap(s[0]-P)*this.kx*D+(s[1]-z)*this.ky*N)/(D*D+N*N),W>1?(P=n[E+1][0],z=n[E+1][1]):W>0&&(P+=D/this.kx*W,z+=N/this.ky*W)),D=this.wrap(s[0]-P)*this.kx,N=(s[1]-z)*this.ky;const Y=D*D+N*N;Y<b&&(b=Y,d=P,m=z,v=E,_=W)}return{point:[d,m],index:v,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function Wf(o,n){return n[0]-o[0]}function as(o){return o[1]-o[0]+1}function Ao(o,n){return o[1]>=o[0]&&o[1]<n}function od(o,n){if(o[0]>o[1])return[null,null];const s=as(o);if(n){if(s===2)return[o,null];const m=Math.floor(s/2);return[[o[0],o[0]+m],[o[0]+m,o[1]]]}if(s===1)return[o,null];const d=Math.floor(s/2)-1;return[[o[0],o[0]+d],[o[0]+d+1,o[1]]]}function ad(o,n){if(!Ao(n,o.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let d=n[0];d<=n[1];++d)nl(s,o[d]);return s}function sd(o){const n=[1/0,1/0,-1/0,-1/0];for(const s of o)for(const d of s)nl(n,d);return n}function Fr(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function ld(o,n,s){if(!Fr(o)||!Fr(n))return NaN;let d=0,m=0;return o[2]<n[0]&&(d=n[0]-o[2]),o[0]>n[2]&&(d=o[0]-n[2]),o[1]>n[3]&&(m=o[1]-n[3]),o[3]<n[1]&&(m=n[1]-o[3]),s.distance([0,0],[d,m])}function qt(o,n,s){const d=s.pointOnLine(n,o);return s.distance(o,d.point)}function al(o,n,s,d,m){const v=Math.min(qt(o,[s,d],m),qt(n,[s,d],m)),_=Math.min(qt(s,[o,n],m),qt(d,[o,n],m));return Math.min(v,_)}function Ir(o,n,s,d,m){if(!Ao(n,o.length)||!Ao(d,s.length))return 1/0;let v=1/0;for(let _=n[0];_<n[1];++_){const b=o[_],E=o[_+1];for(let P=d[0];P<d[1];++P){const z=s[P],D=s[P+1];if(xc(b,E,z,D))return 0;v=Math.min(v,al(b,E,z,D,m))}}return v}function wr(o,n,s,d,m){if(!Ao(n,o.length)||!Ao(d,s.length))return NaN;let v=1/0;for(let _=n[0];_<=n[1];++_)for(let b=d[0];b<=d[1];++b)if(v=Math.min(v,m.distance(o[_],s[b])),v===0)return v;return v}function wc(o,n,s){if(os(o,n,!0))return 0;let d=1/0;for(const m of n){const v=m[0],_=m[m.length-1];if(v!==_&&(d=Math.min(d,qt(o,[_,v],s)),d===0))return d;const b=s.pointOnLine(m,o);if(d=Math.min(d,s.distance(o,b.point)),d===0)return d}return d}function Gf(o,n,s,d){if(!Ao(n,o.length))return NaN;for(let v=n[0];v<=n[1];++v)if(os(o[v],s,!0))return 0;let m=1/0;for(let v=n[0];v<n[1];++v){const _=o[v],b=o[v+1];for(const E of s)for(let P=0,z=E.length,D=z-1;P<z;D=P++){const N=E[D],W=E[P];if(xc(_,b,N,W))return 0;m=Math.min(m,al(_,b,N,W,d))}}return m}function qf(o,n){for(const s of o)for(const d of s)if(os(d,n,!0))return!0;return!1}function Ay(o,n,s,d=1/0){const m=sd(o),v=sd(n);if(d!==1/0&&ld(m,v,s)>=d)return d;if(il(m,v)){if(qf(o,n))return 0}else if(qf(n,o))return 0;let _=1/0;for(const b of o)for(let E=0,P=b.length,z=P-1;E<P;z=E++){const D=b[z],N=b[E];for(const W of n)for(let Y=0,ee=W.length,se=ee-1;Y<ee;se=Y++){const de=W[se],Se=W[Y];if(xc(D,N,de,Se))return 0;_=Math.min(_,al(D,N,de,Se,s))}}return _}function Zf(o,n,s,d,m,v){if(!v)return;const _=ld(ad(d,v),m,s);_<n&&o.push([_,v,[0,0]])}function Sc(o,n,s,d,m,v,_){if(!v||!_)return;const b=ld(ad(d,v),ad(m,_),s);b<n&&o.push([b,v,_])}function sl(o,n,s,d,m=1/0){let v=Math.min(d.distance(o[0],s[0][0]),m);if(v===0)return v;const _=new Nf([[0,[0,o.length-1],[0,0]]],Wf),b=sd(s);for(;_.length>0;){const E=_.pop();if(E[0]>=v)continue;const P=E[1],z=n?50:100;if(as(P)<=z){if(!Ao(P,o.length))return NaN;if(n){const D=Gf(o,P,s,d);if(isNaN(D)||D===0)return D;v=Math.min(v,D)}else for(let D=P[0];D<=P[1];++D){const N=wc(o[D],s,d);if(v=Math.min(v,N),v===0)return 0}}else{const D=od(P,n);Zf(_,v,d,o,b,D[0]),Zf(_,v,d,o,b,D[1])}}return v}function ll(o,n,s,d,m,v=1/0){let _=Math.min(v,m.distance(o[0],s[0]));if(_===0)return _;const b=new Nf([[0,[0,o.length-1],[0,s.length-1]]],Wf);for(;b.length>0;){const E=b.pop();if(E[0]>=_)continue;const P=E[1],z=E[2],D=n?50:100,N=d?50:100;if(as(P)<=D&&as(z)<=N){if(!Ao(P,o.length)&&Ao(z,s.length))return NaN;let W;if(n&&d)W=Ir(o,P,s,z,m),_=Math.min(_,W);else if(n&&!d){const Y=o.slice(P[0],P[1]+1);for(let ee=z[0];ee<=z[1];++ee)if(W=qt(s[ee],Y,m),_=Math.min(_,W),_===0)return _}else if(!n&&d){const Y=s.slice(z[0],z[1]+1);for(let ee=P[0];ee<=P[1];++ee)if(W=qt(o[ee],Y,m),_=Math.min(_,W),_===0)return _}else W=wr(o,P,s,z,m),_=Math.min(_,W)}else{const W=od(P,n),Y=od(z,d);Sc(b,_,m,o,s,W[0],Y[0]),Sc(b,_,m,o,s,W[0],Y[1]),Sc(b,_,m,o,s,W[1],Y[0]),Sc(b,_,m,o,s,W[1],Y[1])}}return _}function Cc(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class ra{constructor(n,s){this.type=et,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(ko(n[1])){const d=n[1];if(d.type==="FeatureCollection")return new ra(d,d.features.map(m=>Cc(m.geometry)).flat());if(d.type==="Feature")return new ra(d,Cc(d.geometry));if("type"in d&&"coordinates"in d)return new ra(d,Cc(d))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,d){const m=s.geometry(),v=m.flat().map(E=>rd([E.x,E.y],s.canonical));if(m.length===0)return NaN;const _=new id(v[0][1]);let b=1/0;for(const E of d){switch(E.type){case"Point":b=Math.min(b,ll(v,!1,[E.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,ll(v,!1,E.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,sl(v,!1,E.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,d){const m=s.geometry(),v=m.flat().map(E=>rd([E.x,E.y],s.canonical));if(m.length===0)return NaN;const _=new id(v[0][1]);let b=1/0;for(const E of d){switch(E.type){case"Point":b=Math.min(b,ll(v,!0,[E.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,ll(v,!0,E.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,sl(v,!0,E.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(s,d){const m=s.geometry();if(m.length===0||m[0].length===0)return NaN;const v=bc(m,0).map(E=>E.map(P=>P.map(z=>rd([z.x,z.y],s.canonical)))),_=new id(v[0][0][0][1]);let b=1/0;for(const E of d)for(const P of v){switch(E.type){case"Point":b=Math.min(b,sl([E.coordinates],!1,P,_,b));break;case"LineString":b=Math.min(b,sl(E.coordinates,!0,P,_,b));break;case"Polygon":b=Math.min(b,Ay(P,E.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const na={"==":vy,"!=":Rf,">":_y,"<":zf,">=":by,"<=":xy,array:ji,at:Zu,boolean:ji,case:pc,coalesce:yc,collator:vc,format:_c,image:td,in:fc,"index-of":Qs,interpolate:fi,"interpolate-hcl":fi,"interpolate-lab":fi,length:rl,let:hc,literal:xa,match:Ku,number:ji,"number-format":ed,object:ji,slice:el,step:tl,string:ji,"to-boolean":uo,"to-color":uo,"to-number":uo,"to-string":uo,var:ns,within:Sa,distance:ra};class Mi{constructor(n,s,d,m){this.name=n,this.type=s,this._evaluate=d,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const d=n[0],m=Mi.definitions[d];if(!m)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=_.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let E=null;for(const[P,z]of b){E=new or(s.registry,Ec,s.path,null,s.scope);const D=[];let N=!1;for(let W=1;W<n.length;W++){const Y=n[W],ee=Array.isArray(P)?P[W-1]:P.type,se=E.parse(Y,1+D.length,ee);if(!se){N=!0;break}D.push(se)}if(!N)if(Array.isArray(P)&&P.length!==D.length)E.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let W=0;W<D.length;W++){const Y=Array.isArray(P)?P[W]:P.type,ee=D[W];E.concat(W+1).checkSubtype(Y,ee.type)}if(E.errors.length===0)return new Mi(d,v,z,D)}}if(b.length===1)s.errors.push(...E.errors);else{const P=(b.length?b:_).map(([D])=>{return N=D,Array.isArray(N)?`(${N.map(H).join(", ")})`:`(${H(N.type)}...)`;var N}).join(" | "),z=[];for(let D=1;D<n.length;D++){const N=s.parse(n[D],1+z.length);if(!N)return null;z.push(H(N.type))}s.error(`Expected arguments of type ${P}, but found (${z.join(", ")}) instead.`)}return null}static register(n,s){Mi.definitions=s;for(const d in s)n[d]=Mi}}function Kf(o,[n,s,d,m]){n=n.evaluate(o),s=s.evaluate(o),d=d.evaluate(o);const v=m?m.evaluate(o):1,_=kf(n,s,d,v);if(_)throw new Dr(_);return new cr(n/255,s/255,d/255,v,!1)}function Xf(o,n){return o in n}function cd(o,n){const s=n[o];return s===void 0?null:s}function Ca(o){return{type:o}}function Ec(o){if(o instanceof ns)return Ec(o.boundExpression);if(o instanceof Mi&&o.name==="error"||o instanceof vc||o instanceof Sa||o instanceof ra)return!1;const n=o instanceof uo||o instanceof ji;let s=!0;return o.eachChild(d=>{s=n?s&&Ec(d):s&&d instanceof xa}),!!s&&Tc(o)&&ul(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Tc(o){if(o instanceof Mi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Sa||o instanceof ra)return!1;let n=!0;return o.eachChild(s=>{n&&!Tc(s)&&(n=!1)}),n}function cl(o){if(o instanceof Mi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(s=>{n&&!cl(s)&&(n=!1)}),n}function ul(o,n){if(o instanceof Mi&&n.indexOf(o.name)>=0)return!1;let s=!0;return o.eachChild(d=>{s&&!ul(d,n)&&(s=!1)}),s}function ud(o){return{result:"success",value:o}}function Ro(o){return{result:"error",value:o}}function ss(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function dd(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function hd(o){return!!o.expression&&o.expression.interpolated}function tr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ea(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Ic(o){return o}function fd(o,n){const s=n.type==="color",d=o.stops&&typeof o.stops[0][0]=="object",m=d||!(d||o.property!==void 0),v=o.type||(hd(n)?"exponential":"interval");if(s||n.type==="padding"){const z=s?cr.parse:hi.parse;(o=Jr({},o)).stops&&(o.stops=o.stops.map(D=>[D[0],z(D[1])])),o.default=z(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let b,E,P;if(v==="exponential")b=dl;else if(v==="interval")b=Jf;else if(v==="categorical"){b=Yf,E=Object.create(null);for(const z of o.stops)E[z[0]]=z[1];P=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Ry}if(d){const z={},D=[];for(let Y=0;Y<o.stops.length;Y++){const ee=o.stops[Y],se=ee[0].zoom;z[se]===void 0&&(z[se]={zoom:se,type:o.type,property:o.property,default:o.default,stops:[]},D.push(se)),z[se].stops.push([ee[0].value,ee[1]])}const N=[];for(const Y of D)N.push([z[Y].zoom,fd(z[Y],n)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:fi.interpolationFactor.bind(void 0,W),zoomStops:N.map(Y=>Y[0]),evaluate:({zoom:Y},ee)=>dl({stops:N,base:o.base},n,Y).evaluate(Y,ee)}}if(m){const z=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:fi.interpolationFactor.bind(void 0,z),zoomStops:o.stops.map(D=>D[0]),evaluate:({zoom:D})=>b(o,n,D,E,P)}}return{kind:"source",evaluate(z,D){const N=D&&D.properties?D.properties[o.property]:void 0;return N===void 0?Ta(o.default,n.default):b(o,n,N,E,P)}}}function Ta(o,n,s){return o!==void 0?o:n!==void 0?n:s!==void 0?s:void 0}function Yf(o,n,s,d,m){return Ta(typeof s===m?d[s]:void 0,o.default,n.default)}function Jf(o,n,s){if(tr(s)!=="number")return Ta(o.default,n.default);const d=o.stops.length;if(d===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[d-1][0])return o.stops[d-1][1];const m=mc(o.stops.map(v=>v[0]),s);return o.stops[m][1]}function dl(o,n,s){const d=o.base!==void 0?o.base:1;if(tr(s)!=="number")return Ta(o.default,n.default);const m=o.stops.length;if(m===1||s<=o.stops[0][0])return o.stops[0][1];if(s>=o.stops[m-1][0])return o.stops[m-1][1];const v=mc(o.stops.map(z=>z[0]),s),_=function(z,D,N,W){const Y=W-N,ee=z-N;return Y===0?0:D===1?ee/Y:(Math.pow(D,ee)-1)/(Math.pow(D,Y)-1)}(s,d,o.stops[v][0],o.stops[v+1][0]),b=o.stops[v][1],E=o.stops[v+1][1],P=Bn[n.type]||Ic;return typeof b.evaluate=="function"?{evaluate(...z){const D=b.evaluate.apply(void 0,z),N=E.evaluate.apply(void 0,z);if(D!==void 0&&N!==void 0)return P(D,N,_,o.colorSpace)}}:P(b,E,_,o.colorSpace)}function Ry(o,n,s){switch(n.type){case"color":s=cr.parse(s);break;case"formatted":s=di.fromString(s.toString());break;case"resolvedImage":s=Pi.fromString(s.toString());break;case"padding":s=hi.parse(s);break;default:tr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return Ta(s,o.default,n.default)}Mi.register(na,{error:[{kind:"error"},[Ot],(o,[n])=>{throw new Dr(n.evaluate(o))}],typeof:[Ot,[It],(o,[n])=>H(en(n.evaluate(o)))],"to-rgba":[U(et,4),[Wr],(o,[n])=>{const[s,d,m,v]=n.evaluate(o).rgb;return[255*s,255*d,255*m,v]}],rgb:[Wr,[et,et,et],Kf],rgba:[Wr,[et,et,et,et],Kf],has:{type:kt,overloads:[[[Ot],(o,[n])=>Xf(n.evaluate(o),o.properties())],[[Ot,Gr],(o,[n,s])=>Xf(n.evaluate(o),s.evaluate(o))]]},get:{type:It,overloads:[[[Ot],(o,[n])=>cd(n.evaluate(o),o.properties())],[[Ot,Gr],(o,[n,s])=>cd(n.evaluate(o),s.evaluate(o))]]},"feature-state":[It,[Ot],(o,[n])=>cd(n.evaluate(o),o.featureState||{})],properties:[Gr,[],o=>o.properties()],"geometry-type":[Ot,[],o=>o.geometryType()],id:[It,[],o=>o.id()],zoom:[et,[],o=>o.globals.zoom],"heatmap-density":[et,[],o=>o.globals.heatmapDensity||0],"line-progress":[et,[],o=>o.globals.lineProgress||0],accumulated:[It,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[et,Ca(et),(o,n)=>{let s=0;for(const d of n)s+=d.evaluate(o);return s}],"*":[et,Ca(et),(o,n)=>{let s=1;for(const d of n)s*=d.evaluate(o);return s}],"-":{type:et,overloads:[[[et,et],(o,[n,s])=>n.evaluate(o)-s.evaluate(o)],[[et],(o,[n])=>-n.evaluate(o)]]},"/":[et,[et,et],(o,[n,s])=>n.evaluate(o)/s.evaluate(o)],"%":[et,[et,et],(o,[n,s])=>n.evaluate(o)%s.evaluate(o)],ln2:[et,[],()=>Math.LN2],pi:[et,[],()=>Math.PI],e:[et,[],()=>Math.E],"^":[et,[et,et],(o,[n,s])=>Math.pow(n.evaluate(o),s.evaluate(o))],sqrt:[et,[et],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[et,[et],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[et,[et],(o,[n])=>Math.log(n.evaluate(o))],log2:[et,[et],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[et,[et],(o,[n])=>Math.sin(n.evaluate(o))],cos:[et,[et],(o,[n])=>Math.cos(n.evaluate(o))],tan:[et,[et],(o,[n])=>Math.tan(n.evaluate(o))],asin:[et,[et],(o,[n])=>Math.asin(n.evaluate(o))],acos:[et,[et],(o,[n])=>Math.acos(n.evaluate(o))],atan:[et,[et],(o,[n])=>Math.atan(n.evaluate(o))],min:[et,Ca(et),(o,n)=>Math.min(...n.map(s=>s.evaluate(o)))],max:[et,Ca(et),(o,n)=>Math.max(...n.map(s=>s.evaluate(o)))],abs:[et,[et],(o,[n])=>Math.abs(n.evaluate(o))],round:[et,[et],(o,[n])=>{const s=n.evaluate(o);return s<0?-Math.round(-s):Math.round(s)}],floor:[et,[et],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[et,[et],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[kt,[Ot,It],(o,[n,s])=>o.properties()[n.value]===s.value],"filter-id-==":[kt,[It],(o,[n])=>o.id()===n.value],"filter-type-==":[kt,[Ot],(o,[n])=>o.geometryType()===n.value],"filter-<":[kt,[Ot,It],(o,[n,s])=>{const d=o.properties()[n.value],m=s.value;return typeof d==typeof m&&d<m}],"filter-id-<":[kt,[It],(o,[n])=>{const s=o.id(),d=n.value;return typeof s==typeof d&&s<d}],"filter->":[kt,[Ot,It],(o,[n,s])=>{const d=o.properties()[n.value],m=s.value;return typeof d==typeof m&&d>m}],"filter-id->":[kt,[It],(o,[n])=>{const s=o.id(),d=n.value;return typeof s==typeof d&&s>d}],"filter-<=":[kt,[Ot,It],(o,[n,s])=>{const d=o.properties()[n.value],m=s.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[kt,[It],(o,[n])=>{const s=o.id(),d=n.value;return typeof s==typeof d&&s<=d}],"filter->=":[kt,[Ot,It],(o,[n,s])=>{const d=o.properties()[n.value],m=s.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[kt,[It],(o,[n])=>{const s=o.id(),d=n.value;return typeof s==typeof d&&s>=d}],"filter-has":[kt,[It],(o,[n])=>n.value in o.properties()],"filter-has-id":[kt,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[kt,[U(Ot)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[kt,[U(It)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[kt,[Ot,U(It)],(o,[n,s])=>s.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[kt,[Ot,U(It)],(o,[n,s])=>function(d,m,v,_){for(;v<=_;){const b=v+_>>1;if(m[b]===d)return!0;m[b]>d?_=b-1:v=b+1}return!1}(o.properties()[n.value],s.value,0,s.value.length-1)],all:{type:kt,overloads:[[[kt,kt],(o,[n,s])=>n.evaluate(o)&&s.evaluate(o)],[Ca(kt),(o,n)=>{for(const s of n)if(!s.evaluate(o))return!1;return!0}]]},any:{type:kt,overloads:[[[kt,kt],(o,[n,s])=>n.evaluate(o)||s.evaluate(o)],[Ca(kt),(o,n)=>{for(const s of n)if(s.evaluate(o))return!0;return!1}]]},"!":[kt,[kt],(o,[n])=>!n.evaluate(o)],"is-supported-script":[kt,[Ot],(o,[n])=>{const s=o.globals&&o.globals.isSupportedScript;return!s||s(n.evaluate(o))}],upcase:[Ot,[Ot],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Ot,[Ot],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Ot,Ca(It),(o,n)=>n.map(s=>Js(s.evaluate(o))).join("")],"resolved-locale":[Ot,[Cn],(o,[n])=>n.evaluate(o).resolvedLocale()]});class pd{constructor(n,s){var d;this.expression=n,this._warningHistory={},this._evaluator=new rs,this._defaultValue=s?(d=s).type==="color"&&Ea(d.default)?new cr(0,0,0,0):d.type==="color"?cr.parse(d.default)||null:d.type==="padding"?hi.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?kn.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,d,m,v,_){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,s,d,m,v,_){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Dr(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function Pc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in na}function Mc(o,n){const s=new or(na,Ec,[],n?function(m){const v={color:Wr,string:Ot,number:et,enum:Ot,boolean:kt,formatted:Xn,padding:Er,resolvedImage:Q,variableAnchorOffsetCollection:B};return m.type==="array"?U(v[m.value]||It,m.length):v[m.type]}(n):void 0),d=s.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?ud(new pd(d,n)):Ro(s.errors)}class md{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!cl(s.expression)}evaluateWithoutErrorHandling(n,s,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,m,v,_)}evaluate(n,s,d,m,v,_){return this._styleExpression.evaluate(n,s,d,m,v,_)}}class ls{constructor(n,s,d,m){this.kind=n,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!cl(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,d,m,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,m,v,_)}evaluate(n,s,d,m,v,_){return this._styleExpression.evaluate(n,s,d,m,v,_)}interpolationFactor(n,s,d){return this.interpolationType?fi.interpolationFactor(this.interpolationType,n,s,d):0}}function hl(o,n){const s=Mc(o,n);if(s.result==="error")return s;const d=s.value.expression,m=Tc(d);if(!m&&!ss(n))return Ro([new Hr("","data expressions not supported")]);const v=ul(d,["zoom"]);if(!v&&!dd(n))return Ro([new Hr("","zoom expressions not supported")]);const _=ia(d);return _||v?_ instanceof Hr?Ro([_]):_ instanceof fi&&!hd(n)?Ro([new Hr("",'"interpolate" expressions cannot be used with this property')]):ud(_?new ls(m?"camera":"composite",s.value,_.labels,_ instanceof fi?_.interpolation:void 0):new md(m?"constant":"source",s.value)):Ro([new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class An{constructor(n,s){this._parameters=n,this._specification=s,Jr(this,fd(this._parameters,this._specification))}static deserialize(n){return new An(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ia(o){let n=null;if(o instanceof hc)n=ia(o.result);else if(o instanceof yc){for(const s of o.args)if(n=ia(s),n)break}else(o instanceof tl||o instanceof fi)&&o.input instanceof Mi&&o.input.name==="zoom"&&(n=o);return n instanceof Hr||o.eachChild(s=>{const d=ia(s);d instanceof Hr?n=d:!n&&d?n=new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new Hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function kc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!kc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const zy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gd(o){if(o==null)return{filter:()=>!0,needGeometry:!1};kc(o)||(o=cs(o));const n=Mc(o,zy);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,m)=>n.value.evaluate(s,d,{},m),needGeometry:yd(o)}}function fl(o,n){return o<n?-1:o>n?1:0}function yd(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(yd(o[n]))return!0;return!1}function cs(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?vd(o[1],o[2],"=="):n==="!="?oa(vd(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?vd(o[1],o[2],n):n==="any"?(s=o.slice(1),["any"].concat(s.map(cs))):n==="all"?["all"].concat(o.slice(1).map(cs)):n==="none"?["all"].concat(o.slice(1).map(cs).map(oa)):n==="in"?Ac(o[1],o.slice(2)):n==="!in"?oa(Ac(o[1],o.slice(2))):n==="has"?Qf(o[1]):n!=="!has"||oa(Qf(o[1]));var s}function vd(o,n,s){switch(o){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,o,n]}}function Ac(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",o,["literal",n.sort(fl)]]:["filter-in-small",o,["literal",n]]}}function Qf(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function oa(o){return["!",o]}function _d(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let m="[";for(const v of o)m+=`${_d(v)},`;return`${m}]`}const s=Object.keys(o).sort();let d="{";for(let m=0;m<s.length;m++)d+=`${JSON.stringify(s[m])}:${_d(o[s[m]])},`;return`${d}}`}function xd(o){let n="";for(const s of kr)n+=`/${_d(o[s])}`;return n}function bd(o){const n=o.value;return n?[new Qe(o.key,n,"constants have been deprecated as of v8")]:[]}function Pr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function aa(o){if(Array.isArray(o))return o.map(aa);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const s in o)n[s]=aa(o[s]);return n}return Pr(o)}function mi(o){const n=o.key,s=o.value,d=o.valueSpec||{},m=o.objectElementValidators||{},v=o.style,_=o.styleSpec,b=o.validateSpec;let E=[];const P=tr(s);if(P!=="object")return[new Qe(n,s,`object expected, ${P} found`)];for(const z in s){const D=z.split(".")[0],N=d[D]||d["*"];let W;if(m[D])W=m[D];else if(d[D])W=b;else if(m["*"])W=m["*"];else{if(!d["*"]){E.push(new Qe(n,s[z],`unknown property "${z}"`));continue}W=b}E=E.concat(W({key:(n&&`${n}.`)+z,value:s[z],valueSpec:N,style:v,styleSpec:_,object:s,objectKey:z,validateSpec:b},s))}for(const z in d)m[z]||d[z].required&&d[z].default===void 0&&s[z]===void 0&&E.push(new Qe(n,s,`missing required property "${z}"`));return E}function wd(o){const n=o.value,s=o.valueSpec,d=o.style,m=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(tr(n)!=="array")return[new Qe(v,n,`array expected, ${tr(n)} found`)];if(s.length&&n.length!==s.length)return[new Qe(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Qe(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values};m.$version<7&&(b.function=s.function),tr(s.value)==="object"&&(b=s.value);let E=[];for(let P=0;P<n.length;P++)E=E.concat(_({array:n,arrayIndex:P,value:n[P],valueSpec:b,validateSpec:o.validateSpec,style:d,styleSpec:m,key:`${v}[${P}]`}));return E}function pl(o){const n=o.key,s=o.value,d=o.valueSpec;let m=tr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Qe(n,s,`number expected, ${m} found`)]:"minimum"in d&&s<d.minimum?[new Qe(n,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new Qe(n,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function ml(o){const n=o.valueSpec,s=Pr(o.value.type);let d,m,v,_={};const b=s!=="categorical"&&o.value.property===void 0,E=!b,P=tr(o.value.stops)==="array"&&tr(o.value.stops[0])==="array"&&tr(o.value.stops[0][0])==="object",z=mi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(W){if(s==="identity")return[new Qe(W.key,W.value,'identity function may not have a "stops" property')];let Y=[];const ee=W.value;return Y=Y.concat(wd({key:W.key,value:ee,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:D})),tr(ee)==="array"&&ee.length===0&&Y.push(new Qe(W.key,ee,"array must have at least one stop")),Y},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return s==="identity"&&b&&z.push(new Qe(o.key,o.value,'missing required property "property"')),s==="identity"||o.value.stops||z.push(new Qe(o.key,o.value,'missing required property "stops"')),s==="exponential"&&o.valueSpec.expression&&!hd(o.valueSpec)&&z.push(new Qe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(E&&!ss(o.valueSpec)?z.push(new Qe(o.key,o.value,"property functions not supported")):b&&!dd(o.valueSpec)&&z.push(new Qe(o.key,o.value,"zoom functions not supported"))),s!=="categorical"&&!P||o.value.property!==void 0||z.push(new Qe(o.key,o.value,'"property" property is required')),z;function D(W){let Y=[];const ee=W.value,se=W.key;if(tr(ee)!=="array")return[new Qe(se,ee,`array expected, ${tr(ee)} found`)];if(ee.length!==2)return[new Qe(se,ee,`array length 2 expected, length ${ee.length} found`)];if(P){if(tr(ee[0])!=="object")return[new Qe(se,ee,`object expected, ${tr(ee[0])} found`)];if(ee[0].zoom===void 0)return[new Qe(se,ee,"object stop key must have zoom")];if(ee[0].value===void 0)return[new Qe(se,ee,"object stop key must have value")];if(v&&v>Pr(ee[0].zoom))return[new Qe(se,ee[0].zoom,"stop zoom values must appear in ascending order")];Pr(ee[0].zoom)!==v&&(v=Pr(ee[0].zoom),m=void 0,_={}),Y=Y.concat(mi({key:`${se}[0]`,value:ee[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:pl,value:N}}))}else Y=Y.concat(N({key:`${se}[0]`,value:ee[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},ee));return Pc(aa(ee[1]))?Y.concat([new Qe(`${se}[1]`,ee[1],"expressions are not allowed in function stops.")]):Y.concat(W.validateSpec({key:`${se}[1]`,value:ee[1],valueSpec:n,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function N(W,Y){const ee=tr(W.value),se=Pr(W.value),de=W.value!==null?W.value:Y;if(d){if(ee!==d)return[new Qe(W.key,de,`${ee} stop domain type must match previous stop domain type ${d}`)]}else d=ee;if(ee!=="number"&&ee!=="string"&&ee!=="boolean")return[new Qe(W.key,de,"stop domain value must be a number, string, or boolean")];if(ee!=="number"&&s!=="categorical"){let Se=`number expected, ${ee} found`;return ss(n)&&s===void 0&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(W.key,de,Se)]}return s!=="categorical"||ee!=="number"||isFinite(se)&&Math.floor(se)===se?s!=="categorical"&&ee==="number"&&m!==void 0&&se<m?[new Qe(W.key,de,"stop domain values must appear in ascending order")]:(m=se,s==="categorical"&&se in _?[new Qe(W.key,de,"stop domain values must be unique")]:(_[se]=!0,[])):[new Qe(W.key,de,`integer expected, found ${se}`)]}}function Ia(o){const n=(o.expressionContext==="property"?hl:Mc)(aa(o.value),o.valueSpec);if(n.result==="error")return n.value.map(d=>new Qe(`${o.key}${d.key}`,o.value,d.message));const s=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!s.outputDefined())return[new Qe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!cl(s))return[new Qe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!cl(s))return[new Qe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!ul(s,["zoom","feature-state"]))return[new Qe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Tc(s))return[new Qe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function us(o){const n=o.key,s=o.value,d=o.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(Pr(s))===-1&&m.push(new Qe(n,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(Pr(s))===-1&&m.push(new Qe(n,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Rc(o){return kc(aa(o.value))?Ia(Jr({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sd(o)}function Sd(o){const n=o.value,s=o.key;if(tr(n)!=="array")return[new Qe(s,n,`array expected, ${tr(n)} found`)];const d=o.styleSpec;let m,v=[];if(n.length<1)return[new Qe(s,n,"filter array must have at least 1 element")];switch(v=v.concat(us({key:`${s}[0]`,value:n[0],valueSpec:d.filter_operator,style:o.style,styleSpec:o.styleSpec})),Pr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Pr(n[1])==="$type"&&v.push(new Qe(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Qe(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=tr(n[1]),m!=="string"&&v.push(new Qe(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let _=2;_<n.length;_++)m=tr(n[_]),Pr(n[1])==="$type"?v=v.concat(us({key:`${s}[${_}]`,value:n[_],valueSpec:d.geometry_type,style:o.style,styleSpec:o.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Qe(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(Sd({key:`${s}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":m=tr(n[1]),n.length!==2?v.push(new Qe(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Qe(`${s}[1]`,n[1],`string expected, ${m} found`))}return v}function zc(o,n){const s=o.key,d=o.validateSpec,m=o.style,v=o.styleSpec,_=o.value,b=o.objectKey,E=v[`${n}_${o.layerType}`];if(!E)return[];const P=b.match(/^(.*)-transition$/);if(n==="paint"&&P&&E[P[1]]&&E[P[1]].transition)return d({key:s,value:_,valueSpec:v.transition,style:m,styleSpec:v});const z=o.valueSpec||E[b];if(!z)return[new Qe(s,_,`unknown property "${b}"`)];let D;if(tr(_)==="string"&&ss(z)&&!z.tokens&&(D=/^{([^}]+)}$/.exec(_)))return[new Qe(s,_,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const N=[];return o.layerType==="symbol"&&(b==="text-field"&&m&&!m.glyphs&&N.push(new Qe(s,_,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Ea(aa(_))&&Pr(_.type)==="identity"&&N.push(new Qe(s,_,'"text-font" does not support identity functions'))),N.concat(d({key:o.key,value:_,valueSpec:z,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function Cd(o){return zc(o,"paint")}function ep(o){return zc(o,"layout")}function Ed(o){let n=[];const s=o.value,d=o.key,m=o.style,v=o.styleSpec;s.type||s.ref||n.push(new Qe(d,s,'either "type" or "ref" is required'));let _=Pr(s.type);const b=Pr(s.ref);if(s.id){const E=Pr(s.id);for(let P=0;P<o.arrayIndex;P++){const z=m.layers[P];Pr(z.id)===E&&n.push(new Qe(d,s.id,`duplicate layer id "${s.id}", previously used at line ${z.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(P=>{P in s&&n.push(new Qe(d,s[P],`"${P}" is prohibited for ref layers`))}),m.layers.forEach(P=>{Pr(P.id)===b&&(E=P)}),E?E.ref?n.push(new Qe(d,s.ref,"ref cannot reference another ref layer")):_=Pr(E.type):n.push(new Qe(d,s.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(s.source){const E=m.sources&&m.sources[s.source],P=E&&Pr(E.type);E?P==="vector"&&_==="raster"?n.push(new Qe(d,s.source,`layer "${s.id}" requires a raster source`)):P!=="raster-dem"&&_==="hillshade"?n.push(new Qe(d,s.source,`layer "${s.id}" requires a raster-dem source`)):P==="raster"&&_!=="raster"?n.push(new Qe(d,s.source,`layer "${s.id}" requires a vector source`)):P!=="vector"||s["source-layer"]?P==="raster-dem"&&_!=="hillshade"?n.push(new Qe(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||P==="geojson"&&E.lineMetrics||n.push(new Qe(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Qe(d,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Qe(d,s.source,`source "${s.source}" not found`))}else n.push(new Qe(d,s,'missing required property "source"'));return n=n.concat(mi({key:d,value:s,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${d}.type`,value:s.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:s,objectKey:"type"}),filter:Rc,layout:E=>mi({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":P=>ep(Jr({layerType:_},P))}}),paint:E=>mi({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":P=>Cd(Jr({layerType:_},P))}})}})),n}function Pa(o){const n=o.value,s=o.key,d=tr(n);return d!=="string"?[new Qe(s,n,`string expected, ${d} found`)]:[]}const Td={promoteId:function({key:o,value:n}){if(tr(n)==="string")return Pa({key:o,value:n});{const s=[];for(const d in n)s.push(...Pa({key:`${o}.${d}`,value:n[d]}));return s}}};function Id(o){const n=o.value,s=o.key,d=o.styleSpec,m=o.style,v=o.validateSpec;if(!n.type)return[new Qe(s,n,'"type" is required')];const _=Pr(n.type);let b;switch(_){case"vector":case"raster":return b=mi({key:s,value:n,valueSpec:d[`source_${_.replace("-","_")}`],style:o.style,styleSpec:d,objectElementValidators:Td,validateSpec:v}),b;case"raster-dem":return b=function(E){var P;const z=(P=E.sourceName)!==null&&P!==void 0?P:"",D=E.value,N=E.styleSpec,W=N.source_raster_dem,Y=E.style;let ee=[];const se=tr(D);if(D===void 0)return ee;if(se!=="object")return ee.push(new Qe("source_raster_dem",D,`object expected, ${se} found`)),ee;const de=Pr(D.encoding)==="custom",Se=["redFactor","greenFactor","blueFactor","baseShift"],pe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const we in D)!de&&Se.includes(we)?ee.push(new Qe(we,D[we],`In "${z}": "${we}" is only valid when "encoding" is set to "custom". ${pe} encoding found`)):W[we]?ee=ee.concat(E.validateSpec({key:we,value:D[we],valueSpec:W[we],validateSpec:E.validateSpec,style:Y,styleSpec:N})):ee.push(new Qe(we,D[we],`unknown property "${we}"`));return ee}({sourceName:s,value:n,style:o.style,styleSpec:d,validateSpec:v}),b;case"geojson":if(b=mi({key:s,value:n,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:Td}),n.cluster)for(const E in n.clusterProperties){const[P,z]=n.clusterProperties[E],D=typeof P=="string"?[P,["accumulated"],["get",E]]:P;b.push(...Ia({key:`${s}.${E}.map`,value:z,validateSpec:v,expressionContext:"cluster-map"})),b.push(...Ia({key:`${s}.${E}.reduce`,value:D,validateSpec:v,expressionContext:"cluster-reduce"}))}return b;case"video":return mi({key:s,value:n,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return mi({key:s,value:n,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new Qe(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return us({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function Pd(o){const n=o.value,s=o.styleSpec,d=s.light,m=o.style;let v=[];const _=tr(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Qe("light",n,`object expected, ${_} found`)]),v;for(const b in n){const E=b.match(/^(.*)-transition$/);v=v.concat(E&&d[E[1]]&&d[E[1]].transition?o.validateSpec({key:b,value:n[b],valueSpec:s.transition,validateSpec:o.validateSpec,style:m,styleSpec:s}):d[b]?o.validateSpec({key:b,value:n[b],valueSpec:d[b],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new Qe(b,n[b],`unknown property "${b}"`)])}return v}function tp(o){const n=o.value,s=o.styleSpec,d=s.sky,m=o.style,v=tr(n);if(n===void 0)return[];if(v!=="object")return[new Qe("sky",n,`object expected, ${v} found`)];let _=[];for(const b in n)_=_.concat(d[b]?o.validateSpec({key:b,value:n[b],valueSpec:d[b],style:m,styleSpec:s}):[new Qe(b,n[b],`unknown property "${b}"`)]);return _}function rp(o){const n=o.value,s=o.styleSpec,d=s.terrain,m=o.style;let v=[];const _=tr(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Qe("terrain",n,`object expected, ${_} found`)]),v;for(const b in n)v=v.concat(d[b]?o.validateSpec({key:b,value:n[b],valueSpec:d[b],validateSpec:o.validateSpec,style:m,styleSpec:s}):[new Qe(b,n[b],`unknown property "${b}"`)]);return v}function Md(o){let n=[];const s=o.value,d=o.key;if(Array.isArray(s)){const m=[],v=[];for(const _ in s)s[_].id&&m.includes(s[_].id)&&n.push(new Qe(d,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),m.push(s[_].id),s[_].url&&v.includes(s[_].url)&&n.push(new Qe(d,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),n=n.concat(mi({key:`${d}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return Pa({key:d,value:s})}const kd={"*":()=>[],array:wd,boolean:function(o){const n=o.value,s=o.key,d=tr(n);return d!=="boolean"?[new Qe(s,n,`boolean expected, ${d} found`)]:[]},number:pl,color:function(o){const n=o.key,s=o.value,d=tr(s);return d!=="string"?[new Qe(n,s,`color expected, ${d} found`)]:cr.parse(String(s))?[]:[new Qe(n,s,`color expected, "${s}" found`)]},constants:bd,enum:us,filter:Rc,function:ml,layer:Ed,object:mi,source:Id,light:Pd,sky:tp,terrain:rp,string:Pa,formatted:function(o){return Pa(o).length===0?[]:Ia(o)},resolvedImage:function(o){return Pa(o).length===0?[]:Ia(o)},padding:function(o){const n=o.key,s=o.value;if(tr(s)==="array"){if(s.length<1||s.length>4)return[new Qe(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let m=[];for(let v=0;v<s.length;v++)m=m.concat(o.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:o.validateSpec,valueSpec:d}));return m}return pl({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,s=o.value,d=tr(s),m=o.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new Qe(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(us({key:`${n}[${_}]`,value:s[_],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(wd({key:`${n}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:m}));return v},sprite:Md};function ds(o){const n=o.value,s=o.valueSpec,d=o.styleSpec;return o.validateSpec=ds,s.expression&&Ea(Pr(n))?ml(o):s.expression&&Pc(aa(n))?Ia(o):s.type&&kd[s.type]?kd[s.type](o):mi(Jr({},o,{valueSpec:s.type?d[s.type]:s}))}function Ad(o){const n=o.value,s=o.key,d=Pa(o);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new Qe(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new Qe(s,n,'"glyphs" url must include a "{range}" token'))),d}function Yn(o,n=ze){let s=[];return s=s.concat(ds({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:ds,objectElementValidators:{glyphs:Ad,"*":()=>[]}})),o.constants&&(s=s.concat(bd({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:ds}))),Lc(s)}function ho(o){return function(n){return o({...n,validateSpec:ds})}}function Lc(o){return[].concat(o).sort((n,s)=>n.line-s.line)}function fo(o){return function(...n){return Lc(o.apply(this,n))}}Yn.source=fo(ho(Id)),Yn.sprite=fo(ho(Md)),Yn.glyphs=fo(ho(Ad)),Yn.light=fo(ho(Pd)),Yn.sky=fo(ho(tp)),Yn.terrain=fo(ho(rp)),Yn.layer=fo(ho(Ed)),Yn.filter=fo(ho(Rc)),Yn.paintProperty=fo(ho(Cd)),Yn.layoutProperty=fo(ho(ep));const gl=Yn,np=gl.light,ip=gl.paintProperty,op=gl.layoutProperty;function ap(o,n){let s=!1;if(n&&n.length)for(const d of n)o.fire(new er(new Error(d.message))),s=!0;return s}class yl{constructor(n,s,d){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(s=_[1])+2*(d=_[2]);for(let E=0;E<this.d*this.d;E++){const P=_[3+E],z=_[3+E+1];m.push(P===z?null:_.subarray(P,z))}const b=_[3+m.length+1];this.keys=_.subarray(_[3+m.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let _=0;_<this.d*this.d;_++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=d,this.scale=s/n,this.uid=0;const v=d/s*n;this.min=-v,this.max=n+v}insert(n,s,d,m,v){this._forEachCell(s,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,d,m,v,_){this.cells[v].push(_)}query(n,s,d,m,v){const _=this.min,b=this.max;if(n<=_&&s<=_&&b<=d&&b<=m&&!v)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(n,s,d,m,this._queryCell,E,{},v),E}}_queryCell(n,s,d,m,v,_,b,E){const P=this.cells[v];if(P!==null){const z=this.keys,D=this.bboxes;for(let N=0;N<P.length;N++){const W=P[N];if(b[W]===void 0){const Y=4*W;(E?E(D[Y+0],D[Y+1],D[Y+2],D[Y+3]):n<=D[Y+2]&&s<=D[Y+3]&&d>=D[Y+0]&&m>=D[Y+1])?(b[W]=!0,_.push(z[W])):b[W]=!1}}}}_forEachCell(n,s,d,m,v,_,b,E){const P=this._convertToCellCoord(n),z=this._convertToCellCoord(s),D=this._convertToCellCoord(d),N=this._convertToCellCoord(m);for(let W=P;W<=D;W++)for(let Y=z;Y<=N;Y++){const ee=this.d*Y+W;if((!E||E(this._convertFromCellCoord(W),this._convertFromCellCoord(Y),this._convertFromCellCoord(W+1),this._convertFromCellCoord(Y+1)))&&v.call(this,n,s,d,m,ee,_,b,E))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let d=0;for(let _=0;_<this.cells.length;_++)d+=this.cells[_].length;const m=new Int32Array(s+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=s;for(let _=0;_<n.length;_++){const b=n[_];m[3+_]=v,m.set(b,v),v+=b.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,s){const d=n.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(n){return new yl(n.buffer)}}const sa={};function dt(o,n,s={}){if(sa[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),sa[o]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}dt("Object",Object),dt("TransferableGridIndex",yl),dt("Color",cr),dt("Error",Error),dt("AJAXError",Nt),dt("ResolvedImage",Pi),dt("StylePropertyFunction",An),dt("StyleExpression",pd,{omit:["_evaluator"]}),dt("ZoomDependentExpression",ls),dt("ZoomConstantExpression",md),dt("CompoundExpression",Mi,{omit:["_evaluate"]});for(const o in na)na[o]._classRegistryKey||dt(`Expression_${o}`,na[o]);function sp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function po(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(sp(o)||Pe(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const s=o;return n&&n.push(s.buffer),s}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const s=[];for(const d of o)s.push(po(d,n));return s}if(typeof o=="object"){const s=o.constructor,d=s._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!sa[d])throw new Error(`${d} is not registered.`);const m=s.serialize?s.serialize(o,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||sa[d].omit.indexOf(v)>=0)continue;const _=o[v];m[v]=sa[d].shallow.indexOf(v)>=0?_:po(_,n)}o instanceof Error&&(m.message=o.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(m.$name=d),m}throw new Error("can't serialize object of type "+typeof o)}function vl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||sp(o)||Pe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(vl);if(typeof o=="object"){const n=o.$name||"Object";if(!sa[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=sa[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(o);const d=Object.create(s.prototype);for(const m of Object.keys(o)){if(m==="$name")continue;const v=o[m];d[m]=sa[n].shallow.indexOf(m)>=0?v:vl(v)}return d}throw new Error("can't deserialize object of type "+typeof o)}class lp{constructor(){this.first=!0}update(n,s){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const lt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Rd(o){for(const n of o)if(zd(n.charCodeAt(0)))return!0;return!1}function cp(o){for(const n of o)if(!Ly(n.charCodeAt(0)))return!1;return!0}function Ly(o){return!(lt.Arabic(o)||lt["Arabic Supplement"](o)||lt["Arabic Extended-A"](o)||lt["Arabic Presentation Forms-A"](o)||lt["Arabic Presentation Forms-B"](o))}function zd(o){return!(o!==746&&o!==747&&(o<4352||!(lt["Bopomofo Extended"](o)||lt.Bopomofo(o)||lt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||lt["CJK Compatibility Ideographs"](o)||lt["CJK Compatibility"](o)||lt["CJK Radicals Supplement"](o)||lt["CJK Strokes"](o)||!(!lt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||lt["CJK Unified Ideographs Extension A"](o)||lt["CJK Unified Ideographs"](o)||lt["Enclosed CJK Letters and Months"](o)||lt["Hangul Compatibility Jamo"](o)||lt["Hangul Jamo Extended-A"](o)||lt["Hangul Jamo Extended-B"](o)||lt["Hangul Jamo"](o)||lt["Hangul Syllables"](o)||lt.Hiragana(o)||lt["Ideographic Description Characters"](o)||lt.Kanbun(o)||lt["Kangxi Radicals"](o)||lt["Katakana Phonetic Extensions"](o)||lt.Katakana(o)&&o!==12540||!(!lt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!lt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||lt["Unified Canadian Aboriginal Syllabics"](o)||lt["Unified Canadian Aboriginal Syllabics Extended"](o)||lt["Vertical Forms"](o)||lt["Yijing Hexagram Symbols"](o)||lt["Yi Syllables"](o)||lt["Yi Radicals"](o))))}function la(o){return!(zd(o)||function(n){return!!(lt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||lt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||lt["Letterlike Symbols"](n)||lt["Number Forms"](n)||lt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||lt["Control Pictures"](n)&&n!==9251||lt["Optical Character Recognition"](n)||lt["Enclosed Alphanumerics"](n)||lt["Geometric Shapes"](n)||lt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||lt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||lt["CJK Symbols and Punctuation"](n)||lt.Katakana(n)||lt["Private Use Area"](n)||lt["CJK Compatibility Forms"](n)||lt["Small Form Variants"](n)||lt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function Ld(o){return o>=1424&&o<=2303||lt["Arabic Presentation Forms-A"](o)||lt["Arabic Presentation Forms-B"](o)}function Od(o,n){return!(!n&&Ld(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||lt.Khmer(o))}function up(o){for(const n of o)if(Ld(n.charCodeAt(0)))return!0;return!1}const zo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Sr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new lp,this.transition={})}isSupportedScript(n){return function(s,d){for(const m of s)if(!Od(m.charCodeAt(0),d))return!1;return!0}(n,zo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class Ma{constructor(n,s){this.property=n,this.value=s,this.expression=function(d,m){if(Ea(d))return new An(d,m);if(Pc(d)){const v=hl(d,m);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=cr.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=kn.parse(d)):v=hi.parse(d),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,d){return this.property.possiblyEvaluate(this,n,s,d)}}class ka{constructor(n){this.property=n,this.value=new Ma(n,void 0)}transitioned(n,s){return new Dd(this.property,this.value,s,le({},n.transition,this.transition),n.now)}untransitioned(){return new Dd(this.property,this.value,null,{},0)}}class dp{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ae(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ka(this._values[n].property)),this._values[n].value=new Ma(this._values[n].property,s===null?void 0:Ae(s))}getTransition(n){return Ae(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ka(this._values[n].property)),this._values[n].transition=Ae(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const d=new hs(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(n,s._values[m]);return d}untransitioned(){const n=new hs(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Dd{constructor(n,s,d,m,v){this.property=n,this.value=s,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(n,s,d){const m=n.now||0,v=this.value.possiblyEvaluate(n,s,d),_=this.prior;if(_){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return _.possiblyEvaluate(n,s,d);{const b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,d),v,function(E){if(E<=0)return 0;if(E>=1)return 1;const P=E*E,z=P*E;return 4*(E<.5?z:3*(E-P)+z-.75)}(b))}}return v}}class hs{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,d){const m=new _l(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,d);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Oy{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ae(this._values[n].value)}setValue(n,s){this._values[n]=new Ma(this._values[n].property,s===null?void 0:Ae(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d)}return n}possiblyEvaluate(n,s,d){const m=new _l(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,d);return m}}class mo{constructor(n,s,d){this.property=n,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,d,m){return this.property.evaluate(this.value,this.parameters,n,s,d,m)}}class _l{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class yt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,d){const m=Bn[this.specification.type];return m?m(n,s,d):n}}class y{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,d,m){return new mo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},d,m)}:n.expression,s)}interpolate(n,s,d){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new mo(this,{kind:"constant",value:void 0},n.parameters);const m=Bn[this.specification.type];if(m){const v=m(n.value.value,s.value.value,d);return new mo(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,d,m,v,_){return n.kind==="constant"?n.value:n.evaluate(s,d,m,v,_)}}class i extends y{possiblyEvaluate(n,s,d,m){if(n.value===void 0)return new mo(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},d,m),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(_,_,_,s);return new mo(this,{kind:"constant",value:b},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new mo(this,{kind:"constant",value:v},s)}return new mo(this,n.expression,s)}evaluate(n,s,d,m,v,_){if(n.kind==="source"){const b=n.evaluate(s,d,m,v,_);return this._calculate(b,b,b,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},d,m),n.evaluate({zoom:Math.floor(s.zoom)},d,m),n.evaluate({zoom:Math.floor(s.zoom)+1},d,m),s):n.value}_calculate(n,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class c{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},d,m);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Sr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Sr(Math.floor(s.zoom),s)),n.expression.evaluate(new Sr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class p{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,m){return!!n.expression.evaluate(s,null,{},d,m)}interpolate(){return!1}}class g{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const d=n[s];d.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Ma(d,void 0),v=this.defaultTransitionablePropertyValues[s]=new ka(d);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}dt("DataDrivenProperty",y),dt("DataConstantProperty",yt),dt("CrossFadedDataDrivenProperty",i),dt("CrossFadedProperty",c),dt("ColorRampProperty",p);const x="-transition";class S extends br{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Oy(s.layout)),s.paint)){this._transitionablePaint=new dp(s.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new _l(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,d={}){s!=null&&this._validate(op,`layers.${this.id}.layout.${n}`,n,s,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(x)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,d={}){if(s!=null&&this._validate(ip,`layers.${this.id}.paint.${n}`,n,s,d))return!1;if(n.endsWith(x))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const E=this._transitionablePaint._values[n].value;return E.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,b,E)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ke(n,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(n,s,d,m,v={}){return(!v||v.validate!==!1)&&ap(this,n.call(gl,{key:s,layerType:this.type,objectKey:d,value:m,styleSpec:ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof mo&&ss(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const T={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class M{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class R{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function F(o,n=1){let s=0,d=0;return{members:o.map(m=>{const v=T[m.type].BYTES_PER_ELEMENT,_=s=V(s,Math.max(n,v)),b=m.components||1;return d=Math.max(d,v),s+=v*b,{name:m.name,type:m.type,components:b,offset:_}}),size:V(s,Math.max(d,n)),alignment:n}}function V(o,n){return Math.ceil(o/n)*n}class X extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=d,n}}X.prototype.bytesPerElement=4,dt("StructArrayLayout2i4",X);class re extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=d,this.int16[v+2]=m,n}}re.prototype.bytesPerElement=6,dt("StructArrayLayout3i6",re);class ie extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,d,m)}emplace(n,s,d,m,v){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=m,this.int16[_+3]=v,n}}ie.prototype.bytesPerElement=8,dt("StructArrayLayout4i8",ie);class ce extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,d,m,v,_)}emplace(n,s,d,m,v,_,b){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=m,this.int16[E+3]=v,this.int16[E+4]=_,this.int16[E+5]=b,n}}ce.prototype.bytesPerElement=12,dt("StructArrayLayout2i4i12",ce);class te extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,d,m,v,_)}emplace(n,s,d,m,v,_,b){const E=4*n,P=8*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.uint8[P+4]=m,this.uint8[P+5]=v,this.uint8[P+6]=_,this.uint8[P+7]=b,n}}te.prototype.bytesPerElement=8,dt("StructArrayLayout2i4ub8",te);class me extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=d,n}}me.prototype.bytesPerElement=8,dt("StructArrayLayout2f8",me);class Te extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_,b,E,P,z){const D=this.length;return this.resize(D+1),this.emplace(D,n,s,d,m,v,_,b,E,P,z)}emplace(n,s,d,m,v,_,b,E,P,z,D){const N=10*n;return this.uint16[N+0]=s,this.uint16[N+1]=d,this.uint16[N+2]=m,this.uint16[N+3]=v,this.uint16[N+4]=_,this.uint16[N+5]=b,this.uint16[N+6]=E,this.uint16[N+7]=P,this.uint16[N+8]=z,this.uint16[N+9]=D,n}}Te.prototype.bytesPerElement=20,dt("StructArrayLayout10ui20",Te);class ue extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_,b,E,P,z,D,N){const W=this.length;return this.resize(W+1),this.emplace(W,n,s,d,m,v,_,b,E,P,z,D,N)}emplace(n,s,d,m,v,_,b,E,P,z,D,N,W){const Y=12*n;return this.int16[Y+0]=s,this.int16[Y+1]=d,this.int16[Y+2]=m,this.int16[Y+3]=v,this.uint16[Y+4]=_,this.uint16[Y+5]=b,this.uint16[Y+6]=E,this.uint16[Y+7]=P,this.int16[Y+8]=z,this.int16[Y+9]=D,this.int16[Y+10]=N,this.int16[Y+11]=W,n}}ue.prototype.bytesPerElement=24,dt("StructArrayLayout4i4ui4i24",ue);class _e extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=d,this.float32[v+2]=m,n}}_e.prototype.bytesPerElement=12,dt("StructArrayLayout3f12",_e);class Ie extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Ie.prototype.bytesPerElement=4,dt("StructArrayLayout1ul4",Ie);class Re extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_,b,E,P){const z=this.length;return this.resize(z+1),this.emplace(z,n,s,d,m,v,_,b,E,P)}emplace(n,s,d,m,v,_,b,E,P,z){const D=10*n,N=5*n;return this.int16[D+0]=s,this.int16[D+1]=d,this.int16[D+2]=m,this.int16[D+3]=v,this.int16[D+4]=_,this.int16[D+5]=b,this.uint32[N+3]=E,this.uint16[D+8]=P,this.uint16[D+9]=z,n}}Re.prototype.bytesPerElement=20,dt("StructArrayLayout6i1ul2ui20",Re);class Fe extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,d,m,v,_)}emplace(n,s,d,m,v,_,b){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=m,this.int16[E+3]=v,this.int16[E+4]=_,this.int16[E+5]=b,n}}Fe.prototype.bytesPerElement=12,dt("StructArrayLayout2i2i2i12",Fe);class Ke extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,m,v)}emplace(n,s,d,m,v,_){const b=4*n,E=8*n;return this.float32[b+0]=s,this.float32[b+1]=d,this.float32[b+2]=m,this.int16[E+6]=v,this.int16[E+7]=_,n}}Ke.prototype.bytesPerElement=16,dt("StructArrayLayout2f1f2i16",Ke);class qe extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,d,m)}emplace(n,s,d,m,v){const _=12*n,b=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=d,this.float32[b+1]=m,this.float32[b+2]=v,n}}qe.prototype.bytesPerElement=12,dt("StructArrayLayout2ub2f12",qe);class tt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=d,this.uint16[v+2]=m,n}}tt.prototype.bytesPerElement=6,dt("StructArrayLayout3ui6",tt);class ut extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de){const Se=this.length;return this.resize(Se+1),this.emplace(Se,n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de)}emplace(n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de,Se){const pe=24*n,we=12*n,je=48*n;return this.int16[pe+0]=s,this.int16[pe+1]=d,this.uint16[pe+2]=m,this.uint16[pe+3]=v,this.uint32[we+2]=_,this.uint32[we+3]=b,this.uint32[we+4]=E,this.uint16[pe+10]=P,this.uint16[pe+11]=z,this.uint16[pe+12]=D,this.float32[we+7]=N,this.float32[we+8]=W,this.uint8[je+36]=Y,this.uint8[je+37]=ee,this.uint8[je+38]=se,this.uint32[we+10]=de,this.int16[pe+22]=Se,n}}ut.prototype.bytesPerElement=48,dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ut);class Dt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de,Se,pe,we,je,We,ct,mt,at,ot,ht,vt){const st=this.length;return this.resize(st+1),this.emplace(st,n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de,Se,pe,we,je,We,ct,mt,at,ot,ht,vt)}emplace(n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee,se,de,Se,pe,we,je,We,ct,mt,at,ot,ht,vt,st){const Ge=32*n,pt=16*n;return this.int16[Ge+0]=s,this.int16[Ge+1]=d,this.int16[Ge+2]=m,this.int16[Ge+3]=v,this.int16[Ge+4]=_,this.int16[Ge+5]=b,this.int16[Ge+6]=E,this.int16[Ge+7]=P,this.uint16[Ge+8]=z,this.uint16[Ge+9]=D,this.uint16[Ge+10]=N,this.uint16[Ge+11]=W,this.uint16[Ge+12]=Y,this.uint16[Ge+13]=ee,this.uint16[Ge+14]=se,this.uint16[Ge+15]=de,this.uint16[Ge+16]=Se,this.uint16[Ge+17]=pe,this.uint16[Ge+18]=we,this.uint16[Ge+19]=je,this.uint16[Ge+20]=We,this.uint16[Ge+21]=ct,this.uint16[Ge+22]=mt,this.uint32[pt+12]=at,this.float32[pt+13]=ot,this.float32[pt+14]=ht,this.uint16[Ge+30]=vt,this.uint16[Ge+31]=st,n}}Dt.prototype.bytesPerElement=64,dt("StructArrayLayout8i15ui1ul2f2ui64",Dt);class nt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}nt.prototype.bytesPerElement=4,dt("StructArrayLayout1f4",nt);class St extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=d,this.float32[v+2]=m,n}}St.prototype.bytesPerElement=12,dt("StructArrayLayout1ui2f12",St);class Ft extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,d)}emplace(n,s,d,m){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=d,this.uint16[v+3]=m,n}}Ft.prototype.bytesPerElement=8,dt("StructArrayLayout1ul2ui8",Ft);class Yt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=d,n}}Yt.prototype.bytesPerElement=4,dt("StructArrayLayout2ui4",Yt);class Pt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}Pt.prototype.bytesPerElement=2,dt("StructArrayLayout1ui2",Pt);class jt extends R{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,d,m)}emplace(n,s,d,m,v){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=m,this.float32[_+3]=v,n}}jt.prototype.bytesPerElement=16,dt("StructArrayLayout4f16",jt);class Gt extends M{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}Gt.prototype.size=20;class Br extends Re{get(n){return new Gt(this,n)}}dt("CollisionBoxArray",Br);class fr extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}fr.prototype.size=48;class gi extends ut{get(n){return new fr(this,n)}}dt("PlacedSymbolArray",gi);class vn extends M{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}vn.prototype.size=64;class $r extends Dt{get(n){return new vn(this,n)}}dt("SymbolInstanceArray",$r);class Jn extends nt{getoffsetX(n){return this.float32[1*n+0]}}dt("GlyphOffsetArray",Jn);class Vi extends re{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}dt("SymbolLineVertexArray",Vi);class go extends M{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}go.prototype.size=12;class ca extends St{get(n){return new go(this,n)}}dt("TextAnchorOffsetArray",ca);class fs extends M{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fs.prototype.size=8;class Aa extends Ft{get(n){return new fs(this,n)}}dt("FeatureIndexArray",Aa);class Ra extends X{}class $n extends X{}class Rn extends X{}class Nn extends ce{}class xl extends te{}class un extends me{}class Ar extends Te{}class ki extends ue{}class dn extends _e{}class Dy extends Ie{}class hp extends Fe{}class Fy extends qe{}class ps extends tt{}class Fd extends Yt{}const By=F([{name:"a_pos",components:2,type:"Int16"}],4),{members:ms}=By;class _n{constructor(n=[]){this.segments=n}prepareSegment(n,s,d,m){let v=this.segments[this.segments.length-1];return n>_n.MAX_VERTEX_ARRAY_LENGTH&&He(`Max vertices per segment is ${_n.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>_n.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,d,m){return new _n([{vertexOffset:n,primitiveOffset:s,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function Bd(o,n){return 256*(o=ne(Math.floor(o),0,255))+ne(Math.floor(n),0,255)}_n.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dt("SegmentVector",_n);const bl=F([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var gs={exports:{}},$d={exports:{}};$d.exports=function(o,n){var s,d,m,v,_,b,E,P;for(d=o.length-(s=3&o.length),m=n,_=3432918353,b=461845907,P=0;P<d;)E=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24,++P,m=27492+(65535&(v=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&o.charCodeAt(P+2))<<16;case 2:E^=(255&o.charCodeAt(P+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&o.charCodeAt(P)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return m^=o.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Nd=$d.exports,Jx={exports:{}};Jx.exports=function(o,n){for(var s,d=o.length,m=n^d,v=0;d>=4;)s=1540483477*(65535&(s=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&o.charCodeAt(v+2))<<16;case 2:m^=(255&o.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&o.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Qx=Nd,zk=Jx.exports;gs.exports=Qx,gs.exports.murmur3=Qx,gs.exports.murmur2=zk;var $y=w(gs.exports);class fp{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,d,m){this.ids.push(eb(n)),this.positions.push(s,d,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=eb(n);let d=0,m=this.ids.length-1;for(;d<m;){const _=d+m>>1;this.ids[_]>=s?m=_:d=_+1}const v=[];for(;this.ids[d]===s;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(n,s){const d=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Ny(d,m,0,d.length-1),s&&s.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(n){const s=new fp;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function eb(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:$y(String(o))}function Ny(o,n,s,d){for(;s<d;){const m=o[s+d>>1];let v=s-1,_=d+1;for(;;){do v++;while(o[v]<m);do _--;while(o[_]>m);if(v>=_)break;pp(o,v,_),pp(n,3*v,3*_),pp(n,3*v+1,3*_+1),pp(n,3*v+2,3*_+2)}_-s<d-_?(Ny(o,n,s,_),s=_+1):(Ny(o,n,_+1,d),d=_)}}function pp(o,n,s){const d=o[n];o[n]=o[s],o[s]=d}dt("FeaturePositionMap",fp);class wl{constructor(n,s){this.gl=n.gl,this.location=s}}class mp extends wl{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class tb extends wl{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class rb extends wl{constructor(n,s){super(n,s),this.current=cr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Lk=new Float32Array(16);function jy(o){return[Bd(255*o.r,255*o.g),Bd(255*o.b,255*o.a)]}class jd{constructor(n,s,d){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=d}setUniform(n,s,d){n.set(d.constantOr(this.value))}getBinding(n,s,d){return this.type==="color"?new rb(n,s):new mp(n,s)}}class Oc{constructor(n,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,d,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,d){return d.substr(0,9)==="u_pattern"?new tb(n,s):new mp(n,s)}}class za{constructor(n,s,d,m){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,d,m,v){const _=this.paintVertexArray.length,b=this.expression.evaluate(new Sr(0),s,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,b)}updatePaintArray(n,s,d,m){const v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(n,s,v)}_setPaintValue(n,s,d){if(this.type==="color"){const m=jy(d);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Lo{constructor(n,s,d,m,v,_){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,d,m,v){const _=this.expression.evaluate(new Sr(this.zoom),s,{},m,[],v),b=this.expression.evaluate(new Sr(this.zoom+1),s,{},m,[],v),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,_,b)}updatePaintArray(n,s,d,m){const v=this.expression.evaluate({zoom:this.zoom},d,m),_=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(n,s,v,_)}_setPaintValue(n,s,d,m){if(this.type==="color"){const v=jy(d),_=jy(m);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,v[0],v[1],_[0],_[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=ne(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,d){return new mp(n,s)}}class ys{constructor(n,s,d,m,v,_){this.expression=n,this.type=s,this.useIntegerZoom=d,this.zoom=m,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(n,s,d,m,v){this._setPaintValues(n,s,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(n,s,d,m){if(!m||!d)return;const{min:v,mid:_,max:b}=d,E=m[v],P=m[_],z=m[b];if(E&&P&&z)for(let D=n;D<s;D++)this.zoomInPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],P.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],P.pixelRatio,z.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,bl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,bl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class nb{constructor(n,s,d){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!d(v))continue;const _=n.paint.get(v);if(!(_ instanceof mo&&ss(_.property.specification)))continue;const b=Ok(v,n.type),E=_.value,P=_.property.specification.type,z=_.property.useIntegerZoom,D=_.property.specification["property-type"],N=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[v]=N?new Oc(E.value,b):new jd(E.value,b,P),m.push(`/u_${v}`);else if(E.kind==="source"||N){const W=ib(v,P,"source");this.binders[v]=N?new ys(E,P,z,s,W,n.id):new za(E,b,P,W),m.push(`/a_${v}`)}else{const W=ib(v,P,"composite");this.binders[v]=new Lo(E,b,P,z,s,W),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof za||s instanceof Lo?s.maxValue:0}populatePaintArrays(n,s,d,m,v){for(const _ in this.binders){const b=this.binders[_];(b instanceof za||b instanceof Lo||b instanceof ys)&&b.populatePaintArray(n,s,d,m,v)}}setConstantPatternPositions(n,s){for(const d in this.binders){const m=this.binders[d];m instanceof Oc&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,d,m,v){let _=!1;for(const b in n){const E=s.getPositions(b);for(const P of E){const z=d.feature(P.index);for(const D in this.binders){const N=this.binders[D];if((N instanceof za||N instanceof Lo||N instanceof ys)&&N.expression.isStateDependent===!0){const W=m.paint.get(D);N.expression=W.value,N.updatePaintArray(P.start,P.end,z,n[b],v),_=!0}}}}return _}defines(){const n=[];for(const s in this.binders){const d=this.binders[s];(d instanceof jd||d instanceof Oc)&&n.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof za||d instanceof Lo)for(let m=0;m<d.paintVertexAttributes.length;m++)n.push(d.paintVertexAttributes[m].name);else if(d instanceof ys)for(let m=0;m<bl.members.length;m++)n.push(bl.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof jd||d instanceof Oc||d instanceof Lo)for(const m of d.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const d=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof jd||v instanceof Oc||v instanceof Lo){for(const _ of v.uniformNames)if(s[_]){const b=v.getBinding(n,s[_],_);d.push({name:_,property:m,binding:b})}}}return d}setUniforms(n,s,d,m){for(const{name:v,property:_,binding:b}of s)this.binders[_].setUniform(b,m,d.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(n&&d instanceof ys){const m=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof za||d instanceof Lo)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const s in this.binders){const d=this.binders[s];(d instanceof za||d instanceof Lo||d instanceof ys)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof za||s instanceof Lo||s instanceof ys)&&s.destroy()}}}class Sl{constructor(n,s,d=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new nb(m,s,d);this.needsUpload=!1,this._featureMap=new fp,this._bufferOffset=0}populatePaintArrays(n,s,d,m,v,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,s,m,v,_);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,d,m){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ok(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function ib(o,n,s){const d={color:{source:me,composite:jt},number:{source:nt,composite:me}},m=function(v){return{"line-pattern":{source:Ar,composite:Ar},"fill-pattern":{source:Ar,composite:Ar},"fill-extrusion-pattern":{source:Ar,composite:Ar}}[v]}(o);return m&&m[s]||d[n][s]}dt("ConstantBinder",jd),dt("CrossFadedConstantBinder",Oc),dt("SourceExpressionBinder",za),dt("CrossFadedCompositeBinder",ys),dt("CompositeExpressionBinder",Lo),dt("ProgramConfiguration",nb,{omit:["_buffers"]}),dt("ProgramConfigurationSet",Sl);const tn=8192,Vy=Math.pow(2,14)-1,ob=-Vy-1;function Cl(o){const n=tn/o.extent,s=o.loadGeometry();for(let d=0;d<s.length;d++){const m=s[d];for(let v=0;v<m.length;v++){const _=m[v],b=Math.round(_.x*n),E=Math.round(_.y*n);_.x=ne(b,ob,Vy),_.y=ne(E,ob,Vy),(b<_.x||b>_.x+1||E<_.y||E>_.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function El(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?Cl(o):[]}}function gp(o,n,s,d,m){o.emplaceBack(2*n+(d+1)/2,2*s+(m+1)/2)}class Uy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $n,this.indexArray=new ps,this.segments=new _n,this.programConfigurations=new Sl(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){const m=this.layers[0],v=[];let _=null,b=!1;m.type==="circle"&&(_=m.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:E,id:P,index:z,sourceLayerIndex:D}of n){const N=this.layers[0]._featureFilter.needGeometry,W=El(E,N);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),W,d))continue;const Y=b?_.evaluate(W,{},d):void 0,ee={id:P,properties:E.properties,type:E.type,sourceLayerIndex:D,index:z,geometry:N?W.geometry:Cl(E),patterns:{},sortKey:Y};v.push(ee)}b&&v.sort((E,P)=>E.sortKey-P.sortKey);for(const E of v){const{geometry:P,index:z,sourceLayerIndex:D}=E,N=n[z].feature;this.addFeature(E,P,z,d),s.featureIndex.insert(N,P,z,D,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ms),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,d,m){for(const v of s)for(const _ of v){const b=_.x,E=_.y;if(b<0||b>=tn||E<0||E>=tn)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),z=P.vertexLength;gp(this.layoutVertexArray,b,E,-1,-1),gp(this.layoutVertexArray,b,E,1,-1),gp(this.layoutVertexArray,b,E,1,1),gp(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},m)}}function ab(o,n){for(let s=0;s<o.length;s++)if(Dc(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Dc(o,n[s]))return!0;return!!Hy(o,n)}function Dk(o,n,s){return!!Dc(o,n)||!!Wy(n,o,s)}function sb(o,n){if(o.length===1)return cb(n,o[0]);for(let s=0;s<n.length;s++){const d=n[s];for(let m=0;m<d.length;m++)if(Dc(o,d[m]))return!0}for(let s=0;s<o.length;s++)if(cb(n,o[s]))return!0;for(let s=0;s<n.length;s++)if(Hy(o,n[s]))return!0;return!1}function Fk(o,n,s){if(o.length>1){if(Hy(o,n))return!0;for(let d=0;d<n.length;d++)if(Wy(n[d],o,s))return!0}for(let d=0;d<o.length;d++)if(Wy(o[d],n,s))return!0;return!1}function Hy(o,n){if(o.length===0||n.length===0)return!1;for(let s=0;s<o.length-1;s++){const d=o[s],m=o[s+1];for(let v=0;v<n.length-1;v++)if(Bk(d,m,n[v],n[v+1]))return!0}return!1}function Bk(o,n,s,d){return Le(o,s,d)!==Le(n,s,d)&&Le(o,n,s)!==Le(o,n,d)}function Wy(o,n,s){const d=s*s;if(n.length===1)return o.distSqr(n[0])<d;for(let m=1;m<n.length;m++)if(lb(o,n[m-1],n[m])<d)return!0;return!1}function lb(o,n,s){const d=n.distSqr(s);if(d===0)return o.distSqr(n);const m=((o.x-n.x)*(s.x-n.x)+(o.y-n.y)*(s.y-n.y))/d;return o.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function cb(o,n){let s,d,m,v=!1;for(let _=0;_<o.length;_++){s=o[_];for(let b=0,E=s.length-1;b<s.length;E=b++)d=s[b],m=s[E],d.y>n.y!=m.y>n.y&&n.x<(m.x-d.x)*(n.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function Dc(o,n){let s=!1;for(let d=0,m=o.length-1;d<o.length;m=d++){const v=o[d],_=o[m];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function $k(o,n,s){const d=s[0],m=s[2];if(o.x<d.x&&n.x<d.x||o.x>m.x&&n.x>m.x||o.y<d.y&&n.y<d.y||o.y>m.y&&n.y>m.y)return!1;const v=Le(o,n,s[0]);return v!==Le(o,n,s[1])||v!==Le(o,n,s[2])||v!==Le(o,n,s[3])}function Vd(o,n,s){const d=n.paint.get(o).value;return d.kind==="constant"?d.value:s.programConfigurations.get(n.id).getMaxValue(o)}function yp(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function vp(o,n,s,d,m){if(!n[0]&&!n[1])return o;const v=k.convert(n)._mult(m);s==="viewport"&&v._rotate(-d);const _=[];for(let b=0;b<o.length;b++)_.push(o[b].sub(v));return _}let ub,db;dt("CircleBucket",Uy,{omit:["layers"]});var Nk={get paint(){return db=db||new g({"circle-radius":new y(ze.paint_circle["circle-radius"]),"circle-color":new y(ze.paint_circle["circle-color"]),"circle-blur":new y(ze.paint_circle["circle-blur"]),"circle-opacity":new y(ze.paint_circle["circle-opacity"]),"circle-translate":new yt(ze.paint_circle["circle-translate"]),"circle-translate-anchor":new yt(ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yt(ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yt(ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new y(ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new y(ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new y(ze.paint_circle["circle-stroke-opacity"])})},get layout(){return ub=ub||new g({"circle-sort-key":new y(ze.layout_circle["circle-sort-key"])})}},Qn=1e-6,Fc=typeof Float32Array<"u"?Float32Array:Array;function Gy(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function hb(o,n,s){var d=n[0],m=n[1],v=n[2],_=n[3],b=n[4],E=n[5],P=n[6],z=n[7],D=n[8],N=n[9],W=n[10],Y=n[11],ee=n[12],se=n[13],de=n[14],Se=n[15],pe=s[0],we=s[1],je=s[2],We=s[3];return o[0]=pe*d+we*b+je*D+We*ee,o[1]=pe*m+we*E+je*N+We*se,o[2]=pe*v+we*P+je*W+We*de,o[3]=pe*_+we*z+je*Y+We*Se,o[4]=(pe=s[4])*d+(we=s[5])*b+(je=s[6])*D+(We=s[7])*ee,o[5]=pe*m+we*E+je*N+We*se,o[6]=pe*v+we*P+je*W+We*de,o[7]=pe*_+we*z+je*Y+We*Se,o[8]=(pe=s[8])*d+(we=s[9])*b+(je=s[10])*D+(We=s[11])*ee,o[9]=pe*m+we*E+je*N+We*se,o[10]=pe*v+we*P+je*W+We*de,o[11]=pe*_+we*z+je*Y+We*Se,o[12]=(pe=s[12])*d+(we=s[13])*b+(je=s[14])*D+(We=s[15])*ee,o[13]=pe*m+we*E+je*N+We*se,o[14]=pe*v+we*P+je*W+We*de,o[15]=pe*_+we*z+je*Y+We*Se,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var Ud,jk=hb;function _p(o,n,s){var d=n[0],m=n[1],v=n[2],_=n[3];return o[0]=s[0]*d+s[4]*m+s[8]*v+s[12]*_,o[1]=s[1]*d+s[5]*m+s[9]*v+s[13]*_,o[2]=s[2]*d+s[6]*m+s[10]*v+s[14]*_,o[3]=s[3]*d+s[7]*m+s[11]*v+s[15]*_,o}Ud=new Fc(4),Fc!=Float32Array&&(Ud[0]=0,Ud[1]=0,Ud[2]=0,Ud[3]=0);class Vk extends S{constructor(n){super(n,Nk)}createBucket(n){return new Uy(n)}queryRadius(n){const s=n;return Vd("circle-radius",this,s)+Vd("circle-stroke-width",this,s)+yp(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,d,m,v,_,b,E){const P=vp(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,b),z=this.paint.get("circle-radius").evaluate(s,d)+this.paint.get("circle-stroke-width").evaluate(s,d),D=this.paint.get("circle-pitch-alignment")==="map",N=D?P:function(Y,ee){return Y.map(se=>fb(se,ee))}(P,E),W=D?z*b:z;for(const Y of m)for(const ee of Y){const se=D?ee:fb(ee,E);let de=W;const Se=_p([],[ee.x,ee.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?de*=Se[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(de*=_.cameraToCenterDistance/Se[3]),Dk(N,se,de))return!0}return!1}}function fb(o,n){const s=_p([],[o.x,o.y,0,1],n);return new k(s[0]/s[3],s[1]/s[3])}class pb extends Uy{}let mb;dt("HeatmapBucket",pb,{omit:["layers"]});var Uk={get paint(){return mb=mb||new g({"heatmap-radius":new y(ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new y(ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yt(ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new p(ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yt(ze.paint_heatmap["heatmap-opacity"])})}};function qy(o,{width:n,height:s},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*d}`)}else m=new Uint8Array(n*s*d);return o.width=n,o.height=s,o.data=m,o}function gb(o,{width:n,height:s},d){if(n===o.width&&s===o.height)return;const m=qy({},{width:n,height:s},d);Zy(o,m,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,s)},d),o.width=n,o.height=s,o.data=m.data}function Zy(o,n,s,d,m,v){if(m.width===0||m.height===0)return n;if(m.width>o.width||m.height>o.height||s.x>o.width-m.width||s.y>o.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||d.x>n.width-m.width||d.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,b=n.data;if(_===b)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){const P=((s.y+E)*o.width+s.x)*v,z=((d.y+E)*n.width+d.x)*v;for(let D=0;D<m.width*v;D++)b[z+D]=_[P+D]}return n}class Hd{constructor(n,s){qy(this,n,1,s)}resize(n){gb(this,n,1)}clone(){return new Hd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,m,v){Zy(n,s,d,m,v,1)}}class Ui{constructor(n,s){qy(this,n,4,s)}resize(n){gb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ui({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,m,v){Zy(n,s,d,m,v,4)}}function yb(o){const n={},s=o.resolution||256,d=o.clips?o.clips.length:1,m=o.image||new Ui({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,b,E)=>{n[o.evaluationKey]=E;const P=o.expression.evaluate(n);m.data[_+b+0]=Math.floor(255*P.r/P.a),m.data[_+b+1]=Math.floor(255*P.g/P.a),m.data[_+b+2]=Math.floor(255*P.b/P.a),m.data[_+b+3]=Math.floor(255*P.a)};if(o.clips)for(let _=0,b=0;_<d;++_,b+=4*s)for(let E=0,P=0;E<s;E++,P+=4){const z=E/(s-1),{start:D,end:N}=o.clips[_];v(b,P,D*(1-z)+N*z)}else for(let _=0,b=0;_<s;_++,b+=4)v(0,b,_/(s-1));return m}dt("AlphaImage",Hd),dt("RGBAImage",Ui);class Hk extends S{createBucket(n){return new pb(n)}constructor(n){super(n,Uk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let vb;var Wk={get paint(){return vb=vb||new g({"hillshade-illumination-direction":new yt(ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new yt(ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yt(ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yt(ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yt(ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yt(ze.paint_hillshade["hillshade-accent-color"])})}};class Gk extends S{constructor(n){super(n,Wk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const qk=F([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zk}=qk;var Ky={exports:{}};function xp(o,n,s){s=s||2;var d,m,v,_,b,E,P,z=n&&n.length,D=z?n[0]*s:o.length,N=_b(o,0,D,s,!0),W=[];if(!N||N.next===N.prev)return W;if(z&&(N=function(ee,se,de,Se){var pe,we,je,We=[];for(pe=0,we=se.length;pe<we;pe++)(je=_b(ee,se[pe]*Se,pe<we-1?se[pe+1]*Se:ee.length,Se,!1))===je.next&&(je.steiner=!0),We.push(r3(je));for(We.sort(Qk),pe=0;pe<We.length;pe++)de=e3(We[pe],de);return de}(o,n,N,s)),o.length>80*s){d=v=o[0],m=_=o[1];for(var Y=s;Y<D;Y+=s)(b=o[Y])<d&&(d=b),(E=o[Y+1])<m&&(m=E),b>v&&(v=b),E>_&&(_=E);P=(P=Math.max(v-d,_-m))!==0?32767/P:0}return Wd(N,W,s,d,m,P,0),W}function _b(o,n,s,d,m){var v,_;if(m===Jy(o,n,s,d)>0)for(v=n;v<s;v+=d)_=wb(v,o[v],o[v+1],_);else for(v=s-d;v>=n;v-=d)_=wb(v,o[v],o[v+1],_);return _&&bp(_,_.next)&&(qd(_),_=_.next),_}function Tl(o,n){if(!o)return o;n||(n=o);var s,d=o;do if(s=!1,d.steiner||!bp(d,d.next)&&qr(d.prev,d,d.next)!==0)d=d.next;else{if(qd(d),(d=n=d.prev)===d.next)break;s=!0}while(s||d!==n);return n}function Wd(o,n,s,d,m,v,_){if(o){!_&&v&&function(z,D,N,W){var Y=z;do Y.z===0&&(Y.z=Xy(Y.x,Y.y,D,N,W)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==z);Y.prevZ.nextZ=null,Y.prevZ=null,function(ee){var se,de,Se,pe,we,je,We,ct,mt=1;do{for(de=ee,ee=null,we=null,je=0;de;){for(je++,Se=de,We=0,se=0;se<mt&&(We++,Se=Se.nextZ);se++);for(ct=mt;We>0||ct>0&&Se;)We!==0&&(ct===0||!Se||de.z<=Se.z)?(pe=de,de=de.nextZ,We--):(pe=Se,Se=Se.nextZ,ct--),we?we.nextZ=pe:ee=pe,pe.prevZ=we,we=pe;de=Se}we.nextZ=null,mt*=2}while(je>1)}(Y)}(o,d,m,v);for(var b,E,P=o;o.prev!==o.next;)if(b=o.prev,E=o.next,v?Xk(o,d,m,v):Kk(o))n.push(b.i/s|0),n.push(o.i/s|0),n.push(E.i/s|0),qd(o),o=E.next,P=E.next;else if((o=E)===P){_?_===1?Wd(o=Yk(Tl(o),n,s),n,s,d,m,v,2):_===2&&Jk(o,n,s,d,m,v):Wd(Tl(o),n,s,d,m,v,1);break}}}function Kk(o){var n=o.prev,s=o,d=o.next;if(qr(n,s,d)>=0)return!1;for(var m=n.x,v=s.x,_=d.x,b=n.y,E=s.y,P=d.y,z=m<v?m<_?m:_:v<_?v:_,D=b<E?b<P?b:P:E<P?E:P,N=m>v?m>_?m:_:v>_?v:_,W=b>E?b>P?b:P:E>P?E:P,Y=d.next;Y!==n;){if(Y.x>=z&&Y.x<=N&&Y.y>=D&&Y.y<=W&&Bc(m,b,v,E,_,P,Y.x,Y.y)&&qr(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function Xk(o,n,s,d){var m=o.prev,v=o,_=o.next;if(qr(m,v,_)>=0)return!1;for(var b=m.x,E=v.x,P=_.x,z=m.y,D=v.y,N=_.y,W=b<E?b<P?b:P:E<P?E:P,Y=z<D?z<N?z:N:D<N?D:N,ee=b>E?b>P?b:P:E>P?E:P,se=z>D?z>N?z:N:D>N?D:N,de=Xy(W,Y,n,s,d),Se=Xy(ee,se,n,s,d),pe=o.prevZ,we=o.nextZ;pe&&pe.z>=de&&we&&we.z<=Se;){if(pe.x>=W&&pe.x<=ee&&pe.y>=Y&&pe.y<=se&&pe!==m&&pe!==_&&Bc(b,z,E,D,P,N,pe.x,pe.y)&&qr(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,we.x>=W&&we.x<=ee&&we.y>=Y&&we.y<=se&&we!==m&&we!==_&&Bc(b,z,E,D,P,N,we.x,we.y)&&qr(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;pe&&pe.z>=de;){if(pe.x>=W&&pe.x<=ee&&pe.y>=Y&&pe.y<=se&&pe!==m&&pe!==_&&Bc(b,z,E,D,P,N,pe.x,pe.y)&&qr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;we&&we.z<=Se;){if(we.x>=W&&we.x<=ee&&we.y>=Y&&we.y<=se&&we!==m&&we!==_&&Bc(b,z,E,D,P,N,we.x,we.y)&&qr(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function Yk(o,n,s){var d=o;do{var m=d.prev,v=d.next.next;!bp(m,v)&&xb(m,d,d.next,v)&&Gd(m,v)&&Gd(v,m)&&(n.push(m.i/s|0),n.push(d.i/s|0),n.push(v.i/s|0),qd(d),qd(d.next),d=o=v),d=d.next}while(d!==o);return Tl(d)}function Jk(o,n,s,d,m,v){var _=o;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&n3(_,b)){var E=bb(_,b);return _=Tl(_,_.next),E=Tl(E,E.next),Wd(_,n,s,d,m,v,0),void Wd(E,n,s,d,m,v,0)}b=b.next}_=_.next}while(_!==o)}function Qk(o,n){return o.x-n.x}function e3(o,n){var s=function(m,v){var _,b=v,E=m.x,P=m.y,z=-1/0;do{if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){var D=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(D<=E&&D>z&&(z=D,_=b.x<b.next.x?b:b.next,D===E))return _}b=b.next}while(b!==v);if(!_)return null;var N,W=_,Y=_.x,ee=_.y,se=1/0;b=_;do E>=b.x&&b.x>=Y&&E!==b.x&&Bc(P<ee?E:z,P,Y,ee,P<ee?z:E,P,b.x,b.y)&&(N=Math.abs(P-b.y)/(E-b.x),Gd(b,m)&&(N<se||N===se&&(b.x>_.x||b.x===_.x&&t3(_,b)))&&(_=b,se=N)),b=b.next;while(b!==W);return _}(o,n);if(!s)return n;var d=bb(s,o);return Tl(d,d.next),Tl(s,s.next)}function t3(o,n){return qr(o.prev,o,n.prev)<0&&qr(n.next,o,o.next)<0}function Xy(o,n,s,d,m){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-s)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function r3(o){var n=o,s=o;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==o);return s}function Bc(o,n,s,d,m,v,_,b){return(m-_)*(n-b)>=(o-_)*(v-b)&&(o-_)*(d-b)>=(s-_)*(n-b)&&(s-_)*(v-b)>=(m-_)*(d-b)}function n3(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(s,d){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==d.i&&m.next.i!==d.i&&xb(m,m.next,s,d))return!0;m=m.next}while(m!==s);return!1}(o,n)&&(Gd(o,n)&&Gd(n,o)&&function(s,d){var m=s,v=!1,_=(s.x+d.x)/2,b=(s.y+d.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&_<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==s);return v}(o,n)&&(qr(o.prev,o,n.prev)||qr(o,n.prev,n))||bp(o,n)&&qr(o.prev,o,o.next)>0&&qr(n.prev,n,n.next)>0)}function qr(o,n,s){return(n.y-o.y)*(s.x-n.x)-(n.x-o.x)*(s.y-n.y)}function bp(o,n){return o.x===n.x&&o.y===n.y}function xb(o,n,s,d){var m=Sp(qr(o,n,s)),v=Sp(qr(o,n,d)),_=Sp(qr(s,d,o)),b=Sp(qr(s,d,n));return m!==v&&_!==b||!(m!==0||!wp(o,s,n))||!(v!==0||!wp(o,d,n))||!(_!==0||!wp(s,o,d))||!(b!==0||!wp(s,n,d))}function wp(o,n,s){return n.x<=Math.max(o.x,s.x)&&n.x>=Math.min(o.x,s.x)&&n.y<=Math.max(o.y,s.y)&&n.y>=Math.min(o.y,s.y)}function Sp(o){return o>0?1:o<0?-1:0}function Gd(o,n){return qr(o.prev,o,o.next)<0?qr(o,n,o.next)>=0&&qr(o,o.prev,n)>=0:qr(o,n,o.prev)<0||qr(o,o.next,n)<0}function bb(o,n){var s=new Yy(o.i,o.x,o.y),d=new Yy(n.i,n.x,n.y),m=o.next,v=n.prev;return o.next=n,n.prev=o,s.next=m,m.prev=s,d.next=s,s.prev=d,v.next=d,d.prev=v,d}function wb(o,n,s,d){var m=new Yy(o,n,s);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function qd(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Yy(o,n,s){this.i=o,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jy(o,n,s,d){for(var m=0,v=n,_=s-d;v<s;v+=d)m+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return m}Ky.exports=xp,Ky.exports.default=xp,xp.deviation=function(o,n,s,d){var m=n&&n.length,v=Math.abs(Jy(o,0,m?n[0]*s:o.length,s));if(m)for(var _=0,b=n.length;_<b;_++)v-=Math.abs(Jy(o,n[_]*s,_<b-1?n[_+1]*s:o.length,s));var E=0;for(_=0;_<d.length;_+=3){var P=d[_]*s,z=d[_+1]*s,D=d[_+2]*s;E+=Math.abs((o[P]-o[D])*(o[z+1]-o[P+1])-(o[P]-o[z])*(o[D+1]-o[P+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},xp.flatten=function(o){for(var n=o[0][0].length,s={vertices:[],holes:[],dimensions:n},d=0,m=0;m<o.length;m++){for(var v=0;v<o[m].length;v++)for(var _=0;_<n;_++)s.vertices.push(o[m][v][_]);m>0&&s.holes.push(d+=o[m-1].length)}return s};var Sb=w(Ky.exports);function Qy(o,n,s){const d=s.patternDependencies;let m=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(m=!0);const b=_.constantOr(null);b&&(m=!0,d[b.to]=!0,d[b.from]=!0)}return m}function ev(o,n,s,d,m){const v=m.patternDependencies;for(const _ of n){const b=_.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:d-1},s,{},m.availableImages),P=b.evaluate({zoom:d},s,{},m.availableImages),z=b.evaluate({zoom:d+1},s,{},m.availableImages);E=E&&E.name?E.name:E,P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,v[E]=!0,v[P]=!0,v[z]=!0,s.patterns[_.id]={min:E,mid:P,max:z}}}return s}class tv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rn,this.indexArray=new ps,this.indexArray2=new Fd,this.programConfigurations=new Sl(n.layers,n.zoom),this.segments=new _n,this.segments2=new _n,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=Qy("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of n){const D=this.layers[0]._featureFilter.needGeometry,N=El(b,D);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),N,d))continue;const W=v?m.evaluate(N,{},d,s.availableImages):void 0,Y={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:D?N.geometry:Cl(b),patterns:{},sortKey:W};_.push(Y)}v&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const D=ev("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,E,P,d,{});s.featureIndex.insert(n[P].feature,E,P,z,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Zk),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,d,m,v){for(const _ of bc(s,500)){let b=0;for(const W of _)b+=W.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=E.vertexLength,z=[],D=[];for(const W of _){if(W.length===0)continue;W!==_[0]&&D.push(z.length/2);const Y=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),ee=Y.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(ee+W.length-1,ee),z.push(W[0].x),z.push(W[0].y);for(let se=1;se<W.length;se++)this.layoutVertexArray.emplaceBack(W[se].x,W[se].y),this.indexArray2.emplaceBack(ee+se-1,ee+se),z.push(W[se].x),z.push(W[se].y);Y.vertexLength+=W.length,Y.primitiveLength+=W.length}const N=Sb(z,D);for(let W=0;W<N.length;W+=3)this.indexArray.emplaceBack(P+N[W],P+N[W+1],P+N[W+2]);E.vertexLength+=b,E.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}}let Cb,Eb;dt("FillBucket",tv,{omit:["layers","patternFeatures"]});var i3={get paint(){return Eb=Eb||new g({"fill-antialias":new yt(ze.paint_fill["fill-antialias"]),"fill-opacity":new y(ze.paint_fill["fill-opacity"]),"fill-color":new y(ze.paint_fill["fill-color"]),"fill-outline-color":new y(ze.paint_fill["fill-outline-color"]),"fill-translate":new yt(ze.paint_fill["fill-translate"]),"fill-translate-anchor":new yt(ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new i(ze.paint_fill["fill-pattern"])})},get layout(){return Cb=Cb||new g({"fill-sort-key":new y(ze.layout_fill["fill-sort-key"])})}};class o3 extends S{constructor(n){super(n,i3)}recalculate(n,s){super.recalculate(n,s);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new tv(n)}queryRadius(){return yp(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,d,m,v,_,b){return sb(vp(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,b),m)}isTileClipped(){return!0}}const a3=F([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),s3=F([{name:"a_centroid",components:2,type:"Int16"}],4),{members:l3}=a3;var vs={},c3=C,Tb=$c;function $c(o,n,s,d,m){this.properties={},this.extent=s,this.type=0,this._pbf=o,this._geometry=-1,this._keys=d,this._values=m,o.readFields(u3,this,n)}function u3(o,n,s){o==1?n.id=s.readVarint():o==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var _=m._keys[d.readVarint()],b=m._values[d.readVarint()];m.properties[_]=b}}(s,n):o==3?n.type=s.readVarint():o==4&&(n._geometry=s.pos)}function d3(o){for(var n,s,d=0,m=0,v=o.length,_=v-1;m<v;_=m++)d+=((s=o[_]).x-(n=o[m]).x)*(n.y+s.y);return d}$c.types=["Unknown","Point","LineString","Polygon"],$c.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,s=o.readVarint()+o.pos,d=1,m=0,v=0,_=0,b=[];o.pos<s;){if(m<=0){var E=o.readVarint();d=7&E,m=E>>3}if(m--,d===1||d===2)v+=o.readSVarint(),_+=o.readSVarint(),d===1&&(n&&b.push(n),n=[]),n.push(new c3(v,_));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&b.push(n),b},$c.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,s=1,d=0,m=0,v=0,_=1/0,b=-1/0,E=1/0,P=-1/0;o.pos<n;){if(d<=0){var z=o.readVarint();s=7&z,d=z>>3}if(d--,s===1||s===2)(m+=o.readSVarint())<_&&(_=m),m>b&&(b=m),(v+=o.readSVarint())<E&&(E=v),v>P&&(P=v);else if(s!==7)throw new Error("unknown command "+s)}return[_,E,b,P]},$c.prototype.toGeoJSON=function(o,n,s){var d,m,v=this.extent*Math.pow(2,s),_=this.extent*o,b=this.extent*n,E=this.loadGeometry(),P=$c.types[this.type];function z(W){for(var Y=0;Y<W.length;Y++){var ee=W[Y];W[Y]=[360*(ee.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ee.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(d=0;d<E.length;d++)D[d]=E[d][0];z(E=D);break;case 2:for(d=0;d<E.length;d++)z(E[d]);break;case 3:for(E=function(W){var Y=W.length;if(Y<=1)return[W];for(var ee,se,de=[],Se=0;Se<Y;Se++){var pe=d3(W[Se]);pe!==0&&(se===void 0&&(se=pe<0),se===pe<0?(ee&&de.push(ee),ee=[W[Se]]):ee.push(W[Se]))}return ee&&de.push(ee),de}(E),d=0;d<E.length;d++)for(m=0;m<E[d].length;m++)z(E[d][m])}E.length===1?E=E[0]:P="Multi"+P;var N={type:"Feature",geometry:{type:P,coordinates:E},properties:this.properties};return"id"in this&&(N.id=this.id),N};var h3=Tb,Ib=Pb;function Pb(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(f3,this,n),this.length=this._features.length}function f3(o,n,s){o===15?n.version=s.readVarint():o===1?n.name=s.readString():o===5?n.extent=s.readVarint():o===2?n._features.push(s.pos):o===3?n._keys.push(s.readString()):o===4&&n._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var _=d.readVarint()>>3;m=_===1?d.readString():_===2?d.readFloat():_===3?d.readDouble():_===4?d.readVarint64():_===5?d.readVarint():_===6?d.readSVarint():_===7?d.readBoolean():null}return m}(s))}Pb.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new h3(this._pbf,n,this.extent,this._keys,this._values)};var p3=Ib;function m3(o,n,s){if(o===3){var d=new p3(s,s.readVarint()+s.pos);d.length&&(n[d.name]=d)}}vs.VectorTile=function(o,n){this.layers=o.readFields(m3,{},n)},vs.VectorTileFeature=Tb,vs.VectorTileLayer=Ib;const g3=vs.VectorTileFeature.types,rv=Math.pow(2,13);function Zd(o,n,s,d,m,v,_,b){o.emplaceBack(n,s,2*Math.floor(d*rv)+_,m*rv*2,v*rv*2,Math.round(b))}class nv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Nn,this.centroidVertexArray=new Ra,this.indexArray=new ps,this.programConfigurations=new Sl(n.layers,n.zoom),this.segments=new _n,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.features=[],this.hasPattern=Qy("fill-extrusion",this.layers,s);for(const{feature:m,id:v,index:_,sourceLayerIndex:b}of n){const E=this.layers[0]._featureFilter.needGeometry,P=El(m,E);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),P,d))continue;const z={id:v,sourceLayerIndex:b,index:_,geometry:E?P.geometry:Cl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(ev("fill-extrusion",this.layers,z,this.zoom,s)):this.addFeature(z,z.geometry,_,d,{}),s.featureIndex.insert(m,z.geometry,_,b,this.index,!0)}}addFeatures(n,s,d){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,s,d)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,l3),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,s3.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,d,m,v){const _={x:0,y:0,vertexCount:0};for(const b of bc(s,500)){let E=0;for(const Y of b)E+=Y.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of b){if(Y.length===0||v3(Y))continue;let ee=0;for(let se=0;se<Y.length;se++){const de=Y[se];if(se>=1){const Se=Y[se-1];if(!y3(de,Se)){P.vertexLength+4>_n.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=de.sub(Se)._perp()._unit(),we=Se.dist(de);ee+we>32768&&(ee=0),Zd(this.layoutVertexArray,de.x,de.y,pe.x,pe.y,0,0,ee),Zd(this.layoutVertexArray,de.x,de.y,pe.x,pe.y,0,1,ee),_.x+=2*de.x,_.y+=2*de.y,_.vertexCount+=2,ee+=we,Zd(this.layoutVertexArray,Se.x,Se.y,pe.x,pe.y,0,0,ee),Zd(this.layoutVertexArray,Se.x,Se.y,pe.x,pe.y,0,1,ee),_.x+=2*Se.x,_.y+=2*Se.y,_.vertexCount+=2;const je=P.vertexLength;this.indexArray.emplaceBack(je,je+2,je+1),this.indexArray.emplaceBack(je+1,je+2,je+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+E>_n.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),g3[n.type]!=="Polygon")continue;const z=[],D=[],N=P.vertexLength;for(const Y of b)if(Y.length!==0){Y!==b[0]&&D.push(z.length/2);for(let ee=0;ee<Y.length;ee++){const se=Y[ee];Zd(this.layoutVertexArray,se.x,se.y,0,0,1,1,0),_.x+=se.x,_.y+=se.y,_.vertexCount+=1,z.push(se.x),z.push(se.y)}}const W=Sb(z,D);for(let Y=0;Y<W.length;Y+=3)this.indexArray.emplaceBack(N+W[Y],N+W[Y+2],N+W[Y+1]);P.primitiveLength+=W.length/3,P.vertexLength+=E}for(let b=0;b<_.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}}function y3(o,n){return o.x===n.x&&(o.x<0||o.x>tn)||o.y===n.y&&(o.y<0||o.y>tn)}function v3(o){return o.every(n=>n.x<0)||o.every(n=>n.x>tn)||o.every(n=>n.y<0)||o.every(n=>n.y>tn)}let Mb;dt("FillExtrusionBucket",nv,{omit:["layers","features"]});var _3={get paint(){return Mb=Mb||new g({"fill-extrusion-opacity":new yt(ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new y(ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yt(ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yt(ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new i(ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new y(ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new y(ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yt(ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class x3 extends S{constructor(n){super(n,_3)}createBucket(n){return new nv(n)}queryRadius(){return yp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,d,m,v,_,b,E){const P=vp(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,b),z=this.paint.get("fill-extrusion-height").evaluate(s,d),D=this.paint.get("fill-extrusion-base").evaluate(s,d),N=function(Y,ee,se,de){const Se=[];for(const pe of Y){const we=[pe.x,pe.y,0,1];_p(we,we,ee),Se.push(new k(we[0]/we[3],we[1]/we[3]))}return Se}(P,E),W=function(Y,ee,se,de){const Se=[],pe=[],we=de[8]*ee,je=de[9]*ee,We=de[10]*ee,ct=de[11]*ee,mt=de[8]*se,at=de[9]*se,ot=de[10]*se,ht=de[11]*se;for(const vt of Y){const st=[],Ge=[];for(const pt of vt){const ft=pt.x,Vt=pt.y,dr=de[0]*ft+de[4]*Vt+de[12],hr=de[1]*ft+de[5]*Vt+de[13],rn=de[2]*ft+de[6]*Vt+de[14],Wi=de[3]*ft+de[7]*Vt+de[15],jn=rn+We,fn=Wi+ct,En=dr+mt,Vn=hr+at,ei=rn+ot,Un=Wi+ht,nn=new k((dr+we)/fn,(hr+je)/fn);nn.z=jn/fn,st.push(nn);const xn=new k(En/Un,Vn/Un);xn.z=ei/Un,Ge.push(xn)}Se.push(st),pe.push(Ge)}return[Se,pe]}(m,D,z,E);return function(Y,ee,se){let de=1/0;sb(se,ee)&&(de=kb(se,ee[0]));for(let Se=0;Se<ee.length;Se++){const pe=ee[Se],we=Y[Se];for(let je=0;je<pe.length-1;je++){const We=pe[je],ct=[We,pe[je+1],we[je+1],we[je],We];ab(se,ct)&&(de=Math.min(de,kb(se,ct)))}}return de!==1/0&&de}(W[0],W[1],N)}}function Kd(o,n){return o.x*n.x+o.y*n.y}function kb(o,n){if(o.length===1){let s=0;const d=n[s++];let m;for(;!m||d.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const v=n[s],_=o[0],b=m.sub(d),E=v.sub(d),P=_.sub(d),z=Kd(b,b),D=Kd(b,E),N=Kd(E,E),W=Kd(P,b),Y=Kd(P,E),ee=z*N-D*D,se=(N*W-D*Y)/ee,de=(z*Y-D*W)/ee,Se=d.z*(1-se-de)+m.z*se+v.z*de;if(isFinite(Se))return Se}return 1/0}{let s=1/0;for(const d of n)s=Math.min(s,d.z);return s}}const b3=F([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:w3}=b3,S3=F([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:C3}=S3,E3=vs.VectorTileFeature.types,T3=Math.cos(Math.PI/180*37.5),Ab=Math.pow(2,14)/.5;class iv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new xl,this.layoutVertexArray2=new un,this.indexArray=new ps,this.programConfigurations=new Sl(n.layers,n.zoom),this.segments=new _n,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=Qy("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),_=[];for(const{feature:b,id:E,index:P,sourceLayerIndex:z}of n){const D=this.layers[0]._featureFilter.needGeometry,N=El(b,D);if(!this.layers[0]._featureFilter.filter(new Sr(this.zoom),N,d))continue;const W=v?m.evaluate(N,{},d):void 0,Y={id:E,properties:b.properties,type:b.type,sourceLayerIndex:z,index:P,geometry:D?N.geometry:Cl(b),patterns:{},sortKey:W};_.push(Y)}v&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:P,sourceLayerIndex:z}=b;if(this.hasPattern){const D=ev("line",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,E,P,d,{});s.featureIndex.insert(n[P].feature,E,P,z,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,C3)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,w3),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,d,m,v){const _=this.layers[0].layout,b=_.get("line-join").evaluate(n,{}),E=_.get("line-cap"),P=_.get("line-miter-limit"),z=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const D of s)this.addLine(D,n,b,E,P,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,m)}addLine(n,s,d,m,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let de=0;de<n.length-1;de++)this.totalDistance+=n[de].dist(n[de+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=E3[s.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let P=0;for(;P<E-1&&n[P].equals(n[P+1]);)P++;if(E<(b?3:2))return;d==="bevel"&&(v=1.05);const z=this.overscaling<=16?15*tn/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let N,W,Y,ee,se;this.e1=this.e2=-1,b&&(N=n[E-2],se=n[P].sub(N)._unit()._perp());for(let de=P;de<E;de++){if(Y=de===E-1?b?n[P+1]:void 0:n[de+1],Y&&n[de].equals(Y))continue;se&&(ee=se),N&&(W=N),N=n[de],se=Y?Y.sub(N)._unit()._perp():ee,ee=ee||se;let Se=ee.add(se);Se.x===0&&Se.y===0||Se._unit();const pe=ee.x*se.x+ee.y*se.y,we=Se.x*se.x+Se.y*se.y,je=we!==0?1/we:1/0,We=2*Math.sqrt(2-2*we),ct=we<T3&&W&&Y,mt=ee.x*se.y-ee.y*se.x>0;if(ct&&de>P){const ht=N.dist(W);if(ht>2*z){const vt=N.sub(N.sub(W)._mult(z/ht)._round());this.updateDistance(W,vt),this.addCurrentVertex(vt,ee,0,0,D),W=vt}}const at=W&&Y;let ot=at?d:b?"butt":m;if(at&&ot==="round"&&(je<_?ot="miter":je<=2&&(ot="fakeround")),ot==="miter"&&je>v&&(ot="bevel"),ot==="bevel"&&(je>2&&(ot="flipbevel"),je<v&&(ot="miter")),W&&this.updateDistance(W,N),ot==="miter")Se._mult(je),this.addCurrentVertex(N,Se,0,0,D);else if(ot==="flipbevel"){if(je>100)Se=se.mult(-1);else{const ht=je*ee.add(se).mag()/ee.sub(se).mag();Se._perp()._mult(ht*(mt?-1:1))}this.addCurrentVertex(N,Se,0,0,D),this.addCurrentVertex(N,Se.mult(-1),0,0,D)}else if(ot==="bevel"||ot==="fakeround"){const ht=-Math.sqrt(je*je-1),vt=mt?ht:0,st=mt?0:ht;if(W&&this.addCurrentVertex(N,ee,vt,st,D),ot==="fakeround"){const Ge=Math.round(180*We/Math.PI/20);for(let pt=1;pt<Ge;pt++){let ft=pt/Ge;if(ft!==.5){const dr=ft-.5;ft+=ft*dr*(ft-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*dr*dr+(.848013+pe*(.215638*pe-1.06021)))}const Vt=se.sub(ee)._mult(ft)._add(ee)._unit()._mult(mt?-1:1);this.addHalfVertex(N,Vt.x,Vt.y,!1,mt,0,D)}}Y&&this.addCurrentVertex(N,se,-vt,-st,D)}else if(ot==="butt")this.addCurrentVertex(N,Se,0,0,D);else if(ot==="square"){const ht=W?1:-1;this.addCurrentVertex(N,Se,ht,ht,D)}else ot==="round"&&(W&&(this.addCurrentVertex(N,ee,0,0,D),this.addCurrentVertex(N,ee,1,1,D,!0)),Y&&(this.addCurrentVertex(N,se,-1,-1,D,!0),this.addCurrentVertex(N,se,0,0,D)));if(ct&&de<E-1){const ht=N.dist(Y);if(ht>2*z){const vt=N.add(Y.sub(N)._mult(z/ht)._round());this.updateDistance(N,vt),this.addCurrentVertex(vt,se,0,0,D),N=vt}}}}addCurrentVertex(n,s,d,m,v,_=!1){const b=s.y*m-s.x,E=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*d,s.y-s.x*d,_,!1,d,v),this.addHalfVertex(n,b,E,_,!0,-m,v),this.distance>Ab/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,d,m,v,_))}addHalfVertex({x:n,y:s},d,m,v,_,b,E){const P=.5*(this.lineClips?this.scaledDistance*(Ab-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),E.primitiveLength++),_?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let Rb,zb;dt("LineBucket",iv,{omit:["layers","patternFeatures"]});var Lb={get paint(){return zb=zb||new g({"line-opacity":new y(ze.paint_line["line-opacity"]),"line-color":new y(ze.paint_line["line-color"]),"line-translate":new yt(ze.paint_line["line-translate"]),"line-translate-anchor":new yt(ze.paint_line["line-translate-anchor"]),"line-width":new y(ze.paint_line["line-width"]),"line-gap-width":new y(ze.paint_line["line-gap-width"]),"line-offset":new y(ze.paint_line["line-offset"]),"line-blur":new y(ze.paint_line["line-blur"]),"line-dasharray":new c(ze.paint_line["line-dasharray"]),"line-pattern":new i(ze.paint_line["line-pattern"]),"line-gradient":new p(ze.paint_line["line-gradient"])})},get layout(){return Rb=Rb||new g({"line-cap":new yt(ze.layout_line["line-cap"]),"line-join":new y(ze.layout_line["line-join"]),"line-miter-limit":new yt(ze.layout_line["line-miter-limit"]),"line-round-limit":new yt(ze.layout_line["line-round-limit"]),"line-sort-key":new y(ze.layout_line["line-sort-key"])})}};class I3 extends y{possiblyEvaluate(n,s){return s=new Sr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,d,m){return s=le({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,d,m)}}let Cp;class P3 extends S{constructor(n){super(n,Lb),this.gradientVersion=0,Cp||(Cp=new I3(Lb.paint.properties["line-width"].specification),Cp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof tl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=Cp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new iv(n)}queryRadius(n){const s=n,d=Ob(Vd("line-width",this,s),Vd("line-gap-width",this,s)),m=Vd("line-offset",this,s);return d/2+Math.abs(m)+yp(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,d,m,v,_,b){const E=vp(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,b),P=b/2*Ob(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),z=this.paint.get("line-offset").evaluate(s,d);return z&&(m=function(D,N){const W=[];for(let Y=0;Y<D.length;Y++){const ee=D[Y],se=[];for(let de=0;de<ee.length;de++){const Se=ee[de-1],pe=ee[de],we=ee[de+1],je=de===0?new k(0,0):pe.sub(Se)._unit()._perp(),We=de===ee.length-1?new k(0,0):we.sub(pe)._unit()._perp(),ct=je._add(We)._unit(),mt=ct.x*We.x+ct.y*We.y;mt!==0&&ct._mult(1/mt),se.push(ct._mult(N)._add(pe))}W.push(se)}return W}(m,z*b)),function(D,N,W){for(let Y=0;Y<N.length;Y++){const ee=N[Y];if(D.length>=3){for(let se=0;se<ee.length;se++)if(Dc(D,ee[se]))return!0}if(Fk(D,ee,W))return!0}return!1}(E,m,P)}isTileClipped(){return!0}}function Ob(o,n){return n>0?n+2*o:o}const M3=F([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),k3=F([{name:"a_projected_pos",components:3,type:"Float32"}],4);F([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const A3=F([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);F([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Db=F([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),R3=F([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function z3(o,n,s){return o.sections.forEach(d=>{d.text=function(m,v,_){const b=v.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),zo.applyArabicShaping&&(m=zo.applyArabicShaping(m)),m}(d.text,n,s)}),o}F([{name:"triangle",components:3,type:"Uint16"}]),F([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),F([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),F([{type:"Float32",name:"offsetX"}]),F([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),F([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Xd={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var hn=24,Fb=ur,Bb=function(o,n,s,d,m){var v,_,b=8*m-d-1,E=(1<<b)-1,P=E>>1,z=-7,D=m-1,N=-1,W=o[n+D];for(D+=N,v=W&(1<<-z)-1,W>>=-z,z+=b;z>0;v=256*v+o[n+D],D+=N,z-=8);for(_=v&(1<<-z)-1,v>>=-z,z+=d;z>0;_=256*_+o[n+D],D+=N,z-=8);if(v===0)v=1-P;else{if(v===E)return _?NaN:1/0*(W?-1:1);_+=Math.pow(2,d),v-=P}return(W?-1:1)*_*Math.pow(2,v-d)},$b=function(o,n,s,d,m,v){var _,b,E,P=8*v-m-1,z=(1<<P)-1,D=z>>1,N=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=0,Y=1,ee=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,_=z):(_=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-_))<1&&(_--,E*=2),(n+=_+D>=1?N/E:N*Math.pow(2,1-D))*E>=2&&(_++,E/=2),_+D>=z?(b=0,_=z):_+D>=1?(b=(n*E-1)*Math.pow(2,m),_+=D):(b=n*Math.pow(2,D-1)*Math.pow(2,m),_=0));m>=8;o[s+W]=255&b,W+=Y,b/=256,m-=8);for(_=_<<m|b,P+=m;P>0;o[s+W]=255&_,W+=Y,_/=256,P-=8);o[s+W-Y]|=128*ee};function ur(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}ur.Varint=0,ur.Fixed64=1,ur.Bytes=2,ur.Fixed32=5;var ov=4294967296,Nb=1/ov,jb=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function La(o){return o.type===ur.Bytes?o.readVarint()+o.pos:o.pos+1}function Nc(o,n,s){return s?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Vb(o,n,s){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(d);for(var m=s.pos-1;m>=o;m--)s.buf[m+d]=s.buf[m]}function L3(o,n){for(var s=0;s<o.length;s++)n.writeVarint(o[s])}function O3(o,n){for(var s=0;s<o.length;s++)n.writeSVarint(o[s])}function D3(o,n){for(var s=0;s<o.length;s++)n.writeFloat(o[s])}function F3(o,n){for(var s=0;s<o.length;s++)n.writeDouble(o[s])}function B3(o,n){for(var s=0;s<o.length;s++)n.writeBoolean(o[s])}function $3(o,n){for(var s=0;s<o.length;s++)n.writeFixed32(o[s])}function N3(o,n){for(var s=0;s<o.length;s++)n.writeSFixed32(o[s])}function j3(o,n){for(var s=0;s<o.length;s++)n.writeFixed64(o[s])}function V3(o,n){for(var s=0;s<o.length;s++)n.writeSFixed64(o[s])}function Ep(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function jc(o,n,s){o[s]=n,o[s+1]=n>>>8,o[s+2]=n>>>16,o[s+3]=n>>>24}function Ub(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}ur.prototype={destroy:function(){this.buf=null},readFields:function(o,n,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,o(m,n,this),this.pos===v&&this.skip(d)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Ep(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Ub(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Ep(this.buf,this.pos)+Ep(this.buf,this.pos+4)*ov;return this.pos+=8,o},readSFixed64:function(){var o=Ep(this.buf,this.pos)+Ub(this.buf,this.pos+4)*ov;return this.pos+=8,o},readFloat:function(){var o=Bb(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Bb(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,s,d=this.buf;return n=127&(s=d[this.pos++]),s<128?n:(n|=(127&(s=d[this.pos++]))<<7,s<128?n:(n|=(127&(s=d[this.pos++]))<<14,s<128?n:(n|=(127&(s=d[this.pos++]))<<21,s<128?n:function(m,v,_){var b,E,P=_.buf;if(b=(112&(E=P[_.pos++]))>>4,E<128||(b|=(127&(E=P[_.pos++]))<<3,E<128)||(b|=(127&(E=P[_.pos++]))<<10,E<128)||(b|=(127&(E=P[_.pos++]))<<17,E<128)||(b|=(127&(E=P[_.pos++]))<<24,E<128)||(b|=(1&(E=P[_.pos++]))<<31,E<128))return Nc(m,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=d[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&jb?function(s,d,m){return jb.decode(s.subarray(d,m))}(this.buf,n,o):function(s,d,m){for(var v="",_=d;_<m;){var b,E,P,z=s[_],D=null,N=z>239?4:z>223?3:z>191?2:1;if(_+N>m)break;N===1?z<128&&(D=z):N===2?(192&(b=s[_+1]))==128&&(D=(31&z)<<6|63&b)<=127&&(D=null):N===3?(E=s[_+2],(192&(b=s[_+1]))==128&&(192&E)==128&&((D=(15&z)<<12|(63&b)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):N===4&&(E=s[_+2],P=s[_+3],(192&(b=s[_+1]))==128&&(192&E)==128&&(192&P)==128&&((D=(15&z)<<18|(63&b)<<12|(63&E)<<6|63&P)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,N=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),_+=N}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==ur.Bytes)return o.push(this.readVarint(n));var s=La(this);for(o=o||[];this.pos<s;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==ur.Bytes)return o.push(this.readSVarint());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==ur.Bytes)return o.push(this.readBoolean());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==ur.Bytes)return o.push(this.readFloat());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==ur.Bytes)return o.push(this.readDouble());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==ur.Bytes)return o.push(this.readFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==ur.Bytes)return o.push(this.readSFixed32());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==ur.Bytes)return o.push(this.readFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==ur.Bytes)return o.push(this.readSFixed64());var n=La(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===ur.Varint)for(;this.buf[this.pos++]>127;);else if(n===ur.Bytes)this.pos=this.readVarint()+this.pos;else if(n===ur.Fixed32)this.pos+=4;else{if(n!==ur.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),jc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),jc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),jc(this.buf,-1&o,this.pos),jc(this.buf,Math.floor(o*Nb),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),jc(this.buf,-1&o,this.pos),jc(this.buf,Math.floor(o*Nb),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,s){var d,m;if(n>=0?(d=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,_,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(d,0,s),function(v,_){var b=(7&v)<<4;_.buf[_.pos++]|=b|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(m,s)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(d,m,v){for(var _,b,E=0;E<m.length;E++){if((_=m.charCodeAt(E))>55295&&_<57344){if(!b){_>56319||E+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):b=_;continue}if(_<56320){d[v++]=239,d[v++]=191,d[v++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(d[v++]=239,d[v++]=191,d[v++]=189,b=null);_<128?d[v++]=_:(_<2048?d[v++]=_>>6|192:(_<65536?d[v++]=_>>12|224:(d[v++]=_>>18|240,d[v++]=_>>12&63|128),d[v++]=_>>6&63|128),d[v++]=63&_|128)}return v}(this.buf,o,this.pos);var s=this.pos-n;s>=128&&Vb(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(o){this.realloc(4),$b(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),$b(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=o[s]},writeRawMessage:function(o,n){this.pos++;var s=this.pos;o(n,this);var d=this.pos-s;d>=128&&Vb(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(o,n,s){this.writeTag(o,ur.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,L3,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,O3,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,B3,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,D3,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,F3,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,$3,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,N3,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,j3,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,V3,n)},writeBytesField:function(o,n){this.writeTag(o,ur.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,ur.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,ur.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,ur.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,ur.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,ur.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,ur.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,ur.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,ur.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,ur.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var av=w(Fb);const sv=3;function U3(o,n,s){o===1&&s.readMessage(H3,n)}function H3(o,n,s){if(o===3){const{id:d,bitmap:m,width:v,height:_,left:b,top:E,advance:P}=s.readMessage(W3,{});n.push({id:d,bitmap:new Hd({width:v+2*sv,height:_+2*sv},m),metrics:{width:v,height:_,left:b,top:E,advance:P}})}}function W3(o,n,s){o===1?n.id=s.readVarint():o===2?n.bitmap=s.readBytes():o===3?n.width=s.readVarint():o===4?n.height=s.readVarint():o===5?n.left=s.readSVarint():o===6?n.top=s.readSVarint():o===7&&(n.advance=s.readVarint())}const Hb=sv;function Wb(o){let n=0,s=0;for(const _ of o)n+=_.w*_.h,s=Math.max(s,_.w);o.sort((_,b)=>b.h-_.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,v=0;for(const _ of o)for(let b=d.length-1;b>=0;b--){const E=d[b];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,v=Math.max(v,_.y+_.h),m=Math.max(m,_.x+_.w),_.w===E.w&&_.h===E.h){const P=d.pop();b<d.length&&(d[b]=P)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(d.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const yi=1;class lv{constructor(n,{pixelRatio:s,version:d,stretchX:m,stretchY:v,content:_,textFitWidth:b,textFitHeight:E}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=_,this.version=d,this.textFitWidth=b,this.textFitHeight=E}get tl(){return[this.paddedRect.x+yi,this.paddedRect.y+yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-yi,this.paddedRect.y+this.paddedRect.h-yi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*yi)/this.pixelRatio,(this.paddedRect.h-2*yi)/this.pixelRatio]}}class Gb{constructor(n,s){const d={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,d,v),this.addImages(s,m,v);const{w:_,h:b}=Wb(v),E=new Ui({width:_||1,height:b||1});for(const P in n){const z=n[P],D=d[P].paddedRect;Ui.copy(z.data,E,{x:0,y:0},{x:D.x+yi,y:D.y+yi},z.data)}for(const P in s){const z=s[P],D=m[P].paddedRect,N=D.x+yi,W=D.y+yi,Y=z.data.width,ee=z.data.height;Ui.copy(z.data,E,{x:0,y:0},{x:N,y:W},z.data),Ui.copy(z.data,E,{x:0,y:ee-1},{x:N,y:W-1},{width:Y,height:1}),Ui.copy(z.data,E,{x:0,y:0},{x:N,y:W+ee},{width:Y,height:1}),Ui.copy(z.data,E,{x:Y-1,y:0},{x:N-1,y:W},{width:1,height:ee}),Ui.copy(z.data,E,{x:0,y:0},{x:N+Y,y:W},{width:1,height:ee})}this.image=E,this.iconPositions=d,this.patternPositions=m}addImages(n,s,d){for(const m in n){const v=n[m],_={x:0,y:0,w:v.data.width+2*yi,h:v.data.height+2*yi};d.push(_),s[m]=new lv(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),s)}patchUpdatedImage(n,s,d){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,v]=n.tl;d.update(s.data,void 0,{x:m,y:v})}}var _s;dt("ImagePosition",lv),dt("ImageAtlas",Gb),f.ah=void 0,(_s=f.ah||(f.ah={}))[_s.none=0]="none",_s[_s.horizontal=1]="horizontal",_s[_s.vertical=2]="vertical",_s[_s.horizontalOnly=3]="horizontalOnly";const Yd=-17;class Jd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const d=new Jd;return d.scale=n||1,d.fontStack=s,d}static forImage(n){const s=new Jd;return s.imageName=n,s}}class Vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const d=new Vc;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,s)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let d=0;d<n.length;d++){const m=n.charCodeAt(d+1)||null,v=n.charCodeAt(d-1)||null;s+=m&&la(m)&&!Xd[n[d+1]]||v&&la(v)&&!Xd[n[d-1]]||!Xd[n[d]]?n[d]:Xd[n[d]]}return s}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&Ip[this.text.charCodeAt(d)];d++)n++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&Ip[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const d=new Vc;return d.text=this.text.substring(n,s),d.sectionIndex=this.sectionIndex.slice(n,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Jd.forText(n.scale,n.fontStack||s));const d=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(d)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void He("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Jd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Tp(o,n,s,d,m,v,_,b,E,P,z,D,N,W,Y,ee){const se=Vc.fromFeature(o,m);let de;D===f.ah.vertical&&se.verticalizePunctuation();const{processBidirectionalText:Se,processStyledBidirectionalText:pe}=zo;if(Se&&se.sections.length===1){de=[];const We=Se(se.toString(),cv(se,P,v,n,d,W,Y));for(const ct of We){const mt=new Vc;mt.text=ct,mt.sections=se.sections;for(let at=0;at<ct.length;at++)mt.sectionIndex.push(0);de.push(mt)}}else if(pe){de=[];const We=pe(se.text,se.sectionIndex,cv(se,P,v,n,d,W,Y));for(const ct of We){const mt=new Vc;mt.text=ct[0],mt.sectionIndex=ct[1],mt.sections=se.sections,de.push(mt)}}else de=function(We,ct){const mt=[],at=We.text;let ot=0;for(const ht of ct)mt.push(We.substring(ot,ht)),ot=ht;return ot<at.length&&mt.push(We.substring(ot,at.length)),mt}(se,cv(se,P,v,n,d,W,Y));const we=[],je={positionedLines:we,text:se.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(We,ct,mt,at,ot,ht,vt,st,Ge,pt,ft,Vt){let dr=0,hr=Yd,rn=0,Wi=0;const jn=st==="right"?1:st==="left"?0:.5;let fn=0;for(const nn of ot){nn.trim();const xn=nn.getMaxScale(),ti=(xn-1)*hn,vi={positionedGlyphs:[],lineOffset:0};We.positionedLines[fn]=vi;const Ln=vi.positionedGlyphs;let _i=0;if(!nn.length()){hr+=ht,++fn;continue}for(let Nr=0;Nr<nn.length();Nr++){const Zt=nn.getSection(Nr),on=nn.getSectionIndex(Nr),On=nn.getCharCode(Nr);let pn=0,yo=null,Oo=null,Do=null,Oa=hn;const vo=!(Ge===f.ah.horizontal||!ft&&!zd(On)||ft&&(Ip[On]||(En=On,lt.Arabic(En)||lt["Arabic Supplement"](En)||lt["Arabic Extended-A"](En)||lt["Arabic Presentation Forms-A"](En)||lt["Arabic Presentation Forms-B"](En))));if(Zt.imageName){const qi=at[Zt.imageName];if(!qi)continue;Do=Zt.imageName,We.iconsInText=We.iconsInText||!0,Oo=qi.paddedRect;const xi=qi.displaySize;Zt.scale=Zt.scale*hn/Vt,yo={width:xi[0],height:xi[1],left:yi,top:-Hb,advance:vo?xi[1]:xi[0]},pn=ti+(hn-xi[1]*Zt.scale),Oa=yo.advance;const Da=vo?xi[0]*Zt.scale-hn*xn:xi[1]*Zt.scale-hn*xn;Da>0&&Da>_i&&(_i=Da)}else{const qi=mt[Zt.fontStack],xi=qi&&qi[On];if(xi&&xi.rect)Oo=xi.rect,yo=xi.metrics;else{const Da=ct[Zt.fontStack],nh=Da&&Da[On];if(!nh)continue;yo=nh.metrics}pn=(xn-Zt.scale)*hn}vo?(We.verticalizable=!0,Ln.push({glyph:On,imageName:Do,x:dr,y:hr+pn,vertical:vo,scale:Zt.scale,fontStack:Zt.fontStack,sectionIndex:on,metrics:yo,rect:Oo}),dr+=Oa*Zt.scale+pt):(Ln.push({glyph:On,imageName:Do,x:dr,y:hr+pn,vertical:vo,scale:Zt.scale,fontStack:Zt.fontStack,sectionIndex:on,metrics:yo,rect:Oo}),dr+=yo.advance*Zt.scale+pt)}Ln.length!==0&&(rn=Math.max(dr-pt,rn),Z3(Ln,0,Ln.length-1,jn,_i)),dr=0;const Gi=ht*xn+_i;vi.lineOffset=Math.max(_i,ti),hr+=Gi,Wi=Math.max(Gi,Wi),++fn}var En;const Vn=hr-Yd,{horizontalAlign:ei,verticalAlign:Un}=uv(vt);(function(nn,xn,ti,vi,Ln,_i,Gi,Nr,Zt){const on=(xn-ti)*Ln;let On=0;On=_i!==Gi?-Nr*vi-Yd:(-vi*Zt+.5)*Gi;for(const pn of nn)for(const yo of pn.positionedGlyphs)yo.x+=on,yo.y+=On})(We.positionedLines,jn,ei,Un,rn,Wi,ht,Vn,ot.length),We.top+=-Un*Vn,We.bottom=We.top+Vn,We.left+=-ei*rn,We.right=We.left+rn}(je,n,s,d,de,_,b,E,D,P,N,ee),!function(We){for(const ct of We)if(ct.positionedGlyphs.length!==0)return!1;return!0}(we)&&je}const Ip={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},G3={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qb(o,n,s,d,m,v){if(n.imageName){const _=d[n.imageName];return _?_.displaySize[0]*n.scale*hn/v+m:0}{const _=s[n.fontStack],b=_&&_[o];return b?b.metrics.advance*n.scale+m:0}}function Zb(o,n,s,d){const m=Math.pow(o-n,2);return d?o<n?m/2:2*m:m+Math.abs(s)*s}function q3(o,n,s){let d=0;return o===10&&(d-=1e4),s&&(d+=150),o!==40&&o!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function Kb(o,n,s,d,m,v){let _=null,b=Zb(n,s,m,v);for(const E of d){const P=Zb(n-E.x,s,m,v)+E.badness;P<=b&&(_=E,b=P)}return{index:o,x:n,priorBreak:_,badness:b}}function Xb(o){return o?Xb(o.priorBreak).concat(o.index):[]}function cv(o,n,s,d,m,v,_){if(v!=="point")return[];if(!o)return[];const b=[],E=function(N,W,Y,ee,se,de){let Se=0;for(let pe=0;pe<N.length();pe++){const we=N.getSection(pe);Se+=qb(N.getCharCode(pe),we,ee,se,W,de)}return Se/Math.max(1,Math.ceil(Se/Y))}(o,n,s,d,m,_),P=o.text.indexOf("​")>=0;let z=0;for(let N=0;N<o.length();N++){const W=o.getSection(N),Y=o.getCharCode(N);if(Ip[Y]||(z+=qb(Y,W,d,m,n,_)),N<o.length()-1){const ee=!((D=Y)<11904||!(lt["Bopomofo Extended"](D)||lt.Bopomofo(D)||lt["CJK Compatibility Forms"](D)||lt["CJK Compatibility Ideographs"](D)||lt["CJK Compatibility"](D)||lt["CJK Radicals Supplement"](D)||lt["CJK Strokes"](D)||lt["CJK Symbols and Punctuation"](D)||lt["CJK Unified Ideographs Extension A"](D)||lt["CJK Unified Ideographs"](D)||lt["Enclosed CJK Letters and Months"](D)||lt["Halfwidth and Fullwidth Forms"](D)||lt.Hiragana(D)||lt["Ideographic Description Characters"](D)||lt["Kangxi Radicals"](D)||lt["Katakana Phonetic Extensions"](D)||lt.Katakana(D)||lt["Vertical Forms"](D)||lt["Yi Radicals"](D)||lt["Yi Syllables"](D)));(G3[Y]||ee||W.imageName)&&b.push(Kb(N+1,z,E,b,q3(Y,o.getCharCode(N+1),ee&&P),!1))}}var D;return Xb(Kb(o.length(),z,E,b,0,!0))}function uv(o){let n=.5,s=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function Z3(o,n,s,d,m){if(!d&&!m)return;const v=o[s],_=(o[s].x+v.metrics.advance*v.scale)*d;for(let b=n;b<=s;b++)o[b].x-=_,o[b].y+=m}function K3(o,n,s){const{horizontalAlign:d,verticalAlign:m}=uv(s),v=n[0]-o.displaySize[0]*d,_=n[1]-o.displaySize[1]*m;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Yb(o){var n,s;let d=o.left,m=o.top,v=o.right-d,_=o.bottom-m;const b=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",E=(s=o.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",P=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(E==="proportional"){if(b==="stretchOnly"&&v/_<P||b==="proportional"){const z=Math.ceil(_*P);d*=z/v,v=z}}else if(b==="proportional"&&E==="stretchOnly"&&P!==0&&v/_>P){const z=Math.ceil(v/P);m*=z/_,_=z}return{x1:d,y1:m,x2:d+v,y2:m+_}}function Jb(o,n,s,d,m,v){const _=o.image;let b;if(_.content){const se=_.content,de=_.pixelRatio||1;b=[se[0]/de,se[1]/de,_.displaySize[0]-se[2]/de,_.displaySize[1]-se[3]/de]}const E=n.left*v,P=n.right*v;let z,D,N,W;s==="width"||s==="both"?(W=m[0]+E-d[3],D=m[0]+P+d[1]):(W=m[0]+(E+P-_.displaySize[0])/2,D=W+_.displaySize[0]);const Y=n.top*v,ee=n.bottom*v;return s==="height"||s==="both"?(z=m[1]+Y-d[0],N=m[1]+ee+d[2]):(z=m[1]+(Y+ee-_.displaySize[1])/2,N=z+_.displaySize[1]),{image:_,top:z,right:D,bottom:N,left:W,collisionPadding:b}}const Qd=255,ua=128,xs=Qd*ua;function Qb(o,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Sr(o+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=s;let v=0;for(;v<d.length&&d[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<d.length&&d[_]<o+1;)_++;_=Math.min(d.length-1,_);const b=d[v],E=d[_];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:E,minSize:s.evaluate(new Sr(b)),maxSize:s.evaluate(new Sr(E)),interpolationType:m}}}function dv(o,n,s){let d="never";const m=o.get(n);return m?d=m:o.get(s)&&(d="always"),d}const X3=vs.VectorTileFeature.types,Y3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pp(o,n,s,d,m,v,_,b,E,P,z,D,N){const W=b?Math.min(xs,Math.round(b[0])):0,Y=b?Math.min(xs,Math.round(b[1])):0;o.emplaceBack(n,s,Math.round(32*d),Math.round(32*m),v,_,(W<<1)+(E?1:0),Y,16*P,16*z,256*D,256*N)}function hv(o,n,s){o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s),o.emplaceBack(n.x,n.y,s)}function J3(o){for(const n of o.sections)if(up(n.text))return!0;return!1}class fv{constructor(n){this.layoutVertexArray=new ki,this.indexArray=new ps,this.programConfigurations=n,this.segments=new _n,this.dynamicLayoutVertexArray=new dn,this.opacityVertexArray=new Dy,this.hasVisibleVertices=!1,this.placedSymbolArray=new gi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,M3.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,k3.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,Y3,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}dt("SymbolBuffers",fv);class pv{constructor(n,s,d){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new d,this.segments=new _n,this.collisionVertexArray=new Fy}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,A3.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}dt("CollisionBuffers",pv);class Uc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gy([]),this.placementViewportMatrix=Gy([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qb(this.zoom,s["text-size"]),this.iconSizeData=Qb(this.zoom,s["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=dv(d,"text-overlap","text-allow-overlap")!=="never"||dv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(_=>f.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new fv(new Sl(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new fv(new Sl(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Jn,this.lineVertexArray=new Vi,this.symbolInstances=new $r,this.textAnchorOffsets=new ca}calculateGlyphDependencies(n,s,d,m,v){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,(d||m)&&v){const b=Xd[n.charAt(_)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,d){const m=this.layers[0],v=m.layout,_=v.get("text-font"),b=v.get("text-field"),E=v.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof di&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),z=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=v.get("symbol-sort-key");if(this.features=[],!P&&!z)return;const N=s.iconDependencies,W=s.glyphDependencies,Y=s.availableImages,ee=new Sr(this.zoom);for(const{feature:se,id:de,index:Se,sourceLayerIndex:pe}of n){const we=m._featureFilter.needGeometry,je=El(se,we);if(!m._featureFilter.filter(ee,je,d))continue;let We,ct;if(we||(je.geometry=Cl(se)),P){const at=m.getValueAndResolveTokens("text-field",je,d,Y),ot=di.factory(at),ht=this.hasRTLText=this.hasRTLText||J3(ot);(!ht||zo.getRTLTextPluginStatus()==="unavailable"||ht&&zo.isParsed())&&(We=z3(ot,m,je))}if(z){const at=m.getValueAndResolveTokens("icon-image",je,d,Y);ct=at instanceof Pi?at:Pi.fromString(at)}if(!We&&!ct)continue;const mt=this.sortFeaturesByKey?D.evaluate(je,{},d):void 0;if(this.features.push({id:de,text:We,icon:ct,index:Se,sourceLayerIndex:pe,geometry:je.geometry,properties:se.properties,type:X3[se.type],sortKey:mt}),ct&&(N[ct.name]=!0),We){const at=_.evaluate(je,{},d).join(","),ot=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.ah.vertical)>=0;for(const ht of We.sections)if(ht.image)N[ht.image.name]=!0;else{const vt=Rd(We.toString()),st=ht.fontStack||at,Ge=W[st]=W[st]||{};this.calculateGlyphDependencies(ht.text,Ge,ot,this.allowVerticalPlacement,vt)}}}v.get("symbol-placement")==="line"&&(this.features=function(se){const de={},Se={},pe=[];let we=0;function je(at){pe.push(se[at]),we++}function We(at,ot,ht){const vt=Se[at];return delete Se[at],Se[ot]=vt,pe[vt].geometry[0].pop(),pe[vt].geometry[0]=pe[vt].geometry[0].concat(ht[0]),vt}function ct(at,ot,ht){const vt=de[ot];return delete de[ot],de[at]=vt,pe[vt].geometry[0].shift(),pe[vt].geometry[0]=ht[0].concat(pe[vt].geometry[0]),vt}function mt(at,ot,ht){const vt=ht?ot[0][ot[0].length-1]:ot[0][0];return`${at}:${vt.x}:${vt.y}`}for(let at=0;at<se.length;at++){const ot=se[at],ht=ot.geometry,vt=ot.text?ot.text.toString():null;if(!vt){je(at);continue}const st=mt(vt,ht),Ge=mt(vt,ht,!0);if(st in Se&&Ge in de&&Se[st]!==de[Ge]){const pt=ct(st,Ge,ht),ft=We(st,Ge,pe[pt].geometry);delete de[st],delete Se[Ge],Se[mt(vt,pe[ft].geometry,!0)]=ft,pe[pt].geometry=null}else st in Se?We(st,Ge,ht):Ge in de?ct(st,Ge,ht):(je(at),de[st]=we-1,Se[Ge]=we-1)}return pe.filter(at=>at.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((se,de)=>se.sortKey-de.sortKey)}update(n,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const d=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const _={};for(let b=n.segment+1;b<s.length;b++)_[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:m},b<s.length-1&&(m+=s[b+1].dist(s[b]));for(let b=n.segment||0;b>=0;b--)_[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){const E=_[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,s,d,m,v,_,b,E,P,z,D,N){const W=n.indexArray,Y=n.layoutVertexArray,ee=n.segments.prepareSegment(4*s.length,Y,W,this.canOverlap?_.sortKey:void 0),se=this.glyphOffsetArray.length,de=ee.vertexLength,Se=this.allowVerticalPlacement&&b===f.ah.vertical?Math.PI/2:0,pe=_.text&&_.text.sections;for(let we=0;we<s.length;we++){const{tl:je,tr:We,bl:ct,br:mt,tex:at,pixelOffsetTL:ot,pixelOffsetBR:ht,minFontScaleX:vt,minFontScaleY:st,glyphOffset:Ge,isSDF:pt,sectionIndex:ft}=s[we],Vt=ee.vertexLength,dr=Ge[1];Pp(Y,E.x,E.y,je.x,dr+je.y,at.x,at.y,d,pt,ot.x,ot.y,vt,st),Pp(Y,E.x,E.y,We.x,dr+We.y,at.x+at.w,at.y,d,pt,ht.x,ot.y,vt,st),Pp(Y,E.x,E.y,ct.x,dr+ct.y,at.x,at.y+at.h,d,pt,ot.x,ht.y,vt,st),Pp(Y,E.x,E.y,mt.x,dr+mt.y,at.x+at.w,at.y+at.h,d,pt,ht.x,ht.y,vt,st),hv(n.dynamicLayoutVertexArray,E,Se),W.emplaceBack(Vt,Vt+1,Vt+2),W.emplaceBack(Vt+1,Vt+2,Vt+3),ee.vertexLength+=4,ee.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ge[0]),we!==s.length-1&&ft===s[we+1].sectionIndex||n.programConfigurations.populatePaintArrays(Y.length,_,_.index,{},N,pe&&pe[ft])}n.placedSymbolArray.emplaceBack(E.x,E.y,se,this.glyphOffsetArray.length-se,de,P,z,E.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],b,0,!1,0,D)}_addCollisionDebugVertex(n,s,d,m,v,_){return s.emplaceBack(0,0),n.emplaceBack(d.x,d.y,m,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,s,d,m,v,_,b){const E=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),P=E.vertexLength,z=v.layoutVertexArray,D=v.collisionVertexArray,N=b.anchorX,W=b.anchorY;this._addCollisionDebugVertex(z,D,_,N,W,new k(n,s)),this._addCollisionDebugVertex(z,D,_,N,W,new k(d,s)),this._addCollisionDebugVertex(z,D,_,N,W,new k(d,m)),this._addCollisionDebugVertex(z,D,_,N,W,new k(n,m)),E.vertexLength+=4;const Y=v.indexArray;Y.emplaceBack(P,P+1),Y.emplaceBack(P+1,P+2),Y.emplaceBack(P+2,P+3),Y.emplaceBack(P+3,P),E.primitiveLength+=4}addDebugCollisionBoxes(n,s,d,m){for(let v=n;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pv(hp,Db.members,Fd),this.iconCollisionBox=new pv(hp,Db.members,Fd);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,d,m,v,_,b,E,P){const z={};for(let D=s;D<d;D++){const N=n.get(D);z.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},z.textFeatureIndex=N.featureIndex;break}for(let D=m;D<v;D++){const N=n.get(D);z.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},z.verticalTextFeatureIndex=N.featureIndex;break}for(let D=_;D<b;D++){const N=n.get(D);z.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},z.iconFeatureIndex=N.featureIndex;break}for(let D=E;D<P;D++){const N=n.get(D);z.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},z.verticalIconFeatureIndex=N.featureIndex;break}return z}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const d=n.placedSymbolArray.get(s),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),d=Math.cos(n),m=[],v=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const E=this.symbolInstances.get(b);m.push(0|Math.round(s*E.anchorX+d*E.anchorY)),v.push(E.featureIndex)}return _.sort((b,E)=>m[b]-m[E]||v[E]-v[b]),_}addToSortKeyRanges(n,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,_)=>{m>=0&&_.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ew,tw;dt("SymbolBucket",Uc,{omit:["layers","collisionBoxArray","features","compareText"]}),Uc.MAX_GLYPHS=65535,Uc.addDynamicAttributes=hv;var mv={get paint(){return tw=tw||new g({"icon-opacity":new y(ze.paint_symbol["icon-opacity"]),"icon-color":new y(ze.paint_symbol["icon-color"]),"icon-halo-color":new y(ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new y(ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new y(ze.paint_symbol["icon-halo-blur"]),"icon-translate":new yt(ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new yt(ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new y(ze.paint_symbol["text-opacity"]),"text-color":new y(ze.paint_symbol["text-color"],{runtimeType:Wr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new y(ze.paint_symbol["text-halo-color"]),"text-halo-width":new y(ze.paint_symbol["text-halo-width"]),"text-halo-blur":new y(ze.paint_symbol["text-halo-blur"]),"text-translate":new yt(ze.paint_symbol["text-translate"]),"text-translate-anchor":new yt(ze.paint_symbol["text-translate-anchor"])})},get layout(){return ew=ew||new g({"symbol-placement":new yt(ze.layout_symbol["symbol-placement"]),"symbol-spacing":new yt(ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yt(ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new y(ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yt(ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yt(ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yt(ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yt(ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new yt(ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yt(ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new y(ze.layout_symbol["icon-size"]),"icon-text-fit":new yt(ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yt(ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new y(ze.layout_symbol["icon-image"]),"icon-rotate":new y(ze.layout_symbol["icon-rotate"]),"icon-padding":new y(ze.layout_symbol["icon-padding"]),"icon-keep-upright":new yt(ze.layout_symbol["icon-keep-upright"]),"icon-offset":new y(ze.layout_symbol["icon-offset"]),"icon-anchor":new y(ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yt(ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yt(ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yt(ze.layout_symbol["text-rotation-alignment"]),"text-field":new y(ze.layout_symbol["text-field"]),"text-font":new y(ze.layout_symbol["text-font"]),"text-size":new y(ze.layout_symbol["text-size"]),"text-max-width":new y(ze.layout_symbol["text-max-width"]),"text-line-height":new yt(ze.layout_symbol["text-line-height"]),"text-letter-spacing":new y(ze.layout_symbol["text-letter-spacing"]),"text-justify":new y(ze.layout_symbol["text-justify"]),"text-radial-offset":new y(ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yt(ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new y(ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new y(ze.layout_symbol["text-anchor"]),"text-max-angle":new yt(ze.layout_symbol["text-max-angle"]),"text-writing-mode":new yt(ze.layout_symbol["text-writing-mode"]),"text-rotate":new y(ze.layout_symbol["text-rotate"]),"text-padding":new yt(ze.layout_symbol["text-padding"]),"text-keep-upright":new yt(ze.layout_symbol["text-keep-upright"]),"text-transform":new y(ze.layout_symbol["text-transform"]),"text-offset":new y(ze.layout_symbol["text-offset"]),"text-allow-overlap":new yt(ze.layout_symbol["text-allow-overlap"]),"text-overlap":new yt(ze.layout_symbol["text-overlap"]),"text-ignore-placement":new yt(ze.layout_symbol["text-ignore-placement"]),"text-optional":new yt(ze.layout_symbol["text-optional"])})}};class rw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:Ti,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}dt("FormatSectionOverride",rw,{omit:["defaultValue"]});class Mp extends S{constructor(n){super(n,mv)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,d,m){const v=this.layout.get(n).evaluate(s,{},d,m),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Pc(_.value)||!v?v:function(b,E){return E.replace(/{([^{}]+)}/g,(P,z)=>b&&z in b?String(b[z]):"")}(s.properties,v)}createBucket(n){return new Uc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of mv.paint.overridableProperties){if(!Mp.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),d=new rw(s),m=new pd(d,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new md("source",m):new ls("composite",m,s.value.zoomStops),this.paint._values[n]=new mo(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&Mp.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const d=n.get("text-field"),m=mv.paint.properties[s];let v=!1;const _=b=>{for(const E of b)if(m.overrides&&m.overrides.hasOverride(E))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof di)_(d.value.value.sections);else if(d.value.kind==="source"){const b=P=>{v||(P instanceof xa&&en(P.value)===Xn?_(P.value.sections):P instanceof _c?_(P.sections):P.eachChild(b))},E=d.value;E._styleExpression&&b(E._styleExpression.expression)}return v}}let nw;var Q3={get paint(){return nw=nw||new g({"background-color":new yt(ze.paint_background["background-color"]),"background-pattern":new c(ze.paint_background["background-pattern"]),"background-opacity":new yt(ze.paint_background["background-opacity"])})}};class eA extends S{constructor(n){super(n,Q3)}}let iw;var tA={get paint(){return iw=iw||new g({"raster-opacity":new yt(ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new yt(ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yt(ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yt(ze.paint_raster["raster-brightness-max"]),"raster-saturation":new yt(ze.paint_raster["raster-saturation"]),"raster-contrast":new yt(ze.paint_raster["raster-contrast"]),"raster-resampling":new yt(ze.paint_raster["raster-resampling"]),"raster-fade-duration":new yt(ze.paint_raster["raster-fade-duration"])})}};class rA extends S{constructor(n){super(n,tA)}}class nA extends S{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class iA{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const gv=63710088e-1;class bs{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bs(oe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,d=this.lat*s,m=n.lat*s,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return gv*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof bs)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new bs(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new bs(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ow=2*Math.PI*gv;function aw(o){return ow*Math.cos(o*Math.PI/180)}function sw(o){return(180+o)/360}function lw(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function cw(o,n){return o/aw(n)}function yv(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class kp{constructor(n,s,d=0){this.x=+n,this.y=+s,this.z=+d}static fromLngLat(n,s=0){const d=bs.convert(n);return new kp(sw(d.lng),lw(d.lat),cw(s,d.lat))}toLngLat(){return new bs(360*this.x-180,yv(this.y))}toAltitude(){return this.z*aw(yv(this.y))}meterInMercatorCoordinateUnits(){return 1/ow*(n=yv(this.y),1/Math.cos(n*Math.PI/180));var n}}function uw(o,n,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[o*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class vv{constructor(n,s,d){if(n<0||n>25||d<0||d>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=d,this.key=eh(0,n,n,s,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,d){const m=(_=this.y,b=this.z,E=uw(256*(v=this.x),256*(_=Math.pow(2,b)-_-1),b),P=uw(256*(v+1),256*(_+1),b),E[0]+","+E[1]+","+P[0]+","+P[1]);var v,_,b,E,P;const z=function(D,N,W){let Y,ee="";for(let se=D;se>0;se--)Y=1<<se-1,ee+=(N&Y?1:0)+(W&Y?2:0);return ee}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new k((n.x*s-this.x)*tn,(n.y*s-this.y)*tn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=eh(n,s.z,s.z,s.x,s.y)}}class Hi{constructor(n,s,d,m,v){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=s,this.canonical=new vv(d,+m,+v),this.key=eh(s,n,d,m,v)}clone(){return new Hi(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Hi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hi(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?eh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):eh(this.wrap*+s,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Hi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new Hi(s,this.wrap,s,d,m),new Hi(s,this.wrap,s,d+1,m),new Hi(s,this.wrap,s,d,m+1),new Hi(s,this.wrap,s,d+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Hi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Hi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new kp(n.x-this.wrap,n.y))}}function eh(o,n,s,d,m){(o*=2)<0&&(o=-1*o-1);const v=1<<s;return(v*v*o+v*m+d).toString(36)+s.toString(36)+n.toString(36)}dt("CanonicalTileID",vv),dt("OverscaledTileID",Hi,{omit:["posMatrix"]});class hw{constructor(n,s,d,m=1,v=1,_=1,b=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void He(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const E=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=_,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<E;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(E,P)]=this.data[this._idx(E-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,E)]=this.data[this._idx(P,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<E;P++)for(let z=0;z<E;z++){const D=this.get(P,z);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,s){const d=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,d){return n*this.redFactor+s*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Ui({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,v=s*this.dim+this.dim,_=d*this.dim,b=d*this.dim+this.dim;switch(s){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:_=b-1;break;case 1:b=_+1}const E=-s*this.dim,P=-d*this.dim;for(let z=_;z<b;z++)for(let D=m;D<v;D++)this.data[this._idx(D,z)]=n.data[this._idx(D+E,z+P)]}}dt("DEMData",hw);class fw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const d=n[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class pw{constructor(n,s,d,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=d,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class mw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new yl(tn,16,0),this.grid3D=new yl(tn,16,0),this.featureIndexArray=new Aa,this.promoteId=s}insert(n,s,d,m,v,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);const E=_?this.grid3D:this.grid;for(let P=0;P<s.length;P++){const z=s[P],D=[1/0,1/0,-1/0,-1/0];for(let N=0;N<z.length;N++){const W=z[N];D[0]=Math.min(D[0],W.x),D[1]=Math.min(D[1],W.y),D[2]=Math.max(D[2],W.x),D[3]=Math.max(D[3],W.y)}D[0]<tn&&D[1]<tn&&D[2]>=0&&D[3]>=0&&E.insert(b,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new av(this.rawTileData)).layers,this.sourceLayerCoder=new fw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,d,m){this.loadVTLayers();const v=n.params||{},_=tn/n.tileSize/n.scale,b=gd(v.filter),E=n.queryGeometry,P=n.queryPadding*_,z=yw(E),D=this.grid.query(z.minX-P,z.minY-P,z.maxX+P,z.maxY+P),N=yw(n.cameraQueryGeometry),W=this.grid3D.query(N.minX-P,N.minY-P,N.maxX+P,N.maxY+P,(se,de,Se,pe)=>function(we,je,We,ct,mt){for(const ot of we)if(je<=ot.x&&We<=ot.y&&ct>=ot.x&&mt>=ot.y)return!0;const at=[new k(je,We),new k(je,mt),new k(ct,mt),new k(ct,We)];if(we.length>2){for(const ot of at)if(Dc(we,ot))return!0}for(let ot=0;ot<we.length-1;ot++)if($k(we[ot],we[ot+1],at))return!0;return!1}(n.cameraQueryGeometry,se-P,de-P,Se+P,pe+P));for(const se of W)D.push(se);D.sort(oA);const Y={};let ee;for(let se=0;se<D.length;se++){const de=D[se];if(de===ee)continue;ee=de;const Se=this.featureIndexArray.get(de);let pe=null;this.loadMatchingFeature(Y,Se.bucketIndex,Se.sourceLayerIndex,Se.featureIndex,b,v.layers,v.availableImages,s,d,m,(we,je,We)=>(pe||(pe=Cl(we)),je.queryIntersectsFeature(E,we,We,pe,this.z,n.transform,_,n.pixelPosMatrix)))}return Y}loadMatchingFeature(n,s,d,m,v,_,b,E,P,z,D){const N=this.bucketLayerIDs[s];if(_&&!function(se,de){for(let Se=0;Se<se.length;Se++)if(de.indexOf(se[Se])>=0)return!0;return!1}(_,N))return;const W=this.sourceLayerCoder.decode(d),Y=this.vtLayers[W].feature(m);if(v.needGeometry){const se=El(Y,!0);if(!v.filter(new Sr(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!v.filter(new Sr(this.tileID.overscaledZ),Y))return;const ee=this.getId(Y,W);for(let se=0;se<N.length;se++){const de=N[se];if(_&&_.indexOf(de)<0)continue;const Se=E[de];if(!Se)continue;let pe={};ee&&z&&(pe=z.getState(Se.sourceLayer||"_geojsonTileLayer",ee));const we=le({},P[de]);we.paint=gw(we.paint,Se.paint,Y,pe,b),we.layout=gw(we.layout,Se.layout,Y,pe,b);const je=!D||D(Y,Se,pe);if(!je)continue;const We=new pw(Y,this.z,this.x,this.y,ee);We.layer=we;let ct=n[de];ct===void 0&&(ct=n[de]=[]),ct.push({featureIndex:m,feature:We,intersectionZ:je})}}lookupSymbolFeatures(n,s,d,m,v,_,b,E){const P={};this.loadVTLayers();const z=gd(v);for(const D of n)this.loadMatchingFeature(P,d,m,D,z,_,b,E,s);return P}hasLayer(n){for(const s of this.bucketLayerIDs)for(const d of s)if(n===d)return!0;return!1}getId(n,s){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function gw(o,n,s,d,m){return Ee(o,(v,_)=>{const b=n instanceof _l?n.get(_):null;return b&&b.evaluate?b.evaluate(s,d,m):b})}function yw(o){let n=1/0,s=1/0,d=-1/0,m=-1/0;for(const v of o)n=Math.min(n,v.x),s=Math.min(s,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:n,minY:s,maxX:d,maxY:m}}function oA(o,n){return n-o}function vw(o,n,s,d,m){const v=[];for(let _=0;_<o.length;_++){const b=o[_];let E;for(let P=0;P<b.length-1;P++){let z=b[P],D=b[P+1];z.x<n&&D.x<n||(z.x<n?z=new k(n,z.y+(n-z.x)/(D.x-z.x)*(D.y-z.y))._round():D.x<n&&(D=new k(n,z.y+(n-z.x)/(D.x-z.x)*(D.y-z.y))._round()),z.y<s&&D.y<s||(z.y<s?z=new k(z.x+(s-z.y)/(D.y-z.y)*(D.x-z.x),s)._round():D.y<s&&(D=new k(z.x+(s-z.y)/(D.y-z.y)*(D.x-z.x),s)._round()),z.x>=d&&D.x>=d||(z.x>=d?z=new k(d,z.y+(d-z.x)/(D.x-z.x)*(D.y-z.y))._round():D.x>=d&&(D=new k(d,z.y+(d-z.x)/(D.x-z.x)*(D.y-z.y))._round()),z.y>=m&&D.y>=m||(z.y>=m?z=new k(z.x+(m-z.y)/(D.y-z.y)*(D.x-z.x),m)._round():D.y>=m&&(D=new k(z.x+(m-z.y)/(D.y-z.y)*(D.x-z.x),m)._round()),E&&z.equals(E[E.length-1])||(E=[z],v.push(E)),E.push(D)))))}}return v}dt("FeatureIndex",mw,{omit:["rawTileData","sourceLayerCoder"]});class ws extends k{constructor(n,s,d,m){super(n,s),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new ws(this.x,this.y,this.angle,this.segment)}}function _w(o,n,s,d,m){if(n.segment===void 0||s===0)return!0;let v=n,_=n.segment+1,b=0;for(;b>-s/2;){if(_--,_<0)return!1;b-=o[_].dist(v),v=o[_]}b+=o[_].dist(o[_+1]),_++;const E=[];let P=0;for(;b<s/2;){const z=o[_],D=o[_+1];if(!D)return!1;let N=o[_-1].angleTo(z)-z.angleTo(D);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:N}),P+=N;b-E[0].distance>d;)P-=E.shift().angleDelta;if(P>m)return!1;_++,b+=z.dist(D)}return!0}function xw(o){let n=0;for(let s=0;s<o.length-1;s++)n+=o[s].dist(o[s+1]);return n}function bw(o,n,s){return o?.6*n*s:0}function ww(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function aA(o,n,s,d,m,v){const _=bw(s,m,v),b=ww(s,d)*v;let E=0;const P=xw(o)/2;for(let z=0;z<o.length-1;z++){const D=o[z],N=o[z+1],W=D.dist(N);if(E+W>P){const Y=(P-E)/W,ee=Bn.number(D.x,N.x,Y),se=Bn.number(D.y,N.y,Y),de=new ws(ee,se,N.angleTo(D),z);return de._round(),!_||_w(o,de,b,_,n)?de:void 0}E+=W}}function sA(o,n,s,d,m,v,_,b,E){const P=bw(d,v,_),z=ww(d,m),D=z*_,N=o[0].x===0||o[0].x===E||o[0].y===0||o[0].y===E;return n-D<n/4&&(n=D+n/4),Sw(o,N?n/2*b%n:(z/2+2*v)*_*b%n,n,P,s,D,N,!1,E)}function Sw(o,n,s,d,m,v,_,b,E){const P=v/2,z=xw(o);let D=0,N=n-s,W=[];for(let Y=0;Y<o.length-1;Y++){const ee=o[Y],se=o[Y+1],de=ee.dist(se),Se=se.angleTo(ee);for(;N+s<D+de;){N+=s;const pe=(N-D)/de,we=Bn.number(ee.x,se.x,pe),je=Bn.number(ee.y,se.y,pe);if(we>=0&&we<E&&je>=0&&je<E&&N-P>=0&&N+P<=z){const We=new ws(we,je,Se,Y);We._round(),d&&!_w(o,We,v,d,m)||W.push(We)}}D+=de}return b||W.length||_||(W=Sw(o,D/2,s,d,m,v,_,!0,E)),W}dt("Anchor",ws);const Hc=yi;function Cw(o,n,s,d){const m=[],v=o.image,_=v.pixelRatio,b=v.paddedRect.w-2*Hc,E=v.paddedRect.h-2*Hc;let P={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const z=v.stretchX||[[0,b]],D=v.stretchY||[[0,E]],N=(Ge,pt)=>Ge+pt[1]-pt[0],W=z.reduce(N,0),Y=D.reduce(N,0),ee=b-W,se=E-Y;let de=0,Se=W,pe=0,we=Y,je=0,We=ee,ct=0,mt=se;if(v.content&&d){const Ge=v.content,pt=Ge[2]-Ge[0],ft=Ge[3]-Ge[1];(v.textFitWidth||v.textFitHeight)&&(P=Yb(o)),de=Ap(z,0,Ge[0]),pe=Ap(D,0,Ge[1]),Se=Ap(z,Ge[0],Ge[2]),we=Ap(D,Ge[1],Ge[3]),je=Ge[0]-de,ct=Ge[1]-pe,We=pt-Se,mt=ft-we}const at=P.x1,ot=P.y1,ht=P.x2-at,vt=P.y2-ot,st=(Ge,pt,ft,Vt)=>{const dr=Rp(Ge.stretch-de,Se,ht,at),hr=zp(Ge.fixed-je,We,Ge.stretch,W),rn=Rp(pt.stretch-pe,we,vt,ot),Wi=zp(pt.fixed-ct,mt,pt.stretch,Y),jn=Rp(ft.stretch-de,Se,ht,at),fn=zp(ft.fixed-je,We,ft.stretch,W),En=Rp(Vt.stretch-pe,we,vt,ot),Vn=zp(Vt.fixed-ct,mt,Vt.stretch,Y),ei=new k(dr,rn),Un=new k(jn,rn),nn=new k(jn,En),xn=new k(dr,En),ti=new k(hr/_,Wi/_),vi=new k(fn/_,Vn/_),Ln=n*Math.PI/180;if(Ln){const Nr=Math.sin(Ln),Zt=Math.cos(Ln),on=[Zt,-Nr,Nr,Zt];ei._matMult(on),Un._matMult(on),xn._matMult(on),nn._matMult(on)}const _i=Ge.stretch+Ge.fixed,Gi=pt.stretch+pt.fixed;return{tl:ei,tr:Un,bl:xn,br:nn,tex:{x:v.paddedRect.x+Hc+_i,y:v.paddedRect.y+Hc+Gi,w:ft.stretch+ft.fixed-_i,h:Vt.stretch+Vt.fixed-Gi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ti,pixelOffsetBR:vi,minFontScaleX:We/_/ht,minFontScaleY:mt/_/vt,isSDF:s}};if(d&&(v.stretchX||v.stretchY)){const Ge=Ew(z,ee,W),pt=Ew(D,se,Y);for(let ft=0;ft<Ge.length-1;ft++){const Vt=Ge[ft],dr=Ge[ft+1];for(let hr=0;hr<pt.length-1;hr++)m.push(st(Vt,pt[hr],dr,pt[hr+1]))}}else m.push(st({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return m}function Ap(o,n,s){let d=0;for(const m of o)d+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return d}function Ew(o,n,s){const d=[{fixed:-Hc,stretch:0}];for(const[m,v]of o){const _=d[d.length-1];d.push({fixed:m-_.stretch,stretch:_.stretch}),d.push({fixed:m-_.stretch,stretch:_.stretch+(v-m)})}return d.push({fixed:n+Hc,stretch:s}),d}function Rp(o,n,s,d){return o/n*s+d}function zp(o,n,s,d){return o-n*s/d}class Lp{constructor(n,s,d,m,v,_,b,E,P,z){var D;if(this.boxStartIndex=n.length,P){let N=_.top,W=_.bottom;const Y=_.collisionPadding;Y&&(N-=Y[1],W+=Y[3]);let ee=W-N;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{const N=!((D=_.image)===null||D===void 0)&&D.content&&(_.image.textFitWidth||_.image.textFitHeight)?Yb(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};N.y1=N.y1*b-E[0],N.y2=N.y2*b+E[2],N.x1=N.x1*b-E[3],N.x2=N.x2*b+E[1];const W=_.collisionPadding;if(W&&(N.x1-=W[0]*b,N.y1-=W[1]*b,N.x2+=W[2]*b,N.y2+=W[3]*b),z){const Y=new k(N.x1,N.y1),ee=new k(N.x2,N.y1),se=new k(N.x1,N.y2),de=new k(N.x2,N.y2),Se=z*Math.PI/180;Y._rotate(Se),ee._rotate(Se),se._rotate(Se),de._rotate(Se),N.x1=Math.min(Y.x,ee.x,se.x,de.x),N.x2=Math.max(Y.x,ee.x,se.x,de.x),N.y1=Math.min(Y.y,ee.y,se.y,de.y),N.y2=Math.max(Y.y,ee.y,se.y,de.y)}n.emplaceBack(s.x,s.y,N.x1,N.y1,N.x2,N.y2,d,m,v)}this.boxEndIndex=n.length}}class lA{constructor(n=[],s=cA){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:d}=this,m=s[n];for(;n>0;){const v=n-1>>1,_=s[v];if(d(m,_)>=0)break;s[n]=_,n=v}s[n]=m}_down(n){const{data:s,compare:d}=this,m=this.length>>1,v=s[n];for(;n<m;){let _=1+(n<<1),b=s[_];const E=_+1;if(E<this.length&&d(s[E],b)<0&&(_=E,b=s[E]),d(b,v)>=0)break;s[n]=b,n=_}s[n]=v}}function cA(o,n){return o<n?-1:o>n?1:0}function uA(o,n=1,s=!1){let d=1/0,m=1/0,v=-1/0,_=-1/0;const b=o[0];for(let W=0;W<b.length;W++){const Y=b[W];(!W||Y.x<d)&&(d=Y.x),(!W||Y.y<m)&&(m=Y.y),(!W||Y.x>v)&&(v=Y.x),(!W||Y.y>_)&&(_=Y.y)}const E=Math.min(v-d,_-m);let P=E/2;const z=new lA([],dA);if(E===0)return new k(d,m);for(let W=d;W<v;W+=E)for(let Y=m;Y<_;Y+=E)z.push(new Wc(W+P,Y+P,P,o));let D=function(W){let Y=0,ee=0,se=0;const de=W[0];for(let Se=0,pe=de.length,we=pe-1;Se<pe;we=Se++){const je=de[Se],We=de[we],ct=je.x*We.y-We.x*je.y;ee+=(je.x+We.x)*ct,se+=(je.y+We.y)*ct,Y+=3*ct}return new Wc(ee/Y,se/Y,0,W)}(o),N=z.length;for(;z.length;){const W=z.pop();(W.d>D.d||!D.d)&&(D=W,s&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,N)),W.max-D.d<=n||(P=W.h/2,z.push(new Wc(W.p.x-P,W.p.y-P,P,o)),z.push(new Wc(W.p.x+P,W.p.y-P,P,o)),z.push(new Wc(W.p.x-P,W.p.y+P,P,o)),z.push(new Wc(W.p.x+P,W.p.y+P,P,o)),N+=4)}return s&&(console.log(`num probes: ${N}`),console.log(`best distance: ${D.d}`)),D.p}function dA(o,n){return n.max-o.max}function Wc(o,n,s,d){this.p=new k(o,n),this.h=s,this.d=function(m,v){let _=!1,b=1/0;for(let E=0;E<v.length;E++){const P=v[E];for(let z=0,D=P.length,N=D-1;z<D;N=z++){const W=P[z],Y=P[N];W.y>m.y!=Y.y>m.y&&m.x<(Y.x-W.x)*(m.y-W.y)/(Y.y-W.y)+W.x&&(_=!_),b=Math.min(b,lb(m,W,Y))}}return(_?1:-1)*Math.sqrt(b)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var zn;f.ap=void 0,(zn=f.ap||(f.ap={}))[zn.center=1]="center",zn[zn.left=2]="left",zn[zn.right=3]="right",zn[zn.top=4]="top",zn[zn.bottom=5]="bottom",zn[zn["top-left"]=6]="top-left",zn[zn["top-right"]=7]="top-right",zn[zn["bottom-left"]=8]="bottom-left",zn[zn["bottom-right"]=9]="bottom-right";const Ss=7,_v=Number.POSITIVE_INFINITY;function Tw(o,n){return n[1]!==_v?function(s,d,m){let v=0,_=0;switch(d=Math.abs(d),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-Ss;break;case"bottom-right":case"bottom-left":case"bottom":_=-m+Ss}switch(s){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,_]}(o,n[0],n[1]):function(s,d){let m=0,v=0;d<0&&(d=0);const _=d/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-Ss;break;case"bottom-right":case"bottom-left":v=-_+Ss;break;case"bottom":v=-d+Ss;break;case"top":v=d-Ss}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(o,n[0])}function Iw(o,n,s){var d;const m=o.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},s);if(v){const b=v.values,E=[];for(let P=0;P<b.length;P+=2){const z=E[P]=b[P],D=b[P+1].map(N=>N*hn);z.startsWith("top")?D[1]-=Ss:z.startsWith("bottom")&&(D[1]+=Ss),E[P+1]=D}return new kn(E)}const _=m.get("text-variable-anchor");if(_){let b;b=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},s)*hn,_v]:m.get("text-offset").evaluate(n,{},s).map(P=>P*hn);const E=[];for(const P of _)E.push(P,Tw(P,b));return new kn(E)}return null}function xv(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hA(o,n,s,d,m,v,_,b,E,P,z){let D=v.textMaxSize.evaluate(n,{});D===void 0&&(D=_);const N=o.layers[0].layout,W=N.get("icon-offset").evaluate(n,{},z),Y=Mw(s.horizontal),ee=_/24,se=o.tilePixelRatio*ee,de=o.tilePixelRatio*D/24,Se=o.tilePixelRatio*b,pe=o.tilePixelRatio*N.get("symbol-spacing"),we=N.get("text-padding")*o.tilePixelRatio,je=function(Ge,pt,ft,Vt=1){const dr=Ge.get("icon-padding").evaluate(pt,{},ft),hr=dr&&dr.values;return[hr[0]*Vt,hr[1]*Vt,hr[2]*Vt,hr[3]*Vt]}(N,n,z,o.tilePixelRatio),We=N.get("text-max-angle")/180*Math.PI,ct=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",mt=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",at=N.get("symbol-placement"),ot=pe/2,ht=N.get("icon-text-fit");let vt;d&&ht!=="none"&&(o.allowVerticalPlacement&&s.vertical&&(vt=Jb(d,s.vertical,ht,N.get("icon-text-fit-padding"),W,ee)),Y&&(d=Jb(d,Y,ht,N.get("icon-text-fit-padding"),W,ee)));const st=(Ge,pt)=>{pt.x<0||pt.x>=tn||pt.y<0||pt.y>=tn||function(ft,Vt,dr,hr,rn,Wi,jn,fn,En,Vn,ei,Un,nn,xn,ti,vi,Ln,_i,Gi,Nr,Zt,on,On,pn,yo){const Oo=ft.addToLineVertexArray(Vt,dr);let Do,Oa,vo,qi,xi=0,Da=0,nh=0,zw=0,Pv=-1,Mv=-1;const Fa={};let Lw=$y("");if(ft.allowVerticalPlacement&&hr.vertical){const Hn=fn.layout.get("text-rotate").evaluate(Zt,{},pn)+90;vo=new Lp(En,Vt,Vn,ei,Un,hr.vertical,nn,xn,ti,Hn),jn&&(qi=new Lp(En,Vt,Vn,ei,Un,jn,Ln,_i,ti,Hn))}if(rn){const Hn=fn.layout.get("icon-rotate").evaluate(Zt,{}),Zi=fn.layout.get("icon-text-fit")!=="none",Il=Cw(rn,Hn,On,Zi),Bo=jn?Cw(jn,Hn,On,Zi):void 0;Oa=new Lp(En,Vt,Vn,ei,Un,rn,Ln,_i,!1,Hn),xi=4*Il.length;const Pl=ft.iconSizeData;let da=null;Pl.kind==="source"?(da=[ua*fn.layout.get("icon-size").evaluate(Zt,{})],da[0]>xs&&He(`${ft.layerIds[0]}: Value for "icon-size" is >= ${Qd}. Reduce your "icon-size".`)):Pl.kind==="composite"&&(da=[ua*on.compositeIconSizes[0].evaluate(Zt,{},pn),ua*on.compositeIconSizes[1].evaluate(Zt,{},pn)],(da[0]>xs||da[1]>xs)&&He(`${ft.layerIds[0]}: Value for "icon-size" is >= ${Qd}. Reduce your "icon-size".`)),ft.addSymbols(ft.icon,Il,da,Nr,Gi,Zt,f.ah.none,Vt,Oo.lineStartIndex,Oo.lineLength,-1,pn),Pv=ft.icon.placedSymbolArray.length-1,Bo&&(Da=4*Bo.length,ft.addSymbols(ft.icon,Bo,da,Nr,Gi,Zt,f.ah.vertical,Vt,Oo.lineStartIndex,Oo.lineLength,-1,pn),Mv=ft.icon.placedSymbolArray.length-1)}const Ow=Object.keys(hr.horizontal);for(const Hn of Ow){const Zi=hr.horizontal[Hn];if(!Do){Lw=$y(Zi.text);const Bo=fn.layout.get("text-rotate").evaluate(Zt,{},pn);Do=new Lp(En,Vt,Vn,ei,Un,Zi,nn,xn,ti,Bo)}const Il=Zi.positionedLines.length===1;if(nh+=Pw(ft,Vt,Zi,Wi,fn,ti,Zt,vi,Oo,hr.vertical?f.ah.horizontal:f.ah.horizontalOnly,Il?Ow:[Hn],Fa,Pv,on,pn),Il)break}hr.vertical&&(zw+=Pw(ft,Vt,hr.vertical,Wi,fn,ti,Zt,vi,Oo,f.ah.vertical,["vertical"],Fa,Mv,on,pn));const mA=Do?Do.boxStartIndex:ft.collisionBoxArray.length,gA=Do?Do.boxEndIndex:ft.collisionBoxArray.length,yA=vo?vo.boxStartIndex:ft.collisionBoxArray.length,vA=vo?vo.boxEndIndex:ft.collisionBoxArray.length,_A=Oa?Oa.boxStartIndex:ft.collisionBoxArray.length,xA=Oa?Oa.boxEndIndex:ft.collisionBoxArray.length,bA=qi?qi.boxStartIndex:ft.collisionBoxArray.length,wA=qi?qi.boxEndIndex:ft.collisionBoxArray.length;let Fo=-1;const Dp=(Hn,Zi)=>Hn&&Hn.circleDiameter?Math.max(Hn.circleDiameter,Zi):Zi;Fo=Dp(Do,Fo),Fo=Dp(vo,Fo),Fo=Dp(Oa,Fo),Fo=Dp(qi,Fo);const Dw=Fo>-1?1:0;Dw&&(Fo*=yo/hn),ft.glyphOffsetArray.length>=Uc.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zt.sortKey!==void 0&&ft.addToSortKeyRanges(ft.symbolInstances.length,Zt.sortKey);const SA=Iw(fn,Zt,pn),[CA,EA]=function(Hn,Zi){const Il=Hn.length,Bo=Zi==null?void 0:Zi.values;if((Bo==null?void 0:Bo.length)>0)for(let Pl=0;Pl<Bo.length;Pl+=2){const da=Bo[Pl+1];Hn.emplaceBack(f.ap[Bo[Pl]],da[0],da[1])}return[Il,Hn.length]}(ft.textAnchorOffsets,SA);ft.symbolInstances.emplaceBack(Vt.x,Vt.y,Fa.right>=0?Fa.right:-1,Fa.center>=0?Fa.center:-1,Fa.left>=0?Fa.left:-1,Fa.vertical||-1,Pv,Mv,Lw,mA,gA,yA,vA,_A,xA,bA,wA,Vn,nh,zw,xi,Da,Dw,0,nn,Fo,CA,EA)}(o,pt,Ge,s,d,m,vt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,se,[we,we,we,we],ct,E,Se,je,mt,W,n,v,P,z,_)};if(at==="line")for(const Ge of vw(n.geometry,0,0,tn,tn)){const pt=sA(Ge,pe,We,s.vertical||Y,d,24,de,o.overscaling,tn);for(const ft of pt)Y&&fA(o,Y.text,ot,ft)||st(Ge,ft)}else if(at==="line-center"){for(const Ge of n.geometry)if(Ge.length>1){const pt=aA(Ge,We,s.vertical||Y,d,24,de);pt&&st(Ge,pt)}}else if(n.type==="Polygon")for(const Ge of bc(n.geometry,0)){const pt=uA(Ge,16);st(Ge[0],new ws(pt.x,pt.y,0))}else if(n.type==="LineString")for(const Ge of n.geometry)st(Ge,new ws(Ge[0].x,Ge[0].y,0));else if(n.type==="Point")for(const Ge of n.geometry)for(const pt of Ge)st([pt],new ws(pt.x,pt.y,0))}function Pw(o,n,s,d,m,v,_,b,E,P,z,D,N,W,Y){const ee=function(Se,pe,we,je,We,ct,mt,at){const ot=je.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,ht=[];for(const vt of pe.positionedLines)for(const st of vt.positionedGlyphs){if(!st.rect)continue;const Ge=st.rect||{};let pt=Hb+1,ft=!0,Vt=1,dr=0;const hr=(We||at)&&st.vertical,rn=st.metrics.advance*st.scale/2;if(at&&pe.verticalizable&&(dr=vt.lineOffset/2-(st.imageName?-(hn-st.metrics.width*st.scale)/2:(st.scale-1)*hn)),st.imageName){const Nr=mt[st.imageName];ft=Nr.sdf,Vt=Nr.pixelRatio,pt=yi/Vt}const Wi=We?[st.x+rn,st.y]:[0,0];let jn=We?[0,0]:[st.x+rn+we[0],st.y+we[1]-dr],fn=[0,0];hr&&(fn=jn,jn=[0,0]);const En=st.metrics.isDoubleResolution?2:1,Vn=(st.metrics.left-pt)*st.scale-rn+jn[0],ei=(-st.metrics.top-pt)*st.scale+jn[1],Un=Vn+Ge.w/En*st.scale/Vt,nn=ei+Ge.h/En*st.scale/Vt,xn=new k(Vn,ei),ti=new k(Un,ei),vi=new k(Vn,nn),Ln=new k(Un,nn);if(hr){const Nr=new k(-rn,rn-Yd),Zt=-Math.PI/2,on=hn/2-rn,On=new k(5-Yd-on,-(st.imageName?on:0)),pn=new k(...fn);xn._rotateAround(Zt,Nr)._add(On)._add(pn),ti._rotateAround(Zt,Nr)._add(On)._add(pn),vi._rotateAround(Zt,Nr)._add(On)._add(pn),Ln._rotateAround(Zt,Nr)._add(On)._add(pn)}if(ot){const Nr=Math.sin(ot),Zt=Math.cos(ot),on=[Zt,-Nr,Nr,Zt];xn._matMult(on),ti._matMult(on),vi._matMult(on),Ln._matMult(on)}const _i=new k(0,0),Gi=new k(0,0);ht.push({tl:xn,tr:ti,bl:vi,br:Ln,tex:Ge,writingMode:pe.writingMode,glyphOffset:Wi,sectionIndex:st.sectionIndex,isSDF:ft,pixelOffsetTL:_i,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}return ht}(0,s,b,m,v,_,d,o.allowVerticalPlacement),se=o.textSizeData;let de=null;se.kind==="source"?(de=[ua*m.layout.get("text-size").evaluate(_,{})],de[0]>xs&&He(`${o.layerIds[0]}: Value for "text-size" is >= ${Qd}. Reduce your "text-size".`)):se.kind==="composite"&&(de=[ua*W.compositeTextSizes[0].evaluate(_,{},Y),ua*W.compositeTextSizes[1].evaluate(_,{},Y)],(de[0]>xs||de[1]>xs)&&He(`${o.layerIds[0]}: Value for "text-size" is >= ${Qd}. Reduce your "text-size".`)),o.addSymbols(o.text,ee,de,b,v,_,P,n,E.lineStartIndex,E.lineLength,N,Y);for(const Se of z)D[Se]=o.text.placedSymbolArray.length-1;return 4*ee.length}function Mw(o){for(const n in o)return o[n];return null}function fA(o,n,s,d){const m=o.compareText;if(n in m){const v=m[n];for(let _=v.length-1;_>=0;_--)if(d.dist(v[_])<s)return!0}else m[n]=[];return m[n].push(d),!1}const kw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class bv{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,d]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=kw[15&d];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new bv(b,_,v,n)}constructor(n,s=64,d=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=kw.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+E),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=s,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return wv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:b}=this,E=[0,v.length-1,0],P=[];for(;E.length;){const z=E.pop()||0,D=E.pop()||0,N=E.pop()||0;if(D-N<=b){for(let se=N;se<=D;se++){const de=_[2*se],Se=_[2*se+1];de>=n&&de<=d&&Se>=s&&Se<=m&&P.push(v[se])}continue}const W=N+D>>1,Y=_[2*W],ee=_[2*W+1];Y>=n&&Y<=d&&ee>=s&&ee<=m&&P.push(v[W]),(z===0?n<=Y:s<=ee)&&(E.push(N),E.push(W-1),E.push(1-z)),(z===0?d>=Y:m>=ee)&&(E.push(W+1),E.push(D),E.push(1-z))}return P}within(n,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:_}=this,b=[0,m.length-1,0],E=[],P=d*d;for(;b.length;){const z=b.pop()||0,D=b.pop()||0,N=b.pop()||0;if(D-N<=_){for(let se=N;se<=D;se++)Rw(v[2*se],v[2*se+1],n,s)<=P&&E.push(m[se]);continue}const W=N+D>>1,Y=v[2*W],ee=v[2*W+1];Rw(Y,ee,n,s)<=P&&E.push(m[W]),(z===0?n-d<=Y:s-d<=ee)&&(b.push(N),b.push(W-1),b.push(1-z)),(z===0?n+d>=Y:s+d>=ee)&&(b.push(W+1),b.push(D),b.push(1-z))}return E}}function wv(o,n,s,d,m,v){if(m-d<=s)return;const _=d+m>>1;Aw(o,n,_,d,m,v),wv(o,n,s,d,_-1,1-v),wv(o,n,s,_+1,m,1-v)}function Aw(o,n,s,d,m,v){for(;m>d;){if(m-d>600){const P=m-d+1,z=s-d+1,D=Math.log(P),N=.5*Math.exp(2*D/3),W=.5*Math.sqrt(D*N*(P-N)/P)*(z-P/2<0?-1:1);Aw(o,n,s,Math.max(d,Math.floor(s-z*N/P+W)),Math.min(m,Math.floor(s+(P-z)*N/P+W)),v)}const _=n[2*s+v];let b=d,E=m;for(th(o,n,d,s),n[2*m+v]>_&&th(o,n,d,m);b<E;){for(th(o,n,b,E),b++,E--;n[2*b+v]<_;)b++;for(;n[2*E+v]>_;)E--}n[2*d+v]===_?th(o,n,d,E):(E++,th(o,n,E,m)),E<=s&&(d=E+1),s<=E&&(m=E-1)}}function th(o,n,s,d){Sv(o,s,d),Sv(n,2*s,2*d),Sv(n,2*s+1,2*d+1)}function Sv(o,n,s){const d=o[n];o[n]=o[s],o[s]=d}function Rw(o,n,s,d){const m=o-s,v=n-d;return m*m+v*v}var Cv;f.bd=void 0,(Cv=f.bd||(f.bd={})).create="create",Cv.load="load",Cv.fullLoad="fullLoad";let Op=null,rh=[];const Ev=1e3/60,Tv="loadTime",Iv="fullLoadTime",pA={mark(o){performance.mark(o)},frame(o){const n=o;Op!=null&&rh.push(n-Op),Op=n},clearMetrics(){Op=null,rh=[],performance.clearMeasures(Tv),performance.clearMeasures(Iv);for(const o in f.bd)performance.clearMarks(f.bd[o])},getPerformanceMetrics(){performance.measure(Tv,f.bd.create,f.bd.load),performance.measure(Iv,f.bd.create,f.bd.fullLoad);const o=performance.getEntriesByName(Tv)[0].duration,n=performance.getEntriesByName(Iv)[0].duration,s=rh.length,d=1/(rh.reduce((v,_)=>v+_,0)/s/1e3),m=rh.filter(v=>v>Ev).reduce((v,_)=>v+(_-Ev)/Ev,0);return{loadTime:o,fullLoadTime:n,fps:d,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};f.$=_n,f.A=Fc,f.B=function(o){if(Oe==null){const n=o.navigator?o.navigator.userAgent:null;Oe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Oe},f.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new iA(()=>this.process()),this.subscription=function(s,d,m,v){return s.addEventListener(d,m,!1),{unsubscribe:()=>{s.removeEventListener(d,m,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Je(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((s,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:d},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];const b={id:m,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],_=Object.assign(Object.assign({},o),{id:m,sourceMapId:this.mapId,origin:location.origin,data:po(o.data,v)});this.target.postMessage(_,{transfer:v})})}receive(o){const n=o.data,s=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[s];const d=this.abortControllers[s];return delete this.abortControllers[s],void(d&&d.abort())}if(Je(self)||n.mustQueue)return this.tasks[s]=n,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return u(this,void 0,void 0,function*(){if(n.type==="<response>"){const m=this.resolveRejects[o];return delete this.resolveRejects[o],m?void(n.error?m.reject(vl(n.error)):m.resolve(vl(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=vl(n.data),d=new AbortController;this.abortControllers[o]=d;try{const m=yield this.messageHandlers[n.type](n.sourceMapId,s,d);this.completeTask(o,null,m)}catch(m){this.completeTask(o,m)}})}completeTask(o,n,s){const d=[];delete this.abortControllers[o];const m={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?po(n):null,data:po(s,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.D=yt,f.E=br,f.F=function(){var o=new Fc(16);return Fc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},f.G=Ut,f.H=function(o,n,s){var d,m,v,_,b,E,P,z,D,N,W,Y,ee=s[0],se=s[1],de=s[2];return n===o?(o[12]=n[0]*ee+n[4]*se+n[8]*de+n[12],o[13]=n[1]*ee+n[5]*se+n[9]*de+n[13],o[14]=n[2]*ee+n[6]*se+n[10]*de+n[14],o[15]=n[3]*ee+n[7]*se+n[11]*de+n[15]):(m=n[1],v=n[2],_=n[3],b=n[4],E=n[5],P=n[6],z=n[7],D=n[8],N=n[9],W=n[10],Y=n[11],o[0]=d=n[0],o[1]=m,o[2]=v,o[3]=_,o[4]=b,o[5]=E,o[6]=P,o[7]=z,o[8]=D,o[9]=N,o[10]=W,o[11]=Y,o[12]=d*ee+b*se+D*de+n[12],o[13]=m*ee+E*se+N*de+n[13],o[14]=v*ee+P*se+W*de+n[14],o[15]=_*ee+z*se+Y*de+n[15]),o},f.I=lv,f.J=function(o,n,s){var d=s[0],m=s[1],v=s[2];return o[0]=n[0]*d,o[1]=n[1]*d,o[2]=n[2]*d,o[3]=n[3]*d,o[4]=n[4]*m,o[5]=n[5]*m,o[6]=n[6]*m,o[7]=n[7]*m,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.K=hb,f.L=function(o,n){const s={};for(let d=0;d<n.length;d++){const m=n[d];m in o&&(s[m]=o[m])}return s},f.M=bs,f.N=sw,f.O=lw,f.P=k,f.Q=Hi,f.R=Ui,f.S=j,f.T=dp,f.U=O,f.V=De,f.W=tn,f.X=F,f.Y=kp,f.Z=class extends ie{},f._=u,f.a=Ct,f.a$=function(o,n,s){return o[0]=n[0]*s[0],o[1]=n[1]*s[1],o[2]=n[2]*s[2],o[3]=n[3]*s[3],o},f.a0=vv,f.a1=Qe,f.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(s=>{n.onloadstart=()=>{s(n)};for(const d of o){const m=window.document.createElement("source");Yr(d)||(n.crossOrigin="Anonymous"),m.src=d,n.appendChild(m)}})},f.a3=function(){return be++},f.a4=Br,f.a5=Uc,f.a6=gd,f.a7=El,f.a8=Sr,f.a9=pw,f.aA=Ae,f.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let s=[];try{if(!Et(o.version,n.version))return[{command:"setStyle",args:[n]}];Et(o.center,n.center)||s.push({command:"setCenter",args:[n.center]}),Et(o.zoom,n.zoom)||s.push({command:"setZoom",args:[n.zoom]}),Et(o.bearing,n.bearing)||s.push({command:"setBearing",args:[n.bearing]}),Et(o.pitch,n.pitch)||s.push({command:"setPitch",args:[n.pitch]}),Et(o.sprite,n.sprite)||s.push({command:"setSprite",args:[n.sprite]}),Et(o.glyphs,n.glyphs)||s.push({command:"setGlyphs",args:[n.glyphs]}),Et(o.transition,n.transition)||s.push({command:"setTransition",args:[n.transition]}),Et(o.light,n.light)||s.push({command:"setLight",args:[n.light]}),Et(o.terrain,n.terrain)||s.push({command:"setTerrain",args:[n.terrain]}),Et(o.sky,n.sky)||s.push({command:"setSky",args:[n.sky]});const d={},m=[];(function(_,b,E,P){let z;for(z in b=b||{},_=_||{})Object.prototype.hasOwnProperty.call(_,z)&&(Object.prototype.hasOwnProperty.call(b,z)||ln(z,E,P));for(z in b)Object.prototype.hasOwnProperty.call(b,z)&&(Object.prototype.hasOwnProperty.call(_,z)?Et(_[z],b[z])||(_[z].type==="geojson"&&b[z].type==="geojson"&&ui(_,b,z)?Mt(E,{command:"setGeoJSONSourceData",args:[z,b[z].data]}):ci(z,b,E,P)):sr(z,b,E))})(o.sources,n.sources,m,d);const v=[];o.layers&&o.layers.forEach(_=>{"source"in _&&d[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)}),s=s.concat(m),function(_,b,E){b=b||[];const P=(_=_||[]).map(yr),z=b.map(yr),D=_.reduce(Ur,{}),N=b.reduce(Ur,{}),W=P.slice(),Y=Object.create(null);let ee,se,de,Se,pe;for(let we=0,je=0;we<P.length;we++)ee=P[we],Object.prototype.hasOwnProperty.call(N,ee)?je++:(Mt(E,{command:"removeLayer",args:[ee]}),W.splice(W.indexOf(ee,je),1));for(let we=0,je=0;we<z.length;we++)ee=z[z.length-1-we],W[W.length-1-we]!==ee&&(Object.prototype.hasOwnProperty.call(D,ee)?(Mt(E,{command:"removeLayer",args:[ee]}),W.splice(W.lastIndexOf(ee,W.length-je),1)):je++,Se=W[W.length-we],Mt(E,{command:"addLayer",args:[N[ee],Se]}),W.splice(W.length-we,0,ee),Y[ee]=!0);for(let we=0;we<z.length;we++)if(ee=z[we],se=D[ee],de=N[ee],!Y[ee]&&!Et(se,de))if(Et(se.source,de.source)&&Et(se["source-layer"],de["source-layer"])&&Et(se.type,de.type)){for(pe in yn(se.layout,de.layout,E,ee,null,"setLayoutProperty"),yn(se.paint,de.paint,E,ee,null,"setPaintProperty"),Et(se.filter,de.filter)||Mt(E,{command:"setFilter",args:[ee,de.filter]}),Et(se.minzoom,de.minzoom)&&Et(se.maxzoom,de.maxzoom)||Mt(E,{command:"setLayerZoomRange",args:[ee,de.minzoom,de.maxzoom]}),se)Object.prototype.hasOwnProperty.call(se,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?yn(se[pe],de[pe],E,ee,pe.slice(6),"setPaintProperty"):Et(se[pe],de[pe])||Mt(E,{command:"setLayerProperty",args:[ee,pe,de[pe]]}));for(pe in de)Object.prototype.hasOwnProperty.call(de,pe)&&!Object.prototype.hasOwnProperty.call(se,pe)&&pe!=="layout"&&pe!=="paint"&&pe!=="filter"&&pe!=="metadata"&&pe!=="minzoom"&&pe!=="maxzoom"&&(pe.indexOf("paint.")===0?yn(se[pe],de[pe],E,ee,pe.slice(6),"setPaintProperty"):Et(se[pe],de[pe])||Mt(E,{command:"setLayerProperty",args:[ee,pe,de[pe]]}))}else Mt(E,{command:"removeLayer",args:[ee]}),Se=W[W.lastIndexOf(ee)+1],Mt(E,{command:"addLayer",args:[de,Se]})}(v,n.layers,s)}catch(d){console.warn("Unable to compute style diff:",d),s=[{command:"setStyle",args:[n]}]}return s},f.aC=function(o){const n=[],s=o.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},f.aD=function o(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let d=0;d<n.length;d++)if(!o(n[d],s[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const d in n)if(!o(n[d],s[d]))return!1;return!0}return n===s},f.aE=Ee,f.aF=ke,f.aG=class extends wl{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},f.aH=mp,f.aI=class extends wl{constructor(o,n){super(o,n),this.current=Lk}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},f.aJ=tb,f.aK=class extends wl{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},f.aL=class extends wl{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},f.aM=rb,f.aN=function(o,n,s,d,m,v,_){var b=1/(n-s),E=1/(d-m),P=1/(v-_);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*E,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*P,o[11]=0,o[12]=(n+s)*b,o[13]=(m+d)*E,o[14]=(_+v)*P,o[15]=1,o},f.aO=cr,f.aP=jk,f.aQ=class extends Ke{},f.aR=R3,f.aS=class extends tt{},f.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},f.aU=yb,f.aV=Ra,f.aW=class extends Pt{},f.aX=ps,f.aY=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},f.aZ=function(o,n){var s=o[0],d=o[1],m=o[2],v=o[3],_=o[4],b=o[5],E=o[6],P=o[7],z=o[8],D=o[9],N=o[10],W=o[11],Y=o[12],ee=o[13],se=o[14],de=o[15],Se=n[0],pe=n[1],we=n[2],je=n[3],We=n[4],ct=n[5],mt=n[6],at=n[7],ot=n[8],ht=n[9],vt=n[10],st=n[11],Ge=n[12],pt=n[13],ft=n[14],Vt=n[15];return Math.abs(s-Se)<=Qn*Math.max(1,Math.abs(s),Math.abs(Se))&&Math.abs(d-pe)<=Qn*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(m-we)<=Qn*Math.max(1,Math.abs(m),Math.abs(we))&&Math.abs(v-je)<=Qn*Math.max(1,Math.abs(v),Math.abs(je))&&Math.abs(_-We)<=Qn*Math.max(1,Math.abs(_),Math.abs(We))&&Math.abs(b-ct)<=Qn*Math.max(1,Math.abs(b),Math.abs(ct))&&Math.abs(E-mt)<=Qn*Math.max(1,Math.abs(E),Math.abs(mt))&&Math.abs(P-at)<=Qn*Math.max(1,Math.abs(P),Math.abs(at))&&Math.abs(z-ot)<=Qn*Math.max(1,Math.abs(z),Math.abs(ot))&&Math.abs(D-ht)<=Qn*Math.max(1,Math.abs(D),Math.abs(ht))&&Math.abs(N-vt)<=Qn*Math.max(1,Math.abs(N),Math.abs(vt))&&Math.abs(W-st)<=Qn*Math.max(1,Math.abs(W),Math.abs(st))&&Math.abs(Y-Ge)<=Qn*Math.max(1,Math.abs(Y),Math.abs(Ge))&&Math.abs(ee-pt)<=Qn*Math.max(1,Math.abs(ee),Math.abs(pt))&&Math.abs(se-ft)<=Qn*Math.max(1,Math.abs(se),Math.abs(ft))&&Math.abs(de-Vt)<=Qn*Math.max(1,Math.abs(de),Math.abs(Vt))},f.a_=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},f.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,m,v)=>{const _=m||v;return n[d]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},f.ab=function(o,n){const s=[];for(const d in o)d in n||s.push(d);return s},f.ac=ne,f.ad=function(o,n,s){var d=Math.sin(s),m=Math.cos(s),v=n[0],_=n[1],b=n[2],E=n[3],P=n[4],z=n[5],D=n[6],N=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*m+P*d,o[1]=_*m+z*d,o[2]=b*m+D*d,o[3]=E*m+N*d,o[4]=P*m-v*d,o[5]=z*m-_*d,o[6]=D*m-b*d,o[7]=N*m-E*d,o},f.ae=function(o){var n=new Fc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},f.af=_p,f.ag=function(o,n){let s=0,d=0;if(o.kind==="constant")d=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:_}=o,b=m?ne(fi.interpolationFactor(m,n,v,_),0,1):0;o.kind==="camera"?d=Bn.number(o.minSize,o.maxSize,b):s=b}return{uSizeT:s,uSize:d}},f.ai=function(o,{uSize:n,uSizeT:s},{lowerSize:d,upperSize:m}){return o.kind==="source"?d/ua:o.kind==="composite"?Bn.number(d/ua,m/ua,s):n},f.aj=hv,f.ak=function(o,n,s,d){const m=n.y-o.y,v=n.x-o.x,_=d.y-s.y,b=d.x-s.x,E=_*v-b*m;if(E===0)return null;const P=(b*(o.y-s.y)-_*(o.x-s.x))/E;return new k(o.x+P*v,o.y+P*m)},f.al=vw,f.am=ab,f.an=Gy,f.ao=hn,f.aq=dv,f.ar=function(o,n){var s=n[0],d=n[1],m=n[2],v=n[3],_=n[4],b=n[5],E=n[6],P=n[7],z=n[8],D=n[9],N=n[10],W=n[11],Y=n[12],ee=n[13],se=n[14],de=n[15],Se=s*b-d*_,pe=s*E-m*_,we=s*P-v*_,je=d*E-m*b,We=d*P-v*b,ct=m*P-v*E,mt=z*ee-D*Y,at=z*se-N*Y,ot=z*de-W*Y,ht=D*se-N*ee,vt=D*de-W*ee,st=N*de-W*se,Ge=Se*st-pe*vt+we*ht+je*ot-We*at+ct*mt;return Ge?(o[0]=(b*st-E*vt+P*ht)*(Ge=1/Ge),o[1]=(m*vt-d*st-v*ht)*Ge,o[2]=(ee*ct-se*We+de*je)*Ge,o[3]=(N*We-D*ct-W*je)*Ge,o[4]=(E*ot-_*st-P*at)*Ge,o[5]=(s*st-m*ot+v*at)*Ge,o[6]=(se*we-Y*ct-de*pe)*Ge,o[7]=(z*ct-N*we+W*pe)*Ge,o[8]=(_*vt-b*ot+P*mt)*Ge,o[9]=(d*ot-s*vt-v*mt)*Ge,o[10]=(Y*We-ee*we+de*Se)*Ge,o[11]=(D*we-z*We-W*Se)*Ge,o[12]=(b*at-_*ht-E*mt)*Ge,o[13]=(s*ht-d*at+m*mt)*Ge,o[14]=(ee*pe-Y*je-se*Se)*Ge,o[15]=(z*je-D*pe+N*Se)*Ge,o):null},f.as=xv,f.at=uv,f.au=bv,f.av=function(){const o={},n=ze.$version;for(const s in ze.$root){const d=ze.$root[s];if(d.required){let m=null;m=s==="version"?n:d.type==="array"?[]:{},m!=null&&(o[s]=m)}}return o},f.aw=lp,f.ax=zt,f.ay=function(o){o=o.slice();const n=Object.create(null);for(let s=0;s<o.length;s++)n[o[s].id]=o[s];for(let s=0;s<o.length;s++)"ref"in o[s]&&(o[s]=Sn(o[s],n[o[s].ref]));return o},f.az=function(o){if(o.type==="custom")return new nA(o);switch(o.type){case"background":return new eA(o);case"circle":return new Vk(o);case"fill":return new o3(o);case"fill-extrusion":return new x3(o);case"heatmap":return new Hk(o);case"hillshade":return new Gk(o);case"line":return new P3(o);case"raster":return new rA(o);case"symbol":return new Mp(o)}},f.b=Pe,f.b0=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},f.b1=oe,f.b2=dw,f.b3=cw,f.b4=function(o,n,s,d,m){var v,_=1/Math.tan(n/2);return o[0]=_/s,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,m!=null&&m!==1/0?(o[10]=(m+d)*(v=1/(d-m)),o[14]=2*m*d*v):(o[10]=-1,o[14]=-2*d),o},f.b5=function(o,n,s){var d=Math.sin(s),m=Math.cos(s),v=n[4],_=n[5],b=n[6],E=n[7],P=n[8],z=n[9],D=n[10],N=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*m+P*d,o[5]=_*m+z*d,o[6]=b*m+D*d,o[7]=E*m+N*d,o[8]=P*m-v*d,o[9]=z*m-_*d,o[10]=D*m-b*d,o[11]=N*m-E*d,o},f.b6=$,f.b7=J,f.b8=function(o){return o*Math.PI/180},f.b9=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},f.bA=zo,f.ba=class extends re{},f.bb=gv,f.bc=pA,f.be=Nt,f.bf=function(o,n){Ct.REGISTERED_PROTOCOLS[o]=n},f.bg=function(o){delete Ct.REGISTERED_PROTOCOLS[o]},f.bh=function(o,n){const s={};for(let m=0;m<o.length;m++){const v=n&&n[o[m].id]||xd(o[m]);n&&(n[o[m].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(o[m])}const d=[];for(const m in s)d.push(s[m]);return d},f.bi=dt,f.bj=fw,f.bk=mw,f.bl=Gb,f.bm=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=tn/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],s=n.layout,d=n._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Sr(o.bucket.zoom+1),o.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Sr(o.bucket.zoom+1),o.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Sr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:z}=o.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Sr(P),o.canonical),d["text-size"].possiblyEvaluate(new Sr(z),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:z}=o.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Sr(P),o.canonical),d["icon-size"].possiblyEvaluate(new Sr(z),o.canonical)]}const v=s.get("text-line-height")*hn,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),E=s.get("text-size");for(const P of o.bucket.features){const z=s.get("text-font").evaluate(P,{},o.canonical).join(","),D=E.evaluate(P,{},o.canonical),N=m.layoutTextSize.evaluate(P,{},o.canonical),W=m.layoutIconSize.evaluate(P,{},o.canonical),Y={horizontal:{},vertical:void 0},ee=P.text;let se,de=[0,0];if(ee){const we=ee.toString(),je=s.get("text-letter-spacing").evaluate(P,{},o.canonical)*hn,We=cp(we)?je:0,ct=s.get("text-anchor").evaluate(P,{},o.canonical),mt=Iw(n,P,o.canonical);if(!mt){const st=s.get("text-radial-offset").evaluate(P,{},o.canonical);de=st?Tw(ct,[st*hn,_v]):s.get("text-offset").evaluate(P,{},o.canonical).map(Ge=>Ge*hn)}let at=_?"center":s.get("text-justify").evaluate(P,{},o.canonical);const ot=s.get("symbol-placement"),ht=ot==="point"?s.get("text-max-width").evaluate(P,{},o.canonical)*hn:0,vt=()=>{o.bucket.allowVerticalPlacement&&Rd(we)&&(Y.vertical=Tp(ee,o.glyphMap,o.glyphPositions,o.imagePositions,z,ht,v,ct,"left",We,de,f.ah.vertical,!0,ot,N,D))};if(!_&&mt){const st=new Set;if(at==="auto")for(let pt=0;pt<mt.values.length;pt+=2)st.add(xv(mt.values[pt]));else st.add(at);let Ge=!1;for(const pt of st)if(!Y.horizontal[pt])if(Ge)Y.horizontal[pt]=Y.horizontal[0];else{const ft=Tp(ee,o.glyphMap,o.glyphPositions,o.imagePositions,z,ht,v,"center",pt,We,de,f.ah.horizontal,!1,ot,N,D);ft&&(Y.horizontal[pt]=ft,Ge=ft.positionedLines.length===1)}vt()}else{at==="auto"&&(at=xv(ct));const st=Tp(ee,o.glyphMap,o.glyphPositions,o.imagePositions,z,ht,v,ct,at,We,de,f.ah.horizontal,!1,ot,N,D);st&&(Y.horizontal[at]=st),vt(),Rd(we)&&_&&b&&(Y.vertical=Tp(ee,o.glyphMap,o.glyphPositions,o.imagePositions,z,ht,v,ct,at,We,de,f.ah.vertical,!1,ot,N,D))}}let Se=!1;if(P.icon&&P.icon.name){const we=o.imageMap[P.icon.name];we&&(se=K3(o.imagePositions[P.icon.name],s.get("icon-offset").evaluate(P,{},o.canonical),s.get("icon-anchor").evaluate(P,{},o.canonical)),Se=!!we.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Se:o.bucket.sdfIcons!==Se&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(we.pixelRatio!==o.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const pe=Mw(Y.horizontal)||Y.vertical;o.bucket.iconsInText=!!pe&&pe.iconsInText,(pe||se)&&hA(o.bucket,P,Y,se,o.imageMap,m,N,W,de,Se,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},f.bn=iv,f.bo=tv,f.bp=nv,f.bq=vs,f.br=av,f.bs=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},f.bt=function(o,n,s,d,m){return u(this,void 0,void 0,function*(){if(O())try{return yield De(o,n,s,d,m)}catch{}return function(v,_,b,E,P){const z=v.width,D=v.height;$e&&Ve||($e=new OffscreenCanvas(z,D),Ve=$e.getContext("2d",{willReadFrequently:!0})),$e.width=z,$e.height=D,Ve.drawImage(v,0,0,z,D);const N=Ve.getImageData(_,b,E,P);return Ve.clearRect(0,0,z,D),N.data}(o,n,s,d,m)})},f.bu=hw,f.bv=w,f.bw=C,f.bx=Fb,f.by=Mc,f.bz=function(o){return o.message===Ze},f.c=gt,f.d=o=>u(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.e=le,f.f=o=>new Promise((n,s)=>{const d=new Image;d.onload=()=>{n(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=xe})},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(o)],{type:"image/png"});d.src=o.byteLength?URL.createObjectURL(m):xe}),f.g=Ht,f.h=(o,n)=>Lr(le(o,{type:"json"}),n),f.i=Je,f.j=er,f.k=Xt,f.l=(o,n)=>Lr(le(o,{type:"arrayBuffer"}),n),f.m=Lr,f.n=function(o){return new av(o).readFields(U3,[])},f.o=Hd,f.p=Wb,f.q=g,f.r=np,f.s=Yr,f.t=ap,f.u=lt,f.v=ze,f.w=He,f.x=gl,f.y=function([o,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(s),y:o*Math.sin(n)*Math.sin(s),z:o*Math.cos(s)}},f.z=Bn}),l("worker",["./shared"],function(f){class u{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,U){for(const ae of B){this._layerConfigs[ae.id]=ae;const ge=this._layers[ae.id]=f.az(ae);ge._featureFilter=f.a6(ge.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of U)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const H=f.bh(Object.values(this._layerConfigs),this.keyCache);for(const ae of H){const ge=ae.map(Ne=>this._layers[Ne.id]),fe=ge[0];if(fe.visibility==="none")continue;const ye=fe.source||"";let he=this.familiesBySource[ye];he||(he=this.familiesBySource[ye]={});const Ce=fe.sourceLayer||"_geojsonTileLayer";let Ue=he[Ce];Ue||(Ue=he[Ce]=[]),Ue.push(ge)}}}class w{constructor(B){const U={},H=[];for(const ye in B){const he=B[ye],Ce=U[ye]={};for(const Ue in he){const Ne=he[+Ue];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const Be={x:0,y:0,w:Ne.bitmap.width+2,h:Ne.bitmap.height+2};H.push(Be),Ce[Ue]={rect:Be,metrics:Ne.metrics}}}const{w:ae,h:ge}=f.p(H),fe=new f.o({width:ae||1,height:ge||1});for(const ye in B){const he=B[ye];for(const Ce in he){const Ue=he[+Ce];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const Ne=U[ye][Ce].rect;f.o.copy(Ue.bitmap,fe,{x:0,y:0},{x:Ne.x+1,y:Ne.y+1},Ue.bitmap)}}this.image=fe,this.positions=U}}f.bi("GlyphAtlas",w);class C{constructor(B){this.tileID=new f.Q(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[]}parse(B,U,H,ae){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=B,this.collisionBoxArray=new f.a4;const ge=new f.bj(Object.keys(B.layers).sort()),fe=new f.bk(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const ye={},he={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:H},Ce=U.familiesBySource[this.source];for(const Wt in Ce){const Tr=B.layers[Wt];if(!Tr)continue;Tr.version===1&&f.w(`Vector tile source "${this.source}" layer "${Wt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const cn=ge.encode(Wt),Mn=[];for(let Ii=0;Ii<Tr.length;Ii++){const Or=Tr.feature(Ii),ts=fe.getId(Or,Wt);Mn.push({feature:Or,id:ts,index:Ii,sourceLayerIndex:cn})}for(const Ii of Ce[Wt]){const Or=Ii[0];Or.source!==this.source&&f.w(`layer.source = ${Or.source} does not equal this.source = ${this.source}`),Or.minzoom&&this.zoom<Math.floor(Or.minzoom)||Or.maxzoom&&this.zoom>=Or.maxzoom||Or.visibility!=="none"&&(I(Ii,this.zoom,H),(ye[Or.id]=Or.createBucket({index:fe.bucketLayerIDs.length,layers:Ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:cn,sourceID:this.source})).populate(Mn,he,this.tileID.canonical),fe.bucketLayerIDs.push(Ii.map(ts=>ts.id)))}}const Ue=f.aE(he.glyphDependencies,Wt=>Object.keys(Wt).map(Number));this.inFlightDependencies.forEach(Wt=>Wt==null?void 0:Wt.abort()),this.inFlightDependencies=[];let Ne=Promise.resolve({});if(Object.keys(Ue).length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),Ne=ae.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},Wt)}const Be=Object.keys(he.iconDependencies);let xt=Promise.resolve({});if(Be.length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),xt=ae.sendAsync({type:"GI",data:{icons:Be,source:this.source,tileID:this.tileID,type:"icons"}},Wt)}const wt=Object.keys(he.patternDependencies);let Lt=Promise.resolve({});if(wt.length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),Lt=ae.sendAsync({type:"GI",data:{icons:wt,source:this.source,tileID:this.tileID,type:"patterns"}},Wt)}const[At,Kt,Jt]=yield Promise.all([Ne,xt,Lt]),vr=new w(At),Qr=new f.bl(Kt,Jt);for(const Wt in ye){const Tr=ye[Wt];Tr instanceof f.a5?(I(Tr.layers,this.zoom,H),f.bm({bucket:Tr,glyphMap:At,glyphPositions:vr.positions,imageMap:Kt,imagePositions:Qr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tr.hasPattern&&(Tr instanceof f.bn||Tr instanceof f.bo||Tr instanceof f.bp)&&(I(Tr.layers,this.zoom,H),Tr.addFeatures(he,this.tileID.canonical,Qr.patternPositions))}return this.status="done",{buckets:Object.values(ye).filter(Wt=>!Wt.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:vr.image,imageAtlas:Qr,glyphMap:this.returnDependencies?At:null,iconMap:this.returnDependencies?Kt:null,glyphPositions:this.returnDependencies?vr.positions:null}})}}function I(Q,B,U){const H=new f.a8(B);for(const ae of Q)ae.recalculate(H,U)}class k{constructor(B,U,H){this.actor=B,this.layerIndex=U,this.availableImages=H,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(B,U){return f._(this,void 0,void 0,function*(){const H=yield f.l(B.request,U);try{return{vectorTile:new f.bq.VectorTile(new f.br(H.data)),rawData:H.data,cacheControl:H.cacheControl,expires:H.expires}}catch(ae){const ge=new Uint8Array(H.data);let fe=`Unable to parse the tile at ${B.request.url}, `;throw fe+=ge[0]===31&&ge[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.messge}`,new Error(fe)}})}loadTile(B){return f._(this,void 0,void 0,function*(){const U=B.uid,H=!!(B&&B.request&&B.request.collectResourceTiming)&&new f.bs(B.request),ae=new C(B);this.loading[U]=ae;const ge=new AbortController;ae.abort=ge;try{const fe=yield this.loadVectorTile(B,ge);if(delete this.loading[U],!fe)return null;const ye=fe.rawData,he={};fe.expires&&(he.expires=fe.expires),fe.cacheControl&&(he.cacheControl=fe.cacheControl);const Ce={};if(H){const Ne=H.finish();Ne&&(Ce.resourceTiming=JSON.parse(JSON.stringify(Ne)))}ae.vectorTile=fe.vectorTile;const Ue=ae.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[U]=ae,this.fetching[U]={rawTileData:ye,cacheControl:he,resourceTiming:Ce};try{const Ne=yield Ue;return f.e({rawTileData:ye.slice(0)},Ne,he,Ce)}finally{delete this.fetching[U]}}catch(fe){throw delete this.loading[U],ae.status="done",this.loaded[U]=ae,fe}})}reloadTile(B){return f._(this,void 0,void 0,function*(){const U=B.uid;if(!this.loaded||!this.loaded[U])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const H=this.loaded[U];if(H.showCollisionBoxes=B.showCollisionBoxes,H.status==="parsing"){const ae=yield H.parse(H.vectorTile,this.layerIndex,this.availableImages,this.actor);let ge;if(this.fetching[U]){const{rawTileData:fe,cacheControl:ye,resourceTiming:he}=this.fetching[U];delete this.fetching[U],ge=f.e({rawTileData:fe.slice(0)},ae,ye,he)}else ge=ae;return ge}if(H.status==="done"&&H.vectorTile)return H.parse(H.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(B){return f._(this,void 0,void 0,function*(){const U=this.loading,H=B.uid;U&&U[H]&&U[H].abort&&(U[H].abort.abort(),delete U[H])})}removeTile(B){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[B.uid]&&delete this.loaded[B.uid]})}}class A{constructor(){this.loaded={}}loadTile(B){return f._(this,void 0,void 0,function*(){const{uid:U,encoding:H,rawImageData:ae,redFactor:ge,greenFactor:fe,blueFactor:ye,baseShift:he}=B,Ce=ae.width+2,Ue=ae.height+2,Ne=f.b(ae)?new f.R({width:Ce,height:Ue},yield f.bt(ae,-1,-1,Ce,Ue)):ae,Be=new f.bu(U,Ne,H,ge,fe,ye,he);return this.loaded=this.loaded||{},this.loaded[U]=Be,Be})}removeTile(B){const U=this.loaded,H=B.uid;U&&U[H]&&delete U[H]}}function q(Q,B){if(Q.length!==0){G(Q[0],B);for(var U=1;U<Q.length;U++)G(Q[U],!B)}}function G(Q,B){for(var U=0,H=0,ae=0,ge=Q.length,fe=ge-1;ae<ge;fe=ae++){var ye=(Q[ae][0]-Q[fe][0])*(Q[fe][1]+Q[ae][1]),he=U+ye;H+=Math.abs(U)>=Math.abs(ye)?U-he+ye:ye-he+U,U=he}U+H>=0!=!!B&&Q.reverse()}var Z=f.bv(function Q(B,U){var H,ae=B&&B.type;if(ae==="FeatureCollection")for(H=0;H<B.features.length;H++)Q(B.features[H],U);else if(ae==="GeometryCollection")for(H=0;H<B.geometries.length;H++)Q(B.geometries[H],U);else if(ae==="Feature")Q(B.geometry,U);else if(ae==="Polygon")q(B.coordinates,U);else if(ae==="MultiPolygon")for(H=0;H<B.coordinates.length;H++)q(B.coordinates[H],U);return B});const K=f.bq.VectorTileFeature.prototype.toGeoJSON;var j={exports:{}},O=f.bw,$=f.bq.VectorTileFeature,J=ne;function ne(Q,B){this.options=B||{},this.features=Q,this.length=Q.length}function oe(Q,B){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=B||4096}ne.prototype.feature=function(Q){return new oe(this.features[Q],this.options.extent)},oe.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var B=0;B<Q.length;B++){for(var U=Q[B],H=[],ae=0;ae<U.length;ae++)H.push(new O(U[ae][0],U[ae][1]));this.geometry.push(H)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,B=1/0,U=-1/0,H=1/0,ae=-1/0,ge=0;ge<Q.length;ge++)for(var fe=Q[ge],ye=0;ye<fe.length;ye++){var he=fe[ye];B=Math.min(B,he.x),U=Math.max(U,he.x),H=Math.min(H,he.y),ae=Math.max(ae,he.y)}return[B,H,U,ae]},oe.prototype.toGeoJSON=$.prototype.toGeoJSON;var le=f.bx,be=J;function Ee(Q){var B=new le;return function(U,H){for(var ae in U.layers)H.writeMessage(3,ke,U.layers[ae])}(Q,B),B.finish()}function ke(Q,B){var U;B.writeVarintField(15,Q.version||1),B.writeStringField(1,Q.name||""),B.writeVarintField(5,Q.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(U=0;U<Q.length;U++)H.feature=Q.feature(U),B.writeMessage(2,Ae,H);var ae=H.keys;for(U=0;U<ae.length;U++)B.writeStringField(3,ae[U]);var ge=H.values;for(U=0;U<ge.length;U++)B.writeMessage(4,Oe,ge[U])}function Ae(Q,B){var U=Q.feature;U.id!==void 0&&B.writeVarintField(1,U.id),B.writeMessage(2,Ye,Q),B.writeVarintField(3,U.type),B.writeMessage(4,Je,U)}function Ye(Q,B){var U=Q.feature,H=Q.keys,ae=Q.values,ge=Q.keycache,fe=Q.valuecache;for(var ye in U.properties){var he=U.properties[ye],Ce=ge[ye];if(he!==null){Ce===void 0&&(H.push(ye),ge[ye]=Ce=H.length-1),B.writeVarint(Ce);var Ue=typeof he;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(he=JSON.stringify(he));var Ne=Ue+":"+he,Be=fe[Ne];Be===void 0&&(ae.push(he),fe[Ne]=Be=ae.length-1),B.writeVarint(Be)}}}function He(Q,B){return(B<<3)+(7&Q)}function Le(Q){return Q<<1^Q>>31}function Je(Q,B){for(var U=Q.loadGeometry(),H=Q.type,ae=0,ge=0,fe=U.length,ye=0;ye<fe;ye++){var he=U[ye],Ce=1;H===1&&(Ce=he.length),B.writeVarint(He(1,Ce));for(var Ue=H===3?he.length-1:he.length,Ne=0;Ne<Ue;Ne++){Ne===1&&H!==1&&B.writeVarint(He(2,Ue-1));var Be=he[Ne].x-ae,xt=he[Ne].y-ge;B.writeVarint(Le(Be)),B.writeVarint(Le(xt)),ae+=Be,ge+=xt}H===3&&B.writeVarint(He(7,1))}}function Oe(Q,B){var U=typeof Q;U==="string"?B.writeStringField(1,Q):U==="boolean"?B.writeBooleanField(7,Q):U==="number"&&(Q%1!=0?B.writeDoubleField(3,Q):Q<0?B.writeSVarintField(6,Q):B.writeVarintField(5,Q))}j.exports=Ee,j.exports.fromVectorTileJs=Ee,j.exports.fromGeojsonVt=function(Q,B){B=B||{};var U={};for(var H in Q)U[H]=new be(Q[H].features,B),U[H].name=H,U[H].version=B.version,U[H].extent=B.extent;return Ee({layers:U})},j.exports.GeoJSONWrapper=be;var Pe=f.bv(j.exports);const xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},De=Math.fround||($e=new Float32Array(1),Q=>($e[0]=+Q,$e[0]));var $e;const Ve=3,Ze=5,gt=6;class Ct{constructor(B){this.options=Object.assign(Object.create(xe),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){const{log:U,minZoom:H,maxZoom:ae}=this.options;U&&console.time("total time");const ge=`prepare ${B.length} points`;U&&console.time(ge),this.points=B;const fe=[];for(let he=0;he<B.length;he++){const Ce=B[he];if(!Ce.geometry)continue;const[Ue,Ne]=Ce.geometry.coordinates,Be=De(Nt(Ue)),xt=De(zt(Ne));fe.push(Be,xt,1/0,he,-1,1),this.options.reduce&&fe.push(0)}let ye=this.trees[ae+1]=this._createTree(fe);U&&console.timeEnd(ge);for(let he=ae;he>=H;he--){const Ce=+Date.now();ye=this.trees[he]=this._createTree(this._cluster(ye,he)),U&&console.log("z%d: %d clusters in %dms",he,ye.numItems,+Date.now()-Ce)}return U&&console.timeEnd("total time"),this}getClusters(B,U){let H=((B[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,B[1]));let ge=B[2]===180?180:((B[2]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)H=-180,ge=180;else if(H>ge){const Ne=this.getClusters([H,ae,180,fe],U),Be=this.getClusters([-180,ae,ge,fe],U);return Ne.concat(Be)}const ye=this.trees[this._limitZoom(U)],he=ye.range(Nt(H),zt(fe),Nt(ge),zt(ae)),Ce=ye.data,Ue=[];for(const Ne of he){const Be=this.stride*Ne;Ue.push(Ce[Be+Ze]>1?Ht(Ce,Be,this.clusterProps):this.points[Ce[Be+Ve]])}return Ue}getChildren(B){const U=this._getOriginId(B),H=this._getOriginZoom(B),ae="No cluster with the specified id.",ge=this.trees[H];if(!ge)throw new Error(ae);const fe=ge.data;if(U*this.stride>=fe.length)throw new Error(ae);const ye=this.options.radius/(this.options.extent*Math.pow(2,H-1)),he=ge.within(fe[U*this.stride],fe[U*this.stride+1],ye),Ce=[];for(const Ue of he){const Ne=Ue*this.stride;fe[Ne+4]===B&&Ce.push(fe[Ne+Ze]>1?Ht(fe,Ne,this.clusterProps):this.points[fe[Ne+Ve]])}if(Ce.length===0)throw new Error(ae);return Ce}getLeaves(B,U,H){const ae=[];return this._appendLeaves(ae,B,U=U||10,H=H||0,0),ae}getTile(B,U,H){const ae=this.trees[this._limitZoom(B)],ge=Math.pow(2,B),{extent:fe,radius:ye}=this.options,he=ye/fe,Ce=(H-he)/ge,Ue=(H+1+he)/ge,Ne={features:[]};return this._addTileFeatures(ae.range((U-he)/ge,Ce,(U+1+he)/ge,Ue),ae.data,U,H,ge,Ne),U===0&&this._addTileFeatures(ae.range(1-he/ge,Ce,1,Ue),ae.data,ge,H,ge,Ne),U===ge-1&&this._addTileFeatures(ae.range(0,Ce,he/ge,Ue),ae.data,-1,H,ge,Ne),Ne.features.length?Ne:null}getClusterExpansionZoom(B){let U=this._getOriginZoom(B)-1;for(;U<=this.options.maxZoom;){const H=this.getChildren(B);if(U++,H.length!==1)break;B=H[0].properties.cluster_id}return U}_appendLeaves(B,U,H,ae,ge){const fe=this.getChildren(U);for(const ye of fe){const he=ye.properties;if(he&&he.cluster?ge+he.point_count<=ae?ge+=he.point_count:ge=this._appendLeaves(B,he.cluster_id,H,ae,ge):ge<ae?ge++:B.push(ye),B.length===H)break}return ge}_createTree(B){const U=new f.au(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let H=0;H<B.length;H+=this.stride)U.add(B[H],B[H+1]);return U.finish(),U.data=B,U}_addTileFeatures(B,U,H,ae,ge,fe){for(const ye of B){const he=ye*this.stride,Ce=U[he+Ze]>1;let Ue,Ne,Be;if(Ce)Ue=Ut(U,he,this.clusterProps),Ne=U[he],Be=U[he+1];else{const Lt=this.points[U[he+Ve]];Ue=Lt.properties;const[At,Kt]=Lt.geometry.coordinates;Ne=Nt(At),Be=zt(Kt)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Ne*ge-H)),Math.round(this.options.extent*(Be*ge-ae))]],tags:Ue};let wt;wt=Ce||this.options.generateId?U[he+Ve]:this.points[U[he+Ve]].id,wt!==void 0&&(xt.id=wt),fe.features.push(xt)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,U){const{radius:H,extent:ae,reduce:ge,minPoints:fe}=this.options,ye=H/(ae*Math.pow(2,U)),he=B.data,Ce=[],Ue=this.stride;for(let Ne=0;Ne<he.length;Ne+=Ue){if(he[Ne+2]<=U)continue;he[Ne+2]=U;const Be=he[Ne],xt=he[Ne+1],wt=B.within(he[Ne],he[Ne+1],ye),Lt=he[Ne+Ze];let At=Lt;for(const Kt of wt){const Jt=Kt*Ue;he[Jt+2]>U&&(At+=he[Jt+Ze])}if(At>Lt&&At>=fe){let Kt,Jt=Be*Lt,vr=xt*Lt,Qr=-1;const Wt=((Ne/Ue|0)<<5)+(U+1)+this.points.length;for(const Tr of wt){const cn=Tr*Ue;if(he[cn+2]<=U)continue;he[cn+2]=U;const Mn=he[cn+Ze];Jt+=he[cn]*Mn,vr+=he[cn+1]*Mn,he[cn+4]=Wt,ge&&(Kt||(Kt=this._map(he,Ne,!0),Qr=this.clusterProps.length,this.clusterProps.push(Kt)),ge(Kt,this._map(he,cn)))}he[Ne+4]=Wt,Ce.push(Jt/At,vr/At,1/0,Wt,-1,At),ge&&Ce.push(Qr)}else{for(let Kt=0;Kt<Ue;Kt++)Ce.push(he[Ne+Kt]);if(At>1)for(const Kt of wt){const Jt=Kt*Ue;if(!(he[Jt+2]<=U)){he[Jt+2]=U;for(let vr=0;vr<Ue;vr++)Ce.push(he[Jt+vr])}}}}return Ce}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,U,H){if(B[U+Ze]>1){const fe=this.clusterProps[B[U+gt]];return H?Object.assign({},fe):fe}const ae=this.points[B[U+Ve]].properties,ge=this.options.map(ae);return H&&ge===ae?Object.assign({},ge):ge}}function Ht(Q,B,U){return{type:"Feature",id:Q[B+Ve],properties:Ut(Q,B,U),geometry:{type:"Point",coordinates:[(H=Q[B],360*(H-.5)),Lr(Q[B+1])]}};var H}function Ut(Q,B,U){const H=Q[B+Ze],ae=H>=1e4?`${Math.round(H/1e3)}k`:H>=1e3?Math.round(H/100)/10+"k":H,ge=Q[B+gt],fe=ge===-1?{}:Object.assign({},U[ge]);return Object.assign(fe,{cluster:!0,cluster_id:Q[B+Ve],point_count:H,point_count_abbreviated:ae})}function Nt(Q){return Q/360+.5}function zt(Q){const B=Math.sin(Q*Math.PI/180),U=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return U<0?0:U>1?1:U}function Lr(Q){const B=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function Yr(Q,B,U,H){for(var ae,ge=H,fe=U-B>>1,ye=U-B,he=Q[B],Ce=Q[B+1],Ue=Q[U],Ne=Q[U+1],Be=B+3;Be<U;Be+=3){var xt=xr(Q[Be],Q[Be+1],he,Ce,Ue,Ne);if(xt>ge)ae=Be,ge=xt;else if(xt===ge){var wt=Math.abs(Be-fe);wt<ye&&(ae=Be,ye=wt)}}ge>H&&(ae-B>3&&Yr(Q,B,ae,H),Q[ae+2]=ge,U-ae>3&&Yr(Q,ae,U,H))}function xr(Q,B,U,H,ae,ge){var fe=ae-U,ye=ge-H;if(fe!==0||ye!==0){var he=((Q-U)*fe+(B-H)*ye)/(fe*fe+ye*ye);he>1?(U=ae,H=ge):he>0&&(U+=fe*he,H+=ye*he)}return(fe=Q-U)*fe+(ye=B-H)*ye}function Cr(Q,B,U,H){var ae={id:Q===void 0?null:Q,type:B,geometry:U,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var fe=ge.geometry,ye=ge.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Xt(ge,fe);else if(ye==="Polygon"||ye==="MultiLineString")for(var he=0;he<fe.length;he++)Xt(ge,fe[he]);else if(ye==="MultiPolygon")for(he=0;he<fe.length;he++)for(var Ce=0;Ce<fe[he].length;Ce++)Xt(ge,fe[he][Ce])}(ae),ae}function Xt(Q,B){for(var U=0;U<B.length;U+=3)Q.minX=Math.min(Q.minX,B[U]),Q.minY=Math.min(Q.minY,B[U+1]),Q.maxX=Math.max(Q.maxX,B[U]),Q.maxY=Math.max(Q.maxY,B[U+1])}function er(Q,B,U,H){if(B.geometry){var ae=B.geometry.coordinates,ge=B.geometry.type,fe=Math.pow(U.tolerance/((1<<U.maxZoom)*U.extent),2),ye=[],he=B.id;if(U.promoteId?he=B.properties[U.promoteId]:U.generateId&&(he=H||0),ge==="Point")br(ae,ye);else if(ge==="MultiPoint")for(var Ce=0;Ce<ae.length;Ce++)br(ae[Ce],ye);else if(ge==="LineString")ze(ae,ye,fe,!1);else if(ge==="MultiLineString"){if(U.lineMetrics){for(Ce=0;Ce<ae.length;Ce++)ze(ae[Ce],ye=[],fe,!1),Q.push(Cr(he,"LineString",ye,B.properties));return}kr(ae,ye,fe,!1)}else if(ge==="Polygon")kr(ae,ye,fe,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(Ce=0;Ce<B.geometry.geometries.length;Ce++)er(Q,{id:he,geometry:B.geometry.geometries[Ce],properties:B.properties},U,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ce=0;Ce<ae.length;Ce++){var Ue=[];kr(ae[Ce],Ue,fe,!0),ye.push(Ue)}}Q.push(Cr(he,ge,ye,B.properties))}}function br(Q,B){B.push(Sn(Q[0])),B.push(Et(Q[1])),B.push(0)}function ze(Q,B,U,H){for(var ae,ge,fe=0,ye=0;ye<Q.length;ye++){var he=Sn(Q[ye][0]),Ce=Et(Q[ye][1]);B.push(he),B.push(Ce),B.push(0),ye>0&&(fe+=H?(ae*Ce-he*ge)/2:Math.sqrt(Math.pow(he-ae,2)+Math.pow(Ce-ge,2))),ae=he,ge=Ce}var Ue=B.length-3;B[2]=1,Yr(B,0,Ue,U),B[Ue+2]=1,B.size=Math.abs(fe),B.start=0,B.end=B.size}function kr(Q,B,U,H){for(var ae=0;ae<Q.length;ae++){var ge=[];ze(Q[ae],ge,U,H),B.push(ge)}}function Sn(Q){return Q/360+.5}function Et(Q){var B=Math.sin(Q*Math.PI/180),U=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return U<0?0:U>1?1:U}function Mt(Q,B,U,H,ae,ge,fe,ye){if(H/=B,ge>=(U/=B)&&fe<H)return Q;if(fe<U||ge>=H)return null;for(var he=[],Ce=0;Ce<Q.length;Ce++){var Ue=Q[Ce],Ne=Ue.geometry,Be=Ue.type,xt=ae===0?Ue.minX:Ue.minY,wt=ae===0?Ue.maxX:Ue.maxY;if(xt>=U&&wt<H)he.push(Ue);else if(!(wt<U||xt>=H)){var Lt=[];if(Be==="Point"||Be==="MultiPoint")sr(Ne,Lt,U,H,ae);else if(Be==="LineString")ln(Ne,Lt,U,H,ae,!1,ye.lineMetrics);else if(Be==="MultiLineString")ui(Ne,Lt,U,H,ae,!1);else if(Be==="Polygon")ui(Ne,Lt,U,H,ae,!0);else if(Be==="MultiPolygon")for(var At=0;At<Ne.length;At++){var Kt=[];ui(Ne[At],Kt,U,H,ae,!0),Kt.length&&Lt.push(Kt)}if(Lt.length){if(ye.lineMetrics&&Be==="LineString"){for(At=0;At<Lt.length;At++)he.push(Cr(Ue.id,Be,Lt[At],Ue.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(Lt.length===1?(Be="LineString",Lt=Lt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=Lt.length===3?"Point":"MultiPoint"),he.push(Cr(Ue.id,Be,Lt,Ue.tags))}}}return he.length?he:null}function sr(Q,B,U,H,ae){for(var ge=0;ge<Q.length;ge+=3){var fe=Q[ge+ae];fe>=U&&fe<=H&&(B.push(Q[ge]),B.push(Q[ge+1]),B.push(Q[ge+2]))}}function ln(Q,B,U,H,ae,ge,fe){for(var ye,he,Ce=ci(Q),Ue=ae===0?yr:Ur,Ne=Q.start,Be=0;Be<Q.length-3;Be+=3){var xt=Q[Be],wt=Q[Be+1],Lt=Q[Be+2],At=Q[Be+3],Kt=Q[Be+4],Jt=ae===0?xt:wt,vr=ae===0?At:Kt,Qr=!1;fe&&(ye=Math.sqrt(Math.pow(xt-At,2)+Math.pow(wt-Kt,2))),Jt<U?vr>U&&(he=Ue(Ce,xt,wt,At,Kt,U),fe&&(Ce.start=Ne+ye*he)):Jt>H?vr<H&&(he=Ue(Ce,xt,wt,At,Kt,H),fe&&(Ce.start=Ne+ye*he)):yn(Ce,xt,wt,Lt),vr<U&&Jt>=U&&(he=Ue(Ce,xt,wt,At,Kt,U),Qr=!0),vr>H&&Jt<=H&&(he=Ue(Ce,xt,wt,At,Kt,H),Qr=!0),!ge&&Qr&&(fe&&(Ce.end=Ne+ye*he),B.push(Ce),Ce=ci(Q)),fe&&(Ne+=ye)}var Wt=Q.length-3;xt=Q[Wt],wt=Q[Wt+1],Lt=Q[Wt+2],(Jt=ae===0?xt:wt)>=U&&Jt<=H&&yn(Ce,xt,wt,Lt),Wt=Ce.length-3,ge&&Wt>=3&&(Ce[Wt]!==Ce[0]||Ce[Wt+1]!==Ce[1])&&yn(Ce,Ce[0],Ce[1],Ce[2]),Ce.length&&B.push(Ce)}function ci(Q){var B=[];return B.size=Q.size,B.start=Q.start,B.end=Q.end,B}function ui(Q,B,U,H,ae,ge){for(var fe=0;fe<Q.length;fe++)ln(Q[fe],B,U,H,ae,ge,!1)}function yn(Q,B,U,H){Q.push(B),Q.push(U),Q.push(H)}function yr(Q,B,U,H,ae,ge){var fe=(ge-B)/(H-B);return Q.push(ge),Q.push(U+(ae-U)*fe),Q.push(1),fe}function Ur(Q,B,U,H,ae,ge){var fe=(ge-U)/(ae-U);return Q.push(B+(H-B)*fe),Q.push(ge),Q.push(1),fe}function Qe(Q,B){for(var U=[],H=0;H<Q.length;H++){var ae,ge=Q[H],fe=ge.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")ae=Jr(ge.geometry,B);else if(fe==="MultiLineString"||fe==="Polygon"){ae=[];for(var ye=0;ye<ge.geometry.length;ye++)ae.push(Jr(ge.geometry[ye],B))}else if(fe==="MultiPolygon")for(ae=[],ye=0;ye<ge.geometry.length;ye++){for(var he=[],Ce=0;Ce<ge.geometry[ye].length;Ce++)he.push(Jr(ge.geometry[ye][Ce],B));ae.push(he)}U.push(Cr(ge.id,fe,ae,ge.tags))}return U}function Jr(Q,B){var U=[];U.size=Q.size,Q.start!==void 0&&(U.start=Q.start,U.end=Q.end);for(var H=0;H<Q.length;H+=3)U.push(Q[H]+B,Q[H+1],Q[H+2]);return U}function Hr(Q,B){if(Q.transformed)return Q;var U,H,ae,ge=1<<Q.z,fe=Q.x,ye=Q.y;for(U=0;U<Q.features.length;U++){var he=Q.features[U],Ce=he.geometry,Ue=he.type;if(he.geometry=[],Ue===1)for(H=0;H<Ce.length;H+=2)he.geometry.push(co(Ce[H],Ce[H+1],B,ge,fe,ye));else for(H=0;H<Ce.length;H++){var Ne=[];for(ae=0;ae<Ce[H].length;ae+=2)Ne.push(co(Ce[H][ae],Ce[H][ae+1],B,ge,fe,ye));he.geometry.push(Ne)}}return Q.transformed=!0,Q}function co(Q,B,U,H,ae,ge){return[Math.round(U*(Q*H-ae)),Math.round(U*(B*H-ge))]}function Ti(Q,B,U,H,ae){for(var ge=B===ae.maxZoom?0:ae.tolerance/((1<<B)*ae.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:U,y:H,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<Q.length;ye++){fe.numFeatures++,et(fe,Q[ye],ge,ae);var he=Q[ye].minX,Ce=Q[ye].minY,Ue=Q[ye].maxX,Ne=Q[ye].maxY;he<fe.minX&&(fe.minX=he),Ce<fe.minY&&(fe.minY=Ce),Ue>fe.maxX&&(fe.maxX=Ue),Ne>fe.maxY&&(fe.maxY=Ne)}return fe}function et(Q,B,U,H){var ae=B.geometry,ge=B.type,fe=[];if(ge==="Point"||ge==="MultiPoint")for(var ye=0;ye<ae.length;ye+=3)fe.push(ae[ye]),fe.push(ae[ye+1]),Q.numPoints++,Q.numSimplified++;else if(ge==="LineString")Ot(fe,ae,Q,U,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(ye=0;ye<ae.length;ye++)Ot(fe,ae[ye],Q,U,ge==="Polygon",ye===0);else if(ge==="MultiPolygon")for(var he=0;he<ae.length;he++){var Ce=ae[he];for(ye=0;ye<Ce.length;ye++)Ot(fe,Ce[ye],Q,U,!0,ye===0)}if(fe.length){var Ue=B.tags||null;if(ge==="LineString"&&H.lineMetrics){for(var Ne in Ue={},B.tags)Ue[Ne]=B.tags[Ne];Ue.mapbox_clip_start=ae.start/ae.size,Ue.mapbox_clip_end=ae.end/ae.size}var Be={geometry:fe,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Ue};B.id!==null&&(Be.id=B.id),Q.features.push(Be)}}function Ot(Q,B,U,H,ae,ge){var fe=H*H;if(H>0&&B.size<(ae?fe:H))U.numPoints+=B.length/3;else{for(var ye=[],he=0;he<B.length;he+=3)(H===0||B[he+2]>fe)&&(U.numSimplified++,ye.push(B[he]),ye.push(B[he+1])),U.numPoints++;ae&&function(Ce,Ue){for(var Ne=0,Be=0,xt=Ce.length,wt=xt-2;Be<xt;wt=Be,Be+=2)Ne+=(Ce[Be]-Ce[wt])*(Ce[Be+1]+Ce[wt+1]);if(Ne>0===Ue)for(Be=0,xt=Ce.length;Be<xt/2;Be+=2){var Lt=Ce[Be],At=Ce[Be+1];Ce[Be]=Ce[xt-2-Be],Ce[Be+1]=Ce[xt-1-Be],Ce[xt-2-Be]=Lt,Ce[xt-1-Be]=At}}(ye,ge),Q.push(ye)}}function kt(Q,B){var U=(B=this.options=function(ae,ge){for(var fe in ge)ae[fe]=ge[fe];return ae}(Object.create(this.options),B)).debug;if(U&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(ae,ge){var fe=[];if(ae.type==="FeatureCollection")for(var ye=0;ye<ae.features.length;ye++)er(fe,ae.features[ye],ge,ye);else er(fe,ae.type==="Feature"?ae:{geometry:ae},ge);return fe}(Q,B);this.tiles={},this.tileCoords=[],U&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),H=function(ae,ge){var fe=ge.buffer/ge.extent,ye=ae,he=Mt(ae,1,-1-fe,fe,0,-1,2,ge),Ce=Mt(ae,1,1-fe,2+fe,0,-1,2,ge);return(he||Ce)&&(ye=Mt(ae,1,-fe,1+fe,0,-1,2,ge)||[],he&&(ye=Qe(he,1).concat(ye)),Ce&&(ye=ye.concat(Qe(Ce,-1)))),ye}(H,B),H.length&&this.splitTile(H,0,0,0),U&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wr(Q,B,U){return 32*((1<<Q)*U+B)+Q}function Gr(Q,B){return B?Q.properties[B]:Q.id}function It(Q,B){if(Q==null)return!0;if(Q.type==="Feature")return Gr(Q,B)!=null;if(Q.type==="FeatureCollection"){const U=new Set;for(const H of Q.features){const ae=Gr(H,B);if(ae==null||U.has(ae))return!1;U.add(ae)}return!0}return!1}function Cn(Q,B){const U=new Map;if(Q!=null)if(Q.type==="Feature")U.set(Gr(Q,B),Q);else for(const H of Q.features)U.set(Gr(H,B),H);return U}kt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},kt.prototype.splitTile=function(Q,B,U,H,ae,ge,fe){for(var ye=[Q,B,U,H],he=this.options,Ce=he.debug;ye.length;){H=ye.pop(),U=ye.pop(),B=ye.pop(),Q=ye.pop();var Ue=1<<B,Ne=Wr(B,U,H),Be=this.tiles[Ne];if(!Be&&(Ce>1&&console.time("creation"),Be=this.tiles[Ne]=Ti(Q,B,U,H,he),this.tileCoords.push({z:B,x:U,y:H}),Ce)){Ce>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,U,H,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));var xt="z"+B;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(Be.source=Q,ae){if(B===he.maxZoom||B===ae)continue;var wt=1<<ae-B;if(U!==Math.floor(ge/wt)||H!==Math.floor(fe/wt))continue}else if(B===he.indexMaxZoom||Be.numPoints<=he.indexMaxPoints)continue;if(Be.source=null,Q.length!==0){Ce>1&&console.time("clipping");var Lt,At,Kt,Jt,vr,Qr,Wt=.5*he.buffer/he.extent,Tr=.5-Wt,cn=.5+Wt,Mn=1+Wt;Lt=At=Kt=Jt=null,vr=Mt(Q,Ue,U-Wt,U+cn,0,Be.minX,Be.maxX,he),Qr=Mt(Q,Ue,U+Tr,U+Mn,0,Be.minX,Be.maxX,he),Q=null,vr&&(Lt=Mt(vr,Ue,H-Wt,H+cn,1,Be.minY,Be.maxY,he),At=Mt(vr,Ue,H+Tr,H+Mn,1,Be.minY,Be.maxY,he),vr=null),Qr&&(Kt=Mt(Qr,Ue,H-Wt,H+cn,1,Be.minY,Be.maxY,he),Jt=Mt(Qr,Ue,H+Tr,H+Mn,1,Be.minY,Be.maxY,he),Qr=null),Ce>1&&console.timeEnd("clipping"),ye.push(Lt||[],B+1,2*U,2*H),ye.push(At||[],B+1,2*U,2*H+1),ye.push(Kt||[],B+1,2*U+1,2*H),ye.push(Jt||[],B+1,2*U+1,2*H+1)}}},kt.prototype.getTile=function(Q,B,U){var H=this.options,ae=H.extent,ge=H.debug;if(Q<0||Q>24)return null;var fe=1<<Q,ye=Wr(Q,B=(B%fe+fe)%fe,U);if(this.tiles[ye])return Hr(this.tiles[ye],ae);ge>1&&console.log("drilling down to z%d-%d-%d",Q,B,U);for(var he,Ce=Q,Ue=B,Ne=U;!he&&Ce>0;)Ce--,Ue=Math.floor(Ue/2),Ne=Math.floor(Ne/2),he=this.tiles[Wr(Ce,Ue,Ne)];return he&&he.source?(ge>1&&console.log("found parent tile z%d-%d-%d",Ce,Ue,Ne),ge>1&&console.time("drilling down"),this.splitTile(he.source,Ce,Ue,Ne,Q,B,U),ge>1&&console.timeEnd("drilling down"),this.tiles[ye]?Hr(this.tiles[ye],ae):null):null};class Xn extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(B,U){return f._(this,void 0,void 0,function*(){const H=B.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ae=this._geoJSONIndex.getTile(H.z,H.x,H.y);if(!ae)return null;const ge=new class{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.W,this.length=ye.length,this._features=ye}feature(ye){return new class{constructor(he){this._feature=he,this.extent=f.W,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const Ce of this._feature.geometry)he.push([new f.P(Ce[0],Ce[1])]);return he}{const he=[];for(const Ce of this._feature.geometry){const Ue=[];for(const Ne of Ce)Ue.push(new f.P(Ne[0],Ne[1]));he.push(Ue)}return he}}toGeoJSON(he,Ce,Ue){return K.call(this,he,Ce,Ue)}}(this._features[ye])}}(ae.features);let fe=Pe(ge);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:ge,rawData:fe.buffer}})}loadData(B){return f._(this,void 0,void 0,function*(){var U;(U=this._pendingRequest)===null||U===void 0||U.abort();const H=!!(B&&B.request&&B.request.collectResourceTiming)&&new f.bs(B.request);this._pendingRequest=new AbortController;try{let ae=yield this.loadGeoJSON(B,this._pendingRequest);if(delete this._pendingRequest,typeof ae!="object")throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(Z(ae,!0),B.filter){const fe=f.by(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(fe.result==="error")throw new Error(fe.value.map(he=>`${he.key}: ${he.message}`).join(", "));ae={type:"FeatureCollection",features:ae.features.filter(he=>fe.value.evaluate({zoom:0},he))}}this._geoJSONIndex=B.cluster?new Ct(function({superclusterOptions:fe,clusterProperties:ye}){if(!ye||!fe)return fe;const he={},Ce={},Ue={accumulated:null,zoom:0},Ne={properties:null},Be=Object.keys(ye);for(const xt of Be){const[wt,Lt]=ye[xt],At=f.by(Lt),Kt=f.by(typeof wt=="string"?[wt,["accumulated"],["get",xt]]:wt);he[xt]=At.value,Ce[xt]=Kt.value}return fe.map=xt=>{Ne.properties=xt;const wt={};for(const Lt of Be)wt[Lt]=he[Lt].evaluate(Ue,Ne);return wt},fe.reduce=(xt,wt)=>{Ne.properties=wt;for(const Lt of Be)Ue.accumulated=xt[Lt],xt[Lt]=Ce[Lt].evaluate(Ue,Ne)},fe}(B)).load(ae.features):function(fe,ye){return new kt(fe,ye)}(ae,B.geojsonVtOptions),this.loaded={};const ge={};if(H){const fe=H.finish();fe&&(ge.resourceTiming={},ge.resourceTiming[B.source]=JSON.parse(JSON.stringify(fe)))}return ge}catch(ae){if(delete this._pendingRequest,f.bz(ae))return{abandoned:!0};throw ae}})}reloadTile(B){const U=this.loaded;return U&&U[B.uid]?super.reloadTile(B):this.loadTile(B)}loadGeoJSON(B,U){return f._(this,void 0,void 0,function*(){const{promoteId:H}=B;if(B.request){const ae=yield f.h(B.request,U);return this._dataUpdateable=It(ae.data,H)?Cn(ae.data,H):void 0,ae.data}if(typeof B.data=="string")try{const ae=JSON.parse(B.data);return this._dataUpdateable=It(ae,H)?Cn(ae,H):void 0,ae}catch{throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`)}if(!B.dataDiff)throw new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${B.source}`);return function(ae,ge,fe){var ye,he,Ce,Ue;if(ge.removeAll&&ae.clear(),ge.remove)for(const Ne of ge.remove)ae.delete(Ne);if(ge.add)for(const Ne of ge.add){const Be=Gr(Ne,fe);Be!=null&&ae.set(Be,Ne)}if(ge.update)for(const Ne of ge.update){let Be=ae.get(Ne.id);if(Be==null)continue;const xt=!Ne.removeAllProperties&&(((ye=Ne.removeProperties)===null||ye===void 0?void 0:ye.length)>0||((he=Ne.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((Ne.newGeometry||Ne.removeAllProperties||xt)&&(Be=Object.assign({},Be),ae.set(Ne.id,Be),xt&&(Be.properties=Object.assign({},Be.properties))),Ne.newGeometry&&(Be.geometry=Ne.newGeometry),Ne.removeAllProperties)Be.properties={};else if(((Ce=Ne.removeProperties)===null||Ce===void 0?void 0:Ce.length)>0)for(const wt of Ne.removeProperties)Object.prototype.hasOwnProperty.call(Be.properties,wt)&&delete Be.properties[wt];if(((Ue=Ne.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:wt,value:Lt}of Ne.addOrUpdateProperties)Be.properties[wt]=Lt}}(this._dataUpdateable,B.dataDiff,H),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(B){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(B){return this._geoJSONIndex.getClusterExpansionZoom(B.clusterId)}getClusterChildren(B){return this._geoJSONIndex.getChildren(B.clusterId)}getClusterLeaves(B){return this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset)}}class Er{constructor(B){this.self=B,this.actor=new f.C(B),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(U,H)=>{if(this.externalWorkerSourceTypes[U])throw new Error(`Worker source with name "${U}" already registered.`);this.externalWorkerSourceTypes[U]=H},this.self.addProtocol=f.bf,this.self.removeProtocol=f.bg,this.self.registerRTLTextPlugin=U=>{if(f.bA.isParsed())throw new Error("RTL text plugin already registered.");f.bA.setMethods(U)},this.actor.registerMessageHandler("LDT",(U,H)=>this._getDEMWorkerSource(U,H.source).loadTile(H)),this.actor.registerMessageHandler("RDT",(U,H)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(U,H.source).removeTile(H)})),this.actor.registerMessageHandler("GCEZ",(U,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(U,H.type,H.source).getClusterExpansionZoom(H)})),this.actor.registerMessageHandler("GCC",(U,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(U,H.type,H.source).getClusterChildren(H)})),this.actor.registerMessageHandler("GCL",(U,H)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(U,H.type,H.source).getClusterLeaves(H)})),this.actor.registerMessageHandler("LD",(U,H)=>this._getWorkerSource(U,H.type,H.source).loadData(H)),this.actor.registerMessageHandler("LT",(U,H)=>this._getWorkerSource(U,H.type,H.source).loadTile(H)),this.actor.registerMessageHandler("RT",(U,H)=>this._getWorkerSource(U,H.type,H.source).reloadTile(H)),this.actor.registerMessageHandler("AT",(U,H)=>this._getWorkerSource(U,H.type,H.source).abortTile(H)),this.actor.registerMessageHandler("RMT",(U,H)=>this._getWorkerSource(U,H.type,H.source).removeTile(H)),this.actor.registerMessageHandler("RS",(U,H)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[U]||!this.workerSources[U][H.type]||!this.workerSources[U][H.type][H.source])return;const ae=this.workerSources[U][H.type][H.source];delete this.workerSources[U][H.type][H.source],ae.removeSource!==void 0&&ae.removeSource(H)})),this.actor.registerMessageHandler("RM",U=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[U],delete this.availableImages[U],delete this.workerSources[U],delete this.demWorkerSources[U]})),this.actor.registerMessageHandler("SR",(U,H)=>f._(this,void 0,void 0,function*(){this.referrer=H})),this.actor.registerMessageHandler("SRPS",(U,H)=>this._syncRTLPluginState(U,H)),this.actor.registerMessageHandler("IS",(U,H)=>f._(this,void 0,void 0,function*(){this.self.importScripts(H)})),this.actor.registerMessageHandler("SI",(U,H)=>this._setImages(U,H)),this.actor.registerMessageHandler("UL",(U,H)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(U).update(H.layers,H.removedIds)})),this.actor.registerMessageHandler("SL",(U,H)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(U).replace(H)}))}_setImages(B,U){return f._(this,void 0,void 0,function*(){this.availableImages[B]=U;for(const H in this.workerSources[B]){const ae=this.workerSources[B][H];for(const ge in ae)ae[ge].availableImages=U}})}_syncRTLPluginState(B,U){return f._(this,void 0,void 0,function*(){if(f.bA.isParsed())return f.bA.getState();if(U.pluginStatus!=="loading")return f.bA.setState(U),U;const H=U.pluginURL;if(this.self.importScripts(H),f.bA.isParsed()){const ae={pluginStatus:"loaded",pluginURL:H};return f.bA.setState(ae),ae}throw f.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${H}`)})}_getAvailableImages(B){let U=this.availableImages[B];return U||(U=[]),U}_getLayerIndex(B){let U=this.layerIndexes[B];return U||(U=this.layerIndexes[B]=new u),U}_getWorkerSource(B,U,H){if(this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][U]||(this.workerSources[B][U]={}),!this.workerSources[B][U][H]){const ae={sendAsync:(ge,fe)=>(ge.targetMapId=B,this.actor.sendAsync(ge,fe))};switch(U){case"vector":this.workerSources[B][U][H]=new k(ae,this._getLayerIndex(B),this._getAvailableImages(B));break;case"geojson":this.workerSources[B][U][H]=new Xn(ae,this._getLayerIndex(B),this._getAvailableImages(B));break;default:this.workerSources[B][U][H]=new this.externalWorkerSourceTypes[U](ae,this._getLayerIndex(B),this._getAvailableImages(B))}}return this.workerSources[B][U][H]}_getDEMWorkerSource(B,U){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][U]||(this.demWorkerSources[B][U]=new A),this.demWorkerSources[B][U]}}return f.i(self)&&(self.worker=new Er(self)),Er}),l("index",["exports","./shared"],function(f,u){var w="4.2.0";let C,I;const k={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((i,c)=>{const p=requestAnimationFrame(i);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),c(u.c())})}),getImageData(y,i=0){return this.getImageCanvasContext(y).getImageData(-i,-i,y.width+2*i,y.height+2*i)},getImageCanvasContext(y){const i=window.document.createElement("canvas"),c=i.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return i.width=y.width,i.height=y.height,c.drawImage(y,0,0,y.width,y.height),c},resolveURL:y=>(C||(C=document.createElement("a")),C.href=y,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class A{static testProp(i){if(!A.docStyle)return i[0];for(let c=0;c<i.length;c++)if(i[c]in A.docStyle)return i[c];return i[0]}static create(i,c,p){const g=window.document.createElement(i);return c!==void 0&&(g.className=c),p&&p.appendChild(g),g}static createNS(i,c){return window.document.createElementNS(i,c)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(i,c){i.style[A.transformProp]=c}static addEventListener(i,c,p,g={}){i.addEventListener(c,p,"passive"in g?g:g.capture)}static removeEventListener(i,c,p,g={}){i.removeEventListener(c,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(i){const c=i.getBoundingClientRect();return{x:c.width/i.offsetWidth||1,y:c.height/i.offsetHeight||1,boundingClientRect:c}}static getPoint(i,c,p){const g=c.boundingClientRect;return new u.P((p.clientX-g.left)/c.x-i.clientLeft,(p.clientY-g.top)/c.y-i.clientTop)}static mousePos(i,c){const p=A.getScale(i);return A.getPoint(i,p,c)}static touchPos(i,c){const p=[],g=A.getScale(i);for(let x=0;x<c.length;x++)p.push(A.getPoint(i,g,c[x]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const q={supported:!1,testSupport:function(y){!K&&Z&&(j?O(y):G=y)}};let G,Z,K=!1,j=!1;function O(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Z),y.isContextLost())return;q.supported=!0}catch{}y.deleteTexture(i),K=!0}var $;typeof document<"u"&&(Z=document.createElement("img"),Z.onload=()=>{G&&O(G),G=null,j=!0},Z.onerror=()=>{K=!0,G=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,c,p,g;y.resetRequestQueue=()=>{i=[],c=0,p=0,g={}},y.addThrottleControl=M=>{const R=p++;return g[R]=M,R},y.removeThrottleControl=M=>{delete g[M],S()},y.getImage=(M,R,F=!0)=>new Promise((V,X)=>{q.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),i.push({abortController:R,requestParameters:M,supportImageRefresh:F,state:"queued",onError:re=>{X(re)},onSuccess:re=>{V(re)}}),S()});const x=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:R,supportImageRefresh:F,onError:V,onSuccess:X,abortController:re}=M,ie=F===!1&&!u.i(self)&&!u.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce((me,Te)=>me&&Te==="accept",!0));c++;const ce=ie?T(R,re):u.m(R,re);try{const me=yield ce;delete M.abortController,M.state="completed",me.data instanceof HTMLImageElement||u.b(me.data)?X(me):me.data&&X({data:yield(te=me.data,typeof createImageBitmap=="function"?u.d(te):u.f(te)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete M.abortController,V(me)}finally{c--,S()}var te}),S=()=>{const M=(()=>{for(const R of Object.keys(g))if(g[R]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=c;R<M&&i.length>0;R++){const F=i.shift();F.abortController.signal.aborted?R--:x(F)}},T=(M,R)=>new Promise((F,V)=>{const X=new Image,re=M.url,ie=M.credentials;ie&&ie==="include"?X.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!u.s(re))&&(X.crossOrigin="anonymous"),R.signal.addEventListener("abort",()=>{X.src="",V(u.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,F({data:X})},X.onerror=()=>{X.onerror=X.onload=null,R.signal.aborted||V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=re})}($||($={})),$.resetRequestQueue();class J{constructor(i){this._transformRequestFn=i}transformRequest(i,c){return this._transformRequestFn&&this._transformRequestFn(i,c)||{url:i}}normalizeSpriteURL(i,c,p){const g=function(x){const S=x.match(ne);if(!S)throw new Error(`Unable to parse URL "${x}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(i);return g.path+=`${c}${p}`,function(x){const S=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${S}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function oe(y){var i=new u.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var le,be=function(y,i,c){return y[0]=i[0]-c[0],y[1]=i[1]-c[1],y[2]=i[2]-c[2],y};le=new u.A(3),u.A!=Float32Array&&(le[0]=0,le[1]=0,le[2]=0);var Ee=function(y){var i=y[0],c=y[1];return i*i+c*c};function ke(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const c=[];for(const{id:p,url:g}of y){const x=`${p}${g}`;c.indexOf(x)===-1&&(c.push(x),i.push({id:p,url:g}))}}return i}(function(){var y=new u.A(2);u.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Ae{constructor(i,c,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(c,g)}update(i,c,p){const{width:g,height:x}=i,S=!(this.size&&this.size[0]===g&&this.size[1]===x||p),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(c&&c.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!c||c.premultiply!==!1)),S)this.size=[g,x],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,i):M.texImage2D(M.TEXTURE_2D,0,this.format,g,x,0,this.format,M.UNSIGNED_BYTE,i.data);else{const{x:R,y:F}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.b(i)?M.texSubImage2D(M.TEXTURE_2D,0,R,F,M.RGBA,M.UNSIGNED_BYTE,i):M.texSubImage2D(M.TEXTURE_2D,0,R,F,g,x,M.RGBA,M.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(i,c,p){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),p!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=x.LINEAR),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,p||i),this.filter=i),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ye(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class He extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(i){const c=this.images[i];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(i,c){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,c)&&(this.images[i]=c)}_validate(i,c){let p=!0;const g=c.data||c.spriteData;return this._validateStretch(c.stretchX,g&&g.width)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,g&&g.height)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,c){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||c<g[1])return!1;p=g[1]}return!0}_validateContent(i,c){if(!i)return!0;if(i.length!==4)return!1;const p=c.spriteData,g=p&&p.width||c.data.width,x=p&&p.height||c.data.height;return!(i[0]<0||g<i[0]||i[1]<0||x<i[1]||i[2]<0||g<i[2]||i[3]<0||x<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,c,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==c.data.width||g.data.height!==c.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=g.version+1,this.images[i]=c,this.updatedImages[i]=!0}removeImage(i){const c=this.images[i];delete this.images[i],delete this.patterns[i],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((c,p)=>{let g=!0;if(!this.isLoaded())for(const x of i)this.images[x]||(g=!1);this.isLoaded()||g?c(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:c})})}_getImagesForIds(i){const c={};for(const p of i){let g=this.getImage(p);g||(this.fire(new u.k("styleimagemissing",{id:p})),g=this.getImage(p)),g?c[p]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:i,height:c}=this.atlasImage;return{width:i,height:c}}getPattern(i){const c=this.patterns[i],p=this.getImage(i);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},x=new u.I(g,p);this.patterns[i]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const c=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ae(i,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const x in this.patterns)i.push(this.patterns[x].bin);const{w:c,h:p}=u.p(i),g=this.atlasImage;g.resize({width:c||1,height:p||1});for(const x in this.patterns){const{bin:S}=this.patterns[x],T=S.x+1,M=S.y+1,R=this.getImage(x).data,F=R.width,V=R.height;u.R.copy(R,g,{x:0,y:0},{x:T,y:M},{width:F,height:V}),u.R.copy(R,g,{x:0,y:V-1},{x:T,y:M-1},{width:F,height:1}),u.R.copy(R,g,{x:0,y:0},{x:T,y:M+V},{width:F,height:1}),u.R.copy(R,g,{x:F-1,y:0},{x:T-1,y:M},{width:1,height:V}),u.R.copy(R,g,{x:0,y:0},{x:T+F,y:M},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const c of i){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),Ye(p)&&this.updateImage(c,p)}}}const Le=1e20;function Je(y,i,c,p,g,x,S,T,M){for(let R=i;R<i+p;R++)Oe(y,c*x+R,x,g,S,T,M);for(let R=c;R<c+g;R++)Oe(y,R*x+i,1,p,S,T,M)}function Oe(y,i,c,p,g,x,S){x[0]=0,S[0]=-Le,S[1]=Le,g[0]=y[i];for(let T=1,M=0,R=0;T<p;T++){g[T]=y[i+T*c];const F=T*T;do{const V=x[M];R=(g[T]-g[V]+F-V*V)/(T-V)/2}while(R<=S[M]&&--M>-1);M++,x[M]=T,S[M]=R,S[M+1]=Le}for(let T=0,M=0;T<p;T++){for(;S[M+1]<T;)M++;const R=x[M],F=T-R;y[i+T*c]=g[R]+F*F}}class Pe{constructor(i,c){this.requestManager=i,this.localIdeographFontFamily=c,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return u._(this,void 0,void 0,function*(){const c=[];for(const x in i)for(const S of i[x])c.push(this._getAndCacheGlyphsPromise(x,S));const p=yield Promise.all(c),g={};for(const{stack:x,id:S,glyph:T}of p)g[x]||(g[x]={}),g[x][S]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return g})}_getAndCacheGlyphsPromise(i,c){return u._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let g=p.glyphs[c];if(g!==void 0)return{stack:i,id:c,glyph:g};if(g=this._tinySDF(p,i,c),g)return p.glyphs[c]=g,{stack:i,id:c,glyph:g};const x=Math.floor(c/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[x])return{stack:i,id:c,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[x]){const T=Pe.loadGlyphRange(i,x,this.url,this.requestManager);p.requests[x]=T}const S=yield p.requests[x];for(const T in S)this._doesCharSupportLocalGlyph(+T)||(p.glyphs[+T]=S[+T]);return p.ranges[x]=!0,{stack:i,id:c,glyph:S[c]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.u["CJK Unified Ideographs"](i)||u.u["Hangul Syllables"](i)||u.u.Hiragana(i)||u.u.Katakana(i))}_tinySDF(i,c,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let x=i.tinySDF;if(!x){let T="400";/bold/i.test(c)?T="900":/medium/i.test(c)?T="500":/light/i.test(c)&&(T="200"),x=i.tinySDF=new Pe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:T})}const S=x.draw(String.fromCharCode(p));return{id:p,bitmap:new u.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Pe.loadGlyphRange=function(y,i,c,p){return u._(this,void 0,void 0,function*(){const g=256*i,x=g+255,S=p.transformRequest(c.replace("{fontstack}",y).replace("{range}",`${g}-${x}`),"Glyphs"),T=yield u.l(S,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${i}, ${g}-${x}`);const M={};for(const R of u.n(T.data))M[R.id]=R;return M})},Pe.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:c=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=c;const T=this.size=y+4*i,M=this._createCanvas(T),R=this.ctx=M.getContext("2d",{willReadFrequently:!0});R.font=`${S} ${x} ${y}px ${g}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(y),S=Math.ceil(c),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),M=Math.min(this.size-this.buffer,S+Math.ceil(p)),R=T+2*this.buffer,F=M+2*this.buffer,V=Math.max(R*F,0),X=new Uint8ClampedArray(V),re={data:X,width:R,height:F,glyphWidth:T,glyphHeight:M,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(T===0||M===0)return re;const{ctx:ie,buffer:ce,gridInner:te,gridOuter:me}=this;ie.clearRect(ce,ce,T,M),ie.fillText(y,ce,ce+S);const Te=ie.getImageData(ce,ce,T,M);me.fill(Le,0,V),te.fill(0,0,V);for(let ue=0;ue<M;ue++)for(let _e=0;_e<T;_e++){const Ie=Te.data[4*(ue*T+_e)+3]/255;if(Ie===0)continue;const Re=(ue+ce)*R+_e+ce;if(Ie===1)me[Re]=0,te[Re]=Le;else{const Fe=.5-Ie;me[Re]=Fe>0?Fe*Fe:0,te[Re]=Fe<0?Fe*Fe:0}}Je(me,0,0,R,F,R,this.f,this.v,this.z),Je(te,ce,ce,T,M,R,this.f,this.v,this.z);for(let ue=0;ue<V;ue++){const _e=Math.sqrt(me[ue])-Math.sqrt(te[ue]);X[ue]=Math.round(255-255*(_e/this.radius+this.cutoff))}return re}};class xe{constructor(){this.specification=u.v.light.position}possiblyEvaluate(i,c){return u.y(i.expression.evaluate(c))}interpolate(i,c,p){return{x:u.z.number(i.x,c.x,p),y:u.z.number(i.y,c.y,p),z:u.z.number(i.z,c.z,p)}}}let De;class $e extends u.E{constructor(i){super(),De=De||new u.q({anchor:new u.D(u.v.light.anchor),position:new xe,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(De),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,c={}){if(!this._validate(u.r,i,c))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,c,p){return(!p||p.validate!==!1)&&u.t(this,i.call(u.x,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}class Ve{constructor(i,c){this.width=i,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,c){const p=i.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,c)),this.dashEntry[p]}getDashRanges(i,c,p){const g=[];let x=i.length%2==1?-i[i.length-1]*p:0,S=i[0]*p,T=!0;g.push({left:x,right:S,isDash:T,zeroLength:i[0]===0});let M=i[0];for(let R=1;R<i.length;R++){T=!T;const F=i[R];x=M*p,M+=F,S=M*p,g.push({left:x,right:S,isDash:T,zeroLength:F===0})}return g}addRoundDash(i,c,p){const g=c/2;for(let x=-p;x<=p;x++){const S=this.width*(this.nextRow+p+x);let T=0,M=i[T];for(let R=0;R<this.width;R++){R/M.right>1&&(M=i[++T]);const F=Math.abs(R-M.left),V=Math.abs(R-M.right),X=Math.min(F,V);let re;const ie=x/p*(g+1);if(M.isDash){const ce=g-Math.abs(ie);re=Math.sqrt(X*X+ce*ce)}else re=g-Math.sqrt(X*X+ie*ie);this.data[S+R]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(i){for(let T=i.length-1;T>=0;--T){const M=i[T],R=i[T+1];M.zeroLength?i.splice(T,1):R&&R.isDash===M.isDash&&(R.left=M.left,i.splice(T,1))}const c=i[0],p=i[i.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const g=this.width*this.nextRow;let x=0,S=i[x];for(let T=0;T<this.width;T++){T/S.right>1&&(S=i[++x]);const M=Math.abs(T-S.left),R=Math.abs(T-S.right),F=Math.min(M,R);this.data[g+T]=Math.max(0,Math.min(255,(S.isDash?F:-F)+128))}}addDash(i,c){const p=c?7:0,g=2*p+1;if(this.nextRow+g>this.height)return u.w("LineAtlas out of space"),null;let x=0;for(let T=0;T<i.length;T++)x+=i[T];if(x!==0){const T=this.width/x,M=this.getDashRanges(i,this.width,T);c?this.addRoundDash(M,T,p):this.addRegularDash(M)}const S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:x};return this.nextRow+=g,this.dirty=!0,S}bind(i){const c=i.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ze="maplibre_preloaded_worker_pool";class gt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<gt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ze]}numActive(){return Object.keys(this.active).length}}const Ct=Math.floor(k.hardwareConcurrency/2);let Ht,Ut;function Nt(){return Ht||(Ht=new gt),Ht}gt.workerCount=u.B(globalThis)?Math.max(Math.min(Ct,3),1):1;class zt{constructor(i,c){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let g=0;g<p.length;g++){const x=new u.C(p[g],c);x.name=`Worker ${g}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,c){const p=[];for(const g of this.actors)p.push(g.sendAsync({type:i,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,c){for(const p of this.actors)p.registerMessageHandler(i,c)}}function Lr(){return Ut||(Ut=new zt(Nt(),u.G),Ut.registerMessageHandler("GR",(y,i,c)=>u.m(i,c))),Ut}function Yr(y,i){const c=u.F();return u.H(c,c,[1,1,0]),u.J(c,c,[.5*y.width,.5*y.height,1]),u.K(c,c,y.calculatePosMatrix(i.toUnwrapped()))}function xr(y,i,c,p,g,x){const S=function(V,X,re){if(V)for(const ie of V){const ce=X[ie];if(ce&&ce.source===re&&ce.type==="fill-extrusion")return!0}else for(const ie in X){const ce=X[ie];if(ce.source===re&&ce.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),T=x.maxPitchScaleFactor(),M=y.tilesIn(p,T,S);M.sort(Cr);const R=[];for(const V of M)R.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(i,c,y._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,g,x,T,Yr(y.transform,V.tileID))});const F=function(V){const X={},re={};for(const ie of V){const ce=ie.queryResults,te=ie.wrappedTileID,me=re[te]=re[te]||{};for(const Te in ce){const ue=ce[Te],_e=me[Te]=me[Te]||{},Ie=X[Te]=X[Te]||[];for(const Re of ue)_e[Re.featureIndex]||(_e[Re.featureIndex]=!0,Ie.push(Re))}}return X}(R);for(const V in F)F[V].forEach(X=>{const re=X.feature,ie=y.getFeatureState(re.layer["source-layer"],re.id);re.source=re.layer.source,re.layer["source-layer"]&&(re.sourceLayer=re.layer["source-layer"]),re.state=ie});return F}function Cr(y,i){const c=y.tileID,p=i.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Xt(y,i,c){return u._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield u.h(i.transformRequest(y.url,"Source"),c)).data:yield k.frameAsync(c),!p)return null;const g=u.L(u.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(g.vectorLayerIds=p.vector_layers.map(x=>x.id)),g})}class er{constructor(i,c){i&&(c?this.setSouthWest(i).setNorthEast(c):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof u.M?new u.M(i.lng,i.lat):u.M.convert(i),this}setSouthWest(i){return this._sw=i instanceof u.M?new u.M(i.lng,i.lat):u.M.convert(i),this}extend(i){const c=this._sw,p=this._ne;let g,x;if(i instanceof u.M)g=i,x=i;else{if(!(i instanceof er))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(er.convert(i)):this.extend(u.M.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(u.M.convert(i)):this;if(g=i._sw,x=i._ne,!g||!x)return this}return c||p?(c.lng=Math.min(g.lng,c.lng),c.lat=Math.min(g.lat,c.lat),p.lng=Math.max(x.lng,p.lng),p.lat=Math.max(x.lat,p.lat)):(this._sw=new u.M(g.lng,g.lat),this._ne=new u.M(x.lng,x.lat)),this}getCenter(){return new u.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.M(this.getWest(),this.getNorth())}getSouthEast(){return new u.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:c,lat:p}=u.M.convert(i);let g=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof er?i:i&&new er(i)}static fromLngLat(i,c=0){const p=360*c/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new er(new u.M(i.lng-g,i.lat-p),new u.M(i.lng+g,i.lat+p))}}class br{constructor(i,c,p){this.bounds=er.convert(this.validateBounds(i)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const c=Math.pow(2,i.z),p=Math.floor(u.N(this.bounds.getWest())*c),g=Math.floor(u.O(this.bounds.getNorth())*c),x=Math.ceil(u.N(this.bounds.getEast())*c),S=Math.ceil(u.O(this.bounds.getSouth())*c);return i.x>=p&&i.x<x&&i.y>=g&&i.y<S}}class ze extends u.E{constructor(i,c,p,g){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.L(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(u.e(this,i),i.bounds&&(this.tileBounds=new br(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((x,S)=>{i.reloadPromise={resolve:x,reject:S}})}else i.actor=this.dispatcher.getActor(),g="LT";i.abortController=new AbortController;try{const x=yield i.actor.sendAsync({type:g,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,x)}catch(x){if(delete i.abortController,i.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,c){if(c&&c.resourceTiming&&(i.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&i.setExpiryData(c),i.loadVectorData(c,this.map.painter),i.reloadPromise){const p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class kr extends u.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.L(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(u.e(this,i),i.bounds&&(this.tileBounds=new br(i.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new u.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return u.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const p=yield $.getImage(this.map._requestManager.transformRequest(c,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const g=this.map.painter.context,x=g.gl,S=p.data;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new Ae(g,S,x.RGBA,{useMipmap:!0}),i.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Sn extends kr{constructor(i,c,p,g){super(i,c,p,g),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const g=yield $.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(g&&g.data){const x=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&i.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const S=u.b(x)&&u.S()?x:yield this.readImageNow(x),T={type:this.type,uid:i.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const M=yield i.actor.sendAsync({type:"LDT",data:T});i.dem=M,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(g){if(delete i.abortController,i.aborted)i.state="unloaded";else if(g)throw i.state="errored",g}})}readImageNow(i){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.U()){const c=i.width+2,p=i.height+2;try{return new u.R({width:c,height:p},yield u.V(i,-1,-1,c,p))}catch{}}return k.getImageData(i,1)})}_getNeighboringTiles(i){const c=i.canonical,p=Math.pow(2,c.z),g=(c.x-1+p)%p,x=c.x===0?i.wrap-1:i.wrap,S=(c.x+1+p)%p,T=c.x+1===p?i.wrap+1:i.wrap,M={};return M[new u.Q(i.overscaledZ,x,c.z,g,c.y).key]={backfilled:!1},M[new u.Q(i.overscaledZ,T,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(M[new u.Q(i.overscaledZ,x,c.z,g,c.y-1).key]={backfilled:!1},M[new u.Q(i.overscaledZ,i.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},M[new u.Q(i.overscaledZ,T,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<p&&(M[new u.Q(i.overscaledZ,x,c.z,g,c.y+1).key]={backfilled:!1},M[new u.Q(i.overscaledZ,i.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},M[new u.Q(i.overscaledZ,T,c.z,S,c.y+1).key]={backfilled:!1}),M}unloadTile(i){return u._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Et extends u.E{constructor(i,c,p,g){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const x=u.W/this.tileSize;this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*x,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*x,extent:u.W,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.W,radius:(c.clusterRadius||50)*x,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:c,offset:p}})}_updateWorkerData(i){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);i?c.dataDiff=i:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let g=null;p.resourceTiming&&p.resourceTiming[this.id]&&(g=p.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&u.e(x,{resourceTiming:g}),this.fire(new u.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return u._(this,void 0,void 0,function*(){const c=i.actor?"RT":"LT";i.actor=this.actor;const p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const g=yield this.actor.sendAsync({type:c,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(g,this.map.painter,c==="RT")})}abortTile(i){return u._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return u._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Mt=u.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class sr extends u.E{constructor(i,c,p,g){super(),this.id=i,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=c}load(i){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield $.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,i&&(this.coordinates=i),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const c=i.map(u.Y.fromLngLat);this.tileID=function(g){let x=1/0,S=1/0,T=-1/0,M=-1/0;for(const X of g)x=Math.min(x,X.x),S=Math.min(S,X.y),T=Math.max(T,X.x),M=Math.max(M,X.y);const R=Math.max(T-x,M-S),F=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),V=Math.pow(2,F);return new u.a0(F,Math.floor((x+T)/2*V),Math.floor((S+M)/2*V))}(c),this.minzoom=this.maxzoom=this.tileID.z;const p=c.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new u.Z,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.W,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.W),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.W,u.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Mt.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ae(i,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ln extends sr{constructor(i,c,p,g){super(i,c,p,g),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const c of i.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const c=this.video.seekable;i<c.start(0)||i>c.end(0)?this.fire(new u.j(new u.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,c=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Mt.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Ae(i,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const g in this.tiles){const x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,p=!0)}p&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ci extends sr{constructor(i,c,p,g){super(i,c,p,g),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(S=>typeof S!="number"))||this.fire(new u.j(new u.a1(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a1(`sources.${i}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a1(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a1(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a1(`sources.${i}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Mt.members)),this.boundsSegments||(this.boundsSegments=u.$.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ae(c,this.canvas,p.RGBA,{premultiply:!0});let g=!1;for(const x in this.tiles){const S=this.tiles[x];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,g=!0)}g&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ui={},yn=y=>{switch(y){case"geojson":return Et;case"image":return sr;case"raster":return kr;case"raster-dem":return Sn;case"vector":return ze;case"video":return ln;case"canvas":return ci}return ui[y]},yr="RTLPluginLoaded";class Ur extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Lr()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return u._(this,arguments,void 0,function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(yr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Qe=null;function Jr(){return Qe||(Qe=new Ur),Qe}class Hr{constructor(i,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=u.a3(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const c=i+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,x){const S={};if(!x)return S;for(const T of g){const M=T.layerIds.map(R=>x.getLayer(R)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(R=>M.filter(F=>F.id===R)[0]));for(const R of M)S[R.id]=T}}return S}(i.buckets,c.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.a5){if(this.hasSymbolBuckets=!0,!p)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const x=this.buckets[g];if(x instanceof u.a5&&x.hasRTLText){this.hasRTLText=!0,Jr().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(g).queryRadius(x))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.a4}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const c=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ae(i,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ae(i,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,c,p,g,x,S,T,M,R,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:S,tileSize:this.tileSize,pixelPosMatrix:F,transform:M,params:T,queryPadding:this.queryPadding*R},i,c,p):{}}querySourceFeatures(i,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),x=c&&c.sourceLayer?c.sourceLayer:"",S=g._geojsonTileLayer||g[x];if(!S)return;const T=u.a6(c&&c.filter),{z:M,x:R,y:F}=this.tileID.canonical,V={z:M,x:R,y:F};for(let X=0;X<S.length;X++){const re=S.feature(X);if(T.needGeometry){const te=u.a7(re,!0);if(!T.filter(new u.a8(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!T.filter(new u.a8(this.tileID.overscaledZ),re))continue;const ie=p.getId(re,x),ce=new u.a9(re,M,R,F,ie);ce.tile=V,i.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const c=this.expirationTime;if(i.cacheControl){const p=u.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(c)if(this.expirationTime<c)g=!0;else{const x=this.expirationTime-c;x?this.expirationTime=p+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!c.style.hasLayer(g))continue;const x=this.buckets[g],S=x.layers[0].sourceLayer||"_geojsonTileLayer",T=p[S],M=i[S];if(!T||!M||Object.keys(M).length===0)continue;x.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=c&&c.style&&c.style.getLayer(g);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=k.now()+i}setDependencies(i,c){const p={};for(const g of c)p[g]=!0;this.dependencies[i]=p}hasDependency(i,c){for(const p of i){const g=this.dependencies[p];if(g){for(const x of c)if(g[x])return!0}}return!1}}class co{constructor(i,c){this.max=i,this.onRemove=c,this.reset()}reset(){for(const i in this.data)for(const c of this.data[i])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(i,c,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const x={value:c,timeout:void 0};if(p!==void 0&&(x.timeout=setTimeout(()=>{this.remove(i,x)},p)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const c=this.data[i].shift();return c.timeout&&clearTimeout(c.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),c.value}getByKey(i){const c=this.data[i];return c?c[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,c){if(!this.has(i))return this;const p=i.wrapped().key,g=c===void 0?0:this.data[p].indexOf(c),x=this.data[p][g];return this.data[p].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(x.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(i){const c=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||c.push(g);for(const p of c)this.remove(p.value.tileID,p)}}class Ti{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,c,p){const g=String(c);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},u.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const x in this.state[i])x!==g&&(this.deletedStates[i][x]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const x in this.state[i][g])p[x]||(this.deletedStates[i][g][x]=null)}else for(const x in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][x]===null&&delete this.deletedStates[i][g][x]}removeFeatureState(i,c,p){if(this.deletedStates[i]===null)return;const g=String(c);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&c!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(c!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,c){const p=String(c),g=u.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const x=this.deletedStates[i][c];if(x===null)return{};for(const S in x)delete g[S]}return g}initializeTileState(i,c){i.setFeatureState(this.state,c)}coalesceChanges(i,c){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const x={};for(const S in this.stateChanges[g])this.state[g][S]||(this.state[g][S]={}),u.e(this.state[g][S],this.stateChanges[g][S]),x[S]=this.state[g][S];p[g]=x}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const x={};if(this.deletedStates[g]===null)for(const S in this.state[g])x[S]={},this.state[g][S]={};else for(const S in this.deletedStates[g]){if(this.deletedStates[g][S]===null)this.state[g][S]={};else for(const T of Object.keys(this.deletedStates[g][S]))delete this.state[g][S][T];x[S]=this.state[g][S]}p[g]=p[g]||{},u.e(p[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,c)}}class et extends u.E{constructor(i,c,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,S,T)=>{const M=new(yn(x.type))(g,x,S,T);if(M.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${M.id}`);return M})(i,c,p,this),this._tiles={},this._cache=new co(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ti,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const c=this._tiles[i];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,c,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,c,p)}catch(g){i.state="errored",g.status!==404?this._source.fire(new u.j(g,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new u.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const p=this._tiles[c];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Ot).map(i=>i.key)}getRenderableIds(i){const c=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&c.push(this._tiles[p]);return i?c.sort((p,g)=>{const x=p.tileID,S=g.tileID,T=new u.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),M=new u.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-S.overscaledZ||M.y-T.y||M.x-T.x}).map(p=>p.tileID.key):c.map(p=>p.tileID).sort(Ot).map(p=>p.key)}hasRenderableParent(i){const c=this.findLoadedParent(i,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(i,c){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(c||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,c){return u._(this,void 0,void 0,function*(){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,i,c))})}_tileLoaded(i,c,p){i.timeAdded=k.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(c,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const c=this.getRenderableIds();for(let g=0;g<c.length;g++){const x=c[g];if(i.neighboringTiles&&i.neighboringTiles[x]){const S=this.getTileByID(x);p(i,S),p(S,i)}}function p(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let S=x.tileID.canonical.x-g.tileID.canonical.x;const T=x.tileID.canonical.y-g.tileID.canonical.y,M=Math.pow(2,g.tileID.canonical.z),R=x.tileID.key;S===0&&T===0||Math.abs(T)>1||(Math.abs(S)>1&&(Math.abs(S+M)===1?S+=M:Math.abs(S-M)===1&&(S-=M)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,S,T),g.neighboringTiles&&g.neighboringTiles[R]&&(g.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,c,p,g){for(const x in this._tiles){let S=this._tiles[x];if(g[x]||!S.hasData()||S.tileID.overscaledZ<=c||S.tileID.overscaledZ>p)continue;let T=S.tileID;for(;S&&S.tileID.overscaledZ>c+1;){const R=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[R.key],S&&S.hasData()&&(T=R)}let M=T;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),i[M.key]){g[T.key]=T;break}}}findLoadedParent(i,c){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=c?p:null}for(let p=i.overscaledZ-1;p>=c;p--){const g=i.scaledTo(p),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(i){const c=this._tiles[i.key];return c&&c.hasData()?c:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const c=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(i){const c=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,c){const p={};for(const g in this._tiles){const x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+c),p[x.tileID.key]=x}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=c,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new u.Q(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(p=p.filter(F=>this._source.hasTile(F)))):p=[];const g=i.coveringZoomLevel(this._source),x=Math.max(g-et.maxOverzooming,this._source.minzoom),S=Math.max(g+et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const V of p)if(V.canonical.z>this._source.minzoom){const X=V.scaledTo(V.canonical.z-1);F[X.key]=X;const re=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));F[re.key]=re}p=p.concat(Object.values(F))}const T=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,g);if(kt(this._source.type)){const F={},V={},X=Object.keys(M),re=k.now();for(const ie of X){const ce=M[ie],te=this._tiles[ie];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=re)continue;const me=this.findLoadedParent(ce,x);me&&(this._addTile(me.tileID),F[me.tileID.key]=me.tileID),V[ie]=ce}this._retainLoadedChildren(V,g,S,M);for(const ie in F)M[ie]||(this._coveredTiles[ie]=!0,M[ie]=F[ie]);if(c){const ie={},ce={};for(const te of p)this._tiles[te.key].hasData()?ie[te.key]=te:ce[te.key]=te;for(const te in ce){const me=ce[te].children(this._source.maxzoom);this._tiles[me[0].key]&&this._tiles[me[1].key]&&this._tiles[me[2].key]&&this._tiles[me[3].key]&&(ie[me[0].key]=M[me[0].key]=me[0],ie[me[1].key]=M[me[1].key]=me[1],ie[me[2].key]=M[me[2].key]=me[2],ie[me[3].key]=M[me[3].key]=me[3],delete ce[te])}for(const te in ce){const me=this.findLoadedParent(ce[te],this._source.minzoom);if(me){ie[me.tileID.key]=M[me.tileID.key]=me.tileID;for(const Te in ie)ie[Te].isChildOf(me.tileID)&&delete ie[Te]}}for(const te in this._tiles)ie[te]||(this._coveredTiles[te]=!0)}}for(const F in M)this._tiles[F].clearFadeHold();const R=u.ab(this._tiles,M);for(const F of R){const V=this._tiles[F];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,c){var p;const g={},x={},S=Math.max(c-et.maxOverzooming,this._source.minzoom),T=Math.max(c+et.maxUnderzooming,this._source.minzoom),M={};for(const R of i){const F=this._addTile(R);g[R.key]=R,F.hasData()||c<this._source.maxzoom&&(M[R.key]=R)}this._retainLoadedChildren(M,c,T,g);for(const R of i){let F=this._tiles[R.key];if(F.hasData())continue;if(c+1>this._source.maxzoom){const X=R.children(this._source.maxzoom)[0],re=this.getTile(X);if(re&&re.hasData()){g[X.key]=X;continue}}else{const X=R.children(this._source.maxzoom);if(g[X[0].key]&&g[X[1].key]&&g[X[2].key]&&g[X[3].key])continue}let V=F.wasRequested();for(let X=R.overscaledZ-1;X>=S;--X){const re=R.scaledTo(X);if(x[re.key])break;if(x[re.key]=!0,F=this.getTile(re),!F&&V&&(F=this._addTile(re)),F){const ie=F.hasData();if((ie||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||V)&&(g[re.key]=re),V=F.wasRequested(),ie)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const c=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}c.push(g.key);const x=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(x),p)break;g=x}for(const x of c)this._loadedParentTiles[x]=p}}_addTile(i){let c=this._tiles[i.key];if(c)return c;c=this._cache.getAndRemove(i),c&&(this._setTileReloadTimer(i.key,c),c.tileID=i,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,c)));const p=c;return c||(c=new Hr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(c,i.key,c.state)),c.uses++,this._tiles[i.key]=c,p||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(i,c){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=c.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const c=this._tiles[i];c&&(c.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(i){const c=i.sourceDataType;i.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,c,p){const g=[],x=this.transform;if(!x)return g;const S=p?x.getCameraQueryGeometry(i):i,T=i.map(ie=>x.pointCoordinate(ie,this.terrain)),M=S.map(ie=>x.pointCoordinate(ie,this.terrain)),R=this.getIds();let F=1/0,V=1/0,X=-1/0,re=-1/0;for(const ie of M)F=Math.min(F,ie.x),V=Math.min(V,ie.y),X=Math.max(X,ie.x),re=Math.max(re,ie.y);for(let ie=0;ie<R.length;ie++){const ce=this._tiles[R[ie]];if(ce.holdingForFade())continue;const te=ce.tileID,me=Math.pow(2,x.zoom-ce.tileID.overscaledZ),Te=c*ce.queryPadding*u.W/ce.tileSize/me,ue=[te.getTilePoint(new u.Y(F,V)),te.getTilePoint(new u.Y(X,re))];if(ue[0].x-Te<u.W&&ue[0].y-Te<u.W&&ue[1].x+Te>=0&&ue[1].y+Te>=0){const _e=T.map(Re=>te.getTilePoint(Re)),Ie=M.map(Re=>te.getTilePoint(Re));g.push({tile:ce,tileID:te,queryGeometry:_e,cameraQueryGeometry:Ie,scale:me})}}return g}getVisibleCoordinates(i){const c=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of c)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(kt(this._source.type)){const i=k.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=i)return!0}return!1}setFeatureState(i,c,p){this._state.updateState(i=i||"_geojsonTileLayer",c,p)}removeFeatureState(i,c,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",c,p)}getFeatureState(i,c){return this._state.getState(i=i||"_geojsonTileLayer",c)}setDependencies(i,c,p){const g=this._tiles[i];g&&g.setDependencies(c,p)}reloadTilesForDependencies(i,c){for(const p in this._tiles)this._tiles[p].hasDependency(i,c)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,c))}}function Ot(y,i){const c=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-c||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function kt(y){return y==="raster"||y==="image"||y==="video"}et.maxOverzooming=10,et.maxUnderzooming=3;class Wr{constructor(i,c){this.reset(i,c)}reset(i,c){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.ac(i,0,1);let c=1,p=this._distances[c];const g=i*this.paddedLength+this.padding;for(;p<g&&c<this._distances.length;)p=this._distances[++c];const x=c-1,S=this._distances[x],T=p-S,M=T>0?(g-S)/T:0;return this.points[x].mult(1-M).add(this.points[c].mult(M))}}function Gr(y,i){let c=!0;return y==="always"||y!=="never"&&i!=="never"||(c=!1),c}class It{constructor(i,c,p){const g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(c/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=c,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,c,p,g,x){this._forEachCell(c,p,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(i,c,p,g){this._forEachCell(c-g,p-g,c+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(c),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,c,p,g,x,S){this.boxCells[x].push(S)}_insertCircleCell(i,c,p,g,x,S){this.circleCells[x].push(S)}_query(i,c,p,g,x,S,T){if(p<0||i>this.width||g<0||c>this.height)return[];const M=[];if(i<=0&&c<=0&&this.width<=p&&this.height<=g){if(x)return[{key:null,x1:i,y1:c,x2:p,y2:g}];for(let R=0;R<this.boxKeys.length;R++)M.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const F=this.circles[3*R],V=this.circles[3*R+1],X=this.circles[3*R+2];M.push({key:this.circleKeys[R],x1:F-X,y1:V-X,x2:F+X,y2:V+X})}}else this._forEachCell(i,c,p,g,this._queryCell,M,{hitTest:x,overlapMode:S,seenUids:{box:{},circle:{}}},T);return M}query(i,c,p,g){return this._query(i,c,p,g,!1,null)}hitTest(i,c,p,g,x,S){return this._query(i,c,p,g,!0,x,S).length>0}hitTestCircle(i,c,p,g,x){const S=i-p,T=i+p,M=c-p,R=c+p;if(T<0||S>this.width||R<0||M>this.height)return!1;const F=[];return this._forEachCell(S,M,T,R,this._queryCellCircle,F,{hitTest:!0,overlapMode:g,circle:{x:i,y:c,radius:p},seenUids:{box:{},circle:{}}},x),F.length>0}_queryCell(i,c,p,g,x,S,T,M){const{seenUids:R,hitTest:F,overlapMode:V}=T,X=this.boxCells[x];if(X!==null){const ie=this.bboxes;for(const ce of X)if(!R.box[ce]){R.box[ce]=!0;const te=4*ce,me=this.boxKeys[ce];if(i<=ie[te+2]&&c<=ie[te+3]&&p>=ie[te+0]&&g>=ie[te+1]&&(!M||M(me))&&(!F||!Gr(V,me.overlapMode))&&(S.push({key:me,x1:ie[te],y1:ie[te+1],x2:ie[te+2],y2:ie[te+3]}),F))return!0}}const re=this.circleCells[x];if(re!==null){const ie=this.circles;for(const ce of re)if(!R.circle[ce]){R.circle[ce]=!0;const te=3*ce,me=this.circleKeys[ce];if(this._circleAndRectCollide(ie[te],ie[te+1],ie[te+2],i,c,p,g)&&(!M||M(me))&&(!F||!Gr(V,me.overlapMode))){const Te=ie[te],ue=ie[te+1],_e=ie[te+2];if(S.push({key:me,x1:Te-_e,y1:ue-_e,x2:Te+_e,y2:ue+_e}),F)return!0}}}return!1}_queryCellCircle(i,c,p,g,x,S,T,M){const{circle:R,seenUids:F,overlapMode:V}=T,X=this.boxCells[x];if(X!==null){const ie=this.bboxes;for(const ce of X)if(!F.box[ce]){F.box[ce]=!0;const te=4*ce,me=this.boxKeys[ce];if(this._circleAndRectCollide(R.x,R.y,R.radius,ie[te+0],ie[te+1],ie[te+2],ie[te+3])&&(!M||M(me))&&!Gr(V,me.overlapMode))return S.push(!0),!0}}const re=this.circleCells[x];if(re!==null){const ie=this.circles;for(const ce of re)if(!F.circle[ce]){F.circle[ce]=!0;const te=3*ce,me=this.circleKeys[ce];if(this._circlesCollide(ie[te],ie[te+1],ie[te+2],R.x,R.y,R.radius)&&(!M||M(me))&&!Gr(V,me.overlapMode))return S.push(!0),!0}}}_forEachCell(i,c,p,g,x,S,T,M){const R=this._convertToXCellCoord(i),F=this._convertToYCellCoord(c),V=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let re=R;re<=V;re++)for(let ie=F;ie<=X;ie++)if(x.call(this,i,c,p,g,this.xCellCount*ie+re,S,T,M))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,c,p,g,x,S){const T=g-i,M=x-c,R=p+S;return R*R>T*T+M*M}_circleAndRectCollide(i,c,p,g,x,S,T){const M=(S-g)/2,R=Math.abs(i-(g+M));if(R>M+p)return!1;const F=(T-x)/2,V=Math.abs(c-(x+F));if(V>F+p)return!1;if(R<=M||V<=F)return!0;const X=R-M,re=V-F;return X*X+re*re<=p*p}}function Cn(y,i,c,p,g){const x=u.F();return i?(u.J(x,x,[1/g,1/g,1]),c||u.ad(x,x,p.angle)):u.K(x,p.labelPlaneMatrix,y),x}function Xn(y,i,c,p,g){if(i){const x=u.ae(y);return u.J(x,x,[g,g,1]),c||u.ad(x,x,-p.angle),x}return p.glCoordMatrix}function Er(y,i,c){let p;c?(p=[y.x,y.y,c(y.x,y.y),1],u.af(p,p,i)):(p=[y.x,y.y,0,1],xt(p,p,i));const g=p[3];return{point:new u.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function Q(y,i){return .5+y/i*.5}function B(y,i){const c=y[0]/y[3],p=y[1]/y[3];return c>=-i[0]&&c<=i[0]&&p>=-i[1]&&p<=i[1]}function U(y,i,c,p,g,x,S,T,M,R){const F=p?y.textSizeData:y.iconSizeData,V=u.ag(F,c.transform.zoom),X=[256/c.width*2+1,256/c.height*2+1],re=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;re.clear();const ie=y.lineVertexArray,ce=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,te=c.transform.width/c.transform.height;let me=!1;for(let Te=0;Te<ce.length;Te++){const ue=ce.get(Te);if(ue.hidden||ue.writingMode===u.ah.vertical&&!me){Be(ue.numGlyphs,re);continue}let _e;if(me=!1,R?(_e=[ue.anchorX,ue.anchorY,R(ue.anchorX,ue.anchorY),1],u.af(_e,_e,i)):(_e=[ue.anchorX,ue.anchorY,0,1],xt(_e,_e,i)),!B(_e,X)){Be(ue.numGlyphs,re);continue}const Ie=Q(c.transform.cameraToCenterDistance,_e[3]),Re=u.ai(F,V,ue),Fe=S?Re/Ie:Re*Ie,Ke=new u.P(ue.anchorX,ue.anchorY),qe=Er(Ke,g,R).point,tt={projections:{},offsets:{}},ut=ge(ue,Fe,!1,T,i,g,x,y.glyphOffsetArray,ie,re,qe,Ke,tt,te,M,R);me=ut.useVertical,(ut.notEnoughRoom||me||ut.needsFlipping&&ge(ue,Fe,!0,T,i,g,x,y.glyphOffsetArray,ie,re,qe,Ke,tt,te,M,R).notEnoughRoom)&&Be(ue.numGlyphs,re)}p?y.text.dynamicLayoutVertexBuffer.updateData(re):y.icon.dynamicLayoutVertexBuffer.updateData(re)}function H(y,i,c,p,g,x,S,T,M,R,F,V,X){const re=T.glyphStartIndex+T.numGlyphs,ie=T.lineStartIndex,ce=T.lineStartIndex+T.lineLength,te=i.getoffsetX(T.glyphStartIndex),me=i.getoffsetX(re-1),Te=Ue(y*te,c,p,g,x,S,T.segment,ie,ce,M,R,F,V,X);if(!Te)return null;const ue=Ue(y*me,c,p,g,x,S,T.segment,ie,ce,M,R,F,V,X);return ue?{first:Te,last:ue}:null}function ae(y,i,c,p){return y===u.ah.horizontal&&Math.abs(c.y-i.y)>Math.abs(c.x-i.x)*p?{useVertical:!0}:(y===u.ah.vertical?i.y<c.y:i.x>c.x)?{needsFlipping:!0}:null}function ge(y,i,c,p,g,x,S,T,M,R,F,V,X,re,ie,ce){const te=i/24,me=y.lineOffsetX*te,Te=y.lineOffsetY*te;let ue;if(y.numGlyphs>1){const _e=y.glyphStartIndex+y.numGlyphs,Ie=y.lineStartIndex,Re=y.lineStartIndex+y.lineLength,Fe=H(te,T,me,Te,c,F,V,y,M,x,X,ie,ce);if(!Fe)return{notEnoughRoom:!0};const Ke=Er(Fe.first.point,S,ce).point,qe=Er(Fe.last.point,S,ce).point;if(p&&!c){const tt=ae(y.writingMode,Ke,qe,re);if(tt)return tt}ue=[Fe.first];for(let tt=y.glyphStartIndex+1;tt<_e-1;tt++)ue.push(Ue(te*T.getoffsetX(tt),me,Te,c,F,V,y.segment,Ie,Re,M,x,X,ie,ce));ue.push(Fe.last)}else{if(p&&!c){const Ie=Er(V,g,ce).point,Re=y.lineStartIndex+y.segment+1,Fe=new u.P(M.getx(Re),M.gety(Re)),Ke=Er(Fe,g,ce),qe=Ke.signedDistanceFromCamera>0?Ke.point:fe(V,Fe,Ie,1,g,ce),tt=ae(y.writingMode,Ie,qe,re);if(tt)return tt}const _e=Ue(te*T.getoffsetX(y.glyphStartIndex),me,Te,c,F,V,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,M,x,X,ie,ce);if(!_e)return{notEnoughRoom:!0};ue=[_e]}for(const _e of ue)u.aj(R,_e.point,_e.angle);return{}}function fe(y,i,c,p,g,x){const S=Er(y.add(y.sub(i)._unit()),g,x).point,T=c.sub(S);return c.add(T._mult(p/T.mag()))}function ye(y,i){const{projectionCache:c,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:S,getElevation:T,previousVertex:M,direction:R,absOffsetX:F}=i;if(c.projections[y])return c.projections[y];const V=new u.P(p.getx(y),p.gety(y)),X=Er(V,g,T);if(X.signedDistanceFromCamera>0)return c.projections[y]=X.point,X.point;const re=y-R;return fe(S===0?x:new u.P(p.getx(re),p.gety(re)),V,M,F-S+1,g,T)}function he(y,i,c){return y._unit()._perp()._mult(i*c)}function Ce(y,i,c,p,g,x,S,T){const{projectionCache:M,direction:R}=T;if(M.offsets[y])return M.offsets[y];const F=c.add(i);if(y+R<p||y+R>=g)return M.offsets[y]=F,F;const V=ye(y+R,T),X=he(V.sub(c),S,R),re=c.add(X),ie=V.add(X);return M.offsets[y]=u.ak(x,F,re,ie)||F,M.offsets[y]}function Ue(y,i,c,p,g,x,S,T,M,R,F,V,X,re){const ie=p?y-i:y+i;let ce=ie>0?1:-1,te=0;p&&(ce*=-1,te=Math.PI),ce<0&&(te+=Math.PI);let me,Te,ue=ce>0?T+S:T+S+1,_e=g,Ie=g,Re=0,Fe=0;const Ke=Math.abs(ie),qe=[];let tt;for(;Re+Fe<=Ke;){if(ue+=ce,ue<T||ue>=M)return null;Re+=Fe,Ie=_e,Te=me;const nt={projectionCache:V,lineVertexArray:R,labelPlaneMatrix:F,tileAnchorPoint:x,distanceFromAnchor:Re,getElevation:re,previousVertex:Ie,direction:ce,absOffsetX:Ke};if(_e=ye(ue,nt),c===0)qe.push(Ie),tt=_e.sub(Ie);else{let St;const Ft=_e.sub(Ie);St=Ft.mag()===0?he(ye(ue+ce,nt).sub(_e),c,ce):he(Ft,c,ce),Te||(Te=Ie.add(St)),me=Ce(ue,St,_e,T,M,Te,c,nt),qe.push(Te),tt=me.sub(Te)}Fe=tt.mag()}const ut=tt._mult((Ke-Re)/Fe)._add(Te||Ie),Dt=te+Math.atan2(_e.y-Ie.y,_e.x-Ie.x);return qe.push(ut),{point:ut,angle:X?Dt:0,path:qe}}const Ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Be(y,i){for(let c=0;c<y;c++){const p=i.length;i.resize(p+4),i.float32.set(Ne,3*p)}}function xt(y,i,c){const p=i[0],g=i[1];return y[0]=c[0]*p+c[4]*g+c[12],y[1]=c[1]*p+c[5]*g+c[13],y[3]=c[3]*p+c[7]*g+c[15],y}const wt=100;class Lt{constructor(i,c=new It(i.width+200,i.height+200,25),p=new It(i.width+200,i.height+200,25)){this.transform=i,this.grid=c,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+wt,this.screenBottomBoundary=i.height+wt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,c,p,g,x,S){const T=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,S),M=p*T.perspectiveRatio,R=i.x1*M+T.point.x,F=i.y1*M+T.point.y,V=i.x2*M+T.point.x,X=i.y2*M+T.point.y;return!this.isInsideGrid(R,F,V,X)||c!=="always"&&this.grid.hitTest(R,F,V,X,c,x)||T.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[R,F,V,X],offscreen:this.isOffscreen(R,F,V,X)}}placeCollisionCircles(i,c,p,g,x,S,T,M,R,F,V,X,re,ie){const ce=[],te=new u.P(c.anchorX,c.anchorY),me=Er(te,S,ie),Te=Q(this.transform.cameraToCenterDistance,me.signedDistanceFromCamera),ue=(F?x/Te:x*Te)/u.ao,_e=Er(te,T,ie).point,Ie=H(ue,g,c.lineOffsetX*ue,c.lineOffsetY*ue,!1,_e,te,c,p,T,{projections:{},offsets:{}},!1,ie);let Re=!1,Fe=!1,Ke=!0;if(Ie){const qe=.5*X*Te+re,tt=new u.P(-100,-100),ut=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Dt=new Wr,nt=Ie.first,St=Ie.last;let Ft=[];for(let jt=nt.path.length-1;jt>=1;jt--)Ft.push(nt.path[jt]);for(let jt=1;jt<St.path.length;jt++)Ft.push(St.path[jt]);const Yt=2.5*qe;if(M){const jt=Ft.map(Gt=>Er(Gt,M,ie));Ft=jt.some(Gt=>Gt.signedDistanceFromCamera<=0)?[]:jt.map(Gt=>Gt.point)}let Pt=[];if(Ft.length>0){const jt=Ft[0].clone(),Gt=Ft[0].clone();for(let Br=1;Br<Ft.length;Br++)jt.x=Math.min(jt.x,Ft[Br].x),jt.y=Math.min(jt.y,Ft[Br].y),Gt.x=Math.max(Gt.x,Ft[Br].x),Gt.y=Math.max(Gt.y,Ft[Br].y);Pt=jt.x>=tt.x&&Gt.x<=ut.x&&jt.y>=tt.y&&Gt.y<=ut.y?[Ft]:Gt.x<tt.x||jt.x>ut.x||Gt.y<tt.y||jt.y>ut.y?[]:u.al([Ft],tt.x,tt.y,ut.x,ut.y)}for(const jt of Pt){Dt.reset(jt,.25*qe);let Gt=0;Gt=Dt.length<=.5*qe?1:Math.ceil(Dt.paddedLength/Yt)+1;for(let Br=0;Br<Gt;Br++){const fr=Br/Math.max(Gt-1,1),gi=Dt.lerp(fr),vn=gi.x+wt,$r=gi.y+wt;ce.push(vn,$r,qe,0);const Jn=vn-qe,Vi=$r-qe,go=vn+qe,ca=$r+qe;if(Ke=Ke&&this.isOffscreen(Jn,Vi,go,ca),Fe=Fe||this.isInsideGrid(Jn,Vi,go,ca),i!=="always"&&this.grid.hitTestCircle(vn,$r,qe,i,V)&&(Re=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Re}}}}return{circles:!R&&Re||!Fe||Te<this.perspectiveRatioCutoff?[]:ce,offscreen:Ke,collisionDetected:Re}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let p=1/0,g=1/0,x=-1/0,S=-1/0;for(const F of i){const V=new u.P(F.x+wt,F.y+wt);p=Math.min(p,V.x),g=Math.min(g,V.y),x=Math.max(x,V.x),S=Math.max(S,V.y),c.push(V)}const T=this.grid.query(p,g,x,S).concat(this.ignoredGrid.query(p,g,x,S)),M={},R={};for(const F of T){const V=F.key;if(M[V.bucketInstanceId]===void 0&&(M[V.bucketInstanceId]={}),M[V.bucketInstanceId][V.featureIndex])continue;const X=[new u.P(F.x1,F.y1),new u.P(F.x2,F.y1),new u.P(F.x2,F.y2),new u.P(F.x1,F.y2)];u.am(c,X)&&(M[V.bucketInstanceId][V.featureIndex]=!0,R[V.bucketInstanceId]===void 0&&(R[V.bucketInstanceId]=[]),R[V.bucketInstanceId].push(V.featureIndex))}return R}insertCollisionBox(i,c,p,g,x,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:S,overlapMode:c},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,c,p,g,x,S){const T=p?this.ignoredGrid:this.grid,M={bucketInstanceId:g,featureIndex:x,collisionGroupID:S,overlapMode:c};for(let R=0;R<i.length;R+=4)T.insertCircle(M,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,c,p,g){let x;return g?(x=[c,p,g(c,p),1],u.af(x,x,i)):(x=[c,p,0,1],xt(x,x,i)),{point:new u.P((x[0]/x[3]+1)/2*this.transform.width+wt,(-x[1]/x[3]+1)/2*this.transform.height+wt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(i,c,p,g){return p<wt||i>=this.screenRightBoundary||g<wt||c>this.screenBottomBoundary}isInsideGrid(i,c,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const i=u.an([]);return u.H(i,i,[-100,-100,0]),i}}function At(y,i,c){return i*(u.W/(y.tileSize*Math.pow(2,c-y.tileID.overscaledZ)))}class Kt{constructor(i,c,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?c:-c))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Jt{constructor(i,c,p,g,x){this.text=new Kt(i?i.text:null,c,p,x),this.icon=new Kt(i?i.icon:null,c,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class vr{constructor(i,c,p){this.text=i,this.icon=c,this.skipFade=p}}class Qr{constructor(){this.invProjMatrix=u.F(),this.viewportMatrix=u.F(),this.circles=[]}}class Wt{constructor(i,c,p,g,x){this.bucketInstanceId=i,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=x}}class Tr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const c=++this.maxGroupID;this.collisionGroups[i]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[i]}}function cn(y,i,c,p,g){const{horizontalAlign:x,verticalAlign:S}=u.at(y);return new u.P(-(x-.5)*i+p[0]*g,-(S-.5)*c+p[1]*g)}function Mn(y,i,c,p,g,x){const{x1:S,x2:T,y1:M,y2:R,anchorPointX:F,anchorPointY:V}=y,X=new u.P(i,c);return p&&X._rotate(g?x:-x),{x1:S+X.x,y1:M+X.y,x2:T+X.x,y2:R+X.y,anchorPointX:F,anchorPointY:V}}class Ii{constructor(i,c,p,g,x){this.transform=i.clone(),this.terrain=c,this.collisionIndex=new Lt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Tr(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,c,p,g){const x=p.getBucket(c),S=p.latestFeatureIndex;if(!x||!S||c.id!==x.layerIds[0])return;const T=p.collisionBoxArray,M=x.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),F=p.tileSize/u.W,V=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=M.get("text-pitch-alignment")==="map",re=M.get("text-rotation-alignment")==="map",ie=At(p,1,this.transform.zoom),ce=Cn(V,X,re,this.transform,ie);let te=null;if(X){const Te=Xn(V,X,re,this.transform,ie);te=u.K([],this.transform.labelPlaneMatrix,Te)}this.retainedQueryData[x.bucketInstanceId]=new Wt(x.bucketInstanceId,S,x.sourceLayerIndex,x.index,p.tileID);const me={bucket:x,layout:M,posMatrix:V,textLabelPlaneMatrix:ce,labelToScreenMatrix:te,scale:R,textPixelRatio:F,holdingForFade:p.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:u.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(const Te of x.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:_e,symbolInstanceEnd:Ie}=Te;i.push({sortKey:ue,symbolInstanceStart:_e,symbolInstanceEnd:Ie,parameters:me})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:me})}attemptAnchorPlacement(i,c,p,g,x,S,T,M,R,F,V,X,re,ie,ce,te){const me=u.ap[i.textAnchor],Te=[i.textOffset0,i.textOffset1],ue=cn(me,p,g,Te,x),_e=this.collisionIndex.placeCollisionBox(Mn(c,ue.x,ue.y,S,T,this.transform.angle),V,M,R,F.predicate,te);if((!ce||this.collisionIndex.placeCollisionBox(Mn(ce,ue.x,ue.y,S,T,this.transform.angle),V,M,R,F.predicate,te).box.length!==0)&&_e.box.length>0){let Ie;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(Ie=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Te,width:p,height:g,anchor:me,textBoxScale:x,prevAnchor:Ie},this.markUsedJustification(re,me,X,ie),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ie,X),this.placedOrientations[X.crossTileID]=ie),{shift:ue,placedGlyphBoxes:_e}}}placeLayerBucketPart(i,c,p){const{bucket:g,layout:x,posMatrix:S,textLabelPlaneMatrix:T,labelToScreenMatrix:M,textPixelRatio:R,holdingForFade:F,collisionBoxArray:V,partiallyEvaluatedTextSize:X,collisionGroup:re}=i.parameters,ie=x.get("text-optional"),ce=x.get("icon-optional"),te=u.aq(x,"text-overlap","text-allow-overlap"),me=te==="always",Te=u.aq(x,"icon-overlap","icon-allow-overlap"),ue=Te==="always",_e=x.get("text-rotation-alignment")==="map",Ie=x.get("text-pitch-alignment")==="map",Re=x.get("icon-text-fit")!=="none",Fe=x.get("symbol-z-order")==="viewport-y",Ke=me&&(ue||!g.hasIconData()||ce),qe=ue&&(me||!g.hasTextData()||ie);!g.collisionArrays&&V&&g.deserializeCollisionBoxes(V);const tt=this.retainedQueryData[g.bucketInstanceId].tileID,ut=this.terrain?(nt,St)=>this.terrain.getElevation(tt,nt,St):null,Dt=(nt,St)=>{var Ft,Yt;if(c[nt.crossTileID])return;if(F)return void(this.placements[nt.crossTileID]=new vr(!1,!1,!1));let Pt=!1,jt=!1,Gt=!0,Br=null,fr={box:null,offscreen:null},gi={box:null,offscreen:null},vn=null,$r=null,Jn=null,Vi=0,go=0,ca=0;St.textFeatureIndex?Vi=St.textFeatureIndex:nt.useRuntimeCollisionCircles&&(Vi=nt.featureIndex),St.verticalTextFeatureIndex&&(go=St.verticalTextFeatureIndex);const fs=St.textBox;if(fs){const $n=un=>{let Ar=u.ah.horizontal;if(g.allowVerticalPlacement&&!un&&this.prevPlacement){const ki=this.prevPlacement.placedOrientations[nt.crossTileID];ki&&(this.placedOrientations[nt.crossTileID]=ki,Ar=ki,this.markUsedOrientation(g,Ar,nt))}return Ar},Rn=(un,Ar)=>{if(g.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&St.verticalTextBox){for(const ki of g.writingModes)if(ki===u.ah.vertical?(fr=Ar(),gi=fr):fr=un(),fr&&fr.box&&fr.box.length)break}else fr=un()},Nn=nt.textAnchorOffsetStartIndex,xl=nt.textAnchorOffsetEndIndex;if(xl===Nn){const un=(Ar,ki)=>{const dn=this.collisionIndex.placeCollisionBox(Ar,te,R,S,re.predicate,ut);return dn&&dn.box&&dn.box.length&&(this.markUsedOrientation(g,ki,nt),this.placedOrientations[nt.crossTileID]=ki),dn};Rn(()=>un(fs,u.ah.horizontal),()=>{const Ar=St.verticalTextBox;return g.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&Ar?un(Ar,u.ah.vertical):{box:null,offscreen:null}}),$n(fr&&fr.box&&fr.box.length)}else{let un=u.ap[(Yt=(Ft=this.prevPlacement)===null||Ft===void 0?void 0:Ft.variableOffsets[nt.crossTileID])===null||Yt===void 0?void 0:Yt.anchor];const Ar=(dn,Dy,hp)=>{const Fy=dn.x2-dn.x1,ps=dn.y2-dn.y1,Fd=nt.textBoxScale,By=Re&&Te==="never"?Dy:null;let ms={box:[],offscreen:!1},_n=te==="never"?1:2,Bd="never";un&&_n++;for(let bl=0;bl<_n;bl++){for(let gs=Nn;gs<xl;gs++){const $d=g.textAnchorOffsets.get(gs);if(un&&$d.textAnchor!==un)continue;const Nd=this.attemptAnchorPlacement($d,dn,Fy,ps,Fd,_e,Ie,R,S,re,Bd,nt,g,hp,By,ut);if(Nd&&(ms=Nd.placedGlyphBoxes,ms&&ms.box&&ms.box.length))return Pt=!0,Br=Nd.shift,ms}un?un=null:Bd=te}return ms};Rn(()=>Ar(fs,St.iconBox,u.ah.horizontal),()=>{const dn=St.verticalTextBox;return g.allowVerticalPlacement&&!(fr&&fr.box&&fr.box.length)&&nt.numVerticalGlyphVertices>0&&dn?Ar(dn,St.verticalIconBox,u.ah.vertical):{box:null,offscreen:null}}),fr&&(Pt=fr.box,Gt=fr.offscreen);const ki=$n(fr&&fr.box);if(!Pt&&this.prevPlacement){const dn=this.prevPlacement.variableOffsets[nt.crossTileID];dn&&(this.variableOffsets[nt.crossTileID]=dn,this.markUsedJustification(g,dn.anchor,nt,ki))}}}if(vn=fr,Pt=vn&&vn.box&&vn.box.length>0,Gt=vn&&vn.offscreen,nt.useRuntimeCollisionCircles){const $n=g.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex),Rn=u.ai(g.textSizeData,X,$n),Nn=x.get("text-padding");$r=this.collisionIndex.placeCollisionCircles(te,$n,g.lineVertexArray,g.glyphOffsetArray,Rn,S,T,M,p,Ie,re.predicate,nt.collisionCircleDiameter,Nn,ut),$r.circles.length&&$r.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Pt=me||$r.circles.length>0&&!$r.collisionDetected,Gt=Gt&&$r.offscreen}if(St.iconFeatureIndex&&(ca=St.iconFeatureIndex),St.iconBox){const $n=Rn=>{const Nn=Re&&Br?Mn(Rn,Br.x,Br.y,_e,Ie,this.transform.angle):Rn;return this.collisionIndex.placeCollisionBox(Nn,Te,R,S,re.predicate,ut)};gi&&gi.box&&gi.box.length&&St.verticalIconBox?(Jn=$n(St.verticalIconBox),jt=Jn.box.length>0):(Jn=$n(St.iconBox),jt=Jn.box.length>0),Gt=Gt&&Jn.offscreen}const Aa=ie||nt.numHorizontalGlyphVertices===0&&nt.numVerticalGlyphVertices===0,Ra=ce||nt.numIconVertices===0;if(Aa||Ra?Ra?Aa||(jt=jt&&Pt):Pt=jt&&Pt:jt=Pt=jt&&Pt,Pt&&vn&&vn.box&&this.collisionIndex.insertCollisionBox(vn.box,te,x.get("text-ignore-placement"),g.bucketInstanceId,gi&&gi.box&&go?go:Vi,re.ID),jt&&Jn&&this.collisionIndex.insertCollisionBox(Jn.box,Te,x.get("icon-ignore-placement"),g.bucketInstanceId,ca,re.ID),$r&&(Pt&&this.collisionIndex.insertCollisionCircles($r.circles,te,x.get("text-ignore-placement"),g.bucketInstanceId,Vi,re.ID),p)){const $n=g.bucketInstanceId;let Rn=this.collisionCircleArrays[$n];Rn===void 0&&(Rn=this.collisionCircleArrays[$n]=new Qr);for(let Nn=0;Nn<$r.circles.length;Nn+=4)Rn.circles.push($r.circles[Nn+0]),Rn.circles.push($r.circles[Nn+1]),Rn.circles.push($r.circles[Nn+2]),Rn.circles.push($r.collisionDetected?1:0)}if(nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[nt.crossTileID]=new vr(Pt||Ke,jt||qe,Gt||g.justReloaded),c[nt.crossTileID]=!0};if(Fe){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const nt=g.getSortedSymbolIndexes(this.transform.angle);for(let St=nt.length-1;St>=0;--St){const Ft=nt[St];Dt(g.symbolInstances.get(Ft),g.collisionArrays[Ft])}}else for(let nt=i.symbolInstanceStart;nt<i.symbolInstanceEnd;nt++)Dt(g.symbolInstances.get(nt),g.collisionArrays[nt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[g.bucketInstanceId];u.ar(nt.invProjMatrix,S),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,c,p,g){let x;x=g===u.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.as(c)];const S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const T of S)T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=x>=0&&T!==x?0:p.crossTileID)}markUsedOrientation(i,c,p){const g=c===u.ah.horizontal||c===u.ah.horizontalOnly?c:0,x=c===u.ah.vertical?c:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const T of S)i.text.placedSymbolArray.get(T).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const g=c?c.symbolFadeChange(i):1,x=c?c.opacities:{},S=c?c.variableOffsets:{},T=c?c.placedOrientations:{};for(const M in this.placements){const R=this.placements[M],F=x[M];F?(this.opacities[M]=new Jt(F,g,R.text,R.icon),p=p||R.text!==F.text.placed||R.icon!==F.icon.placed):(this.opacities[M]=new Jt(null,g,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const M in x){const R=x[M];if(!this.opacities[M]){const F=new Jt(R,g,!1,!1);F.isHidden()||(this.opacities[M]=F,p=p||R.text.placed||R.icon.placed)}}for(const M in S)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=S[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:i)}updateLayerOpacities(i,c){const p={};for(const g of c){const x=g.getBucket(i);x&&g.latestFeatureIndex&&i.id===x.layerIds[0]&&this.updateBucketOpacities(x,p,g.collisionBoxArray)}}updateBucketOpacities(i,c,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],x=g.layout,S=new Jt(null,0,!1,!1,!0),T=x.get("text-allow-overlap"),M=x.get("icon-allow-overlap"),R=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=x.get("text-rotation-alignment")==="map",V=x.get("text-pitch-alignment")==="map",X=x.get("icon-text-fit")!=="none",re=new Jt(null,0,T&&(M||!i.hasIconData()||x.get("icon-optional")),M&&(T||!i.hasTextData()||x.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ie=(ce,te,me)=>{for(let Te=0;Te<te/4;Te++)ce.opacityVertexArray.emplaceBack(me);ce.hasVisibleVertices=ce.hasVisibleVertices||me!==kn};for(let ce=0;ce<i.symbolInstances.length;ce++){const te=i.symbolInstances.get(ce),{numHorizontalGlyphVertices:me,numVerticalGlyphVertices:Te,crossTileID:ue}=te;let _e=this.opacities[ue];c[ue]?_e=S:_e||(_e=re,this.opacities[ue]=_e),c[ue]=!0;const Ie=te.numIconVertices>0,Re=this.placedOrientations[te.crossTileID],Fe=Re===u.ah.vertical,Ke=Re===u.ah.horizontal||Re===u.ah.horizontalOnly;if(me>0||Te>0){const qe=Mf(_e.text);ie(i.text,me,Fe?kn:qe),ie(i.text,Te,Ke?kn:qe);const tt=_e.text.isHidden();[te.rightJustifiedTextSymbolIndex,te.centerJustifiedTextSymbolIndex,te.leftJustifiedTextSymbolIndex].forEach(nt=>{nt>=0&&(i.text.placedSymbolArray.get(nt).hidden=tt||Fe?1:0)}),te.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(te.verticalPlacedTextSymbolIndex).hidden=tt||Ke?1:0);const ut=this.variableOffsets[te.crossTileID];ut&&this.markUsedJustification(i,ut.anchor,te,Re);const Dt=this.placedOrientations[te.crossTileID];Dt&&(this.markUsedJustification(i,"left",te,Dt),this.markUsedOrientation(i,Dt,te))}if(Ie){const qe=Mf(_e.icon),tt=!(X&&te.verticalPlacedIconSymbolIndex&&Fe);te.placedIconSymbolIndex>=0&&(ie(i.icon,te.numIconVertices,tt?qe:kn),i.icon.placedSymbolArray.get(te.placedIconSymbolIndex).hidden=_e.icon.isHidden()),te.verticalPlacedIconSymbolIndex>=0&&(ie(i.icon,te.numVerticalIconVertices,tt?kn:qe),i.icon.placedSymbolArray.get(te.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const qe=i.collisionArrays[ce];if(qe){let tt=new u.P(0,0);if(qe.textBox||qe.verticalTextBox){let Dt=!0;if(R){const nt=this.variableOffsets[ue];nt?(tt=cn(nt.anchor,nt.width,nt.height,nt.textOffset,nt.textBoxScale),F&&tt._rotate(V?this.transform.angle:-this.transform.angle)):Dt=!1}qe.textBox&&Or(i.textCollisionBox.collisionVertexArray,_e.text.placed,!Dt||Fe,tt.x,tt.y),qe.verticalTextBox&&Or(i.textCollisionBox.collisionVertexArray,_e.text.placed,!Dt||Ke,tt.x,tt.y)}const ut=!!(!Ke&&qe.verticalIconBox);qe.iconBox&&Or(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,ut,X?tt.x:0,X?tt.y:0),qe.verticalIconBox&&Or(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,!ut,X?tt.x:0,X?tt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ce=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ce.invProjMatrix,i.placementViewportMatrix=ce.viewportMatrix,i.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Or(y,i,c,p,g){y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0),y.emplaceBack(i?1:0,c?1:0,p||0,g||0)}const ts=Math.pow(2,25),my=Math.pow(2,24),cr=Math.pow(2,17),Wu=Math.pow(2,16),Gu=Math.pow(2,9),di=Math.pow(2,8),hi=Math.pow(2,1);function Mf(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,c=Math.floor(127*y.opacity);return c*ts+i*my+c*cr+i*Wu+c*Gu+i*di+c*hi+i}const kn=0;class Pi{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,c,p,g,x){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(c.getBucketParts(S,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,x())return!0;return!1}}class kf{constructor(i,c,p,g,x,S,T,M){this.placement=new Ii(i,c,S,T,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(i,c,p){const g=k.now(),x=()=>!this._forceFullPlacement&&k.now()-g>2;for(;this._currentPlacementIndex>=0;){const S=c[i[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=T)&&(!S.maxzoom||S.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Pi(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ko=512/u.W/2;class en{constructor(i,c,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let x=0;x<c.length;x++){const S=c.get(x),T=S.key,M=g.get(T);M?M.push(S):g.set(T,[S])}for(const[x,S]of g){const T={positions:S.map(M=>({x:Math.floor(M.anchorX*ko),y:Math.floor(M.anchorY*ko)})),crossTileIDs:S.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new u.au(T.positions.length,16,Uint16Array);for(const{x:R,y:F}of T.positions)M.add(R,F);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[x]=T}}getScaledCoordinates(i,c){const{x:p,y:g,z:x}=this.tileID.canonical,{x:S,y:T,z:M}=c.canonical,R=ko/Math.pow(2,M-x),F=(T*u.W+i.anchorY)*R,V=g*u.W*ko;return{x:Math.floor((S*u.W+i.anchorX)*R-p*u.W*ko),y:Math.floor(F-V)}}findMatches(i,c,p){const g=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let x=0;x<i.length;x++){const S=i.get(x);if(S.crossTileID)continue;const T=this._symbolsByKey[S.key];if(!T)continue;const M=this.getScaledCoordinates(S,c);if(T.index){const R=T.index.range(M.x-g,M.y-g,M.x+g,M.y+g).sort();for(const F of R){const V=T.crossTileIDs[F];if(!p[V]){p[V]=!0,S.crossTileID=V;break}}}else if(T.positions)for(let R=0;R<T.positions.length;R++){const F=T.positions[R],V=T.crossTileIDs[R];if(Math.abs(F.x-M.x)<=g&&Math.abs(F.y-M.y)<=g&&!p[V]){p[V]=!0,S.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Js{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const c=Math.round((i-this.lng)/360);if(c!==0)for(const p in this.indexes){const g=this.indexes[p],x={};for(const S in g){const T=g[S];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+c),x[T.tileID.key]=T}this.indexes[p]=x}this.lng=i}addBucket(i,c,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let x=0;x<c.symbolInstances.length;x++)c.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const x in this.indexes){const S=this.indexes[x];if(Number(x)>i.overscaledZ)for(const T in S){const M=S[T];M.tileID.isChildOf(i)&&M.findMatches(c.symbolInstances,i,g)}else{const T=S[i.scaledTo(Number(x)).key];T&&T.findMatches(c.symbolInstances,i,g)}}for(let x=0;x<c.symbolInstances.length;x++){const S=c.symbolInstances.get(x);S.crossTileID||(S.crossTileID=p.generate(),g[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new en(i,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(i,c){for(const p of c.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let c=!1;for(const p in this.indexes){const g=this.indexes[p];for(const x in g)i[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[x]),delete g[x],c=!0)}return c}}class Dr{constructor(){this.layerIndexes={},this.crossTileIDs=new Js,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,c,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new xa);let x=!1;const S={};g.handleWrapJump(p);for(const T of c){const M=T.getBucket(i);M&&i.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(T.tileID,M,this.crossTileIDs)&&(x=!0),S[M.bucketInstanceId]=!0)}return g.removeStaleBuckets(S)&&(x=!0),x}pruneUnusedLayers(i){const c={};i.forEach(p=>{c[p]=!0});for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}const ba=(y,i)=>u.t(y,i&&i.filter(c=>c.identifier!=="source.canvas")),ji=u.av();class dc extends u.E{constructor(i,c={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const g=this.sourceCaches[p].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new zt(Nt(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,g)=>this.getGlyphs(p,g)),this.dispatcher.registerMessageHandler("GI",(p,g)=>this.getImages(p,g)),this.imageManager=new He,this.imageManager.setEventedParent(this),this.glyphManager=new Pe(i._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Ve(256,512),this.crossTileSymbolIndex=new Dr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ax()),Jr().on(yr,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const g=this.sourceCaches[p.sourceId];if(!g)return;const x=g.getSource();if(x&&x.vectorLayerIds)for(const S in this._layers){const T=this._layers[S];T.source===x.id&&this._validateLayer(T)}})}loadURL(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const g=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController,u.h(g,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,c,p)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new u.j(x))})}loadJSON(i,c={},p){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(i,c,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(ji,{validate:!1})}_load(i,c,p){var g;const x=c.transformStyle?c.transformStyle(p,i):i;if(!c.validate||!ba(this,u.x(x))){this._loaded=!0,this.stylesheet=x;for(const S in x.sources)this.addSource(S,x.sources[S],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new $e(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const i=u.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of i){const p=u.az(c);p.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=p}}_loadSprite(i,c=!1,p=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,S,T,M){return u._(this,void 0,void 0,function*(){const R=ke(x),F=T>1?"@2x":"",V={},X={};for(const{id:re,url:ie}of R){const ce=S.transformRequest(S.normalizeSpriteURL(ie,F,".json"),"SpriteJSON");V[re]=u.h(ce,M);const te=S.transformRequest(S.normalizeSpriteURL(ie,F,".png"),"SpriteImage");X[re]=$.getImage(te,M)}return yield Promise.all([...Object.values(V),...Object.values(X)]),function(re,ie){return u._(this,void 0,void 0,function*(){const ce={};for(const te in re){ce[te]={};const me=k.getImageCanvasContext((yield ie[te]).data),Te=(yield re[te]).data;for(const ue in Te){const{width:_e,height:Ie,x:Re,y:Fe,sdf:Ke,pixelRatio:qe,stretchX:tt,stretchY:ut,content:Dt,textFitWidth:nt,textFitHeight:St}=Te[ue];ce[te][ue]={data:null,pixelRatio:qe,sdf:Ke,stretchX:tt,stretchY:ut,content:Dt,textFitWidth:nt,textFitHeight:St,spriteData:{width:_e,height:Ie,x:Re,y:Fe,context:me}}}}return ce})}(V,X)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const S in x){this._spritesImagesIds[S]=[];const T=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(M=>!(M in x)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in x[S]){const R=S==="default"?M:`${S}:${M}`;this._spritesImagesIds[S].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,x[S][M],!1):this.imageManager.addImage(R,x[S][M]),c&&(this._changedImages[R]=!0)}}}).catch(x=>{this._spriteRequest=null,g=x,this.fire(new u.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(i){const c=this.sourceCaches[i.source];if(!c)return;const p=i.sourceLayer;if(!p)return;const g=c.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const c=this._serializedAllLayers();if(!i||i.length===0)return Object.values(c);const p=[];for(const g of i)c[g]&&p.push(c[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const c=this._changed;if(c){const g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(const S in this._updatedSources){const T=this._updatedSources[S];if(T==="reload")this._reloadSource(S);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const x=this.sourceCaches[g];p[g]=x.used,x.used=!1}for(const g of this._order){const x=this._layers[g];x.recalculate(i,this._availableImages),!x.isHidden(i.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const g in p){const x=this.sourceCaches[g];!!p[g]!=!!x.used&&x.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,c={}){var p;this._checkLoaded();const g=this.serialize();if(i=c.transformStyle?c.transformStyle(g,i):i,((p=c.validate)===null||p===void 0||p)&&ba(this,u.x(i)))return!1;(i=u.aA(i)).layers=u.ay(i.layers);const x=u.aB(g,i),S=this._getOperationsToPerform(x);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const T of S.operations)T();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const c=[],p=[];for(const g of i)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":c.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":c.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":c.push(()=>{});break;default:p.push(g.command)}return{operations:c,unimplemented:p}}addImage(i,c){if(this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,c),this._afterImageUpdated(i)}updateImage(i,c){this.imageManager.updateImage(i,c)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,c,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.x.source,`sources.${i}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const g=this.sourceCaches[i]=new et(i,c,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const c=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,c){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,c,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new u.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(i.type==="custom"){if(ba(this,u.aC(i)))return;x=u.az(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=u.aA(i),i=u.e(i,{source:g})),this._validate(u.x.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;x=u.az(i),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new u.j(new Error(`Cannot add layer "${g}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){const T=this._removedLayers[g];delete this._removedLayers[g],T.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(i,c){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===c)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=c?this._order.indexOf(c):this._order.length;c&&g===-1?this.fire(new u.j(new Error(`Cannot move layer "${i}" before non-existing layer "${c}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const c=this._layers[i];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${i}".`)));c.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=c,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],c.onRemove&&c.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,c,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===c&&g.maxzoom===p||(c!=null&&(g.minzoom=c),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,c,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!u.aD(g.filter,c))return c==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(u.x.filter,`layers.${g.id}.filter`,c,null,p)||(g.filter=u.aA(c),this._updateLayer(g)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.aA(this.getLayer(i).filter)}setLayoutProperty(i,c,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?u.aD(x.getLayoutProperty(c),p)||(x.setLayoutProperty(c,p,g),this._updateLayer(x)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,c){const p=this.getLayer(i);if(p)return p.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,c,p,g={}){this._checkLoaded();const x=this.getLayer(i);x?u.aD(x.getPaintProperty(c),p)||(x.setPaintProperty(c,p,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,c){return this.getLayer(i).getPaintProperty(c)}setFeatureState(i,c){this._checkLoaded();const p=i.source,g=i.sourceLayer,x=this.sourceCaches[p];if(x===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const S=x.getSource().type;S==="geojson"&&g?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||g?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,i.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,c){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new u.j(new Error(`The source '${p}' does not exist in the map's style.`)));const x=g.getSource().type,S=x==="vector"?i.sourceLayer:void 0;x!=="vector"||S?c&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(S,i.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const c=i.source,p=i.sourceLayer,g=this.sourceCaches[c];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=u.aE(this.sourceCaches,x=>x.serialize()),c=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return u.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:c,terrain:p},x=>x!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const c=S=>this._layers[S].type==="fill-extrusion",p={},g=[];for(let S=this._order.length-1;S>=0;S--){const T=this._order[S];if(c(T)){p[T]=S;for(const M of i){const R=M[T];if(R)for(const F of R)g.push(F)}}}g.sort((S,T)=>T.intersectionZ-S.intersectionZ);const x=[];for(let S=this._order.length-1;S>=0;S--){const T=this._order[S];if(c(T))for(let M=g.length-1;M>=0;M--){const R=g[M].feature;if(p[R.layer.id]<S)break;x.push(R),g.pop()}else for(const M of i){const R=M[T];if(R)for(const F of R)x.push(F.feature)}}return x}queryRenderedFeatures(i,c,p){c&&c.filter&&this._validate(u.x.filter,"queryRenderedFeatures.filter",c.filter,null,c);const g={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const T of c.layers){const M=this._layers[T];if(!M)return this.fire(new u.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];g[M.source]=!0}}const x=[];c.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const T in this.sourceCaches)c.layers&&!g[T]||x.push(xr(this.sourceCaches[T],this._layers,S,i,c,p));return this.placement&&x.push(function(T,M,R,F,V,X,re){const ie={},ce=X.queryRenderedSymbols(F),te=[];for(const me of Object.keys(ce).map(Number))te.push(re[me]);te.sort(Cr);for(const me of te){const Te=me.featureIndex.lookupSymbolFeatures(ce[me.bucketInstanceId],M,me.bucketIndex,me.sourceLayerIndex,V.filter,V.layers,V.availableImages,T);for(const ue in Te){const _e=ie[ue]=ie[ue]||[],Ie=Te[ue];Ie.sort((Re,Fe)=>{const Ke=me.featureSortOrder;if(Ke){const qe=Ke.indexOf(Re.featureIndex);return Ke.indexOf(Fe.featureIndex)-qe}return Fe.featureIndex-Re.featureIndex});for(const Re of Ie)_e.push(Re)}}for(const me in ie)ie[me].forEach(Te=>{const ue=Te.feature,_e=R[T[me].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=_e});return ie}(this._layers,S,this.sourceCaches,i,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(i,c){c&&c.filter&&this._validate(u.x.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.sourceCaches[i];return p?function(g,x){const S=g.getRenderableIds().map(R=>g.getTileByID(R)),T=[],M={};for(let R=0;R<S.length;R++){const F=S[R],V=F.tileID.canonical.key;M[V]||(M[V]=!0,F.querySourceFeatures(T,x))}return T}(p,c):[]}getLight(){return this.light.getLight()}setLight(i,c={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const S in i)if(!u.aD(i[S],p[S])){g=!0;break}if(!g)return;const x={now:k.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,c),this.light.updateTransitions(x)}_validate(i,c,p,g,x={}){return(!x||x.validate!==!1)&&ba(this,i.call(u.x,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.v},g)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Jr().off(yr,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const p=this.sourceCaches[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const c in this.sourceCaches)this.sourceCaches[c].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,c,p,g,x=!1){let S=!1,T=!1;const M={};for(const R of this._order){const F=this._layers[R];if(F.type!=="symbol")continue;if(!M[F.source]){const X=this.sourceCaches[F.source];M[F.source]=X.getRenderableIds(!0).map(re=>X.getTileByID(re)).sort((re,ie)=>ie.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(ie.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(F,M[F.source],i.center.lng);S=S||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),i.zoom))&&(this.pauseablePlacement=new kf(i,this.map.terrain,this._order,x,c,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),T=!0),S&&this.pauseablePlacement.placement.setStale()),T||S)for(const R of this._order){const F=this._layers[R];F.type==="symbol"&&this.placement.updateLayerOpacities(F,M[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,c.icons),p})}getGlyphs(i,c){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),g=this.sourceCaches[c.source];return g&&g.setDependencies(c.tileID.key,c.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,c={}){this._checkLoaded(),i&&this._validate(u.x.glyphs,"glyphs",i,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,c,p={},g){this._checkLoaded();const x=[{id:i,url:c}],S=[...ke(this.stylesheet.sprite),...x];this._validate(u.x.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(x,!0,g))}removeSprite(i){this._checkLoaded();const c=ke(this.stylesheet.sprite);if(c.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex(p=>p.id===i),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ke(this.stylesheet.sprite)}setSprite(i,c={},p){this._checkLoaded(),i&&this._validate(u.x.sprite,"sprite",i,null,c)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var uo=u.X([{name:"a_pos",type:"Int16",components:2}]),qu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const rs={prelude:or(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:or(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:or(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:or(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:or("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:or(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:or(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:or("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:or("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:or("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:or(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:or(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:or(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:or(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:or(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:or(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:or(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:or(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:or(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:or(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:or(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:or(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:or(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:or(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:or("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",qu),terrainDepth:or("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",qu),terrainCoords:or("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",qu)};function or(y,i){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=x?x.concat(g):g,T={};return{fragmentSource:y=y.replace(c,(M,R,F,V,X)=>(T[X]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${F} ${V} ${X};
#else
uniform ${F} ${V} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${F} ${V} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(c,(M,R,F,V,X)=>{const re=V==="float"?"vec2":"vec4",ie=X.match(/color/)?"color":re;return T[X]?R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${F} ${re} a_${X};
varying ${F} ${V} ${X};
#else
uniform ${F} ${V} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${F} ${V} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${F} ${V} ${X} = u_${X};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${F} ${re} a_${X};
#else
uniform ${F} ${V} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${V} ${X} = a_${X};
#else
    ${F} ${V} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${V} ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${F} ${V} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:S}}class hc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,c,p,g,x,S,T,M,R){this.context=i;let F=this.boundPaintVertexBuffers.length!==g.length;for(let V=0;!F&&V<g.length;V++)this.boundPaintVertexBuffers[V]!==g[V]&&(F=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||F||this.boundIndexBuffer!==x||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==R?this.freshBind(c,p,g,x,S,T,M,R):(i.bindVertexArray.set(this.vao),T&&T.bind(),x&&x.dynamicDraw&&x.bind(),M&&M.bind(),R&&R.bind())}freshBind(i,c,p,g,x,S,T,M){const R=i.numAttributes,F=this.context,V=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,c.enableAttributes(V,i);for(const X of p)X.enableAttributes(V,i);S&&S.enableAttributes(V,i),T&&T.enableAttributes(V,i),M&&M.enableAttributes(V,i),c.bind(),c.setVertexAttribPointers(V,i,x);for(const X of p)X.bind(),X.setVertexAttribPointers(V,i,x);S&&(S.bind(),S.setVertexAttribPointers(V,i,x)),g&&g.bind(),T&&(T.bind(),T.setVertexAttribPointers(V,i,x)),M&&(M.bind(),M.setVertexAttribPointers(V,i,x)),F.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function ns(y){const i=[];for(let c=0;c<y.length;c++){if(y[c]===null)continue;const p=y[c].split(" ");i.push(p.pop())}return i}class Zu{constructor(i,c,p,g,x,S){const T=i.gl;this.program=T.createProgram();const M=ns(c.staticAttributes),R=p?p.getBinderAttributes():[],F=M.concat(R),V=rs.prelude.staticUniforms?ns(rs.prelude.staticUniforms):[],X=c.staticUniforms?ns(c.staticUniforms):[],re=p?p.getBinderUniforms():[],ie=V.concat(X).concat(re),ce=[];for(const Re of ie)ce.indexOf(Re)<0&&ce.push(Re);const te=p?p.defines():[];x&&te.push("#define OVERDRAW_INSPECTOR;"),S&&te.push("#define TERRAIN3D;");const me=te.concat(rs.prelude.fragmentSource,c.fragmentSource).join(`
`),Te=te.concat(rs.prelude.vertexSource,c.vertexSource).join(`
`),ue=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ue,me),T.compileShader(ue),!T.getShaderParameter(ue,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ue)}`);T.attachShader(this.program,ue);const _e=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(_e,Te),T.compileShader(_e),!T.getShaderParameter(_e,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(_e)}`);T.attachShader(this.program,_e),this.attributes={};const Ie={};this.numAttributes=F.length;for(let Re=0;Re<this.numAttributes;Re++)F[Re]&&(T.bindAttribLocation(this.program,Re,F[Re]),this.attributes[F[Re]]=Re);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(_e),T.deleteShader(ue);for(let Re=0;Re<ce.length;Re++){const Fe=ce[Re];if(Fe&&!Ie[Fe]){const Ke=T.getUniformLocation(this.program,Fe);Ke&&(Ie[Fe]=Ke)}}this.fixedUniforms=g(i,Ie),this.terrainUniforms=((Re,Fe)=>({u_depth:new u.aG(Re,Fe.u_depth),u_terrain:new u.aG(Re,Fe.u_terrain),u_terrain_dim:new u.aH(Re,Fe.u_terrain_dim),u_terrain_matrix:new u.aI(Re,Fe.u_terrain_matrix),u_terrain_unpack:new u.aJ(Re,Fe.u_terrain_unpack),u_terrain_exaggeration:new u.aH(Re,Fe.u_terrain_exaggeration)}))(i,Ie),this.binderUniforms=p?p.getUniforms(i,Ie):[]}draw(i,c,p,g,x,S,T,M,R,F,V,X,re,ie,ce,te,me,Te){const ue=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(x),i.setCullFace(S),M){i.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,M.depthTexture),i.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,M.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(M[Ie])}for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(T[Ie]);ce&&ce.setUniforms(i,this.binderUniforms,re,{zoom:ie});let _e=0;switch(c){case ue.LINES:_e=2;break;case ue.TRIANGLES:_e=3;break;case ue.LINE_STRIP:_e=1}for(const Ie of X.get()){const Re=Ie.vaos||(Ie.vaos={});(Re[R]||(Re[R]=new hc)).bind(i,this,F,ce?ce.getPaintVertexBuffers():[],V,Ie.vertexOffset,te,me,Te),ue.drawElements(c,Ie.primitiveLength*_e,ue.UNSIGNED_SHORT,Ie.primitiveOffset*_e*2)}}}function fc(y,i,c){const p=1/At(c,1,i.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),x=c.tileSize*Math.pow(2,i.transform.tileZoom)/g,S=x*(c.tileID.canonical.x+c.tileID.wrap*g),T=x*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[S>>16,T>>16],u_pixel_coord_lower:[65535&S,65535&T]}}const Qs=(y,i,c,p)=>{const g=i.style.light,x=g.properties.get("position"),S=[x.x,x.y,x.z],T=function(){var R=new u.A(9);return u.A!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();g.properties.get("anchor")==="viewport"&&function(R,F){var V=Math.sin(F),X=Math.cos(F);R[0]=X,R[1]=V,R[2]=0,R[3]=-V,R[4]=X,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(T,-i.transform.angle),function(R,F,V){var X=F[0],re=F[1],ie=F[2];R[0]=X*V[0]+re*V[3]+ie*V[6],R[1]=X*V[1]+re*V[4]+ie*V[7],R[2]=X*V[2]+re*V[5]+ie*V[8]}(S,S,T);const M=g.properties.get("color");return{u_matrix:y,u_lightpos:S,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+c,u_opacity:p}},Ku=(y,i,c,p,g,x,S)=>u.e(Qs(y,i,c,p),fc(x,i,S),{u_height_factor:-Math.pow(2,g.overscaledZ)/S.tileSize/8}),pc=y=>({u_matrix:y}),el=(y,i,c,p)=>u.e(pc(y),fc(c,i,p)),mc=(y,i)=>({u_matrix:y,u_world:i}),tl=(y,i,c,p,g)=>u.e(el(y,i,c,p),{u_world:g}),gy=(y,i,c,p)=>{const g=y.transform;let x,S;if(p.paint.get("circle-pitch-alignment")==="map"){const T=At(c,1,g.zoom);x=!0,S=[T,T]}else x=!1,S=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,c,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:S}},yy=(y,i,c)=>{const p=At(c,1,i.zoom),g=Math.pow(2,i.zoom-c.tileID.overscaledZ),x=c.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:x}},Xu=(y,i,c=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:c}),Af=y=>({u_matrix:y}),wa=(y,i,c,p)=>({u_matrix:y,u_extrude_scale:At(i,1,c),u_intensity:p});function gc(y,i){const c=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.Y(0,p/c).toLngLat().lat,new u.Y(0,(p+1)/c).toLngLat().lat]}const Bn=(y,i,c,p)=>{const g=y.transform;return{u_matrix:Qu(y,i,c,p),u_ratio:1/At(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},fi=(y,i,c,p,g)=>u.e(Bn(y,i,c,g),{u_image:0,u_image_height:p}),Yu=(y,i,c,p,g)=>{const x=y.transform,S=Ju(i,x);return{u_matrix:Qu(y,i,c,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/At(i,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},yc=(y,i,c,p,g,x)=>{const S=y.lineAtlas,T=Ju(i,y.transform),M=c.layout.get("line-cap")==="round",R=S.getDash(p.from,M),F=S.getDash(p.to,M),V=R.width*g.fromScale,X=F.width*g.toScale;return u.e(Bn(y,i,c,x),{u_patternscale_a:[T/V,-R.height/2],u_patternscale_b:[T/X,-F.height/2],u_sdfgamma:S.width/(256*Math.min(V,X)*y.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:F.y,u_mix:g.t})};function Ju(y,i){return 1/At(y,1,i.tileZoom)}function Qu(y,i,c,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const is=(y,i,c,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:c,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:vy(g.paint.get("raster-hue-rotate"))};var x,S};function vy(y){y*=Math.PI/180;const i=Math.sin(y),c=Math.cos(y);return[(2*c+1)/3,(-Math.sqrt(3)*i-c+1)/3,(Math.sqrt(3)*i-c+1)/3]}const Rf=(y,i,c,p,g,x,S,T,M,R)=>{const F=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:F.width/F.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:S,u_coord_matrix:T,u_is_text:+M,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},zf=(y,i,c,p,g,x,S,T,M,R,F)=>{const V=g.transform;return u.e(Rf(y,i,c,p,g,x,S,T,M,R),{u_gamma_scale:p?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+F})},_y=(y,i,c,p,g,x,S,T,M,R)=>u.e(zf(y,i,c,p,g,x,S,T,!0,M,!0),{u_texsize_icon:R,u_texture_icon:1}),xy=(y,i,c)=>({u_matrix:y,u_opacity:i,u_color:c}),by=(y,i,c,p,g,x)=>u.e(function(S,T,M,R){const F=M.imageManager.getPattern(S.from.toString()),V=M.imageManager.getPattern(S.to.toString()),{width:X,height:re}=M.imageManager.getPixelSize(),ie=Math.pow(2,R.tileID.overscaledZ),ce=R.tileSize*Math.pow(2,M.transform.tileZoom)/ie,te=ce*(R.tileID.canonical.x+R.tileID.wrap*ie),me=ce*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[X,re],u_mix:T.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/At(R,1,M.transform.tileZoom),u_pixel_coord_upper:[te>>16,me>>16],u_pixel_coord_lower:[65535&te,65535&me]}}(p,x,c,g),{u_matrix:y,u_opacity:i}),vc={fillExtrusion:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_lightpos:new u.aK(y,i.u_lightpos),u_lightintensity:new u.aH(y,i.u_lightintensity),u_lightcolor:new u.aK(y,i.u_lightcolor),u_vertical_gradient:new u.aH(y,i.u_vertical_gradient),u_opacity:new u.aH(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_lightpos:new u.aK(y,i.u_lightpos),u_lightintensity:new u.aH(y,i.u_lightintensity),u_lightcolor:new u.aK(y,i.u_lightcolor),u_vertical_gradient:new u.aH(y,i.u_vertical_gradient),u_height_factor:new u.aH(y,i.u_height_factor),u_image:new u.aG(y,i.u_image),u_texsize:new u.aL(y,i.u_texsize),u_pixel_coord_upper:new u.aL(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,i.u_pixel_coord_lower),u_scale:new u.aK(y,i.u_scale),u_fade:new u.aH(y,i.u_fade),u_opacity:new u.aH(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_image:new u.aG(y,i.u_image),u_texsize:new u.aL(y,i.u_texsize),u_pixel_coord_upper:new u.aL(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,i.u_pixel_coord_lower),u_scale:new u.aK(y,i.u_scale),u_fade:new u.aH(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_world:new u.aL(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_world:new u.aL(y,i.u_world),u_image:new u.aG(y,i.u_image),u_texsize:new u.aL(y,i.u_texsize),u_pixel_coord_upper:new u.aL(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,i.u_pixel_coord_lower),u_scale:new u.aK(y,i.u_scale),u_fade:new u.aH(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_scale_with_map:new u.aG(y,i.u_scale_with_map),u_pitch_with_map:new u.aG(y,i.u_pitch_with_map),u_extrude_scale:new u.aL(y,i.u_extrude_scale),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_matrix:new u.aI(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.aH(y,i.u_pixels_to_tile_units),u_extrude_scale:new u.aL(y,i.u_extrude_scale),u_overscale_factor:new u.aH(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_inv_matrix:new u.aI(y,i.u_inv_matrix),u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_viewport_size:new u.aL(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new u.aM(y,i.u_color),u_matrix:new u.aI(y,i.u_matrix),u_overlay:new u.aG(y,i.u_overlay),u_overlay_scale:new u.aH(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new u.aH(y,i.u_extrude_scale),u_intensity:new u.aH(y,i.u_intensity),u_matrix:new u.aI(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_world:new u.aL(y,i.u_world),u_image:new u.aG(y,i.u_image),u_color_ramp:new u.aG(y,i.u_color_ramp),u_opacity:new u.aH(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_image:new u.aG(y,i.u_image),u_latrange:new u.aL(y,i.u_latrange),u_light:new u.aL(y,i.u_light),u_shadow:new u.aM(y,i.u_shadow),u_highlight:new u.aM(y,i.u_highlight),u_accent:new u.aM(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_image:new u.aG(y,i.u_image),u_dimension:new u.aL(y,i.u_dimension),u_zoom:new u.aH(y,i.u_zoom),u_unpack:new u.aJ(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_ratio:new u.aH(y,i.u_ratio),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_ratio:new u.aH(y,i.u_ratio),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,i.u_units_to_pixels),u_image:new u.aG(y,i.u_image),u_image_height:new u.aH(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_texsize:new u.aL(y,i.u_texsize),u_ratio:new u.aH(y,i.u_ratio),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_image:new u.aG(y,i.u_image),u_units_to_pixels:new u.aL(y,i.u_units_to_pixels),u_scale:new u.aK(y,i.u_scale),u_fade:new u.aH(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_ratio:new u.aH(y,i.u_ratio),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_units_to_pixels:new u.aL(y,i.u_units_to_pixels),u_patternscale_a:new u.aL(y,i.u_patternscale_a),u_patternscale_b:new u.aL(y,i.u_patternscale_b),u_sdfgamma:new u.aH(y,i.u_sdfgamma),u_image:new u.aG(y,i.u_image),u_tex_y_a:new u.aH(y,i.u_tex_y_a),u_tex_y_b:new u.aH(y,i.u_tex_y_b),u_mix:new u.aH(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_tl_parent:new u.aL(y,i.u_tl_parent),u_scale_parent:new u.aH(y,i.u_scale_parent),u_buffer_scale:new u.aH(y,i.u_buffer_scale),u_fade_t:new u.aH(y,i.u_fade_t),u_opacity:new u.aH(y,i.u_opacity),u_image0:new u.aG(y,i.u_image0),u_image1:new u.aG(y,i.u_image1),u_brightness_low:new u.aH(y,i.u_brightness_low),u_brightness_high:new u.aH(y,i.u_brightness_high),u_saturation_factor:new u.aH(y,i.u_saturation_factor),u_contrast_factor:new u.aH(y,i.u_contrast_factor),u_spin_weights:new u.aK(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new u.aG(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,i.u_is_size_feature_constant),u_size_t:new u.aH(y,i.u_size_t),u_size:new u.aH(y,i.u_size),u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_pitch:new u.aH(y,i.u_pitch),u_rotate_symbol:new u.aG(y,i.u_rotate_symbol),u_aspect_ratio:new u.aH(y,i.u_aspect_ratio),u_fade_change:new u.aH(y,i.u_fade_change),u_matrix:new u.aI(y,i.u_matrix),u_label_plane_matrix:new u.aI(y,i.u_label_plane_matrix),u_coord_matrix:new u.aI(y,i.u_coord_matrix),u_is_text:new u.aG(y,i.u_is_text),u_pitch_with_map:new u.aG(y,i.u_pitch_with_map),u_texsize:new u.aL(y,i.u_texsize),u_texture:new u.aG(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new u.aG(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,i.u_is_size_feature_constant),u_size_t:new u.aH(y,i.u_size_t),u_size:new u.aH(y,i.u_size),u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_pitch:new u.aH(y,i.u_pitch),u_rotate_symbol:new u.aG(y,i.u_rotate_symbol),u_aspect_ratio:new u.aH(y,i.u_aspect_ratio),u_fade_change:new u.aH(y,i.u_fade_change),u_matrix:new u.aI(y,i.u_matrix),u_label_plane_matrix:new u.aI(y,i.u_label_plane_matrix),u_coord_matrix:new u.aI(y,i.u_coord_matrix),u_is_text:new u.aG(y,i.u_is_text),u_pitch_with_map:new u.aG(y,i.u_pitch_with_map),u_texsize:new u.aL(y,i.u_texsize),u_texture:new u.aG(y,i.u_texture),u_gamma_scale:new u.aH(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_is_halo:new u.aG(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new u.aG(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aG(y,i.u_is_size_feature_constant),u_size_t:new u.aH(y,i.u_size_t),u_size:new u.aH(y,i.u_size),u_camera_to_center_distance:new u.aH(y,i.u_camera_to_center_distance),u_pitch:new u.aH(y,i.u_pitch),u_rotate_symbol:new u.aG(y,i.u_rotate_symbol),u_aspect_ratio:new u.aH(y,i.u_aspect_ratio),u_fade_change:new u.aH(y,i.u_fade_change),u_matrix:new u.aI(y,i.u_matrix),u_label_plane_matrix:new u.aI(y,i.u_label_plane_matrix),u_coord_matrix:new u.aI(y,i.u_coord_matrix),u_is_text:new u.aG(y,i.u_is_text),u_pitch_with_map:new u.aG(y,i.u_pitch_with_map),u_texsize:new u.aL(y,i.u_texsize),u_texsize_icon:new u.aL(y,i.u_texsize_icon),u_texture:new u.aG(y,i.u_texture),u_texture_icon:new u.aG(y,i.u_texture_icon),u_gamma_scale:new u.aH(y,i.u_gamma_scale),u_device_pixel_ratio:new u.aH(y,i.u_device_pixel_ratio),u_is_halo:new u.aG(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_opacity:new u.aH(y,i.u_opacity),u_color:new u.aM(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_opacity:new u.aH(y,i.u_opacity),u_image:new u.aG(y,i.u_image),u_pattern_tl_a:new u.aL(y,i.u_pattern_tl_a),u_pattern_br_a:new u.aL(y,i.u_pattern_br_a),u_pattern_tl_b:new u.aL(y,i.u_pattern_tl_b),u_pattern_br_b:new u.aL(y,i.u_pattern_br_b),u_texsize:new u.aL(y,i.u_texsize),u_mix:new u.aH(y,i.u_mix),u_pattern_size_a:new u.aL(y,i.u_pattern_size_a),u_pattern_size_b:new u.aL(y,i.u_pattern_size_b),u_scale_a:new u.aH(y,i.u_scale_a),u_scale_b:new u.aH(y,i.u_scale_b),u_pixel_coord_upper:new u.aL(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.aL(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aH(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_texture:new u.aG(y,i.u_texture),u_ele_delta:new u.aH(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_ele_delta:new u.aH(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new u.aI(y,i.u_matrix),u_texture:new u.aG(y,i.u_texture),u_terrain_coords_id:new u.aH(y,i.u_terrain_coords_id),u_ele_delta:new u.aH(y,i.u_ele_delta)})};class ed{constructor(i,c,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const _c={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class td{constructor(i,c,p,g){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=g,this.context=i;const x=i.gl;this.buffer=x.createBuffer(),i.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,c){for(let p=0;p<this.attributes.length;p++){const g=c.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,c,p){for(let g=0;g<this.attributes.length;g++){const x=this.attributes[g],S=c.attributes[x.name];S!==void 0&&i.vertexAttribPointer(S,x.components,i[_c[x.type]],!1,this.itemSize,x.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const rl=new WeakMap;function pi(y){var i;if(rl.has(y))return rl.get(y);{const c=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return rl.set(y,c),c}}class ar{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rd extends ar{getDefault(){return u.aO.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class nl extends ar{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class il extends ar{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class wy extends ar{getDefault(){return[!0,!0,!0,!0]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xc extends ar{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Sy extends ar{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class os extends ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const c=this.current;(i.func!==c.func||i.ref!==c.ref||i.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Cy extends ar{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Lf extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ey extends ar{getDefault(){return[0,1]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Of extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=i,this.dirty=!1}}class nd extends ar{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Df extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.BLEND):c.disable(c.BLEND),this.current=i,this.dirty=!1}}class Ff extends ar{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Bf extends ar{getDefault(){return u.aO.transparent}set(i){const c=this.current;(i.r!==c.r||i.g!==c.g||i.b!==c.b||i.a!==c.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class $f extends ar{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Sa extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;i?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=i,this.dirty=!1}}class Nf extends ar{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Ty extends ar{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Iy extends ar{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class jf extends ar{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class ol extends ar{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const c=this.current;(i[0]!==c[0]||i[1]!==c[1]||i[2]!==c[2]||i[3]!==c[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Py extends ar{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class bc extends ar{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class My extends ar{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ky extends ar{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Vf extends ar{getDefault(){return null}set(i){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Uf extends ar{getDefault(){return null}set(i){var c;if(i===this.current&&!this.dirty)return;const p=this.gl;pi(p)?p.bindVertexArray(i):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Hf extends ar{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class id extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Wf extends ar{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class as extends ar{constructor(i,c){super(i),this.context=i,this.parent=c}getDefault(){return null}}class Ao extends as{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class od extends as{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ad extends as{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class sd{constructor(i,c,p,g,x){this.context=i,this.width=c,this.height=p;const S=i.gl,T=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Ao(i,T),g)this.depthAttachment=x?new ad(i,T):new od(i,T);else if(x)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,c=this.colorAttachment.get();if(c&&i.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Fr{constructor(i,c,p){this.blendFunction=i,this.blendColor=c,this.mask=p}}Fr.Replace=[1,0],Fr.disabled=new Fr(Fr.Replace,u.aO.transparent,[!1,!1,!1,!1]),Fr.unblended=new Fr(Fr.Replace,u.aO.transparent,[!0,!0,!0,!0]),Fr.alphaBlended=new Fr([1,771],u.aO.transparent,[!0,!0,!0,!0]);class ld{constructor(i){var c,p;if(this.gl=i,this.clearColor=new rd(this),this.clearDepth=new nl(this),this.clearStencil=new il(this),this.colorMask=new wy(this),this.depthMask=new xc(this),this.stencilMask=new Sy(this),this.stencilFunc=new os(this),this.stencilOp=new Cy(this),this.stencilTest=new Lf(this),this.depthRange=new Ey(this),this.depthTest=new Of(this),this.depthFunc=new nd(this),this.blend=new Df(this),this.blendFunc=new Ff(this),this.blendColor=new Bf(this),this.blendEquation=new $f(this),this.cullFace=new Sa(this),this.cullFaceSide=new Nf(this),this.frontFace=new Ty(this),this.program=new Iy(this),this.activeTexture=new jf(this),this.viewport=new ol(this),this.bindFramebuffer=new Py(this),this.bindRenderbuffer=new bc(this),this.bindTexture=new My(this),this.bindVertexBuffer=new ky(this),this.bindElementBuffer=new Vf(this),this.bindVertexArray=new Uf(this),this.pixelStoreUnpack=new Hf(this),this.pixelStoreUnpackPremultiplyAlpha=new id(this),this.pixelStoreUnpackFlipY=new Wf(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),pi(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=i.RGBA16F)!==null&&c!==void 0?c:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,c){return new ed(this,i,c)}createVertexBuffer(i,c,p){return new td(this,i,c,p)}createRenderbuffer(i,c,p){const g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,i,c,p),this.bindRenderbuffer.set(null),x}createFramebuffer(i,c,p,g){return new sd(this,i,c,p,g)}clear({color:i,depth:c,stencil:p}){const g=this.gl;let x=0;i&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(x)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){u.aD(i.blendFunction,Fr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return pi(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var c;return pi(this.gl)?this.gl.deleteVertexArray(i):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class qt{constructor(i,c,p){this.func=i,this.mask=c,this.range=p}}qt.ReadOnly=!1,qt.ReadWrite=!0,qt.disabled=new qt(519,qt.ReadOnly,[0,1]);const al=7680;class Ir{constructor(i,c,p,g,x,S){this.test=i,this.ref=c,this.mask=p,this.fail=g,this.depthFail=x,this.pass=S}}Ir.disabled=new Ir({func:519,mask:0},0,0,al,al,al);class wr{constructor(i,c,p){this.enable=i,this.mode=c,this.frontFace=p}}let wc;function Gf(y,i,c,p,g,x,S){const T=y.context,M=T.gl,R=y.useProgram("collisionBox"),F=[];let V=0,X=0;for(let ue=0;ue<p.length;ue++){const _e=p[ue],Ie=i.getTile(_e),Re=Ie.getBucket(c);if(!Re)continue;let Fe=_e.posMatrix;g[0]===0&&g[1]===0||(Fe=y.translatePosMatrix(_e.posMatrix,Ie,g,x));const Ke=S?Re.textCollisionBox:Re.iconCollisionBox,qe=Re.collisionCircleArray;if(qe.length>0){const tt=u.F(),ut=Fe;u.aP(tt,Re.placementInvProjMatrix,y.transform.glCoordMatrix),u.aP(tt,tt,Re.placementViewportMatrix),F.push({circleArray:qe,circleOffset:X,transform:ut,invTransform:tt,coord:_e}),V+=qe.length/4,X=V}Ke&&R.draw(T,M.LINES,qt.disabled,Ir.disabled,y.colorModeForRenderPass(),wr.disabled,yy(Fe,y.transform,Ie),y.style.map.terrain&&y.style.map.terrain.getTerrainData(_e),c.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,y.transform.zoom,null,null,Ke.collisionVertexBuffer)}if(!S||!F.length)return;const re=y.useProgram("collisionCircle"),ie=new u.aQ;ie.resize(4*V),ie._trim();let ce=0;for(const ue of F)for(let _e=0;_e<ue.circleArray.length/4;_e++){const Ie=4*_e,Re=ue.circleArray[Ie+0],Fe=ue.circleArray[Ie+1],Ke=ue.circleArray[Ie+2],qe=ue.circleArray[Ie+3];ie.emplace(ce++,Re,Fe,Ke,qe,0),ie.emplace(ce++,Re,Fe,Ke,qe,1),ie.emplace(ce++,Re,Fe,Ke,qe,2),ie.emplace(ce++,Re,Fe,Ke,qe,3)}(!wc||wc.length<2*V)&&(wc=function(ue){const _e=2*ue,Ie=new u.aS;Ie.resize(_e),Ie._trim();for(let Re=0;Re<_e;Re++){const Fe=6*Re;Ie.uint16[Fe+0]=4*Re+0,Ie.uint16[Fe+1]=4*Re+1,Ie.uint16[Fe+2]=4*Re+2,Ie.uint16[Fe+3]=4*Re+2,Ie.uint16[Fe+4]=4*Re+3,Ie.uint16[Fe+5]=4*Re+0}return Ie}(V));const te=T.createIndexBuffer(wc,!0),me=T.createVertexBuffer(ie,u.aR.members,!0);for(const ue of F){const _e={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(Te=y.transform).cameraToCenterDistance,u_viewport_size:[Te.width,Te.height]};re.draw(T,M.TRIANGLES,qt.disabled,Ir.disabled,y.colorModeForRenderPass(),wr.disabled,_e,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ue.coord),c.id,me,te,u.$.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Te;me.destroy(),te.destroy()}wr.disabled=new wr(!1,1029,2305),wr.backCCW=new wr(!0,1029,2305);const qf=u.an(new Float32Array(16));function Ay(y,i,c,p,g,x){const{horizontalAlign:S,verticalAlign:T}=u.at(y);return new u.P((-(S-.5)*i/g+p[0])*x,(-(T-.5)*c/g+p[1])*x)}function Zf(y,i,c,p,g,x,S,T,M,R,F){const V=y.text.placedSymbolArray,X=y.text.dynamicLayoutVertexArray,re=y.icon.dynamicLayoutVertexArray,ie={};X.clear();for(let ce=0;ce<V.length;ce++){const te=V.get(ce),me=te.hidden||!te.crossTileID||y.allowVerticalPlacement&&!te.placedOrientation?null:p[te.crossTileID];if(me){const Te=new u.P(te.anchorX,te.anchorY),ue=Er(Te,c?S:x,F),_e=Q(g.cameraToCenterDistance,ue.signedDistanceFromCamera);let Ie=u.ai(y.textSizeData,M,te)*_e/u.ao;c&&(Ie*=y.tilePixelRatio/T);const{width:Re,height:Fe,anchor:Ke,textOffset:qe,textBoxScale:tt}=me,ut=Ay(Ke,Re,Fe,qe,tt,Ie),Dt=c?Er(Te.add(ut),x,F).point:ue.point.add(i?ut.rotate(-g.angle):ut),nt=y.allowVerticalPlacement&&te.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let St=0;St<te.numGlyphs;St++)u.aj(X,Dt,nt);R&&te.associatedIconIndex>=0&&(ie[te.associatedIconIndex]={shiftedAnchor:Dt,angle:nt})}else Be(te.numGlyphs,X)}if(R){re.clear();const ce=y.icon.placedSymbolArray;for(let te=0;te<ce.length;te++){const me=ce.get(te);if(me.hidden)Be(me.numGlyphs,re);else{const Te=ie[te];if(Te)for(let ue=0;ue<me.numGlyphs;ue++)u.aj(re,Te.shiftedAnchor,Te.angle);else Be(me.numGlyphs,re)}}y.icon.dynamicLayoutVertexBuffer.updateData(re)}y.text.dynamicLayoutVertexBuffer.updateData(X)}function Sc(y,i,c){return c.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function sl(y,i,c,p,g,x,S,T,M,R,F,V){const X=y.context,re=X.gl,ie=y.transform,ce=T==="map",te=M==="map",me=T!=="viewport"&&c.layout.get("symbol-placement")!=="point",Te=ce&&!te&&!me,ue=!c.layout.get("symbol-sort-key").isConstant();let _e=!1;const Ie=y.depthModeForSublayer(0,qt.ReadOnly),Re=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Fe=[];for(const Ke of p){const qe=i.getTile(Ke),tt=qe.getBucket(c);if(!tt)continue;const ut=g?tt.text:tt.icon;if(!ut||!ut.segments.get().length||!ut.hasVisibleVertices)continue;const Dt=ut.programConfigurations.get(c.id),nt=g||tt.sdfIcons,St=g?tt.textSizeData:tt.iconSizeData,Ft=te||ie.pitch!==0,Yt=y.useProgram(Sc(nt,g,tt),Dt),Pt=u.ag(St,ie.zoom),jt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ke);let Gt,Br,fr,gi,vn=[0,0],$r=null;if(g)Br=qe.glyphAtlasTexture,fr=re.LINEAR,Gt=qe.glyphAtlasTexture.size,tt.iconsInText&&(vn=qe.imageAtlasTexture.size,$r=qe.imageAtlasTexture,gi=Ft||y.options.rotating||y.options.zooming||St.kind==="composite"||St.kind==="camera"?re.LINEAR:re.NEAREST);else{const un=c.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;Br=qe.imageAtlasTexture,fr=nt||y.options.rotating||y.options.zooming||un||Ft?re.LINEAR:re.NEAREST,Gt=qe.imageAtlasTexture.size}const Jn=At(qe,1,y.transform.zoom),Vi=Cn(Ke.posMatrix,te,ce,y.transform,Jn),go=Xn(Ke.posMatrix,te,ce,y.transform,Jn),ca=Re&&tt.hasTextData(),fs=c.layout.get("icon-text-fit")!=="none"&&ca&&tt.hasIconData();if(me){const un=y.style.map.terrain?(ki,dn)=>y.style.map.terrain.getElevation(Ke,ki,dn):null,Ar=c.layout.get("text-rotation-alignment")==="map";U(tt,Ke.posMatrix,y,g,Vi,go,te,R,Ar,un)}const Aa=y.translatePosMatrix(Ke.posMatrix,qe,x,S),Ra=me||g&&Re||fs?qf:Vi,$n=y.translatePosMatrix(go,qe,x,S,!0),Rn=nt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Nn;Nn=nt?tt.iconsInText?_y(St.kind,Pt,Te,te,y,Aa,Ra,$n,Gt,vn):zf(St.kind,Pt,Te,te,y,Aa,Ra,$n,g,Gt,!0):Rf(St.kind,Pt,Te,te,y,Aa,Ra,$n,g,Gt);const xl={program:Yt,buffers:ut,uniformValues:Nn,atlasTexture:Br,atlasTextureIcon:$r,atlasInterpolation:fr,atlasInterpolationIcon:gi,isSDF:nt,hasHalo:Rn};if(ue&&tt.canOverlap){_e=!0;const un=ut.segments.get();for(const Ar of un)Fe.push({segments:new u.$([Ar]),sortKey:Ar.sortKey,state:xl,terrainData:jt})}else Fe.push({segments:ut.segments,sortKey:0,state:xl,terrainData:jt})}_e&&Fe.sort((Ke,qe)=>Ke.sortKey-qe.sortKey);for(const Ke of Fe){const qe=Ke.state;if(X.activeTexture.set(re.TEXTURE0),qe.atlasTexture.bind(qe.atlasInterpolation,re.CLAMP_TO_EDGE),qe.atlasTextureIcon&&(X.activeTexture.set(re.TEXTURE1),qe.atlasTextureIcon&&qe.atlasTextureIcon.bind(qe.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),qe.isSDF){const tt=qe.uniformValues;qe.hasHalo&&(tt.u_is_halo=1,ll(qe.buffers,Ke.segments,c,y,qe.program,Ie,F,V,tt,Ke.terrainData)),tt.u_is_halo=0}ll(qe.buffers,Ke.segments,c,y,qe.program,Ie,F,V,qe.uniformValues,Ke.terrainData)}}function ll(y,i,c,p,g,x,S,T,M,R){const F=p.context;g.draw(F,F.gl.TRIANGLES,x,S,T,wr.disabled,M,R,c.id,y.layoutVertexBuffer,y.indexBuffer,i,c.paint,p.transform.zoom,y.programConfigurations.get(c.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Cc(y,i,c,p,g){if(!c||!p||!p.imageAtlas)return;const x=p.imageAtlas.patternPositions;let S=x[c.to.toString()],T=x[c.from.toString()];if(!S&&T&&(S=T),!T&&S&&(T=S),!S||!T){const M=g.getPaintProperty(i);S=x[M],T=x[M]}S&&T&&y.setConstantPatternPositions(S,T)}function ra(y,i,c,p,g,x,S){const T=y.context.gl,M="fill-pattern",R=c.paint.get(M),F=R&&R.constantOr(1),V=c.getCrossfadeParameters();let X,re,ie,ce,te;S?(re=F&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=T.LINES):(re=F?"fillPattern":"fill",X=T.TRIANGLES);const me=R.constantOr(null);for(const Te of p){const ue=i.getTile(Te);if(F&&!ue.patternsLoaded())continue;const _e=ue.getBucket(c);if(!_e)continue;const Ie=_e.programConfigurations.get(c.id),Re=y.useProgram(re,Ie),Fe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Te);F&&(y.context.activeTexture.set(T.TEXTURE0),ue.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ie.updatePaintBuffers(V)),Cc(Ie,M,me,ue,c);const Ke=Fe?Te:null,qe=y.translatePosMatrix(Ke?Ke.posMatrix:Te.posMatrix,ue,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(S){ce=_e.indexBuffer2,te=_e.segments2;const tt=[T.drawingBufferWidth,T.drawingBufferHeight];ie=re==="fillOutlinePattern"&&F?tl(qe,y,V,ue,tt):mc(qe,tt)}else ce=_e.indexBuffer,te=_e.segments,ie=F?el(qe,y,V,ue):pc(qe);Re.draw(y.context,X,g,y.stencilModeForClipping(Te),x,wr.disabled,ie,Fe,c.id,_e.layoutVertexBuffer,ce,te,c.paint,y.transform.zoom,Ie)}}function na(y,i,c,p,g,x,S){const T=y.context,M=T.gl,R="fill-extrusion-pattern",F=c.paint.get(R),V=F.constantOr(1),X=c.getCrossfadeParameters(),re=c.paint.get("fill-extrusion-opacity"),ie=F.constantOr(null);for(const ce of p){const te=i.getTile(ce),me=te.getBucket(c);if(!me)continue;const Te=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ce),ue=me.programConfigurations.get(c.id),_e=y.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ue);V&&(y.context.activeTexture.set(M.TEXTURE0),te.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ue.updatePaintBuffers(X)),Cc(ue,R,ie,te,c);const Ie=y.translatePosMatrix(ce.posMatrix,te,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Re=c.paint.get("fill-extrusion-vertical-gradient"),Fe=V?Ku(Ie,y,Re,re,ce,X,te):Qs(Ie,y,Re,re);_e.draw(T,T.gl.TRIANGLES,g,x,S,wr.backCCW,Fe,Te,c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,c.paint,y.transform.zoom,ue,y.style.map.terrain&&me.centroidVertexBuffer)}}function Mi(y,i,c,p,g,x,S){const T=y.context,M=T.gl,R=c.fbo;if(!R)return;const F=y.useProgram("hillshade"),V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,R.colorAttachment.get()),F.draw(T,M.TRIANGLES,g,x,S,wr.disabled,((X,re,ie,ce)=>{const te=ie.paint.get("hillshade-shadow-color"),me=ie.paint.get("hillshade-highlight-color"),Te=ie.paint.get("hillshade-accent-color");let ue=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=X.transform.angle);const _e=!X.options.moving;return{u_matrix:ce?ce.posMatrix:X.transform.calculatePosMatrix(re.tileID.toUnwrapped(),_e),u_image:0,u_latrange:gc(0,re.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),ue],u_shadow:te,u_highlight:me,u_accent:Te}})(y,c,p,V?i:null),V,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Kf(y,i,c,p,g,x){const S=y.context,T=S.gl,M=i.dem;if(M&&M.data){const R=M.dim,F=M.stride,V=M.getPixels();if(S.activeTexture.set(T.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(F),i.demTexture){const re=i.demTexture;re.update(V,{premultiply:!1}),re.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else i.demTexture=new Ae(S,V,T.RGBA,{premultiply:!1}),i.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);S.activeTexture.set(T.TEXTURE0);let X=i.fbo;if(!X){const re=new Ae(S,{width:R,height:R,data:null},T.RGBA);re.bind(T.LINEAR,T.CLAMP_TO_EDGE),X=i.fbo=S.createFramebuffer(R,R,!0,!1),X.colorAttachment.set(re.texture)}S.bindFramebuffer.set(X.framebuffer),S.viewport.set([0,0,R,R]),y.useProgram("hillshadePrepare").draw(S,T.TRIANGLES,p,g,x,wr.disabled,((re,ie)=>{const ce=ie.stride,te=u.F();return u.aN(te,0,u.W,-u.W,0,0,1),u.H(te,te,[0,-u.W,0]),{u_matrix:te,u_image:1,u_dimension:[ce,ce],u_zoom:re.overscaledZ,u_unpack:ie.getUnpackVector()}})(i.tileID,M),null,c.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Xf(y,i,c,p,g,x){const S=p.paint.get("raster-fade-duration");if(!x&&S>0){const T=k.now(),M=(T-y.timeAdded)/S,R=i?(T-i.timeAdded)/S:-1,F=c.getSource(),V=g.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-V)>Math.abs(y.tileID.overscaledZ-V),re=X&&y.refreshedUponExpiration?1:u.ac(X?M:1-R,0,1);return y.refreshedUponExpiration&&M>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-re}:{opacity:re,mix:0}}return{opacity:1,mix:0}}const cd=new u.aO(1,0,0,1),Ca=new u.aO(0,1,0,1),Ec=new u.aO(0,0,1,1),Tc=new u.aO(1,0,1,1),cl=new u.aO(0,1,1,1);function ul(y,i,c,p){Ro(y,0,i+c/2,y.transform.width,c,p)}function ud(y,i,c,p){Ro(y,i-c/2,0,c,y.transform.height,p)}function Ro(y,i,c,p,g,x){const S=y.context,T=S.gl;T.enable(T.SCISSOR_TEST),T.scissor(i*y.pixelRatio,c*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),S.clear({color:x}),T.disable(T.SCISSOR_TEST)}function ss(y,i,c){const p=y.context,g=p.gl,x=c.posMatrix,S=y.useProgram("debug"),T=qt.disabled,M=Ir.disabled,R=y.colorModeForRenderPass(),F="$debug",V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(c);p.activeTexture.set(g.TEXTURE0);const X=i.getTileByID(c.key).latestRawTileData,re=Math.floor((X&&X.byteLength||0)/1024),ie=i.getTile(c).tileSize,ce=512/Math.min(ie,512)*(c.overscaledZ/y.transform.zoom)*.5;let te=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(te+=` => ${c.overscaledZ}`),function(me,Te){me.initDebugOverlayCanvas();const ue=me.debugOverlayCanvas,_e=me.context.gl,Ie=me.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,ue.width,ue.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(Te,5,5),Ie.strokeText(Te,5,5),me.debugOverlayTexture.update(ue),me.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(y,`${te} ${re}kB`),S.draw(p,g.TRIANGLES,T,M,Fr.alphaBlended,wr.disabled,Xu(x,u.aO.transparent,ce),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),S.draw(p,g.LINE_STRIP,T,M,R,wr.disabled,Xu(x,u.aO.red),V,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function dd(y,i,c){const p=y.context,g=p.gl,x=y.colorModeForRenderPass(),S=new qt(g.LEQUAL,qt.ReadWrite,y.depthRangeFor3D),T=y.useProgram("terrain"),M=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const R of c){const F=y.renderToTexture.getTexture(R),V=i.getTerrainData(R.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,F.texture);const X={u_matrix:y.transform.calculatePosMatrix(R.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};T.draw(p,g.TRIANGLES,S,Ir.disabled,x,wr.backCCW,X,V,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class hd{constructor(i,c){this.context=new ld(i),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=et.maxUnderzooming+et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Dr}resize(i,c,p){if(this.width=Math.floor(i*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,c=new u.aV;c.emplaceBack(0,0),c.emplaceBack(u.W,0),c.emplaceBack(0,u.W),c.emplaceBack(u.W,u.W),this.tileExtentBuffer=i.createVertexBuffer(c,uo.members),this.tileExtentSegments=u.$.simpleSegment(0,0,4,2);const p=new u.aV;p.emplaceBack(0,0),p.emplaceBack(u.W,0),p.emplaceBack(0,u.W),p.emplaceBack(u.W,u.W),this.debugBuffer=i.createVertexBuffer(p,uo.members),this.debugSegments=u.$.simpleSegment(0,0,4,5);const g=new u.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(u.W,0,u.W,0),g.emplaceBack(0,u.W,0,u.W),g.emplaceBack(u.W,u.W,u.W,u.W),this.rasterBoundsBuffer=i.createVertexBuffer(g,Mt.members),this.rasterBoundsSegments=u.$.simpleSegment(0,0,4,2);const x=new u.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(x,uo.members),this.viewportSegments=u.$.simpleSegment(0,0,4,2);const S=new u.aW;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const T=new u.aX;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new Ir({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const i=this.context,c=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.F();u.aN(p,0,this.width,this.height,0,0,1),u.J(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,c.TRIANGLES,qt.disabled,this.stencilClearMode,Fr.disabled,wr.disabled,Af(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,c){if(this.currentStencilSource===i.source||!i.isTileClipped()||!c||!c.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+c.length>256&&this.clearStencil(),p.setColorMode(Fr.disabled),p.setDepthMode(qt.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of c){const T=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);x.draw(p,g.TRIANGLES,qt.disabled,new Ir({func:g.ALWAYS,mask:0},T,255,g.KEEP,g.KEEP,g.REPLACE),Fr.disabled,wr.disabled,Af(S.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,c=this.context.gl;return new Ir({func:c.NOTEQUAL,mask:255},i,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(i){const c=this.context.gl;return new Ir({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(i){const c=this.context.gl,p=i.sort((S,T)=>T.overscaledZ-S.overscaledZ),g=p[p.length-1].overscaledZ,x=p[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const S={};for(let T=0;T<x;T++)S[T+g]=new Ir({func:c.GEQUAL,mask:255},T+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=x,[S,p]}return[{[g]:Ir.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Fr([i.CONSTANT_COLOR,i.ONE],new u.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Fr.unblended:Fr.alphaBlended}depthModeForSublayer(i,c,p){if(!this.opaquePassEnabledForLayer())return qt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new qt(p||this.context.gl.LEQUAL,c,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,c){this.style=i,this.options=c,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,x={},S={},T={};for(const M in g){const R=g[M];R.used&&R.prepare(this.context),x[M]=R.getVisibleCoordinates(),S[M]=x[M].slice().reverse(),T[M]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of p){const R=this.style._layers[M];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const F=S[R.source];(R.type==="custom"||F.length)&&this.renderLayer(this,g[R.source],R,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aO.black:u.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],R=g[M.source],F=x[M.source];this._renderTileClippingMasks(M,F),this.renderLayer(this,R,M,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],R=g[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const F=(M.type==="symbol"?T:S)[M.source];this._renderTileClippingMasks(M,x[M.source]),this.renderLayer(this,R,M,F)}if(this.options.showTileBoundaries){const M=function(R,F){let V=null;const X=Object.values(R._layers).flatMap(te=>te.source&&!te.isHidden(F)?[R.sourceCaches[te.source]]:[]),re=X.filter(te=>te.getSource().type==="vector"),ie=X.filter(te=>te.getSource().type!=="vector"),ce=te=>{(!V||V.getSource().maxzoom<te.getSource().maxzoom)&&(V=te)};return re.forEach(te=>ce(te)),V||ie.forEach(te=>ce(te)),V}(this.style,this.transform.zoom);M&&function(R,F,V){for(let X=0;X<V.length;X++)ss(R,F,V[X])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const R=M.transform.padding;ul(M,M.transform.height-(R.top||0),3,cd),ul(M,R.bottom||0,3,Ca),ud(M,R.left||0,3,Ec),ud(M,M.transform.width-(R.right||0),3,Tc);const F=M.transform.centerPoint;(function(V,X,re,ie){Ro(V,X-1,re-10,2,20,ie),Ro(V,X-10,re-1,20,2,ie)})(M,F.x,M.transform.height-F.y,cl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.projMatrix;let g=this.terrainFacilitator.dirty;g||(g=i?!u.aY(c,p):!u.aZ(c,p)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(u.a_(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,S){const T=x.context,M=T.gl,R=Fr.unblended,F=new qt(M.LEQUAL,qt.ReadWrite,[0,1]),V=S.getTerrainMesh(),X=S.sourceCache.getRenderableTiles(),re=x.useProgram("terrainDepth");T.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),T.clear({color:u.aO.transparent,depth:1});for(const ie of X){const ce=S.getTerrainData(ie.tileID),te={u_matrix:x.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(x.transform.zoom)};re.draw(T,M.TRIANGLES,F,Ir.disabled,R,wr.backCCW,te,ce,"terrain",V.vertexBuffer,V.indexBuffer,V.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,S){const T=x.context,M=T.gl,R=Fr.unblended,F=new qt(M.LEQUAL,qt.ReadWrite,[0,1]),V=S.getTerrainMesh(),X=S.getCoordsTexture(),re=S.sourceCache.getRenderableTiles(),ie=x.useProgram("terrainCoords");T.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),T.clear({color:u.aO.transparent,depth:1}),S.coordsIndex=[];for(const ce of re){const te=S.getTerrainData(ce.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,X.texture);const me={u_matrix:x.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(x.transform.zoom)};ie.draw(T,M.TRIANGLES,F,Ir.disabled,R,wr.backCCW,me,te,"terrain",V.vertexBuffer,V.indexBuffer,V.segments),S.coordsIndex.push(ce.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(i,c,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(x,S,T,M,R){if(x.renderPass!=="translucent")return;const F=Ir.disabled,V=x.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,re,ie,ce,te,me,Te){const ue=re.transform,_e=te==="map",Ie=me==="map";for(const Re of X){const Fe=ce.getTile(Re),Ke=Fe.getBucket(ie);if(!Ke||!Ke.text||!Ke.text.segments.get().length)continue;const qe=u.ag(Ke.textSizeData,ue.zoom),tt=At(Fe,1,re.transform.zoom),ut=Cn(Re.posMatrix,Ie,_e,re.transform,tt),Dt=ie.layout.get("icon-text-fit")!=="none"&&Ke.hasIconData();if(qe){const nt=Math.pow(2,ue.zoom-Fe.tileID.overscaledZ);Zf(Ke,_e,Ie,Te,ue,ut,Re.posMatrix,nt,qe,Dt,re.style.map.terrain?(St,Ft)=>re.style.map.terrain.getElevation(Re,St,Ft):null)}}}(M,x,T,S,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),R),T.paint.get("icon-opacity").constantOr(1)!==0&&sl(x,S,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),F,V),T.paint.get("text-opacity").constantOr(1)!==0&&sl(x,S,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),F,V),S.map.showCollisionBoxes&&(Gf(x,S,T,M,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),!0),Gf(x,S,T,M,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),!1))})(i,c,p,g,this.style.placement.variableOffsets);break;case"circle":(function(x,S,T,M){if(x.renderPass!=="translucent")return;const R=T.paint.get("circle-opacity"),F=T.paint.get("circle-stroke-width"),V=T.paint.get("circle-stroke-opacity"),X=!T.layout.get("circle-sort-key").isConstant();if(R.constantOr(1)===0&&(F.constantOr(1)===0||V.constantOr(1)===0))return;const re=x.context,ie=re.gl,ce=x.depthModeForSublayer(0,qt.ReadOnly),te=Ir.disabled,me=x.colorModeForRenderPass(),Te=[];for(let ue=0;ue<M.length;ue++){const _e=M[ue],Ie=S.getTile(_e),Re=Ie.getBucket(T);if(!Re)continue;const Fe=Re.programConfigurations.get(T.id),Ke=x.useProgram("circle",Fe),qe=Re.layoutVertexBuffer,tt=Re.indexBuffer,ut=x.style.map.terrain&&x.style.map.terrain.getTerrainData(_e),Dt={programConfiguration:Fe,program:Ke,layoutVertexBuffer:qe,indexBuffer:tt,uniformValues:gy(x,_e,Ie,T),terrainData:ut};if(X){const nt=Re.segments.get();for(const St of nt)Te.push({segments:new u.$([St]),sortKey:St.sortKey,state:Dt})}else Te.push({segments:Re.segments,sortKey:0,state:Dt})}X&&Te.sort((ue,_e)=>ue.sortKey-_e.sortKey);for(const ue of Te){const{programConfiguration:_e,program:Ie,layoutVertexBuffer:Re,indexBuffer:Fe,uniformValues:Ke,terrainData:qe}=ue.state;Ie.draw(re,ie.TRIANGLES,ce,te,me,wr.disabled,Ke,qe,T.id,Re,Fe,ue.segments,T.paint,x.transform.zoom,_e)}})(i,c,p,g);break;case"heatmap":(function(x,S,T,M){if(T.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const R=x.context,F=R.gl,V=Ir.disabled,X=new Fr([F.ONE,F.ONE],u.aO.transparent,[!0,!0,!0,!0]);(function(re,ie,ce){const te=re.gl;re.activeTexture.set(te.TEXTURE1),re.viewport.set([0,0,ie.width/4,ie.height/4]);let me=ce.heatmapFbo;if(me)te.bindTexture(te.TEXTURE_2D,me.colorAttachment.get()),re.bindFramebuffer.set(me.framebuffer);else{const Te=te.createTexture();te.bindTexture(te.TEXTURE_2D,Te),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),me=ce.heatmapFbo=re.createFramebuffer(ie.width/4,ie.height/4,!1,!1),function(ue,_e,Ie,Re){var Fe,Ke;const qe=ue.gl,tt=(Fe=ue.HALF_FLOAT)!==null&&Fe!==void 0?Fe:qe.UNSIGNED_BYTE,ut=(Ke=ue.RGBA16F)!==null&&Ke!==void 0?Ke:qe.RGBA;qe.texImage2D(qe.TEXTURE_2D,0,ut,_e.width/4,_e.height/4,0,qe.RGBA,tt,null),Re.colorAttachment.set(Ie)}(re,ie,Te,me)}})(R,x,T),R.clear({color:u.aO.transparent});for(let re=0;re<M.length;re++){const ie=M[re];if(S.hasRenderableParent(ie))continue;const ce=S.getTile(ie),te=ce.getBucket(T);if(!te)continue;const me=te.programConfigurations.get(T.id),Te=x.useProgram("heatmap",me),{zoom:ue}=x.transform;Te.draw(R,F.TRIANGLES,qt.disabled,V,X,wr.disabled,wa(ie.posMatrix,ce,ue,T.paint.get("heatmap-intensity")),null,T.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,T.paint,x.transform.zoom,me)}R.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(R,F){const V=R.context,X=V.gl,re=F.heatmapFbo;if(!re)return;V.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,re.colorAttachment.get()),V.activeTexture.set(X.TEXTURE1);let ie=F.colorRampTexture;ie||(ie=F.colorRampTexture=new Ae(V,F.colorRamp,X.RGBA)),ie.bind(X.LINEAR,X.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(V,X.TRIANGLES,qt.disabled,Ir.disabled,R.colorModeForRenderPass(),wr.disabled,((ce,te,me,Te)=>{const ue=u.F();u.aN(ue,0,ce.width,ce.height,0,0,1);const _e=ce.context.gl;return{u_matrix:ue,u_world:[_e.drawingBufferWidth,_e.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}})(R,F),null,F.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,F.paint,R.transform.zoom)}(x,T))})(i,c,p,g);break;case"line":(function(x,S,T,M){if(x.renderPass!=="translucent")return;const R=T.paint.get("line-opacity"),F=T.paint.get("line-width");if(R.constantOr(1)===0||F.constantOr(1)===0)return;const V=x.depthModeForSublayer(0,qt.ReadOnly),X=x.colorModeForRenderPass(),re=T.paint.get("line-dasharray"),ie=T.paint.get("line-pattern"),ce=ie.constantOr(1),te=T.paint.get("line-gradient"),me=T.getCrossfadeParameters(),Te=ce?"linePattern":re?"lineSDF":te?"lineGradient":"line",ue=x.context,_e=ue.gl;let Ie=!0;for(const Re of M){const Fe=S.getTile(Re);if(ce&&!Fe.patternsLoaded())continue;const Ke=Fe.getBucket(T);if(!Ke)continue;const qe=Ke.programConfigurations.get(T.id),tt=x.context.program.get(),ut=x.useProgram(Te,qe),Dt=Ie||ut.program!==tt,nt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Re),St=ie.constantOr(null);if(St&&Fe.imageAtlas){const Pt=Fe.imageAtlas,jt=Pt.patternPositions[St.to.toString()],Gt=Pt.patternPositions[St.from.toString()];jt&&Gt&&qe.setConstantPatternPositions(jt,Gt)}const Ft=nt?Re:null,Yt=ce?Yu(x,Fe,T,me,Ft):re?yc(x,Fe,T,re,me,Ft):te?fi(x,Fe,T,Ke.lineClipsArray.length,Ft):Bn(x,Fe,T,Ft);if(ce)ue.activeTexture.set(_e.TEXTURE0),Fe.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),qe.updatePaintBuffers(me);else if(re&&(Dt||x.lineAtlas.dirty))ue.activeTexture.set(_e.TEXTURE0),x.lineAtlas.bind(ue);else if(te){const Pt=Ke.gradients[T.id];let jt=Pt.texture;if(T.gradientVersion!==Pt.version){let Gt=256;if(T.stepInterpolant){const Br=S.getSource().maxzoom,fr=Re.canonical.z===Br?Math.ceil(1<<x.transform.maxZoom-Re.canonical.z):1;Gt=u.ac(u.aT(Ke.maxLineLength/u.W*1024*fr),256,ue.maxTextureSize)}Pt.gradient=u.aU({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Gt,image:Pt.gradient||void 0,clips:Ke.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new Ae(ue,Pt.gradient,_e.RGBA),Pt.version=T.gradientVersion,jt=Pt.texture}ue.activeTexture.set(_e.TEXTURE0),jt.bind(T.stepInterpolant?_e.NEAREST:_e.LINEAR,_e.CLAMP_TO_EDGE)}ut.draw(ue,_e.TRIANGLES,V,x.stencilModeForClipping(Re),X,wr.disabled,Yt,nt,T.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,T.paint,x.transform.zoom,qe,Ke.layoutVertexBuffer2),Ie=!1}})(i,c,p,g);break;case"fill":(function(x,S,T,M){const R=T.paint.get("fill-color"),F=T.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const V=x.colorModeForRenderPass(),X=T.paint.get("fill-pattern"),re=x.opaquePassEnabledForLayer()&&!X.constantOr(1)&&R.constantOr(u.aO.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===re){const ie=x.depthModeForSublayer(1,x.renderPass==="opaque"?qt.ReadWrite:qt.ReadOnly);ra(x,S,T,M,ie,V,!1)}if(x.renderPass==="translucent"&&T.paint.get("fill-antialias")){const ie=x.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,qt.ReadOnly);ra(x,S,T,M,ie,V,!0)}})(i,c,p,g);break;case"fill-extrusion":(function(x,S,T,M){const R=T.paint.get("fill-extrusion-opacity");if(R!==0&&x.renderPass==="translucent"){const F=new qt(x.context.gl.LEQUAL,qt.ReadWrite,x.depthRangeFor3D);if(R!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))na(x,S,T,M,F,Ir.disabled,Fr.disabled),na(x,S,T,M,F,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const V=x.colorModeForRenderPass();na(x,S,T,M,F,Ir.disabled,V)}}})(i,c,p,g);break;case"hillshade":(function(x,S,T,M){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const R=x.context,F=x.depthModeForSublayer(0,qt.ReadOnly),V=x.colorModeForRenderPass(),[X,re]=x.renderPass==="translucent"?x.stencilConfigForOverlap(M):[{},M];for(const ie of re){const ce=S.getTile(ie);ce.needsHillshadePrepare!==void 0&&ce.needsHillshadePrepare&&x.renderPass==="offscreen"?Kf(x,ce,T,F,Ir.disabled,V):x.renderPass==="translucent"&&Mi(x,ie,ce,T,F,X[ie.overscaledZ],V)}R.viewport.set([0,0,x.width,x.height])})(i,c,p,g);break;case"raster":(function(x,S,T,M){if(x.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!M.length)return;const R=x.context,F=R.gl,V=S.getSource(),X=x.useProgram("raster"),re=x.colorModeForRenderPass(),[ie,ce]=V instanceof sr?[{},M]:x.stencilConfigForOverlap(M),te=ce[ce.length-1].overscaledZ,me=!x.options.moving;for(const Te of ce){const ue=x.depthModeForSublayer(Te.overscaledZ-te,T.paint.get("raster-opacity")===1?qt.ReadWrite:qt.ReadOnly,F.LESS),_e=S.getTile(Te);_e.registerFadeDuration(T.paint.get("raster-fade-duration"));const Ie=S.findLoadedParent(Te,0),Re=Xf(_e,Ie,S,T,x.transform,x.style.map.terrain);let Fe,Ke;const qe=T.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;R.activeTexture.set(F.TEXTURE0),_e.texture.bind(qe,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),R.activeTexture.set(F.TEXTURE1),Ie?(Ie.texture.bind(qe,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Ie.tileID.overscaledZ-_e.tileID.overscaledZ),Ke=[_e.tileID.canonical.x*Fe%1,_e.tileID.canonical.y*Fe%1]):_e.texture.bind(qe,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const tt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Te),ut=tt?Te:null,Dt=ut?ut.posMatrix:x.transform.calculatePosMatrix(Te.toUnwrapped(),me),nt=is(Dt,Ke||[0,0],Fe||1,Re,T);V instanceof sr?X.draw(R,F.TRIANGLES,ue,Ir.disabled,re,wr.disabled,nt,tt,T.id,V.boundsBuffer,x.quadTriangleIndexBuffer,V.boundsSegments):X.draw(R,F.TRIANGLES,ue,ie[Te.overscaledZ],re,wr.disabled,nt,tt,T.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(i,c,p,g);break;case"background":(function(x,S,T,M){const R=T.paint.get("background-color"),F=T.paint.get("background-opacity");if(F===0)return;const V=x.context,X=V.gl,re=x.transform,ie=re.tileSize,ce=T.paint.get("background-pattern");if(x.isPatternMissing(ce))return;const te=!ce&&R.a===1&&F===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==te)return;const me=Ir.disabled,Te=x.depthModeForSublayer(0,te==="opaque"?qt.ReadWrite:qt.ReadOnly),ue=x.colorModeForRenderPass(),_e=x.useProgram(ce?"backgroundPattern":"background"),Ie=M||re.coveringTiles({tileSize:ie,terrain:x.style.map.terrain});ce&&(V.activeTexture.set(X.TEXTURE0),x.imageManager.bind(x.context));const Re=T.getCrossfadeParameters();for(const Fe of Ie){const Ke=M?Fe.posMatrix:x.transform.calculatePosMatrix(Fe.toUnwrapped()),qe=ce?by(Ke,F,x,ce,{tileID:Fe,tileSize:ie},Re):xy(Ke,F,R),tt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Fe);_e.draw(V,X.TRIANGLES,Te,me,ue,wr.disabled,qe,tt,T.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(x,S,T){const M=x.context,R=T.implementation;if(x.renderPass==="offscreen"){const F=R.prerender;F&&(x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),F.call(R,M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),M.setColorMode(x.colorModeForRenderPass()),M.setStencilMode(Ir.disabled);const F=R.renderingMode==="3d"?new qt(x.context.gl.LEQUAL,qt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,qt.ReadOnly);M.setDepthMode(F),R.render(M.gl,x.transform.customLayerMatrix()),M.setDirty(),x.setBaseState(),M.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,c,p,g,x){if(!p[0]&&!p[1])return i;const S=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(S){const R=Math.sin(S),F=Math.cos(S);p=[p[0]*F-p[1]*R,p[0]*R+p[1]*F]}const T=[x?p[0]:At(c,p[0],this.transform.zoom),x?p[1]:At(c,p[1],this.transform.zoom),0],M=new Float32Array(16);return u.H(M,i,T),M}saveTileTexture(i){const c=this._tileTextures[i.size[0]];c?c.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const c=this._tileTextures[i];return c&&c.length>0?c.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const c=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!c||!p}useProgram(i,c){this.cache=this.cache||{};const p=i+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Zu(this.context,rs[i],c,vc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:c}=this.context.gl;return this.width!==i||this.height!==c}}class tr{constructor(i,c){this.points=i,this.planes=c}static fromInvProjectionMatrix(i,c,p){const g=Math.pow(2,p),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const M=1/(T=u.af([],T,i))[3]/c*g;return u.a$(T,T,[M,M,1/T[3],M])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const M=function(X,re){var ie=re[0],ce=re[1],te=re[2],me=ie*ie+ce*ce+te*te;return me>0&&(me=1/Math.sqrt(me)),X[0]=re[0]*me,X[1]=re[1]*me,X[2]=re[2]*me,X}([],function(X,re,ie){var ce=re[0],te=re[1],me=re[2],Te=ie[0],ue=ie[1],_e=ie[2];return X[0]=te*_e-me*ue,X[1]=me*Te-ce*_e,X[2]=ce*ue-te*Te,X}([],be([],x[T[0]],x[T[1]]),be([],x[T[2]],x[T[1]]))),R=-((F=M)[0]*(V=x[T[1]])[0]+F[1]*V[1]+F[2]*V[2]);var F,V;return M.concat(R)});return new tr(x,S)}}class Ea{constructor(i,c){this.min=i,this.max=c,this.center=function(p,g,x){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,x){return p[0]=g[0]+x[0],p[1]=g[1]+x[1],p[2]=g[2]+x[2],p}([],this.min,this.max))}quadrant(i){const c=[i%2==0,i<2],p=oe(this.min),g=oe(this.max);for(let x=0;x<c.length;x++)p[x]=c[x]?this.min[x]:this.center[x],g[x]=c[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new Ea(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const x=i.planes[g];let S=0;for(let T=0;T<c.length;T++)u.b0(x,c[T])>=0&&S++;if(S===0)return 0;S!==c.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let T=0;T<i.points.length;T++){const M=i.points[T][g]-this.min[g];x=Math.min(x,M),S=Math.max(S,M)}if(S<0||x>this.max[g]-this.min[g])return 0}return 1}}class Ic{constructor(i=0,c=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=c,this.left=p,this.right=g}interpolate(i,c,p){return c.top!=null&&i.top!=null&&(this.top=u.z.number(i.top,c.top,p)),c.bottom!=null&&i.bottom!=null&&(this.bottom=u.z.number(i.bottom,c.bottom,p)),c.left!=null&&i.left!=null&&(this.left=u.z.number(i.left,c.left,p)),c.right!=null&&i.right!=null&&(this.right=u.z.number(i.right,c.right,p)),this}getCenter(i,c){const p=u.ac((this.left+i-this.right)/2,0,i),g=u.ac((this.top+c-this.bottom)/2,0,c);return new u.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ic(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const fd=85.051129;class Ta{constructor(i,c,p,g,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=i||0,this._maxZoom=c||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ic,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Ta(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const c=-u.b1(i,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.A(4);return u.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,x){var S=g[0],T=g[1],M=g[2],R=g[3],F=Math.sin(x),V=Math.cos(x);p[0]=S*V+M*F,p[1]=T*V+R*F,p[2]=S*-F+M*V,p[3]=T*-F+R*V}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const c=u.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const c=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,c,p){this._unmodified=!1,this._edgeInsets.interpolate(i,c,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const c=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(i){const c=[new u.b2(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.P(0,0)),g=this.pointCoordinate(new u.P(this.width,0)),x=this.pointCoordinate(new u.P(this.width,this.height)),S=this.pointCoordinate(new u.P(0,this.height)),T=Math.floor(Math.min(p.x,g.x,x.x,S.x)),M=Math.floor(Math.max(p.x,g.x,x.x,S.x)),R=1;for(let F=T-R;F<=M+R;F++)F!==0&&c.push(new u.b2(F,i))}return c}coveringTiles(i){var c,p;let g=this.coveringZoomLevel(i);const x=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),T=u.Y.fromLngLat(this.center),M=Math.pow(2,g),R=[M*S.x,M*S.y,0],F=[M*T.x,M*T.y,0],V=tr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const re=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ie=ue=>({aabb:new Ea([ue*M,0,0],[(ue+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),ce=[],te=[],me=g,Te=i.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)ce.push(ie(-ue)),ce.push(ie(ue));for(ce.push(ie(0));ce.length>0;){const ue=ce.pop(),_e=ue.x,Ie=ue.y;let Re=ue.fullyVisible;if(!Re){const ut=ue.aabb.intersects(V);if(ut===0)continue;Re=ut===2}const Fe=i.terrain?R:F,Ke=ue.aabb.distanceX(Fe),qe=ue.aabb.distanceY(Fe),tt=Math.max(Math.abs(Ke),Math.abs(qe));if(ue.zoom===me||tt>re+(1<<me-ue.zoom)-2&&ue.zoom>=X){const ut=me-ue.zoom,Dt=R[0]-.5-(_e<<ut),nt=R[1]-.5-(Ie<<ut);te.push({tileID:new u.Q(ue.zoom===me?Te:ue.zoom,ue.wrap,ue.zoom,_e,Ie),distanceSq:Ee([F[0]-.5-_e,F[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt(Dt*Dt+nt*nt)})}else for(let ut=0;ut<4;ut++){const Dt=(_e<<1)+ut%2,nt=(Ie<<1)+(ut>>1),St=ue.zoom+1;let Ft=ue.aabb.quadrant(ut);if(i.terrain){const Yt=new u.Q(St,ue.wrap,St,Dt,nt),Pt=i.terrain.getMinMaxElevation(Yt),jt=(c=Pt.minElevation)!==null&&c!==void 0?c:this.elevation,Gt=(p=Pt.maxElevation)!==null&&p!==void 0?p:this.elevation;Ft=new Ea([Ft.min[0],Ft.min[1],jt],[Ft.max[0],Ft.max[1],Gt])}ce.push({aabb:Ft,zoom:St,x:Dt,y:nt,wrap:ue.wrap,fullyVisible:Re})}}return te.sort((ue,_e)=>ue.distanceSq-_e.distanceSq).map(ue=>ue.tileID)}resize(i,c){this.width=i,this.height=c,this.pixelsToGLUnits=[2/i,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const c=u.ac(i.lat,-85.051129,fd);return new u.P(u.N(i.lng)*this.worldSize,u.O(c)*this.worldSize)}unproject(i){return new u.Y(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const c=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,i),x=i.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-x))return;const S=p+c-x,T=Math.cos(this._pitch)*this.cameraToCenterDistance/S/u.b3(1,g.lat),M=this.scaleZoom(T/this.tileSize);this._elevation=x,this._center=g,this.zoom=M}setLocationAtPoint(i,c){const p=this.pointCoordinate(c),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(i),S=new u.Y(x.x-(p.x-g.x),x.y-(p.y-g.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,c){return c?this.coordinatePoint(this.locationCoordinate(i),c.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,c){return this.coordinateLocation(this.pointCoordinate(i,c))}locationCoordinate(i){return u.Y.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,c){if(c){const X=c.pointCoordinate(i);if(X!=null)return X}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];u.af(p,p,this.pixelMatrixInverse),u.af(g,g,this.pixelMatrixInverse);const x=p[3],S=g[3],T=p[1]/x,M=g[1]/S,R=p[2]/x,F=g[2]/S,V=R===F?0:(0-R)/(F-R);return new u.Y(u.z.number(p[0]/x,g[0]/S,V)/this.worldSize,u.z.number(T,M,V)/this.worldSize)}coordinatePoint(i,c=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,c,1];return u.af(g,g,p),new u.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new er().extend(this.pointLocation(new u.P(0,i))).extend(this.pointLocation(new u.P(this.width,i))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new er([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,fd])}calculatePosMatrix(i,c=!1){const p=i.key,g=c?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const x=i.canonical,S=this.worldSize/this.zoomScale(x.z),T=x.x+Math.pow(2,x.z)*i.wrap,M=u.an(new Float64Array(16));return u.H(M,M,[T*S,x.y*S,0]),u.J(M,M,[S/u.W,S/u.W,1]),u.K(M,c?this.alignedProjMatrix:this.projMatrix,M),g[p]=new Float32Array(M),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,c){c=u.ac(+c,this.minZoom,this.maxZoom);const p={center:new u.M(i.lng,i.lat),zoom:c};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const ue=179.9999999999;g=[-ue,ue]}const x=this.tileSize*this.zoomScale(p.zoom);let S=0,T=x,M=0,R=x,F=0,V=0;const{x:X,y:re}=this.size;if(this.latRange){const ue=this.latRange;S=u.O(ue[1])*x,T=u.O(ue[0])*x,T-S<re&&(F=re/(T-S))}g&&(M=u.b1(u.N(g[0])*x,0,x),R=u.b1(u.N(g[1])*x,0,x),R<M&&(R+=x),R-M<X&&(V=X/(R-M)));const{x:ie,y:ce}=this.project.call({worldSize:x},i);let te,me;const Te=Math.max(V||0,F||0);if(Te){const ue=new u.P(V?(R+M)/2:ie,F?(T+S)/2:ce);return p.center=this.unproject.call({worldSize:x},ue).wrap(),p.zoom+=this.scaleZoom(Te),p}if(this.latRange){const ue=re/2;ce-ue<S&&(me=S+ue),ce+ue>T&&(me=T-ue)}if(g){const ue=(M+R)/2;let _e=ie;this._renderWorldCopies&&(_e=u.b1(ie,ue-x/2,ue+x/2));const Ie=X/2;_e-Ie<M&&(te=M+Ie),_e+Ie>R&&(te=R-Ie)}if(te!==void 0||me!==void 0){const ue=new u.P(te??ie,me??ce);p.center=this.unproject.call({worldSize:x},ue).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:c,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=p,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,c=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b3(1,this.center.lat)*this.worldSize;let g=u.an(new Float64Array(16));u.J(g,g,[this.width/2,-this.height/2,1]),u.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=u.an(new Float64Array(16)),u.J(g,g,[1,-1,1]),u.H(g,g,[-1,-1,0]),u.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),T=x-S*this._pixelPerMeter/Math.cos(this._pitch),M=S<0?T:x,R=Math.PI/2+this._pitch,F=this._fov*(.5+i.y/this.height),V=Math.sin(F)*M/Math.sin(u.ac(Math.PI-R-F,.01,Math.PI-.01)),X=this.getHorizon(),re=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),ie=Math.sin(re)*M/Math.sin(u.ac(Math.PI-R-re,.01,Math.PI-.01)),ce=Math.min(V,ie),te=1.01*(Math.cos(Math.PI/2-this._pitch)*ce+M),me=this.height/50;g=new Float64Array(16),u.b4(g,this._fov,this.width/this.height,me,te),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,u.J(g,g,[1,-1,1]),u.H(g,g,[0,0,-this.cameraToCenterDistance]),u.b5(g,g,this._pitch),u.ad(g,g,this.angle),u.H(g,g,[-c,-p,0]),this.mercatorMatrix=u.J([],g,[this.worldSize,this.worldSize,this.worldSize]),u.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.K(new Float64Array(16),this.labelPlaneMatrix,g),u.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=u.ar([],g),this.pixelMatrix3D=u.K(new Float64Array(16),this.labelPlaneMatrix,g);const Te=this.width%2/2,ue=this.height%2/2,_e=Math.cos(this.angle),Ie=Math.sin(this.angle),Re=c-Math.round(c)+_e*Te+Ie*ue,Fe=p-Math.round(p)+_e*ue+Ie*Te,Ke=new Float64Array(g);if(u.H(Ke,Ke,[Re>.5?Re-1:Re,Fe>.5?Fe-1:Fe,0]),this.alignedProjMatrix=Ke,g=u.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.P(0,0)),c=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,i))}getCameraQueryGeometry(i){const c=this.getCameraPoint();if(i.length===1)return[i[0],c];{let p=c.x,g=c.y,x=c.x,S=c.y;for(const T of i)p=Math.min(p,T.x),g=Math.min(g,T.y),x=Math.max(x,T.x),S=Math.max(S,T.y);return[new u.P(p,g),new u.P(x,g),new u.P(x,S),new u.P(p,S),new u.P(p,g)]}}lngLatToCameraDepth(i,c){const p=this.locationCoordinate(i),g=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.af(g,g,this.projMatrix),g[2]/g[3]}}function Yf(y,i){let c,p=!1,g=null,x=null;const S=()=>{g=null,p&&(y.apply(x,c),g=setTimeout(S,i),p=!1)};return(...T)=>(p=!0,x=this,c=T,g||S(),g)}class Jf{constructor(i){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,c)}catch{}},this._updateHash=Yf(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),S=Math.round(c.lng*x)/x,T=Math.round(c.lat*x)/x,M=this._map.getBearing(),R=this._map.getPitch();let F="";if(F+=i?`/${S}/${T}/${p}`:`${p}/${T}/${S}`,(M||R)&&(F+="/"+Math.round(10*M)/10),R&&(F+=`/${Math.round(R)}`),this._hashName){const V=this._hashName;let X=!1;const re=window.location.hash.slice(1).split("&").map(ie=>{const ce=ie.split("=")[0];return ce===V?(X=!0,`${ce}=${F}`):ie}).filter(ie=>ie);return X||re.push(`${V}=${F}`),`#${re.join("&")}`}return`#${F}`}}const dl={linearity:.3,easing:u.b6(0,0,.3,1)},Ry=u.e({deceleration:2500,maxSpeed:1400},dl),pd=u.e({deceleration:20,maxSpeed:1400},dl),Pc=u.e({deceleration:1e3,maxSpeed:360},dl),Mc=u.e({deceleration:1e3,maxSpeed:90},dl);class md{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,c=k.now();for(;i.length>0&&c-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)c.zoom+=x.zoomDelta||0,c.bearing+=x.bearingDelta||0,c.pitch+=x.pitchDelta||0,x.panDelta&&c.pan._add(x.panDelta),x.around&&(c.around=x.around),x.pinchAround&&(c.pinchAround=x.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(c.pan.mag()){const x=hl(c.pan.mag(),p,u.e({},Ry,i||{}));g.offset=c.pan.mult(x.amount/c.pan.mag()),g.center=this._map.transform.center,ls(g,x)}if(c.zoom){const x=hl(c.zoom,p,pd);g.zoom=this._map.transform.zoom+x.amount,ls(g,x)}if(c.bearing){const x=hl(c.bearing,p,Pc);g.bearing=this._map.transform.bearing+u.ac(x.amount,-179,179),ls(g,x)}if(c.pitch){const x=hl(c.pitch,p,Mc);g.pitch=this._map.transform.pitch+x.amount,ls(g,x)}if(g.zoom||g.bearing){const x=c.pinchAround===void 0?c.around:c.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),u.e(g,{noMoveStart:!0})}}function ls(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function hl(y,i,c){const{maxSpeed:p,linearity:g,deceleration:x}=c,S=u.ac(y*g/(i/1e3),-p,p),T=Math.abs(S)/(x*g);return{easing:c.easing,duration:1e3*T,amount:S*(T/2)}}class An extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p,g={}){const x=A.mousePos(c.getCanvas(),p),S=c.unproject(x);super(i,u.e({point:x,lngLat:S,originalEvent:p},g)),this._defaultPrevented=!1,this.target=c}}class ia extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){const g=i==="touchend"?p.changedTouches:p.touches,x=A.touchPos(c.getCanvasContainer(),g),S=x.map(M=>c.unproject(M)),T=x.reduce((M,R,F,V)=>M.add(R.div(V.length)),new u.P(0,0));super(i,{points:x,point:T,lngLats:S,lngLat:c.unproject(T),originalEvent:p}),this._defaultPrevented=!1}}class kc extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,c,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class zy{constructor(i,c){this._map=i,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new kc(i.type,this._map,i))}mousedown(i,c){return this._mousedownPos=c,this._firePreventable(new An(i.type,this._map,i))}mouseup(i){this._map.fire(new An(i.type,this._map,i))}click(i,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new An(i.type,this._map,i))}dblclick(i){return this._firePreventable(new An(i.type,this._map,i))}mouseover(i){this._map.fire(new An(i.type,this._map,i))}mouseout(i){this._map.fire(new An(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ia(i.type,this._map,i))}touchmove(i){this._map.fire(new ia(i.type,this._map,i))}touchend(i){this._map.fire(new ia(i.type,this._map,i))}touchcancel(i){this._map.fire(new ia(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gd{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new An(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new An("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new An(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fl{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(u.P.convert(i),this._map.terrain)}}class yd{constructor(i,c){this._map=i,this._tr=new fl(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,c){this.isEnabled()&&i.shiftKey&&i.button===0&&(A.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(i,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const x=Math.min(g.x,p.x),S=Math.max(g.x,p.x),T=Math.min(g.y,p.y),M=Math.max(g.y,p.y);A.setTransform(this._box,`translate(${x}px,${T}px)`),this._box.style.width=S-x+"px",this._box.style.height=M-T+"px"}mouseupWindow(i,c){if(!this._active||i.button!==0)return;const p=this._startPos,g=c;if(this.reset(),A.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:i})),{cameraAnimation:x=>x.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,c){return this._map.fire(new u.k(i,{originalEvent:c}))}}function cs(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const c={};for(let p=0;p<y.length;p++)c[y[p].identifier]=i[p];return c}class vd{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const x=new u.P(0,0);for(const S of g)x._add(S);return x.div(g.length)}(c),this.touches=cs(p,c)))}touchmove(i,c,p){if(this.aborted||!this.centroid)return;const g=cs(p,c);for(const x in this.touches){const S=g[x];(!S||S.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(i,c,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Ac{constructor(i){this.singleTap=new vd(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,c,p){this.singleTap.touchstart(i,c,p)}touchmove(i,c,p){this.singleTap.touchmove(i,c,p)}touchend(i,c,p){const g=this.singleTap.touchend(i,c,p);if(g){const x=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(g)<30;if(x&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Qf{constructor(i){this._tr=new fl(i),this._zoomIn=new Ac({numTouches:1,numTaps:2}),this._zoomOut=new Ac({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,c,p){this._zoomIn.touchstart(i,c,p),this._zoomOut.touchstart(i,c,p)}touchmove(i,c,p){this._zoomIn.touchmove(i,c,p),this._zoomOut.touchmove(i,c,p)}touchend(i,c,p){const g=this._zoomIn.touchend(i,c,p),x=this._zoomOut.touchend(i,c,p),S=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(g)},{originalEvent:i})}):x?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(x)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class oa{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const c=this._moveFunction(...i);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(i,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=c.length?c[0]:c;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&A.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const _d={0:1,2:2};class xd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const c=A.mouseButton(i);this._eventButton=c}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(c,p){const g=_d[p];return c.buttons===void 0||(c.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return A.mouseButton(i)===this._eventButton}}class bd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Pr=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=i=>{i.preventDefault()}},aa=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:c=.8})=>{const p=new xd({checkCorrectEvent:g=>A.mouseButton(g)===0&&g.ctrlKey||A.mouseButton(g)===2});return new oa({clickTolerance:i,move:(g,x)=>({bearingDelta:(x.x-g.x)*c}),moveStateManager:p,enable:y,assignEvents:Pr})},mi=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:c=-.5})=>{const p=new xd({checkCorrectEvent:g=>A.mouseButton(g)===0&&g.ctrlKey||A.mouseButton(g)===2});return new oa({clickTolerance:i,move:(g,x)=>({pitchDelta:(x.y-g.y)*c}),moveStateManager:p,enable:y,assignEvents:Pr})};class wd{constructor(i,c){this._clickTolerance=i.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(i,c,p){return this._calculateTransform(i,c,p)}touchmove(i,c,p){if(this._active&&!(p.length<this.minTouchs()))return i.preventDefault(),this._calculateTransform(i,c,p)}touchend(i,c,p){this._calculateTransform(i,c,p),this._active&&p.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,c,p){p.length>0&&(this._active=!0);const g=cs(p,c),x=new u.P(0,0),S=new u.P(0,0);let T=0;for(const R in g){const F=g[R],V=this._touches[R];V&&(x._add(F),S._add(F.sub(V)),T++,g[R]=F)}if(this._touches=g,T<this.minTouchs()||!S.mag())return;const M=S.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(i,c,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,x]=this._firstTwoTouches,S=ml(p,c,g),T=ml(p,c,x);if(!S||!T)return;const M=this._aroundCenter?null:S.add(T).div(2);return this._move([S,T],M,i)}touchend(i,c,p){if(!this._firstTwoTouches)return;const[g,x]=this._firstTwoTouches,S=ml(p,c,g),T=ml(p,c,x);S&&T||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ml(y,i,c){for(let p=0;p<y.length;p++)if(y[p].identifier===c)return i[p]}function Ia(y,i){return Math.log(y/i)/Math.LN2}class us extends pl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,c){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ia(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ia(this._distance,p),pinchAround:c}}}function Rc(y,i){return 180*y.angleWith(i)/Math.PI}class Sd extends pl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,c,p){const g=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Rc(this._vector,g),pinchAround:c}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Rc(i,this._startVector);return Math.abs(p)<c}}function zc(y){return Math.abs(y.y)>Math.abs(y.x)}class Cd extends pl{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,c,p){super.touchstart(i,c,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,zc(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),x=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(i,c,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,x=c.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const S=i.y>0==c.y>0;return zc(i)&&zc(c)&&S}}const ep={panStep:100,bearingStep:15,pitchStep:10};class Ed{constructor(i){this._tr=new fl(i);const c=ep;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let c=0,p=0,g=0,x=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),x=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),x=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:Pa,zoom:c?Math.round(M.zoom)+c*(i.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+g*this._pitchStep,offset:[-x*this._panStep,-S*this._panStep],center:M.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Pa(y){return y*(2-y)}const Td=4.000244140625;class Id{constructor(i,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new fl(i),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!i[this._map.cooperativeGestures._bypassKey])return;let c=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=k.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%Td==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),i.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=i,this._delta-=c,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=A.mousePos(this._map.getCanvas(),i),p=this._tr;this._around=c.y>p.transform.height/2-p.transform.getHorizon()?u.M.convert(this._aroundCenter?p.center:p.unproject(c)):u.M.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const T=this._type==="wheel"&&Math.abs(this._delta)>Td?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&M!==0&&(M=1/M);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*M))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let x,S=!1;if(this._type==="wheel"&&p&&g){const T=Math.min((k.now()-this._lastWheelEventTime)/200,1),M=g(T);x=u.z.number(p,c,M),T<1?this._frameId||(this._frameId=!0):S=!0}else x=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:x-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let c=u.b7;if(this._prevEase){const p=this._prevEase,g=(k.now()-p.start)/p.duration,x=p.easing(g+.01)-p.easing(g),S=.27/Math.sqrt(x*x+1e-4)*.01,T=Math.sqrt(.0729-S*S);c=u.b6(S,T,.25,1)}return this._prevEase={start:k.now(),duration:i,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Pd{constructor(i,c){this._clickZoom=i,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class tp{constructor(i){this._tr=new fl(i),this.reset()}reset(){this._active=!1}dblclick(i,c){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rp{constructor(){this._tap=new Ac({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,c,p){if(!this._swipePoint)if(this._tapTime){const g=c[0],x=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(g)<30;x&&S?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,c,p)}touchmove(i,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=c[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(i,c,p)}touchend(i,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,c,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Md{constructor(i,c,p){this._el=i,this._mousePan=c,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class kd{constructor(i,c,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=c,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ds{constructor(i,c,p,g){this._el=i,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ad{constructor(i,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",i);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=c,this._container.appendChild(g);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=p,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(i){this._onCooperativeGesture(i.touches.length===1)}wheel(i){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!i[this._bypassKey])}_onCooperativeGesture(i){this._enabled&&i&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Yn=y=>y.zoom||y.drag||y.pitch||y.rotate;class ho extends u.k{}function Lc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class fo{constructor(i,c){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=g.type==="renderFrame"?void 0:g,T={needsRenderFrame:!1},M={},R={},F=g.touches,V=F?this._getMapTouches(F):void 0,X=V?A.touchPos(this._map.getCanvas(),V):A.mousePos(this._map.getCanvas(),g);for(const{handlerName:ce,handler:te,allowed:me}of this._handlers){if(!te.isEnabled())continue;let Te;this._blockedByActive(R,me,ce)?te.reset():te[x||g.type]&&(Te=te[x||g.type](g,X,V),this.mergeHandlerResult(T,M,Te,ce,S),Te&&Te.needsRenderFrame&&this._triggerRenderFrame()),(Te||te.isActive())&&(R[ce]=te)}const re={};for(const ce in this._previousActiveHandlers)R[ce]||(re[ce]=S);this._previousActiveHandlers=R,(Object.keys(re).length||Lc(T))&&(this._changes.push([T,M,re]),this._triggerRenderFrame()),(Object.keys(R).length||Lc(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=T;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new md(i),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,x,S]of this._listeners)A.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,c,p]of this._listeners)A.removeEventListener(i,c,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new zy(c,i));const g=c.boxZoom=new yd(c,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const x=c.cooperativeGestures=new Ad(c,i.cooperativeGestures);this._add("cooperativeGestures",x),i.cooperativeGestures&&x.enable();const S=new Qf(c),T=new tp(c);c.doubleClickZoom=new Pd(T,S),this._add("tapZoom",S),this._add("clickZoom",T),i.interactive&&i.doubleClickZoom&&c.doubleClickZoom.enable();const M=new rp;this._add("tapDragZoom",M);const R=c.touchPitch=new Cd(c);this._add("touchPitch",R),i.interactive&&i.touchPitch&&c.touchPitch.enable(i.touchPitch);const F=aa(i),V=mi(i);c.dragRotate=new kd(i,F,V),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",V,["mouseRotate"]),i.interactive&&i.dragRotate&&c.dragRotate.enable();const X=(({enable:Te,clickTolerance:ue})=>{const _e=new xd({checkCorrectEvent:Ie=>A.mouseButton(Ie)===0&&!Ie.ctrlKey});return new oa({clickTolerance:ue,move:(Ie,Re)=>({around:Re,panDelta:Re.sub(Ie)}),activateOnStart:!0,moveStateManager:_e,enable:Te,assignEvents:Pr})})(i),re=new wd(i,c);c.dragPan=new Md(p,X,re),this._add("mousePan",X),this._add("touchPan",re,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&c.dragPan.enable(i.dragPan);const ie=new Sd,ce=new us;c.touchZoomRotate=new ds(p,ce,ie,M),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&c.touchZoomRotate.enable(i.touchZoomRotate);const te=c.scrollZoom=new Id(c,()=>this._triggerRenderFrame());this._add("scrollZoom",te,["mousePan"]),i.interactive&&i.scrollZoom&&c.scrollZoom.enable(i.scrollZoom);const me=c.keyboard=new Ed(c);this._add("keyboard",me),i.interactive&&i.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new gd(c))}_add(i,c,p){this._handlers.push({handlerName:i,handler:c,allowed:p}),this._handlersById[i]=c}stop(i){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Yn(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,c,p){for(const g in i)if(g!==p&&(!c||c.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const c=[];for(const p of i)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(i,c,p,g,x){if(!p)return;u.e(i,p);const S={handlerName:g,originalEvent:p.originalEvent||x};p.zoomDelta!==void 0&&(c.zoom=S),p.panDelta!==void 0&&(c.drag=S),p.pitchDelta!==void 0&&(c.pitch=S),p.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const i={},c={},p={};for(const[g,x,S]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new u.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),u.e(c,x),u.e(p,S);this._updateMapTransform(i,c,p),this._changes=[]}_updateMapTransform(i,c,p){const g=this._map,x=g._getTransformForUpdate(),S=g.terrain;if(!(Lc(i)||S&&this._terrainMovement))return this._fireEvents(c,p,!0);let{panDelta:T,zoomDelta:M,bearingDelta:R,pitchDelta:F,around:V,pinchAround:X}=i;X!==void 0&&(V=X),g._stop(!0),V=V||g.transform.centerPoint;const re=x.pointLocation(T?V.sub(T):V);R&&(x.bearing+=R),F&&(x.pitch+=F),M&&(x.zoom+=M),S?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(T)):x.setLocationAtPoint(re,V):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(re,V),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(re,V),g._applyUpdatedTransform(x),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(c,p,!0)}_fireEvents(i,c,p){const g=Yn(this._eventsInProgress),x=Yn(i),S={};for(const F in i){const{originalEvent:V}=i[F];this._eventsInProgress[F]||(S[`${F}start`]=V),this._eventsInProgress[F]=i[F]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(const F in S)this._fireEvent(F,S[F]);x&&this._fireEvent("move",x.originalEvent);for(const F in i){const{originalEvent:V}=i[F];this._fireEvent(F,V)}const T={};let M;for(const F in this._eventsInProgress){const{handlerName:V,originalEvent:X}=this._eventsInProgress[F];this._handlersById[V].isActive()||(delete this._eventsInProgress[F],M=c[V]||X,T[`${F}end`]=M)}for(const F in T)this._fireEvent(F,T[F]);const R=Yn(this._eventsInProgress);if(p&&(g||x)&&!R){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!F||!F.essential&&k.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),V(this._map.getBearing())&&this._map.resetNorth()):(V(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(i,c){this._map.fire(new u.k(i,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new ho("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class gl extends u.E{constructor(i,c){super(),this._renderFrameCallback=()=>{const p=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.M(this.transform.center.lng,this.transform.center.lat)}setCenter(i,c){return this.jumpTo({center:i},c)}panBy(i,c,p){return i=u.P.convert(i).mult(-1),this.panTo(this.transform.center,u.e({offset:i},c),p)}panTo(i,c,p){return this.easeTo(u.e({center:i},c),p)}getZoom(){return this.transform.zoom}setZoom(i,c){return this.jumpTo({zoom:i},c),this}zoomTo(i,c,p){return this.easeTo(u.e({zoom:i},c),p)}zoomIn(i,c){return this.zoomTo(this.getZoom()+1,i,c),this}zoomOut(i,c){return this.zoomTo(this.getZoom()-1,i,c),this}getBearing(){return this.transform.bearing}setBearing(i,c){return this.jumpTo({bearing:i},c),this}getPadding(){return this.transform.padding}setPadding(i,c){return this.jumpTo({padding:i},c),this}rotateTo(i,c,p){return this.easeTo(u.e({bearing:i},c),p)}resetNorth(i,c){return this.rotateTo(0,u.e({duration:1e3},i),c),this}resetNorthPitch(i,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},i),c),this}snapToNorth(i,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,c):this}getPitch(){return this.transform.pitch}setPitch(i,c){return this.jumpTo({pitch:i},c),this}cameraForBounds(i,c){i=er.convert(i);const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,c)}_cameraForBoxAndBearing(i,c,p,g){const x={top:0,bottom:0,right:0,left:0};if(typeof(g=u.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const ut=g.padding;g.padding={top:ut,bottom:ut,right:ut,left:ut}}g.padding=u.e(x,g.padding);const S=this.transform,T=S.padding,M=new er(i,c),R=S.project(M.getNorthWest()),F=S.project(M.getNorthEast()),V=S.project(M.getSouthEast()),X=S.project(M.getSouthWest()),re=u.b8(-p),ie=R.rotate(re),ce=F.rotate(re),te=V.rotate(re),me=X.rotate(re),Te=new u.P(Math.max(ie.x,ce.x,me.x,te.x),Math.max(ie.y,ce.y,me.y,te.y)),ue=new u.P(Math.min(ie.x,ce.x,me.x,te.x),Math.min(ie.y,ce.y,me.y,te.y)),_e=Te.sub(ue),Ie=(S.width-(T.left+T.right+g.padding.left+g.padding.right))/_e.x,Re=(S.height-(T.top+T.bottom+g.padding.top+g.padding.bottom))/_e.y;if(Re<0||Ie<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Fe=Math.min(S.scaleZoom(S.scale*Math.min(Ie,Re)),g.maxZoom),Ke=u.P.convert(g.offset),qe=new u.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(u.b8(p)),tt=Ke.add(qe).mult(S.scale/S.zoomScale(Fe));return{center:S.unproject(R.add(V).div(2).sub(tt)),zoom:Fe,bearing:p}}fitBounds(i,c,p){return this._fitInternal(this.cameraForBounds(i,c),c,p)}fitScreenCoordinates(i,c,p,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(i)),this.transform.pointLocation(u.P.convert(c)),p,g),g,x)}_fitInternal(i,c,p){return i?(delete(c=u.e(i,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(i,c){this.stop();const p=this._getTransformForUpdate();let g=!1,x=!1,S=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.M.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(x=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(S=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),g&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),x&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),S&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(i,c,p,g=0){const x=u.Y.fromLngLat(i,c),S=u.Y.fromLngLat(p,g),T=S.x-x.x,M=S.y-x.y,R=S.z-x.z,F=Math.hypot(T,M,R);if(F===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(T,M),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),re=180*Math.atan2(T,-M)/Math.PI;let ie=180*Math.acos(V/F)/Math.PI;return ie=R<0?90-ie:90+ie,{center:S.toLngLat(),zoom:X,pitch:ie,bearing:re}}easeTo(i,c){var p;this._stop(!1,i.easeId),((i=u.e({offset:[0,0],duration:500,easing:u.b7},i)).animate===!1||!i.essential&&k.prefersReducedMotion)&&(i.duration=0);const g=this._getTransformForUpdate(),x=this.getZoom(),S=this.getBearing(),T=this.getPitch(),M=this.getPadding(),R="bearing"in i?this._normalizeBearing(i.bearing,S):S,F="pitch"in i?+i.pitch:T,V="padding"in i?i.padding:g.padding,X=u.P.convert(i.offset);let re=g.centerPoint.add(X);const ie=g.pointLocation(re),{center:ce,zoom:te}=g.getConstrained(u.M.convert(i.center||ie),(p=i.zoom)!==null&&p!==void 0?p:x);this._normalizeCenter(ce);const me=g.project(ie),Te=g.project(ce).sub(me),ue=g.zoomScale(te-x);let _e,Ie;i.around&&(_e=u.M.convert(i.around),Ie=g.locationPoint(_e));const Re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||te!==x,this._rotating=this._rotating||S!==R,this._pitching=this._pitching||F!==T,this._padding=!g.isPaddingEqual(V),this._easeId=i.easeId,this._prepareEase(c,i.noMoveStart,Re),this.terrain&&this._prepareElevation(ce),this._ease(Fe=>{if(this._zooming&&(g.zoom=u.z.number(x,te,Fe)),this._rotating&&(g.bearing=u.z.number(S,R,Fe)),this._pitching&&(g.pitch=u.z.number(T,F,Fe)),this._padding&&(g.interpolatePadding(M,V,Fe),re=g.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(Fe),_e)g.setLocationAtPoint(_e,Ie);else{const Ke=g.zoomScale(g.zoom-x),qe=te>x?Math.min(2,ue):Math.max(.5,ue),tt=Math.pow(qe,1-Fe),ut=g.unproject(me.add(Te.mult(Fe*tt)).mult(Ke));g.setLocationAtPoint(g.renderWorldCopies?ut.wrap():ut,re)}this._applyUpdatedTransform(g),this._fireMoveEvents(c)},Fe=>{this.terrain&&this._finalizeElevation(),this._afterEase(c,Fe)},i),this}_prepareEase(i,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(c-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=c}this.transform.elevation=u.z.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const c=i.clone(),{center:p,zoom:g,pitch:x,bearing:S,elevation:T}=this.transformCameraUpdate(c);p&&(c.center=p),g!==void 0&&(c.zoom=g),x!==void 0&&(c.pitch=x),S!==void 0&&(c.bearing=S),T!==void 0&&(c.elevation=T),this.transform.apply(c)}_fireMoveEvents(i){this.fire(new u.k("move",i)),this._zooming&&this.fire(new u.k("zoom",i)),this._rotating&&this.fire(new u.k("rotate",i)),this._pitching&&this.fire(new u.k("pitch",i))}_afterEase(i,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.k("zoomend",i)),g&&this.fire(new u.k("rotateend",i)),x&&this.fire(new u.k("pitchend",i)),this.fire(new u.k("moveend",i))}flyTo(i,c){var p;if(!i.essential&&k.prefersReducedMotion){const Yt=u.L(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Yt,c)}this.stop(),i=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b7},i);const g=this._getTransformForUpdate(),x=this.getZoom(),S=this.getBearing(),T=this.getPitch(),M=this.getPadding(),R="bearing"in i?this._normalizeBearing(i.bearing,S):S,F="pitch"in i?+i.pitch:T,V="padding"in i?i.padding:g.padding,X=u.P.convert(i.offset);let re=g.centerPoint.add(X);const ie=g.pointLocation(re),{center:ce,zoom:te}=g.getConstrained(u.M.convert(i.center||ie),(p=i.zoom)!==null&&p!==void 0?p:x);this._normalizeCenter(ce);const me=g.zoomScale(te-x),Te=g.project(ie),ue=g.project(ce).sub(Te);let _e=i.curve;const Ie=Math.max(g.width,g.height),Re=Ie/me,Fe=ue.mag();if("minZoom"in i){const Yt=u.ac(Math.min(i.minZoom,x,te),g.minZoom,g.maxZoom),Pt=Ie/g.zoomScale(Yt-x);_e=Math.sqrt(Pt/Fe*2)}const Ke=_e*_e;function qe(Yt){const Pt=(Re*Re-Ie*Ie+(Yt?-1:1)*Ke*Ke*Fe*Fe)/(2*(Yt?Re:Ie)*Ke*Fe);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function tt(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function ut(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}const Dt=qe(!1);let nt=function(Yt){return ut(Dt)/ut(Dt+_e*Yt)},St=function(Yt){return Ie*((ut(Dt)*(tt(Pt=Dt+_e*Yt)/ut(Pt))-tt(Dt))/Ke)/Fe;var Pt},Ft=(qe(!0)-Dt)/_e;if(Math.abs(Fe)<1e-6||!isFinite(Ft)){if(Math.abs(Ie-Re)<1e-6)return this.easeTo(i,c);const Yt=Re<Ie?-1:1;Ft=Math.abs(Math.log(Re/Ie))/_e,St=()=>0,nt=Pt=>Math.exp(Yt*_e*Pt)}return i.duration="duration"in i?+i.duration:1e3*Ft/("screenSpeed"in i?+i.screenSpeed/_e:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==R,this._pitching=F!==T,this._padding=!g.isPaddingEqual(V),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ce),this._ease(Yt=>{const Pt=Yt*Ft,jt=1/nt(Pt);g.zoom=Yt===1?te:x+g.scaleZoom(jt),this._rotating&&(g.bearing=u.z.number(S,R,Yt)),this._pitching&&(g.pitch=u.z.number(T,F,Yt)),this._padding&&(g.interpolatePadding(M,V,Yt),re=g.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(Yt);const Gt=Yt===1?ce:g.unproject(Te.add(ue.mult(St(Pt))).mult(jt));g.setLocationAtPoint(g.renderWorldCopies?Gt.wrap():Gt,re),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(c)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,c)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,c,p){p.animate===!1||p.duration===0?(i(1),c()):(this._easeStart=k.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,c){i=u.b1(i,-180,180);const p=Math.abs(i-c);return Math.abs(i-360-c)<p&&(i-=360),Math.abs(i+360-c)<p&&(i+=360),i}_normalizeCenter(i){const c=this.transform;if(!c.renderWorldCopies||c.lngRange)return;const p=i.lng-c.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(u.M.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const np={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ip{constructor(i=np){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,c){const p=this._map._getUIString(`AttributionControl.${c}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const c=this._map.style.sourceCaches;for(const g in c){const x=c[g];if(x.used||x.usedForTerrain){const S=x.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,x)=>g.length-x.length),i=i.filter((g,x)=>{for(let S=x+1;S<i.length;S++)if(i[S].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class op{constructor(i={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const c=A.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ap{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const c=++this._id;return this._queue.push({callback:i,id:c,cancelled:!1}),c}remove(i){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var yl=u.X([{name:"a_pos3d",type:"Int16",components:3}]);class sa extends u.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,c){this.sourceCache.update(i,c),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),u.aN(g.posMatrix,0,u.W,0,u.W,0,1),this._tiles[g.key]=new Hr(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const c in this._tiles){const p=this._tiles[c];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const c={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16),u.aN(x.posMatrix,0,u.W,0,u.W,0,1),c[p]=x}else if(g.canonical.isChildOf(i.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const S=g.canonical.z-i.canonical.z,T=g.canonical.x-(g.canonical.x>>S<<S),M=g.canonical.y-(g.canonical.y>>S<<S),R=u.W>>S;u.aN(x.posMatrix,0,R,0,R,0,1),u.H(x.posMatrix,x.posMatrix,[-T*R,-M*R,0]),c[p]=x}else if(i.canonical.isChildOf(g.canonical)){const x=i.clone();x.posMatrix=new Float64Array(16);const S=i.canonical.z-g.canonical.z,T=i.canonical.x-(i.canonical.x>>S<<S),M=i.canonical.y-(i.canonical.y>>S<<S),R=u.W>>S;u.aN(x.posMatrix,0,u.W,0,u.W,0,1),u.H(x.posMatrix,x.posMatrix,[T*R,M*R,0]),u.J(x.posMatrix,x.posMatrix,[1/2**S,1/2**S,0]),c[p]=x}}return c}getSourceTile(i,c){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!x||!x.dem)&&c)for(;g>=p.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(i.scaledTo(g--).key);return x}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=i)}}class dt{constructor(i,c,p){this.painter=i,this.sourceCache=new sa(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,c,p,g=u.W){var x;if(!(c>=0&&c<g&&p>=0&&p<g))return 0;const S=this.getTerrainData(i),T=(x=S.tile)===null||x===void 0?void 0:x.dem;if(!T)return 0;const M=function(ie,ce,te){var me=ce[0],Te=ce[1];return ie[0]=te[0]*me+te[4]*Te+te[12],ie[1]=te[1]*me+te[5]*Te+te[13],ie}([],[c/g*u.W,p/g*u.W],S.u_terrain_matrix),R=[M[0]*T.dim,M[1]*T.dim],F=Math.floor(R[0]),V=Math.floor(R[1]),X=R[0]-F,re=R[1]-V;return T.get(F,V)*(1-X)*(1-re)+T.get(F+1,V)*X*(1-re)+T.get(F,V+1)*(1-X)*re+T.get(F+1,V+1)*X*re}getElevationForLngLatZoom(i,c){const{tileID:p,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(i,c);return this.getElevation(p,g%u.W,x%u.W,u.W)}getElevation(i,c,p,g=u.W){return this.getDEMElevation(i,c,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,x=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ae(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ae(g,new u.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const c=this.sourceCache.getSourceTile(i,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const g=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Ae(g,c.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),c.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c+c.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let x=i.canonical.z-c.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?x=i.canonical.z-g:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>x<<x),T=i.canonical.y-(i.canonical.y>>x<<x),M=u.b9(new Float64Array(16),[1/(u.W<<x),1/(u.W<<x),0]);u.H(M,M,[S*u.W,T*u.W,0]),this._demMatrixCache[i.key]={matrix:M,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(i){const c=this.painter,p=c.width/devicePixelRatio,g=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ae(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ae(c.context,{width:p,height:g,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,S=0;x<this._coordsTextureSize;x++)for(let T=0;T<this._coordsTextureSize;T++,S+=4)c[S+0]=255&T,c[S+1]=255&x,c[S+2]=T>>8<<4|x>>8,c[S+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),g=new Ae(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,g=p.gl,x=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(x,T-S-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const M=c[0]+(c[2]>>4<<8),R=c[1]+((15&c[2])<<8),F=this.coordsIndex[255-c[3]],V=F&&this.sourceCache.getTileByID(F);if(!V)return null;const X=this._coordsTextureSize,re=(1<<V.tileID.canonical.z)*X;return new u.Y((V.tileID.canonical.x*X+M)/re+V.tileID.wrap,(V.tileID.canonical.y*X+R)/re,this.getElevation(V.tileID,M,R,X))}depthAtPoint(i){const c=new Uint8Array(4),p=this.painter.context,g=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,c=new u.ba,p=new u.aX,g=this.meshSize,x=u.W/g,S=g*g;for(let V=0;V<=g;V++)for(let X=0;X<=g;X++)c.emplaceBack(X*x,V*x,0);for(let V=0;V<S;V+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+V,g+X+V+1,g+X+V+2),p.emplaceBack(X+V,g+X+V+2,X+V+1);const T=c.length,M=T+2*(g+1);for(const V of[0,1])for(let X=0;X<=g;X++)for(const re of[0,1])c.emplaceBack(X*x,V*u.W,re);for(let V=0;V<2*g;V+=2)p.emplaceBack(M+V,M+V+1,M+V+3),p.emplaceBack(M+V,M+V+3,M+V+2),p.emplaceBack(T+V,T+V+3,T+V+1),p.emplaceBack(T+V,T+V+2,T+V+3);const R=c.length,F=R+2*(g+1);for(const V of[0,1])for(let X=0;X<=g;X++)for(const re of[0,1])c.emplaceBack(V*u.W,X*x,re);for(let V=0;V<2*g;V+=2)p.emplaceBack(R+V,R+V+1,R+V+3),p.emplaceBack(R+V,R+V+3,R+V+2),p.emplaceBack(F+V,F+V+3,F+V+1),p.emplaceBack(F+V,F+V+2,F+V+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(c,yl.members),segments:u.$.simpleSegment(0,0,c.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*u.bb/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,c){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,c);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const c=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,c){const p=u.Y.fromLngLat(i.wrap()),g=(1<<c)*u.W,x=p.x*g,S=p.y*g,T=Math.floor(x/u.W),M=Math.floor(S/u.W);return{tileID:new u.Q(c,0,c,T,M),mercatorX:x,mercatorY:S}}}class sp{constructor(i,c,p){this._context=i,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new Ae(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:i,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>i.id!==c),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const po={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class vl{constructor(i,c){this.painter=i,this.terrain=c,this.pool=new sp(i.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(c)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const x of g){const S=this.terrain.sourceCache.getTerrainCoords(x);for(const T in S)this._coordsDescendingInv[p][T]||(this._coordsDescendingInv[p][T]=[]),this._coordsDescendingInv[p][T].push(S[T])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],x=g.source;if(po[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const S in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][S]=this._coordsDescendingInv[x][S].map(T=>T.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[g][p.tileID.key];x&&x!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const c=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(po[c]&&(this._prevType&&po[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(po[this._prevType]||po[c]&&g){this._prevType=c;const x=this._stacks.length-1,S=this._stacks[x]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(dd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[x]){const R=this.pool.getObjectForId(T.rtt[x].id);if(R.stamp===T.rtt[x].stamp){this.pool.useObject(R);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),T.rtt[x]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:u.aO.transparent,stencil:0}),p.currentStencilSource=void 0;for(let R=0;R<S.length;R++){const F=p.style._layers[S[R]],V=F.source?this._coordsDescendingInv[F.source][T.tileID.key]:[T.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks(F,V),p.renderLayer(p,p.style.sourceCaches[F.source],F,V),F.source&&(T.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][T.tileID.key])}}return dd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),po[c]}return!1}}const lp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},lt=w,Rd={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:np,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},cp=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Ly={showCompass:!0,showZoom:!0,visualizePitch:!1};class zd{constructor(i,c,p=!1){this.mousedown=S=>{this.startMouse(u.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),A.mousePos(this.element,S)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,A.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),x=i.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=aa({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:T,bearingDegreesPerPixelMoved:M=.8})=>{const R=new bd;return new oa({clickTolerance:T,move:(F,V)=>({bearingDelta:(V.x-F.x)*M}),moveStateManager:R,enable:S,assignEvents:cp})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=mi({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:T,pitchDegreesPerPixelMoved:M=-.5})=>{const R=new bd;return new oa({clickTolerance:T,move:(F,V)=>({pitchDelta:(V.y-F.y)*M}),moveStateManager:R,enable:S,assignEvents:cp})})({clickTolerance:x,enable:!0})),A.addEventListener(c,"mousedown",this.mousedown),A.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(c,"touchcancel",this.reset)}startMouse(i,c){this.mouseRotate.dragStart(i,c),this.mousePitch&&this.mousePitch.dragStart(i,c),A.disableDrag()}startTouch(i,c){this.touchRotate.dragStart(i,c),this.touchPitch&&this.touchPitch.dragStart(i,c),A.disableDrag()}moveMouse(i,c){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(i,c)||{};x&&p.setPitch(p.getPitch()+x)}}moveTouch(i,c){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,c)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(i,c)||{};x&&p.setPitch(p.getPitch()+x)}}off(){const i=this.element;A.removeEventListener(i,"mousedown",this.mousedown),A.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let la;function Ld(y,i,c){const p=new u.M(y.lng,y.lat);if(y=new u.M(y.lng,y.lat),i){const g=new u.M(y.lng-360,y.lat),x=new u.M(y.lng+360,y.lat),S=c.locationPoint(y).distSqr(i);c.locationPoint(g).distSqr(i)<S?y=g:c.locationPoint(x).distSqr(i)<S&&(y=x)}for(;Math.abs(y.lng-c.center.lng)>180;){const g=c.locationPoint(y);if(g.x>=0&&g.y>=0&&g.x<=c.width&&g.y<=c.height)break;y.lng>c.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&c.locationPoint(y).y>c.height/2-c.getHorizon()?y:p}const Od={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function up(y,i,c){const p=y.classList;for(const g in Od)p.remove(`maplibregl-${c}-anchor-${g}`);p.add(`maplibregl-${c}-anchor-${i}`)}class zo extends u.E{constructor(i){if(super(),this._onKeyPress=c=>{const p=c.code,g=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=c=>{var p;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ld(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),c&&c.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${Od[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${x}`),k.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=u.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");const c=A.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${g}px`),c.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const x=A.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const S=A.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of M){const Te=A.createNS("http://www.w3.org/2000/svg","ellipse");Te.setAttributeNS(null,"opacity","0.04"),Te.setAttributeNS(null,"cx","10.5"),Te.setAttributeNS(null,"cy","5.80029008"),Te.setAttributeNS(null,"rx",me.rx),Te.setAttributeNS(null,"ry",me.ry),T.appendChild(Te)}const R=A.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const F=A.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(F);const V=A.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const X=A.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(X);const re=A.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const ie=A.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=A.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const te=A.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#FFFFFF"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962"),ie.appendChild(ce),ie.appendChild(te),S.appendChild(T),S.appendChild(R),S.appendChild(V),S.appendChild(re),S.appendChild(ie),c.appendChild(S),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),up(this._element,this._anchor,"marker"),i&&i.className)for(const c of i.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.M.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var c,p;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,x=g.terrain.depthAtPoint(this._pos),S=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,S)-x<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/g.transform._pixelPerMeter,M=Math.sin(g.getPitch()*Math.PI/180)*T,R=g.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),F=g.transform.lngLatToCameraDepth(this._lngLat,S+M)-R>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=u.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,c){return i===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Sr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ma=0,ka=!1;const dp={maxWidth:100,unit:"metric"};function Dd(y,i,c){const p=c&&c.maxWidth||100,g=y._container.clientHeight/2,x=y.unproject([0,g]),S=y.unproject([p,g]),T=x.distanceTo(S);if(c&&c.unit==="imperial"){const M=3.2808*T;M>5280?hs(i,p,M/5280,y._getUIString("ScaleControl.Miles")):hs(i,p,M,y._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?hs(i,p,T/1852,y._getUIString("ScaleControl.NauticalMiles")):T>=1e3?hs(i,p,T/1e3,y._getUIString("ScaleControl.Kilometers")):hs(i,p,T,y._getUIString("ScaleControl.Meters"))}function hs(y,i,c,p){const g=function(x){const S=Math.pow(10,`${Math.floor(x)}`.length-1);let T=x/S;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const R=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*R)/R}(T),S*T}(c);y.style.width=i*(g/c)+"px",y.innerHTML=`${g}&nbsp;${p}`}const Oy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},mo=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _l(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,y),"top-left":new u.P(i,i),"top-right":new u.P(-i,i),bottom:new u.P(0,-y),"bottom-left":new u.P(i,-i),"bottom-right":new u.P(-i,-i),left:new u.P(y,0),right:new u.P(-y,0)}}if(y instanceof u.P||Array.isArray(y)){const i=u.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.P.convert(y.center||[0,0]),top:u.P.convert(y.top||[0,0]),"top-left":u.P.convert(y["top-left"]||[0,0]),"top-right":u.P.convert(y["top-right"]||[0,0]),bottom:u.P.convert(y.bottom||[0,0]),"bottom-left":u.P.convert(y["bottom-left"]||[0,0]),"bottom-right":u.P.convert(y["bottom-right"]||[0,0]),left:u.P.convert(y.left||[0,0]),right:u.P.convert(y.right||[0,0])}}return _l(new u.P(0,0))}const yt=w;f.AJAXError=u.be,f.Evented=u.E,f.LngLat=u.M,f.MercatorCoordinate=u.Y,f.Point=u.P,f.addProtocol=u.bf,f.config=u.a,f.removeProtocol=u.bg,f.AttributionControl=ip,f.BoxZoomHandler=yd,f.CanvasSource=ci,f.CooperativeGesturesHandler=Ad,f.DoubleClickZoomHandler=Pd,f.DragPanHandler=Md,f.DragRotateHandler=kd,f.EdgeInsets=Ic,f.FullscreenControl=class extends u.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var i;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=c==null?void 0:c.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Et,f.GeolocateControl=class extends u.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const c=new u.M(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),x=u.e({bearing:g},this.options.fitBoundsOptions),S=er.fromLngLat(c,p);this._map.fitBounds(S,x,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const c=new u.M(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&ka)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zo({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")))})}},this.options=u.e({},Sr,y)}onAdd(y){return this._map=y,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return u._(this,arguments,void 0,function*(i=!1){if(la!==void 0&&!i)return la;if(window.navigator.permissions===void 0)return la=!!window.navigator.geolocation,la;try{la=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{la=!!window.navigator.geolocation}return la})}().then(i=>this._setupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ma=0,ka=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),c=y.coords;return i&&(c.longitude<i.getWest()||c.longitude>i.getEast()||c.latitude<i.getSouth()||c.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),c=y.getNorthEast(),p=i.distanceTo(c),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ma--,ka=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ma++,Ma>1?(y={maximumAge:6e5,timeout:0},ka=!0):(y=this.options.positionOptions,ka=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.Hash=Jf,f.ImageSource=sr,f.KeyboardHandler=Ed,f.LngLatBounds=er,f.LogoControl=op,f.Map=class extends gl{constructor(y){if(u.bc.mark(u.bd.create),(y=u.e({},Rd,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ta(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=i=>{i.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new ap,this._controls=[],this._mapId=u.a3(),this._locale=u.e({},lp,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=$.addThrottleControl(()=>this.isMoving()),this._requestManager=new J(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const c=Yf(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?c(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new fo(this,y),this._hash=y.hash&&new Jf(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,u.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ip(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new op,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new u.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new u.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new u.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,c,p)}resize(y){var i;const c=this._containerDimensions(),p=c[0],g=c[1],x=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,x),this.painter.resize(p,g,x),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const M=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,M),this.painter.resize(p,g,M)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const S=!this._moving;return S&&(this.stop(),this.fire(new u.k("movestart",y)).fire(new u.k("move",y))),this.fire(new u.k("resize",y)),S&&this.fire(new u.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:c,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),x=y*g,S=i*g;return Math.min(x>c?c/x:1,S>p?p/S:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(er.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(u.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(u.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,c){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:x=>{const S=this.getLayer(i)?this.queryRenderedFeatures(x.point,{layers:[i]}):[];S.length?p||(p=!0,c.call(this,new An(y,this,x.originalEvent,{features:S}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:c,delegates:{mousemove:S=>{(this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,c.call(this,new An(y,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,c.call(this,new An(y,this,S.originalEvent)))}}}}{const p=g=>{const x=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];x.length&&(g.features=x,c.call(this,g),delete g.features)};return{layer:i,listener:c,delegates:{[y]:p}}}}on(y,i,c){if(c===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,c){if(c===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,c);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,c){return c===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let x=0;x<g.length;x++){const S=g[x];if(S.layer===i&&S.listener===c){for(const T in S.delegates)this.off(T,S.delegates[T]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let c;const p=y instanceof u.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof u.P||typeof g[0]=="number")c=[u.P.convert(g)];else{const x=u.P.convert(g[0]),S=u.P.convert(g[1]);c=[x,new u.P(S.x,x.y),S,new u.P(x.x,S.y),x]}return this.style.queryRenderedFeatures(c,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const c=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new dc(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,c):this.style.loadJSON(y,i,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const c=this._requestManager.transformRequest(y,"Style");u.h(c,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new u.j(p))})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new u.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&i.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===y.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new dt(this.painter,i,y),this.painter.renderToTexture=new vl(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const c=y[i]._tiles;for(const p in c){const g=c[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,c={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:x,stretchY:S,content:T,textFitWidth:M,textFitHeight:R}=c;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||u.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:V,data:X}=i,re=i;return this.style.addImage(y,{data:new u.R({width:F,height:V},new Uint8Array(X)),pixelRatio:p,stretchX:x,stretchY:S,content:T,textFitWidth:M,textFitHeight:R,sdf:g,version:0,userImage:re}),re.onAdd&&re.onAdd(this,y),this}}{const{width:F,height:V,data:X}=k.getImageData(i);this.style.addImage(y,{data:new u.R({width:F,height:V},X),pixelRatio:p,stretchX:x,stretchY:S,content:T,textFitWidth:M,textFitHeight:R,sdf:g,version:0})}}updateImage(y,i){const c=this.style.getImage(y);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.b(i)?k.getImageData(i):i,{width:g,height:x,data:S}=p;if(g===void 0||x===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==c.data.width||x!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(i instanceof HTMLImageElement||u.b(i));return c.data.replace(S,T),this.style.updateImage(y,c),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return $.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,c){return this.style.setLayerZoomRange(y,i,c),this._update(!0)}setFilter(y,i,c={}){return this.style.setFilter(y,i,c),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,c,p={}){return this.style.setPaintProperty(y,i,c,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,c,p={}){return this.style.setLayoutProperty(y,i,c,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,c,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,c=>{c||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=A.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const g=this._controlContainer=A.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{x[S]=A.create("div",`maplibregl-ctrl-${S} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,i,c){this._canvas.width=Math.floor(c*y),this._canvas.height=Math.floor(c*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const c=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!c){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new hd(c,this.transform),q.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,x=k.now();this.style.zoomHistory.update(g,x);const S=new u.a8(g,{now:x,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=S.crossFadingFactor();T===1&&T===this._crossFadingFactor||(c=!0,this._crossFadingFactor=T),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bc.mark(u.bd.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,u.bc.mark(u.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),$.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bc.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(y=>{u.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return lt}getCameraTargetElevation(){return this.transform.elevation}},f.MapMouseEvent=An,f.MapTouchEvent=ia,f.MapWheelEvent=kc,f.Marker=zo,f.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),c=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);i.title=p,i.setAttribute("aria-label",p)},this.options=u.e({},Ly,y),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const c=A.create("button",y,this._container);return c.type="button",c.addEventListener("click",i),c}},f.Popup=class extends u.E{constructor(y){super(),this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ld(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!i)return;const p=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const x=_l(this.options.offset);if(!g){const T=this._container.offsetWidth,M=this._container.offsetHeight;let R;R=p.y+x.bottom.y<M?["top"]:p.y>this._map.transform.height-M?["bottom"]:[],p.x<T/2?R.push("left"):p.x>this._map.transform.width-T/2&&R.push("right"),g=R.length===0?"bottom":R.join("-")}let S=p.add(x[g]);this.options.subpixelPositioning||(S=S.round()),A.setTransform(this._container,`${Od[g]} translate(${S.x}px,${S.y}px)`),up(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Oy),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=u.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=y;p=c.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(mo);y&&y.focus()}},f.RasterDEMTileSource=Sn,f.RasterTileSource=kr,f.ScaleControl=class{constructor(y){this._onMove=()=>{Dd(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Dd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},dp),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=Id,f.Style=dc,f.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=Cd,f.TwoFingersTouchRotateHandler=Sd,f.TwoFingersTouchZoomHandler=us,f.TwoFingersTouchZoomRotateHandler=ds,f.VectorTileSource=ze,f.VideoSource=ln,f.addSourceType=(y,i)=>u._(void 0,void 0,void 0,function*(){if(yn(y))throw new Error(`A source type called "${y}" already exists.`);((c,p)=>{ui[c]=p})(y,i)}),f.clearPrewarmedResources=function(){const y=Ht;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Ze),Ht=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return Jr().getRTLTextPluginStatus()},f.getVersion=function(){return yt},f.getWorkerCount=function(){return gt.workerCount},f.getWorkerUrl=function(){return u.a.WORKER_URL},f.importScriptInWorkers=function(y){return Lr().broadcast("IS",y)},f.prewarm=function(){Nt().acquire(Ze)},f.setMaxParallelImageRequests=function(y){u.a.MAX_PARALLEL_IMAGE_REQUESTS=y},f.setRTLTextPlugin=function(y,i){return Jr().setRTLTextPlugin(y,i)},f.setWorkerCount=function(y){gt.workerCount=y},f.setWorkerUrl=function(y){u.a.WORKER_URL=y}});var h=r;return h})})(SI);var Dz=SI.exports;const Fz=uf(Dz);var EI={exports:{}},TI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=L;function Bz(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $z=typeof Object.is=="function"?Object.is:Bz,Nz=_f.useSyncExternalStore,jz=_f.useRef,Vz=_f.useEffect,Uz=_f.useMemo,Hz=_f.useDebugValue;TI.useSyncExternalStoreWithSelector=function(e,t,r,a,l){var h=jz(null);if(h.current===null){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=Uz(function(){function w(q){if(!C){if(C=!0,I=q,q=a(q),l!==void 0&&f.hasValue){var G=f.value;if(l(G,q))return k=G}return k=q}if(G=k,$z(I,q))return G;var Z=a(q);return l!==void 0&&l(G,Z)?G:(I=q,k=Z)}var C=!1,I,k,A=r===void 0?null:r;return[function(){return w(t())},A===null?void 0:function(){return w(A())}]},[t,r,a,l]);var u=Nz(e,h[0],h[1]);return Vz(function(){f.hasValue=!0,f.value=u},[u]),Hz(u),u};EI.exports=TI;var Wz=EI.exports,to="default"in Kl?rt:Kl,dS=Symbol.for("react-redux-context"),hS=typeof globalThis<"u"?globalThis:{};function Gz(){if(!to.createContext)return{};const e=hS[dS]??(hS[dS]=new Map);let t=e.get(to.createContext);return t||(t=to.createContext(null),e.set(to.createContext,t)),t}var Gs=Gz(),qz=()=>{throw new Error("uSES not initialized!")};function mx(e=Gs){return function(){return to.useContext(e)}}var II=mx(),PI=qz,Zz=e=>{PI=e},Kz=(e,t)=>e===t;function Xz(e=Gs){const t=e===Gs?II:mx(e),r=(a,l={})=>{const{equalityFn:h=Kz,devModeChecks:f={}}=typeof l=="function"?{equalityFn:l}:l,{store:u,subscription:w,getServerState:C,stabilityCheck:I,identityFunctionCheck:k}=t();to.useRef(!0);const A=to.useCallback({[a.name](G){return a(G)}}[a.name],[a,I,f.stabilityCheck]),q=PI(w.addNestedSub,u.getState,C||u.getState,A,h);return to.useDebugValue(q),q};return Object.assign(r,{withTypes:()=>r}),r}var Fl=Xz();function Yz(e){e()}function Jz(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Yz(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let a=e;for(;a;)r.push(a),a=a.next;return r},subscribe(r){let a=!0;const l=t={callback:r,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var fS={notify(){},get:()=>[]};function Qz(e,t){let r,a=fS,l=0,h=!1;function f(Z){I();const K=a.subscribe(Z);let j=!1;return()=>{j||(j=!0,K(),k())}}function u(){a.notify()}function w(){G.onStateChange&&G.onStateChange()}function C(){return h}function I(){l++,r||(r=e.subscribe(w),a=Jz())}function k(){l--,r&&l===0&&(r(),r=void 0,a.clear(),a=fS)}function A(){h||(h=!0,I())}function q(){h&&(h=!1,k())}const G={addNestedSub:f,notifyNestedSubs:u,handleChangeWrapper:w,isSubscribed:C,trySubscribe:A,tryUnsubscribe:q,getListeners:()=>a};return G}var eL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tL=typeof navigator<"u"&&navigator.product==="ReactNative",rL=eL||tL?to.useLayoutEffect:to.useEffect;function nL({store:e,context:t,children:r,serverState:a,stabilityCheck:l="once",identityFunctionCheck:h="once"}){const f=to.useMemo(()=>{const C=Qz(e);return{store:e,subscription:C,getServerState:a?()=>a:void 0,stabilityCheck:l,identityFunctionCheck:h}},[e,a,l,h]),u=to.useMemo(()=>e.getState(),[e]);rL(()=>{const{subscription:C}=f;return C.onStateChange=C.notifyNestedSubs,C.trySubscribe(),u!==e.getState()&&C.notifyNestedSubs(),()=>{C.tryUnsubscribe(),C.onStateChange=void 0}},[f,u]);const w=t||Gs;return to.createElement(w.Provider,{value:f},r)}var iL=nL;function MI(e=Gs){const t=e===Gs?II:mx(e),r=()=>{const{store:a}=t();return a};return Object.assign(r,{withTypes:()=>r}),r}var oL=MI();function aL(e=Gs){const t=e===Gs?oL:MI(e),r=()=>t().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var gx=aL();Zz(Wz.useSyncExternalStoreWithSelector);function Wn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sL=typeof Symbol=="function"&&Symbol.observable||"@@observable",pS=sL,o0=()=>Math.random().toString(36).substring(7).split("").join("."),lL={INIT:`@@redux/INIT${o0()}`,REPLACE:`@@redux/REPLACE${o0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${o0()}`},ug=lL;function yx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kI(e,t,r){if(typeof e!="function")throw new Error(Wn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Wn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Wn(1));return r(kI)(e,t)}let a=e,l=t,h=new Map,f=h,u=0,w=!1;function C(){f===h&&(f=new Map,h.forEach((K,j)=>{f.set(j,K)}))}function I(){if(w)throw new Error(Wn(3));return l}function k(K){if(typeof K!="function")throw new Error(Wn(4));if(w)throw new Error(Wn(5));let j=!0;C();const O=u++;return f.set(O,K),function(){if(j){if(w)throw new Error(Wn(6));j=!1,C(),f.delete(O),h=null}}}function A(K){if(!yx(K))throw new Error(Wn(7));if(typeof K.type>"u")throw new Error(Wn(8));if(typeof K.type!="string")throw new Error(Wn(17));if(w)throw new Error(Wn(9));try{w=!0,l=a(l,K)}finally{w=!1}return(h=f).forEach(O=>{O()}),K}function q(K){if(typeof K!="function")throw new Error(Wn(10));a=K,A({type:ug.REPLACE})}function G(){const K=k;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Wn(11));function O(){const J=j;J.next&&J.next(I())}return O(),{unsubscribe:K(O)}},[pS](){return this}}}return A({type:ug.INIT}),{dispatch:A,subscribe:k,getState:I,replaceReducer:q,[pS]:G}}function cL(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:ug.INIT})>"u")throw new Error(Wn(12));if(typeof r(void 0,{type:ug.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wn(13))})}function AI(e){const t=Object.keys(e),r={};for(let h=0;h<t.length;h++){const f=t[h];typeof e[f]=="function"&&(r[f]=e[f])}const a=Object.keys(r);let l;try{cL(r)}catch(h){l=h}return function(f={},u){if(l)throw l;let w=!1;const C={};for(let I=0;I<a.length;I++){const k=a[I],A=r[k],q=f[k],G=A(q,u);if(typeof G>"u")throw u&&u.type,new Error(Wn(14));C[k]=G,w=w||G!==q}return w=w||a.length!==Object.keys(f).length,w?C:f}}function dg(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...a)=>t(r(...a)))}function uL(...e){return t=>(r,a)=>{const l=t(r,a);let h=()=>{throw new Error(Wn(15))};const f={getState:l.getState,dispatch:(w,...C)=>h(w,...C)},u=e.map(w=>w(f));return h=dg(...u)(l.dispatch),{...l,dispatch:h}}}function dL(e){return yx(e)&&"type"in e&&typeof e.type=="string"}var RI=Symbol.for("immer-nothing"),mS=Symbol.for("immer-draftable"),oo=Symbol.for("immer-state");function qo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pu=Object.getPrototypeOf;function qs(e){return!!e&&!!e[oo]}function Ja(e){var t;return e?zI(e)||Array.isArray(e)||!!e[mS]||!!((t=e.constructor)!=null&&t[mS])||Ug(e)||Hg(e):!1}var hL=Object.prototype.constructor.toString();function zI(e){if(!e||typeof e!="object")return!1;const t=Pu(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===hL}function hg(e,t){Vg(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,a)=>t(a,r,e))}function Vg(e){const t=e[oo];return t?t.type_:Array.isArray(e)?1:Ug(e)?2:Hg(e)?3:0}function T_(e,t){return Vg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function LI(e,t,r){const a=Vg(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function fL(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ug(e){return e instanceof Map}function Hg(e){return e instanceof Set}function Al(e){return e.copy_||e.base_}function I_(e,t){if(Ug(e))return new Map(e);if(Hg(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=zI(e);if(t===!0||t==="class_only"&&!r){const a=Object.getOwnPropertyDescriptors(e);delete a[oo];let l=Reflect.ownKeys(a);for(let h=0;h<l.length;h++){const f=l[h],u=a[f];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[f]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[f]})}return Object.create(Pu(e),a)}else{const a=Pu(e);if(a!==null&&r)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function vx(e,t=!1){return Wg(e)||qs(e)||!Ja(e)||(Vg(e)>1&&(e.set=e.add=e.clear=e.delete=pL),Object.freeze(e),t&&Object.entries(e).forEach(([r,a])=>vx(a,!0))),e}function pL(){qo(2)}function Wg(e){return Object.isFrozen(e)}var mL={};function tc(e){const t=mL[e];return t||qo(0,e),t}var Jh;function OI(){return Jh}function gL(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gS(e,t){t&&(tc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P_(e){M_(e),e.drafts_.forEach(yL),e.drafts_=null}function M_(e){e===Jh&&(Jh=e.parent_)}function yS(e){return Jh=gL(Jh,e)}function yL(e){const t=e[oo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[oo].modified_&&(P_(t),qo(4)),Ja(e)&&(e=fg(t,e),t.parent_||pg(t,e)),t.patches_&&tc("Patches").generateReplacementPatches_(r[oo].base_,e,t.patches_,t.inversePatches_)):e=fg(t,r,[]),P_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==RI?e:void 0}function fg(e,t,r){if(Wg(t))return t;const a=t[oo];if(!a)return hg(t,(l,h)=>_S(e,a,t,l,h,r)),t;if(a.scope_!==e)return t;if(!a.modified_)return pg(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const l=a.copy_;let h=l,f=!1;a.type_===3&&(h=new Set(l),l.clear(),f=!0),hg(h,(u,w)=>_S(e,a,l,u,w,r,f)),pg(e,l,!1),r&&e.patches_&&tc("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function _S(e,t,r,a,l,h,f){if(qs(l)){const u=h&&t&&t.type_!==3&&!T_(t.assigned_,a)?h.concat(a):void 0,w=fg(e,l,u);if(LI(r,a,w),qs(w))e.canAutoFreeze_=!1;else return}else f&&r.add(l);if(Ja(l)&&!Wg(l)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;fg(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,a)&&pg(e,l)}}function pg(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vx(t,r)}function vL(e,t){const r=Array.isArray(e),a={type_:r?1:0,scope_:t?t.scope_:OI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,h=_x;r&&(l=[a],h=Qh);const{revoke:f,proxy:u}=Proxy.revocable(l,h);return a.draft_=u,a.revoke_=f,u}var _x={get(e,t){if(t===oo)return e;const r=Al(e);if(!T_(r,t))return _L(e,r,t);const a=r[t];return e.finalized_||!Ja(a)?a:a===a0(e.base_,t)?(s0(e),e.copy_[t]=A_(a,e)):a},has(e,t){return t in Al(e)},ownKeys(e){return Reflect.ownKeys(Al(e))},set(e,t,r){const a=DI(Al(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,r),!0;if(!e.modified_){const l=a0(Al(e),t),h=l==null?void 0:l[oo];if(h&&h.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(fL(r,l)&&(r!==void 0||T_(e.base_,t)))return!0;s0(e),k_(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return a0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,s0(e),k_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Al(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty(){qo(11)},getPrototypeOf(e){return Pu(e.base_)},setPrototypeOf(){qo(12)}},Qh={};hg(_x,(e,t)=>{Qh[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Qh.deleteProperty=function(e,t){return Qh.set.call(this,e,t,void 0)};Qh.set=function(e,t,r){return _x.set.call(this,e[0],t,r,e[0])};function a0(e,t){const r=e[oo];return(r?Al(r):e)[t]}function _L(e,t,r){var l;const a=DI(t,r);return a?"value"in a?a.value:(l=a.get)==null?void 0:l.call(e.draft_):void 0}function DI(e,t){if(!(t in e))return;let r=Pu(e);for(;r;){const a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Pu(r)}}function k_(e){e.modified_||(e.modified_=!0,e.parent_&&k_(e.parent_))}function s0(e){e.copy_||(e.copy_=I_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var xL=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,a)=>{if(typeof t=="function"&&typeof r!="function"){const h=r;r=t;const f=this;return function(w=h,...C){return f.produce(w,I=>r.call(this,I,...C))}}typeof r!="function"&&qo(6),a!==void 0&&typeof a!="function"&&qo(7);let l;if(Ja(t)){const h=yS(this),f=A_(t,void 0);let u=!0;try{l=r(f),u=!1}finally{u?P_(h):M_(h)}return gS(h,a),vS(l,h)}else if(!t||typeof t!="object"){if(l=r(t),l===void 0&&(l=t),l===RI&&(l=void 0),this.autoFreeze_&&vx(l,!0),a){const h=[],f=[];tc("Patches").generateReplacementPatches_(t,l,h,f),a(h,f)}return l}else qo(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(f,...u)=>this.produceWithPatches(f,w=>t(w,...u));let a,l;return[this.produce(t,r,(f,u)=>{a=f,l=u}),a,l]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ja(e)||qo(8),qs(e)&&(e=FI(e));const t=yS(this),r=A_(e,void 0);return r[oo].isManual_=!0,M_(t),r}finishDraft(e,t){const r=e&&e[oo];(!r||!r.isManual_)&&qo(9);const{scope_:a}=r;return gS(a,t),vS(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const l=t[r];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}r>-1&&(t=t.slice(r+1));const a=tc("Patches").applyPatches_;return qs(e)?a(e,t):this.produce(e,l=>a(l,t))}};function A_(e,t){const r=Ug(e)?tc("MapSet").proxyMap_(e,t):Hg(e)?tc("MapSet").proxySet_(e,t):vL(e,t);return(t?t.scope_:OI()).drafts_.push(r),r}function FI(e){return qs(e)||qo(10,e),BI(e)}function BI(e){if(!Ja(e)||Wg(e))return e;const t=e[oo];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=I_(e,t.scope_.immer_.useStrictShallowCopy_)}else r=I_(e,!0);return hg(r,(a,l)=>{LI(r,a,BI(l))}),t&&(t.finalized_=!1),r}var ao=new xL,$I=ao.produce;ao.produceWithPatches.bind(ao);ao.setAutoFreeze.bind(ao);ao.setUseStrictShallowCopy.bind(ao);ao.applyPatches.bind(ao);ao.createDraft.bind(ao);ao.finishDraft.bind(ao);function bL(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function wL(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function SL(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${r}]`)}}var xS=e=>Array.isArray(e)?e:[e];function CL(e){const t=Array.isArray(e[0])?e[0]:e;return SL(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function EL(e,t){const r=[],{length:a}=e;for(let l=0;l<a;l++)r.push(e[l].apply(null,t));return r}var TL=class{constructor(e){this.value=e}deref(){return this.value}},IL=typeof WeakRef<"u"?WeakRef:TL,PL=0,bS=1;function em(){return{s:PL,v:void 0,o:null,p:null}}function xx(e,t={}){let r=em();const{resultEqualityCheck:a}=t;let l,h=0;function f(){var k;let u=r;const{length:w}=arguments;for(let A=0,q=w;A<q;A++){const G=arguments[A];if(typeof G=="function"||typeof G=="object"&&G!==null){let Z=u.o;Z===null&&(u.o=Z=new WeakMap);const K=Z.get(G);K===void 0?(u=em(),Z.set(G,u)):u=K}else{let Z=u.p;Z===null&&(u.p=Z=new Map);const K=Z.get(G);K===void 0?(u=em(),Z.set(G,u)):u=K}}const C=u;let I;if(u.s===bS)I=u.v;else if(I=e.apply(null,arguments),h++,a){const A=((k=l==null?void 0:l.deref)==null?void 0:k.call(l))??l;A!=null&&a(A,I)&&(I=A,h!==0&&h--),l=typeof I=="object"&&I!==null||typeof I=="function"?new IL(I):I}return C.s=bS,C.v=I,I}return f.clearCache=()=>{r=em(),f.resetResultsCount()},f.resultsCount=()=>h,f.resetResultsCount=()=>{h=0},f}function NI(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let h=0,f=0,u,w={},C=l.pop();typeof C=="object"&&(w=C,C=l.pop()),bL(C,`createSelector expects an output function after the inputs, but received: [${typeof C}]`);const I={...r,...w},{memoize:k,memoizeOptions:A=[],argsMemoize:q=xx,argsMemoizeOptions:G=[],devModeChecks:Z={}}=I,K=xS(A),j=xS(G),O=CL(l),$=k(function(){return h++,C.apply(null,arguments)},...K),J=q(function(){f++;const oe=EL(O,arguments);return u=$.apply(null,oe),u},...j);return Object.assign(J,{resultFunc:C,memoizedResultFunc:$,dependencies:O,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>u,recomputations:()=>h,resetRecomputations:()=>{h=0},memoize:k,argsMemoize:q})};return Object.assign(a,{withTypes:()=>a}),a}var xf=NI(xx),ML=Object.assign((e,t=xf)=>{wL(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),a=r.map(h=>e[h]);return t(a,(...h)=>h.reduce((f,u,w)=>(f[r[w]]=u,f),{}))},{withTypes:()=>ML});function jI(e){return({dispatch:r,getState:a})=>l=>h=>typeof h=="function"?h(r,a,e):l(h)}var kL=jI(),AL=jI,RL=(...e)=>{const t=NI(...e),r=Object.assign((...a)=>{const l=t(...a),h=(f,...u)=>l(qs(f)?FI(f):f,...u);return Object.assign(h,l),h},{withTypes:()=>r});return r};RL(xx);var zL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dg:dg.apply(null,arguments)};function va(e,t){function r(...a){if(t){let l=t(...a);if(!l)throw new Error(Fi(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=a=>dL(a)&&a.type===e,r}var VI=class vh extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vh.prototype)}static get[Symbol.species](){return vh}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vh(...t[0].concat(this)):new vh(...t.concat(this))}};function wS(e){return Ja(e)?$I(e,()=>{}):e}function SS(e,t,r){if(e.has(t)){let l=e.get(t);return r.update&&(l=r.update(l,t,e),e.set(t,l)),l}if(!r.insert)throw new Error(Fi(10));const a=r.insert(t,e);return e.set(t,a),a}function LL(e){return typeof e=="boolean"}var OL=()=>function(t){const{thunk:r=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:h=!0}=t??{};let f=new VI;return r&&(LL(r)?f.push(kL):f.push(AL(r.extraArgument))),f},DL="RTK_autoBatch",UI=e=>t=>{setTimeout(t,e)},FL=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:UI(10),BL=(e={type:"raf"})=>t=>(...r)=>{const a=t(...r);let l=!0,h=!1,f=!1;const u=new Set,w=e.type==="tick"?queueMicrotask:e.type==="raf"?FL:e.type==="callback"?e.queueNotification:UI(e.timeout),C=()=>{f=!1,h&&(h=!1,u.forEach(I=>I()))};return Object.assign({},a,{subscribe(I){const k=()=>l&&I(),A=a.subscribe(k);return u.add(I),()=>{A(),u.delete(I)}},dispatch(I){var k;try{return l=!((k=I==null?void 0:I.meta)!=null&&k[DL]),h=!l,h&&(f||(f=!0,w(C))),a.dispatch(I)}finally{l=!0}}})},$L=e=>function(r){const{autoBatch:a=!0}=r??{};let l=new VI(e);return a&&l.push(BL(typeof a=="object"?a:void 0)),l},NL=!0;function jL(e){const t=OL(),{reducer:r=void 0,middleware:a,devTools:l=!0,preloadedState:h=void 0,enhancers:f=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(yx(r))u=AI(r);else throw new Error(Fi(1));let w;typeof a=="function"?w=a(t):w=t();let C=dg;l&&(C=zL({trace:!NL,...typeof l=="object"&&l}));const I=uL(...w),k=$L(I);let A=typeof f=="function"?f(k):k();const q=C(...A);return kI(u,h,q)}function HI(e){const t={},r=[];let a;const l={addCase(h,f){const u=typeof h=="string"?h:h.type;if(!u)throw new Error(Fi(28));if(u in t)throw new Error(Fi(29));return t[u]=f,l},addMatcher(h,f){return r.push({matcher:h,reducer:f}),l},addDefaultCase(h){return a=h,l}};return e(l),[t,r,a]}function VL(e){return typeof e=="function"}function UL(e,t){let[r,a,l]=HI(t),h;if(VL(e))h=()=>wS(e());else{const u=wS(e);h=()=>u}function f(u=h(),w){let C=[r[w.type],...a.filter(({matcher:I})=>I(w)).map(({reducer:I})=>I)];return C.filter(I=>!!I).length===0&&(C=[l]),C.reduce((I,k)=>{if(k)if(qs(I)){const q=k(I,w);return q===void 0?I:q}else{if(Ja(I))return $I(I,A=>k(A,w));{const A=k(I,w);if(A===void 0){if(I===null)return I;throw new Error(Fi(9))}return A}}return I},u)}return f.getInitialState=h,f}var HL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",WL=(e=21)=>{let t="",r=e;for(;r--;)t+=HL[Math.random()*64|0];return t},GL=Symbol.for("rtk-slice-createasyncthunk");function qL(e,t){return`${e}/${t}`}function ZL({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[GL];return function(l){const{name:h,reducerPath:f=h}=l;if(!h)throw new Error(Fi(11));typeof process<"u";const u=(typeof l.reducers=="function"?l.reducers(YL()):l.reducers)||{},w=Object.keys(u),C={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},I={addCase($,J){const ne=typeof $=="string"?$:$.type;if(!ne)throw new Error(Fi(12));if(ne in C.sliceCaseReducersByType)throw new Error(Fi(13));return C.sliceCaseReducersByType[ne]=J,I},addMatcher($,J){return C.sliceMatchers.push({matcher:$,reducer:J}),I},exposeAction($,J){return C.actionCreators[$]=J,I},exposeCaseReducer($,J){return C.sliceCaseReducersByName[$]=J,I}};w.forEach($=>{const J=u[$],ne={reducerName:$,type:qL(h,$),createNotation:typeof l.reducers=="function"};QL(J)?t6(ne,J,I,t):JL(ne,J,I)});function k(){const[$={},J=[],ne=void 0]=typeof l.extraReducers=="function"?HI(l.extraReducers):[l.extraReducers],oe={...$,...C.sliceCaseReducersByType};return UL(l.initialState,le=>{for(let be in oe)le.addCase(be,oe[be]);for(let be of C.sliceMatchers)le.addMatcher(be.matcher,be.reducer);for(let be of J)le.addMatcher(be.matcher,be.reducer);ne&&le.addDefaultCase(ne)})}const A=$=>$,q=new Map;let G;function Z($,J){return G||(G=k()),G($,J)}function K(){return G||(G=k()),G.getInitialState()}function j($,J=!1){function ne(le){let be=le[$];return typeof be>"u"&&J&&(be=K()),be}function oe(le=A){const be=SS(q,J,{insert:()=>new WeakMap});return SS(be,le,{insert:()=>{const Ee={};for(const[ke,Ae]of Object.entries(l.selectors??{}))Ee[ke]=KL(Ae,le,K,J);return Ee}})}return{reducerPath:$,getSelectors:oe,get selectors(){return oe(ne)},selectSlice:ne}}const O={name:h,reducer:Z,actions:C.actionCreators,caseReducers:C.sliceCaseReducersByName,getInitialState:K,...j(f),injectInto($,{reducerPath:J,...ne}={}){const oe=J??f;return $.inject({reducerPath:oe,reducer:Z},ne),{...O,...j(oe,!0)}}};return O}}function KL(e,t,r,a){function l(h,...f){let u=t(h);return typeof u>"u"&&a&&(u=r()),e(u,...f)}return l.unwrapped=e,l}var XL=ZL();function YL(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function JL({type:e,reducerName:t,createNotation:r},a,l){let h,f;if("reducer"in a){if(r&&!e6(a))throw new Error(Fi(17));h=a.reducer,f=a.prepare}else h=a;l.addCase(e,h).exposeCaseReducer(t,h).exposeAction(t,f?va(e,f):va(e))}function QL(e){return e._reducerDefinitionType==="asyncThunk"}function e6(e){return e._reducerDefinitionType==="reducerWithPrepare"}function t6({type:e,reducerName:t},r,a,l){if(!l)throw new Error(Fi(18));const{payloadCreator:h,fulfilled:f,pending:u,rejected:w,settled:C,options:I}=r,k=l(e,h,I);a.exposeAction(t,k),f&&a.addCase(k.fulfilled,f),u&&a.addCase(k.pending,u),w&&a.addCase(k.rejected,w),C&&a.addMatcher(k.settled,C),a.exposeCaseReducer(t,{fulfilled:f||tm,pending:u||tm,rejected:w||tm,settled:C||tm})}function tm(){}var r6=(e,t)=>{if(typeof e!="function")throw new Error(Fi(32))},bx="listenerMiddleware",n6=e=>{let{type:t,actionCreator:r,matcher:a,predicate:l,effect:h}=e;if(t)l=va(t).match;else if(r)t=r.type,l=r.match;else if(a)l=a;else if(!l)throw new Error(Fi(21));return r6(h),{predicate:l,type:t,effect:h}},i6=Object.assign(e=>{const{type:t,predicate:r,effect:a}=n6(e);return{id:WL(),effect:a,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Fi(22))}}},{withTypes:()=>i6}),o6=Object.assign(va(`${bx}/add`),{withTypes:()=>o6});va(`${bx}/removeAll`);var a6=Object.assign(va(`${bx}/remove`),{withTypes:()=>a6});function Fi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Gg=e=>e.appState,s6=xf(Gg,e=>e.coordinates),WI=xf(Gg,e=>e.selectedCity),l6=xf(Gg,e=>e.filteredCities),wx=xf(Gg,e=>e.mode),jr=[{City:"Moscow",Latitude:55.755826,Longitude:37.6173,Moscow:0,London:24,Berlin:20,Madrid:40,Rome:40,Paris:28,Bucharest:30,Vienna:27,Hamburg:24,Warsaw:20,Budapest:28,Barcelona:"36",Munich:24,Milan:32,Prague:20,Sofia:40,Brussels:30,Birmingham:26,Cologne:22,Naples:42,Stockholm:18,Turin:36,Marseille:35,Amsterdam:28,Zagreb:26,Belgrade:28,Helsinki:10,Oslo:16,Copenhagen:18,Dublin:50,Lisbon:40,Edinburgh:50,Athens:40,Riga:14,Vilnius:14,Tallinn:12,Geneva:35,Stuttgart:30,Rotterdam:25,Krakow:22},{City:"London",Latitude:51.5072178,Longitude:-.1275862,Moscow:24,London:0,Berlin:9,Madrid:15,Rome:15,Paris:2.5,Bucharest:24,Vienna:13,Hamburg:5,Warsaw:14,Budapest:15,Barcelona:"13",Munich:10,Milan:12,Prague:11,Sofia:26,Brussels:2,Birmingham:1.5,Cologne:5,Naples:16,Stockholm:18,Turin:12,Marseille:8,Amsterdam:4,Zagreb:18,Belgrade:20,Helsinki:24,Oslo:20,Copenhagen:12,Dublin:3,Lisbon:15,Edinburgh:4,Athens:40,Riga:24,Vilnius:22,Tallinn:24,Geneva:6,Stuttgart:8,Rotterdam:2,Krakow:20},{City:"Berlin",Latitude:52.5200066,Longitude:13.404954,Moscow:20,London:9,Berlin:0,Madrid:16,Rome:14,Paris:8,Bucharest:21,Vienna:9,Hamburg:2,Warsaw:6,Budapest:10,Barcelona:"18",Munich:6,Milan:9,Prague:4,Sofia:24,Brussels:8,Birmingham:10,Cologne:4,Naples:16,Stockholm:11,Turin:10,Marseille:12,Amsterdam:6,Zagreb:12,Belgrade:15,Helsinki:21,Oslo:12,Copenhagen:7,Dublin:12,Lisbon:17,Edinburgh:14,Athens:30,Riga:9,Vilnius:8,Tallinn:10,Geneva:13,Stuttgart:10,Rotterdam:7,Krakow:9},{City:"Madrid",Latitude:40.4167754,Longitude:-3.7037902,Moscow:40,London:15,Berlin:16,Madrid:0,Rome:13,Paris:7,Bucharest:35,Vienna:19,Hamburg:19,Warsaw:28,Budapest:23,Barcelona:"-",Munich:19,Milan:15,Prague:18,Sofia:35,Brussels:8,Birmingham:15,Cologne:12,Naples:15,Stockholm:30,Turin:15,Marseille:3,Amsterdam:19,Zagreb:24,Belgrade:25,Helsinki:36,Oslo:32,Copenhagen:26,Dublin:25,Lisbon:5,Edinburgh:20,Athens:48,Riga:28,Vilnius:25,Tallinn:28,Geneva:15,Stuttgart:19,Rotterdam:25,Krakow:29},{City:"Rome",Latitude:41.8967068,Longitude:12.4822025,Moscow:40,London:15,Berlin:14,Madrid:13,Rome:0,Paris:11,Bucharest:24,Vienna:13,Hamburg:15,Warsaw:17,Budapest:16,Barcelona:"15",Munich:13,Milan:3,Prague:14,Sofia:28,Brussels:10,Birmingham:16,Cologne:11,Naples:1.5,Stockholm:30,Turin:4,Marseille:8,Amsterdam:14,Zagreb:15,Belgrade:15,Helsinki:32,Oslo:30,Copenhagen:25,Dublin:30,Lisbon:13,Edinburgh:22,Athens:48,Riga:30,Vilnius:27,Tallinn:28,Geneva:10,Stuttgart:11,Rotterdam:13,Krakow:19},{City:"Paris",Latitude:48.8575475,Longitude:2.3513765,Moscow:28,London:2.5,Berlin:8,Madrid:7,Rome:11,Paris:0,Bucharest:22,Vienna:12,Hamburg:6,Warsaw:12,Budapest:14,Barcelona:"6",Munich:9,Milan:8,Prague:9,Sofia:27,Brussels:1.5,Birmingham:2,Cologne:3,Naples:13,Stockholm:20,Turin:10,Marseille:3,Amsterdam:3,Zagreb:16,Belgrade:18,Helsinki:22,Oslo:20,Copenhagen:14,Dublin:8,Lisbon:7,Edinburgh:5,Athens:38,Riga:20,Vilnius:18,Tallinn:20,Geneva:6,Stuttgart:8,Rotterdam:1.5,Krakow:18},{City:"Bucharest",Latitude:44.4267674,Longitude:26.1025384,Moscow:30,London:24,Berlin:21,Madrid:35,Rome:24,Paris:22,Bucharest:0,Vienna:17,Hamburg:21,Warsaw:18,Budapest:10,Barcelona:"33",Munich:20,Milan:25,Prague:19,Sofia:6,Brussels:23,Birmingham:25,Cologne:21,Naples:25,Stockholm:30,Turin:23,Marseille:32,Amsterdam:22,Zagreb:15,Belgrade:8,Helsinki:28,Oslo:28,Copenhagen:23,Dublin:34,Lisbon:35,Edinburgh:30,Athens:20,Riga:20,Vilnius:18,Tallinn:18,Geneva:23,Stuttgart:20,Rotterdam:22,Krakow:10},{City:"Vienna",Latitude:48.2080696,Longitude:16.3713095,Moscow:27,London:13,Berlin:9,Madrid:19,Rome:13,Paris:12,Bucharest:17,Vienna:0,Hamburg:9,Warsaw:7,Budapest:3,Barcelona:"22",Munich:5,Milan:9,Prague:5,Sofia:19,Brussels:12,Birmingham:14,Cologne:7,Naples:14,Stockholm:16,Turin:10,Marseille:15,Amsterdam:7,Zagreb:2,Belgrade:6,Helsinki:20,Oslo:15,Copenhagen:10,Dublin:18,Lisbon:16,Edinburgh:12,Athens:30,Riga:12,Vilnius:10,Tallinn:10,Geneva:9,Stuttgart:7,Rotterdam:9,Krakow:4},{City:"Hamburg",Latitude:53.5488282,Longitude:9.9871703,Moscow:24,London:5,Berlin:2,Madrid:19,Rome:15,Paris:6,Bucharest:21,Vienna:9,Hamburg:0,Warsaw:8,Budapest:11,Barcelona:"19",Munich:7,Milan:13,Prague:5,Sofia:23,Brussels:7,Birmingham:6,Cologne:3,Naples:17,Stockholm:11,Turin:11,Marseille:15,Amsterdam:6,Zagreb:11,Belgrade:15,Helsinki:21,Oslo:14,Copenhagen:8,Dublin:7,Lisbon:18,Edinburgh:13,Athens:31,Riga:10,Vilnius:8,Tallinn:9,Geneva:15,Stuttgart:7,Rotterdam:4,Krakow:12},{City:"Warsaw",Latitude:52.2296756,Longitude:21.0122287,Moscow:20,London:14,Berlin:6,Madrid:28,Rome:17,Paris:12,Bucharest:18,Vienna:7,Hamburg:8,Warsaw:0,Budapest:9,Barcelona:"29",Munich:8,Milan:13,Prague:5,Sofia:21,Brussels:12,Birmingham:15,Cologne:10,Naples:19,Stockholm:13,Turin:14,Marseille:18,Amsterdam:10,Zagreb:10,Belgrade:12,Helsinki:19,Oslo:15,Copenhagen:9,Dublin:20,Lisbon:25,Edinburgh:18,Athens:25,Riga:8,Vilnius:5,Tallinn:7,Geneva:19,Stuttgart:12,Rotterdam:11,Krakow:2},{City:"Budapest",Latitude:47.497912,Longitude:19.040235,Moscow:28,London:15,Berlin:10,Madrid:23,Rome:16,Paris:14,Bucharest:10,Vienna:3,Hamburg:11,Warsaw:9,Budapest:0,Barcelona:"25",Munich:6,Milan:13,Prague:5,Sofia:12,Brussels:14,Birmingham:16,Cologne:11,Naples:16,Stockholm:15,Turin:12,Marseille:17,Amsterdam:10,Zagreb:5,Belgrade:4,Helsinki:22,Oslo:20,Copenhagen:11,Dublin:22,Lisbon:18,Edinburgh:16,Athens:27,Riga:10,Vilnius:10,Tallinn:11,Geneva:13,Stuttgart:10,Rotterdam:12,Krakow:6},{City:"Barcelona",Latitude:41.3873974,Longitude:2.168568,Moscow:36,London:13,Berlin:18,Madrid:3,Rome:15,Paris:6,Bucharest:33,Vienna:22,Hamburg:19,Warsaw:29,Budapest:25,Barcelona:"0",Munich:19,Milan:18,Prague:18,Sofia:34,Brussels:9,Birmingham:15,Cologne:12,Naples:18,Stockholm:28,Turin:17,Marseille:3,Amsterdam:19,Zagreb:22,Belgrade:25,Helsinki:33,Oslo:30,Copenhagen:26,Dublin:25,Lisbon:8,Edinburgh:20,Athens:47,Riga:28,Vilnius:25,Tallinn:28,Geneva:16,Stuttgart:19,Rotterdam:23,Krakow:28},{City:"Munich",Latitude:48.1351253,Longitude:11.5819806,Moscow:24,London:10,Berlin:6,Madrid:19,Rome:13,Paris:9,Bucharest:20,Vienna:5,Hamburg:7,Warsaw:8,Budapest:6,Barcelona:"19",Munich:0,Milan:7,Prague:6,Sofia:21,Brussels:9,Birmingham:10,Cologne:7,Naples:13,Stockholm:11,Turin:7,Marseille:13,Amsterdam:7,Zagreb:6,Belgrade:11,Helsinki:20,Oslo:14,Copenhagen:9,Dublin:17,Lisbon:16,Edinburgh:14,Athens:27,Riga:9,Vilnius:8,Tallinn:10,Geneva:13,Stuttgart:5,Rotterdam:6,Krakow:9},{City:"Milan",Latitude:45.468503,Longitude:9.1824027,Moscow:32,London:12,Berlin:9,Madrid:15,Rome:3,Paris:8,Bucharest:25,Vienna:9,Hamburg:13,Warsaw:13,Budapest:13,Barcelona:"18",Munich:7,Milan:0,Prague:9,Sofia:27,Brussels:10,Birmingham:11,Cologne:9,Naples:1.5,Stockholm:25,Turin:4,Marseille:5,Amsterdam:9,Zagreb:12,Belgrade:12,Helsinki:25,Oslo:20,Copenhagen:15,Dublin:20,Lisbon:10,Edinburgh:18,Athens:47,Riga:24,Vilnius:20,Tallinn:23,Geneva:7,Stuttgart:9,Rotterdam:8,Krakow:13},{City:"Prague",Latitude:50.0755381,Longitude:14.4378005,Moscow:20,London:11,Berlin:4,Madrid:18,Rome:14,Paris:9,Bucharest:19,Vienna:5,Hamburg:5,Warsaw:5,Budapest:5,Barcelona:"18",Munich:6,Milan:9,Prague:0,Sofia:20,Brussels:9,Birmingham:11,Cologne:5,Naples:14,Stockholm:12,Turin:9,Marseille:14,Amsterdam:5,Zagreb:6,Belgrade:10,Helsinki:20,Oslo:13,Copenhagen:8,Dublin:16,Lisbon:18,Edinburgh:12,Athens:27,Riga:10,Vilnius:8,Tallinn:10,Geneva:12,Stuttgart:7,Rotterdam:6,Krakow:6},{City:"Sofia",Latitude:42.6977082,Longitude:23.3218675,Moscow:40,London:26,Berlin:24,Madrid:35,Rome:28,Paris:27,Bucharest:6,Vienna:19,Hamburg:23,Warsaw:21,Budapest:12,Barcelona:"34",Munich:21,Milan:27,Prague:20,Sofia:0,Brussels:25,Birmingham:28,Cologne:23,Naples:30,Stockholm:35,Turin:25,Marseille:32,Amsterdam:27,Zagreb:19,Belgrade:6,Helsinki:28,Oslo:30,Copenhagen:23,Dublin:34,Lisbon:35,Edinburgh:30,Athens:20,Riga:22,Vilnius:20,Tallinn:20,Geneva:23,Stuttgart:20,Rotterdam:22,Krakow:15},{City:"Brussels",Latitude:50.8476424,Longitude:4.3571696,Moscow:30,London:2,Berlin:8,Madrid:8,Rome:10,Paris:1.5,Bucharest:23,Vienna:12,Hamburg:7,Warsaw:12,Budapest:14,Barcelona:"9",Munich:9,Milan:10,Prague:9,Sofia:25,Brussels:0,Birmingham:2,Cologne:3,Naples:13,Stockholm:20,Turin:12,Marseille:5,Amsterdam:2.5,Zagreb:16,Belgrade:18,Helsinki:23,Oslo:22,Copenhagen:14,Dublin:9,Lisbon:7,Edinburgh:5,Athens:37,Riga:20,Vilnius:18,Tallinn:20,Geneva:6,Stuttgart:8,Rotterdam:1.5,Krakow:18},{City:"Birmingham",Latitude:52.4822694,Longitude:-1.8900078,Moscow:26,London:1.5,Berlin:10,Madrid:15,Rome:16,Paris:2,Bucharest:25,Vienna:14,Hamburg:6,Warsaw:15,Budapest:16,Barcelona:"15",Munich:10,Milan:11,Prague:11,Sofia:28,Brussels:2,Birmingham:0,Cologne:4,Naples:15,Stockholm:21,Turin:14,Marseille:7,Amsterdam:4,Zagreb:19,Belgrade:21,Helsinki:25,Oslo:24,Copenhagen:15,Dublin:3,Lisbon:15,Edinburgh:6,Athens:38,Riga:24,Vilnius:22,Tallinn:24,Geneva:7,Stuttgart:10,Rotterdam:2,Krakow:20},{City:"Cologne, Germnay",Latitude:50.937531,Longitude:6.9602786,Moscow:22,London:5,Berlin:4,Madrid:12,Rome:11,Paris:3,Bucharest:21,Vienna:7,Hamburg:3,Warsaw:10,Budapest:11,Barcelona:"12",Munich:7,Milan:9,Prague:5,Sofia:23,Brussels:3,Birmingham:4,Cologne:0,Naples:12,Stockholm:14,Turin:9,Marseille:10,Amsterdam:3,Zagreb:12,Belgrade:14,Helsinki:21,Oslo:15,Copenhagen:7,Dublin:7,Lisbon:15,Edinburgh:10,Athens:31,Riga:10,Vilnius:8,Tallinn:10,Geneva:11,Stuttgart:7,Rotterdam:3,Krakow:11},{City:"Naples",Latitude:40.8517983,Longitude:14.26812,Moscow:42,London:16,Berlin:16,Madrid:15,Rome:1.5,Paris:13,Bucharest:25,Vienna:14,Hamburg:17,Warsaw:19,Budapest:16,Barcelona:"18",Munich:13,Milan:1.5,Prague:14,Sofia:30,Brussels:13,Birmingham:15,Cologne:12,Naples:0,Stockholm:30,Turin:6,Marseille:8,Amsterdam:15,Zagreb:16,Belgrade:17,Helsinki:32,Oslo:30,Copenhagen:25,Dublin:30,Lisbon:14,Edinburgh:22,Athens:48,Riga:30,Vilnius:27,Tallinn:28,Geneva:12,Stuttgart:13,Rotterdam:14,Krakow:18},{City:"Stockholm",Latitude:59.3293235,Longitude:18.0685808,Moscow:18,London:18,Berlin:11,Madrid:30,Rome:30,Paris:20,Bucharest:30,Vienna:16,Hamburg:11,Warsaw:14,Budapest:15,Barcelona:"28",Munich:11,Milan:25,Prague:12,Sofia:35,Brussels:20,Birmingham:21,Cologne:14,Naples:30,Stockholm:0,Turin:25,Marseille:30,Amsterdam:17,Zagreb:25,Belgrade:30,Helsinki:10,Oslo:7,Copenhagen:5,Dublin:25,Lisbon:32,Edinburgh:24,Athens:28,Riga:6,Vilnius:5,Tallinn:2,Geneva:25,Stuttgart:18,Rotterdam:16,Krakow:14},{City:"Turin",Latitude:45.0703155,Longitude:7.6868552,Moscow:36,London:12,Berlin:10,Madrid:15,Rome:4,Paris:10,Bucharest:23,Vienna:10,Hamburg:11,Warsaw:14,Budapest:12,Barcelona:"17",Munich:7,Milan:4,Prague:9,Sofia:25,Brussels:12,Birmingham:14,Cologne:9,Naples:6,Stockholm:25,Turin:0,Marseille:6,Amsterdam:9,Zagreb:15,Belgrade:13,Helsinki:28,Oslo:24,Copenhagen:18,Dublin:20,Lisbon:11,Edinburgh:18,Athens:48,Riga:22,Vilnius:20,Tallinn:23,Geneva:10,Stuttgart:9,Rotterdam:10,Krakow:12},{City:"Marseille",Latitude:43.3025742,Longitude:5.3690743,Moscow:35,London:8,Berlin:12,Madrid:3,Rome:8,Paris:3,Bucharest:32,Vienna:15,Hamburg:15,Warsaw:18,Budapest:17,Barcelona:"3",Munich:13,Milan:5,Prague:14,Sofia:32,Brussels:5,Birmingham:7,Cologne:10,Naples:8,Stockholm:30,Turin:6,Marseille:0,Amsterdam:12,Zagreb:18,Belgrade:20,Helsinki:32,Oslo:28,Copenhagen:23,Dublin:15,Lisbon:8,Edinburgh:14,Athens:48,Riga:28,Vilnius:25,Tallinn:28,Geneva:13,Stuttgart:15,Rotterdam:10,Krakow:21},{City:"Amsterdam",Latitude:52.3675734,Longitude:4.9041389,Moscow:28,London:4,Berlin:6,Madrid:19,Rome:14,Paris:3,Bucharest:22,Vienna:7,Hamburg:6,Warsaw:10,Budapest:10,Barcelona:"19",Munich:7,Milan:9,Prague:5,Sofia:27,Brussels:2.5,Birmingham:4,Cologne:3,Naples:15,Stockholm:17,Turin:9,Marseille:12,Amsterdam:0,Zagreb:12,Belgrade:14,Helsinki:22,Oslo:20,Copenhagen:7,Dublin:4,Lisbon:18,Edinburgh:7,Athens:37,Riga:15,Vilnius:13,Tallinn:14,Geneva:7,Stuttgart:8,Rotterdam:2,Krakow:12},{City:"Zagreb",Latitude:45.8150108,Longitude:15.981919,Moscow:26,London:18,Berlin:12,Madrid:24,Rome:15,Paris:16,Bucharest:15,Vienna:2,Hamburg:11,Warsaw:10,Budapest:5,Barcelona:"22",Munich:6,Milan:12,Prague:6,Sofia:19,Brussels:16,Birmingham:19,Cologne:12,Naples:16,Stockholm:25,Turin:15,Marseille:18,Amsterdam:12,Zagreb:0,Belgrade:5,Helsinki:23,Oslo:20,Copenhagen:12,Dublin:22,Lisbon:16,Edinburgh:18,Athens:30,Riga:12,Vilnius:10,Tallinn:12,Geneva:15,Stuttgart:7,Rotterdam:10,Krakow:6},{City:"Belgrade",Latitude:44.8125449,Longitude:20.46123,Moscow:28,London:20,Berlin:15,Madrid:25,Rome:15,Paris:18,Bucharest:8,Vienna:6,Hamburg:15,Warsaw:12,Budapest:4,Barcelona:"25",Munich:11,Milan:12,Prague:10,Sofia:6,Brussels:18,Birmingham:21,Cologne:14,Naples:17,Stockholm:30,Turin:13,Marseille:20,Amsterdam:14,Zagreb:5,Belgrade:0,Helsinki:25,Oslo:22,Copenhagen:15,Dublin:24,Lisbon:18,Edinburgh:20,Athens:30,Riga:14,Vilnius:12,Tallinn:15,Geneva:17,Stuttgart:12,Rotterdam:12,Krakow:8},{City:"Helsinki",Latitude:60.1698557,Longitude:24.938379,Moscow:10,London:24,Berlin:21,Madrid:36,Rome:32,Paris:22,Bucharest:28,Vienna:20,Hamburg:21,Warsaw:19,Budapest:22,Barcelona:"33",Munich:20,Milan:25,Prague:20,Sofia:28,Brussels:23,Birmingham:25,Cologne:21,Naples:32,Stockholm:10,Turin:28,Marseille:32,Amsterdam:22,Zagreb:23,Belgrade:25,Helsinki:0,Oslo:5,Copenhagen:10,Dublin:28,Lisbon:36,Edinburgh:25,Athens:28,Riga:8,Vilnius:8,Tallinn:5,Geneva:25,Stuttgart:20,Rotterdam:22,Krakow:20},{City:"Oslo",Latitude:59.9138688,Longitude:10.7522454,Moscow:16,London:20,Berlin:12,Madrid:32,Rome:30,Paris:20,Bucharest:28,Vienna:15,Hamburg:14,Warsaw:15,Budapest:20,Barcelona:"30",Munich:14,Milan:20,Prague:13,Sofia:30,Brussels:22,Birmingham:24,Cologne:15,Naples:30,Stockholm:7,Turin:24,Marseille:28,Amsterdam:20,Zagreb:20,Belgrade:22,Helsinki:5,Oslo:0,Copenhagen:5,Dublin:22,Lisbon:32,Edinburgh:24,Athens:28,Riga:7,Vilnius:7,Tallinn:5,Geneva:20,Stuttgart:14,Rotterdam:15,Krakow:15},{City:"Copenhagen",Latitude:55.6760968,Longitude:12.5683371,Moscow:18,London:12,Berlin:7,Madrid:26,Rome:25,Paris:14,Bucharest:23,Vienna:10,Hamburg:8,Warsaw:9,Budapest:11,Barcelona:"26",Munich:9,Milan:15,Prague:8,Sofia:23,Brussels:14,Birmingham:15,Cologne:7,Naples:25,Stockholm:5,Turin:18,Marseille:23,Amsterdam:7,Zagreb:12,Belgrade:15,Helsinki:10,Oslo:5,Copenhagen:0,Dublin:17,Lisbon:26,Edinburgh:19,Athens:27,Riga:7,Vilnius:5,Tallinn:3,Geneva:18,Stuttgart:11,Rotterdam:6,Krakow:9},{City:"Dublin",Latitude:53.3498053,Longitude:-6.2603097,Moscow:50,London:3,Berlin:12,Madrid:25,Rome:30,Paris:8,Bucharest:34,Vienna:18,Hamburg:7,Warsaw:20,Budapest:22,Barcelona:"25",Munich:17,Milan:20,Prague:16,Sofia:34,Brussels:9,Birmingham:3,Cologne:7,Naples:30,Stockholm:25,Turin:20,Marseille:15,Amsterdam:4,Zagreb:22,Belgrade:24,Helsinki:28,Oslo:22,Copenhagen:17,Dublin:0,Lisbon:25,Edinburgh:5,Athens:40,Riga:26,Vilnius:24,Tallinn:24,Geneva:15,Stuttgart:18,Rotterdam:7,Krakow:24},{City:"Lisbon",Latitude:38.7222524,Longitude:-9.1393366,Moscow:40,London:15,Berlin:17,Madrid:5,Rome:13,Paris:7,Bucharest:35,Vienna:16,Hamburg:18,Warsaw:25,Budapest:18,Barcelona:"8",Munich:16,Milan:10,Prague:18,Sofia:35,Brussels:7,Birmingham:15,Cologne:15,Naples:14,Stockholm:32,Turin:11,Marseille:8,Amsterdam:18,Zagreb:16,Belgrade:18,Helsinki:36,Oslo:32,Copenhagen:26,Dublin:25,Lisbon:0,Edinburgh:18,Athens:48,Riga:25,Vilnius:22,Tallinn:25,Geneva:16,Stuttgart:16,Rotterdam:19,Krakow:25},{City:"Edinburgh",Latitude:55.953252,Longitude:-3.188267,Moscow:50,London:4,Berlin:14,Madrid:20,Rome:22,Paris:5,Bucharest:30,Vienna:12,Hamburg:13,Warsaw:18,Budapest:16,Barcelona:"20",Munich:14,Milan:18,Prague:12,Sofia:30,Brussels:5,Birmingham:6,Cologne:10,Naples:22,Stockholm:24,Turin:18,Marseille:14,Amsterdam:7,Zagreb:18,Belgrade:20,Helsinki:25,Oslo:24,Copenhagen:19,Dublin:5,Lisbon:18,Edinburgh:0,Athens:40,Riga:24,Vilnius:22,Tallinn:22,Geneva:14,Stuttgart:14,Rotterdam:5,Krakow:20},{City:"Athens",Latitude:37.9838096,Longitude:23.7275388,Moscow:40,London:40,Berlin:30,Madrid:48,Rome:48,Paris:38,Bucharest:20,Vienna:30,Hamburg:31,Warsaw:25,Budapest:27,Barcelona:"47",Munich:27,Milan:47,Prague:27,Sofia:20,Brussels:37,Birmingham:38,Cologne:31,Naples:48,Stockholm:28,Turin:48,Marseille:48,Amsterdam:37,Zagreb:30,Belgrade:30,Helsinki:28,Oslo:28,Copenhagen:27,Dublin:40,Lisbon:48,Edinburgh:40,Athens:0,Riga:20,Vilnius:18,Tallinn:20,Geneva:37,Stuttgart:28,Rotterdam:30,Krakow:27},{City:"Riga",Latitude:56.9676941,Longitude:24.1056221,Moscow:14,London:24,Berlin:9,Madrid:28,Rome:30,Paris:20,Bucharest:20,Vienna:12,Hamburg:10,Warsaw:8,Budapest:10,Barcelona:"28",Munich:9,Milan:24,Prague:10,Sofia:22,Brussels:20,Birmingham:24,Cologne:10,Naples:30,Stockholm:6,Turin:22,Marseille:28,Amsterdam:15,Zagreb:12,Belgrade:14,Helsinki:8,Oslo:7,Copenhagen:7,Dublin:26,Lisbon:25,Edinburgh:24,Athens:20,Riga:0,Vilnius:2,Tallinn:3,Geneva:20,Stuttgart:14,Rotterdam:11,Krakow:10},{City:"Vilnius",Latitude:54.6871555,Longitude:25.2796514,Moscow:14,London:22,Berlin:8,Madrid:25,Rome:27,Paris:18,Bucharest:18,Vienna:10,Hamburg:8,Warsaw:5,Budapest:10,Barcelona:"25",Munich:8,Milan:20,Prague:8,Sofia:20,Brussels:19,Birmingham:20,Cologne:10,Naples:25,Stockholm:9,Turin:22,Marseille:28,Amsterdam:14,Zagreb:11,Belgrade:13,Helsinki:7,Oslo:5,Copenhagen:5,Dublin:20,Lisbon:20,Edinburgh:22,Athens:18,Riga:5,Vilnius:0,Tallinn:2,Geneva:20,Stuttgart:15,Rotterdam:10,Krakow:6},{City:"Tallinn",Latitude:59.4369608,Longitude:24.7535746,Moscow:10,London:23,Berlin:9,Madrid:26,Rome:28,Paris:20,Bucharest:18,Vienna:12,Hamburg:12,Warsaw:6,Budapest:10,Barcelona:"28",Munich:9,Milan:20,Prague:9,Sofia:25,Brussels:19,Birmingham:21,Cologne:10,Naples:25,Stockholm:9,Turin:25,Marseille:30,Amsterdam:17,Zagreb:10,Belgrade:14,Helsinki:10,Oslo:7,Copenhagen:5,Dublin:22,Lisbon:25,Edinburgh:24,Athens:18,Riga:8,Vilnius:2,Tallinn:2,Geneva:0,Stuttgart:15,Rotterdam:15,Krakow:10}],c6=()=>{const e=Fl(s6),t=Fl(WI),r=Fl(wx),a=Fl(l6),l=L.useRef();L.useEffect(()=>{if(e&&e[0]&&e[1]&&(l==null?void 0:l.current)!=null){const f=Math.min(e[0].latitude,e[1].latitude),u=Math.max(e[0].latitude,e[1].latitude),w=Math.min(e[0].longitude,e[1].longitude),C=Math.max(e[0].longitude,e[1].longitude);w&&f&&C&&u&&(l==null||l.current.fitBounds([[w,f],[C,u]],{padding:{top:200,bottom:100,left:500,right:100},duration:1e3}))}},[e]),L.useEffect(()=>{if(a&&(l==null?void 0:l.current)!=null){const f=a.reduce((w,C)=>({minLatitude:Math.min(w.minLatitude,C.Latitude),maxLatitude:Math.max(w.maxLatitude,C.Latitude),minLongitude:Math.min(w.minLongitude,C.Longitude),maxLongitude:Math.max(w.maxLongitude,C.Longitude)}),{minLatitude:90,maxLatitude:-90,minLongitude:90,maxLongitude:-90}),u=[[f.minLongitude,f.minLatitude],[f.maxLongitude,f.maxLatitude]];l==null||l.current.fitBounds(u,{padding:{top:200,bottom:100,left:500,right:100},duration:1e3})}},[a]);const h=L.useMemo(()=>t&&r==="averageTo"&&(a==null?void 0:a.map(u=>{const w=jr==null?void 0:jr.find(I=>I.City===t),C={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[w.Longitude,w.Latitude],[u.Longitude,u.Latitude]]}};return ve.jsxs(rt.Fragment,{children:[ve.jsx(i0,{latitude:u.Latitude,longitude:u.Longitude,color:"#87ced6"}),ve.jsx(uS,{id:`route-${u.City}`,type:"geojson",data:C,children:ve.jsx(cS,{id:`route-line-${u.City}`,type:"line",source:`route-${u.City}`,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"gray","line-width":4}})})]},u.City)})),[a,r,t]);return ve.jsxs(Oz,{ref:l,mapLib:Fz,initialViewState:{latitude:55,longitude:20,zoom:3.5},style:{width:"100vw",height:"100vh"},mapStyle:"https://api.maptiler.com/maps/1eee1315-3e82-45cd-be7b-b93892ad86a4/style.json?key=vqiY7LIwUds5wXs9vJpE",children:[(e==null?void 0:e.length)===2&&r=="averageBetween"&&ve.jsxs(ve.Fragment,{children:[ve.jsx(i0,{latitude:e[0].latitude,longitude:e[0].longitude}),ve.jsx(i0,{latitude:e[1].latitude,longitude:e[1].longitude}),ve.jsx(uS,{id:"route",type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e.map(f=>[f.longitude,f.latitude])}},children:ve.jsx(cS,{id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":6}})})]}),h]})};var GI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var h="",f=0;f<arguments.length;f++){var u=arguments[f];u&&(h=l(h,a(u)))}return h}function a(h){if(typeof h=="string"||typeof h=="number")return h;if(typeof h!="object")return"";if(Array.isArray(h))return r.apply(null,h);if(h.toString!==Object.prototype.toString&&!h.toString.toString().includes("[native code]"))return h.toString();var f="";for(var u in h)t.call(h,u)&&h[u]&&(f=l(f,u));return f}function l(h,f){return f?h?h+" "+f:h+f:h}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(GI);var u6=GI.exports;const $t=uf(u6);function pr(){return pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pr.apply(null,arguments)}var qI={exports:{}},gr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sx=Symbol.for("react.element"),Cx=Symbol.for("react.portal"),qg=Symbol.for("react.fragment"),Zg=Symbol.for("react.strict_mode"),Kg=Symbol.for("react.profiler"),Xg=Symbol.for("react.provider"),Yg=Symbol.for("react.context"),d6=Symbol.for("react.server_context"),Jg=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),ey=Symbol.for("react.suspense_list"),ty=Symbol.for("react.memo"),ry=Symbol.for("react.lazy"),h6=Symbol.for("react.offscreen"),ZI;ZI=Symbol.for("react.module.reference");function Io(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Sx:switch(e=e.type,e){case qg:case Kg:case Zg:case Qg:case ey:return e;default:switch(e=e&&e.$$typeof,e){case d6:case Yg:case Jg:case ry:case ty:case Xg:return e;default:return t}}case Cx:return t}}}gr.ContextConsumer=Yg;gr.ContextProvider=Xg;gr.Element=Sx;gr.ForwardRef=Jg;gr.Fragment=qg;gr.Lazy=ry;gr.Memo=ty;gr.Portal=Cx;gr.Profiler=Kg;gr.StrictMode=Zg;gr.Suspense=Qg;gr.SuspenseList=ey;gr.isAsyncMode=function(){return!1};gr.isConcurrentMode=function(){return!1};gr.isContextConsumer=function(e){return Io(e)===Yg};gr.isContextProvider=function(e){return Io(e)===Xg};gr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Sx};gr.isForwardRef=function(e){return Io(e)===Jg};gr.isFragment=function(e){return Io(e)===qg};gr.isLazy=function(e){return Io(e)===ry};gr.isMemo=function(e){return Io(e)===ty};gr.isPortal=function(e){return Io(e)===Cx};gr.isProfiler=function(e){return Io(e)===Kg};gr.isStrictMode=function(e){return Io(e)===Zg};gr.isSuspense=function(e){return Io(e)===Qg};gr.isSuspenseList=function(e){return Io(e)===ey};gr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qg||e===Kg||e===Zg||e===Qg||e===ey||e===h6||typeof e=="object"&&e!==null&&(e.$$typeof===ry||e.$$typeof===ty||e.$$typeof===Xg||e.$$typeof===Yg||e.$$typeof===Jg||e.$$typeof===ZI||e.getModuleId!==void 0)};gr.typeOf=Io;qI.exports=gr;var Em=qI.exports;function R_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return rt.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?r=r.concat(R_(a)):Em.isFragment(a)&&a.props?r=r.concat(R_(a.props.children,t)):r.push(a))}),r}var z_={},f6=function(t){};function p6(e,t){}function m6(e,t){}function g6(){z_={}}function KI(e,t,r){!t&&!z_[r]&&(e(!1,r),z_[r]=!0)}function Bi(e,t){KI(p6,e,t)}function y6(e,t){KI(m6,e,t)}Bi.preMessage=f6;Bi.resetWarned=g6;Bi.noteOnce=y6;function Qt(e){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(e)}function v6(e,t){if(Qt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(Qt(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XI(e){var t=v6(e,"string");return Qt(t)=="symbol"?t:t+""}function Me(e,t,r){return(t=XI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(a){Me(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ES(e){return e instanceof HTMLElement||e instanceof SVGElement}function _6(e){return e&&Qt(e)==="object"&&ES(e.nativeElement)?e.nativeElement:ES(e)?e:null}function x6(e){var t=_6(e);if(t)return t;if(e instanceof rt.Component){var r;return(r=x_.findDOMNode)===null||r===void 0?void 0:r.call(x_,e)}return null}function Ex(e,t,r){var a=L.useRef({});return(!("value"in a.current)||r(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}var YI=function(t,r){typeof t=="function"?t(r):Qt(t)==="object"&&t&&"current"in t&&(t.current=r)},$u=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=r.filter(Boolean);return l.length<=1?l[0]:function(h){r.forEach(function(f){YI(f,h)})}},JI=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Ex(function(){return $u.apply(void 0,r)},r,function(l,h){return l.length!==h.length||l.every(function(f,u){return f!==h[u]})})},Tx=function(t){var r,a,l=Em.isMemo(t)?t.type.type:t.type;return!(typeof l=="function"&&!((r=l.prototype)!==null&&r!==void 0&&r.render)&&l.$$typeof!==Em.ForwardRef||typeof t=="function"&&!((a=t.prototype)!==null&&a!==void 0&&a.render)&&t.$$typeof!==Em.ForwardRef)};function ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TS(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,XI(a.key),a)}}function si(e,t,r){return t&&TS(e.prototype,t),r&&TS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ef(e,t){return ef=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ef(e,t)}function Nu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ef(e,t)}function rc(e){return rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rc(e)}function ny(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ny=function(){return!!e})()}function ir(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QI(e,t){if(t&&(Qt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ir(e)}function iy(e){var t=ny();return function(){var r,a=rc(e);if(t){var l=rc(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return QI(this,r)}}function b6(e,t){var r=Xe({},e);return Array.isArray(t)&&t.forEach(function(a){delete r[a]}),r}function L_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function w6(e){if(Array.isArray(e))return L_(e)}function eP(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ix(e,t){if(e){if(typeof e=="string")return L_(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L_(e,t):void 0}}function S6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rt(e){return w6(e)||eP(e)||Ix(e)||S6()}var tP=function(t){return+setTimeout(t,16)},rP=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(tP=function(t){return window.requestAnimationFrame(t)},rP=function(t){return window.cancelAnimationFrame(t)});var IS=0,Px=new Map;function nP(e){Px.delete(e)}var Qo=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;IS+=1;var a=IS;function l(h){if(h===0)nP(a),t();else{var f=tP(function(){l(h-1)});Px.set(a,f)}}return l(r),a};Qo.cancel=function(e){var t=Px.get(e);return nP(e),rP(t)};function iP(e){if(Array.isArray(e))return e}function C6(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,l,h,f,u=[],w=!0,C=!1;try{if(h=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;w=!1}else for(;!(w=(a=h.call(r)).done)&&(u.push(a.value),u.length!==t);w=!0);}catch(I){C=!0,l=I}finally{try{if(!w&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(C)throw l}}return u}}function oP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tt(e,t){return iP(e)||C6(e,t)||Ix(e,t)||oP()}function tf(e){for(var t=0,r,a=0,l=e.length;l>=4;++a,l-=4)r=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function $i(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function O_(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var PS="data-rc-order",MS="data-rc-priority",E6="rc-util-key",D_=new Map;function aP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):E6}function oy(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function T6(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function Mx(e){return Array.from((D_.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function sP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!$i())return null;var r=t.csp,a=t.prepend,l=t.priority,h=l===void 0?0:l,f=T6(a),u=f==="prependQueue",w=document.createElement("style");w.setAttribute(PS,f),u&&h&&w.setAttribute(MS,"".concat(h)),r!=null&&r.nonce&&(w.nonce=r==null?void 0:r.nonce),w.innerHTML=e;var C=oy(t),I=C.firstChild;if(a){if(u){var k=(t.styles||Mx(C)).filter(function(A){if(!["prepend","prependQueue"].includes(A.getAttribute(PS)))return!1;var q=Number(A.getAttribute(MS)||0);return h>=q});if(k.length)return C.insertBefore(w,k[k.length-1].nextSibling),w}C.insertBefore(w,I)}else C.appendChild(w);return w}function lP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=oy(t);return(t.styles||Mx(r)).find(function(a){return a.getAttribute(aP(t))===e})}function rf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=lP(e,t);if(r){var a=oy(t);a.removeChild(r)}}function I6(e,t){var r=D_.get(e);if(!r||!O_(document,r)){var a=sP("",t),l=a.parentNode;D_.set(e,l),e.removeChild(a)}}function Ga(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=oy(r),l=Mx(a),h=Xe(Xe({},r),{},{styles:l});I6(a,h);var f=lP(t,h);if(f){var u,w;if((u=h.csp)!==null&&u!==void 0&&u.nonce&&f.nonce!==((w=h.csp)===null||w===void 0?void 0:w.nonce)){var C;f.nonce=(C=h.csp)===null||C===void 0?void 0:C.nonce}return f.innerHTML!==e&&(f.innerHTML=e),f}var I=sP(e,h);return I.setAttribute(aP(h),t),I}function P6(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ea(e,t){if(e==null)return{};var r,a,l=P6(e,t);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(a=0;a<h.length;a++)r=h[a],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}function F_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function l(h,f){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=a.has(h);if(Bi(!w,"Warning: There may be circular references"),w)return!1;if(h===f)return!0;if(r&&u>1)return!1;a.add(h);var C=u+1;if(Array.isArray(h)){if(!Array.isArray(f)||h.length!==f.length)return!1;for(var I=0;I<h.length;I++)if(!l(h[I],f[I],C))return!1;return!0}if(h&&f&&Qt(h)==="object"&&Qt(f)==="object"){var k=Object.keys(h);return k.length!==Object.keys(f).length?!1:k.every(function(A){return l(h[A],f[A],C)})}return!1}return l(e,t)}var M6="%";function B_(e){return e.join(M6)}var k6=function(){function e(t){ai(this,e),Me(this,"instanceId",void 0),Me(this,"cache",new Map),this.instanceId=t}return si(e,[{key:"get",value:function(r){return this.opGet(B_(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,a){return this.opUpdate(B_(r),a)}},{key:"opUpdate",value:function(r,a){var l=this.cache.get(r),h=a(l);h===null?this.cache.delete(r):this.cache.set(r,h)}}]),e}(),Mu="data-token-hash",Xo="data-css-hash",zs="__cssinjs_instance__";function A6(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Xo,"]"))||[],r=document.head.firstChild;Array.from(t).forEach(function(l){l[zs]=l[zs]||e,l[zs]===e&&document.head.insertBefore(l,r)});var a={};Array.from(document.querySelectorAll("style[".concat(Xo,"]"))).forEach(function(l){var h=l.getAttribute(Xo);if(a[h]){if(l[zs]===e){var f;(f=l.parentNode)===null||f===void 0||f.removeChild(l)}}else a[h]=!0})}return new k6(e)}var ay=L.createContext({hashPriority:"low",cache:A6(),defaultCache:!0});function R6(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var kx=function(){function e(){ai(this,e),Me(this,"cache",void 0),Me(this,"keys",void 0),Me(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return si(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var a,l,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f={map:this.cache};return r.forEach(function(u){if(!f)f=void 0;else{var w;f=(w=f)===null||w===void 0||(w=w.map)===null||w===void 0?void 0:w.get(u)}}),(a=f)!==null&&a!==void 0&&a.value&&h&&(f.value[1]=this.cacheCallTimes++),(l=f)===null||l===void 0?void 0:l.value}},{key:"get",value:function(r){var a;return(a=this.internalGet(r,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,a){var l=this;if(!this.has(r)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var h=this.keys.reduce(function(C,I){var k=Tt(C,2),A=k[1];return l.internalGet(I)[1]<A?[I,l.internalGet(I)[1]]:C},[this.keys[0],this.cacheCallTimes]),f=Tt(h,1),u=f[0];this.delete(u)}this.keys.push(r)}var w=this.cache;r.forEach(function(C,I){if(I===r.length-1)w.set(C,{value:[a,l.cacheCallTimes++]});else{var k=w.get(C);k?k.map||(k.map=new Map):w.set(C,{map:new Map}),w=w.get(C).map}})}},{key:"deleteByPath",value:function(r,a){var l=r.get(a[0]);if(a.length===1){var h;return l.map?r.set(a[0],{map:l.map}):r.delete(a[0]),(h=l.value)===null||h===void 0?void 0:h[0]}var f=this.deleteByPath(l.map,a.slice(1));return(!l.map||l.map.size===0)&&!l.value&&r.delete(a[0]),f}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(a){return!R6(a,r)}),this.deleteByPath(this.cache,r)}}]),e}();Me(kx,"MAX_CACHE_SIZE",20);Me(kx,"MAX_CACHE_OFFSET",5);var kS=0,cP=function(){function e(t){ai(this,e),Me(this,"derivatives",void 0),Me(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=kS,t.length===0&&(t.length>0,void 0),kS+=1}return si(e,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(a,l){return l(r,a)},void 0)}}]),e}(),l0=new kx;function $_(e){var t=Array.isArray(e)?e:[e];return l0.has(t)||l0.set(t,new cP(t)),l0.get(t)}var z6=new WeakMap,c0={};function L6(e,t){for(var r=z6,a=0;a<t.length;a+=1){var l=t[a];r.has(l)||r.set(l,new WeakMap),r=r.get(l)}return r.has(c0)||r.set(c0,e()),r.get(c0)}var AS=new WeakMap;function Mh(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=AS.get(e)||"";return r||(Object.keys(e).forEach(function(a){var l=e[a];r+=a,l instanceof cP?r+=l.id:l&&Qt(l)==="object"?r+=Mh(l,t):r+=l}),t&&(r=tf(r)),AS.set(e,r)),r}function RS(e,t){return tf("".concat(t,"_").concat(Mh(e,!0)))}var N_=$i();function _t(e){return typeof e=="number"?"".concat(e,"px"):e}function mg(e,t,r){var a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(h)return e;var f=Xe(Xe({},l),{},(a={},Me(a,Mu,t),Me(a,Xo,r),a)),u=Object.keys(f).map(function(w){var C=f[w];return C?"".concat(w,'="').concat(C,'"'):null}).filter(function(w){return w}).join(" ");return"<style ".concat(u,">").concat(e,"</style>")}var uP=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},O6=function(t,r,a){return Object.keys(t).length?".".concat(r).concat(a!=null&&a.scope?".".concat(a.scope):"","{").concat(Object.entries(t).map(function(l){var h=Tt(l,2),f=h[0],u=h[1];return"".concat(f,":").concat(u,";")}).join(""),"}"):""},dP=function(t,r,a){var l={},h={};return Object.entries(t).forEach(function(f){var u,w,C=Tt(f,2),I=C[0],k=C[1];if(a!=null&&(u=a.preserve)!==null&&u!==void 0&&u[I])h[I]=k;else if((typeof k=="string"||typeof k=="number")&&!(a!=null&&(w=a.ignore)!==null&&w!==void 0&&w[I])){var A,q=uP(I,a==null?void 0:a.prefix);l[q]=typeof k=="number"&&!(a!=null&&(A=a.unitless)!==null&&A!==void 0&&A[I])?"".concat(k,"px"):String(k),h[I]="var(".concat(q,")")}}),[h,O6(l,r,{scope:a==null?void 0:a.scope})]},zS=$i()?L.useLayoutEffect:L.useEffect,ku=function(t,r){var a=L.useRef(!0);zS(function(){return t(a.current)},r),zS(function(){return a.current=!1,function(){a.current=!0}},[])},kh=function(t,r){ku(function(a){if(!a)return t()},r)},D6=Xe({},Kl),LS=D6.useInsertionEffect,F6=function(t,r,a){L.useMemo(t,a),ku(function(){return r(!0)},a)},B6=LS?function(e,t,r){return LS(function(){return e(),t()},r)}:F6,$6=Xe({},Kl),N6=$6.useInsertionEffect,j6=function(t){var r=[],a=!1;function l(h){a||r.push(h)}return L.useEffect(function(){return a=!1,function(){a=!0,r.length&&r.forEach(function(h){return h()})}},t),l},V6=function(){return function(t){t()}},U6=typeof N6<"u"?j6:V6;function Ax(e,t,r,a,l){var h=L.useContext(ay),f=h.cache,u=[e].concat(Rt(t)),w=B_(u),C=U6([w]),I=function(G){f.opUpdate(w,function(Z){var K=Z||[void 0,void 0],j=Tt(K,2),O=j[0],$=O===void 0?0:O,J=j[1],ne=J,oe=ne||r(),le=[$,oe];return G?G(le):le})};L.useMemo(function(){I()},[w]);var k=f.opGet(w),A=k[1];return B6(function(){l==null||l(A)},function(q){return I(function(G){var Z=Tt(G,2),K=Z[0],j=Z[1];return q&&K===0&&(l==null||l(A)),[K+1,j]}),function(){f.opUpdate(w,function(G){var Z=G||[],K=Tt(Z,2),j=K[0],O=j===void 0?0:j,$=K[1],J=O-1;return J===0?(C(function(){(q||!f.opGet(w))&&(a==null||a($,!1))}),null):[O-1,$]})}},[w]),A}var H6={},W6="css",zl=new Map;function G6(e){zl.set(e,(zl.get(e)||0)+1)}function q6(e,t){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(Mu,'="').concat(e,'"]'));r.forEach(function(a){if(a[zs]===t){var l;(l=a.parentNode)===null||l===void 0||l.removeChild(a)}})}}var Z6=0;function K6(e,t){zl.set(e,(zl.get(e)||0)-1);var r=Array.from(zl.keys()),a=r.filter(function(l){var h=zl.get(l)||0;return h<=0});r.length-a.length>Z6&&a.forEach(function(l){q6(l,t),zl.delete(l)})}var X6=function(t,r,a,l){var h=a.getDerivativeToken(t),f=Xe(Xe({},h),r);return l&&(f=l(f)),f},hP="token";function Y6(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=L.useContext(ay),l=a.cache.instanceId,h=a.container,f=r.salt,u=f===void 0?"":f,w=r.override,C=w===void 0?H6:w,I=r.formatToken,k=r.getComputedToken,A=r.cssVar,q=L6(function(){return Object.assign.apply(Object,[{}].concat(Rt(t)))},t),G=Mh(q),Z=Mh(C),K=A?Mh(A):"",j=Ax(hP,[u,e.id,G,Z,K],function(){var O,$=k?k(q,C,e):X6(q,C,e,I),J=Xe({},$),ne="";if(A){var oe=dP($,A.key,{prefix:A.prefix,ignore:A.ignore,unitless:A.unitless,preserve:A.preserve}),le=Tt(oe,2);$=le[0],ne=le[1]}var be=RS($,u);$._tokenKey=be,J._tokenKey=RS(J,u);var Ee=(O=A==null?void 0:A.key)!==null&&O!==void 0?O:be;$._themeKey=Ee,G6(Ee);var ke="".concat(W6,"-").concat(tf(be));return $._hashId=ke,[$,ke,J,ne,(A==null?void 0:A.key)||""]},function(O){K6(O[0]._themeKey,l)},function(O){var $=Tt(O,4),J=$[0],ne=$[3];if(A&&ne){var oe=Ga(ne,tf("css-variables-".concat(J._themeKey)),{mark:Xo,prepend:"queue",attachTo:h,priority:-999});oe[zs]=l,oe.setAttribute(Mu,J._themeKey)}});return j}var J6=function(t,r,a){var l=Tt(t,5),h=l[2],f=l[3],u=l[4],w=a||{},C=w.plain;if(!f)return null;var I=h._tokenKey,k=-999,A={"data-rc-order":"prependQueue","data-rc-priority":"".concat(k)},q=mg(f,u,I,A,C);return[k,I,q]},Q6={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fP="comm",pP="rule",mP="decl",eO="@import",tO="@keyframes",rO="@layer",gP=Math.abs,Rx=String.fromCharCode;function yP(e){return e.trim()}function Tm(e,t,r){return e.replace(t,r)}function nO(e,t,r){return e.indexOf(t,r)}function nf(e,t){return e.charCodeAt(t)|0}function of(e,t,r){return e.slice(t,r)}function Va(e){return e.length}function iO(e){return e.length}function rm(e,t){return t.push(e),e}var sy=1,Au=1,vP=0,To=0,bn=0,ju="";function zx(e,t,r,a,l,h,f,u){return{value:e,root:t,parent:r,type:a,props:l,children:h,line:sy,column:Au,length:f,return:"",siblings:u}}function oO(){return bn}function aO(){return bn=To>0?nf(ju,--To):0,Au--,bn===10&&(Au=1,sy--),bn}function Yo(){return bn=To<vP?nf(ju,To++):0,Au++,bn===10&&(Au=1,sy++),bn}function Wl(){return nf(ju,To)}function Im(){return To}function ly(e,t){return of(ju,e,t)}function j_(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sO(e){return sy=Au=1,vP=Va(ju=e),To=0,[]}function lO(e){return ju="",e}function u0(e){return yP(ly(To-1,V_(e===91?e+2:e===40?e+1:e)))}function cO(e){for(;(bn=Wl())&&bn<33;)Yo();return j_(e)>2||j_(bn)>3?"":" "}function uO(e,t){for(;--t&&Yo()&&!(bn<48||bn>102||bn>57&&bn<65||bn>70&&bn<97););return ly(e,Im()+(t<6&&Wl()==32&&Yo()==32))}function V_(e){for(;Yo();)switch(bn){case e:return To;case 34:case 39:e!==34&&e!==39&&V_(bn);break;case 40:e===41&&V_(e);break;case 92:Yo();break}return To}function dO(e,t){for(;Yo()&&e+bn!==57;)if(e+bn===84&&Wl()===47)break;return"/*"+ly(t,To-1)+"*"+Rx(e===47?e:Yo())}function hO(e){for(;!j_(Wl());)Yo();return ly(e,To)}function fO(e){return lO(Pm("",null,null,null,[""],e=sO(e),0,[0],e))}function Pm(e,t,r,a,l,h,f,u,w){for(var C=0,I=0,k=f,A=0,q=0,G=0,Z=1,K=1,j=1,O=0,$="",J=l,ne=h,oe=a,le=$;K;)switch(G=O,O=Yo()){case 40:if(G!=108&&nf(le,k-1)==58){nO(le+=Tm(u0(O),"&","&\f"),"&\f",gP(C?u[C-1]:0))!=-1&&(j=-1);break}case 34:case 39:case 91:le+=u0(O);break;case 9:case 10:case 13:case 32:le+=cO(G);break;case 92:le+=uO(Im()-1,7);continue;case 47:switch(Wl()){case 42:case 47:rm(pO(dO(Yo(),Im()),t,r,w),w);break;default:le+="/"}break;case 123*Z:u[C++]=Va(le)*j;case 125*Z:case 59:case 0:switch(O){case 0:case 125:K=0;case 59+I:j==-1&&(le=Tm(le,/\f/g,"")),q>0&&Va(le)-k&&rm(q>32?DS(le+";",a,r,k-1,w):DS(Tm(le," ","")+";",a,r,k-2,w),w);break;case 59:le+=";";default:if(rm(oe=OS(le,t,r,C,I,l,u,$,J=[],ne=[],k,h),h),O===123)if(I===0)Pm(le,t,oe,oe,J,h,k,u,ne);else switch(A===99&&nf(le,3)===110?100:A){case 100:case 108:case 109:case 115:Pm(e,oe,oe,a&&rm(OS(e,oe,oe,0,0,l,u,$,l,J=[],k,ne),ne),l,ne,k,u,a?J:ne);break;default:Pm(le,oe,oe,oe,[""],ne,0,u,ne)}}C=I=q=0,Z=j=1,$=le="",k=f;break;case 58:k=1+Va(le),q=G;default:if(Z<1){if(O==123)--Z;else if(O==125&&Z++==0&&aO()==125)continue}switch(le+=Rx(O),O*Z){case 38:j=I>0?1:(le+="\f",-1);break;case 44:u[C++]=(Va(le)-1)*j,j=1;break;case 64:Wl()===45&&(le+=u0(Yo())),A=Wl(),I=k=Va($=le+=hO(Im())),O++;break;case 45:G===45&&Va(le)==2&&(Z=0)}}return h}function OS(e,t,r,a,l,h,f,u,w,C,I,k){for(var A=l-1,q=l===0?h:[""],G=iO(q),Z=0,K=0,j=0;Z<a;++Z)for(var O=0,$=of(e,A+1,A=gP(K=f[Z])),J=e;O<G;++O)(J=yP(K>0?q[O]+" "+$:Tm($,/&\f/g,q[O])))&&(w[j++]=J);return zx(e,t,r,l===0?pP:u,w,C,I,k)}function pO(e,t,r,a){return zx(e,t,r,fP,Rx(oO()),of(e,2,-2),0,a)}function DS(e,t,r,a,l){return zx(e,t,r,mP,of(e,0,a),of(e,a+1,-1),a,l)}function U_(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function mO(e,t,r,a){switch(e.type){case rO:if(e.children.length)break;case eO:case mP:return e.return=e.return||e.value;case fP:return"";case tO:return e.return=e.value+"{"+U_(e.children,a)+"}";case pP:if(!Va(e.value=e.props.join(",")))return""}return Va(r=U_(e.children,a))?e.return=e.value+"{"+r+"}":""}var FS="data-ant-cssinjs-cache-path",_P="_FILE_STYLE__",Gl,xP=!0;function gO(){if(!Gl&&(Gl={},$i())){var e=document.createElement("div");e.className=FS,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(l){var h=l.split(":"),f=Tt(h,2),u=f[0],w=f[1];Gl[u]=w});var r=document.querySelector("style[".concat(FS,"]"));if(r){var a;xP=!1,(a=r.parentNode)===null||a===void 0||a.removeChild(r)}document.body.removeChild(e)}}function yO(e){return gO(),!!Gl[e]}function vO(e){var t=Gl[e],r=null;if(t&&$i())if(xP)r=_P;else{var a=document.querySelector("style[".concat(Xo,'="').concat(Gl[e],'"]'));a?r=a.innerHTML:delete Gl[e]}return[r,t]}var _O="_skip_check_",bP="_multi_value_";function Mm(e){var t=U_(fO(e),mO);return t.replace(/\{%%%\:[^;];}/g,";")}function xO(e){return Qt(e)==="object"&&e&&(_O in e||bP in e)}function bO(e,t,r){if(!t)return e;var a=".".concat(t),l=r==="low"?":where(".concat(a,")"):a,h=e.split(",").map(function(f){var u,w=f.trim().split(/\s+/),C=w[0]||"",I=((u=C.match(/^\w+/))===null||u===void 0?void 0:u[0])||"";return C="".concat(I).concat(l).concat(C.slice(I.length)),[C].concat(Rt(w.slice(1))).join(" ")});return h.join(",")}var wO=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},l=a.root,h=a.injectHash,f=a.parentSelectors,u=r.hashId,w=r.layer;r.path;var C=r.hashPriority,I=r.transformers,k=I===void 0?[]:I;r.linters;var A="",q={};function G(j){var O=j.getName(u);if(!q[O]){var $=e(j.style,r,{root:!1,parentSelectors:f}),J=Tt($,1),ne=J[0];q[O]="@keyframes ".concat(j.getName(u)).concat(ne)}}function Z(j){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return j.forEach(function($){Array.isArray($)?Z($,O):$&&O.push($)}),O}var K=Z(Array.isArray(t)?t:[t]);return K.forEach(function(j){var O=typeof j=="string"&&!l?{}:j;if(typeof O=="string")A+="".concat(O,`
`);else if(O._keyframe)G(O);else{var $=k.reduce(function(J,ne){var oe;return(ne==null||(oe=ne.visit)===null||oe===void 0?void 0:oe.call(ne,J))||J},O);Object.keys($).forEach(function(J){var ne=$[J];if(Qt(ne)==="object"&&ne&&(J!=="animationName"||!ne._keyframe)&&!xO(ne)){var oe=!1,le=J.trim(),be=!1;(l||h)&&u?le.startsWith("@")?oe=!0:le=bO(J,u,C):l&&!u&&(le==="&"||le==="")&&(le="",be=!0);var Ee=e(ne,r,{root:be,injectHash:oe,parentSelectors:[].concat(Rt(f),[le])}),ke=Tt(Ee,2),Ae=ke[0],Ye=ke[1];q=Xe(Xe({},q),Ye),A+="".concat(le).concat(Ae)}else{let Je=function(Oe,Pe){var xe=Oe.replace(/[A-Z]/g,function($e){return"-".concat($e.toLowerCase())}),De=Pe;!Q6[Oe]&&typeof De=="number"&&De!==0&&(De="".concat(De,"px")),Oe==="animationName"&&Pe!==null&&Pe!==void 0&&Pe._keyframe&&(G(Pe),De=Pe.getName(u)),A+="".concat(xe,":").concat(De,";")};var He,Le=(He=ne==null?void 0:ne.value)!==null&&He!==void 0?He:ne;Qt(ne)==="object"&&ne!==null&&ne!==void 0&&ne[bP]&&Array.isArray(Le)?Le.forEach(function(Oe){Je(J,Oe)}):Je(J,Le)}})}}),l?w&&(A="@layer ".concat(w.name," {").concat(A,"}"),w.dependencies&&(q["@layer ".concat(w.name)]=w.dependencies.map(function(j){return"@layer ".concat(j,", ").concat(w.name,";")}).join(`
`))):A="{".concat(A,"}"),[A,q]};function wP(e,t){return tf("".concat(e.join("%")).concat(t))}function SO(){return null}var SP="style";function H_(e,t){var r=e.token,a=e.path,l=e.hashId,h=e.layer,f=e.nonce,u=e.clientOnly,w=e.order,C=w===void 0?0:w,I=L.useContext(ay),k=I.autoClear;I.mock;var A=I.defaultCache,q=I.hashPriority,G=I.container,Z=I.ssrInline,K=I.transformers,j=I.linters,O=I.cache,$=I.layer,J=r._tokenKey,ne=[J];$&&ne.push("layer"),ne.push.apply(ne,Rt(a));var oe=N_,le=Ax(SP,ne,function(){var Ye=ne.join("|");if(yO(Ye)){var He=vO(Ye),Le=Tt(He,2),Je=Le[0],Oe=Le[1];if(Je)return[Je,J,Oe,{},u,C]}var Pe=t(),xe=wO(Pe,{hashId:l,hashPriority:q,layer:$?h:void 0,path:a.join("-"),transformers:K,linters:j}),De=Tt(xe,2),$e=De[0],Ve=De[1],Ze=Mm($e),gt=wP(ne,Ze);return[Ze,J,gt,Ve,u,C]},function(Ye,He){var Le=Tt(Ye,3),Je=Le[2];(He||k)&&N_&&rf(Je,{mark:Xo})},function(Ye){var He=Tt(Ye,4),Le=He[0];He[1];var Je=He[2],Oe=He[3];if(oe&&Le!==_P){var Pe={mark:Xo,prepend:$?!1:"queue",attachTo:G,priority:C},xe=typeof f=="function"?f():f;xe&&(Pe.csp={nonce:xe});var De=[],$e=[];Object.keys(Oe).forEach(function(Ze){Ze.startsWith("@layer")?De.push(Ze):$e.push(Ze)}),De.forEach(function(Ze){Ga(Mm(Oe[Ze]),"_layer-".concat(Ze),Xe(Xe({},Pe),{},{prepend:!0}))});var Ve=Ga(Le,Je,Pe);Ve[zs]=O.instanceId,Ve.setAttribute(Mu,J),$e.forEach(function(Ze){Ga(Mm(Oe[Ze]),"_effect-".concat(Ze),Pe)})}}),be=Tt(le,3),Ee=be[0],ke=be[1],Ae=be[2];return function(Ye){var He;if(!Z||oe||!A)He=L.createElement(SO,null);else{var Le;He=L.createElement("style",pr({},(Le={},Me(Le,Mu,ke),Me(Le,Xo,Ae),Le),{dangerouslySetInnerHTML:{__html:Ee}}))}return L.createElement(L.Fragment,null,He,Ye)}}var CO=function(t,r,a){var l=Tt(t,6),h=l[0],f=l[1],u=l[2],w=l[3],C=l[4],I=l[5],k=a||{},A=k.plain;if(C)return null;var q=h,G={"data-rc-order":"prependQueue","data-rc-priority":"".concat(I)};return q=mg(h,f,u,G,A),w&&Object.keys(w).forEach(function(Z){if(!r[Z]){r[Z]=!0;var K=Mm(w[Z]),j=mg(K,f,"_effect-".concat(Z),G,A);Z.startsWith("@layer")?q=j+q:q+=j}}),[I,u,q]},CP="cssVar",EO=function(t,r){var a=t.key,l=t.prefix,h=t.unitless,f=t.ignore,u=t.token,w=t.scope,C=w===void 0?"":w,I=L.useContext(ay),k=I.cache.instanceId,A=I.container,q=u._tokenKey,G=[].concat(Rt(t.path),[a,C,q]),Z=Ax(CP,G,function(){var K=r(),j=dP(K,a,{prefix:l,unitless:h,ignore:f,scope:C}),O=Tt(j,2),$=O[0],J=O[1],ne=wP(G,J);return[$,J,ne,a]},function(K){var j=Tt(K,3),O=j[2];N_&&rf(O,{mark:Xo})},function(K){var j=Tt(K,3),O=j[1],$=j[2];if(O){var J=Ga(O,$,{mark:Xo,prepend:"queue",attachTo:A,priority:-999});J[zs]=k,J.setAttribute(Mu,a)}});return Z},TO=function(t,r,a){var l=Tt(t,4),h=l[1],f=l[2],u=l[3],w=a||{},C=w.plain;if(!h)return null;var I=-999,k={"data-rc-order":"prependQueue","data-rc-priority":"".concat(I)},A=mg(h,u,f,k,C);return[I,f,A]},hh;hh={},Me(hh,SP,CO),Me(hh,hP,J6),Me(hh,CP,TO);var Ni=function(){function e(t,r){ai(this,e),Me(this,"name",void 0),Me(this,"style",void 0),Me(this,"_keyframe",!0),this.name=t,this.style=r}return si(e,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),e}();function qc(e){return e.notSplit=!0,e}qc(["borderTop","borderBottom"]),qc(["borderTop"]),qc(["borderBottom"]),qc(["borderLeft","borderRight"]),qc(["borderLeft"]),qc(["borderRight"]);var Lx=L.createContext({});function IO(e){return iP(e)||eP(e)||Ix(e)||oP()}function ma(e,t){for(var r=e,a=0;a<t.length;a+=1){if(r==null)return;r=r[t[a]]}return r}function EP(e,t,r,a){if(!t.length)return r;var l=IO(t),h=l[0],f=l.slice(1),u;return!e&&typeof h=="number"?u=[]:Array.isArray(e)?u=Rt(e):u=Xe({},e),a&&r===void 0&&f.length===1?delete u[h][f[0]]:u[h]=EP(u[h],f,r,a),u}function Ho(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&r===void 0&&!ma(e,t.slice(0,-1))?e:EP(e,t,r,a)}function PO(e){return Qt(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function BS(e){return Array.isArray(e)?[]:{}}var MO=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function cu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=BS(t[0]);return t.forEach(function(l){function h(f,u){var w=new Set(u),C=ma(l,f),I=Array.isArray(C);if(I||PO(C)){if(!w.has(C)){w.add(C);var k=ma(a,f);I?a=Ho(a,f,[]):(!k||Qt(k)!=="object")&&(a=Ho(a,f,BS(C))),MO(C).forEach(function(A){h([].concat(Rt(f),[A]),w)})}}else a=Ho(a,f,C)}h([])}),a}const kO=L.createContext({}),AO=L.createContext(void 0);var RO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},zO={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const TP={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},$S={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},zO),timePickerLocale:Object.assign({},TP)},Ki="${label} is not a valid ${type}",nc={locale:"en",Pagination:RO,DatePicker:$S,TimePicker:TP,Calendar:$S,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Ki,method:Ki,array:Ki,object:Ki,number:Ki,date:Ki,boolean:Ki,integer:Ki,float:Ki,regexp:Ki,email:Ki,url:Ki,hex:Ki},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};let km=Object.assign({},nc.Modal),Am=[];const NS=()=>Am.reduce((e,t)=>Object.assign(Object.assign({},e),t),nc.Modal);function LO(e){if(e){const t=Object.assign({},e);return Am.push(t),km=NS(),()=>{Am=Am.filter(r=>r!==t),km=NS()}}km=Object.assign({},nc.Modal)}function IP(){return km}const Ox=L.createContext(void 0),Dx=(e,t)=>{const r=L.useContext(Ox),a=L.useMemo(()=>{var h;const f=t||nc[e],u=(h=r==null?void 0:r[e])!==null&&h!==void 0?h:{};return Object.assign(Object.assign({},typeof f=="function"?f():f),u||{})},[e,t,r]),l=L.useMemo(()=>{const h=r==null?void 0:r.locale;return r!=null&&r.exist&&!h?nc.locale:h},[r]);return[a,l]},OO="internalMark",DO=e=>{const{locale:t={},children:r,_ANT_MARK__:a}=e;L.useEffect(()=>LO(t&&t.Modal),[t]);const l=L.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return L.createElement(Ox.Provider,{value:l},r)};function Zn(e,t){FO(e)&&(e="100%");var r=BO(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function nm(e){return Math.min(1,Math.max(0,e))}function FO(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function BO(e){return typeof e=="string"&&e.indexOf("%")!==-1}function PP(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function im(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Bl(e){return e.length===1?"0"+e:String(e)}function $O(e,t,r){return{r:Zn(e,255)*255,g:Zn(t,255)*255,b:Zn(r,255)*255}}function jS(e,t,r){e=Zn(e,255),t=Zn(t,255),r=Zn(r,255);var a=Math.max(e,t,r),l=Math.min(e,t,r),h=0,f=0,u=(a+l)/2;if(a===l)f=0,h=0;else{var w=a-l;switch(f=u>.5?w/(2-a-l):w/(a+l),a){case e:h=(t-r)/w+(t<r?6:0);break;case t:h=(r-e)/w+2;break;case r:h=(e-t)/w+4;break}h/=6}return{h,s:f,l:u}}function d0(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*(6*r):r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function NO(e,t,r){var a,l,h;if(e=Zn(e,360),t=Zn(t,100),r=Zn(r,100),t===0)l=r,h=r,a=r;else{var f=r<.5?r*(1+t):r+t-r*t,u=2*r-f;a=d0(u,f,e+1/3),l=d0(u,f,e),h=d0(u,f,e-1/3)}return{r:a*255,g:l*255,b:h*255}}function W_(e,t,r){e=Zn(e,255),t=Zn(t,255),r=Zn(r,255);var a=Math.max(e,t,r),l=Math.min(e,t,r),h=0,f=a,u=a-l,w=a===0?0:u/a;if(a===l)h=0;else{switch(a){case e:h=(t-r)/u+(t<r?6:0);break;case t:h=(r-e)/u+2;break;case r:h=(e-t)/u+4;break}h/=6}return{h,s:w,v:f}}function jO(e,t,r){e=Zn(e,360)*6,t=Zn(t,100),r=Zn(r,100);var a=Math.floor(e),l=e-a,h=r*(1-t),f=r*(1-l*t),u=r*(1-(1-l)*t),w=a%6,C=[r,f,h,h,u,r][w],I=[u,r,r,f,h,h][w],k=[h,h,u,r,r,f][w];return{r:C*255,g:I*255,b:k*255}}function G_(e,t,r,a){var l=[Bl(Math.round(e).toString(16)),Bl(Math.round(t).toString(16)),Bl(Math.round(r).toString(16))];return a&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0):l.join("")}function VO(e,t,r,a,l){var h=[Bl(Math.round(e).toString(16)),Bl(Math.round(t).toString(16)),Bl(Math.round(r).toString(16)),Bl(UO(a))];return l&&h[0].startsWith(h[0].charAt(1))&&h[1].startsWith(h[1].charAt(1))&&h[2].startsWith(h[2].charAt(1))&&h[3].startsWith(h[3].charAt(1))?h[0].charAt(0)+h[1].charAt(0)+h[2].charAt(0)+h[3].charAt(0):h.join("")}function UO(e){return Math.round(parseFloat(e)*255).toString(16)}function VS(e){return Yi(e)/255}function Yi(e){return parseInt(e,16)}function HO(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var q_={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Xc(e){var t={r:0,g:0,b:0},r=1,a=null,l=null,h=null,f=!1,u=!1;return typeof e=="string"&&(e=qO(e)),typeof e=="object"&&(Ba(e.r)&&Ba(e.g)&&Ba(e.b)?(t=$O(e.r,e.g,e.b),f=!0,u=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ba(e.h)&&Ba(e.s)&&Ba(e.v)?(a=im(e.s),l=im(e.v),t=jO(e.h,a,l),f=!0,u="hsv"):Ba(e.h)&&Ba(e.s)&&Ba(e.l)&&(a=im(e.s),h=im(e.l),t=NO(e.h,a,h),f=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=PP(r),{ok:f,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var WO="[-\\+]?\\d+%?",GO="[-\\+]?\\d*\\.\\d+%?",Ls="(?:".concat(GO,")|(?:").concat(WO,")"),h0="[\\s|\\(]+(".concat(Ls,")[,|\\s]+(").concat(Ls,")[,|\\s]+(").concat(Ls,")\\s*\\)?"),f0="[\\s|\\(]+(".concat(Ls,")[,|\\s]+(").concat(Ls,")[,|\\s]+(").concat(Ls,")[,|\\s]+(").concat(Ls,")\\s*\\)?"),No={CSS_UNIT:new RegExp(Ls),rgb:new RegExp("rgb"+h0),rgba:new RegExp("rgba"+f0),hsl:new RegExp("hsl"+h0),hsla:new RegExp("hsla"+f0),hsv:new RegExp("hsv"+h0),hsva:new RegExp("hsva"+f0),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qO(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(q_[e])e=q_[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=No.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=No.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=No.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=No.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=No.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=No.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=No.hex8.exec(e),r?{r:Yi(r[1]),g:Yi(r[2]),b:Yi(r[3]),a:VS(r[4]),format:t?"name":"hex8"}:(r=No.hex6.exec(e),r?{r:Yi(r[1]),g:Yi(r[2]),b:Yi(r[3]),format:t?"name":"hex"}:(r=No.hex4.exec(e),r?{r:Yi(r[1]+r[1]),g:Yi(r[2]+r[2]),b:Yi(r[3]+r[3]),a:VS(r[4]+r[4]),format:t?"name":"hex8"}:(r=No.hex3.exec(e),r?{r:Yi(r[1]+r[1]),g:Yi(r[2]+r[2]),b:Yi(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function Ba(e){return!!No.CSS_UNIT.exec(String(e))}var zi=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var a;if(t instanceof e)return t;typeof t=="number"&&(t=HO(t)),this.originalInput=t;var l=Xc(t);this.originalInput=t,this.r=l.r,this.g=l.g,this.b=l.b,this.a=l.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=r.format)!==null&&a!==void 0?a:l.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=l.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,a,l,h=t.r/255,f=t.g/255,u=t.b/255;return h<=.03928?r=h/12.92:r=Math.pow((h+.055)/1.055,2.4),f<=.03928?a=f/12.92:a=Math.pow((f+.055)/1.055,2.4),u<=.03928?l=u/12.92:l=Math.pow((u+.055)/1.055,2.4),.2126*r+.7152*a+.0722*l},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=PP(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=W_(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=W_(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),l=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(a,"%, ").concat(l,"%)"):"hsva(".concat(r,", ").concat(a,"%, ").concat(l,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=jS(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=jS(this.r,this.g,this.b),r=Math.round(t.h*360),a=Math.round(t.s*100),l=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(a,"%, ").concat(l,"%)"):"hsla(".concat(r,", ").concat(a,"%, ").concat(l,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),G_(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),VO(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(a,")"):"rgba(".concat(t,", ").concat(r,", ").concat(a,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(Zn(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(Zn(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+G_(this.r,this.g,this.b,!1),r=0,a=Object.entries(q_);r<a.length;r++){var l=a[r],h=l[0],f=l[1];if(t===f)return h}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var a=!1,l=this.a<1&&this.a>=0,h=!r&&l&&(t.startsWith("hex")||t==="name");return h?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(a=this.toRgbString()),t==="prgb"&&(a=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(a=this.toHexString()),t==="hex3"&&(a=this.toHexString(!0)),t==="hex4"&&(a=this.toHex8String(!0)),t==="hex8"&&(a=this.toHex8String()),t==="name"&&(a=this.toName()),t==="hsl"&&(a=this.toHslString()),t==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=nm(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=nm(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=nm(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=nm(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),a=(r.h+t)%360;return r.h=a<0?360+a:a,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var a=this.toRgb(),l=new e(t).toRgb(),h=r/100,f={r:(l.r-a.r)*h+a.r,g:(l.g-a.g)*h+a.g,b:(l.b-a.b)*h+a.b,a:(l.a-a.a)*h+a.a};return new e(f)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var a=this.toHsl(),l=360/r,h=[this];for(a.h=(a.h-(l*t>>1)+720)%360;--t;)a.h=(a.h+l)%360,h.push(new e(a));return h},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),a=r.h,l=r.s,h=r.v,f=[],u=1/t;t--;)f.push(new e({h:a,s:l,v:h})),h=(h+u)%1;return f},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),a=new e(t).toRgb(),l=r.a+a.a*(1-r.a);return new e({r:(r.r*r.a+a.r*a.a*(1-r.a))/l,g:(r.g*r.a+a.g*a.a*(1-r.a))/l,b:(r.b*r.a+a.b*a.a*(1-r.a))/l,a:l})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),a=r.h,l=[this],h=360/t,f=1;f<t;f++)l.push(new e({h:(a+f*h)%360,s:r.s,l:r.l}));return l},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),om=2,US=.16,ZO=.05,KO=.05,XO=.15,MP=5,kP=4,YO=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function HS(e){var t=e.r,r=e.g,a=e.b,l=W_(t,r,a);return{h:l.h*360,s:l.s,v:l.v}}function am(e){var t=e.r,r=e.g,a=e.b;return"#".concat(G_(t,r,a,!1))}function JO(e,t,r){var a=r/100,l={r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b};return l}function WS(e,t,r){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=r?Math.round(e.h)-om*t:Math.round(e.h)+om*t:a=r?Math.round(e.h)+om*t:Math.round(e.h)-om*t,a<0?a+=360:a>=360&&(a-=360),a}function GS(e,t,r){if(e.h===0&&e.s===0)return e.s;var a;return r?a=e.s-US*t:t===kP?a=e.s+US:a=e.s+ZO*t,a>1&&(a=1),r&&t===MP&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function qS(e,t,r){var a;return r?a=e.v+KO*t:a=e.v-XO*t,a>1&&(a=1),Number(a.toFixed(2))}function ic(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],a=Xc(e),l=MP;l>0;l-=1){var h=HS(a),f=am(Xc({h:WS(h,l,!0),s:GS(h,l,!0),v:qS(h,l,!0)}));r.push(f)}r.push(am(a));for(var u=1;u<=kP;u+=1){var w=HS(a),C=am(Xc({h:WS(w,u),s:GS(w,u),v:qS(w,u)}));r.push(C)}return t.theme==="dark"?YO.map(function(I){var k=I.index,A=I.opacity,q=am(JO(Xc(t.backgroundColor||"#141414"),Xc(r[k]),A*100));return q}):r}var p0={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Rm={},m0={};Object.keys(p0).forEach(function(e){Rm[e]=ic(p0[e]),Rm[e].primary=Rm[e][5],m0[e]=ic(p0[e],{theme:"dark",backgroundColor:"#141414"}),m0[e].primary=m0[e][5]});var QO=Rm.blue;const AP={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},af=Object.assign(Object.assign({},AP),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function eD(e,t){let{generateColorPalettes:r,generateNeutralColorPalettes:a}=t;const{colorSuccess:l,colorWarning:h,colorError:f,colorInfo:u,colorPrimary:w,colorBgBase:C,colorTextBase:I}=e,k=r(w),A=r(l),q=r(h),G=r(f),Z=r(u),K=a(C,I),j=e.colorLink||e.colorInfo,O=r(j);return Object.assign(Object.assign({},K),{colorPrimaryBg:k[1],colorPrimaryBgHover:k[2],colorPrimaryBorder:k[3],colorPrimaryBorderHover:k[4],colorPrimaryHover:k[5],colorPrimary:k[6],colorPrimaryActive:k[7],colorPrimaryTextHover:k[8],colorPrimaryText:k[9],colorPrimaryTextActive:k[10],colorSuccessBg:A[1],colorSuccessBgHover:A[2],colorSuccessBorder:A[3],colorSuccessBorderHover:A[4],colorSuccessHover:A[4],colorSuccess:A[6],colorSuccessActive:A[7],colorSuccessTextHover:A[8],colorSuccessText:A[9],colorSuccessTextActive:A[10],colorErrorBg:G[1],colorErrorBgHover:G[2],colorErrorBgActive:G[3],colorErrorBorder:G[3],colorErrorBorderHover:G[4],colorErrorHover:G[5],colorError:G[6],colorErrorActive:G[7],colorErrorTextHover:G[8],colorErrorText:G[9],colorErrorTextActive:G[10],colorWarningBg:q[1],colorWarningBgHover:q[2],colorWarningBorder:q[3],colorWarningBorderHover:q[4],colorWarningHover:q[4],colorWarning:q[6],colorWarningActive:q[7],colorWarningTextHover:q[8],colorWarningText:q[9],colorWarningTextActive:q[10],colorInfoBg:Z[1],colorInfoBgHover:Z[2],colorInfoBorder:Z[3],colorInfoBorderHover:Z[4],colorInfoHover:Z[4],colorInfo:Z[6],colorInfoActive:Z[7],colorInfoTextHover:Z[8],colorInfoText:Z[9],colorInfoTextActive:Z[10],colorLinkHover:O[4],colorLink:O[6],colorLinkActive:O[7],colorBgMask:new zi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const tD=e=>{let t=e,r=e,a=e,l=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?l=4:e>=8&&(l=6),{borderRadius:e,borderRadiusXS:a,borderRadiusSM:r,borderRadiusLG:t,borderRadiusOuter:l}};function rD(e){const{motionUnit:t,motionBase:r,borderRadius:a,lineWidth:l}=e;return Object.assign({motionDurationFast:`${(r+t).toFixed(1)}s`,motionDurationMid:`${(r+t*2).toFixed(1)}s`,motionDurationSlow:`${(r+t*3).toFixed(1)}s`,lineWidthBold:l+1},tD(a))}const nD=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function zm(e){return(e+8)/e}function iD(e){const t=new Array(10).fill(null).map((r,a)=>{const l=a-1,h=e*Math.pow(2.71828,l/5),f=a>1?Math.floor(h):Math.ceil(h);return Math.floor(f/2)*2});return t[1]=e,t.map(r=>({size:r,lineHeight:zm(r)}))}const oD=e=>{const t=iD(e),r=t.map(I=>I.size),a=t.map(I=>I.lineHeight),l=r[1],h=r[0],f=r[2],u=a[1],w=a[0],C=a[2];return{fontSizeSM:h,fontSize:l,fontSizeLG:f,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:u,lineHeightLG:C,lineHeightSM:w,fontHeight:Math.round(u*l),fontHeightLG:Math.round(C*f),fontHeightSM:Math.round(w*h),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}};function aD(e){const{sizeUnit:t,sizeStep:r}=e;return{sizeXXL:t*(r+8),sizeXL:t*(r+4),sizeLG:t*(r+2),sizeMD:t*(r+1),sizeMS:t*r,size:t*r,sizeSM:t*(r-1),sizeXS:t*(r-2),sizeXXS:t*(r-3)}}const $a=(e,t)=>new zi(e).setAlpha(t).toRgbString(),fh=(e,t)=>new zi(e).darken(t).toHexString(),sD=e=>{const t=ic(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},lD=(e,t)=>{const r=e||"#fff",a=t||"#000";return{colorBgBase:r,colorTextBase:a,colorText:$a(a,.88),colorTextSecondary:$a(a,.65),colorTextTertiary:$a(a,.45),colorTextQuaternary:$a(a,.25),colorFill:$a(a,.15),colorFillSecondary:$a(a,.06),colorFillTertiary:$a(a,.04),colorFillQuaternary:$a(a,.02),colorBgLayout:fh(r,4),colorBgContainer:fh(r,0),colorBgElevated:fh(r,0),colorBgSpotlight:$a(a,.85),colorBgBlur:"transparent",colorBorder:fh(r,15),colorBorderSecondary:fh(r,6)}};function cD(e){const t=Object.keys(AP).map(r=>{const a=ic(e[r]);return new Array(10).fill(1).reduce((l,h,f)=>(l[`${r}-${f+1}`]=a[f],l[`${r}${f+1}`]=a[f],l),{})}).reduce((r,a)=>(r=Object.assign(Object.assign({},r),a),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),eD(e,{generateColorPalettes:sD,generateNeutralColorPalettes:lD})),oD(e.fontSize)),aD(e)),nD(e)),rD(e))}const RP=$_(cD),Z_={token:af,override:{override:af},hashed:!0},zP=rt.createContext(Z_),Fx="anticon",uD=(e,t)=>t||(e?`ant-${e}`:"ant"),li=L.createContext({getPrefixCls:uD,iconPrefixCls:Fx}),dD=`-ant-${Date.now()}-${Math.random()}`;function hD(e,t){const r={},a=(f,u)=>{let w=f.clone();return w=(u==null?void 0:u(w))||w,w.toRgbString()},l=(f,u)=>{const w=new zi(f),C=ic(w.toRgbString());r[`${u}-color`]=a(w),r[`${u}-color-disabled`]=C[1],r[`${u}-color-hover`]=C[4],r[`${u}-color-active`]=C[6],r[`${u}-color-outline`]=w.clone().setAlpha(.2).toRgbString(),r[`${u}-color-deprecated-bg`]=C[0],r[`${u}-color-deprecated-border`]=C[2]};if(t.primaryColor){l(t.primaryColor,"primary");const f=new zi(t.primaryColor),u=ic(f.toRgbString());u.forEach((C,I)=>{r[`primary-${I+1}`]=C}),r["primary-color-deprecated-l-35"]=a(f,C=>C.lighten(35)),r["primary-color-deprecated-l-20"]=a(f,C=>C.lighten(20)),r["primary-color-deprecated-t-20"]=a(f,C=>C.tint(20)),r["primary-color-deprecated-t-50"]=a(f,C=>C.tint(50)),r["primary-color-deprecated-f-12"]=a(f,C=>C.setAlpha(C.getAlpha()*.12));const w=new zi(u[0]);r["primary-color-active-deprecated-f-30"]=a(w,C=>C.setAlpha(C.getAlpha()*.3)),r["primary-color-active-deprecated-d-02"]=a(w,C=>C.darken(2))}return t.successColor&&l(t.successColor,"success"),t.warningColor&&l(t.warningColor,"warning"),t.errorColor&&l(t.errorColor,"error"),t.infoColor&&l(t.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(f=>`--${e}-${f}: ${r[f]};`).join(`
`)}
  }
  `.trim()}function fD(e,t){const r=hD(e,t);$i()&&Ga(r,`${dD}-dynamic-theme`)}const K_=L.createContext(!1),LP=e=>{let{children:t,disabled:r}=e;const a=L.useContext(K_);return L.createElement(K_.Provider,{value:r??a},t)},cy=K_,Ru=L.createContext(void 0),pD=e=>{let{children:t,size:r}=e;const a=L.useContext(Ru);return L.createElement(Ru.Provider,{value:r||a},t)};function mD(){const e=L.useContext(cy),t=L.useContext(Ru);return{componentDisabled:e,componentSize:t}}const gD="5.17.3";function g0(e){return e>=0&&e<=255}function sm(e,t){const{r,g:a,b:l,a:h}=new zi(e).toRgb();if(h<1)return e;const{r:f,g:u,b:w}=new zi(t).toRgb();for(let C=.01;C<=1;C+=.01){const I=Math.round((r-f*(1-C))/C),k=Math.round((a-u*(1-C))/C),A=Math.round((l-w*(1-C))/C);if(g0(I)&&g0(k)&&g0(A))return new zi({r:I,g:k,b:A,a:Math.round(C*100)/100}).toRgbString()}return new zi({r,g:a,b:l,a:1}).toRgbString()}var yD=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function OP(e){const{override:t}=e,r=yD(e,["override"]),a=Object.assign({},t);Object.keys(af).forEach(A=>{delete a[A]});const l=Object.assign(Object.assign({},r),a),h=480,f=576,u=768,w=992,C=1200,I=1600;if(l.motion===!1){const A="0s";l.motionDurationFast=A,l.motionDurationMid=A,l.motionDurationSlow=A}return Object.assign(Object.assign(Object.assign({},l),{colorFillContent:l.colorFillSecondary,colorFillContentHover:l.colorFill,colorFillAlter:l.colorFillQuaternary,colorBgContainerDisabled:l.colorFillTertiary,colorBorderBg:l.colorBgContainer,colorSplit:sm(l.colorBorderSecondary,l.colorBgContainer),colorTextPlaceholder:l.colorTextQuaternary,colorTextDisabled:l.colorTextQuaternary,colorTextHeading:l.colorText,colorTextLabel:l.colorTextSecondary,colorTextDescription:l.colorTextTertiary,colorTextLightSolid:l.colorWhite,colorHighlight:l.colorError,colorBgTextHover:l.colorFillSecondary,colorBgTextActive:l.colorFill,colorIcon:l.colorTextTertiary,colorIconHover:l.colorText,colorErrorOutline:sm(l.colorErrorBg,l.colorBgContainer),colorWarningOutline:sm(l.colorWarningBg,l.colorBgContainer),fontSizeIcon:l.fontSizeSM,lineWidthFocus:l.lineWidth*4,lineWidth:l.lineWidth,controlOutlineWidth:l.lineWidth*2,controlInteractiveSize:l.controlHeight/2,controlItemBgHover:l.colorFillTertiary,controlItemBgActive:l.colorPrimaryBg,controlItemBgActiveHover:l.colorPrimaryBgHover,controlItemBgActiveDisabled:l.colorFill,controlTmpOutline:l.colorFillQuaternary,controlOutline:sm(l.colorPrimaryBg,l.colorBgContainer),lineType:l.lineType,borderRadius:l.borderRadius,borderRadiusXS:l.borderRadiusXS,borderRadiusSM:l.borderRadiusSM,borderRadiusLG:l.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:l.sizeXXS,paddingXS:l.sizeXS,paddingSM:l.sizeSM,padding:l.size,paddingMD:l.sizeMD,paddingLG:l.sizeLG,paddingXL:l.sizeXL,paddingContentHorizontalLG:l.sizeLG,paddingContentVerticalLG:l.sizeMS,paddingContentHorizontal:l.sizeMS,paddingContentVertical:l.sizeSM,paddingContentHorizontalSM:l.size,paddingContentVerticalSM:l.sizeXS,marginXXS:l.sizeXXS,marginXS:l.sizeXS,marginSM:l.sizeSM,margin:l.size,marginMD:l.sizeMD,marginLG:l.sizeLG,marginXL:l.sizeXL,marginXXL:l.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:h,screenXSMin:h,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:u-1,screenMD:u,screenMDMin:u,screenMDMax:w-1,screenLG:w,screenLGMin:w,screenLGMax:C-1,screenXL:C,screenXLMin:C,screenXLMax:I-1,screenXXL:I,screenXXLMin:I,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new zi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new zi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new zi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var ZS=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const DP={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},FP={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},vD={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},BP=(e,t,r)=>{const a=r.getDerivativeToken(e),{override:l}=t,h=ZS(t,["override"]);let f=Object.assign(Object.assign({},a),{override:l});return f=OP(f),h&&Object.entries(h).forEach(u=>{let[w,C]=u;const{theme:I}=C,k=ZS(C,["theme"]);let A=k;I&&(A=BP(Object.assign(Object.assign({},f),k),{override:k},I)),f[w]=A}),f};function _a(){const{token:e,hashed:t,theme:r,override:a,cssVar:l}=rt.useContext(zP),h=`${gD}-${t||""}`,f=r||RP,[u,w,C]=Y6(f,[af,e],{salt:h,override:a,getComputedToken:BP,formatToken:OP,cssVar:l&&{prefix:l.prefix,key:l.key,unitless:DP,ignore:FP,preserve:vD}});return[f,C,t?w:"",u,l]}function $P(e,t,r){return t=rc(t),QI(e,ny()?Reflect.construct(t,[],rc(e).constructor):t.apply(e,r))}let NP=si(function e(){ai(this,e)});const jP="CALC_UNIT",_D=new RegExp(jP,"g");function y0(e){return typeof e=="number"?`${e}${jP}`:e}let xD=function(e){function t(r){var a;return ai(this,t),a=$P(this,t),a.result="",r instanceof t?a.result=`(${r.result})`:typeof r=="number"?a.result=y0(r):typeof r=="string"&&(a.result=r),a}return Nu(t,e),si(t,[{key:"add",value:function(a){return a instanceof t?this.result=`${this.result} + ${a.getResult()}`:(typeof a=="number"||typeof a=="string")&&(this.result=`${this.result} + ${y0(a)}`),this.lowPriority=!0,this}},{key:"sub",value:function(a){return a instanceof t?this.result=`${this.result} - ${a.getResult()}`:(typeof a=="number"||typeof a=="string")&&(this.result=`${this.result} - ${y0(a)}`),this.lowPriority=!0,this}},{key:"mul",value:function(a){return this.lowPriority&&(this.result=`(${this.result})`),a instanceof t?this.result=`${this.result} * ${a.getResult(!0)}`:(typeof a=="number"||typeof a=="string")&&(this.result=`${this.result} * ${a}`),this.lowPriority=!1,this}},{key:"div",value:function(a){return this.lowPriority&&(this.result=`(${this.result})`),a instanceof t?this.result=`${this.result} / ${a.getResult(!0)}`:(typeof a=="number"||typeof a=="string")&&(this.result=`${this.result} / ${a}`),this.lowPriority=!1,this}},{key:"getResult",value:function(a){return this.lowPriority||a?`(${this.result})`:this.result}},{key:"equal",value:function(a){const{unit:l=!0}=a||{};return this.result=this.result.replace(_D,l?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}])}(NP),bD=function(e){function t(r){var a;return ai(this,t),a=$P(this,t),a.result=0,r instanceof t?a.result=r.result:typeof r=="number"&&(a.result=r),a}return Nu(t,e),si(t,[{key:"add",value:function(a){return a instanceof t?this.result+=a.result:typeof a=="number"&&(this.result+=a),this}},{key:"sub",value:function(a){return a instanceof t?this.result-=a.result:typeof a=="number"&&(this.result-=a),this}},{key:"mul",value:function(a){return a instanceof t?this.result*=a.result:typeof a=="number"&&(this.result*=a),this}},{key:"div",value:function(a){return a instanceof t?this.result/=a.result:typeof a=="number"&&(this.result/=a),this}},{key:"equal",value:function(){return this.result}}])}(NP);const wD=e=>{const t=e==="css"?xD:bD;return r=>new t(r)};function sf(e){var t=L.useRef();t.current=e;var r=L.useCallback(function(){for(var a,l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(h))},[]);return r}function ql(e){var t=L.useRef(!1),r=L.useState(e),a=Tt(r,2),l=a[0],h=a[1];L.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function f(u,w){w&&t.current||h(u)}return[l,f]}function v0(e){return e!==void 0}function VP(e,t){var r=t||{},a=r.defaultValue,l=r.value,h=r.onChange,f=r.postState,u=ql(function(){return v0(l)?l:v0(a)?typeof a=="function"?a():a:typeof e=="function"?e():e}),w=Tt(u,2),C=w[0],I=w[1],k=l!==void 0?l:C,A=f?f(k):k,q=sf(h),G=ql([k]),Z=Tt(G,2),K=Z[0],j=Z[1];kh(function(){var $=K[0];C!==$&&q(C,$)},[K]),kh(function(){v0(l)||I(l)},[l]);var O=sf(function($,J){I($,J),j([k],J)});return[A,O]}const qa=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},UP=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),HP=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),SD=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),CD=(e,t,r,a)=>{const l=`[class^="${t}"], [class*=" ${t}"]`,h=r?`.${r}`:l,f={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let u={};return a!==!1&&(u={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[h]:Object.assign(Object.assign(Object.assign({},u),f),{[l]:f})}},Bx=e=>({outline:`${_t(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),WP=e=>({"&:focus-visible":Object.assign({},Bx(e))});function ED(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return`max(${r.map(l=>_t(l)).join(",")})`},min:function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return`min(${r.map(l=>_t(l)).join(",")})`}}}const GP=typeof CSSINJS_STATISTIC<"u";let X_=!0;function Po(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!GP)return Object.assign.apply(Object,[{}].concat(t));X_=!1;const a={};return t.forEach(l=>{Object.keys(l).forEach(f=>{Object.defineProperty(a,f,{configurable:!0,enumerable:!0,get:()=>l[f]})})}),X_=!0,a}const KS={};function TD(){}const ID=e=>{let t,r=e,a=TD;return GP&&typeof Proxy<"u"&&(t=new Set,r=new Proxy(e,{get(l,h){return X_&&t.add(h),l[h]}}),a=(l,h)=>{var f;KS[l]={global:Array.from(t),component:Object.assign(Object.assign({},(f=KS[l])===null||f===void 0?void 0:f.component),h)}}),{token:r,keys:t,flush:a}},qP=(e,t)=>{const[r,a]=_a();return H_({theme:r,token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},UP()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},ZP=(e,t,r)=>{var a;return typeof r=="function"?r(Po(t,(a=t[e])!==null&&a!==void 0?a:{})):r??{}},KP=(e,t,r,a)=>{const l=Object.assign({},t[e]);if(a!=null&&a.deprecatedTokens){const{deprecatedTokens:f}=a;f.forEach(u=>{let[w,C]=u;var I;(l!=null&&l[w]||l!=null&&l[C])&&((I=l[C])!==null&&I!==void 0||(l[C]=l==null?void 0:l[w]))})}const h=Object.assign(Object.assign({},r),l);return Object.keys(h).forEach(f=>{h[f]===t[f]&&delete h[f]}),h},PD=(e,t)=>`${[t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function $x(e,t,r){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=Array.isArray(e)?e:[e,e],[h]=l,f=l.join("-");return function(u){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u;const[C,I,k,A,q]=_a(),{getPrefixCls:G,iconPrefixCls:Z,csp:K}=L.useContext(li),j=G(),O=q?"css":"js",$=wD(O),{max:J,min:ne}=ED(O),oe={theme:C,token:A,hashId:k,nonce:()=>K==null?void 0:K.nonce,clientOnly:a.clientOnly,layer:{name:"antd"},order:a.order||-999};return H_(Object.assign(Object.assign({},oe),{clientOnly:!1,path:["Shared",j]}),()=>[{"&":SD(A)}]),qP(Z,K),[H_(Object.assign(Object.assign({},oe),{path:[f,u,Z]}),()=>{if(a.injectStyle===!1)return[];const{token:be,flush:Ee}=ID(A),ke=ZP(h,I,r),Ae=`.${u}`,Ye=KP(h,I,ke,{deprecatedTokens:a.deprecatedTokens});q&&Object.keys(ke).forEach(Je=>{ke[Je]=`var(${uP(Je,PD(h,q.prefix))})`});const He=Po(be,{componentCls:Ae,prefixCls:u,iconCls:`.${Z}`,antCls:`.${j}`,calc:$,max:J,min:ne},q?ke:Ye),Le=t(He,{hashId:k,prefixCls:u,rootPrefixCls:j,iconPrefixCls:Z});return Ee(h,Ye),[a.resetStyle===!1?null:CD(He,u,w,a.resetFont),Le]}),k]}}const XP=(e,t,r,a)=>{const l=$x(e,t,r,Object.assign({resetStyle:!1,order:-998},a));return f=>{let{prefixCls:u,rootCls:w=u}=f;return l(u,w),null}},MD=(e,t,r)=>{function a(C){return`${e}${C.slice(0,1).toUpperCase()}${C.slice(1)}`}const{unitless:l={},injectStyle:h=!0}=r??{},f={[a("zIndexPopup")]:!0};Object.keys(l).forEach(C=>{f[a(C)]=l[C]});const u=C=>{let{rootCls:I,cssVar:k}=C;const[,A]=_a();return EO({path:[e],prefix:k.prefix,key:k==null?void 0:k.key,unitless:Object.assign(Object.assign({},DP),f),ignore:FP,token:A,scope:I},()=>{const q=ZP(e,A,t),G=KP(e,A,q,{deprecatedTokens:r==null?void 0:r.deprecatedTokens});return Object.keys(q).forEach(Z=>{G[a(Z)]=G[Z],delete G[Z]}),G}),null};return C=>{const[,,,,I]=_a();return[k=>h&&I?rt.createElement(rt.Fragment,null,rt.createElement(u,{rootCls:C,cssVar:I,component:e}),k):k,I==null?void 0:I.key]}},bf=(e,t,r,a)=>{const l=$x(e,t,r,a),h=MD(Array.isArray(e)?e[0]:e,r,a);return function(f){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;const[,w]=l(f,u),[C,I]=h(u);return[C,w,I]}},kD=Object.assign({},Kl),{useId:XS}=kD,AD=()=>"",RD=typeof XS>"u"?AD:XS;function zD(e,t,r){var a;const l=e||{},h=l.inherit===!1||!t?Object.assign(Object.assign({},Z_),{hashed:(a=t==null?void 0:t.hashed)!==null&&a!==void 0?a:Z_.hashed,cssVar:t==null?void 0:t.cssVar}):t,f=RD();return Ex(()=>{var u,w;if(!e)return t;const C=Object.assign({},h.components);Object.keys(e.components||{}).forEach(A=>{C[A]=Object.assign(Object.assign({},C[A]),e.components[A])});const I=`css-var-${f.replace(/:/g,"")}`,k=((u=l.cssVar)!==null&&u!==void 0?u:h.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof h.cssVar=="object"?h.cssVar:{}),typeof l.cssVar=="object"?l.cssVar:{}),{key:typeof l.cssVar=="object"&&((w=l.cssVar)===null||w===void 0?void 0:w.key)||I});return Object.assign(Object.assign(Object.assign({},h),l),{token:Object.assign(Object.assign({},h.token),l.token),components:C,cssVar:k})},[l,h],(u,w)=>u.some((C,I)=>{const k=w[I];return!F_(C,k,!0)}))}var LD=["children"],YP=L.createContext({});function OD(e){var t=e.children,r=ea(e,LD);return L.createElement(YP.Provider,{value:r},t)}var DD=function(e){Nu(r,e);var t=iy(r);function r(){return ai(this,r),t.apply(this,arguments)}return si(r,[{key:"render",value:function(){return this.props.children}}]),r}(L.Component),Es="none",lm="appear",cm="enter",um="leave",YS="none",Wo="prepare",uu="start",du="active",Nx="end",JP="prepared";function JS(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function FD(e,t){var r={animationend:JS("Animation","AnimationEnd"),transitionend:JS("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var BD=FD($i(),typeof window<"u"?window:{}),QP={};if($i()){var $D=document.createElement("div");QP=$D.style}var dm={};function eM(e){if(dm[e])return dm[e];var t=BD[e];if(t)for(var r=Object.keys(t),a=r.length,l=0;l<a;l+=1){var h=r[l];if(Object.prototype.hasOwnProperty.call(t,h)&&h in QP)return dm[e]=t[h],dm[e]}return""}var tM=eM("animationend"),rM=eM("transitionend"),nM=!!(tM&&rM),QS=tM||"animationend",eC=rM||"transitionend";function tC(e,t){if(!e)return null;if(Qt(e)==="object"){var r=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}const ND=function(e){var t=L.useRef();function r(l){l&&(l.removeEventListener(eC,e),l.removeEventListener(QS,e))}function a(l){t.current&&t.current!==l&&r(t.current),l&&l!==t.current&&(l.addEventListener(eC,e),l.addEventListener(QS,e),t.current=l)}return L.useEffect(function(){return function(){r(t.current)}},[]),[a,r]};var iM=$i()?L.useLayoutEffect:L.useEffect;const jD=function(){var e=L.useRef(null);function t(){Qo.cancel(e.current)}function r(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var h=Qo(function(){l<=1?a({isCanceled:function(){return h!==e.current}}):r(a,l-1)});e.current=h}return L.useEffect(function(){return function(){t()}},[]),[r,t]};var VD=[Wo,uu,du,Nx],UD=[Wo,JP],oM=!1,HD=!0;function aM(e){return e===du||e===Nx}const WD=function(e,t,r){var a=ql(YS),l=Tt(a,2),h=l[0],f=l[1],u=jD(),w=Tt(u,2),C=w[0],I=w[1];function k(){f(Wo,!0)}var A=t?UD:VD;return iM(function(){if(h!==YS&&h!==Nx){var q=A.indexOf(h),G=A[q+1],Z=r(h);Z===oM?f(G,!0):G&&C(function(K){function j(){K.isCanceled()||f(G,!0)}Z===!0?j():Promise.resolve(Z).then(j)})}},[e,h]),L.useEffect(function(){return function(){I()}},[]),[k,h]};function GD(e,t,r,a){var l=a.motionEnter,h=l===void 0?!0:l,f=a.motionAppear,u=f===void 0?!0:f,w=a.motionLeave,C=w===void 0?!0:w,I=a.motionDeadline,k=a.motionLeaveImmediately,A=a.onAppearPrepare,q=a.onEnterPrepare,G=a.onLeavePrepare,Z=a.onAppearStart,K=a.onEnterStart,j=a.onLeaveStart,O=a.onAppearActive,$=a.onEnterActive,J=a.onLeaveActive,ne=a.onAppearEnd,oe=a.onEnterEnd,le=a.onLeaveEnd,be=a.onVisibleChanged,Ee=ql(),ke=Tt(Ee,2),Ae=ke[0],Ye=ke[1],He=ql(Es),Le=Tt(He,2),Je=Le[0],Oe=Le[1],Pe=ql(null),xe=Tt(Pe,2),De=xe[0],$e=xe[1],Ve=L.useRef(!1),Ze=L.useRef(null);function gt(){return r()}var Ct=L.useRef(!1);function Ht(){Oe(Es,!0),$e(null,!0)}var Ut=sf(function(Et){if(Je!==Es){var Mt=gt();if(!(Et&&!Et.deadline&&Et.target!==Mt)){var sr=Ct.current,ln;Je===lm&&sr?ln=ne==null?void 0:ne(Mt,Et):Je===cm&&sr?ln=oe==null?void 0:oe(Mt,Et):Je===um&&sr&&(ln=le==null?void 0:le(Mt,Et)),sr&&ln!==!1&&Ht()}}}),Nt=ND(Ut),zt=Tt(Nt,1),Lr=zt[0],Yr=function(Mt){switch(Mt){case lm:return Me(Me(Me({},Wo,A),uu,Z),du,O);case cm:return Me(Me(Me({},Wo,q),uu,K),du,$);case um:return Me(Me(Me({},Wo,G),uu,j),du,J);default:return{}}},xr=L.useMemo(function(){return Yr(Je)},[Je]),Cr=WD(Je,!e,function(Et){if(Et===Wo){var Mt=xr[Wo];return Mt?Mt(gt()):oM}if(br in xr){var sr;$e(((sr=xr[br])===null||sr===void 0?void 0:sr.call(xr,gt(),null))||null)}return br===du&&Je!==Es&&(Lr(gt()),I>0&&(clearTimeout(Ze.current),Ze.current=setTimeout(function(){Ut({deadline:!0})},I))),br===JP&&Ht(),HD}),Xt=Tt(Cr,2),er=Xt[0],br=Xt[1],ze=aM(br);Ct.current=ze,iM(function(){Ye(t);var Et=Ve.current;Ve.current=!0;var Mt;!Et&&t&&u&&(Mt=lm),Et&&t&&h&&(Mt=cm),(Et&&!t&&C||!Et&&k&&!t&&C)&&(Mt=um);var sr=Yr(Mt);Mt&&(e||sr[Wo])?(Oe(Mt),er()):Oe(Es)},[t]),L.useEffect(function(){(Je===lm&&!u||Je===cm&&!h||Je===um&&!C)&&Oe(Es)},[u,h,C]),L.useEffect(function(){return function(){Ve.current=!1,clearTimeout(Ze.current)}},[]);var kr=L.useRef(!1);L.useEffect(function(){Ae&&(kr.current=!0),Ae!==void 0&&Je===Es&&((kr.current||Ae)&&(be==null||be(Ae)),kr.current=!0)},[Ae,Je]);var Sn=De;return xr[Wo]&&br===uu&&(Sn=Xe({transition:"none"},Sn)),[Je,br,Sn,Ae??t]}function qD(e){var t=e;Qt(e)==="object"&&(t=e.transitionSupport);function r(l,h){return!!(l.motionName&&t&&h!==!1)}var a=L.forwardRef(function(l,h){var f=l.visible,u=f===void 0?!0:f,w=l.removeOnLeave,C=w===void 0?!0:w,I=l.forceRender,k=l.children,A=l.motionName,q=l.leavedClassName,G=l.eventProps,Z=L.useContext(YP),K=Z.motion,j=r(l,K),O=L.useRef(),$=L.useRef();function J(){try{return O.current instanceof HTMLElement?O.current:x6($.current)}catch{return null}}var ne=GD(j,u,J,l),oe=Tt(ne,4),le=oe[0],be=oe[1],Ee=oe[2],ke=oe[3],Ae=L.useRef(ke);ke&&(Ae.current=!0);var Ye=L.useCallback(function(De){O.current=De,YI(h,De)},[h]),He,Le=Xe(Xe({},G),{},{visible:u});if(!k)He=null;else if(le===Es)ke?He=k(Xe({},Le),Ye):!C&&Ae.current&&q?He=k(Xe(Xe({},Le),{},{className:q}),Ye):I||!C&&!q?He=k(Xe(Xe({},Le),{},{style:{display:"none"}}),Ye):He=null;else{var Je;be===Wo?Je="prepare":aM(be)?Je="active":be===uu&&(Je="start");var Oe=tC(A,"".concat(le,"-").concat(Je));He=k(Xe(Xe({},Le),{},{className:$t(tC(A,le),Me(Me({},Oe,Oe&&Je),A,typeof A=="string")),style:Ee}),Ye)}if(L.isValidElement(He)&&Tx(He)){var Pe=He,xe=Pe.ref;xe||(He=L.cloneElement(He,{ref:Ye}))}return L.createElement(DD,{ref:$},He)});return a.displayName="CSSMotion",a}const wf=qD(nM);var Y_="add",J_="keep",Q_="remove",_0="removed";function ZD(e){var t;return e&&Qt(e)==="object"&&"key"in e?t=e:t={key:e},Xe(Xe({},t),{},{key:String(t.key)})}function e1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(ZD)}function KD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],a=0,l=t.length,h=e1(e),f=e1(t);h.forEach(function(C){for(var I=!1,k=a;k<l;k+=1){var A=f[k];if(A.key===C.key){a<k&&(r=r.concat(f.slice(a,k).map(function(q){return Xe(Xe({},q),{},{status:Y_})})),a=k),r.push(Xe(Xe({},A),{},{status:J_})),a+=1,I=!0;break}}I||r.push(Xe(Xe({},C),{},{status:Q_}))}),a<l&&(r=r.concat(f.slice(a).map(function(C){return Xe(Xe({},C),{},{status:Y_})})));var u={};r.forEach(function(C){var I=C.key;u[I]=(u[I]||0)+1});var w=Object.keys(u).filter(function(C){return u[C]>1});return w.forEach(function(C){r=r.filter(function(I){var k=I.key,A=I.status;return k!==C||A!==Q_}),r.forEach(function(I){I.key===C&&(I.status=J_)})}),r}var XD=["component","children","onVisibleChanged","onAllRemoved"],YD=["status"],JD=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function QD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wf,r=function(a){Nu(h,a);var l=iy(h);function h(){var f;ai(this,h);for(var u=arguments.length,w=new Array(u),C=0;C<u;C++)w[C]=arguments[C];return f=l.call.apply(l,[this].concat(w)),Me(ir(f),"state",{keyEntities:[]}),Me(ir(f),"removeKey",function(I){var k=f.state.keyEntities,A=k.map(function(q){return q.key!==I?q:Xe(Xe({},q),{},{status:_0})});return f.setState({keyEntities:A}),A.filter(function(q){var G=q.status;return G!==_0}).length}),f}return si(h,[{key:"render",value:function(){var u=this,w=this.state.keyEntities,C=this.props,I=C.component,k=C.children,A=C.onVisibleChanged,q=C.onAllRemoved,G=ea(C,XD),Z=I||L.Fragment,K={};return JD.forEach(function(j){K[j]=G[j],delete G[j]}),delete G.keys,L.createElement(Z,G,w.map(function(j,O){var $=j.status,J=ea(j,YD),ne=$===Y_||$===J_;return L.createElement(t,pr({},K,{key:J.key,visible:ne,eventProps:J,onVisibleChanged:function(le){if(A==null||A(le,{key:J.key}),!le){var be=u.removeKey(J.key);be===0&&q&&q()}}}),function(oe,le){return k(Xe(Xe({},oe),{},{index:O}),le)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,w){var C=u.keys,I=w.keyEntities,k=e1(C),A=KD(I,k);return{keyEntities:A.filter(function(q){var G=I.find(function(Z){var K=Z.key;return q.key===K});return!(G&&G.status===_0&&q.status===Q_)})}}}]),h}(L.Component);return Me(r,"defaultProps",{component:"div"}),r}QD(nM);function eF(e){const{children:t}=e,[,r]=_a(),{motion:a}=r,l=L.useRef(!1);return l.current=l.current||a===!1,l.current?L.createElement(OD,{motion:a},t):t}const tF=()=>null;var rF=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const nF=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],iF="ant";let gg,sM,lM,cM;function Lm(){return gg||iF}function oF(){return sM||Fx}function aF(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const sF=e=>{const{prefixCls:t,iconPrefixCls:r,theme:a,holderRender:l}=e;t!==void 0&&(gg=t),r!==void 0&&(sM=r),"holderRender"in e&&(cM=l),a&&(aF(a)?fD(Lm(),a):lM=a)},lF=()=>({getPrefixCls:(e,t)=>t||(e?`${Lm()}-${e}`:Lm()),getIconPrefixCls:oF,getRootPrefixCls:()=>gg||Lm(),getTheme:()=>lM,holderRender:cM}),cF=e=>{const{children:t,csp:r,autoInsertSpaceInButton:a,alert:l,anchor:h,form:f,locale:u,componentSize:w,direction:C,space:I,virtual:k,dropdownMatchSelectWidth:A,popupMatchSelectWidth:q,popupOverflow:G,legacyLocale:Z,parentContext:K,iconPrefixCls:j,theme:O,componentDisabled:$,segmented:J,statistic:ne,spin:oe,calendar:le,carousel:be,cascader:Ee,collapse:ke,typography:Ae,checkbox:Ye,descriptions:He,divider:Le,drawer:Je,skeleton:Oe,steps:Pe,image:xe,layout:De,list:$e,mentions:Ve,modal:Ze,progress:gt,result:Ct,slider:Ht,breadcrumb:Ut,menu:Nt,pagination:zt,input:Lr,textArea:Yr,empty:xr,badge:Cr,radio:Xt,rate:er,switch:br,transfer:ze,avatar:kr,message:Sn,tag:Et,table:Mt,card:sr,tabs:ln,timeline:ci,timePicker:ui,upload:yn,notification:yr,tree:Ur,colorPicker:Qe,datePicker:Jr,rangePicker:Hr,flex:co,wave:Ti,dropdown:et,warning:Ot,tour:kt,floatButtonGroup:Wr}=e,Gr=L.useCallback((fe,ye)=>{const{prefixCls:he}=e;if(ye)return ye;const Ce=he||K.getPrefixCls("");return fe?`${Ce}-${fe}`:Ce},[K.getPrefixCls,e.prefixCls]),It=j||K.iconPrefixCls||Fx,Cn=r||K.csp;qP(It,Cn);const Xn=zD(O,K.theme,{prefixCls:Gr("")}),Er={csp:Cn,autoInsertSpaceInButton:a,alert:l,anchor:h,locale:u||Z,direction:C,space:I,virtual:k,popupMatchSelectWidth:q??A,popupOverflow:G,getPrefixCls:Gr,iconPrefixCls:It,theme:Xn,segmented:J,statistic:ne,spin:oe,calendar:le,carousel:be,cascader:Ee,collapse:ke,typography:Ae,checkbox:Ye,descriptions:He,divider:Le,drawer:Je,skeleton:Oe,steps:Pe,image:xe,input:Lr,textArea:Yr,layout:De,list:$e,mentions:Ve,modal:Ze,progress:gt,result:Ct,slider:Ht,breadcrumb:Ut,menu:Nt,pagination:zt,empty:xr,badge:Cr,radio:Xt,rate:er,switch:br,transfer:ze,avatar:kr,message:Sn,tag:Et,table:Mt,card:sr,tabs:ln,timeline:ci,timePicker:ui,upload:yn,notification:yr,tree:Ur,colorPicker:Qe,datePicker:Jr,rangePicker:Hr,flex:co,wave:Ti,dropdown:et,warning:Ot,tour:kt,floatButtonGroup:Wr},Q=Object.assign({},K);Object.keys(Er).forEach(fe=>{Er[fe]!==void 0&&(Q[fe]=Er[fe])}),nF.forEach(fe=>{const ye=e[fe];ye&&(Q[fe]=ye)}),typeof a<"u"&&(Q.button=Object.assign({autoInsertSpace:a},Q.button));const B=Ex(()=>Q,Q,(fe,ye)=>{const he=Object.keys(fe),Ce=Object.keys(ye);return he.length!==Ce.length||he.some(Ue=>fe[Ue]!==ye[Ue])}),U=L.useMemo(()=>({prefixCls:It,csp:Cn}),[It,Cn]);let H=L.createElement(L.Fragment,null,L.createElement(tF,{dropdownMatchSelectWidth:A}),t);const ae=L.useMemo(()=>{var fe,ye,he,Ce;return cu(((fe=nc.Form)===null||fe===void 0?void 0:fe.defaultValidateMessages)||{},((he=(ye=B.locale)===null||ye===void 0?void 0:ye.Form)===null||he===void 0?void 0:he.defaultValidateMessages)||{},((Ce=B.form)===null||Ce===void 0?void 0:Ce.validateMessages)||{},(f==null?void 0:f.validateMessages)||{})},[B,f==null?void 0:f.validateMessages]);Object.keys(ae).length>0&&(H=L.createElement(AO.Provider,{value:ae},H)),u&&(H=L.createElement(DO,{locale:u,_ANT_MARK__:OO},H)),(It||Cn)&&(H=L.createElement(Lx.Provider,{value:U},H)),w&&(H=L.createElement(pD,{size:w},H)),H=L.createElement(eF,null,H);const ge=L.useMemo(()=>{const fe=Xn||{},{algorithm:ye,token:he,components:Ce,cssVar:Ue}=fe,Ne=rF(fe,["algorithm","token","components","cssVar"]),Be=ye&&(!Array.isArray(ye)||ye.length>0)?$_(ye):RP,xt={};Object.entries(Ce||{}).forEach(Lt=>{let[At,Kt]=Lt;const Jt=Object.assign({},Kt);"algorithm"in Jt&&(Jt.algorithm===!0?Jt.theme=Be:(Array.isArray(Jt.algorithm)||typeof Jt.algorithm=="function")&&(Jt.theme=$_(Jt.algorithm)),delete Jt.algorithm),xt[At]=Jt});const wt=Object.assign(Object.assign({},af),he);return Object.assign(Object.assign({},Ne),{theme:Be,token:wt,components:xt,override:Object.assign({override:wt},xt),cssVar:Ue})},[Xn]);return O&&(H=L.createElement(zP.Provider,{value:ge},H)),B.warning&&(H=L.createElement(kO.Provider,{value:B.warning},H)),$!==void 0&&(H=L.createElement(LP,{disabled:$},H)),L.createElement(li.Provider,{value:B},H)},Vu=e=>{const t=L.useContext(li),r=L.useContext(Ox);return L.createElement(cF,Object.assign({parentContext:t,legacyLocale:r},e))};Vu.ConfigContext=li;Vu.SizeContext=Ru;Vu.config=sF;Vu.useConfig=mD;Object.defineProperty(Vu,"SizeContext",{get:()=>Ru});const uy=Vu;var uF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function uM(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function dF(e){return uM(e)instanceof ShadowRoot}function hF(e){return dF(e)?uM(e):null}function fF(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})}function pF(e,t){Bi(e,"[@ant-design/icons] ".concat(t))}function rC(e){return Qt(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Qt(e.icon)==="object"||typeof e.icon=="function")}function nC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,r){var a=e[r];switch(r){case"class":t.className=a,delete t.class;break;default:delete t[r],t[fF(r)]=a}return t},{})}function t1(e,t,r){return r?rt.createElement(e.tag,Xe(Xe({key:t},nC(e.attrs)),r),(e.children||[]).map(function(a,l){return t1(a,"".concat(t,"-").concat(e.tag,"-").concat(l))})):rt.createElement(e.tag,Xe({key:t},nC(e.attrs)),(e.children||[]).map(function(a,l){return t1(a,"".concat(t,"-").concat(e.tag,"-").concat(l))}))}function dM(e){return ic(e)[0]}function hM(e){return e?Array.isArray(e)?e:[e]:[]}var mF=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,gF=function(t){var r=L.useContext(Lx),a=r.csp,l=r.prefixCls,h=mF;l&&(h=h.replace(/anticon/g,l)),L.useEffect(function(){var f=t.current,u=hF(f);Ga(h,"@ant-design-icons",{prepend:!0,csp:a,attachTo:u})},[])},yF=["icon","className","onClick","style","primaryColor","secondaryColor"],Ah={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function vF(e){var t=e.primaryColor,r=e.secondaryColor;Ah.primaryColor=t,Ah.secondaryColor=r||dM(t),Ah.calculated=!!r}function _F(){return Xe({},Ah)}var Uu=function(t){var r=t.icon,a=t.className,l=t.onClick,h=t.style,f=t.primaryColor,u=t.secondaryColor,w=ea(t,yF),C=L.useRef(),I=Ah;if(f&&(I={primaryColor:f,secondaryColor:u||dM(f)}),gF(C),pF(rC(r),"icon should be icon definiton, but got ".concat(r)),!rC(r))return null;var k=r;return k&&typeof k.icon=="function"&&(k=Xe(Xe({},k),{},{icon:k.icon(I.primaryColor,I.secondaryColor)})),t1(k.icon,"svg-".concat(k.name),Xe(Xe({className:a,onClick:l,style:h,"data-icon":k.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},w),{},{ref:C}))};Uu.displayName="IconReact";Uu.getTwoToneColors=_F;Uu.setTwoToneColors=vF;function fM(e){var t=hM(e),r=Tt(t,2),a=r[0],l=r[1];return Uu.setTwoToneColors({primaryColor:a,secondaryColor:l})}function xF(){var e=Uu.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var bF=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];fM(QO.primary);var Mo=L.forwardRef(function(e,t){var r=e.className,a=e.icon,l=e.spin,h=e.rotate,f=e.tabIndex,u=e.onClick,w=e.twoToneColor,C=ea(e,bF),I=L.useContext(Lx),k=I.prefixCls,A=k===void 0?"anticon":k,q=I.rootClassName,G=$t(q,A,Me(Me({},"".concat(A,"-").concat(a.name),!!a.name),"".concat(A,"-spin"),!!l||a.name==="loading"),r),Z=f;Z===void 0&&u&&(Z=-1);var K=h?{msTransform:"rotate(".concat(h,"deg)"),transform:"rotate(".concat(h,"deg)")}:void 0,j=hM(w),O=Tt(j,2),$=O[0],J=O[1];return L.createElement("span",pr({role:"img","aria-label":a.name},C,{ref:t,tabIndex:Z,onClick:u,className:G}),L.createElement(Uu,{icon:a,primaryColor:$,secondaryColor:J,style:K}))});Mo.displayName="AntdIcon";Mo.getTwoToneColor=xF;Mo.setTwoToneColor=fM;var wF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:uF}))},SF=L.forwardRef(wF),CF={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},EF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:CF}))},TF=L.forwardRef(EF),IF={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},PF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:IF}))},jx=L.forwardRef(PF),MF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},kF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:MF}))},AF=L.forwardRef(kF),RF={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},zF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:RF}))},LF=L.forwardRef(zF),OF=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,DF=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,FF="".concat(OF," ").concat(DF).split(/[\s\n]+/),BF="aria-",$F="data-";function iC(e,t){return e.indexOf(t)===0}function dy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;t===!1?r={aria:!0,data:!0,attr:!0}:t===!0?r={aria:!0}:r=Xe({},t);var a={};return Object.keys(e).forEach(function(l){(r.aria&&(l==="role"||iC(l,BF))||r.data&&iC(l,$F)||r.attr&&FF.includes(l))&&(a[l]=e[l])}),a}function NF(e){return e&&rt.isValidElement(e)&&e.type===rt.Fragment}const jF=(e,t,r)=>rt.isValidElement(e)?rt.cloneElement(e,typeof r=="function"?r(e.props||{}):r):t;function pM(e,t){return jF(e,e,t)}const Sf=e=>{const[,,,,t]=_a();return t?`${e}-css-var`:""};var Bt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Bt.F1&&r<=Bt.F12)return!1;switch(r){case Bt.ALT:case Bt.CAPS_LOCK:case Bt.CONTEXT_MENU:case Bt.CTRL:case Bt.DOWN:case Bt.END:case Bt.ESC:case Bt.HOME:case Bt.INSERT:case Bt.LEFT:case Bt.MAC_FF_META:case Bt.META:case Bt.NUMLOCK:case Bt.NUM_CENTER:case Bt.PAGE_DOWN:case Bt.PAGE_UP:case Bt.PAUSE:case Bt.PRINT_SCREEN:case Bt.RIGHT:case Bt.SHIFT:case Bt.UP:case Bt.WIN_KEY:case Bt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Bt.ZERO&&t<=Bt.NINE||t>=Bt.NUM_ZERO&&t<=Bt.NUM_MULTIPLY||t>=Bt.A&&t<=Bt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Bt.SPACE:case Bt.QUESTION_MARK:case Bt.NUM_PLUS:case Bt.NUM_MINUS:case Bt.NUM_PERIOD:case Bt.NUM_DIVISION:case Bt.SEMICOLON:case Bt.DASH:case Bt.EQUALS:case Bt.COMMA:case Bt.PERIOD:case Bt.SLASH:case Bt.APOSTROPHE:case Bt.SINGLE_QUOTE:case Bt.OPEN_SQUARE_BRACKET:case Bt.BACKSLASH:case Bt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},VF={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},UF=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:VF}))},HF=L.forwardRef(UF);const mM=rt.createContext(void 0),Rl=100,WF=10,gM=Rl*WF,yM={Modal:Rl,Drawer:Rl,Popover:Rl,Popconfirm:Rl,Tooltip:Rl,Tour:Rl},GF={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function qF(e){return e in yM}function ZF(e,t){const[,r]=_a(),a=rt.useContext(mM),l=qF(e);if(t!==void 0)return[t,t];let h=a??0;return l?(h+=(a?0:r.zIndexPopupBase)+yM[e],h=Math.min(h,r.zIndexPopupBase+gM)):h+=GF[e],[a===void 0?t:h,h]}function KF(){const[e,t]=L.useState([]),r=L.useCallback(a=>(t(l=>[].concat(Rt(l),[a])),()=>{t(l=>l.filter(h=>h!==a))}),[]);return[e,r]}function Si(){Si=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,l=Object.defineProperty||function(Oe,Pe,xe){Oe[Pe]=xe.value},h=typeof Symbol=="function"?Symbol:{},f=h.iterator||"@@iterator",u=h.asyncIterator||"@@asyncIterator",w=h.toStringTag||"@@toStringTag";function C(Oe,Pe,xe){return Object.defineProperty(Oe,Pe,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Oe[Pe]}try{C({},"")}catch{C=function(xe,De,$e){return xe[De]=$e}}function I(Oe,Pe,xe,De){var $e=Pe&&Pe.prototype instanceof j?Pe:j,Ve=Object.create($e.prototype),Ze=new Le(De||[]);return l(Ve,"_invoke",{value:ke(Oe,xe,Ze)}),Ve}function k(Oe,Pe,xe){try{return{type:"normal",arg:Oe.call(Pe,xe)}}catch(De){return{type:"throw",arg:De}}}t.wrap=I;var A="suspendedStart",q="suspendedYield",G="executing",Z="completed",K={};function j(){}function O(){}function $(){}var J={};C(J,f,function(){return this});var ne=Object.getPrototypeOf,oe=ne&&ne(ne(Je([])));oe&&oe!==r&&a.call(oe,f)&&(J=oe);var le=$.prototype=j.prototype=Object.create(J);function be(Oe){["next","throw","return"].forEach(function(Pe){C(Oe,Pe,function(xe){return this._invoke(Pe,xe)})})}function Ee(Oe,Pe){function xe($e,Ve,Ze,gt){var Ct=k(Oe[$e],Oe,Ve);if(Ct.type!=="throw"){var Ht=Ct.arg,Ut=Ht.value;return Ut&&Qt(Ut)=="object"&&a.call(Ut,"__await")?Pe.resolve(Ut.__await).then(function(Nt){xe("next",Nt,Ze,gt)},function(Nt){xe("throw",Nt,Ze,gt)}):Pe.resolve(Ut).then(function(Nt){Ht.value=Nt,Ze(Ht)},function(Nt){return xe("throw",Nt,Ze,gt)})}gt(Ct.arg)}var De;l(this,"_invoke",{value:function(Ve,Ze){function gt(){return new Pe(function(Ct,Ht){xe(Ve,Ze,Ct,Ht)})}return De=De?De.then(gt,gt):gt()}})}function ke(Oe,Pe,xe){var De=A;return function($e,Ve){if(De===G)throw Error("Generator is already running");if(De===Z){if($e==="throw")throw Ve;return{value:e,done:!0}}for(xe.method=$e,xe.arg=Ve;;){var Ze=xe.delegate;if(Ze){var gt=Ae(Ze,xe);if(gt){if(gt===K)continue;return gt}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(De===A)throw De=Z,xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);De=G;var Ct=k(Oe,Pe,xe);if(Ct.type==="normal"){if(De=xe.done?Z:q,Ct.arg===K)continue;return{value:Ct.arg,done:xe.done}}Ct.type==="throw"&&(De=Z,xe.method="throw",xe.arg=Ct.arg)}}}function Ae(Oe,Pe){var xe=Pe.method,De=Oe.iterator[xe];if(De===e)return Pe.delegate=null,xe==="throw"&&Oe.iterator.return&&(Pe.method="return",Pe.arg=e,Ae(Oe,Pe),Pe.method==="throw")||xe!=="return"&&(Pe.method="throw",Pe.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),K;var $e=k(De,Oe.iterator,Pe.arg);if($e.type==="throw")return Pe.method="throw",Pe.arg=$e.arg,Pe.delegate=null,K;var Ve=$e.arg;return Ve?Ve.done?(Pe[Oe.resultName]=Ve.value,Pe.next=Oe.nextLoc,Pe.method!=="return"&&(Pe.method="next",Pe.arg=e),Pe.delegate=null,K):Ve:(Pe.method="throw",Pe.arg=new TypeError("iterator result is not an object"),Pe.delegate=null,K)}function Ye(Oe){var Pe={tryLoc:Oe[0]};1 in Oe&&(Pe.catchLoc=Oe[1]),2 in Oe&&(Pe.finallyLoc=Oe[2],Pe.afterLoc=Oe[3]),this.tryEntries.push(Pe)}function He(Oe){var Pe=Oe.completion||{};Pe.type="normal",delete Pe.arg,Oe.completion=Pe}function Le(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(Ye,this),this.reset(!0)}function Je(Oe){if(Oe||Oe===""){var Pe=Oe[f];if(Pe)return Pe.call(Oe);if(typeof Oe.next=="function")return Oe;if(!isNaN(Oe.length)){var xe=-1,De=function $e(){for(;++xe<Oe.length;)if(a.call(Oe,xe))return $e.value=Oe[xe],$e.done=!1,$e;return $e.value=e,$e.done=!0,$e};return De.next=De}}throw new TypeError(Qt(Oe)+" is not iterable")}return O.prototype=$,l(le,"constructor",{value:$,configurable:!0}),l($,"constructor",{value:O,configurable:!0}),O.displayName=C($,w,"GeneratorFunction"),t.isGeneratorFunction=function(Oe){var Pe=typeof Oe=="function"&&Oe.constructor;return!!Pe&&(Pe===O||(Pe.displayName||Pe.name)==="GeneratorFunction")},t.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,$):(Oe.__proto__=$,C(Oe,w,"GeneratorFunction")),Oe.prototype=Object.create(le),Oe},t.awrap=function(Oe){return{__await:Oe}},be(Ee.prototype),C(Ee.prototype,u,function(){return this}),t.AsyncIterator=Ee,t.async=function(Oe,Pe,xe,De,$e){$e===void 0&&($e=Promise);var Ve=new Ee(I(Oe,Pe,xe,De),$e);return t.isGeneratorFunction(Pe)?Ve:Ve.next().then(function(Ze){return Ze.done?Ze.value:Ve.next()})},be(le),C(le,w,"Generator"),C(le,f,function(){return this}),C(le,"toString",function(){return"[object Generator]"}),t.keys=function(Oe){var Pe=Object(Oe),xe=[];for(var De in Pe)xe.push(De);return xe.reverse(),function $e(){for(;xe.length;){var Ve=xe.pop();if(Ve in Pe)return $e.value=Ve,$e.done=!1,$e}return $e.done=!0,$e}},t.values=Je,Le.prototype={constructor:Le,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(He),!Pe)for(var xe in this)xe.charAt(0)==="t"&&a.call(this,xe)&&!isNaN(+xe.slice(1))&&(this[xe]=e)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var xe=this;function De(Ht,Ut){return Ze.type="throw",Ze.arg=Pe,xe.next=Ht,Ut&&(xe.method="next",xe.arg=e),!!Ut}for(var $e=this.tryEntries.length-1;$e>=0;--$e){var Ve=this.tryEntries[$e],Ze=Ve.completion;if(Ve.tryLoc==="root")return De("end");if(Ve.tryLoc<=this.prev){var gt=a.call(Ve,"catchLoc"),Ct=a.call(Ve,"finallyLoc");if(gt&&Ct){if(this.prev<Ve.catchLoc)return De(Ve.catchLoc,!0);if(this.prev<Ve.finallyLoc)return De(Ve.finallyLoc)}else if(gt){if(this.prev<Ve.catchLoc)return De(Ve.catchLoc,!0)}else{if(!Ct)throw Error("try statement without catch or finally");if(this.prev<Ve.finallyLoc)return De(Ve.finallyLoc)}}}},abrupt:function(Pe,xe){for(var De=this.tryEntries.length-1;De>=0;--De){var $e=this.tryEntries[De];if($e.tryLoc<=this.prev&&a.call($e,"finallyLoc")&&this.prev<$e.finallyLoc){var Ve=$e;break}}Ve&&(Pe==="break"||Pe==="continue")&&Ve.tryLoc<=xe&&xe<=Ve.finallyLoc&&(Ve=null);var Ze=Ve?Ve.completion:{};return Ze.type=Pe,Ze.arg=xe,Ve?(this.method="next",this.next=Ve.finallyLoc,K):this.complete(Ze)},complete:function(Pe,xe){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&xe&&(this.next=xe),K},finish:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var De=this.tryEntries[xe];if(De.finallyLoc===Pe)return this.complete(De.completion,De.afterLoc),He(De),K}},catch:function(Pe){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var De=this.tryEntries[xe];if(De.tryLoc===Pe){var $e=De.completion;if($e.type==="throw"){var Ve=$e.arg;He(De)}return Ve}}throw Error("illegal catch attempt")},delegateYield:function(Pe,xe,De){return this.delegate={iterator:Je(Pe),resultName:xe,nextLoc:De},this.method==="next"&&(this.arg=e),K}},t}function oC(e,t,r,a,l,h,f){try{var u=e[h](f),w=u.value}catch(C){return void r(C)}u.done?t(w):Promise.resolve(w).then(a,l)}function uc(e){return function(){var t=this,r=arguments;return new Promise(function(a,l){var h=e.apply(t,r);function f(w){oC(h,a,l,f,u,"next",w)}function u(w){oC(h,a,l,f,u,"throw",w)}f(void 0)})}}var Cf=Xe({},J4),XF=Cf.version,YF=Cf.render,JF=Cf.unmountComponentAtNode,hy;try{var QF=Number((XF||"").split(".")[0]);QF>=18&&(hy=Cf.createRoot)}catch{}function aC(e){var t=Cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Qt(t)==="object"&&(t.usingClientEntryPoint=e)}var yg="__rc_react_root__";function eB(e,t){aC(!0);var r=t[yg]||hy(t);aC(!1),r.render(e),t[yg]=r}function tB(e,t){YF(e,t)}function vM(e,t){if(hy){eB(e,t);return}tB(e,t)}function rB(e){return r1.apply(this,arguments)}function r1(){return r1=uc(Si().mark(function e(t){return Si().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var l;(l=t[yg])===null||l===void 0||l.unmount(),delete t[yg]}));case 1:case"end":return a.stop()}},e)})),r1.apply(this,arguments)}function nB(e){JF(e)}function _M(e){return n1.apply(this,arguments)}function n1(){return n1=uc(Si().mark(function e(t){return Si().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(hy===void 0){a.next=2;break}return a.abrupt("return",rB(t));case 2:nB(t);case 3:case"end":return a.stop()}},e)})),n1.apply(this,arguments)}const vg=(e,t,r)=>r!==void 0?r:`${e}-${t}`,iB=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,a=t.height;if(r||a)return!0}if(e.getBoundingClientRect){var l=e.getBoundingClientRect(),h=l.width,f=l.height;if(h||f)return!0}}return!1},oB=e=>{const{componentCls:t,colorPrimary:r}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},aB=$x("Wave",e=>[oB(e)]),Vx="ant-wave-target";function sB(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function x0(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&sB(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function lB(e){const{borderTopColor:t,borderColor:r,backgroundColor:a}=getComputedStyle(e);return x0(t)?t:x0(r)?r:x0(a)?a:null}function b0(e){return Number.isNaN(e)?0:e}const cB=e=>{const{className:t,target:r,component:a}=e,l=L.useRef(null),[h,f]=L.useState(null),[u,w]=L.useState([]),[C,I]=L.useState(0),[k,A]=L.useState(0),[q,G]=L.useState(0),[Z,K]=L.useState(0),[j,O]=L.useState(!1),$={left:C,top:k,width:q,height:Z,borderRadius:u.map(oe=>`${oe}px`).join(" ")};h&&($["--wave-color"]=h);function J(){const oe=getComputedStyle(r);f(lB(r));const le=oe.position==="static",{borderLeftWidth:be,borderTopWidth:Ee}=oe;I(le?r.offsetLeft:b0(-parseFloat(be))),A(le?r.offsetTop:b0(-parseFloat(Ee))),G(r.offsetWidth),K(r.offsetHeight);const{borderTopLeftRadius:ke,borderTopRightRadius:Ae,borderBottomLeftRadius:Ye,borderBottomRightRadius:He}=oe;w([ke,Ae,He,Ye].map(Le=>b0(parseFloat(Le))))}if(L.useEffect(()=>{if(r){const oe=Qo(()=>{J(),O(!0)});let le;return typeof ResizeObserver<"u"&&(le=new ResizeObserver(J),le.observe(r)),()=>{Qo.cancel(oe),le==null||le.disconnect()}}},[]),!j)return null;const ne=(a==="Checkbox"||a==="Radio")&&(r==null?void 0:r.classList.contains(Vx));return L.createElement(wf,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(oe,le)=>{var be;if(le.deadline||le.propertyName==="opacity"){const Ee=(be=l.current)===null||be===void 0?void 0:be.parentElement;_M(Ee).then(()=>{Ee==null||Ee.remove()})}return!1}},(oe,le)=>{let{className:be}=oe;return L.createElement("div",{ref:$u(l,le),className:$t(t,{"wave-quick":ne},be),style:$})})},uB=(e,t)=>{var r;const{component:a}=t;if(a==="Checkbox"&&!(!((r=e.querySelector("input"))===null||r===void 0)&&r.checked))return;const l=document.createElement("div");l.style.position="absolute",l.style.left="0px",l.style.top="0px",e==null||e.insertBefore(l,e==null?void 0:e.firstChild),vM(L.createElement(cB,Object.assign({},t,{target:e})),l)},dB=(e,t,r)=>{const{wave:a}=L.useContext(li),[,l,h]=_a(),f=sf(C=>{const I=e.current;if(a!=null&&a.disabled||!I)return;const k=I.querySelector(`.${Vx}`)||I,{showEffect:A}=a||{};(A||uB)(k,{className:t,token:l,component:r,event:C,hashId:h})}),u=L.useRef();return C=>{Qo.cancel(u.current),u.current=Qo(()=>{f(C)})}},xM=e=>{const{children:t,disabled:r,component:a}=e,{getPrefixCls:l}=L.useContext(li),h=L.useRef(null),f=l("wave"),[,u]=aB(f),w=dB(h,$t(f,u),a);if(rt.useEffect(()=>{const I=h.current;if(!I||I.nodeType!==1||r)return;const k=A=>{!iB(A.target)||!I.getAttribute||I.getAttribute("disabled")||I.disabled||I.className.includes("disabled")||I.className.includes("-leave")||w(A)};return I.addEventListener("click",k,!0),()=>{I.removeEventListener("click",k,!0)}},[r]),!rt.isValidElement(t))return t??null;const C=Tx(t)?$u(t.ref,h):h;return pM(t,{ref:C})},Ux=e=>{const t=rt.useContext(Ru);return rt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},bM=L.createContext(null),wM=(e,t)=>{const r=L.useContext(bM),a=L.useMemo(()=>{if(!r)return"";const{compactDirection:l,isFirstItem:h,isLastItem:f}=r,u=l==="vertical"?"-vertical-":"-";return $t(`${e}-compact${u}item`,{[`${e}-compact${u}first-item`]:h,[`${e}-compact${u}last-item`]:f,[`${e}-compact${u}item-rtl`]:t==="rtl"})},[e,t,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:a}},i1=e=>{let{children:t}=e;return L.createElement(bM.Provider,{value:null},t)};var hB=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const SM=L.createContext(void 0),fB=e=>{const{getPrefixCls:t,direction:r}=L.useContext(li),{prefixCls:a,size:l,className:h}=e,f=hB(e,["prefixCls","size","className"]),u=t("btn-group",a),[,,w]=_a();let C="";switch(l){case"large":C="lg";break;case"small":C="sm";break}const I=$t(u,{[`${u}-${C}`]:C,[`${u}-rtl`]:r==="rtl"},h,w);return L.createElement(SM.Provider,{value:l},L.createElement("div",Object.assign({},f,{className:I})))},sC=/^[\u4e00-\u9fa5]{2}$/,o1=sC.test.bind(sC);function CM(e){return e==="danger"?{danger:!0}:{type:e}}function lC(e){return typeof e=="string"}function w0(e){return e==="text"||e==="link"}function pB(e,t){if(e==null)return;const r=t?" ":"";return typeof e!="string"&&typeof e!="number"&&lC(e.type)&&o1(e.props.children)?pM(e,{children:e.props.children.split("").join(r)}):lC(e)?o1(e)?rt.createElement("span",null,e.split("").join(r)):rt.createElement("span",null,e):NF(e)?rt.createElement("span",null,e):e}function mB(e,t){let r=!1;const a=[];return rt.Children.forEach(e,l=>{const h=typeof l,f=h==="string"||h==="number";if(r&&f){const u=a.length-1,w=a[u];a[u]=`${w}${l}`}else a.push(l);r=f}),rt.Children.map(a,l=>pB(l,t))}const EM=L.forwardRef((e,t)=>{const{className:r,style:a,children:l,prefixCls:h}=e,f=$t(`${h}-icon`,r);return rt.createElement("span",{ref:t,className:f,style:a},l)}),cC=L.forwardRef((e,t)=>{const{prefixCls:r,className:a,style:l,iconClassName:h,iconPosition:f="start"}=e,u=$t(a,{[`${r}-loading-icon-end`]:f==="end",[`${r}-loading-icon`]:f==="start"});return rt.createElement(EM,{prefixCls:r,className:u,style:l,ref:t},rt.createElement(HF,{className:h}))}),S0=()=>({width:0,opacity:0,transform:"scale(0)"}),C0=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),gB=e=>{const{prefixCls:t,loading:r,existIcon:a,className:l,style:h,iconPosition:f}=e,u=!!r;return a?rt.createElement(cC,{prefixCls:t,className:l,style:h,iconPosition:f}):rt.createElement(wf,{visible:u,motionName:`${t}-loading-icon-motion`,motionLeave:u,removeOnLeave:!0,onAppearStart:S0,onAppearActive:C0,onEnterStart:S0,onEnterActive:C0,onLeaveStart:C0,onLeaveActive:S0},(w,C)=>{let{className:I,style:k}=w;return rt.createElement(cC,{prefixCls:t,className:l,style:Object.assign(Object.assign({},h),k),ref:C,iconClassName:I,iconPosition:f})})},uC=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),yB=e=>{const{componentCls:t,fontSize:r,lineWidth:a,groupBorderColor:l,colorErrorHover:h}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(a).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:r}},uC(`${t}-primary`,l),uC(`${t}-danger`,h)]}},TM=e=>{const{paddingInline:t,onlyIconSize:r,paddingBlock:a}=e;return Po(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:a,buttonIconOnlyFontSize:r})},IM=e=>{var t,r,a,l,h,f;const u=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,w=(r=e.contentFontSizeSM)!==null&&r!==void 0?r:e.fontSize,C=(a=e.contentFontSizeLG)!==null&&a!==void 0?a:e.fontSizeLG,I=(l=e.contentLineHeight)!==null&&l!==void 0?l:zm(u),k=(h=e.contentLineHeightSM)!==null&&h!==void 0?h:zm(w),A=(f=e.contentLineHeightLG)!==null&&f!==void 0?f:zm(C);return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,contentFontSize:u,contentFontSizeSM:w,contentFontSizeLG:C,contentLineHeight:I,contentLineHeightSM:k,contentLineHeightLG:A,paddingBlock:Math.max((e.controlHeight-u*I)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-w*k)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-C*A)/2-e.lineWidth,0)}},vB=e=>{const{componentCls:t,iconCls:r,fontWeight:a}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${_t(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0,"&-end":{marginInlineStart:e.marginXS}},[`> ${r} + span, > span + ${r}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS},[`&${t}-loading-icon-end`]:{marginInlineStart:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},WP(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${t}-compact-item`]:{flex:"none"}}}},Qa=(e,t,r)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":r}}),_B=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),xB=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),bB=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),lf=(e,t,r,a,l,h,f,u)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:t,borderColor:a||void 0,boxShadow:"none"},Qa(e,Object.assign({background:t},f),Object.assign({background:t},u))),{"&:disabled":{cursor:"not-allowed",color:l||void 0,borderColor:h||void 0}})}),Hx=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},bB(e))}),PM=e=>Object.assign({},Hx(e)),_g=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),MM=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PM(e)),{background:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),Qa(e.componentCls,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),lf(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Qa(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),lf(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),Hx(e))}),wB=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},PM(e)),{color:e.primaryColor,background:e.colorPrimary,boxShadow:e.primaryShadow}),Qa(e.componentCls,{color:e.colorTextLightSolid,background:e.colorPrimaryHover},{color:e.colorTextLightSolid,background:e.colorPrimaryActive})),lf(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},Qa(e.componentCls,{background:e.colorErrorHover},{background:e.colorErrorActive})),lf(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Hx(e))}),SB=e=>Object.assign(Object.assign({},MM(e)),{borderStyle:"dashed"}),CB=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Qa(e.componentCls,{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),_g(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Qa(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),_g(e))}),EB=e=>Object.assign(Object.assign(Object.assign({},Qa(e.componentCls,{color:e.colorText,background:e.textHoverBg},{color:e.colorText,background:e.colorBgTextActive})),_g(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},_g(e)),Qa(e.componentCls,{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive}))}),TB=e=>{const{componentCls:t}=e;return{[`${t}-default`]:MM(e),[`${t}-primary`]:wB(e),[`${t}-dashed`]:SB(e),[`${t}-link`]:CB(e),[`${t}-text`]:EB(e),[`${t}-ghost`]:lf(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},Wx=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:a,fontSize:l,lineHeight:h,borderRadius:f,buttonPaddingHorizontal:u,iconCls:w,buttonPaddingVertical:C}=e,I=`${r}-icon-only`;return[{[`${t}`]:{fontSize:l,lineHeight:h,height:a,padding:`${_t(C)} ${_t(u)}`,borderRadius:f,[`&${I}`]:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${r}-round`]:{width:"auto"},[w]:{fontSize:e.buttonIconOnlyFontSize}},[`&${r}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${r}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${r}${r}-circle${t}`]:_B(e)},{[`${r}${r}-round${t}`]:xB(e)}]},IB=e=>{const t=Po(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return Wx(t,e.componentCls)},PB=e=>{const t=Po(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return Wx(t,`${e.componentCls}-sm`)},MB=e=>{const t=Po(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return Wx(t,`${e.componentCls}-lg`)},kB=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},AB=bf("Button",e=>{const t=TM(e);return[vB(t),IB(t),PB(t),MB(t),kB(t),TB(t),yB(t)]},IM,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function RB(e,t,r){const{focusElCls:a,focus:l,borderElCls:h}=r,f=h?"> *":"",u=["hover",l?"focus":null,"active"].filter(Boolean).map(w=>`&:${w} ${f}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[u]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${f}`]:{zIndex:0}})}}function zB(e,t,r){const{borderElCls:a}=r,l=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${l}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${l}, &${e}-sm ${l}, &${e}-lg ${l}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${l}, &${e}-sm ${l}, &${e}-lg ${l}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Gx(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=e,a=`${r}-compact`;return{[a]:Object.assign(Object.assign({},RB(e,a,t)),zB(r,a,t))}}function LB(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function OB(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function DB(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},LB(e,t)),OB(e.componentCls,t))}}const FB=e=>{const{componentCls:t,calc:r}=e;return{[t]:{[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:r(e.lineWidth).mul(-1).equal(),insetInlineStart:r(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${_t(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:r(e.lineWidth).mul(-1).equal(),insetInlineStart:r(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${_t(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},BB=XP(["Button","compact"],e=>{const t=TM(e);return[Gx(t),DB(t),FB(t)]},IM);var $B=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function NB(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const jB=rt.forwardRef((e,t)=>{var r,a,l;const{loading:h=!1,prefixCls:f,type:u,danger:w,shape:C="default",size:I,styles:k,disabled:A,className:q,rootClassName:G,children:Z,icon:K,iconPosition:j="start",ghost:O=!1,block:$=!1,htmlType:J="button",classNames:ne,style:oe={},autoInsertSpace:le}=e,be=$B(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Ee=u||"default",{getPrefixCls:ke,direction:Ae,button:Ye}=L.useContext(li),He=(r=le??(Ye==null?void 0:Ye.autoInsertSpace))!==null&&r!==void 0?r:!0,Le=ke("btn",f),[Je,Oe,Pe]=AB(Le),xe=L.useContext(cy),De=A??xe,$e=L.useContext(SM),Ve=L.useMemo(()=>NB(h),[h]),[Ze,gt]=L.useState(Ve.loading),[Ct,Ht]=L.useState(!1),Nt=$u(t,L.createRef()),zt=L.Children.count(Z)===1&&!K&&!w0(Ee);L.useEffect(()=>{let yr=null;Ve.delay>0?yr=setTimeout(()=>{yr=null,gt(!0)},Ve.delay):gt(Ve.loading);function Ur(){yr&&(clearTimeout(yr),yr=null)}return Ur},[Ve]),L.useEffect(()=>{if(!Nt||!Nt.current||!He)return;const yr=Nt.current.textContent;zt&&o1(yr)?Ct||Ht(!0):Ct&&Ht(!1)},[Nt]);const Lr=yr=>{const{onClick:Ur}=e;if(Ze||De){yr.preventDefault();return}Ur==null||Ur(yr)},{compactSize:Yr,compactItemClassnames:xr}=wM(Le,Ae),Cr={large:"lg",small:"sm",middle:void 0},Xt=Ux(yr=>{var Ur,Qe;return(Qe=(Ur=I??Yr)!==null&&Ur!==void 0?Ur:$e)!==null&&Qe!==void 0?Qe:yr}),er=Xt&&Cr[Xt]||"",br=Ze?"loading":K,ze=b6(be,["navigate"]),kr=$t(Le,Oe,Pe,{[`${Le}-${C}`]:C!=="default"&&C,[`${Le}-${Ee}`]:Ee,[`${Le}-${er}`]:er,[`${Le}-icon-only`]:!Z&&Z!==0&&!!br,[`${Le}-background-ghost`]:O&&!w0(Ee),[`${Le}-loading`]:Ze,[`${Le}-two-chinese-chars`]:Ct&&He&&!Ze,[`${Le}-block`]:$,[`${Le}-dangerous`]:!!w,[`${Le}-rtl`]:Ae==="rtl"},xr,q,G,Ye==null?void 0:Ye.className),Sn=Object.assign(Object.assign({},Ye==null?void 0:Ye.style),oe),Et=j==="end"&&Z&&Z!==0&&br,Mt=$t(ne==null?void 0:ne.icon,(a=Ye==null?void 0:Ye.classNames)===null||a===void 0?void 0:a.icon,{[`${Le}-icon-end`]:Et}),sr=Object.assign(Object.assign({},(k==null?void 0:k.icon)||{}),((l=Ye==null?void 0:Ye.styles)===null||l===void 0?void 0:l.icon)||{}),ln=K&&!Ze?rt.createElement(EM,{prefixCls:Le,className:Mt,style:sr},K):rt.createElement(gB,{existIcon:!!K,prefixCls:Le,loading:!!Ze,iconPosition:j}),ci=Z||Z===0?mB(Z,zt&&He):null,ui=(yr,Ur)=>j==="start"?rt.createElement(rt.Fragment,null,yr,Ur):rt.createElement(rt.Fragment,null,Ur,yr);if(ze.href!==void 0)return Je(rt.createElement("a",Object.assign({},ze,{className:$t(kr,{[`${Le}-disabled`]:De}),href:De?void 0:ze.href,style:Sn,onClick:Lr,ref:Nt,tabIndex:De?-1:0}),ui(ln,ci)));let yn=rt.createElement("button",Object.assign({},be,{type:J,className:kr,style:Sn,onClick:Lr,disabled:De,ref:Nt}),ui(ln,ci),!!xr&&rt.createElement(BB,{key:"compact",prefixCls:Le}));return w0(Ee)||(yn=rt.createElement(xM,{component:"Button",disabled:!!Ze},yn)),Je(yn)}),Hu=jB;Hu.Group=fB;Hu.__ANT_BUTTON=!0;function dC(e){return!!(e&&e.then)}const kM=e=>{const{type:t,children:r,prefixCls:a,buttonProps:l,close:h,autoFocus:f,emitEvent:u,isSilent:w,quitOnNullishReturnValue:C,actionFn:I}=e,k=L.useRef(!1),A=L.useRef(null),[q,G]=ql(!1),Z=function(){h==null||h.apply(void 0,arguments)};L.useEffect(()=>{let O=null;return f&&(O=setTimeout(()=>{var $;($=A.current)===null||$===void 0||$.focus()})),()=>{O&&clearTimeout(O)}},[]);const K=O=>{dC(O)&&(G(!0),O.then(function(){G(!1,!0),Z.apply(void 0,arguments),k.current=!1},$=>{if(G(!1,!0),k.current=!1,!(w!=null&&w()))return Promise.reject($)}))},j=O=>{if(k.current)return;if(k.current=!0,!I){Z();return}let $;if(u){if($=I(O),C&&!dC($)){k.current=!1,Z(O);return}}else if(I.length)$=I(h),k.current=!1;else if($=I(),!$){Z();return}K($)};return L.createElement(Hu,Object.assign({},CM(t),{onClick:j,loading:q,prefixCls:a},l,{ref:A}),r)},Ef=rt.createContext({}),{Provider:AM}=Ef,hC=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:r,isSilent:a,mergedOkCancel:l,rootPrefixCls:h,close:f,onCancel:u,onConfirm:w}=L.useContext(Ef);return l?rt.createElement(kM,{isSilent:a,actionFn:u,close:function(){f==null||f.apply(void 0,arguments),w==null||w(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${h}-btn`},r):null},fC=()=>{const{autoFocusButton:e,close:t,isSilent:r,okButtonProps:a,rootPrefixCls:l,okTextLocale:h,okType:f,onConfirm:u,onOk:w}=L.useContext(Ef);return rt.createElement(kM,{isSilent:r,type:f||"primary",actionFn:w,close:function(){t==null||t.apply(void 0,arguments),u==null||u(!0)},autoFocus:e==="ok",buttonProps:a,prefixCls:`${l}-btn`},h)};var RM=L.createContext(null),pC=[];function VB(e,t){var r=L.useState(function(){if(!$i())return null;var G=document.createElement("div");return G}),a=Tt(r,1),l=a[0],h=L.useRef(!1),f=L.useContext(RM),u=L.useState(pC),w=Tt(u,2),C=w[0],I=w[1],k=f||(h.current?void 0:function(G){I(function(Z){var K=[G].concat(Rt(Z));return K})});function A(){l.parentElement||document.body.appendChild(l),h.current=!0}function q(){var G;(G=l.parentElement)===null||G===void 0||G.removeChild(l),h.current=!1}return ku(function(){return e?f?f(A):A():q(),q},[e]),ku(function(){C.length&&(C.forEach(function(G){return G()}),I(pC))},[C]),[l,k]}function UB(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=t;var a=r.style;a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll";var l,h;if(e){var f=getComputedStyle(e);a.scrollbarColor=f.scrollbarColor,a.scrollbarWidth=f.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),w=parseInt(u.width,10),C=parseInt(u.height,10);try{var I=w?"width: ".concat(u.width,";"):"",k=C?"height: ".concat(u.height,";"):"";Ga(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(I,`
`).concat(k,`
}`),t)}catch(G){console.error(G),l=w,h=C}}document.body.appendChild(r);var A=e&&l&&!isNaN(l)?l:r.offsetWidth-r.clientWidth,q=e&&h&&!isNaN(h)?h:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),rf(t),{width:A,height:q}}function HB(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:UB(e)}function WB(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var GB="rc-util-locker-".concat(Date.now()),mC=0;function qB(e){var t=!!e,r=L.useState(function(){return mC+=1,"".concat(GB,"_").concat(mC)}),a=Tt(r,1),l=a[0];ku(function(){if(t){var h=HB(document.body).width,f=WB();Ga(`
html body {
  overflow-y: hidden;
  `.concat(f?"width: calc(100% - ".concat(h,"px);"):"",`
}`),l)}else rf(l);return function(){rf(l)}},[t,l])}var ZB=!1;function KB(e){return ZB}var gC=function(t){return t===!1?!1:!$i()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},XB=L.forwardRef(function(e,t){var r=e.open,a=e.autoLock,l=e.getContainer;e.debug;var h=e.autoDestroy,f=h===void 0?!0:h,u=e.children,w=L.useState(r),C=Tt(w,2),I=C[0],k=C[1],A=I||r;L.useEffect(function(){(f||r)&&k(r)},[r,f]);var q=L.useState(function(){return gC(l)}),G=Tt(q,2),Z=G[0],K=G[1];L.useEffect(function(){var Ae=gC(l);K(Ae??null)});var j=VB(A&&!Z),O=Tt(j,2),$=O[0],J=O[1],ne=Z??$;qB(a&&r&&$i()&&(ne===$||ne===document.body));var oe=null;if(u&&Tx(u)&&t){var le=u;oe=le.ref}var be=JI(oe,t);if(!A||!$i()||Z===void 0)return null;var Ee=ne===!1||KB(),ke=u;return t&&(ke=L.cloneElement(u,{ref:be})),L.createElement(RM.Provider,{value:J},Ee?ke:Fu.createPortal(ke,ne))}),zM=L.createContext({});function YB(){var e=Xe({},Kl);return e.useId}var yC=0,vC=YB();const JB=vC?function(t){var r=vC();return t||r}:function(t){var r=L.useState("ssr-id"),a=Tt(r,2),l=a[0],h=a[1];return L.useEffect(function(){var f=yC;yC+=1,h("rc_unique_".concat(f))},[]),t||l};function _C(e,t,r){var a=t;return!a&&r&&(a="".concat(e,"-").concat(r)),a}function xC(e,t){var r=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var l=e.document;r=l.documentElement[a],typeof r!="number"&&(r=l.body[a])}return r}function QB(e){var t=e.getBoundingClientRect(),r={left:t.left,top:t.top},a=e.ownerDocument,l=a.defaultView||a.parentWindow;return r.left+=xC(l),r.top+=xC(l,!0),r}const e8=L.memo(function(e){var t=e.children;return t},function(e,t){var r=t.shouldUpdate;return!r});var bC={width:0,height:0,overflow:"hidden",outline:"none"},t8={outline:"none"},LM=rt.forwardRef(function(e,t){var r=e.prefixCls,a=e.className,l=e.style,h=e.title,f=e.ariaId,u=e.footer,w=e.closable,C=e.closeIcon,I=e.onClose,k=e.children,A=e.bodyStyle,q=e.bodyProps,G=e.modalRender,Z=e.onMouseDown,K=e.onMouseUp,j=e.holderRef,O=e.visible,$=e.forceRender,J=e.width,ne=e.height,oe=e.classNames,le=e.styles,be=rt.useContext(zM),Ee=be.panel,ke=JI(j,Ee),Ae=L.useRef(),Ye=L.useRef(),He=L.useRef();rt.useImperativeHandle(t,function(){return{focus:function(){var Ze;(Ze=He.current)===null||Ze===void 0||Ze.focus()},changeActive:function(Ze){var gt=document,Ct=gt.activeElement;Ze&&Ct===Ye.current?Ae.current.focus():!Ze&&Ct===Ae.current&&Ye.current.focus()}}});var Le={};J!==void 0&&(Le.width=J),ne!==void 0&&(Le.height=ne);var Je;u&&(Je=rt.createElement("div",{className:$t("".concat(r,"-footer"),oe==null?void 0:oe.footer),style:Xe({},le==null?void 0:le.footer)},u));var Oe;h&&(Oe=rt.createElement("div",{className:$t("".concat(r,"-header"),oe==null?void 0:oe.header),style:Xe({},le==null?void 0:le.header)},rt.createElement("div",{className:"".concat(r,"-title"),id:f},h)));var Pe=L.useMemo(function(){return Qt(w)==="object"&&w!==null?w:w?{closeIcon:C??rt.createElement("span",{className:"".concat(r,"-close-x")})}:{}},[w,C]),xe=dy(Pe,!0),De;w&&(De=rt.createElement("button",pr({type:"button",onClick:I,"aria-label":"Close"},xe,{className:"".concat(r,"-close")}),Pe.closeIcon));var $e=rt.createElement("div",{className:$t("".concat(r,"-content"),oe==null?void 0:oe.content),style:le==null?void 0:le.content},De,Oe,rt.createElement("div",pr({className:$t("".concat(r,"-body"),oe==null?void 0:oe.body),style:Xe(Xe({},A),le==null?void 0:le.body)},q),k),Je);return rt.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":h?f:null,"aria-modal":"true",ref:ke,style:Xe(Xe({},l),Le),className:$t(r,a),onMouseDown:Z,onMouseUp:K},rt.createElement("div",{tabIndex:0,ref:Ae,style:bC,"aria-hidden":"true"}),rt.createElement("div",{ref:He,tabIndex:-1,style:t8},rt.createElement(e8,{shouldUpdate:O||$},G?G($e):$e)),rt.createElement("div",{tabIndex:0,ref:Ye,style:bC,"aria-hidden":"true"}))}),OM=L.forwardRef(function(e,t){var r=e.prefixCls,a=e.title,l=e.style,h=e.className,f=e.visible,u=e.forceRender,w=e.destroyOnClose,C=e.motionName,I=e.ariaId,k=e.onVisibleChanged,A=e.mousePosition,q=L.useRef(),G=L.useState(),Z=Tt(G,2),K=Z[0],j=Z[1],O={};K&&(O.transformOrigin=K);function $(){var J=QB(q.current);j(A?"".concat(A.x-J.left,"px ").concat(A.y-J.top,"px"):"")}return L.createElement(wf,{visible:f,onVisibleChanged:k,onAppearPrepare:$,onEnterPrepare:$,forceRender:u,motionName:C,removeOnLeave:w,ref:q},function(J,ne){var oe=J.className,le=J.style;return L.createElement(LM,pr({},e,{ref:t,title:a,ariaId:I,prefixCls:r,holderRef:ne,style:Xe(Xe(Xe({},le),l),O),className:$t(h,oe)}))})});OM.displayName="Content";function r8(e){var t=e.prefixCls,r=e.style,a=e.visible,l=e.maskProps,h=e.motionName,f=e.className;return L.createElement(wf,{key:"mask",visible:a,motionName:h,leavedClassName:"".concat(t,"-mask-hidden")},function(u,w){var C=u.className,I=u.style;return L.createElement("div",pr({ref:w,style:Xe(Xe({},I),r),className:$t("".concat(t,"-mask"),C,f)},l))})}function n8(e){var t=e.prefixCls,r=t===void 0?"rc-dialog":t,a=e.zIndex,l=e.visible,h=l===void 0?!1:l,f=e.keyboard,u=f===void 0?!0:f,w=e.focusTriggerAfterClose,C=w===void 0?!0:w,I=e.wrapStyle,k=e.wrapClassName,A=e.wrapProps,q=e.onClose,G=e.afterOpenChange,Z=e.afterClose,K=e.transitionName,j=e.animation,O=e.closable,$=O===void 0?!0:O,J=e.mask,ne=J===void 0?!0:J,oe=e.maskTransitionName,le=e.maskAnimation,be=e.maskClosable,Ee=be===void 0?!0:be,ke=e.maskStyle,Ae=e.maskProps,Ye=e.rootClassName,He=e.classNames,Le=e.styles,Je=L.useRef(),Oe=L.useRef(),Pe=L.useRef(),xe=L.useState(h),De=Tt(xe,2),$e=De[0],Ve=De[1],Ze=JB();function gt(){O_(Oe.current,document.activeElement)||(Je.current=document.activeElement)}function Ct(){if(!O_(Oe.current,document.activeElement)){var Xt;(Xt=Pe.current)===null||Xt===void 0||Xt.focus()}}function Ht(Xt){if(Xt)Ct();else{if(Ve(!1),ne&&Je.current&&C){try{Je.current.focus({preventScroll:!0})}catch{}Je.current=null}$e&&(Z==null||Z())}G==null||G(Xt)}function Ut(Xt){q==null||q(Xt)}var Nt=L.useRef(!1),zt=L.useRef(),Lr=function(){clearTimeout(zt.current),Nt.current=!0},Yr=function(){zt.current=setTimeout(function(){Nt.current=!1})},xr=null;Ee&&(xr=function(er){Nt.current?Nt.current=!1:Oe.current===er.target&&Ut(er)});function Cr(Xt){if(u&&Xt.keyCode===Bt.ESC){Xt.stopPropagation(),Ut(Xt);return}h&&Xt.keyCode===Bt.TAB&&Pe.current.changeActive(!Xt.shiftKey)}return L.useEffect(function(){h&&(Ve(!0),gt())},[h]),L.useEffect(function(){return function(){clearTimeout(zt.current)}},[]),L.createElement("div",pr({className:$t("".concat(r,"-root"),Ye)},dy(e,{data:!0})),L.createElement(r8,{prefixCls:r,visible:ne&&h,motionName:_C(r,oe,le),style:Xe(Xe({zIndex:a},ke),Le==null?void 0:Le.mask),maskProps:Ae,className:He==null?void 0:He.mask}),L.createElement("div",pr({tabIndex:-1,onKeyDown:Cr,className:$t("".concat(r,"-wrap"),k,He==null?void 0:He.wrapper),ref:Oe,onClick:xr,style:Xe(Xe(Xe({zIndex:a},I),Le==null?void 0:Le.wrapper),{},{display:$e?null:"none"})},A),L.createElement(OM,pr({},e,{onMouseDown:Lr,onMouseUp:Yr,ref:Pe,closable:$,ariaId:Ze,prefixCls:r,visible:h&&$e,onClose:Ut,onVisibleChanged:Ht,motionName:_C(r,K,j)}))))}var DM=function(t){var r=t.visible,a=t.getContainer,l=t.forceRender,h=t.destroyOnClose,f=h===void 0?!1:h,u=t.afterClose,w=t.panelRef,C=L.useState(r),I=Tt(C,2),k=I[0],A=I[1],q=L.useMemo(function(){return{panel:w}},[w]);return L.useEffect(function(){r&&A(!0)},[r]),!l&&f&&!k?null:L.createElement(zM.Provider,{value:q},L.createElement(XB,{open:r||l||k,autoDestroy:!1,getContainer:a,autoLock:r||k},L.createElement(n8,pr({},t,{destroyOnClose:f,afterClose:function(){u==null||u(),A(!1)}}))))};DM.displayName="Dialog";function wC(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function SC(e){const{closable:t,closeIcon:r}=e||{};return rt.useMemo(()=>{if(!t&&(t===!1||r===!1||r===null))return!1;if(t===void 0&&r===void 0)return null;let a={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return t&&typeof t=="object"&&(a=Object.assign(Object.assign({},a),t)),a},[t,r])}function CC(){const e={};for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return r.forEach(l=>{l&&Object.keys(l).forEach(h=>{l[h]!==void 0&&(e[h]=l[h])})}),e}const i8={};function o8(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i8;const a=SC(e),l=SC(t),h=rt.useMemo(()=>Object.assign({closeIcon:rt.createElement(jx,null)},r),[r]),f=rt.useMemo(()=>a===!1?!1:a?CC(h,l,a):l===!1?!1:l?CC(h,l):h.closable?h:!1,[a,l,h]);return rt.useMemo(()=>{if(f===!1)return[!1,null];const{closeIconRender:u}=h,{closeIcon:w}=f;let C=w;if(C!=null){u&&(C=u(w));const I=dy(f,!0);Object.keys(I).length&&(C=rt.isValidElement(C)?rt.cloneElement(C,I):rt.createElement("span",Object.assign({},I),C))}return[!0,C]},[f,h])}const a8=()=>$i()&&window.document.documentElement;var $l="RC_FORM_INTERNAL_HOOKS",_r=function(){Bi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},zu=L.createContext({getFieldValue:_r,getFieldsValue:_r,getFieldError:_r,getFieldWarning:_r,getFieldsError:_r,isFieldsTouched:_r,isFieldTouched:_r,isFieldValidating:_r,isFieldsValidating:_r,resetFields:_r,setFields:_r,setFieldValue:_r,setFieldsValue:_r,validateFields:_r,submit:_r,getInternalHooks:function(){return _r(),{dispatch:_r,initEntityValue:_r,registerField:_r,useSubscribe:_r,setInitialValues:_r,destroyForm:_r,setCallbacks:_r,registerWatch:_r,getFields:_r,setValidateMessages:_r,setPreserve:_r,getInitialValue:_r}}}),xg=L.createContext(null);function a1(e){return e==null?[]:Array.isArray(e)?e:[e]}function s8(e){return e&&!!e._init}function s1(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var l1=s1();function l8(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function c8(e,t,r){if(ny())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var l=new(e.bind.apply(e,a));return r&&ef(l,r.prototype),l}function c1(e){var t=typeof Map=="function"?new Map:void 0;return c1=function(a){if(a===null||!l8(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(a))return t.get(a);t.set(a,l)}function l(){return c8(a,arguments,rc(this).constructor)}return l.prototype=Object.create(a.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),ef(l,a)},c1(e)}var u8=/%[sdj%]/g,d8=function(){};function u1(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var a=r.field;t[a]=t[a]||[],t[a].push(r)}),t}function ro(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var l=0,h=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var f=e.replace(u8,function(u){if(u==="%%")return"%";if(l>=h)return u;switch(u){case"%s":return String(r[l++]);case"%d":return Number(r[l++]);case"%j":try{return JSON.stringify(r[l++])}catch{return"[Circular]"}break;default:return u}});return f}return e}function h8(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Pn(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||h8(t)&&typeof e=="string"&&!e)}function f8(e,t,r){var a=[],l=0,h=e.length;function f(u){a.push.apply(a,Rt(u||[])),l++,l===h&&r(a)}e.forEach(function(u){t(u,f)})}function EC(e,t,r){var a=0,l=e.length;function h(f){if(f&&f.length){r(f);return}var u=a;a=a+1,u<l?t(e[u],h):r([])}h([])}function p8(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,Rt(e[r]||[]))}),t}var TC=function(e){Nu(r,e);var t=iy(r);function r(a,l){var h;return ai(this,r),h=t.call(this,"Async Validation Error"),Me(ir(h),"errors",void 0),Me(ir(h),"fields",void 0),h.errors=a,h.fields=l,h}return si(r)}(c1(Error));function m8(e,t,r,a,l){if(t.first){var h=new Promise(function(A,q){var G=function(j){return a(j),j.length?q(new TC(j,u1(j))):A(l)},Z=p8(e);EC(Z,r,G)});return h.catch(function(A){return A}),h}var f=t.firstFields===!0?Object.keys(e):t.firstFields||[],u=Object.keys(e),w=u.length,C=0,I=[],k=new Promise(function(A,q){var G=function(K){if(I.push.apply(I,K),C++,C===w)return a(I),I.length?q(new TC(I,u1(I))):A(l)};u.length||(a(I),A(l)),u.forEach(function(Z){var K=e[Z];f.indexOf(Z)!==-1?EC(K,r,G):f8(K,r,G)})});return k.catch(function(A){return A}),k}function g8(e){return!!(e&&e.message!==void 0)}function y8(e,t){for(var r=e,a=0;a<t.length;a++){if(r==null)return r;r=r[t[a]]}return r}function IC(e,t){return function(r){var a;return e.fullFields?a=y8(t,e.fullFields):a=t[r.field||e.fullField],g8(r)?(r.field=r.field||e.fullField,r.fieldValue=a,r):{message:typeof r=="function"?r():r,fieldValue:a,field:r.field||e.fullField}}}function PC(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];Qt(a)==="object"&&Qt(e[r])==="object"?e[r]=Xe(Xe({},e[r]),a):e[r]=a}}return e}var Zc="enum",v8=function(t,r,a,l,h){t[Zc]=Array.isArray(t[Zc])?t[Zc]:[],t[Zc].indexOf(r)===-1&&l.push(ro(h.messages[Zc],t.fullField,t[Zc].join(", ")))},_8=function(t,r,a,l,h){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||l.push(ro(h.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var f=new RegExp(t.pattern);f.test(r)||l.push(ro(h.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},x8=function(t,r,a,l,h){var f=typeof t.len=="number",u=typeof t.min=="number",w=typeof t.max=="number",C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I=r,k=null,A=typeof r=="number",q=typeof r=="string",G=Array.isArray(r);if(A?k="number":q?k="string":G&&(k="array"),!k)return!1;G&&(I=r.length),q&&(I=r.replace(C,"_").length),f?I!==t.len&&l.push(ro(h.messages[k].len,t.fullField,t.len)):u&&!w&&I<t.min?l.push(ro(h.messages[k].min,t.fullField,t.min)):w&&!u&&I>t.max?l.push(ro(h.messages[k].max,t.fullField,t.max)):u&&w&&(I<t.min||I>t.max)&&l.push(ro(h.messages[k].range,t.fullField,t.min,t.max))},FM=function(t,r,a,l,h,f){t.required&&(!a.hasOwnProperty(t.field)||Pn(r,f||t.type))&&l.push(ro(h.messages.required,t.fullField))},hm;const b8=function(){if(hm)return hm;var e="[a-fA-F\\d:]",t=function(oe){return oe&&oe.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",l=["(?:".concat(a,":){7}(?:").concat(a,"|:)"),"(?:".concat(a,":){6}(?:").concat(r,"|:").concat(a,"|:)"),"(?:".concat(a,":){5}(?::").concat(r,"|(?::").concat(a,"){1,2}|:)"),"(?:".concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(r,"|(?::").concat(a,"){1,3}|:)"),"(?:".concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(r,"|(?::").concat(a,"){1,4}|:)"),"(?:".concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(r,"|(?::").concat(a,"){1,5}|:)"),"(?:".concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(r,"|(?::").concat(a,"){1,6}|:)"),"(?::(?:(?::".concat(a,"){0,5}:").concat(r,"|(?::").concat(a,"){1,7}|:))")],h="(?:%[0-9a-zA-Z]{1,})?",f="(?:".concat(l.join("|"),")").concat(h),u=new RegExp("(?:^".concat(r,"$)|(?:^").concat(f,"$)")),w=new RegExp("^".concat(r,"$")),C=new RegExp("^".concat(f,"$")),I=function(oe){return oe&&oe.exact?u:new RegExp("(?:".concat(t(oe)).concat(r).concat(t(oe),")|(?:").concat(t(oe)).concat(f).concat(t(oe),")"),"g")};I.v4=function(ne){return ne&&ne.exact?w:new RegExp("".concat(t(ne)).concat(r).concat(t(ne)),"g")},I.v6=function(ne){return ne&&ne.exact?C:new RegExp("".concat(t(ne)).concat(f).concat(t(ne)),"g")};var k="(?:(?:[a-z]+:)?//)",A="(?:\\S+(?::\\S*)?@)?",q=I.v4().source,G=I.v6().source,Z="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",K="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",j="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",O="(?::\\d{2,5})?",$='(?:[/?#][^\\s"]*)?',J="(?:".concat(k,"|www\\.)").concat(A,"(?:localhost|").concat(q,"|").concat(G,"|").concat(Z).concat(K).concat(j,")").concat(O).concat($);return hm=new RegExp("(?:^".concat(J,"$)"),"i"),hm};var MC={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},_h={integer:function(t){return _h.number(t)&&parseInt(t,10)===t},float:function(t){return _h.number(t)&&!_h.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return Qt(t)==="object"&&!_h.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(MC.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(b8())},hex:function(t){return typeof t=="string"&&!!t.match(MC.hex)}},w8=function(t,r,a,l,h){if(t.required&&r===void 0){FM(t,r,a,l,h);return}var f=["integer","float","array","regexp","object","method","email","number","date","url","hex"],u=t.type;f.indexOf(u)>-1?_h[u](r)||l.push(ro(h.messages.types[u],t.fullField,t.type)):u&&Qt(r)!==t.type&&l.push(ro(h.messages.types[u],t.fullField,t.type))},S8=function(t,r,a,l,h){(/^\s+$/.test(r)||r==="")&&l.push(ro(h.messages.whitespace,t.fullField))};const nr={required:FM,whitespace:S8,type:w8,range:x8,enum:v8,pattern:_8};var C8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h)}a(f)},E8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(r==null&&!t.required)return a();nr.required(t,r,l,f,h,"array"),r!=null&&(nr.type(t,r,l,f,h),nr.range(t,r,l,f,h))}a(f)},T8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&nr.type(t,r,l,f,h)}a(f)},I8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r,"date")&&!t.required)return a();if(nr.required(t,r,l,f,h),!Pn(r,"date")){var w;r instanceof Date?w=r:w=new Date(r),nr.type(t,w,l,f,h),w&&nr.range(t,w.getTime(),l,f,h)}}a(f)},P8="enum",M8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&nr[P8](t,r,l,f,h)}a(f)},k8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&(nr.type(t,r,l,f,h),nr.range(t,r,l,f,h))}a(f)},A8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&(nr.type(t,r,l,f,h),nr.range(t,r,l,f,h))}a(f)},R8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&nr.type(t,r,l,f,h)}a(f)},z8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(r===""&&(r=void 0),Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&(nr.type(t,r,l,f,h),nr.range(t,r,l,f,h))}a(f)},L8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),r!==void 0&&nr.type(t,r,l,f,h)}a(f)},O8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r,"string")&&!t.required)return a();nr.required(t,r,l,f,h),Pn(r,"string")||nr.pattern(t,r,l,f,h)}a(f)},D8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r)&&!t.required)return a();nr.required(t,r,l,f,h),Pn(r)||nr.type(t,r,l,f,h)}a(f)},F8=function(t,r,a,l,h){var f=[],u=Array.isArray(r)?"array":Qt(r);nr.required(t,r,l,f,h,u),a(f)},B8=function(t,r,a,l,h){var f=[],u=t.required||!t.required&&l.hasOwnProperty(t.field);if(u){if(Pn(r,"string")&&!t.required)return a();nr.required(t,r,l,f,h,"string"),Pn(r,"string")||(nr.type(t,r,l,f,h),nr.range(t,r,l,f,h),nr.pattern(t,r,l,f,h),t.whitespace===!0&&nr.whitespace(t,r,l,f,h))}a(f)},E0=function(t,r,a,l,h){var f=t.type,u=[],w=t.required||!t.required&&l.hasOwnProperty(t.field);if(w){if(Pn(r,f)&&!t.required)return a();nr.required(t,r,l,u,h,f),Pn(r,f)||nr.type(t,r,l,u,h)}a(u)};const Rh={string:B8,method:R8,number:z8,boolean:T8,regexp:D8,integer:A8,float:k8,array:E8,object:L8,enum:M8,pattern:O8,date:I8,url:E0,hex:E0,email:E0,required:F8,any:C8};var Tf=function(){function e(t){ai(this,e),Me(this,"rules",null),Me(this,"_messages",l1),this.define(t)}return si(e,[{key:"define",value:function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Qt(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(l){var h=r[l];a.rules[l]=Array.isArray(h)?h:[h]})}},{key:"messages",value:function(r){return r&&(this._messages=PC(s1(),r)),this._messages}},{key:"validate",value:function(r){var a=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},f=r,u=l,w=h;if(typeof u=="function"&&(w=u,u={}),!this.rules||Object.keys(this.rules).length===0)return w&&w(null,f),Promise.resolve(f);function C(G){var Z=[],K={};function j($){if(Array.isArray($)){var J;Z=(J=Z).concat.apply(J,Rt($))}else Z.push($)}for(var O=0;O<G.length;O++)j(G[O]);Z.length?(K=u1(Z),w(Z,K)):w(null,f)}if(u.messages){var I=this.messages();I===l1&&(I=s1()),PC(I,u.messages),u.messages=I}else u.messages=this.messages();var k={},A=u.keys||Object.keys(this.rules);A.forEach(function(G){var Z=a.rules[G],K=f[G];Z.forEach(function(j){var O=j;typeof O.transform=="function"&&(f===r&&(f=Xe({},f)),K=f[G]=O.transform(K),K!=null&&(O.type=O.type||(Array.isArray(K)?"array":Qt(K)))),typeof O=="function"?O={validator:O}:O=Xe({},O),O.validator=a.getValidationMethod(O),O.validator&&(O.field=G,O.fullField=O.fullField||G,O.type=a.getType(O),k[G]=k[G]||[],k[G].push({rule:O,value:K,source:f,field:G}))})});var q={};return m8(k,u,function(G,Z){var K=G.rule,j=(K.type==="object"||K.type==="array")&&(Qt(K.fields)==="object"||Qt(K.defaultField)==="object");j=j&&(K.required||!K.required&&G.value),K.field=G.field;function O(le,be){return Xe(Xe({},be),{},{fullField:"".concat(K.fullField,".").concat(le),fullFields:K.fullFields?[].concat(Rt(K.fullFields),[le]):[le]})}function $(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],be=Array.isArray(le)?le:[le];!u.suppressWarning&&be.length&&e.warning("async-validator:",be),be.length&&K.message!==void 0&&(be=[].concat(K.message));var Ee=be.map(IC(K,f));if(u.first&&Ee.length)return q[K.field]=1,Z(Ee);if(!j)Z(Ee);else{if(K.required&&!G.value)return K.message!==void 0?Ee=[].concat(K.message).map(IC(K,f)):u.error&&(Ee=[u.error(K,ro(u.messages.required,K.field))]),Z(Ee);var ke={};K.defaultField&&Object.keys(G.value).map(function(He){ke[He]=K.defaultField}),ke=Xe(Xe({},ke),G.rule.fields);var Ae={};Object.keys(ke).forEach(function(He){var Le=ke[He],Je=Array.isArray(Le)?Le:[Le];Ae[He]=Je.map(O.bind(null,He))});var Ye=new e(Ae);Ye.messages(u.messages),G.rule.options&&(G.rule.options.messages=u.messages,G.rule.options.error=u.error),Ye.validate(G.value,G.rule.options||u,function(He){var Le=[];Ee&&Ee.length&&Le.push.apply(Le,Rt(Ee)),He&&He.length&&Le.push.apply(Le,Rt(He)),Z(Le.length?Le:null)})}}var J;if(K.asyncValidator)J=K.asyncValidator(K,G.value,$,G.source,u);else if(K.validator){try{J=K.validator(K,G.value,$,G.source,u)}catch(le){var ne,oe;(ne=(oe=console).error)===null||ne===void 0||ne.call(oe,le),u.suppressValidatorError||setTimeout(function(){throw le},0),$(le.message)}J===!0?$():J===!1?$(typeof K.message=="function"?K.message(K.fullField||K.field):K.message||"".concat(K.fullField||K.field," fails")):J instanceof Array?$(J):J instanceof Error&&$(J.message)}J&&J.then&&J.then(function(){return $()},function(le){return $(le)})},function(G){C(G)},f)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Rh.hasOwnProperty(r.type))throw new Error(ro("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),l=a.indexOf("message");return l!==-1&&a.splice(l,1),a.length===1&&a[0]==="required"?Rh.required:Rh[this.getType(r)]||void 0}}]),e}();Me(Tf,"register",function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Rh[t]=r});Me(Tf,"warning",d8);Me(Tf,"messages",l1);Me(Tf,"validators",Rh);var Xi="'${name}' is not a valid ${type}",BM={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Xi,method:Xi,array:Xi,object:Xi,number:Xi,date:Xi,boolean:Xi,integer:Xi,float:Xi,regexp:Xi,email:Xi,url:Xi,hex:Xi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},kC=Tf;function $8(e,t){return e.replace(/\$\{\w+\}/g,function(r){var a=r.slice(2,-1);return t[a]})}var AC="CODE_LOGIC_ERROR";function d1(e,t,r,a,l){return h1.apply(this,arguments)}function h1(){return h1=uc(Si().mark(function e(t,r,a,l,h){var f,u,w,C,I,k,A,q,G;return Si().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return f=Xe({},a),delete f.ruleIndex,kC.warning=function(){},f.validator&&(u=f.validator,f.validator=function(){try{return u.apply(void 0,arguments)}catch(j){return console.error(j),Promise.reject(AC)}}),w=null,f&&f.type==="array"&&f.defaultField&&(w=f.defaultField,delete f.defaultField),C=new kC(Me({},t,[f])),I=cu(BM,l.validateMessages),C.messages(I),k=[],K.prev=10,K.next=13,Promise.resolve(C.validate(Me({},t,r),Xe({},l)));case 13:K.next=18;break;case 15:K.prev=15,K.t0=K.catch(10),K.t0.errors&&(k=K.t0.errors.map(function(j,O){var $=j.message,J=$===AC?I.default:$;return L.isValidElement(J)?L.cloneElement(J,{key:"error_".concat(O)}):J}));case 18:if(!(!k.length&&w)){K.next=23;break}return K.next=21,Promise.all(r.map(function(j,O){return d1("".concat(t,".").concat(O),j,w,l,h)}));case 21:return A=K.sent,K.abrupt("return",A.reduce(function(j,O){return[].concat(Rt(j),Rt(O))},[]));case 23:return q=Xe(Xe({},a),{},{name:t,enum:(a.enum||[]).join(", ")},h),G=k.map(function(j){return typeof j=="string"?$8(j,q):j}),K.abrupt("return",G);case 26:case"end":return K.stop()}},e,null,[[10,15]])})),h1.apply(this,arguments)}function N8(e,t,r,a,l,h){var f=e.join("."),u=r.map(function(I,k){var A=I.validator,q=Xe(Xe({},I),{},{ruleIndex:k});return A&&(q.validator=function(G,Z,K){var j=!1,O=function(){for(var ne=arguments.length,oe=new Array(ne),le=0;le<ne;le++)oe[le]=arguments[le];Promise.resolve().then(function(){Bi(!j,"Your validator function has already return a promise. `callback` will be ignored."),j||K.apply(void 0,oe)})},$=A(G,Z,O);j=$&&typeof $.then=="function"&&typeof $.catch=="function",Bi(j,"`callback` is deprecated. Please return a promise instead."),j&&$.then(function(){K()}).catch(function(J){K(J||" ")})}),q}).sort(function(I,k){var A=I.warningOnly,q=I.ruleIndex,G=k.warningOnly,Z=k.ruleIndex;return!!A==!!G?q-Z:A?1:-1}),w;if(l===!0)w=new Promise(function(){var I=uc(Si().mark(function k(A,q){var G,Z,K;return Si().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:G=0;case 1:if(!(G<u.length)){O.next=12;break}return Z=u[G],O.next=5,d1(f,t,Z,a,h);case 5:if(K=O.sent,!K.length){O.next=9;break}return q([{errors:K,rule:Z}]),O.abrupt("return");case 9:G+=1,O.next=1;break;case 12:A([]);case 13:case"end":return O.stop()}},k)}));return function(k,A){return I.apply(this,arguments)}}());else{var C=u.map(function(I){return d1(f,t,I,a,h).then(function(k){return{errors:k,rule:I}})});w=(l?V8(C):j8(C)).then(function(I){return Promise.reject(I)})}return w.catch(function(I){return I}),w}function j8(e){return f1.apply(this,arguments)}function f1(){return f1=uc(Si().mark(function e(t){return Si().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(l){var h,f=(h=[]).concat.apply(h,Rt(l));return f}));case 1:case"end":return a.stop()}},e)})),f1.apply(this,arguments)}function V8(e){return p1.apply(this,arguments)}function p1(){return p1=uc(Si().mark(function e(t){var r;return Si().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=0,l.abrupt("return",new Promise(function(h){t.forEach(function(f){f.then(function(u){u.errors.length&&h([u]),r+=1,r===t.length&&h([])})})}));case 2:case"end":return l.stop()}},e)})),p1.apply(this,arguments)}function mn(e){return a1(e)}function RC(e,t){var r={};return t.forEach(function(a){var l=ma(e,a);r=Ho(r,a,l)}),r}function vu(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(a){return $M(t,a,r)})}function $M(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!r&&e.length!==t.length?!1:t.every(function(a,l){return e[l]===a})}function U8(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Qt(e)!=="object"||Qt(t)!=="object")return!1;var r=Object.keys(e),a=Object.keys(t),l=new Set([].concat(r,a));return Rt(l).every(function(h){var f=e[h],u=t[h];return typeof f=="function"&&typeof u=="function"?!0:f===u})}function H8(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Qt(t.target)==="object"&&e in t.target?t.target[e]:t}function zC(e,t,r){var a=e.length;if(t<0||t>=a||r<0||r>=a)return e;var l=e[t],h=t-r;return h>0?[].concat(Rt(e.slice(0,r)),[l],Rt(e.slice(r,t)),Rt(e.slice(t+1,a))):h<0?[].concat(Rt(e.slice(0,t)),Rt(e.slice(t+1,r+1)),[l],Rt(e.slice(r+1,a))):e}var W8=["name"],_o=[];function LC(e,t,r,a,l,h){return typeof e=="function"?e(t,r,"source"in h?{source:h.source}:{}):a!==l}var qx=function(e){Nu(r,e);var t=iy(r);function r(a){var l;if(ai(this,r),l=t.call(this,a),Me(ir(l),"state",{resetCount:0}),Me(ir(l),"cancelRegisterFunc",null),Me(ir(l),"mounted",!1),Me(ir(l),"touched",!1),Me(ir(l),"dirty",!1),Me(ir(l),"validatePromise",void 0),Me(ir(l),"prevValidating",void 0),Me(ir(l),"errors",_o),Me(ir(l),"warnings",_o),Me(ir(l),"cancelRegister",function(){var w=l.props,C=w.preserve,I=w.isListField,k=w.name;l.cancelRegisterFunc&&l.cancelRegisterFunc(I,C,mn(k)),l.cancelRegisterFunc=null}),Me(ir(l),"getNamePath",function(){var w=l.props,C=w.name,I=w.fieldContext,k=I.prefixName,A=k===void 0?[]:k;return C!==void 0?[].concat(Rt(A),Rt(C)):[]}),Me(ir(l),"getRules",function(){var w=l.props,C=w.rules,I=C===void 0?[]:C,k=w.fieldContext;return I.map(function(A){return typeof A=="function"?A(k):A})}),Me(ir(l),"refresh",function(){l.mounted&&l.setState(function(w){var C=w.resetCount;return{resetCount:C+1}})}),Me(ir(l),"metaCache",null),Me(ir(l),"triggerMetaEvent",function(w){var C=l.props.onMetaChange;if(C){var I=Xe(Xe({},l.getMeta()),{},{destroy:w});F_(l.metaCache,I)||C(I),l.metaCache=I}else l.metaCache=null}),Me(ir(l),"onStoreChange",function(w,C,I){var k=l.props,A=k.shouldUpdate,q=k.dependencies,G=q===void 0?[]:q,Z=k.onReset,K=I.store,j=l.getNamePath(),O=l.getValue(w),$=l.getValue(K),J=C&&vu(C,j);switch(I.type==="valueUpdate"&&I.source==="external"&&!F_(O,$)&&(l.touched=!0,l.dirty=!0,l.validatePromise=null,l.errors=_o,l.warnings=_o,l.triggerMetaEvent()),I.type){case"reset":if(!C||J){l.touched=!1,l.dirty=!1,l.validatePromise=void 0,l.errors=_o,l.warnings=_o,l.triggerMetaEvent(),Z==null||Z(),l.refresh();return}break;case"remove":{if(A){l.reRender();return}break}case"setField":{var ne=I.data;if(J){"touched"in ne&&(l.touched=ne.touched),"validating"in ne&&!("originRCField"in ne)&&(l.validatePromise=ne.validating?Promise.resolve([]):null),"errors"in ne&&(l.errors=ne.errors||_o),"warnings"in ne&&(l.warnings=ne.warnings||_o),l.dirty=!0,l.triggerMetaEvent(),l.reRender();return}else if("value"in ne&&vu(C,j,!0)){l.reRender();return}if(A&&!j.length&&LC(A,w,K,O,$,I)){l.reRender();return}break}case"dependenciesUpdate":{var oe=G.map(mn);if(oe.some(function(le){return vu(I.relatedFields,le)})){l.reRender();return}break}default:if(J||(!G.length||j.length||A)&&LC(A,w,K,O,$,I)){l.reRender();return}break}A===!0&&l.reRender()}),Me(ir(l),"validateRules",function(w){var C=l.getNamePath(),I=l.getValue(),k=w||{},A=k.triggerName,q=k.validateOnly,G=q===void 0?!1:q,Z=Promise.resolve().then(uc(Si().mark(function K(){var j,O,$,J,ne,oe,le;return Si().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(l.mounted){Ee.next=2;break}return Ee.abrupt("return",[]);case 2:if(j=l.props,O=j.validateFirst,$=O===void 0?!1:O,J=j.messageVariables,ne=j.validateDebounce,oe=l.getRules(),A&&(oe=oe.filter(function(ke){return ke}).filter(function(ke){var Ae=ke.validateTrigger;if(!Ae)return!0;var Ye=a1(Ae);return Ye.includes(A)})),!(ne&&A)){Ee.next=10;break}return Ee.next=8,new Promise(function(ke){setTimeout(ke,ne)});case 8:if(l.validatePromise===Z){Ee.next=10;break}return Ee.abrupt("return",[]);case 10:return le=N8(C,I,oe,w,$,J),le.catch(function(ke){return ke}).then(function(){var ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_o;if(l.validatePromise===Z){var Ae;l.validatePromise=null;var Ye=[],He=[];(Ae=ke.forEach)===null||Ae===void 0||Ae.call(ke,function(Le){var Je=Le.rule.warningOnly,Oe=Le.errors,Pe=Oe===void 0?_o:Oe;Je?He.push.apply(He,Rt(Pe)):Ye.push.apply(Ye,Rt(Pe))}),l.errors=Ye,l.warnings=He,l.triggerMetaEvent(),l.reRender()}}),Ee.abrupt("return",le);case 13:case"end":return Ee.stop()}},K)})));return G||(l.validatePromise=Z,l.dirty=!0,l.errors=_o,l.warnings=_o,l.triggerMetaEvent(),l.reRender()),Z}),Me(ir(l),"isFieldValidating",function(){return!!l.validatePromise}),Me(ir(l),"isFieldTouched",function(){return l.touched}),Me(ir(l),"isFieldDirty",function(){if(l.dirty||l.props.initialValue!==void 0)return!0;var w=l.props.fieldContext,C=w.getInternalHooks($l),I=C.getInitialValue;return I(l.getNamePath())!==void 0}),Me(ir(l),"getErrors",function(){return l.errors}),Me(ir(l),"getWarnings",function(){return l.warnings}),Me(ir(l),"isListField",function(){return l.props.isListField}),Me(ir(l),"isList",function(){return l.props.isList}),Me(ir(l),"isPreserve",function(){return l.props.preserve}),Me(ir(l),"getMeta",function(){l.prevValidating=l.isFieldValidating();var w={touched:l.isFieldTouched(),validating:l.prevValidating,errors:l.errors,warnings:l.warnings,name:l.getNamePath(),validated:l.validatePromise===null};return w}),Me(ir(l),"getOnlyChild",function(w){if(typeof w=="function"){var C=l.getMeta();return Xe(Xe({},l.getOnlyChild(w(l.getControlled(),C,l.props.fieldContext))),{},{isFunction:!0})}var I=R_(w);return I.length!==1||!L.isValidElement(I[0])?{child:I,isFunction:!1}:{child:I[0],isFunction:!1}}),Me(ir(l),"getValue",function(w){var C=l.props.fieldContext.getFieldsValue,I=l.getNamePath();return ma(w||C(!0),I)}),Me(ir(l),"getControlled",function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=l.props,I=C.name,k=C.trigger,A=C.validateTrigger,q=C.getValueFromEvent,G=C.normalize,Z=C.valuePropName,K=C.getValueProps,j=C.fieldContext,O=A!==void 0?A:j.validateTrigger,$=l.getNamePath(),J=j.getInternalHooks,ne=j.getFieldsValue,oe=J($l),le=oe.dispatch,be=l.getValue(),Ee=K||function(Le){return Me({},Z,Le)},ke=w[k],Ae=I!==void 0?Ee(be):{},Ye=Xe(Xe({},w),Ae);Ye[k]=function(){l.touched=!0,l.dirty=!0,l.triggerMetaEvent();for(var Le,Je=arguments.length,Oe=new Array(Je),Pe=0;Pe<Je;Pe++)Oe[Pe]=arguments[Pe];q?Le=q.apply(void 0,Oe):Le=H8.apply(void 0,[Z].concat(Oe)),G&&(Le=G(Le,be,ne(!0))),le({type:"updateValue",namePath:$,value:Le}),ke&&ke.apply(void 0,Oe)};var He=a1(O||[]);return He.forEach(function(Le){var Je=Ye[Le];Ye[Le]=function(){Je&&Je.apply(void 0,arguments);var Oe=l.props.rules;Oe&&Oe.length&&le({type:"validateField",namePath:$,triggerName:Le})}}),Ye}),a.fieldContext){var h=a.fieldContext.getInternalHooks,f=h($l),u=f.initEntityValue;u(ir(l))}return l}return si(r,[{key:"componentDidMount",value:function(){var l=this.props,h=l.shouldUpdate,f=l.fieldContext;if(this.mounted=!0,f){var u=f.getInternalHooks,w=u($l),C=w.registerField;this.cancelRegisterFunc=C(this)}h===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var l=this.state.resetCount,h=this.props.children,f=this.getOnlyChild(h),u=f.child,w=f.isFunction,C;return w?C=u:L.isValidElement(u)?C=L.cloneElement(u,this.getControlled(u.props)):(Bi(!u,"`children` of Field is not validate ReactElement."),C=u),L.createElement(L.Fragment,{key:l},C)}}]),r}(L.Component);Me(qx,"contextType",zu);Me(qx,"defaultProps",{trigger:"onChange",valuePropName:"value"});function NM(e){var t=e.name,r=ea(e,W8),a=L.useContext(zu),l=L.useContext(xg),h=t!==void 0?mn(t):void 0,f="keep";return r.isListField||(f="_".concat((h||[]).join("_"))),L.createElement(qx,pr({key:f,name:h,isListField:!!l},r,{fieldContext:a}))}function G8(e){var t=e.name,r=e.initialValue,a=e.children,l=e.rules,h=e.validateTrigger,f=e.isListField,u=L.useContext(zu),w=L.useContext(xg),C=L.useRef({keys:[],id:0}),I=C.current,k=L.useMemo(function(){var Z=mn(u.prefixName)||[];return[].concat(Rt(Z),Rt(mn(t)))},[u.prefixName,t]),A=L.useMemo(function(){return Xe(Xe({},u),{},{prefixName:k})},[u,k]),q=L.useMemo(function(){return{getKey:function(K){var j=k.length,O=K[j];return[I.keys[O],K.slice(j+1)]}}},[k]);if(typeof a!="function")return Bi(!1,"Form.List only accepts function as children."),null;var G=function(K,j,O){var $=O.source;return $==="internal"?!1:K!==j};return L.createElement(xg.Provider,{value:q},L.createElement(zu.Provider,{value:A},L.createElement(NM,{name:[],shouldUpdate:G,rules:l,validateTrigger:h,initialValue:r,isList:!0,isListField:f??!!w},function(Z,K){var j=Z.value,O=j===void 0?[]:j,$=Z.onChange,J=u.getFieldValue,ne=function(){var Ee=J(k||[]);return Ee||[]},oe={add:function(Ee,ke){var Ae=ne();ke>=0&&ke<=Ae.length?(I.keys=[].concat(Rt(I.keys.slice(0,ke)),[I.id],Rt(I.keys.slice(ke))),$([].concat(Rt(Ae.slice(0,ke)),[Ee],Rt(Ae.slice(ke))))):(I.keys=[].concat(Rt(I.keys),[I.id]),$([].concat(Rt(Ae),[Ee]))),I.id+=1},remove:function(Ee){var ke=ne(),Ae=new Set(Array.isArray(Ee)?Ee:[Ee]);Ae.size<=0||(I.keys=I.keys.filter(function(Ye,He){return!Ae.has(He)}),$(ke.filter(function(Ye,He){return!Ae.has(He)})))},move:function(Ee,ke){if(Ee!==ke){var Ae=ne();Ee<0||Ee>=Ae.length||ke<0||ke>=Ae.length||(I.keys=zC(I.keys,Ee,ke),$(zC(Ae,Ee,ke)))}}},le=O||[];return Array.isArray(le)||(le=[]),a(le.map(function(be,Ee){var ke=I.keys[Ee];return ke===void 0&&(I.keys[Ee]=I.id,ke=I.keys[Ee],I.id+=1),{name:Ee,key:ke,isListField:!0}}),oe,K)})))}function q8(e){var t=!1,r=e.length,a=[];return e.length?new Promise(function(l,h){e.forEach(function(f,u){f.catch(function(w){return t=!0,w}).then(function(w){r-=1,a[u]=w,!(r>0)&&(t&&h(a),l(a))})})}):Promise.resolve([])}var jM="__@field_split__";function T0(e){return e.map(function(t){return"".concat(Qt(t),":").concat(t)}).join(jM)}var Kc=function(){function e(){ai(this,e),Me(this,"kvs",new Map)}return si(e,[{key:"set",value:function(r,a){this.kvs.set(T0(r),a)}},{key:"get",value:function(r){return this.kvs.get(T0(r))}},{key:"update",value:function(r,a){var l=this.get(r),h=a(l);h?this.set(r,h):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(T0(r))}},{key:"map",value:function(r){return Rt(this.kvs.entries()).map(function(a){var l=Tt(a,2),h=l[0],f=l[1],u=h.split(jM);return r({key:u.map(function(w){var C=w.match(/^([^:]*):(.*)$/),I=Tt(C,3),k=I[1],A=I[2];return k==="number"?Number(A):A}),value:f})})}},{key:"toJSON",value:function(){var r={};return this.map(function(a){var l=a.key,h=a.value;return r[l.join(".")]=h,null}),r}}]),e}(),Z8=["name"],K8=si(function e(t){var r=this;ai(this,e),Me(this,"formHooked",!1),Me(this,"forceRootUpdate",void 0),Me(this,"subscribable",!0),Me(this,"store",{}),Me(this,"fieldEntities",[]),Me(this,"initialValues",{}),Me(this,"callbacks",{}),Me(this,"validateMessages",null),Me(this,"preserve",null),Me(this,"lastValidatePromise",null),Me(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),Me(this,"getInternalHooks",function(a){return a===$l?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Bi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Me(this,"useSubscribe",function(a){r.subscribable=a}),Me(this,"prevWithoutPreserves",null),Me(this,"setInitialValues",function(a,l){if(r.initialValues=a||{},l){var h,f=cu(a,r.store);(h=r.prevWithoutPreserves)===null||h===void 0||h.map(function(u){var w=u.key;f=Ho(f,w,ma(a,w))}),r.prevWithoutPreserves=null,r.updateStore(f)}}),Me(this,"destroyForm",function(){var a=new Kc;r.getFieldEntities(!0).forEach(function(l){r.isMergedPreserve(l.isPreserve())||a.set(l.getNamePath(),!0)}),r.prevWithoutPreserves=a}),Me(this,"getInitialValue",function(a){var l=ma(r.initialValues,a);return a.length?cu(l):l}),Me(this,"setCallbacks",function(a){r.callbacks=a}),Me(this,"setValidateMessages",function(a){r.validateMessages=a}),Me(this,"setPreserve",function(a){r.preserve=a}),Me(this,"watchList",[]),Me(this,"registerWatch",function(a){return r.watchList.push(a),function(){r.watchList=r.watchList.filter(function(l){return l!==a})}}),Me(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var l=r.getFieldsValue(),h=r.getFieldsValue(!0);r.watchList.forEach(function(f){f(l,h,a)})}}),Me(this,"timeoutId",null),Me(this,"warningUnhooked",function(){}),Me(this,"updateStore",function(a){r.store=a}),Me(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?r.fieldEntities.filter(function(l){return l.getNamePath().length}):r.fieldEntities}),Me(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,l=new Kc;return r.getFieldEntities(a).forEach(function(h){var f=h.getNamePath();l.set(f,h)}),l}),Me(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return r.getFieldEntities(!0);var l=r.getFieldsMap(!0);return a.map(function(h){var f=mn(h);return l.get(f)||{INVALIDATE_NAME_PATH:mn(h)}})}),Me(this,"getFieldsValue",function(a,l){r.warningUnhooked();var h,f,u;if(a===!0||Array.isArray(a)?(h=a,f=l):a&&Qt(a)==="object"&&(u=a.strict,f=a.filter),h===!0&&!f)return r.store;var w=r.getFieldEntitiesForNamePathList(Array.isArray(h)?h:null),C=[];return w.forEach(function(I){var k,A,q="INVALIDATE_NAME_PATH"in I?I.INVALIDATE_NAME_PATH:I.getNamePath();if(u){var G,Z;if((G=(Z=I).isList)!==null&&G!==void 0&&G.call(Z))return}else if(!h&&(k=(A=I).isListField)!==null&&k!==void 0&&k.call(A))return;if(!f)C.push(q);else{var K="getMeta"in I?I.getMeta():null;f(K)&&C.push(q)}}),RC(r.store,C.map(mn))}),Me(this,"getFieldValue",function(a){r.warningUnhooked();var l=mn(a);return ma(r.store,l)}),Me(this,"getFieldsError",function(a){r.warningUnhooked();var l=r.getFieldEntitiesForNamePathList(a);return l.map(function(h,f){return h&&!("INVALIDATE_NAME_PATH"in h)?{name:h.getNamePath(),errors:h.getErrors(),warnings:h.getWarnings()}:{name:mn(a[f]),errors:[],warnings:[]}})}),Me(this,"getFieldError",function(a){r.warningUnhooked();var l=mn(a),h=r.getFieldsError([l])[0];return h.errors}),Me(this,"getFieldWarning",function(a){r.warningUnhooked();var l=mn(a),h=r.getFieldsError([l])[0];return h.warnings}),Me(this,"isFieldsTouched",function(){r.warningUnhooked();for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];var f=l[0],u=l[1],w,C=!1;l.length===0?w=null:l.length===1?Array.isArray(f)?(w=f.map(mn),C=!1):(w=null,C=f):(w=f.map(mn),C=u);var I=r.getFieldEntities(!0),k=function(K){return K.isFieldTouched()};if(!w)return C?I.every(function(Z){return k(Z)||Z.isList()}):I.some(k);var A=new Kc;w.forEach(function(Z){A.set(Z,[])}),I.forEach(function(Z){var K=Z.getNamePath();w.forEach(function(j){j.every(function(O,$){return K[$]===O})&&A.update(j,function(O){return[].concat(Rt(O),[Z])})})});var q=function(K){return K.some(k)},G=A.map(function(Z){var K=Z.value;return K});return C?G.every(q):G.some(q)}),Me(this,"isFieldTouched",function(a){return r.warningUnhooked(),r.isFieldsTouched([a])}),Me(this,"isFieldsValidating",function(a){r.warningUnhooked();var l=r.getFieldEntities();if(!a)return l.some(function(f){return f.isFieldValidating()});var h=a.map(mn);return l.some(function(f){var u=f.getNamePath();return vu(h,u)&&f.isFieldValidating()})}),Me(this,"isFieldValidating",function(a){return r.warningUnhooked(),r.isFieldsValidating([a])}),Me(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=new Kc,h=r.getFieldEntities(!0);h.forEach(function(w){var C=w.props.initialValue,I=w.getNamePath();if(C!==void 0){var k=l.get(I)||new Set;k.add({entity:w,value:C}),l.set(I,k)}});var f=function(C){C.forEach(function(I){var k=I.props.initialValue;if(k!==void 0){var A=I.getNamePath(),q=r.getInitialValue(A);if(q!==void 0)Bi(!1,"Form already set 'initialValues' with path '".concat(A.join("."),"'. Field can not overwrite it."));else{var G=l.get(A);if(G&&G.size>1)Bi(!1,"Multiple Field with path '".concat(A.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(G){var Z=r.getFieldValue(A),K=I.isListField();!K&&(!a.skipExist||Z===void 0)&&r.updateStore(Ho(r.store,A,Rt(G)[0].value))}}}})},u;a.entities?u=a.entities:a.namePathList?(u=[],a.namePathList.forEach(function(w){var C=l.get(w);if(C){var I;(I=u).push.apply(I,Rt(Rt(C).map(function(k){return k.entity})))}})):u=h,f(u)}),Me(this,"resetFields",function(a){r.warningUnhooked();var l=r.store;if(!a){r.updateStore(cu(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(l,null,{type:"reset"}),r.notifyWatch();return}var h=a.map(mn);h.forEach(function(f){var u=r.getInitialValue(f);r.updateStore(Ho(r.store,f,u))}),r.resetWithFieldInitialValue({namePathList:h}),r.notifyObservers(l,h,{type:"reset"}),r.notifyWatch(h)}),Me(this,"setFields",function(a){r.warningUnhooked();var l=r.store,h=[];a.forEach(function(f){var u=f.name,w=ea(f,Z8),C=mn(u);h.push(C),"value"in w&&r.updateStore(Ho(r.store,C,w.value)),r.notifyObservers(l,[C],{type:"setField",data:f})}),r.notifyWatch(h)}),Me(this,"getFields",function(){var a=r.getFieldEntities(!0),l=a.map(function(h){var f=h.getNamePath(),u=h.getMeta(),w=Xe(Xe({},u),{},{name:f,value:r.getFieldValue(f)});return Object.defineProperty(w,"originRCField",{value:!0}),w});return l}),Me(this,"initEntityValue",function(a){var l=a.props.initialValue;if(l!==void 0){var h=a.getNamePath(),f=ma(r.store,h);f===void 0&&r.updateStore(Ho(r.store,h,l))}}),Me(this,"isMergedPreserve",function(a){var l=a!==void 0?a:r.preserve;return l??!0}),Me(this,"registerField",function(a){r.fieldEntities.push(a);var l=a.getNamePath();if(r.notifyWatch([l]),a.props.initialValue!==void 0){var h=r.store;r.resetWithFieldInitialValue({entities:[a],skipExist:!0}),r.notifyObservers(h,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(f,u){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(k){return k!==a}),!r.isMergedPreserve(u)&&(!f||w.length>1)){var C=f?void 0:r.getInitialValue(l);if(l.length&&r.getFieldValue(l)!==C&&r.fieldEntities.every(function(k){return!$M(k.getNamePath(),l)})){var I=r.store;r.updateStore(Ho(I,l,C,!0)),r.notifyObservers(I,[l],{type:"remove"}),r.triggerDependenciesUpdate(I,l)}}r.notifyWatch([l])}}),Me(this,"dispatch",function(a){switch(a.type){case"updateValue":{var l=a.namePath,h=a.value;r.updateValue(l,h);break}case"validateField":{var f=a.namePath,u=a.triggerName;r.validateFields([f],{triggerName:u});break}}}),Me(this,"notifyObservers",function(a,l,h){if(r.subscribable){var f=Xe(Xe({},h),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(u){var w=u.onStoreChange;w(a,l,f)})}else r.forceRootUpdate()}),Me(this,"triggerDependenciesUpdate",function(a,l){var h=r.getDependencyChildrenFields(l);return h.length&&r.validateFields(h),r.notifyObservers(a,h,{type:"dependenciesUpdate",relatedFields:[l].concat(Rt(h))}),h}),Me(this,"updateValue",function(a,l){var h=mn(a),f=r.store;r.updateStore(Ho(r.store,h,l)),r.notifyObservers(f,[h],{type:"valueUpdate",source:"internal"}),r.notifyWatch([h]);var u=r.triggerDependenciesUpdate(f,h),w=r.callbacks.onValuesChange;if(w){var C=RC(r.store,[h]);w(C,r.getFieldsValue())}r.triggerOnFieldsChange([h].concat(Rt(u)))}),Me(this,"setFieldsValue",function(a){r.warningUnhooked();var l=r.store;if(a){var h=cu(r.store,a);r.updateStore(h)}r.notifyObservers(l,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),Me(this,"setFieldValue",function(a,l){r.setFields([{name:a,value:l}])}),Me(this,"getDependencyChildrenFields",function(a){var l=new Set,h=[],f=new Kc;r.getFieldEntities().forEach(function(w){var C=w.props.dependencies;(C||[]).forEach(function(I){var k=mn(I);f.update(k,function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return A.add(w),A})})});var u=function w(C){var I=f.get(C)||new Set;I.forEach(function(k){if(!l.has(k)){l.add(k);var A=k.getNamePath();k.isFieldDirty()&&A.length&&(h.push(A),w(A))}})};return u(a),h}),Me(this,"triggerOnFieldsChange",function(a,l){var h=r.callbacks.onFieldsChange;if(h){var f=r.getFields();if(l){var u=new Kc;l.forEach(function(C){var I=C.name,k=C.errors;u.set(I,k)}),f.forEach(function(C){C.errors=u.get(C.name)||C.errors})}var w=f.filter(function(C){var I=C.name;return vu(a,I)});w.length&&h(w,f)}}),Me(this,"validateFields",function(a,l){r.warningUnhooked();var h,f;Array.isArray(a)||typeof a=="string"||typeof l=="string"?(h=a,f=l):f=a;var u=!!h,w=u?h.map(mn):[],C=[],I=String(Date.now()),k=new Set,A=f||{},q=A.recursive,G=A.dirty;r.getFieldEntities(!0).forEach(function(O){if(u||w.push(O.getNamePath()),!(!O.props.rules||!O.props.rules.length)&&!(G&&!O.isFieldDirty())){var $=O.getNamePath();if(k.add($.join(I)),!u||vu(w,$,q)){var J=O.validateRules(Xe({validateMessages:Xe(Xe({},BM),r.validateMessages)},f));C.push(J.then(function(){return{name:$,errors:[],warnings:[]}}).catch(function(ne){var oe,le=[],be=[];return(oe=ne.forEach)===null||oe===void 0||oe.call(ne,function(Ee){var ke=Ee.rule.warningOnly,Ae=Ee.errors;ke?be.push.apply(be,Rt(Ae)):le.push.apply(le,Rt(Ae))}),le.length?Promise.reject({name:$,errors:le,warnings:be}):{name:$,errors:le,warnings:be}}))}}});var Z=q8(C);r.lastValidatePromise=Z,Z.catch(function(O){return O}).then(function(O){var $=O.map(function(J){var ne=J.name;return ne});r.notifyObservers(r.store,$,{type:"validateFinish"}),r.triggerOnFieldsChange($,O)});var K=Z.then(function(){return r.lastValidatePromise===Z?Promise.resolve(r.getFieldsValue(w)):Promise.reject([])}).catch(function(O){var $=O.filter(function(J){return J&&J.errors.length});return Promise.reject({values:r.getFieldsValue(w),errorFields:$,outOfDate:r.lastValidatePromise!==Z})});K.catch(function(O){return O});var j=w.filter(function(O){return k.has(O.join(I))});return r.triggerOnFieldsChange(j),K}),Me(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(a){var l=r.callbacks.onFinish;if(l)try{l(a)}catch(h){console.error(h)}}).catch(function(a){var l=r.callbacks.onFinishFailed;l&&l(a)})}),this.forceRootUpdate=t});function VM(e){var t=L.useRef(),r=L.useState({}),a=Tt(r,2),l=a[1];if(!t.current)if(e)t.current=e;else{var h=function(){l({})},f=new K8(h);t.current=f.getForm()}return[t.current]}var m1=L.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),X8=function(t){var r=t.validateMessages,a=t.onFormChange,l=t.onFormFinish,h=t.children,f=L.useContext(m1),u=L.useRef({});return L.createElement(m1.Provider,{value:Xe(Xe({},f),{},{validateMessages:Xe(Xe({},f.validateMessages),r),triggerFormChange:function(C,I){a&&a(C,{changedFields:I,forms:u.current}),f.triggerFormChange(C,I)},triggerFormFinish:function(C,I){l&&l(C,{values:I,forms:u.current}),f.triggerFormFinish(C,I)},registerForm:function(C,I){C&&(u.current=Xe(Xe({},u.current),{},Me({},C,I))),f.registerForm(C,I)},unregisterForm:function(C){var I=Xe({},u.current);delete I[C],u.current=I,f.unregisterForm(C)}})},h)},Y8=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],J8=function(t,r){var a=t.name,l=t.initialValues,h=t.fields,f=t.form,u=t.preserve,w=t.children,C=t.component,I=C===void 0?"form":C,k=t.validateMessages,A=t.validateTrigger,q=A===void 0?"onChange":A,G=t.onValuesChange,Z=t.onFieldsChange,K=t.onFinish,j=t.onFinishFailed,O=ea(t,Y8),$=L.useContext(m1),J=VM(f),ne=Tt(J,1),oe=ne[0],le=oe.getInternalHooks($l),be=le.useSubscribe,Ee=le.setInitialValues,ke=le.setCallbacks,Ae=le.setValidateMessages,Ye=le.setPreserve,He=le.destroyForm;L.useImperativeHandle(r,function(){return oe}),L.useEffect(function(){return $.registerForm(a,oe),function(){$.unregisterForm(a)}},[$,oe,a]),Ae(Xe(Xe({},$.validateMessages),k)),ke({onValuesChange:G,onFieldsChange:function(Ze){if($.triggerFormChange(a,Ze),Z){for(var gt=arguments.length,Ct=new Array(gt>1?gt-1:0),Ht=1;Ht<gt;Ht++)Ct[Ht-1]=arguments[Ht];Z.apply(void 0,[Ze].concat(Ct))}},onFinish:function(Ze){$.triggerFormFinish(a,Ze),K&&K(Ze)},onFinishFailed:j}),Ye(u);var Le=L.useRef(null);Ee(l,!Le.current),Le.current||(Le.current=!0),L.useEffect(function(){return He},[]);var Je,Oe=typeof w=="function";if(Oe){var Pe=oe.getFieldsValue(!0);Je=w(Pe,oe)}else Je=w;be(!Oe);var xe=L.useRef();L.useEffect(function(){U8(xe.current||[],h||[])||oe.setFields(h||[]),xe.current=h},[h,oe]);var De=L.useMemo(function(){return Xe(Xe({},oe),{},{validateTrigger:q})},[oe,q]),$e=L.createElement(xg.Provider,{value:null},L.createElement(zu.Provider,{value:De},Je));return I===!1?$e:L.createElement(I,pr({},O,{onSubmit:function(Ze){Ze.preventDefault(),Ze.stopPropagation(),oe.submit()},onReset:function(Ze){var gt;Ze.preventDefault(),oe.resetFields(),(gt=O.onReset)===null||gt===void 0||gt.call(O,Ze)}}),$e)};function OC(e){try{return JSON.stringify(e)}catch{return Math.random()}}function Q8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],l=t[1],h=l===void 0?{}:l,f=s8(h)?{form:h}:h,u=f.form,w=L.useState(),C=Tt(w,2),I=C[0],k=C[1],A=L.useMemo(function(){return OC(I)},[I]),q=L.useRef(A);q.current=A;var G=L.useContext(zu),Z=u||G,K=Z&&Z._init,j=mn(a),O=L.useRef(j);return O.current=j,L.useEffect(function(){if(K){var $=Z.getFieldsValue,J=Z.getInternalHooks,ne=J($l),oe=ne.registerWatch,le=function(Ae,Ye){var He=f.preserve?Ye:Ae;return typeof a=="function"?a(He):ma(He,O.current)},be=oe(function(ke,Ae){var Ye=le(ke,Ae),He=OC(Ye);q.current!==He&&(q.current=He,k(Ye))}),Ee=le($(),$(!0));return I!==Ee&&k(Ee),be}},[K]),I}var e$=L.forwardRef(J8),If=e$;If.FormProvider=X8;If.Field=NM;If.List=G8;If.useForm=VM;If.useWatch=Q8;const bg=L.createContext({}),g1=e=>{let{children:t,status:r,override:a}=e;const l=L.useContext(bg),h=L.useMemo(()=>{const f=Object.assign({},l);return a&&delete f.isFormItemInput,r&&(delete f.status,delete f.hasFeedback,delete f.feedbackIcon),f},[r,a,l]);return L.createElement(bg.Provider,{value:h},t)},t$=L.createContext(void 0);function DC(){}const r$=L.createContext({add:DC,remove:DC});function n$(e){const t=L.useContext(r$),r=L.useRef();return sf(l=>{if(l){const h=e?l.querySelector(e):l;t.add(h),r.current=h}else t.remove(r.current)})}const FC=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:r}=L.useContext(Ef);return rt.createElement(Hu,Object.assign({onClick:r},e),t)},BC=()=>{const{confirmLoading:e,okButtonProps:t,okType:r,okTextLocale:a,onOk:l}=L.useContext(Ef);return rt.createElement(Hu,Object.assign({},CM(r),{loading:e,onClick:l},t),a)};function UM(e,t){return rt.createElement("span",{className:`${e}-close-x`},t||rt.createElement(jx,{className:`${e}-close-icon`}))}const HM=e=>{const{okText:t,okType:r="primary",cancelText:a,confirmLoading:l,onOk:h,onCancel:f,okButtonProps:u,cancelButtonProps:w,footer:C}=e,[I]=Dx("Modal",IP()),k=t||(I==null?void 0:I.okText),A=a||(I==null?void 0:I.cancelText),q={confirmLoading:l,okButtonProps:u,cancelButtonProps:w,okTextLocale:k,cancelTextLocale:A,okType:r,onOk:h,onCancel:f},G=rt.useMemo(()=>q,Rt(Object.values(q)));let Z;return typeof C=="function"||typeof C>"u"?(Z=rt.createElement(rt.Fragment,null,rt.createElement(FC,null),rt.createElement(BC,null)),typeof C=="function"&&(Z=C(Z,{OkBtn:BC,CancelBtn:FC})),Z=rt.createElement(AM,{value:G},Z)):Z=C,rt.createElement(LP,{disabled:!1},Z)},i$=e=>({animationDuration:e,animationFillMode:"both"}),o$=e=>({animationDuration:e,animationFillMode:"both"}),WM=function(e,t,r,a){const h=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${h}${e}-enter,
      ${h}${e}-appear
    `]:Object.assign(Object.assign({},i$(a)),{animationPlayState:"paused"}),[`${h}${e}-leave`]:Object.assign(Object.assign({},o$(a)),{animationPlayState:"paused"}),[`
      ${h}${e}-enter${e}-enter-active,
      ${h}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${h}${e}-leave${e}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},a$=new Ni("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),s$=new Ni("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),l$=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=e,a=`${r}-fade`,l=t?"&":"";return[WM(a,a$,s$,e.motionDurationMid,t),{[`
        ${l}${a}-enter,
        ${l}${a}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${l}${a}-leave`]:{animationTimingFunction:"linear"}}]},c$=new Ni("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),u$=new Ni("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),$C=new Ni("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),NC=new Ni("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),d$=new Ni("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),h$=new Ni("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),f$=new Ni("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),p$=new Ni("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),m$=new Ni("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),g$=new Ni("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),y$=new Ni("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),v$=new Ni("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),_$={zoom:{inKeyframes:c$,outKeyframes:u$},"zoom-big":{inKeyframes:$C,outKeyframes:NC},"zoom-big-fast":{inKeyframes:$C,outKeyframes:NC},"zoom-left":{inKeyframes:f$,outKeyframes:p$},"zoom-right":{inKeyframes:m$,outKeyframes:g$},"zoom-up":{inKeyframes:d$,outKeyframes:h$},"zoom-down":{inKeyframes:y$,outKeyframes:v$}},x$=(e,t)=>{const{antCls:r}=e,a=`${r}-${t}`,{inKeyframes:l,outKeyframes:h}=_$[t];return[WM(a,l,h,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]};function jC(e){return{position:e,inset:0}}const b$=e=>{const{componentCls:t,antCls:r}=e;return[{[`${t}-root`]:{[`${t}${r}-zoom-enter, ${t}${r}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${r}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},jC("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},jC("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:l$(e)}]},w$=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${_t(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},qa(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${_t(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:`${_t(e.modalCloseBtnSize)}`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},WP(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${_t(e.borderRadiusLG)} ${_t(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},S$=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},GM=e=>{const t=e.padding,r=e.fontSizeHeading5,a=e.lineHeightHeading5;return Po(e,{modalHeaderHeight:e.calc(e.calc(a).mul(r).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},qM=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${_t(e.paddingMD)} ${_t(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${_t(e.padding)} ${_t(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${_t(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${_t(e.paddingXS)} ${_t(e.padding)}`:0,footerBorderTop:e.wireframe?`${_t(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${_t(e.borderRadiusLG)} ${_t(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${_t(e.padding*2)} ${_t(e.padding*2)} ${_t(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),ZM=bf("Modal",e=>{const t=GM(e);return[w$(t),S$(t),b$(t),x$(t,"zoom")]},qM,{unitless:{titleLineHeight:!0}});var C$=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};let y1;const E$=e=>{y1={x:e.pageX,y:e.pageY},setTimeout(()=>{y1=null},100)};a8()&&document.documentElement.addEventListener("click",E$,!0);const KM=e=>{var t;const{getPopupContainer:r,getPrefixCls:a,direction:l,modal:h}=L.useContext(li),f=$e=>{const{onCancel:Ve}=e;Ve==null||Ve($e)},u=$e=>{const{onOk:Ve}=e;Ve==null||Ve($e)},{prefixCls:w,className:C,rootClassName:I,open:k,wrapClassName:A,centered:q,getContainer:G,focusTriggerAfterClose:Z=!0,style:K,visible:j,width:O=520,footer:$,classNames:J,styles:ne}=e,oe=C$(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),le=a("modal",w),be=a(),Ee=Sf(le),[ke,Ae,Ye]=ZM(le,Ee),He=$t(A,{[`${le}-centered`]:!!q,[`${le}-wrap-rtl`]:l==="rtl"}),Le=$!==null&&L.createElement(HM,Object.assign({},e,{onOk:u,onCancel:f})),[Je,Oe]=o8(wC(e),wC(h),{closable:!0,closeIcon:L.createElement(jx,{className:`${le}-close-icon`}),closeIconRender:$e=>UM(le,$e)}),Pe=n$(`.${le}-content`),[xe,De]=ZF("Modal",oe.zIndex);return ke(L.createElement(i1,null,L.createElement(g1,{status:!0,override:!0},L.createElement(mM.Provider,{value:De},L.createElement(DM,Object.assign({width:O},oe,{zIndex:xe,getContainer:G===void 0?r:G,prefixCls:le,rootClassName:$t(Ae,I,Ye,Ee),footer:Le,visible:k??j,mousePosition:(t=oe.mousePosition)!==null&&t!==void 0?t:y1,onClose:f,closable:Je,closeIcon:Oe,focusTriggerAfterClose:Z,transitionName:vg(be,"zoom",e.transitionName),maskTransitionName:vg(be,"fade",e.maskTransitionName),className:$t(Ae,C,h==null?void 0:h.className),style:Object.assign(Object.assign({},h==null?void 0:h.style),K),classNames:Object.assign(Object.assign(Object.assign({},h==null?void 0:h.classNames),J),{wrapper:$t(He,J==null?void 0:J.wrapper)}),styles:Object.assign(Object.assign({},h==null?void 0:h.styles),ne),panelRef:Pe}))))))},T$=e=>{const{componentCls:t,titleFontSize:r,titleLineHeight:a,modalConfirmIconSize:l,fontSize:h,lineHeight:f,modalTitleHeight:u,fontHeight:w,confirmBodyPadding:C}=e,I=`${t}-confirm`;return{[I]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${I}-body-wrapper`]:Object.assign({},HP()),[`&${t} ${t}-body`]:{padding:C},[`${I}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:l,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(w).sub(l).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(l).equal()).div(2).equal()}},[`${I}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${I}-paragraph`]:{maxWidth:`calc(100% - ${_t(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${I}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:r,lineHeight:a},[`${I}-content`]:{color:e.colorText,fontSize:h,lineHeight:f},[`${I}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${I}-error ${I}-body > ${e.iconCls}`]:{color:e.colorError},[`${I}-warning ${I}-body > ${e.iconCls},
        ${I}-confirm ${I}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${I}-info ${I}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${I}-success ${I}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},I$=XP(["Modal","confirm"],e=>{const t=GM(e);return[T$(t)]},qM,{order:-1e3});var P$=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};function XM(e){const{prefixCls:t,icon:r,okText:a,cancelText:l,confirmPrefixCls:h,type:f,okCancel:u,footer:w,locale:C}=e,I=P$(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let k=r;if(!r&&r!==null)switch(f){case"info":k=L.createElement(LF,null);break;case"success":k=L.createElement(SF,null);break;case"error":k=L.createElement(TF,null);break;default:k=L.createElement(AF,null)}const A=u??f==="confirm",q=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[G]=Dx("Modal"),Z=C||G,K=a||(A?Z==null?void 0:Z.okText:Z==null?void 0:Z.justOkText),j=l||(Z==null?void 0:Z.cancelText),O=Object.assign({autoFocusButton:q,cancelTextLocale:j,okTextLocale:K,mergedOkCancel:A},I),$=L.useMemo(()=>O,Rt(Object.values(O))),J=L.createElement(L.Fragment,null,L.createElement(hC,null),L.createElement(fC,null)),ne=e.title!==void 0&&e.title!==null,oe=`${h}-body`;return L.createElement("div",{className:`${h}-body-wrapper`},L.createElement("div",{className:$t(oe,{[`${oe}-has-title`]:ne})},k,L.createElement("div",{className:`${h}-paragraph`},ne&&L.createElement("span",{className:`${h}-title`},e.title),L.createElement("div",{className:`${h}-content`},e.content))),w===void 0||typeof w=="function"?L.createElement(AM,{value:$},L.createElement("div",{className:`${h}-btns`},typeof w=="function"?w(J,{OkBtn:fC,CancelBtn:hC}):J)):w,L.createElement(I$,{prefixCls:t}))}const M$=e=>{const{close:t,zIndex:r,afterClose:a,open:l,keyboard:h,centered:f,getContainer:u,maskStyle:w,direction:C,prefixCls:I,wrapClassName:k,rootPrefixCls:A,bodyStyle:q,closable:G=!1,closeIcon:Z,modalRender:K,focusTriggerAfterClose:j,onConfirm:O,styles:$}=e,J=`${I}-confirm`,ne=e.width||416,oe=e.style||{},le=e.mask===void 0?!0:e.mask,be=e.maskClosable===void 0?!1:e.maskClosable,Ee=$t(J,`${J}-${e.type}`,{[`${J}-rtl`]:C==="rtl"},e.className),[,ke]=_a(),Ae=L.useMemo(()=>r!==void 0?r:ke.zIndexPopupBase+gM,[r,ke]);return L.createElement(KM,{prefixCls:I,className:Ee,wrapClassName:$t({[`${J}-centered`]:!!e.centered},k),onCancel:()=>{t==null||t({triggerCancel:!0}),O==null||O(!1)},open:l,title:"",footer:null,transitionName:vg(A||"","zoom",e.transitionName),maskTransitionName:vg(A||"","fade",e.maskTransitionName),mask:le,maskClosable:be,style:oe,styles:Object.assign({body:q,mask:w},$),width:ne,zIndex:Ae,afterClose:a,keyboard:h,centered:f,getContainer:u,closable:G,closeIcon:Z,modalRender:K,focusTriggerAfterClose:j},L.createElement(XM,Object.assign({},e,{confirmPrefixCls:J})))},YM=e=>{const{rootPrefixCls:t,iconPrefixCls:r,direction:a,theme:l}=e;return L.createElement(uy,{prefixCls:t,iconPrefixCls:r,direction:a,theme:l},L.createElement(M$,Object.assign({},e)))},Nl=[];let JM="";function QM(){return JM}const k$=e=>{var t,r;const{prefixCls:a,getContainer:l,direction:h}=e,f=IP(),u=L.useContext(li),w=QM()||u.getPrefixCls(),C=a||`${w}-modal`;let I=l;return I===!1&&(I=void 0),rt.createElement(YM,Object.assign({},e,{rootPrefixCls:w,prefixCls:C,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:h??u.direction,locale:(r=(t=u.locale)===null||t===void 0?void 0:t.Modal)!==null&&r!==void 0?r:f,getContainer:I}))};function Pf(e){const t=lF(),r=document.createDocumentFragment();let a=Object.assign(Object.assign({},e),{close:u,open:!0}),l;function h(){for(var C=arguments.length,I=new Array(C),k=0;k<C;k++)I[k]=arguments[k];const A=I.some(q=>q&&q.triggerCancel);e.onCancel&&A&&e.onCancel.apply(e,[()=>{}].concat(Rt(I.slice(1))));for(let q=0;q<Nl.length;q++)if(Nl[q]===u){Nl.splice(q,1);break}_M(r)}function f(C){clearTimeout(l),l=setTimeout(()=>{const I=t.getPrefixCls(void 0,QM()),k=t.getIconPrefixCls(),A=t.getTheme(),q=rt.createElement(k$,Object.assign({},C));vM(rt.createElement(uy,{prefixCls:I,iconPrefixCls:k,theme:A},t.holderRender?t.holderRender(q):q),r)})}function u(){for(var C=arguments.length,I=new Array(C),k=0;k<C;k++)I[k]=arguments[k];a=Object.assign(Object.assign({},a),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),h.apply(this,I)}}),a.visible&&delete a.visible,f(a)}function w(C){typeof C=="function"?a=C(a):a=Object.assign(Object.assign({},a),C),f(a)}return f(a),Nl.push(u),{destroy:u,update:w}}function ek(e){return Object.assign(Object.assign({},e),{type:"warning"})}function tk(e){return Object.assign(Object.assign({},e),{type:"info"})}function rk(e){return Object.assign(Object.assign({},e),{type:"success"})}function nk(e){return Object.assign(Object.assign({},e),{type:"error"})}function ik(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function A$(e){let{rootPrefixCls:t}=e;JM=t}var R$=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const z$=(e,t)=>{var r,{afterClose:a,config:l}=e,h=R$(e,["afterClose","config"]);const[f,u]=L.useState(!0),[w,C]=L.useState(l),{direction:I,getPrefixCls:k}=L.useContext(li),A=k("modal"),q=k(),G=()=>{var O;a(),(O=w.afterClose)===null||O===void 0||O.call(w)},Z=function(){u(!1);for(var O=arguments.length,$=new Array(O),J=0;J<O;J++)$[J]=arguments[J];const ne=$.some(oe=>oe&&oe.triggerCancel);w.onCancel&&ne&&w.onCancel.apply(w,[()=>{}].concat(Rt($.slice(1))))};L.useImperativeHandle(t,()=>({destroy:Z,update:O=>{C($=>Object.assign(Object.assign({},$),O))}}));const K=(r=w.okCancel)!==null&&r!==void 0?r:w.type==="confirm",[j]=Dx("Modal",nc.Modal);return L.createElement(YM,Object.assign({prefixCls:A,rootPrefixCls:q},w,{close:Z,open:f,afterClose:G,okText:w.okText||(K?j==null?void 0:j.okText:j==null?void 0:j.justOkText),direction:w.direction||I,cancelText:w.cancelText||(j==null?void 0:j.cancelText)},h))},L$=L.forwardRef(z$);let VC=0;const O$=L.memo(L.forwardRef((e,t)=>{const[r,a]=KF();return L.useImperativeHandle(t,()=>({patchElement:a}),[]),L.createElement(L.Fragment,null,r)}));function D$(){const e=L.useRef(null),[t,r]=L.useState([]);L.useEffect(()=>{t.length&&(Rt(t).forEach(f=>{f()}),r([]))},[t]);const a=L.useCallback(h=>function(u){var w;VC+=1;const C=L.createRef();let I;const k=new Promise(K=>{I=K});let A=!1,q;const G=L.createElement(L$,{key:`modal-${VC}`,config:h(u),ref:C,afterClose:()=>{q==null||q()},isSilent:()=>A,onConfirm:K=>{I(K)}});return q=(w=e.current)===null||w===void 0?void 0:w.patchElement(G),q&&Nl.push(q),{destroy:()=>{function K(){var j;(j=C.current)===null||j===void 0||j.destroy()}C.current?K():r(j=>[].concat(Rt(j),[K]))},update:K=>{function j(){var O;(O=C.current)===null||O===void 0||O.update(K)}C.current?j():r(O=>[].concat(Rt(O),[j]))},then:K=>(A=!0,k.then(K))}},[]);return[L.useMemo(()=>({info:a(tk),success:a(rk),error:a(nk),warning:a(ek),confirm:a(ik)}),[]),L.createElement(O$,{key:"modal-holder",ref:e})]}function F$(e){return t=>L.createElement(uy,{theme:{token:{motion:!1,zIndexPopupBase:0}}},L.createElement(e,Object.assign({},t)))}const B$=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};function UC(e,t,r){return $t({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:r})}const $$=(e,t)=>t||e,N$=["outlined","borderless","filled"],j$=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const r=L.useContext(t$);let a;typeof e<"u"?a=e:t===!1?a="borderless":a=r??"outlined";const l=N$.includes(a);return[a,l]};var V$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},U$=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:V$}))},H$=L.forwardRef(U$);const ok=L.createContext(null),W$=ok.Provider,ak=L.createContext(null),G$=ak.Provider;var q$=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Z$=L.forwardRef(function(e,t){var r=e.prefixCls,a=r===void 0?"rc-checkbox":r,l=e.className,h=e.style,f=e.checked,u=e.disabled,w=e.defaultChecked,C=w===void 0?!1:w,I=e.type,k=I===void 0?"checkbox":I,A=e.title,q=e.onChange,G=ea(e,q$),Z=L.useRef(null),K=L.useRef(null),j=VP(C,{value:f}),O=Tt(j,2),$=O[0],J=O[1];L.useImperativeHandle(t,function(){return{focus:function(be){var Ee;(Ee=Z.current)===null||Ee===void 0||Ee.focus(be)},blur:function(){var be;(be=Z.current)===null||be===void 0||be.blur()},input:Z.current,nativeElement:K.current}});var ne=$t(a,l,Me(Me({},"".concat(a,"-checked"),$),"".concat(a,"-disabled"),u)),oe=function(be){u||("checked"in e||J(be.target.checked),q==null||q({target:Xe(Xe({},e),{},{type:k,checked:be.target.checked}),stopPropagation:function(){be.stopPropagation()},preventDefault:function(){be.preventDefault()},nativeEvent:be.nativeEvent}))};return L.createElement("span",{className:ne,title:A,style:h,ref:K},L.createElement("input",pr({},G,{className:"".concat(a,"-input"),ref:Z,onChange:oe,disabled:u,checked:!!$,type:k})),L.createElement("span",{className:"".concat(a,"-inner")}))});const K$=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-group`;return{[a]:Object.assign(Object.assign({},qa(e)),{display:"inline-block",fontSize:0,[`&${a}-rtl`]:{direction:"rtl"},[`${r}-badge ${r}-badge-count`]:{zIndex:1},[`> ${r}-badge:not(:first-child) > ${r}-button-wrapper`]:{borderInlineStart:"none"}})}},X$=e=>{const{componentCls:t,wrapperMarginInlineEnd:r,colorPrimary:a,radioSize:l,motionDurationSlow:h,motionDurationMid:f,motionEaseInOutCirc:u,colorBgContainer:w,colorBorder:C,lineWidth:I,colorBgContainerDisabled:k,colorTextDisabled:A,paddingXS:q,dotColorDisabled:G,lineType:Z,radioColor:K,radioBgColor:j,calc:O}=e,$=`${t}-inner`,ne=O(l).sub(O(4).mul(2)),oe=O(1).mul(l).equal();return{[`${t}-wrapper`]:Object.assign(Object.assign({},qa(e)),{display:"inline-flex",alignItems:"baseline",marginInlineStart:0,marginInlineEnd:r,cursor:"pointer",[`&${t}-wrapper-rtl`]:{direction:"rtl"},"&-disabled":{cursor:"not-allowed",color:e.colorTextDisabled},"&::after":{display:"inline-block",width:0,overflow:"hidden",content:'"\\a0"'},[`${t}-checked::after`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:"100%",height:"100%",border:`${_t(I)} ${Z} ${a}`,borderRadius:"50%",visibility:"hidden",opacity:0,content:'""'},[t]:Object.assign(Object.assign({},qa(e)),{position:"relative",display:"inline-block",outline:"none",cursor:"pointer",alignSelf:"center",borderRadius:"50%"}),[`${t}-wrapper:hover &,
        &:hover ${$}`]:{borderColor:a},[`${t}-input:focus-visible + ${$}`]:Object.assign({},Bx(e)),[`${t}:hover::after, ${t}-wrapper:hover &::after`]:{visibility:"visible"},[`${t}-inner`]:{"&::after":{boxSizing:"border-box",position:"absolute",insetBlockStart:"50%",insetInlineStart:"50%",display:"block",width:oe,height:oe,marginBlockStart:O(1).mul(l).div(-2).equal(),marginInlineStart:O(1).mul(l).div(-2).equal(),backgroundColor:K,borderBlockStart:0,borderInlineStart:0,borderRadius:oe,transform:"scale(0)",opacity:0,transition:`all ${h} ${u}`,content:'""'},boxSizing:"border-box",position:"relative",insetBlockStart:0,insetInlineStart:0,display:"block",width:oe,height:oe,backgroundColor:w,borderColor:C,borderStyle:"solid",borderWidth:I,borderRadius:"50%",transition:`all ${f}`},[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0},[`${t}-checked`]:{[$]:{borderColor:a,backgroundColor:j,"&::after":{transform:`scale(${e.calc(e.dotSize).div(l).equal()})`,opacity:1,transition:`all ${h} ${u}`}}},[`${t}-disabled`]:{cursor:"not-allowed",[$]:{backgroundColor:k,borderColor:C,cursor:"not-allowed","&::after":{backgroundColor:G}},[`${t}-input`]:{cursor:"not-allowed"},[`${t}-disabled + span`]:{color:A,cursor:"not-allowed"},[`&${t}-checked`]:{[$]:{"&::after":{transform:`scale(${O(ne).div(l).equal({unit:!1})})`}}}},[`span${t} + *`]:{paddingInlineStart:q,paddingInlineEnd:q}})}},Y$=e=>{const{buttonColor:t,controlHeight:r,componentCls:a,lineWidth:l,lineType:h,colorBorder:f,motionDurationSlow:u,motionDurationMid:w,buttonPaddingInline:C,fontSize:I,buttonBg:k,fontSizeLG:A,controlHeightLG:q,controlHeightSM:G,paddingXS:Z,borderRadius:K,borderRadiusSM:j,borderRadiusLG:O,buttonCheckedBg:$,buttonSolidCheckedColor:J,colorTextDisabled:ne,colorBgContainerDisabled:oe,buttonCheckedBgDisabled:le,buttonCheckedColorDisabled:be,colorPrimary:Ee,colorPrimaryHover:ke,colorPrimaryActive:Ae,buttonSolidCheckedBg:Ye,buttonSolidCheckedHoverBg:He,buttonSolidCheckedActiveBg:Le,calc:Je}=e;return{[`${a}-button-wrapper`]:{position:"relative",display:"inline-block",height:r,margin:0,paddingInline:C,paddingBlock:0,color:t,fontSize:I,lineHeight:_t(Je(r).sub(Je(l).mul(2)).equal()),background:k,border:`${_t(l)} ${h} ${f}`,borderBlockStartWidth:Je(l).add(.02).equal(),borderInlineStartWidth:0,borderInlineEndWidth:l,cursor:"pointer",transition:[`color ${w}`,`background ${w}`,`box-shadow ${w}`].join(","),a:{color:t},[`> ${a}-button`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:-1,width:"100%",height:"100%"},"&:not(:first-child)":{"&::before":{position:"absolute",insetBlockStart:Je(l).mul(-1).equal(),insetInlineStart:Je(l).mul(-1).equal(),display:"block",boxSizing:"content-box",width:1,height:"100%",paddingBlock:l,paddingInline:0,backgroundColor:f,transition:`background-color ${u}`,content:'""'}},"&:first-child":{borderInlineStart:`${_t(l)} ${h} ${f}`,borderStartStartRadius:K,borderEndStartRadius:K},"&:last-child":{borderStartEndRadius:K,borderEndEndRadius:K},"&:first-child:last-child":{borderRadius:K},[`${a}-group-large &`]:{height:q,fontSize:A,lineHeight:_t(Je(q).sub(Je(l).mul(2)).equal()),"&:first-child":{borderStartStartRadius:O,borderEndStartRadius:O},"&:last-child":{borderStartEndRadius:O,borderEndEndRadius:O}},[`${a}-group-small &`]:{height:G,paddingInline:Je(Z).sub(l).equal(),paddingBlock:0,lineHeight:_t(Je(G).sub(Je(l).mul(2)).equal()),"&:first-child":{borderStartStartRadius:j,borderEndStartRadius:j},"&:last-child":{borderStartEndRadius:j,borderEndEndRadius:j}},"&:hover":{position:"relative",color:Ee},"&:has(:focus-visible)":Object.assign({},Bx(e)),[`${a}-inner, input[type='checkbox'], input[type='radio']`]:{width:0,height:0,opacity:0,pointerEvents:"none"},[`&-checked:not(${a}-button-wrapper-disabled)`]:{zIndex:1,color:Ee,background:$,borderColor:Ee,"&::before":{backgroundColor:Ee},"&:first-child":{borderColor:Ee},"&:hover":{color:ke,borderColor:ke,"&::before":{backgroundColor:ke}},"&:active":{color:Ae,borderColor:Ae,"&::before":{backgroundColor:Ae}}},[`${a}-group-solid &-checked:not(${a}-button-wrapper-disabled)`]:{color:J,background:Ye,borderColor:Ye,"&:hover":{color:J,background:He,borderColor:He},"&:active":{color:J,background:Le,borderColor:Le}},"&-disabled":{color:ne,backgroundColor:oe,borderColor:f,cursor:"not-allowed","&:first-child, &:hover":{color:ne,backgroundColor:oe,borderColor:f}},[`&-disabled${a}-button-wrapper-checked`]:{color:be,backgroundColor:le,borderColor:f,boxShadow:"none"}}}},J$=e=>{const{wireframe:t,padding:r,marginXS:a,lineWidth:l,fontSizeLG:h,colorText:f,colorBgContainer:u,colorTextDisabled:w,controlItemBgActiveDisabled:C,colorTextLightSolid:I,colorPrimary:k,colorPrimaryHover:A,colorPrimaryActive:q,colorWhite:G}=e,Z=4,K=h,j=t?K-Z*2:K-(Z+l)*2;return{radioSize:K,dotSize:j,dotColorDisabled:w,buttonSolidCheckedColor:I,buttonSolidCheckedBg:k,buttonSolidCheckedHoverBg:A,buttonSolidCheckedActiveBg:q,buttonBg:u,buttonCheckedBg:u,buttonColor:f,buttonCheckedBgDisabled:C,buttonCheckedColorDisabled:w,buttonPaddingInline:r-l,wrapperMarginInlineEnd:a,radioColor:t?k:G,radioBgColor:t?u:k}},sk=bf("Radio",e=>{const{controlOutline:t,controlOutlineWidth:r}=e,a=`0 0 0 ${_t(r)} ${t}`,h=Po(e,{radioFocusShadow:a,radioButtonFocusShadow:a});return[K$(h),X$(h),Y$(h)]},J$,{unitless:{radioSize:!0,dotSize:!0}});var Q$=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const eN=(e,t)=>{var r,a;const l=L.useContext(ok),h=L.useContext(ak),{getPrefixCls:f,direction:u,radio:w}=L.useContext(li),C=L.useRef(null),I=$u(t,C),{isFormItemInput:k}=L.useContext(bg),A=Le=>{var Je,Oe;(Je=e.onChange)===null||Je===void 0||Je.call(e,Le),(Oe=l==null?void 0:l.onChange)===null||Oe===void 0||Oe.call(l,Le)},{prefixCls:q,className:G,rootClassName:Z,children:K,style:j,title:O}=e,$=Q$(e,["prefixCls","className","rootClassName","children","style","title"]),J=f("radio",q),ne=((l==null?void 0:l.optionType)||h)==="button",oe=ne?`${J}-button`:J,le=Sf(J),[be,Ee,ke]=sk(J,le),Ae=Object.assign({},$),Ye=L.useContext(cy);l&&(Ae.name=l.name,Ae.onChange=A,Ae.checked=e.value===l.value,Ae.disabled=(r=Ae.disabled)!==null&&r!==void 0?r:l.disabled),Ae.disabled=(a=Ae.disabled)!==null&&a!==void 0?a:Ye;const He=$t(`${oe}-wrapper`,{[`${oe}-wrapper-checked`]:Ae.checked,[`${oe}-wrapper-disabled`]:Ae.disabled,[`${oe}-wrapper-rtl`]:u==="rtl",[`${oe}-wrapper-in-form-item`]:k},w==null?void 0:w.className,G,Z,Ee,ke,le);return be(L.createElement(xM,{component:"Radio",disabled:Ae.disabled},L.createElement("label",{className:He,style:Object.assign(Object.assign({},w==null?void 0:w.style),j),onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,title:O},L.createElement(Z$,Object.assign({},Ae,{className:$t(Ae.className,!ne&&Vx),type:"radio",prefixCls:oe,ref:I})),K!==void 0?L.createElement("span",null,K):null)))},wg=L.forwardRef(eN),tN=L.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=L.useContext(li),[l,h]=VP(e.defaultValue,{value:e.value}),f=Le=>{const Je=l,Oe=Le.target.value;"value"in e||h(Oe);const{onChange:Pe}=e;Pe&&Oe!==Je&&Pe(Le)},{prefixCls:u,className:w,rootClassName:C,options:I,buttonStyle:k="outline",disabled:A,children:q,size:G,style:Z,id:K,onMouseEnter:j,onMouseLeave:O,onFocus:$,onBlur:J}=e,ne=r("radio",u),oe=`${ne}-group`,le=Sf(ne),[be,Ee,ke]=sk(ne,le);let Ae=q;I&&I.length>0&&(Ae=I.map(Le=>typeof Le=="string"||typeof Le=="number"?L.createElement(wg,{key:Le.toString(),prefixCls:ne,disabled:A,value:Le,checked:l===Le},Le):L.createElement(wg,{key:`radio-group-value-options-${Le.value}`,prefixCls:ne,disabled:Le.disabled||A,value:Le.value,checked:l===Le.value,title:Le.title,style:Le.style,id:Le.id,required:Le.required},Le.label)));const Ye=Ux(G),He=$t(oe,`${oe}-${k}`,{[`${oe}-${Ye}`]:Ye,[`${oe}-rtl`]:a==="rtl"},w,C,Ee,ke,le);return be(L.createElement("div",Object.assign({},dy(e,{aria:!0,data:!0}),{className:He,style:Z,onMouseEnter:j,onMouseLeave:O,onFocus:$,onBlur:J,id:K,ref:t}),L.createElement(W$,{value:{onChange:f,value:l,disabled:e.disabled,name:e.name,optionType:e.optionType}},Ae)))}),rN=L.memo(tN);var nN=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const iN=(e,t)=>{const{getPrefixCls:r}=L.useContext(li),{prefixCls:a}=e,l=nN(e,["prefixCls"]),h=r("radio",a);return L.createElement(G$,{value:"button"},L.createElement(wg,Object.assign({prefixCls:h},l,{type:"radio",ref:t})))},oN=L.forwardRef(iN),jl=wg;jl.Button=oN;jl.Group=rN;jl.__ANT_RADIO=!0;function lk(e){return Po(e,{inputAffixPadding:e.paddingXXS})}const ck=e=>{const{controlHeight:t,fontSize:r,lineHeight:a,lineWidth:l,controlHeightSM:h,controlHeightLG:f,fontSizeLG:u,lineHeightLG:w,paddingSM:C,controlPaddingHorizontalSM:I,controlPaddingHorizontal:k,colorFillAlter:A,colorPrimaryHover:q,colorPrimary:G,controlOutlineWidth:Z,controlOutline:K,colorErrorOutline:j,colorWarningOutline:O,colorBgContainer:$}=e;return{paddingBlock:Math.max(Math.round((t-r*a)/2*10)/10-l,0),paddingBlockSM:Math.max(Math.round((h-r*a)/2*10)/10-l,0),paddingBlockLG:Math.ceil((f-u*w)/2*10)/10-l,paddingInline:C-l,paddingInlineSM:I-l,paddingInlineLG:k-l,addonBg:A,activeBorderColor:G,hoverBorderColor:q,activeShadow:`0 0 0 ${Z}px ${K}`,errorActiveShadow:`0 0 0 ${Z}px ${j}`,warningActiveShadow:`0 0 0 ${Z}px ${O}`,hoverBg:$,activeBg:$,inputFontSize:r,inputFontSizeLG:u,inputFontSizeSM:r}},aN=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),Zx=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},aN(Po(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),uk=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),HC=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},uk(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),dk=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uk(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Zx(e))}),HC(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),HC(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),WC=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),hk=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},WC(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),WC(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},Zx(e))}})}),fk=(e,t)=>({"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${e.componentCls}-disabled, &[disabled]`]:{color:e.colorTextDisabled}},t)}),pk=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:t==null?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),GC=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},pk(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),mk=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pk(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.colorPrimary})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Zx(e))}),GC(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),GC(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),qC=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),gk=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${_t(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${_t(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},qC(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),qC(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${_t(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),yk=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),vk=e=>{const{paddingBlockLG:t,lineHeightLG:r,borderRadiusLG:a,paddingInlineLG:l}=e;return{padding:`${_t(t)} ${_t(l)}`,fontSize:e.inputFontSizeLG,lineHeight:r,borderRadius:a}},_k=e=>({padding:`${_t(e.paddingBlockSM)} ${_t(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),fy=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${_t(e.paddingBlock)} ${_t(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},yk(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},vk(e)),"&-sm":Object.assign({},_k(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}}),xk=e=>{const{componentCls:t,antCls:r}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},vk(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},_k(e)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${_t(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`${_t(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${_t(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${_t(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}},"&-open, &-focused":{[`${r}-select-selector`]:{color:e.colorPrimary}}},[`${r}-cascader-picker`]:{margin:`-9px ${_t(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[`${t}`]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},HP()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}},"& > *":{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[`${t}`]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${t},
      & > ${r}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${t},
      & > ${r}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${t},
      & > ${r}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${r}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},sN=e=>{const{componentCls:t,controlHeightSM:r,lineWidth:a,calc:l}=e,f=l(r).sub(l(a).mul(2)).sub(16).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qa(e)),fy(e)),dk(e)),mk(e)),fk(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:r,paddingTop:f,paddingBottom:f}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},lN=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${_t(e.inputAffixPadding)}`}}}},cN=e=>{const{componentCls:t,inputAffixPadding:r,colorTextDescription:a,motionDurationSlow:l,colorIcon:h,colorIconHover:f,iconCls:u}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign(Object.assign(Object.assign({},fy(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}`]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:a},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),lN(e)),{[`${u}${t}-password-icon`]:{color:h,cursor:"pointer",transition:`all ${l}`,"&:hover":{color:f}}})}},uN=e=>{const{componentCls:t,borderRadiusLG:r,borderRadiusSM:a}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},qa(e)),xk(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:r,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:a}}},hk(e)),gk(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}}})})}},dN=e=>{const{componentCls:t,antCls:r}=e,a=`${t}-search`;return{[a]:{[`${t}`]:{"&:hover, &:focus":{borderColor:e.colorPrimaryHover,[`+ ${t}-group-addon ${a}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal({unit:!1})},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${a}-button`]:{marginInlineEnd:-1,paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0,boxShadow:"none"},[`${a}-button:not(${r}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${a}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},[`&-large ${a}-button`]:{height:e.controlHeightLG},[`&-small ${a}-button`]:{height:e.controlHeightSM},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover,&:focus,&:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},hN=e=>{const{componentCls:t,paddingLG:r}=e,a=`${t}-textarea`;return{[a]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},"&-allow-clear":{[`> ${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${a}-has-feedback`]:{[`${t}`]:{paddingInlineEnd:r}},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}}}}},fN=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}};bf("Input",e=>{const t=Po(e,lk(e));return[sN(t),hN(t),cN(t),uN(t),dN(t),fN(t),Gx(t)]},ck,{resetFont:!1});var pN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},mN=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:pN}))},gN=L.forwardRef(mN);function v1(){return typeof BigInt=="function"}function bk(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function Zl(e){var t=e.trim(),r=t.startsWith("-");r&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var a=t||"0",l=a.split("."),h=l[0]||"0",f=l[1]||"0";h==="0"&&f==="0"&&(r=!1);var u=r?"-":"";return{negative:r,negativeStr:u,trimStr:a,integerStr:h,decimalStr:f,fullStr:"".concat(u).concat(a)}}function Kx(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function Vl(e){var t=String(e);if(Kx(e)){var r=Number(t.slice(t.indexOf("e-")+2)),a=t.match(/\.(\d+)/);return a!=null&&a[1]&&(r+=a[1].length),r}return t.includes(".")&&Xx(t)?t.length-t.indexOf(".")-1:0}function py(e){var t=String(e);if(Kx(e)){if(e>Number.MAX_SAFE_INTEGER)return String(v1()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(v1()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(Vl(t))}return Zl(t).fullStr}function Xx(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var yN=function(){function e(t){if(ai(this,e),Me(this,"origin",""),Me(this,"negative",void 0),Me(this,"integer",void 0),Me(this,"decimal",void 0),Me(this,"decimalLen",void 0),Me(this,"empty",void 0),Me(this,"nan",void 0),bk(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var r=t;if(Kx(r)&&(r=Number(r)),r=typeof r=="string"?r:py(r),Xx(r)){var a=Zl(r);this.negative=a.negative;var l=a.trimStr.split(".");this.integer=BigInt(l[0]);var h=l[1]||"0";this.decimal=BigInt(h),this.decimalLen=h.length}else this.nan=!0}return si(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var a="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(a)}},{key:"negate",value:function(){var r=new e(this.toString());return r.negative=!r.negative,r}},{key:"cal",value:function(r,a,l){var h=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),f=this.alignDecimal(h),u=r.alignDecimal(h),w=a(f,u).toString(),C=l(h),I=Zl(w),k=I.negativeStr,A=I.trimStr,q="".concat(k).concat(A.padStart(C+1,"0"));return new e("".concat(q.slice(0,-C),".").concat(q.slice(-C)))}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var a=new e(r);return a.isInvalidate()?this:this.cal(a,function(l,h){return l+h},function(l){return l})}},{key:"multi",value:function(r){var a=new e(r);return this.isInvalidate()||a.isInvalidate()?new e(NaN):this.cal(a,function(l,h){return l*h},function(l){return l*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":Zl("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),vN=function(){function e(t){if(ai(this,e),Me(this,"origin",""),Me(this,"number",void 0),Me(this,"empty",void 0),bk(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return si(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new e(r);var a=Number(r);if(Number.isNaN(a))return this;var l=this.number+a;if(l>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(l<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var h=Math.max(Vl(this.number),Vl(a));return new e(l.toFixed(h))}},{key:"multi",value:function(r){var a=Number(r);if(this.isInvalidate()||Number.isNaN(a))return new e(NaN);var l=this.number*a;if(l>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(l<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var h=Math.max(Vl(this.number),Vl(a));return new e(l.toFixed(h))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":py(this.number):this.origin}}]),e}();function jo(e){return v1()?new yN(e):new vN(e)}function Om(e,t,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var l=Zl(e),h=l.negativeStr,f=l.integerStr,u=l.decimalStr,w="".concat(t).concat(u),C="".concat(h).concat(f);if(r>=0){var I=Number(u[r]);if(I>=5&&!a){var k=jo(e).add("".concat(h,"0.").concat("0".repeat(r)).concat(10-I));return Om(k.toString(),t,r,a)}return r===0?C:"".concat(C).concat(t).concat(u.padEnd(r,"0").slice(0,r))}return w===".0"?C:"".concat(C).concat(w)}function _N(e){return!!(e.addonBefore||e.addonAfter)}function xN(e){return!!(e.prefix||e.suffix||e.allowClear)}function bN(e,t){if(e){e.focus(t);var r=t||{},a=r.cursor;if(a){var l=e.value.length;switch(a){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(l,l);break;default:e.setSelectionRange(0,l)}}}}var wN=rt.forwardRef(function(e,t){var r,a,l=e.inputElement,h=e.children,f=e.prefixCls,u=e.prefix,w=e.suffix,C=e.addonBefore,I=e.addonAfter,k=e.className,A=e.style,q=e.disabled,G=e.readOnly,Z=e.focused,K=e.triggerFocus,j=e.allowClear,O=e.value,$=e.handleReset,J=e.hidden,ne=e.classes,oe=e.classNames,le=e.dataAttrs,be=e.styles,Ee=e.components,ke=h??l,Ae=(Ee==null?void 0:Ee.affixWrapper)||"span",Ye=(Ee==null?void 0:Ee.groupWrapper)||"span",He=(Ee==null?void 0:Ee.wrapper)||"span",Le=(Ee==null?void 0:Ee.groupAddon)||"span",Je=L.useRef(null),Oe=function(br){var ze;(ze=Je.current)!==null&&ze!==void 0&&ze.contains(br.target)&&(K==null||K())},Pe=xN(e),xe=L.cloneElement(ke,{value:O,className:$t(ke.props.className,!Pe&&(oe==null?void 0:oe.variant))||null}),De=L.useRef(null);if(rt.useImperativeHandle(t,function(){return{nativeElement:De.current||Je.current}}),Pe){var $e,Ve=null;if(j){var Ze,gt=!q&&!G&&O,Ct="".concat(f,"-clear-icon"),Ht=Qt(j)==="object"&&j!==null&&j!==void 0&&j.clearIcon?j.clearIcon:"✖";Ve=rt.createElement("span",{onClick:$,onMouseDown:function(br){return br.preventDefault()},className:$t(Ct,(Ze={},Me(Ze,"".concat(Ct,"-hidden"),!gt),Me(Ze,"".concat(Ct,"-has-suffix"),!!w),Ze)),role:"button",tabIndex:-1},Ht)}var Ut="".concat(f,"-affix-wrapper"),Nt=$t(Ut,($e={},Me($e,"".concat(f,"-disabled"),q),Me($e,"".concat(Ut,"-disabled"),q),Me($e,"".concat(Ut,"-focused"),Z),Me($e,"".concat(Ut,"-readonly"),G),Me($e,"".concat(Ut,"-input-with-clear-btn"),w&&j&&O),$e),ne==null?void 0:ne.affixWrapper,oe==null?void 0:oe.affixWrapper,oe==null?void 0:oe.variant),zt=(w||j)&&rt.createElement("span",{className:$t("".concat(f,"-suffix"),oe==null?void 0:oe.suffix),style:be==null?void 0:be.suffix},Ve,w);xe=rt.createElement(Ae,pr({className:Nt,style:be==null?void 0:be.affixWrapper,onClick:Oe},le==null?void 0:le.affixWrapper,{ref:Je}),u&&rt.createElement("span",{className:$t("".concat(f,"-prefix"),oe==null?void 0:oe.prefix),style:be==null?void 0:be.prefix},u),xe,zt)}if(_N(e)){var Lr="".concat(f,"-group"),Yr="".concat(Lr,"-addon"),xr="".concat(Lr,"-wrapper"),Cr=$t("".concat(f,"-wrapper"),Lr,ne==null?void 0:ne.wrapper,oe==null?void 0:oe.wrapper),Xt=$t(xr,Me({},"".concat(xr,"-disabled"),q),ne==null?void 0:ne.group,oe==null?void 0:oe.groupWrapper);xe=rt.createElement(Ye,{className:Xt,ref:De},rt.createElement(He,{className:Cr},C&&rt.createElement(Le,{className:Yr},C),xe,I&&rt.createElement(Le,{className:Yr},I)))}return rt.cloneElement(xe,{className:$t((r=xe.props)===null||r===void 0?void 0:r.className,k)||null,style:Xe(Xe({},(a=xe.props)===null||a===void 0?void 0:a.style),A),hidden:J})});function SN(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(a,l){if(t[l])return t[l];var h=a[l];return typeof h=="function"?h.bind(a):h}}):e}function CN(e,t){var r=L.useRef(null);function a(){try{var h=e.selectionStart,f=e.selectionEnd,u=e.value,w=u.substring(0,h),C=u.substring(f);r.current={start:h,end:f,value:u,beforeTxt:w,afterTxt:C}}catch{}}function l(){if(e&&r.current&&t)try{var h=e.value,f=r.current,u=f.beforeTxt,w=f.afterTxt,C=f.start,I=h.length;if(h.endsWith(w))I=h.length-r.current.afterTxt.length;else if(h.startsWith(u))I=u.length;else{var k=u[C-1],A=h.indexOf(k,C-1);A!==-1&&(I=A+1)}e.setSelectionRange(I,I)}catch(q){Bi(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(q.message))}}return[a,l]}var EN=function(){var t=L.useState(!1),r=Tt(t,2),a=r[0],l=r[1];return ku(function(){l(B$())},[]),a},TN=200,IN=600;function PN(e){var t=e.prefixCls,r=e.upNode,a=e.downNode,l=e.upDisabled,h=e.downDisabled,f=e.onStep,u=L.useRef(),w=L.useRef([]),C=L.useRef();C.current=f;var I=function(){clearTimeout(u.current)},k=function($,J){$.preventDefault(),I(),C.current(J);function ne(){C.current(J),u.current=setTimeout(ne,TN)}u.current=setTimeout(ne,IN)};L.useEffect(function(){return function(){I(),w.current.forEach(function(O){return Qo.cancel(O)})}},[]);var A=EN();if(A)return null;var q="".concat(t,"-handler"),G=$t(q,"".concat(q,"-up"),Me({},"".concat(q,"-up-disabled"),l)),Z=$t(q,"".concat(q,"-down"),Me({},"".concat(q,"-down-disabled"),h)),K=function(){return w.current.push(Qo(I))},j={unselectable:"on",role:"button",onMouseUp:K,onMouseLeave:K};return L.createElement("div",{className:"".concat(q,"-wrap")},L.createElement("span",pr({},j,{onMouseDown:function($){k($,!0)},"aria-label":"Increase Value","aria-disabled":l,className:G}),r||L.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),L.createElement("span",pr({},j,{onMouseDown:function($){k($,!1)},"aria-label":"Decrease Value","aria-disabled":h,className:Z}),a||L.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function ZC(e){var t=typeof e=="number"?py(e):Zl(e).fullStr,r=t.includes(".");return r?Zl(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const MN=function(){var e=L.useRef(0),t=function(){Qo.cancel(e.current)};return L.useEffect(function(){return t},[]),function(r){t(),e.current=Qo(function(){r()})}};var kN=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],AN=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],KC=function(t,r){return t||r.isEmpty()?r.toString():r.toNumber()},XC=function(t){var r=jo(t);return r.isInvalidate()?null:r},RN=L.forwardRef(function(e,t){var r=e.prefixCls,a=e.className,l=e.style,h=e.min,f=e.max,u=e.step,w=u===void 0?1:u,C=e.defaultValue,I=e.value,k=e.disabled,A=e.readOnly,q=e.upHandler,G=e.downHandler,Z=e.keyboard,K=e.changeOnWheel,j=K===void 0?!1:K,O=e.controls,$=O===void 0?!0:O;e.classNames;var J=e.stringMode,ne=e.parser,oe=e.formatter,le=e.precision,be=e.decimalSeparator,Ee=e.onChange,ke=e.onInput,Ae=e.onPressEnter,Ye=e.onStep,He=e.changeOnBlur,Le=He===void 0?!0:He,Je=e.domRef,Oe=ea(e,kN),Pe="".concat(r,"-input"),xe=L.useRef(null),De=L.useState(!1),$e=Tt(De,2),Ve=$e[0],Ze=$e[1],gt=L.useRef(!1),Ct=L.useRef(!1),Ht=L.useRef(!1),Ut=L.useState(function(){return jo(I??C)}),Nt=Tt(Ut,2),zt=Nt[0],Lr=Nt[1];function Yr(Q){I===void 0&&Lr(Q)}var xr=L.useCallback(function(Q,B){if(!B)return le>=0?le:Math.max(Vl(Q),Vl(w))},[le,w]),Cr=L.useCallback(function(Q){var B=String(Q);if(ne)return ne(B);var U=B;return be&&(U=U.replace(be,".")),U.replace(/[^\w.-]+/g,"")},[ne,be]),Xt=L.useRef(""),er=L.useCallback(function(Q,B){if(oe)return oe(Q,{userTyping:B,input:String(Xt.current)});var U=typeof Q=="number"?py(Q):Q;if(!B){var H=xr(U,B);if(Xx(U)&&(be||H>=0)){var ae=be||".";U=Om(U,ae,H)}}return U},[oe,xr,be]),br=L.useState(function(){var Q=C??I;return zt.isInvalidate()&&["string","number"].includes(Qt(Q))?Number.isNaN(Q)?"":Q:er(zt.toString(),!1)}),ze=Tt(br,2),kr=ze[0],Sn=ze[1];Xt.current=kr;function Et(Q,B){Sn(er(Q.isInvalidate()?Q.toString(!1):Q.toString(!B),B))}var Mt=L.useMemo(function(){return XC(f)},[f,le]),sr=L.useMemo(function(){return XC(h)},[h,le]),ln=L.useMemo(function(){return!Mt||!zt||zt.isInvalidate()?!1:Mt.lessEquals(zt)},[Mt,zt]),ci=L.useMemo(function(){return!sr||!zt||zt.isInvalidate()?!1:zt.lessEquals(sr)},[sr,zt]),ui=CN(xe.current,Ve),yn=Tt(ui,2),yr=yn[0],Ur=yn[1],Qe=function(B){return Mt&&!B.lessEquals(Mt)?Mt:sr&&!sr.lessEquals(B)?sr:null},Jr=function(B){return!Qe(B)},Hr=function(B,U){var H=B,ae=Jr(H)||H.isEmpty();if(!H.isEmpty()&&!U&&(H=Qe(H)||H,ae=!0),!A&&!k&&ae){var ge=H.toString(),fe=xr(ge,U);return fe>=0&&(H=jo(Om(ge,".",fe)),Jr(H)||(H=jo(Om(ge,".",fe,!0)))),H.equals(zt)||(Yr(H),Ee==null||Ee(H.isEmpty()?null:KC(J,H)),I===void 0&&Et(H,U)),H}return zt},co=MN(),Ti=function Q(B){if(yr(),Xt.current=B,Sn(B),!Ct.current){var U=Cr(B),H=jo(U);H.isNaN()||Hr(H,!0)}ke==null||ke(B),co(function(){var ae=B;ne||(ae=B.replace(/。/g,".")),ae!==B&&Q(ae)})},et=function(){Ct.current=!0},Ot=function(){Ct.current=!1,Ti(xe.current.value)},kt=function(B){Ti(B.target.value)},Wr=function(B){var U;if(!(B&&ln||!B&&ci)){gt.current=!1;var H=jo(Ht.current?ZC(w):w);B||(H=H.negate());var ae=(zt||jo(0)).add(H.toString()),ge=Hr(ae,!1);Ye==null||Ye(KC(J,ge),{offset:Ht.current?ZC(w):w,type:B?"up":"down"}),(U=xe.current)===null||U===void 0||U.focus()}},Gr=function(B){var U=jo(Cr(kr)),H;U.isNaN()?H=Hr(zt,B):H=Hr(U,B),I!==void 0?Et(zt,!1):H.isNaN()||Et(H,!1)},It=function(){gt.current=!0},Cn=function(B){var U=B.key,H=B.shiftKey;gt.current=!0,Ht.current=H,U==="Enter"&&(Ct.current||(gt.current=!1),Gr(!1),Ae==null||Ae(B)),Z!==!1&&!Ct.current&&["Up","ArrowUp","Down","ArrowDown"].includes(U)&&(Wr(U==="Up"||U==="ArrowUp"),B.preventDefault())},Xn=function(){gt.current=!1,Ht.current=!1};L.useEffect(function(){if(j&&Ve){var Q=function(H){Wr(H.deltaY<0),H.preventDefault()},B=xe.current;if(B)return B.addEventListener("wheel",Q,{passive:!1}),function(){return B.removeEventListener("wheel",Q)}}});var Er=function(){Le&&Gr(!1),Ze(!1),gt.current=!1};return kh(function(){zt.isInvalidate()||Et(zt,!1)},[le,oe]),kh(function(){var Q=jo(I);Lr(Q);var B=jo(Cr(kr));(!Q.equals(B)||!gt.current||oe)&&Et(Q,gt.current)},[I]),kh(function(){oe&&Ur()},[kr]),L.createElement("div",{ref:Je,className:$t(r,a,Me(Me(Me(Me(Me({},"".concat(r,"-focused"),Ve),"".concat(r,"-disabled"),k),"".concat(r,"-readonly"),A),"".concat(r,"-not-a-number"),zt.isNaN()),"".concat(r,"-out-of-range"),!zt.isInvalidate()&&!Jr(zt))),style:l,onFocus:function(){Ze(!0)},onBlur:Er,onKeyDown:Cn,onKeyUp:Xn,onCompositionStart:et,onCompositionEnd:Ot,onBeforeInput:It},$&&L.createElement(PN,{prefixCls:r,upNode:q,downNode:G,upDisabled:ln,downDisabled:ci,onStep:Wr}),L.createElement("div",{className:"".concat(Pe,"-wrap")},L.createElement("input",pr({autoComplete:"off",role:"spinbutton","aria-valuemin":h,"aria-valuemax":f,"aria-valuenow":zt.isInvalidate()?null:zt.toString(),step:w},Oe,{ref:$u(xe,t),className:Pe,value:kr,onChange:kt,disabled:k,readOnly:A}))))}),zN=L.forwardRef(function(e,t){var r=e.disabled,a=e.style,l=e.prefixCls,h=l===void 0?"rc-input-number":l,f=e.value,u=e.prefix,w=e.suffix,C=e.addonBefore,I=e.addonAfter,k=e.className,A=e.classNames,q=ea(e,AN),G=L.useRef(null),Z=L.useRef(null),K=L.useRef(null),j=function($){K.current&&bN(K.current,$)};return L.useImperativeHandle(t,function(){return SN(K.current,{nativeElement:G.current.nativeElement||Z.current})}),L.createElement(wN,{className:k,triggerFocus:j,prefixCls:h,value:f,disabled:r,style:a,prefix:u,suffix:w,addonAfter:I,addonBefore:C,classNames:A,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:G},L.createElement(RN,pr({prefixCls:h,disabled:r,ref:K,domRef:Z,className:A==null?void 0:A.input},q)))});const LN=e=>{var t;const r=(t=e.handleVisible)!==null&&t!==void 0?t:"auto";return Object.assign(Object.assign({},ck(e)),{controlWidth:90,handleWidth:e.controlHeightSM-e.lineWidth*2,handleFontSize:e.fontSize/2,handleVisible:r,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new zi(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:r===!0?1:0})},YC=(e,t)=>{let{componentCls:r,borderRadiusSM:a,borderRadiusLG:l}=e;const h=t==="lg"?l:a;return{[`&-${t}`]:{[`${r}-handler-wrap`]:{borderStartEndRadius:h,borderEndEndRadius:h},[`${r}-handler-up`]:{borderStartEndRadius:h},[`${r}-handler-down`]:{borderEndEndRadius:h}}}},ON=e=>{const{componentCls:t,lineWidth:r,lineType:a,borderRadius:l,fontSizeLG:h,controlHeightLG:f,controlHeightSM:u,colorError:w,paddingInlineSM:C,paddingBlockSM:I,paddingBlockLG:k,paddingInlineLG:A,colorTextDescription:q,motionDurationMid:G,handleHoverColor:Z,paddingInline:K,paddingBlock:j,handleBg:O,handleActiveBg:$,colorTextDisabled:J,borderRadiusSM:ne,borderRadiusLG:oe,controlWidth:le,handleOpacity:be,handleBorderColor:Ee,filledHandleBg:ke,lineHeightLG:Ae,calc:Ye}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},qa(e)),fy(e)),{display:"inline-block",width:le,margin:0,padding:0,borderRadius:l}),dk(e,{[`${t}-handler-wrap`]:{background:O,[`${t}-handler-down`]:{borderBlockStart:`${_t(r)} ${a} ${Ee}`}}})),mk(e,{[`${t}-handler-wrap`]:{background:ke,[`${t}-handler-down`]:{borderBlockStart:`${_t(r)} ${a} ${Ee}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:O}}})),fk(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:h,lineHeight:Ae,borderRadius:oe,[`input${t}-input`]:{height:Ye(f).sub(Ye(r).mul(2)).equal(),padding:`${_t(k)} ${_t(A)}`}},"&-sm":{padding:0,borderRadius:ne,[`input${t}-input`]:{height:Ye(u).sub(Ye(r).mul(2)).equal(),padding:`${_t(I)} ${_t(C)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:w}}},"&-group":Object.assign(Object.assign(Object.assign({},qa(e)),xk(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:oe,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:ne}}},hk(e)),gk(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},qa(e)),{width:"100%",padding:`${_t(j)} ${_t(K)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:l,outline:0,transition:`all ${G} linear`,appearance:"textfield",fontSize:"inherit"}),yk(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})}})},{[t]:Object.assign(Object.assign(Object.assign({[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{opacity:1},[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleWidth,height:"100%",borderStartStartRadius:0,borderStartEndRadius:l,borderEndEndRadius:l,borderEndStartRadius:0,opacity:be,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`opacity ${G} linear ${G}`,[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:q,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${_t(r)} ${a} ${Ee}`,transition:`all ${G} linear`,"&:active":{background:$},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:Z}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},UP()),{color:q,transition:`all ${G} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:l},[`${t}-handler-down`]:{borderEndEndRadius:l}},YC(e,"lg")),YC(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:J}})}]},DN=e=>{const{componentCls:t,paddingBlock:r,paddingInline:a,inputAffixPadding:l,controlWidth:h,borderRadiusLG:f,borderRadiusSM:u,paddingInlineLG:w,paddingInlineSM:C,paddingBlockLG:I,paddingBlockSM:k}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${_t(r)} 0`}},fy(e)),{position:"relative",display:"inline-flex",width:h,padding:0,paddingInlineStart:a,"&-lg":{borderRadius:f,paddingInlineStart:w,[`input${t}-input`]:{padding:`${_t(I)} 0`}},"&-sm":{borderRadius:u,paddingInlineStart:C,[`input${t}-input`]:{padding:`${_t(k)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:l},"&-suffix":{position:"absolute",insetBlockStart:0,insetInlineEnd:0,zIndex:1,height:"100%",marginInlineEnd:a,marginInlineStart:l}}})}},FN=bf("InputNumber",e=>{const t=Po(e,lk(e));return[ON(t),DN(t),Gx(t)]},LN,{unitless:{handleOpacity:!0}});var BN=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const wk=L.forwardRef((e,t)=>{const{getPrefixCls:r,direction:a}=L.useContext(li),l=L.useRef(null);L.useImperativeHandle(t,()=>l.current);const{className:h,rootClassName:f,size:u,disabled:w,prefixCls:C,addonBefore:I,addonAfter:k,prefix:A,bordered:q,readOnly:G,status:Z,controls:K,variant:j}=e,O=BN(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","bordered","readOnly","status","controls","variant"]),$=r("input-number",C),J=Sf($),[ne,oe,le]=FN($,J),{compactSize:be,compactItemClassnames:Ee}=wM($,a);let ke=L.createElement(gN,{className:`${$}-handler-up-inner`}),Ae=L.createElement(H$,{className:`${$}-handler-down-inner`});const Ye=typeof K=="boolean"?K:void 0;typeof K=="object"&&(ke=typeof K.upIcon>"u"?ke:L.createElement("span",{className:`${$}-handler-up-inner`},K.upIcon),Ae=typeof K.downIcon>"u"?Ae:L.createElement("span",{className:`${$}-handler-down-inner`},K.downIcon));const{hasFeedback:He,status:Le,isFormItemInput:Je,feedbackIcon:Oe}=L.useContext(bg),Pe=$$(Le,Z),xe=Ux(Nt=>{var zt;return(zt=u??be)!==null&&zt!==void 0?zt:Nt}),De=L.useContext(cy),$e=w??De,[Ve,Ze]=j$(j,q),gt=He&&L.createElement(L.Fragment,null,Oe),Ct=$t({[`${$}-lg`]:xe==="large",[`${$}-sm`]:xe==="small",[`${$}-rtl`]:a==="rtl",[`${$}-in-form-item`]:Je},oe),Ht=`${$}-group`,Ut=L.createElement(zN,Object.assign({ref:l,disabled:$e,className:$t(le,J,h,f,Ee),upHandler:ke,downHandler:Ae,prefixCls:$,readOnly:G,controls:Ye,prefix:A,suffix:gt,addonAfter:k&&L.createElement(i1,null,L.createElement(g1,{override:!0,status:!0},k)),addonBefore:I&&L.createElement(i1,null,L.createElement(g1,{override:!0,status:!0},I)),classNames:{input:Ct,variant:$t({[`${$}-${Ve}`]:Ze},UC($,Pe,He)),affixWrapper:$t({[`${$}-affix-wrapper-sm`]:xe==="small",[`${$}-affix-wrapper-lg`]:xe==="large",[`${$}-affix-wrapper-rtl`]:a==="rtl"},oe),wrapper:$t({[`${Ht}-rtl`]:a==="rtl"},oe),groupWrapper:$t({[`${$}-group-wrapper-sm`]:xe==="small",[`${$}-group-wrapper-lg`]:xe==="large",[`${$}-group-wrapper-rtl`]:a==="rtl",[`${$}-group-wrapper-${Ve}`]:Ze},UC(`${$}-group-wrapper`,Pe,He),oe)}},O));return ne(Ut)}),Sk=wk,$N=e=>L.createElement(uy,{theme:{components:{InputNumber:{handleVisible:!0}}}},L.createElement(wk,Object.assign({},e)));Sk._InternalPanelDoNotUseOrYouWillBeFired=$N;var NN=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r};const jN=e=>{const{prefixCls:t,className:r,closeIcon:a,closable:l,type:h,title:f,children:u,footer:w}=e,C=NN(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:I}=L.useContext(li),k=I(),A=t||I("modal"),q=Sf(k),[G,Z,K]=ZM(A,q),j=`${A}-confirm`;let O={};return h?O={closable:l??!1,title:"",footer:"",children:L.createElement(XM,Object.assign({},e,{prefixCls:A,confirmPrefixCls:j,rootPrefixCls:k,content:u}))}:O={closable:l??!0,title:f,footer:w!==null&&L.createElement(HM,Object.assign({},e)),children:u},G(L.createElement(LM,Object.assign({prefixCls:A,className:$t(Z,`${A}-pure-panel`,h&&j,h&&`${j}-${h}`,r,K,q)},C,{closeIcon:UM(A,a),closable:l},O)))},VN=F$(jN);function Ck(e){return Pf(ek(e))}const ta=KM;ta.useModal=D$;ta.info=function(t){return Pf(tk(t))};ta.success=function(t){return Pf(rk(t))};ta.error=function(t){return Pf(nk(t))};ta.warning=Ck;ta.warn=Ck;ta.confirm=function(t){return Pf(ik(t))};ta.destroyAll=function(){for(;Nl.length;){const t=Nl.pop();t&&t()}};ta.config=A$;ta._InternalPanelDoNotUseOrYouWillBeFired=VN;var Ek={exports:{}},UN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",HN=UN,WN=HN;function Tk(){}function Ik(){}Ik.resetWarningCache=Tk;var GN=function(){function e(a,l,h,f,u,w){if(w!==WN){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ik,resetWarningCache:Tk};return r.PropTypes=r,r};Ek.exports=GN();var qN=Ek.exports;const cf=uf(qN),ZN="/rail-travel-time/assets/bellaLogo-CJF_RcKL.jpg",KN="/rail-travel-time/assets/piaLogo-D2p6NiLB.jpg",XN="/rail-travel-time/assets/ricaLogo-m0Bjzvzp.jpg",YN="/rail-travel-time/assets/stefLogo-j7w7ueal.jpeg",Pk=({isOpened:e,onCancel:t})=>ve.jsx(ta,{footer:null,open:e,onCancel:t,destroyOnClose:!0,classNames:{body:"modal"},children:ve.jsxs("div",{className:"info-content",children:[ve.jsx("h2",{children:"Dear traveller,"}),ve.jsxs("p",{children:['You have found your way to the "European Train Travel Times Map"! Travelling by train is one of the most sunstainable modes of travelling and we are happy to offer you this interactive map to efficiently explore your next travel possibilities. Simply choose your city of departure and city of destination from the drop-down menu on the left and you will be shown the average travel time between both. As another option, choose your preferred travel time durancy and you will be shown travel connections across Europe. ',ve.jsx("br",{}),"Happy and safe travels!"]}),ve.jsx("h2",{children:"Authors"}),ve.jsx("p",{children:'This interactive webmap was created in a group project in the framework of the lectures "Web Mapping" and "Multimedia Technqiues" in the summer semester 2024 at TU Wien. The members of the wonderful team are following:'}),ve.jsxs("div",{className:"image-container",children:[ve.jsxs("div",{className:"image-wrapper",children:[ve.jsx("img",{src:KN,alt:"Pia - The Biking Webmap Hero",className:"round-image"}),ve.jsxs("div",{className:"caption",children:[ve.jsx("b",{children:"Pia"}),ve.jsx("br",{}),"Biking Webmapper"]})]}),ve.jsxs("div",{className:"image-wrapper",children:[ve.jsx("img",{src:ZN,alt:"Bella - The GIS Queen",className:"round-image"}),ve.jsxs("div",{className:"caption",children:[ve.jsx("b",{children:"Bella"}),ve.jsx("br",{}),"GIS Queen"]})]}),ve.jsxs("div",{className:"image-wrapper",children:[ve.jsx("img",{src:XN,alt:"Rica - The Creative Investigator",className:"round-image"}),ve.jsxs("div",{className:"caption",children:[ve.jsx("b",{children:"Rica"}),ve.jsx("br",{}),"Smart Investigator"]})]}),ve.jsxs("div",{className:"image-wrapper",children:[ve.jsx("img",{src:YN,alt:"Stef - The Platypus",className:"round-image"}),ve.jsxs("div",{className:"caption",children:[ve.jsx("b",{children:"Stef"}),ve.jsx("br",{}),"The Platypus"]})]})]}),ve.jsx("h2",{children:"Data source & license"}),ve.jsx("p",{children:ve.jsxs("ul",{className:"info-list",children:[ve.jsx("li",{children:"Basemap: MapTiler API (License: OdbL)"}),ve.jsx("li",{children:"Train travel times:"}),ve.jsx("li",{children:"Train travel API:"})]})})]})});Pk.propTypes={isOpened:cf.bool.isRequired,onCancel:cf.func.isRequired};var JN={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},QN=function(t,r){return L.createElement(Mo,pr({},t,{ref:r,icon:JN}))},ej=L.forwardRef(QN);const Yx=({toggleMenu:e,isMenuOpen:t})=>{const[r,a]=L.useState(!1);return ve.jsxs(ve.Fragment,{children:[ve.jsx("div",{className:"header",children:ve.jsxs("nav",{className:"topNavBar",children:[typeof t<"u"?ve.jsx("div",{className:"burgerMenu",onClick:e,children:t?"✖":"☰"}):ve.jsx("div",{}),ve.jsxs("ul",{className:"topNavList",children:[ve.jsx("li",{className:"topNavItem",children:ve.jsx(Y2,{to:"/",className:"topNavLink",children:"Map"})}),ve.jsx("li",{className:"topNavItem",children:ve.jsx(Y2,{to:"/info",className:"topNavLink",children:"Railways Info"})}),ve.jsx("li",{className:"topNavItem",children:ve.jsx(ej,{className:"topNavLink infoButton",onClick:()=>a(!0)})})]})]})}),r&&ve.jsx(Pk,{isOpened:r,onCancel:()=>a(!1)})]})};Yx.propTypes={toggleMenu:cf.func,isMenuOpen:cf.bool};const Mk=va("appState/setCoordinates",e=>({payload:e})),kk=va("appState/setSelectedCity",e=>({payload:e})),_1=va("appState/setFilteredCities",e=>({payload:e})),Ak=va("appState/setMode",e=>({payload:e})),tj=()=>{const[e,t]=L.useState("Vienna"),[r,a]=L.useState("Berlin"),[l,h]=L.useState(null),f=gx(),u=I=>{t(I.target.value)},w=I=>{a(I.target.value)},C=()=>{if(e&&r){const I=jr==null?void 0:jr.find(A=>A.City===e),k=jr==null?void 0:jr.find(A=>A.City===r);if(I){const A=parseFloat(I[r]);h(A)}f(Mk([{name:e,latitude:I.Latitude,longitude:I.Longitude},{name:r,latitude:k.Latitude,longitude:k.Longitude}]))}};return ve.jsxs("div",{className:"selectors",children:[ve.jsxs("label",{className:"selectContainer",children:[ve.jsx("p",{children:"from"}),ve.jsx("select",{value:e,onChange:u,className:"selectItem",children:jr==null?void 0:jr.map(I=>ve.jsx("option",{value:I.City,disabled:I.City==r,children:I.City},I.City))})]}),ve.jsxs("label",{className:"selectContainer",children:[ve.jsx("p",{children:"to"}),ve.jsx("select",{value:r,onChange:w,className:"selectItem",children:jr==null?void 0:jr.map(I=>ve.jsx("option",{value:I.City,disabled:I.City==e,children:I.City},I.City))})]}),ve.jsx(Hu,{onClick:C,className:"button",disabled:!e||!r,children:"Get Time"}),l!==null&&ve.jsxs("div",{className:"timeInfo",children:[ve.jsx("span",{children:"Average Time:"}),ve.jsxs("div",{className:"time",children:[ve.jsx("span",{children:l})," hours"]})]})]})},rj=()=>{const e=gx(),t=Fl(WI),[r,a]=L.useState(5),l=f=>{e(kk(f.target.value)),e(_1([]))},h=f=>{a(f)};return L.useEffect(()=>{if(t&&r){const f=jr==null?void 0:jr.find(u=>u.City===t);if(f){const u=jr==null?void 0:jr.filter(w=>(parseFloat(f[w.City])+parseFloat(w[f.City]))/2<=r);e(_1(u))}}},[e,t,r]),ve.jsxs("div",{className:"row",children:[ve.jsxs("div",{className:"label",children:[ve.jsx("span",{children:"from"}),ve.jsx("select",{value:t,onChange:l,className:"selectItem",children:jr==null?void 0:jr.map(f=>ve.jsx("option",{value:f.City,children:f.City},f.City))})]}),ve.jsxs("div",{className:"label",children:[ve.jsx("span",{children:"in"}),ve.jsx(Sk,{type:"number",value:r,onChange:h,addonAfter:"hours",minValue:1,maxValue:100,className:"inputNumber"})]})]})},nj=()=>Fl(wx)=="averageBetween"?ve.jsx(tj,{}):ve.jsx(rj,{}),Rk=({isMenuOpen:e})=>{const t=Fl(wx),r=gx(),a=l=>{l.target.value&&r(Ak(l.target.value))};return ve.jsx("div",{className:`sideNavContainer ${e?"open":""}`,children:ve.jsxs("div",{className:"contentContainer",children:[ve.jsx("h2",{children:"select your travel route"}),ve.jsx("div",{className:"radioContainer",children:ve.jsxs(jl.Group,{onChange:a,defaultValue:t,children:[ve.jsx(jl.Button,{value:"averageBetween",children:"Average Between"}),ve.jsx(jl.Button,{value:"averageTo",children:"Average From"}),ve.jsx(jl.Button,{value:"timeTable",disabled:!0,children:"Timetable"})]})}),ve.jsx(nj,{})]})})};Rk.propTypes={isMenuOpen:cf.bool};const ij=()=>{const[e,t]=L.useState(!0),r=()=>{t(!e)};return ve.jsxs(ve.Fragment,{children:[ve.jsx(Yx,{toggleMenu:r,isMenuOpen:e}),ve.jsx(Rk,{isMenuOpen:e})]})},oj="/rail-travel-time/assets/electrification-Cpjw9LDt.png",aj="/rail-travel-time/assets/firstRailway-Bj1IPWgO.jpeg",sj=()=>ve.jsxs("div",{className:"infoPage",children:[ve.jsxs("h2",{children:[ve.jsx("br",{}),ve.jsx("br",{}),"Brief History of Rail Transport Around the World",ve.jsx("br",{}),ve.jsx("br",{})]}),ve.jsxs("div",{className:"history-boxes",children:[ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"1) Ancient Systems"}),ve.jsxs("p",{children:["Evidence suggests a 6-to-8.5 kilometer paved trackway (Diolkos) in Greece transported boats across the Isthmus of Corinth around 600 BCE. Wheeled vehicles pulled by humans and animals ran in limestone grooves.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"2) Pre-Steam (1500s-1800s)"}),ve.jsxs("p",{children:["Wooden rails were introduced with wagonways used in mines. Metal rails followed, with cast iron replaced by more durable wrought iron. The flanged wheel by John Curr revolutionized rail design.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"3) Steam Power (1800s-1900s)"}),ve.jsxs("p",{children:['The first full-scale steam locomotive was built in the UK by Richard Trevithick in 1804. The "Locomotion" by George Stephenson became the first public steam railway. Steam remained dominant for over a century.',ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"4) Electric Power (Late 1800s-Present)"}),ve.jsxs("p",{children:["The first electric locomotive, powered by batteries, was built by Robert Davidson in Scotland in 1837. Early electric trams emerged in the 1880s. Italian railways became the first to use electric traction for an entire main line in 1902.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"5) Diesel Power (1900s-Present)"}),ve.jsxs("p",{children:["Early examples of internal combustion engines appeared in the late 1800s, but the first successful diesel locomotive wasn't operational until 1912 in Switzerland. The development of a reliable electrical control system led to widespread adoption of diesel-electric locomotives.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsxs("div",{className:"history-box",children:[ve.jsx("h3",{children:"6) High-Speed Rail (1960s-Present)"}),ve.jsxs("p",{children:["Japan's Tokaido Shinkansen line became the first high-speed rail system in 1964, reaching speeds exceeding 300 km/h. High-speed rail has expanded to numerous countries, offering a faster and more sustainable alternative to air travel.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]})]}),ve.jsxs("h2",{children:[ve.jsx("br",{}),"The European Railway",ve.jsx("br",{}),ve.jsx("br",{})]}),ve.jsxs("div",{className:"image-text-container1",children:[ve.jsx("img",{src:aj,alt:"First railway in Europe"}),ve.jsxs("div",{className:"text-content1",children:[ve.jsx("h3",{children:"The Beginnings:"}),ve.jsxs("p",{children:["Belgium took the lead in the Industrial Revolution on the Continent starting in the 1820s. It provided an ideal model for showing the value of the railways for speeding the industrial revolution. After splitting from the Netherlands in 1830, the new country decided to stimulate industry. It planned and funded a simple cross-shaped system that connected the major cities, ports and mining areas and linked to neighboring countries. Unusually, the Belgian state became a major contributor to early rail development and championed the creation of a national network with no duplication of lines. Belgium thus became the railway center of the region. Profits were low but the infrastructure necessary for rapid industrial growth was put in place. The first railway in Belgium, running from northern Brussels to Mechelen, was completed in May 1835.",ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]})]}),ve.jsxs("div",{className:"image-text-container2",children:[ve.jsxs("div",{className:"text-content2",children:[ve.jsx("h3",{children:"Country Differences:"}),ve.jsxs("p",{children:["The 2017 European Railway Performance Index ranked the performance of national rail systems as follows:",ve.jsxs("ul",{className:"bullet-list",children:[ve.jsx("li",{children:"Tier One: Switzerland, Denmark, Finland, Germany, Austria, Sweden, and France."}),ve.jsx("li",{children:"Tier Two: Great Britain, the Netherlands, Luxembourg, Spain, the Czech Republic, Norway, Belgium, and Italy."}),ve.jsxs("li",{children:[" ","Tier Three: Lithuania, Slovenia, Ireland, Hungary, Latvia, Slovakia, Poland, Portugal, Romania, and Bulgaria."]})]})]}),ve.jsxs("p",{children:["One of the main differences between the countries lays in the electrification of lines.",ve.jsx("br",{}),`15 kV AC has been used in Germany, Austria, Switzerland, Norway and Sweden since 1912, while the Netherlands and France use 1500 V DC. France and Croatia also use 25 kV AC, Belgium, Italy and Slovenia use 3 kV DC. All this makes the construction of truly pan-European vehicles a challenging task and, until recent developments in locomotive construction, was mostly ruled out as being impractical and too expensive. The development of an integrated European high-speed rail network is overcoming some of these differences. All high-speed lines outside of Russia, including those built in Spain and Portugal, use 1,435 mm (4 ft 8+1⁄2 in) standard gauge tracks. Likewise all European high-speed lines, outside of Germany, Austria and Italy use 25 kV AC electrification (Electrification of high-speed rail in Italy is mixed 3 kV DC and 25 kV AC). This means that by 2020 high-speed trains can travel from Italy to the United Kingdom, or Portugal to the Netherlands without the need for multi-voltage systems or breaks of gauge — or they could, if they didn't have to commute from one high-speed line to the next over "classical" lines using a different voltage and/or frequency.`,ve.jsx("br",{}),ve.jsx("span",{className:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),ve.jsx("img",{src:oj,alt:"First railway in Europe"})]}),ve.jsxs("div",{children:[ve.jsx("h3",{children:"Why Choose Train Travel Across Europe?"}),ve.jsx("p",{children:"Train travel offers a more eco-friendly alternative to air travel. It's also a comfortable and scenic way to explore Europe, allowing you to witness diverse landscapes as you journey between destinations."})]})]}),lj="/rail-travel-time/assets/train-wgbmlnfC.mp3",cj=()=>(L.useEffect(()=>{const e=document.getElementById("train_with_sound"),t=document.getElementById("music"),r=()=>{t.play()},a=()=>{t.pause(),t.currentTime=0};return e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",a),()=>{e.removeEventListener("mouseenter",r),e.removeEventListener("mouseleave",a)}},[]),ve.jsxs("div",{className:"train-motion",children:[ve.jsx("div",{className:"train",children:ve.jsxs("svg",{id:"train_with_sound",width:"70.68px",height:"60px",viewBox:"0 0 1512.2 1781.2",xmlns:"http://www.w3.org/2000/svg",baseProfile:"tiny",children:[ve.jsxs("g",{id:"train",strokeWidth:"0px",fill:"#000000",children:[ve.jsx("path",{className:"cls-1",d:"M477.8,1354.2h0c1.3.5,2.8,1,3.3,1,.8,0,27.7-45.6,27.7-47,0-2.3-24.2-9.5-35.7-10.6l-6.5-.6v54.5l4.5,1c2.4.5,5.5,1.4,6.8,1.9Z"}),ve.jsx("path",{className:"cls-1",d:"M442.9,1350.1h0c2.5,4.1,3.6,5.3,4.8,4.8.8-.3,4.4-1.3,7.9-2.1l6.3-1.5v-54.2l-6.3.7c-15.3,1.6-36.7,9.1-35.4,12.4.6,1.6,16.3,29,22.8,39.9Z"}),ve.jsx("path",{className:"cls-1",d:"M408.3,1356.4h0s21.9,12.7,21.9,12.7l5.7-5.7c3.1-3.1,5.6-5.9,5.6-6.2-.2-.6-23.1-40.4-25.2-43.7l-1.3-2.1-4.4,3c-10.7,7.3-28,26.8-25.3,28.6.7.4,11,6.5,23.1,13.5Z"}),ve.jsx("path",{className:"cls-1",d:"M1770.7,1445.3c-2.9-3-50-44.3-104.6-91.8l-99.4-86.4-.5-18.9c-.9-32.2-6.5-38.3-35.8-38.9-24.6-.5-24.1-3.9.5-3.9s30.5-2.8,36.8-14.2l2.8-5,.3-96c.3-124.7,2.1-119-38.5-119.9l-17.6-.4v-12.9c0-19.4-4-28.1-15.4-33.4l-4.7-2.2h-101.1c-95.9,0-101.1-.1-100.7-1.7,2.1-7.7,76.4-211.5,78-214,8.5-13.2,4.7-30.5-8.2-37.9-92-52.4-96.1-53.9-140.8-54-44.7,0-34.9-2.9-89,26.4-24.2,13.2-45.6,24.4-47.4,25-18.9,6.2-20.4,19.9-6.5,57.8,13.8,37.6,71.3,197.2,71.3,197.8s-47.8.4-106.2.3l-106.2-.2-.2-26.4-.2-26.4,9.5-.4c31.8-1.3,42.9-54.3,14.9-70.8l-4.4-2.6h-403.1l-4.2,2.5c-11.5,6.8-13.6,12.1-13.6,34.1,0,18.4.4,20,6,27.1,2.6,3.2,2.9,4.3,2.9,9.9v6.2l-6.1,2.7c-34.8,15.2-52.5,46.5-74.4,132-9.9,38.8-15.5,46.9-45.5,66.5-2.1,1.3-11.1,7.3-20.2,13.2-49.6,32.4-71.5,62.1-80.8,109.9l-2.1,10.9h-15.1c-33.5,0-38.4,5.8-38.4,45.5s1.4,35.4,13.8,42.2l5,2.8,44.4.5,44.4.5-3.3,4c-32,38.2-38.4,95.3-15.8,140.2,51.5,102.3,200,92.8,238.3-15.3,4.9-13.7,7.2-14,11.3-1.4,15.8,48.5,59.2,83.3,110.9,88.9h0c58.1,6.3,116.1-31.4,135-87.8l3.2-9.5h133.4l2.3,8c29.3,102.6,176.1,104.9,209,3.3,1.2-3.6,2.3-5.9,2.6-5.2,35.8,101.8,171.3,109.6,207.3,11.9,3-8.1,2.4-3.9-1.1,8.3-6.5,22.5-3,35,11.9,42l4.2,2,168.3.2c148.4.2,168.8,0,172.4-1.2,19.2-6.5,24.6-29,10.5-43.7ZM1491.5,1093l.2-90.7,25.1-.2,25.1-.2v91h0s0,90.9,0,90.9h-50.6l.2-90.7ZM1139.3,668.6l46.6-22.9h67.6l45.3,22.7c24.9,12.5,45.3,23,45.3,23.4h0c0,.4-56.5.7-125.6.7-69.1,0-125.6-.2-125.6-.5s20.9-10.8,46.5-23.4ZM1095.6,702.7c0-.5,51.9-.8,123.3-.8s123.3.3,123.3.6-18.2,51.3-40.4,113.2c-22.2,61.9-40.8,113.8-41.3,115.2h0s-.9,2.6-.9,2.6h-40.5s-40.5,0-40.5,0l-7.2-19.9c-35-96.7-75.8-210.1-75.8-210.8ZM1200.6,953h284.1v287.8h-568.1v-287.8h284.1ZM560.3,830.8v-8h386.2v15.9h-386.2v-8ZM908.1,843.4v397.5h-335.6v-397.5h335.6ZM338.2,1238.7c.2-52.8,23.7-90.5,79.2-126.8,51-33.4,59.1-43.5,69.4-87.1,12.8-54.2,17.5-70.2,25.5-86.2,10.8-21.8,27-35,45.1-36.8l4.9-.5v169.8h0s0,169.8,0,169.8h-224.1v-2.1ZM485.7,1493.1h0c-81.4,16.6-147.8-64.6-115.7-141.6,24.8-59.5,101.8-81.2,154.3-43.5,73,52.4,49.1,167.2-38.6,185.1ZM746,1493.3h0c-6.8,1.8-32.9,3.3-38,2.1-1-.2-4.2-.9-7-1.4-123.4-23.7-98.5-211.9,26.9-203.9,116.9,7.5,131.6,172.8,18.1,203.2ZM1108.3,1482.8h0c-50.8,12.8-100.4-24.3-102.4-76.5-2.9-76.5,87.7-115.8,141.3-61.3,44.5,45.2,22.7,122.3-38.9,137.8ZM1320.4,1482.7h0c-67.2,16.1-123.8-52.4-95-114.9,25.7-55.6,101.9-65,139.7-17.2,37.6,47.5,13.7,118.1-44.7,132.1ZM911.9,1278.3H286.6v-25.3h1250.6v25.3h-625.3ZM1586.5,1468.7c-159.4,0-162.9,0-162.3-1.8.5-1.5,46.3-167.3,49.3-178.5l1-3.5h32.5s32.5,0,32.5,0l104.1,91c57.2,50,104.5,91.4,104.9,91.9h0c.5.5-61.1.9-162,.9Z"}),ve.jsx("path",{className:"cls-1",d:"M593.2,866.8v84.7c0,46.6.3,85,.6,85.3h0c.3.4,16.3.5,35.4.4l34.8-.2.2-85.1.2-85.1h-71.3Z"}),ve.jsx("path",{className:"cls-1",d:"M423.4,1389.1l.5-2.6c.3-1.4,1.3-5,2.2-8l1.7-5.4-2-1.2c-5-3.1-41.5-23.9-43-24.5-3.3-1.2-10.8,20.2-12.4,35.4h0s-.7,6.3-.7,6.3h53.6Z"}),ve.jsx("polygon",{className:"cls-1",points:"698.4 952.3 698.4 952.3 698.1 1037.4 791.4 1037.4 884.7 1037.4 884.7 952.1 884.7 866.8 791.7 867 698.6 867.3 698.4 952.3"}),ve.jsx("path",{className:"cls-1",d:"M1300.9,1367.9c-38.7.1-48.4,52.5-12.6,67.5h0c8,3.4,20,2.9,28-1,33.7-16.5,22.1-66.7-15.5-66.6ZM1315.4,1431.2h0c-31.7,15.6-61.2-23.6-37.8-50.2,7.4-8.4,20-12.3,30.9-9.5,29.2,7.5,33.7,46.5,6.9,59.7Z"}),ve.jsx("path",{className:"cls-1",d:"M500.3,1374.3c.2.7,1.3,4.3,2.3,8l2,6.8h27s27,0,27,0v4.7h-27s-27,0-27,0l-1.6,6.3c-.9,3.5-1.8,7-2.1,7.8-.5,1.2,4.5,4.4,22.8,15,20.5,11.8,23.3,13.7,22.5,15.2-1.3,2.5-.9,2.7-25.3-11.4l-22.7-13.1-3.7,4.2c-2,2.3-4.7,5-5.9,5.9l-2.2,1.7,13.1,22.6c14,24.2,13.9,24,11.4,25.4-1.4.8-3.4-2.2-15-22.4l-13.4-23.3-3.2,1.3c-1.8.7-5.3,1.8-7.9,2.4l-4.7,1v53.3h-4.7v-53.4l-3.5-.6c-1.9-.3-5.7-1.3-8.3-2.2l-4.8-1.7-13.4,23.3c-7.4,12.8-13.2,23.5-13,23.7,2.4,2.4,19.9,8.6,29.2,10.4h0c74.2,14.1,133.7-63.6,102.2-133.7-2.6-5.9-52.1,16.5-50.2,22.7Z"}),ve.jsx("path",{className:"cls-1",d:"M774.6,1314.3l-4.6-3.1-3.7,6.3c-2,3.5-8.2,14.1-13.7,23.7l-10,17.3,5.7,5.4h0c3.1,3,6.1,5.3,6.6,5.2,2.1-.5,46.4-26.5,46.4-27.2,0-3.2-18.2-22-26.7-27.6Z"}),ve.jsx("path",{className:"cls-1",d:"M664.4,1356.7h0c12.1,7,22.3,12.6,22.6,12.5.3-.1,3.1-2.6,6.2-5.4l5.6-5.2-13.2-23.1c-7.3-12.7-13.5-23.1-13.8-23.1-4.2-.3-32.5,28.8-30.2,31,.4.4,10.6,6.4,22.8,13.4Z"}),ve.jsx("path",{className:"cls-1",d:"M683.6,1408.4c-.3-1.1-1.3-4.8-2.1-8.3l-1.5-6.3h-53.4l.6,6.8c.8,9.2,3.7,20.9,7.2,29.3h0c1.6,3.8,3.1,7,3.3,7,3.1,0,46.4-26.9,45.8-28.5Z"}),ve.jsx("path",{className:"cls-1",d:"M653.6,1389.1h26.7l.5-2.6c.3-1.4,1.4-4.9,2.3-7.7,1-2.8,1.5-5.3,1.1-5.4-.4-.1-10.8-6.1-23.2-13.3l-22.5-13-2.1,4.2c-4.6,9-9.6,28-9.6,36.6h0c0,1.1,4.2,1.3,26.7,1.3Z"}),ve.jsx("path",{className:"cls-1",d:"M757.6,1376.7c.7,1.4,1.8,4.8,2.4,7.5l1.2,4.9h54.2v4.7h-54.2l-.6,4.3c-.4,2.4-1.3,6-2,8.1-1.1,3.1-1.1,4-.2,4.6.7.4,11.2,6.5,23.4,13.6,19.6,11.3,22.1,13,21.3,14.5-1.3,2.5-.4,2.9-25.1-11.4l-22.7-13.1-5.9,6-5.9,6,13,22.6c12.4,21.4,14.2,25.9,10.5,25.1-.8-.2-7.4-10.5-14.6-23l-13.1-22.7-3.5,1.4c-1.9.8-5.4,1.7-7.7,2.1l-4.2.7-.2,26.9-.2,26.9h-4.7v-53.4l-2.6-.5c-1.4-.3-5.1-1.3-8.2-2.3-3.1-1-5.7-1.7-5.8-1.6-.8.8-26.6,45.9-26.6,46.5,0,2.1,21.3,9.5,32.6,11.3h0c72.5,11.5,129.7-65.3,99.3-133.3-3.5-7.8-.7-8.5-25.8,6-28.8,16.6-25.8,14.5-24.3,17.5Z"}),ve.jsx("path",{className:"cls-1",d:"M698.1,1426.6l-5.9-6-5.9-6-22.9,13.2c-12.6,7.2-22.9,13.2-23.1,13.4-1.5,1.4,15.9,21,24.3,27.3h0c3.1,2.3,5.9,4.2,6.2,4.2s6.6-10.3,13.9-23l13.3-23Z"}),ve.jsx("path",{className:"cls-1",d:"M701.2,1353.3h0c1.4,2.2,2.3,2.9,3.4,2.4,2.6-1.1,10.8-3.2,12.5-3.2s1.7-1.7,1.7-27.2v-27.2h-2.7c-12.5,0-40.5,9.1-39.1,12.8.5,1.3,19.9,35.2,24.2,42.4Z"}),ve.jsx("path",{className:"cls-1",d:"M441.2,1425.8l-5.9-6.1-5.9-6.1-21.4,12.4c-11.8,6.8-22.2,12.8-23.1,13.3-3.3,1.9,12.8,21,25.1,29.7h0s4.7,3.3,4.7,3.3l1.3-2.5c.7-1.4,6.7-11.9,13.3-23.3l12-20.8Z"}),ve.jsx("path",{className:"cls-1",d:"M426.6,1408.2c-.1-.9-.9-4.5-1.7-8l-1.6-6.3h-53.5l.6,6.5c.9,9,3.8,20.5,7.2,28.8h0c1.6,3.8,3.2,6.9,3.5,6.9,2.7-.1,45.6-26.4,45.4-27.8Z"}),ve.jsx("path",{className:"cls-1",d:"M1064.1,1377.9c-18.6,18.3-11,50.6,13.6,58.4h0c21.9,6.9,44.8-8.8,45.9-31.5,1.6-32.6-36.3-49.7-59.5-26.9ZM1102.5,1431.8h0c-20.7,10.1-45.8-5.6-45.6-28.7.3-34.4,45.4-45,60.5-14.2,7.8,15.9,1.2,35.1-14.9,42.9Z"}),ve.jsx("path",{className:"cls-1",d:"M735.7,1355.4h0c.8.5,1.8.8,2.3.6.8-.3,27.5-45.3,27.6-46.6.2-2.9-28.8-11.2-39-11.2h-3.2v54.1l5.4,1.1c3,.6,6,1.5,6.8,2Z"}),ve.jsx("path",{className:"cls-1",d:"M519.6,1315c-3.6-2.5-6.6-4.5-6.7-4.3-.7.9-25.9,45.1-26.3,46-.3.7,2,3.7,5,6.8h0s5.4,5.6,5.4,5.6l3-1.6c6.6-3.5,43-24.6,43.8-25.3,2.3-2-13.4-19.5-24.2-27.2Z"})]}),ve.jsxs("g",{id:"svg-steam",fillOpacity:"0",strokeOpacity:"0",children:[ve.jsx("path",{className:"cls-1",d:"M197.3,145.6c-6.3-3.2-7.8-4.4-9.8-7.9-16.1-29.6-52.5-38.6-80.7-20.1-2.3,1.5-2.5,1.4-7.3-1.7-38.3-25.8-88.4,12.3-73.6,56l1.9,5.5-7.7,7.6c-39.5,39.3-16.7,106.5,38.8,114.1h0c25.5,3.5,53.5-10.5,66.4-33.1l2.5-4.5h7.1c11.2,0,22.9-5.2,28.6-12.7,2.3-3,2.4-3,11.9-3.5,55.3-2.7,71.1-75.1,21.8-99.8ZM166.7,235.1l-6.3-1.3-.9,2.6c-4,11.6-20,18.4-32.7,14-4.6-1.6-5-1.6-5.5-.2-5.6,17.9-22.7,33.8-40.8,38.1h0c-61,14.4-96.1-69.4-42.8-102.3,3-1.9,5.5-3.5,5.5-3.7s-1.3-2.3-2.8-4.7c-24-37.9,28.6-79.2,59.2-46.5l4.2,4.5,3.7-3.2c22-19.3,59.9-11.6,72.2,14.7,2.5,5.2,2.9,5.7,7.5,7.1,48.8,15.4,29.5,91.6-20.5,81Z"}),ve.jsx("path",{className:"cls-1",d:"M725.9,172.7l.8-6.4c3.9-29.6-10.3-68.7-31.4-86.5-12.1-10.2-47.6-21.2-59.2-18.3-2,.5-2.3,0-3.4-4-21.3-78.7-138.1-73.5-154.2,7-.6,3-.7,3-6,3-52.7,0-100.6,48.2-102.9,103.7-3.5,83.2,83.7,140.2,157.5,102.9l4.4-2.2,5.9,4.8c15.5,12.5,36.1,16.9,54.9,11.7l5.8-1.6,3.2,2.8c10.4,9.1,25.1,16.3,40,19.5h0c71.6,15.4,129-68.8,88.8-130l-4.1-6.2ZM674.8,291.5h0c-24,6.7-48.3,0-66.7-18.1l-7.4-7.3-5.5,2.9c-20.3,10.8-45.6,3.8-56.8-15.8l-2.6-4.6-8.1,5.4c-59.8,40.1-141.3-3.8-141.4-76.1,0-54.7,50.4-99.5,102.4-91l5.4.9v-7.2c0-41.2,41.9-71,81.1-57.7,24.5,8.3,38.7,26.8,42.2,55l.5,4.3,5.8-.8c48.6-7,93,40.4,83.7,89.5l-1.5,8.2,4.3,5.2c30,36.8,11.1,94.3-35.3,107.3Z"}),ve.jsx("polygon",{className:"cls-1",points:"1248.4 535.7 1248.4 535.7 1248.4 535.7 1248.4 535.7"}),ve.jsx("path",{className:"cls-1",d:"M1328.7,251.9c-3.1-1.9-4.8-3.5-4.6-4.4.2-.8,1.3-4.8,2.4-8.9,27.4-102-98.9-177.3-175-104.4l-4.9,4.7-5.4-3.3c-111.4-67-248.9,34.9-216.8,160.6,15.1,59.2,61.9,99.5,126.5,109.2,3.2.5,3.3.6,4.9,7.2,6.3,26,27.2,48.1,53.6,56.6l6.5,2.1,3.1,9.5c14.2,43.4,50.4,74,94.6,79.7h0c65.6,8.6,126.1-41.8,128.7-107.3l.5-13.1,4.1-4.6c51.9-57.9,43.2-146.4-18.2-183.7ZM1323.7,424.1l-7,7.4v15.1c-.4,44-27,78.7-68.3,89.2,0,0,0,0,0,0h0s0,0,0,0c-54,13.6-106.6-23.6-112.7-79.9l-.6-5.9h-5.8c-30.6,0-57.4-30-54.4-60.9l.6-6.1h-13c-95.8-.4-153.7-108-101.3-188.2,40.8-62.4,127.6-74.4,182.9-25.3,4.3,3.8,4.9,4.1,5.7,2.6,27.7-47.6,91.8-56.3,130.5-17.8,25.8,25.7,31.4,68.2,12.9,99.3-1.8,3-3.2,5.6-3,5.7.1.1,2.6,1.4,5.4,2.8,61.3,30.8,75.5,112.4,28.1,162Z"})]})]})}),ve.jsx("audio",{id:"music",src:lj})]})),uj=()=>ve.jsxs(ve.Fragment,{children:[ve.jsx(ij,{}),ve.jsx(c6,{}),ve.jsx(cj,{})]}),dj=()=>ve.jsxs(ve.Fragment,{children:[ve.jsx(Yx,{}),ve.jsx(sj,{})]});function hj(){return ve.jsx("div",{className:"appContainer",children:ve.jsx(qR,{children:ve.jsxs($R,{children:[ve.jsx(S_,{path:"/",element:ve.jsx(uj,{})}),ve.jsx(S_,{path:"/info",element:ve.jsx(dj,{})})]})})})}const fj={mode:"averageBetween",selectedCity:"Vienna"},JC=XL({name:"appState",initialState:fj,reducers:{},extraReducers:e=>{e.addCase(Mk,(t,r)=>({...t,coordinates:r.payload})),e.addCase(kk,(t,r)=>({...t,selectedCity:r.payload})),e.addCase(_1,(t,r)=>({...t,filteredCities:r.payload})),e.addCase(Ak,(t,r)=>({...t,mode:r.payload}))}}),pj=AI({[JC.name]:JC.reducer}),mj=jL({reducer:pj});I0.createRoot(document.getElementById("root")).render(ve.jsx(rt.StrictMode,{children:ve.jsx(iL,{store:mj,children:ve.jsx(hj,{})})}));export{TA as c,uf as g};

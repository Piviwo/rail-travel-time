function aS(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const m=Object.getOwnPropertyDescriptor(s,c);m&&Object.defineProperty(e,c,m.get?m:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function s(c){if(c.ep)return;c.ep=!0;const m=i(c);fetch(c.href,m)}})();var Vk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sS={exports:{}},Dm={},lS={exports:{}},Yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld=Symbol.for("react.element"),Uk=Symbol.for("react.portal"),Hk=Symbol.for("react.fragment"),Wk=Symbol.for("react.strict_mode"),qk=Symbol.for("react.profiler"),Gk=Symbol.for("react.provider"),Zk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Xk=Symbol.for("react.suspense"),Yk=Symbol.for("react.memo"),Jk=Symbol.for("react.lazy"),pb=Symbol.iterator;function Qk(e){return e===null||typeof e!="object"?null:(e=pb&&e[pb]||e["@@iterator"],typeof e=="function"?e:null)}var cS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uS=Object.assign,hS={};function hu(e,t,i){this.props=e,this.context=t,this.refs=hS,this.updater=i||cS}hu.prototype.isReactComponent={};hu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dS(){}dS.prototype=hu.prototype;function c_(e,t,i){this.props=e,this.context=t,this.refs=hS,this.updater=i||cS}var u_=c_.prototype=new dS;u_.constructor=c_;uS(u_,hu.prototype);u_.isPureReactComponent=!0;var mb=Array.isArray,fS=Object.prototype.hasOwnProperty,h_={current:null},pS={key:!0,ref:!0,__self:!0,__source:!0};function mS(e,t,i){var s,c={},m=null,g=null;if(t!=null)for(s in t.ref!==void 0&&(g=t.ref),t.key!==void 0&&(m=""+t.key),t)fS.call(t,s)&&!pS.hasOwnProperty(s)&&(c[s]=t[s]);var h=arguments.length-2;if(h===1)c.children=i;else if(1<h){for(var C=Array(h),T=0;T<h;T++)C[T]=arguments[T+2];c.children=C}if(e&&e.defaultProps)for(s in h=e.defaultProps,h)c[s]===void 0&&(c[s]=h[s]);return{$$typeof:Ld,type:e,key:m,ref:g,props:c,_owner:h_.current}}function eM(e,t){return{$$typeof:Ld,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function d_(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ld}function tM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var gb=/\/+/g;function Fy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tM(""+e.key):t.toString(36)}function Rp(e,t,i,s,c){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(m){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case Ld:case Uk:g=!0}}if(g)return g=e,c=c(g),e=s===""?"."+Fy(g,0):s,mb(c)?(i="",e!=null&&(i=e.replace(gb,"$&/")+"/"),Rp(c,t,i,"",function(T){return T})):c!=null&&(d_(c)&&(c=eM(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(gb,"$&/")+"/")+e)),t.push(c)),1;if(g=0,s=s===""?".":s+":",mb(e))for(var h=0;h<e.length;h++){m=e[h];var C=s+Fy(m,h);g+=Rp(m,t,i,C,c)}else if(C=Qk(e),typeof C=="function")for(e=C.call(e),h=0;!(m=e.next()).done;)m=m.value,C=s+Fy(m,h++),g+=Rp(m,t,i,C,c);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function op(e,t,i){if(e==null)return e;var s=[],c=0;return Rp(e,s,"","",function(m){return t.call(i,m,c++)}),s}function nM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gi={current:null},Lp={transition:null},rM={ReactCurrentDispatcher:gi,ReactCurrentBatchConfig:Lp,ReactCurrentOwner:h_};function gS(){throw Error("act(...) is not supported in production builds of React.")}Yt.Children={map:op,forEach:function(e,t,i){op(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return op(e,function(){t++}),t},toArray:function(e){return op(e,function(t){return t})||[]},only:function(e){if(!d_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Yt.Component=hu;Yt.Fragment=Hk;Yt.Profiler=qk;Yt.PureComponent=c_;Yt.StrictMode=Wk;Yt.Suspense=Xk;Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rM;Yt.act=gS;Yt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=uS({},e.props),c=e.key,m=e.ref,g=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,g=h_.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(C in t)fS.call(t,C)&&!pS.hasOwnProperty(C)&&(s[C]=t[C]===void 0&&h!==void 0?h[C]:t[C])}var C=arguments.length-2;if(C===1)s.children=i;else if(1<C){h=Array(C);for(var T=0;T<C;T++)h[T]=arguments[T+2];s.children=h}return{$$typeof:Ld,type:e.type,key:c,ref:m,props:s,_owner:g}};Yt.createContext=function(e){return e={$$typeof:Zk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gk,_context:e},e.Consumer=e};Yt.createElement=mS;Yt.createFactory=function(e){var t=mS.bind(null,e);return t.type=e,t};Yt.createRef=function(){return{current:null}};Yt.forwardRef=function(e){return{$$typeof:Kk,render:e}};Yt.isValidElement=d_;Yt.lazy=function(e){return{$$typeof:Jk,_payload:{_status:-1,_result:e},_init:nM}};Yt.memo=function(e,t){return{$$typeof:Yk,type:e,compare:t===void 0?null:t}};Yt.startTransition=function(e){var t=Lp.transition;Lp.transition={};try{e()}finally{Lp.transition=t}};Yt.unstable_act=gS;Yt.useCallback=function(e,t){return gi.current.useCallback(e,t)};Yt.useContext=function(e){return gi.current.useContext(e)};Yt.useDebugValue=function(){};Yt.useDeferredValue=function(e){return gi.current.useDeferredValue(e)};Yt.useEffect=function(e,t){return gi.current.useEffect(e,t)};Yt.useId=function(){return gi.current.useId()};Yt.useImperativeHandle=function(e,t,i){return gi.current.useImperativeHandle(e,t,i)};Yt.useInsertionEffect=function(e,t){return gi.current.useInsertionEffect(e,t)};Yt.useLayoutEffect=function(e,t){return gi.current.useLayoutEffect(e,t)};Yt.useMemo=function(e,t){return gi.current.useMemo(e,t)};Yt.useReducer=function(e,t,i){return gi.current.useReducer(e,t,i)};Yt.useRef=function(e){return gi.current.useRef(e)};Yt.useState=function(e){return gi.current.useState(e)};Yt.useSyncExternalStore=function(e,t,i){return gi.current.useSyncExternalStore(e,t,i)};Yt.useTransition=function(){return gi.current.useTransition()};Yt.version="18.3.1";lS.exports=Yt;var N=lS.exports;const lt=Rd(N),Fd=aS({__proto__:null,default:lt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM=N,oM=Symbol.for("react.element"),aM=Symbol.for("react.fragment"),sM=Object.prototype.hasOwnProperty,lM=iM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cM={key:!0,ref:!0,__self:!0,__source:!0};function yS(e,t,i){var s,c={},m=null,g=null;i!==void 0&&(m=""+i),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(g=t.ref);for(s in t)sM.call(t,s)&&!cM.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)c[s]===void 0&&(c[s]=t[s]);return{$$typeof:oM,type:e,key:m,ref:g,props:c,_owner:lM.current}}Dm.Fragment=aM;Dm.jsx=yS;Dm.jsxs=yS;sS.exports=Dm;var xe=sS.exports,Pv={},vS={exports:{}},Yi={},_S={exports:{}},xS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Se,ze){var Ve=Se.length;Se.push(ze);e:for(;0<Ve;){var We=Ve-1>>>1,Xe=Se[We];if(0<c(Xe,ze))Se[We]=ze,Se[Ve]=Xe,Ve=We;else break e}}function i(Se){return Se.length===0?null:Se[0]}function s(Se){if(Se.length===0)return null;var ze=Se[0],Ve=Se.pop();if(Ve!==ze){Se[0]=Ve;e:for(var We=0,Xe=Se.length,wt=Xe>>>1;We<wt;){var Dt=2*(We+1)-1,Zt=Se[Dt],Kt=Dt+1,Ht=Se[Kt];if(0>c(Zt,Ve))Kt<Xe&&0>c(Ht,Zt)?(Se[We]=Ht,Se[Kt]=Ve,We=Kt):(Se[We]=Zt,Se[Dt]=Ve,We=Dt);else if(Kt<Xe&&0>c(Ht,Ve))Se[We]=Ht,Se[Kt]=Ve,We=Kt;else break e}}return ze}function c(Se,ze){var Ve=Se.sortIndex-ze.sortIndex;return Ve!==0?Ve:Se.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var g=Date,h=g.now();e.unstable_now=function(){return g.now()-h}}var C=[],T=[],k=1,z=null,M=3,Y=!1,K=!1,Z=!1,Q=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(Se){for(var ze=i(T);ze!==null;){if(ze.callback===null)s(T);else if(ze.startTime<=Se)s(T),ze.sortIndex=ze.expirationTime,t(C,ze);else break;ze=i(T)}}function ne(Se){if(Z=!1,H(Se),!K)if(i(C)!==null)K=!0,Oe(he);else{var ze=i(T);ze!==null&&Pe(ne,ze.startTime-Se)}}function he(Se,ze){K=!1,Z&&(Z=!1,U(Me),Me=-1),Y=!0;var Ve=M;try{for(H(ze),z=i(C);z!==null&&(!(z.expirationTime>ze)||Se&&!He());){var We=z.callback;if(typeof We=="function"){z.callback=null,M=z.priorityLevel;var Xe=We(z.expirationTime<=ze);ze=e.unstable_now(),typeof Xe=="function"?z.callback=Xe:z===i(C)&&s(C),H(ze)}else s(C);z=i(C)}if(z!==null)var wt=!0;else{var Dt=i(T);Dt!==null&&Pe(ne,Dt.startTime-ze),wt=!1}return wt}finally{z=null,M=Ve,Y=!1}}var ge=!1,ue=null,Me=-1,Be=5,Re=-1;function He(){return!(e.unstable_now()-Re<Be)}function rt(){if(ue!==null){var Se=e.unstable_now();Re=Se;var ze=!0;try{ze=ue(!0,Se)}finally{ze?Ze():(ge=!1,ue=null)}}else ge=!1}var Ze;if(typeof D=="function")Ze=function(){D(rt)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,ut=qe.port2;qe.port1.onmessage=rt,Ze=function(){ut.postMessage(null)}}else Ze=function(){Q(rt,0)};function Oe(Se){ue=Se,ge||(ge=!0,Ze())}function Pe(Se,ze){Me=Q(function(){Se(e.unstable_now())},ze)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_continueExecution=function(){K||Y||(K=!0,Oe(he))},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Be=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return i(C)},e.unstable_next=function(Se){switch(M){case 1:case 2:case 3:var ze=3;break;default:ze=M}var Ve=M;M=ze;try{return Se()}finally{M=Ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Se,ze){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var Ve=M;M=Se;try{return ze()}finally{M=Ve}},e.unstable_scheduleCallback=function(Se,ze,Ve){var We=e.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?We+Ve:We):Ve=We,Se){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=Ve+Xe,Se={id:k++,callback:ze,priorityLevel:Se,startTime:Ve,expirationTime:Xe,sortIndex:-1},Ve>We?(Se.sortIndex=Ve,t(T,Se),i(C)===null&&Se===i(T)&&(Z?(U(Me),Me=-1):Z=!0,Pe(ne,Ve-We))):(Se.sortIndex=Xe,t(C,Se),K||Y||(K=!0,Oe(he))),Se},e.unstable_shouldYield=He,e.unstable_wrapCallback=function(Se){var ze=M;return function(){var Ve=M;M=ze;try{return Se.apply(this,arguments)}finally{M=Ve}}}})(xS);_S.exports=xS;var uM=_S.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hM=N,Xi=uM;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bS=new Set,ad={};function Ol(e,t){Jc(e,t),Jc(e+"Capture",t)}function Jc(e,t){for(ad[e]=t,e=0;e<t.length;e++)bS.add(t[e])}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iv=Object.prototype.hasOwnProperty,dM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yb={},vb={};function fM(e){return Iv.call(vb,e)?!0:Iv.call(yb,e)?!1:dM.test(e)?vb[e]=!0:(yb[e]=!0,!1)}function pM(e,t,i,s){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mM(e,t,i,s){if(t===null||typeof t>"u"||pM(e,t,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yi(e,t,i,s,c,m,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=g}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qr[e]=new yi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qr[t]=new yi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qr[e]=new yi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qr[e]=new yi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qr[e]=new yi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qr[e]=new yi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qr[e]=new yi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qr[e]=new yi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qr[e]=new yi(e,5,!1,e.toLowerCase(),null,!1,!1)});var f_=/[\-:]([a-z])/g;function p_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f_,p_);qr[t]=new yi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f_,p_);qr[t]=new yi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f_,p_);qr[t]=new yi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qr[e]=new yi(e,1,!1,e.toLowerCase(),null,!1,!1)});qr.xlinkHref=new yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qr[e]=new yi(e,1,!1,e.toLowerCase(),null,!0,!0)});function m_(e,t,i,s){var c=qr.hasOwnProperty(t)?qr[t]:null;(c!==null?c.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mM(t,i,c,s)&&(i=null),s||c===null?fM(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(t=c.attributeName,s=c.attributeNamespace,i===null?e.removeAttribute(t):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}var ja=hM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ap=Symbol.for("react.element"),Mc=Symbol.for("react.portal"),Ac=Symbol.for("react.fragment"),g_=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),wS=Symbol.for("react.provider"),SS=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),Mv=Symbol.for("react.suspense"),Av=Symbol.for("react.suspense_list"),v_=Symbol.for("react.memo"),ds=Symbol.for("react.lazy"),CS=Symbol.for("react.offscreen"),_b=Symbol.iterator;function zh(e){return e===null||typeof e!="object"?null:(e=_b&&e[_b]||e["@@iterator"],typeof e=="function"?e:null)}var Nn=Object.assign,Dy;function Vh(e){if(Dy===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Dy=t&&t[1]||""}return`
`+Dy+e}var Oy=!1;function By(e,t){if(!e||Oy)return"";Oy=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var s=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){s=T}e.call(t.prototype)}else{try{throw Error()}catch(T){s=T}e()}}catch(T){if(T&&s&&typeof T.stack=="string"){for(var c=T.stack.split(`
`),m=s.stack.split(`
`),g=c.length-1,h=m.length-1;1<=g&&0<=h&&c[g]!==m[h];)h--;for(;1<=g&&0<=h;g--,h--)if(c[g]!==m[h]){if(g!==1||h!==1)do if(g--,h--,0>h||c[g]!==m[h]){var C=`
`+c[g].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}while(1<=g&&0<=h);break}}}finally{Oy=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Vh(e):""}function gM(e){switch(e.tag){case 5:return Vh(e.type);case 16:return Vh("Lazy");case 13:return Vh("Suspense");case 19:return Vh("SuspenseList");case 0:case 2:case 15:return e=By(e.type,!1),e;case 11:return e=By(e.type.render,!1),e;case 1:return e=By(e.type,!0),e;default:return""}}function zv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ac:return"Fragment";case Mc:return"Portal";case kv:return"Profiler";case g_:return"StrictMode";case Mv:return"Suspense";case Av:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SS:return(e.displayName||"Context")+".Consumer";case wS:return(e._context.displayName||"Context")+".Provider";case y_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v_:return t=e.displayName||null,t!==null?t:zv(e.type)||"Memo";case ds:t=e._payload,e=e._init;try{return zv(e(t))}catch{}}return null}function yM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zv(t);case 8:return t===g_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ES(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vM(e){var t=ES(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,m=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){s=""+g,m.call(this,g)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sp(e){e._valueTracker||(e._valueTracker=vM(e))}function TS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=ES(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function tm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rv(e,t){var i=t.checked;return Nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function xb(e,t){var i=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;i=Ms(t.value!=null?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PS(e,t){t=t.checked,t!=null&&m_(e,"checked",t,!1)}function Lv(e,t){PS(e,t);var i=Ms(t.value),s=t.type;if(i!=null)s==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fv(e,t.type,i):t.hasOwnProperty("defaultValue")&&Fv(e,t.type,Ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bb(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Fv(e,t,i){(t!=="number"||tm(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Uh=Array.isArray;function Wc(e,t,i,s){if(e=e.options,t){t={};for(var c=0;c<i.length;c++)t["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=t.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+Ms(i),t=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Dv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wb(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(tt(92));if(Uh(i)){if(1<i.length)throw Error(tt(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Ms(i)}}function IS(e,t){var i=Ms(t.value),s=Ms(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),s!=null&&(e.defaultValue=""+s)}function Sb(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kS(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ov(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kS(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lp,MS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,s,c){MSApp.execUnsafeLocalFunction(function(){return e(t,i,s,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lp=lp||document.createElement("div"),lp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sd(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_M=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(e){_M.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gh[t]=Gh[e]})});function AS(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Gh.hasOwnProperty(e)&&Gh[e]?(""+t).trim():t+"px"}function zS(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var s=i.indexOf("--")===0,c=AS(i,t[i],s);i==="float"&&(i="cssFloat"),s?e.setProperty(i,c):e[i]=c}}var xM=Nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bv(e,t){if(t){if(xM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function Nv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jv=null;function __(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $v=null,qc=null,Gc=null;function Cb(e){if(e=Bd(e)){if(typeof $v!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=$m(t),$v(e.stateNode,e.type,t))}}function RS(e){qc?Gc?Gc.push(e):Gc=[e]:qc=e}function LS(){if(qc){var e=qc,t=Gc;if(Gc=qc=null,Cb(e),t)for(e=0;e<t.length;e++)Cb(t[e])}}function FS(e,t){return e(t)}function DS(){}var Ny=!1;function OS(e,t,i){if(Ny)return e(t,i);Ny=!0;try{return FS(e,t,i)}finally{Ny=!1,(qc!==null||Gc!==null)&&(DS(),LS())}}function ld(e,t){var i=e.stateNode;if(i===null)return null;var s=$m(i);if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(tt(231,t,typeof i));return i}var Vv=!1;if(Fa)try{var Rh={};Object.defineProperty(Rh,"passive",{get:function(){Vv=!0}}),window.addEventListener("test",Rh,Rh),window.removeEventListener("test",Rh,Rh)}catch{Vv=!1}function bM(e,t,i,s,c,m,g,h,C){var T=Array.prototype.slice.call(arguments,3);try{t.apply(i,T)}catch(k){this.onError(k)}}var Zh=!1,nm=null,rm=!1,Uv=null,wM={onError:function(e){Zh=!0,nm=e}};function SM(e,t,i,s,c,m,g,h,C){Zh=!1,nm=null,bM.apply(wM,arguments)}function CM(e,t,i,s,c,m,g,h,C){if(SM.apply(this,arguments),Zh){if(Zh){var T=nm;Zh=!1,nm=null}else throw Error(tt(198));rm||(rm=!0,Uv=T)}}function Bl(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function BS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eb(e){if(Bl(e)!==e)throw Error(tt(188))}function EM(e){var t=e.alternate;if(!t){if(t=Bl(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var i=e,s=t;;){var c=i.return;if(c===null)break;var m=c.alternate;if(m===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===m.child){for(m=c.child;m;){if(m===i)return Eb(c),e;if(m===s)return Eb(c),t;m=m.sibling}throw Error(tt(188))}if(i.return!==s.return)i=c,s=m;else{for(var g=!1,h=c.child;h;){if(h===i){g=!0,i=c,s=m;break}if(h===s){g=!0,s=c,i=m;break}h=h.sibling}if(!g){for(h=m.child;h;){if(h===i){g=!0,i=m,s=c;break}if(h===s){g=!0,s=m,i=c;break}h=h.sibling}if(!g)throw Error(tt(189))}}if(i.alternate!==s)throw Error(tt(190))}if(i.tag!==3)throw Error(tt(188));return i.stateNode.current===i?e:t}function NS(e){return e=EM(e),e!==null?jS(e):null}function jS(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jS(e);if(t!==null)return t;e=e.sibling}return null}var $S=Xi.unstable_scheduleCallback,Tb=Xi.unstable_cancelCallback,TM=Xi.unstable_shouldYield,PM=Xi.unstable_requestPaint,or=Xi.unstable_now,IM=Xi.unstable_getCurrentPriorityLevel,x_=Xi.unstable_ImmediatePriority,VS=Xi.unstable_UserBlockingPriority,im=Xi.unstable_NormalPriority,kM=Xi.unstable_LowPriority,US=Xi.unstable_IdlePriority,Om=null,ra=null;function MM(e){if(ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(Om,e,void 0,(e.current.flags&128)===128)}catch{}}var Do=Math.clz32?Math.clz32:RM,AM=Math.log,zM=Math.LN2;function RM(e){return e>>>=0,e===0?32:31-(AM(e)/zM|0)|0}var cp=64,up=4194304;function Hh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function om(e,t){var i=e.pendingLanes;if(i===0)return 0;var s=0,c=e.suspendedLanes,m=e.pingedLanes,g=i&268435455;if(g!==0){var h=g&~c;h!==0?s=Hh(h):(m&=g,m!==0&&(s=Hh(m)))}else g=i&~c,g!==0?s=Hh(g):m!==0&&(s=Hh(m));if(s===0)return 0;if(t!==0&&t!==s&&!(t&c)&&(c=s&-s,m=t&-t,c>=m||c===16&&(m&4194240)!==0))return t;if(s&4&&(s|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)i=31-Do(t),c=1<<i,s|=e[i],t&=~c;return s}function LM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FM(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,m=e.pendingLanes;0<m;){var g=31-Do(m),h=1<<g,C=c[g];C===-1?(!(h&i)||h&s)&&(c[g]=LM(h,t)):C<=t&&(e.expiredLanes|=h),m&=~h}}function Hv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HS(){var e=cp;return cp<<=1,!(cp&4194240)&&(cp=64),e}function jy(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Dd(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Do(t),e[t]=i}function DM(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-Do(i),m=1<<c;t[c]=0,s[c]=-1,e[c]=-1,i&=~m}}function b_(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-Do(i),c=1<<s;c&t|e[s]&t&&(e[s]|=t),i&=~c}}var hn=0;function WS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qS,w_,GS,ZS,KS,Wv=!1,hp=[],bs=null,ws=null,Ss=null,cd=new Map,ud=new Map,ps=[],OM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pb(e,t){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":cd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(t.pointerId)}}function Lh(e,t,i,s,c,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:m,targetContainers:[c]},t!==null&&(t=Bd(t),t!==null&&w_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function BM(e,t,i,s,c){switch(t){case"focusin":return bs=Lh(bs,e,t,i,s,c),!0;case"dragenter":return ws=Lh(ws,e,t,i,s,c),!0;case"mouseover":return Ss=Lh(Ss,e,t,i,s,c),!0;case"pointerover":var m=c.pointerId;return cd.set(m,Lh(cd.get(m)||null,e,t,i,s,c)),!0;case"gotpointercapture":return m=c.pointerId,ud.set(m,Lh(ud.get(m)||null,e,t,i,s,c)),!0}return!1}function XS(e){var t=vl(e.target);if(t!==null){var i=Bl(t);if(i!==null){if(t=i.tag,t===13){if(t=BS(i),t!==null){e.blockedOn=t,KS(e.priority,function(){GS(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=qv(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);jv=s,i.target.dispatchEvent(s),jv=null}else return t=Bd(i),t!==null&&w_(t),e.blockedOn=i,!1;t.shift()}return!0}function Ib(e,t,i){Fp(e)&&i.delete(t)}function NM(){Wv=!1,bs!==null&&Fp(bs)&&(bs=null),ws!==null&&Fp(ws)&&(ws=null),Ss!==null&&Fp(Ss)&&(Ss=null),cd.forEach(Ib),ud.forEach(Ib)}function Fh(e,t){e.blockedOn===t&&(e.blockedOn=null,Wv||(Wv=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,NM)))}function hd(e){function t(c){return Fh(c,e)}if(0<hp.length){Fh(hp[0],e);for(var i=1;i<hp.length;i++){var s=hp[i];s.blockedOn===e&&(s.blockedOn=null)}}for(bs!==null&&Fh(bs,e),ws!==null&&Fh(ws,e),Ss!==null&&Fh(Ss,e),cd.forEach(t),ud.forEach(t),i=0;i<ps.length;i++)s=ps[i],s.blockedOn===e&&(s.blockedOn=null);for(;0<ps.length&&(i=ps[0],i.blockedOn===null);)XS(i),i.blockedOn===null&&ps.shift()}var Zc=ja.ReactCurrentBatchConfig,am=!0;function jM(e,t,i,s){var c=hn,m=Zc.transition;Zc.transition=null;try{hn=1,S_(e,t,i,s)}finally{hn=c,Zc.transition=m}}function $M(e,t,i,s){var c=hn,m=Zc.transition;Zc.transition=null;try{hn=4,S_(e,t,i,s)}finally{hn=c,Zc.transition=m}}function S_(e,t,i,s){if(am){var c=qv(e,t,i,s);if(c===null)Xy(e,t,s,sm,i),Pb(e,s);else if(BM(c,e,t,i,s))s.stopPropagation();else if(Pb(e,s),t&4&&-1<OM.indexOf(e)){for(;c!==null;){var m=Bd(c);if(m!==null&&qS(m),m=qv(e,t,i,s),m===null&&Xy(e,t,s,sm,i),m===c)break;c=m}c!==null&&s.stopPropagation()}else Xy(e,t,s,null,i)}}var sm=null;function qv(e,t,i,s){if(sm=null,e=__(s),e=vl(e),e!==null)if(t=Bl(e),t===null)e=null;else if(i=t.tag,i===13){if(e=BS(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return sm=e,null}function YS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IM()){case x_:return 1;case VS:return 4;case im:case kM:return 16;case US:return 536870912;default:return 16}default:return 16}}var gs=null,C_=null,Dp=null;function JS(){if(Dp)return Dp;var e,t=C_,i=t.length,s,c="value"in gs?gs.value:gs.textContent,m=c.length;for(e=0;e<i&&t[e]===c[e];e++);var g=i-e;for(s=1;s<=g&&t[i-s]===c[m-s];s++);return Dp=c.slice(e,1<s?1-s:void 0)}function Op(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function dp(){return!0}function kb(){return!1}function Ji(e){function t(i,s,c,m,g){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=m,this.target=g,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(i=e[h],this[h]=i?i(m):m[h]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?dp:kb,this.isPropagationStopped=kb,this}return Nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),t}var du={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E_=Ji(du),Od=Nn({},du,{view:0,detail:0}),VM=Ji(Od),$y,Vy,Dh,Bm=Nn({},Od,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dh&&(Dh&&e.type==="mousemove"?($y=e.screenX-Dh.screenX,Vy=e.screenY-Dh.screenY):Vy=$y=0,Dh=e),$y)},movementY:function(e){return"movementY"in e?e.movementY:Vy}}),Mb=Ji(Bm),UM=Nn({},Bm,{dataTransfer:0}),HM=Ji(UM),WM=Nn({},Od,{relatedTarget:0}),Uy=Ji(WM),qM=Nn({},du,{animationName:0,elapsedTime:0,pseudoElement:0}),GM=Ji(qM),ZM=Nn({},du,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KM=Ji(ZM),XM=Nn({},du,{data:0}),Ab=Ji(XM),YM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=QM[e])?!!t[e]:!1}function T_(){return eA}var tA=Nn({},Od,{key:function(e){if(e.key){var t=YM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Op(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?JM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(e){return e.type==="keypress"?Op(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Op(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nA=Ji(tA),rA=Nn({},Bm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zb=Ji(rA),iA=Nn({},Od,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),oA=Ji(iA),aA=Nn({},du,{propertyName:0,elapsedTime:0,pseudoElement:0}),sA=Ji(aA),lA=Nn({},Bm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cA=Ji(lA),uA=[9,13,27,32],P_=Fa&&"CompositionEvent"in window,Kh=null;Fa&&"documentMode"in document&&(Kh=document.documentMode);var hA=Fa&&"TextEvent"in window&&!Kh,QS=Fa&&(!P_||Kh&&8<Kh&&11>=Kh),Rb=" ",Lb=!1;function eC(e,t){switch(e){case"keyup":return uA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zc=!1;function dA(e,t){switch(e){case"compositionend":return tC(t);case"keypress":return t.which!==32?null:(Lb=!0,Rb);case"textInput":return e=t.data,e===Rb&&Lb?null:e;default:return null}}function fA(e,t){if(zc)return e==="compositionend"||!P_&&eC(e,t)?(e=JS(),Dp=C_=gs=null,zc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QS&&t.locale!=="ko"?null:t.data;default:return null}}var pA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pA[e.type]:t==="textarea"}function nC(e,t,i,s){RS(s),t=lm(t,"onChange"),0<t.length&&(i=new E_("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Xh=null,dd=null;function mA(e){fC(e,0)}function Nm(e){var t=Fc(e);if(TS(t))return e}function gA(e,t){if(e==="change")return t}var rC=!1;if(Fa){var Hy;if(Fa){var Wy="oninput"in document;if(!Wy){var Db=document.createElement("div");Db.setAttribute("oninput","return;"),Wy=typeof Db.oninput=="function"}Hy=Wy}else Hy=!1;rC=Hy&&(!document.documentMode||9<document.documentMode)}function Ob(){Xh&&(Xh.detachEvent("onpropertychange",iC),dd=Xh=null)}function iC(e){if(e.propertyName==="value"&&Nm(dd)){var t=[];nC(t,dd,e,__(e)),OS(mA,t)}}function yA(e,t,i){e==="focusin"?(Ob(),Xh=t,dd=i,Xh.attachEvent("onpropertychange",iC)):e==="focusout"&&Ob()}function vA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nm(dd)}function _A(e,t){if(e==="click")return Nm(t)}function xA(e,t){if(e==="input"||e==="change")return Nm(t)}function bA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jo=typeof Object.is=="function"?Object.is:bA;function fd(e,t){if(jo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!Iv.call(t,c)||!jo(e[c],t[c]))return!1}return!0}function Bb(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Nb(e,t){var i=Bb(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Bb(i)}}function oC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aC(){for(var e=window,t=tm();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=tm(e.document)}return t}function I_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wA(e){var t=aC(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&oC(i.ownerDocument.documentElement,i)){if(s!==null&&I_(i)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,m=Math.min(s.start,c);s=s.end===void 0?m:Math.min(s.end,c),!e.extend&&m>s&&(c=s,s=m,m=c),c=Nb(i,m);var g=Nb(i,s);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),m>s?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SA=Fa&&"documentMode"in document&&11>=document.documentMode,Rc=null,Gv=null,Yh=null,Zv=!1;function jb(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Zv||Rc==null||Rc!==tm(s)||(s=Rc,"selectionStart"in s&&I_(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Yh&&fd(Yh,s)||(Yh=s,s=lm(Gv,"onSelect"),0<s.length&&(t=new E_("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Rc)))}function fp(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Lc={animationend:fp("Animation","AnimationEnd"),animationiteration:fp("Animation","AnimationIteration"),animationstart:fp("Animation","AnimationStart"),transitionend:fp("Transition","TransitionEnd")},qy={},sC={};Fa&&(sC=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function jm(e){if(qy[e])return qy[e];if(!Lc[e])return e;var t=Lc[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in sC)return qy[e]=t[i];return e}var lC=jm("animationend"),cC=jm("animationiteration"),uC=jm("animationstart"),hC=jm("transitionend"),dC=new Map,$b="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(e,t){dC.set(e,t),Ol(t,[e])}for(var Gy=0;Gy<$b.length;Gy++){var Zy=$b[Gy],CA=Zy.toLowerCase(),EA=Zy[0].toUpperCase()+Zy.slice(1);Rs(CA,"on"+EA)}Rs(lC,"onAnimationEnd");Rs(cC,"onAnimationIteration");Rs(uC,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(hC,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);Ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wh));function Vb(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,CM(s,t,void 0,e),e.currentTarget=null}function fC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var m=void 0;if(t)for(var g=s.length-1;0<=g;g--){var h=s[g],C=h.instance,T=h.currentTarget;if(h=h.listener,C!==m&&c.isPropagationStopped())break e;Vb(c,h,T),m=C}else for(g=0;g<s.length;g++){if(h=s[g],C=h.instance,T=h.currentTarget,h=h.listener,C!==m&&c.isPropagationStopped())break e;Vb(c,h,T),m=C}}}if(rm)throw e=Uv,rm=!1,Uv=null,e}function Tn(e,t){var i=t[Qv];i===void 0&&(i=t[Qv]=new Set);var s=e+"__bubble";i.has(s)||(pC(t,e,2,!1),i.add(s))}function Ky(e,t,i){var s=0;t&&(s|=4),pC(i,e,s,t)}var pp="_reactListening"+Math.random().toString(36).slice(2);function pd(e){if(!e[pp]){e[pp]=!0,bS.forEach(function(i){i!=="selectionchange"&&(TA.has(i)||Ky(i,!1,e),Ky(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pp]||(t[pp]=!0,Ky("selectionchange",!1,t))}}function pC(e,t,i,s){switch(YS(t)){case 1:var c=jM;break;case 4:c=$M;break;default:c=S_}i=c.bind(null,t,i,e),c=void 0,!Vv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(t,i,{capture:!0,passive:c}):e.addEventListener(t,i,!0):c!==void 0?e.addEventListener(t,i,{passive:c}):e.addEventListener(t,i,!1)}function Xy(e,t,i,s,c){var m=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var h=s.stateNode.containerInfo;if(h===c||h.nodeType===8&&h.parentNode===c)break;if(g===4)for(g=s.return;g!==null;){var C=g.tag;if((C===3||C===4)&&(C=g.stateNode.containerInfo,C===c||C.nodeType===8&&C.parentNode===c))return;g=g.return}for(;h!==null;){if(g=vl(h),g===null)return;if(C=g.tag,C===5||C===6){s=m=g;continue e}h=h.parentNode}}s=s.return}OS(function(){var T=m,k=__(i),z=[];e:{var M=dC.get(e);if(M!==void 0){var Y=E_,K=e;switch(e){case"keypress":if(Op(i)===0)break e;case"keydown":case"keyup":Y=nA;break;case"focusin":K="focus",Y=Uy;break;case"focusout":K="blur",Y=Uy;break;case"beforeblur":case"afterblur":Y=Uy;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Mb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=HM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=oA;break;case lC:case cC:case uC:Y=GM;break;case hC:Y=sA;break;case"scroll":Y=VM;break;case"wheel":Y=cA;break;case"copy":case"cut":case"paste":Y=KM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=zb}var Z=(t&4)!==0,Q=!Z&&e==="scroll",U=Z?M!==null?M+"Capture":null:M;Z=[];for(var D=T,H;D!==null;){H=D;var ne=H.stateNode;if(H.tag===5&&ne!==null&&(H=ne,U!==null&&(ne=ld(D,U),ne!=null&&Z.push(md(D,ne,H)))),Q)break;D=D.return}0<Z.length&&(M=new Y(M,K,null,i,k),z.push({event:M,listeners:Z}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",M&&i!==jv&&(K=i.relatedTarget||i.fromElement)&&(vl(K)||K[Da]))break e;if((Y||M)&&(M=k.window===k?k:(M=k.ownerDocument)?M.defaultView||M.parentWindow:window,Y?(K=i.relatedTarget||i.toElement,Y=T,K=K?vl(K):null,K!==null&&(Q=Bl(K),K!==Q||K.tag!==5&&K.tag!==6)&&(K=null)):(Y=null,K=T),Y!==K)){if(Z=Mb,ne="onMouseLeave",U="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(Z=zb,ne="onPointerLeave",U="onPointerEnter",D="pointer"),Q=Y==null?M:Fc(Y),H=K==null?M:Fc(K),M=new Z(ne,D+"leave",Y,i,k),M.target=Q,M.relatedTarget=H,ne=null,vl(k)===T&&(Z=new Z(U,D+"enter",K,i,k),Z.target=H,Z.relatedTarget=Q,ne=Z),Q=ne,Y&&K)t:{for(Z=Y,U=K,D=0,H=Z;H;H=Ec(H))D++;for(H=0,ne=U;ne;ne=Ec(ne))H++;for(;0<D-H;)Z=Ec(Z),D--;for(;0<H-D;)U=Ec(U),H--;for(;D--;){if(Z===U||U!==null&&Z===U.alternate)break t;Z=Ec(Z),U=Ec(U)}Z=null}else Z=null;Y!==null&&Ub(z,M,Y,Z,!1),K!==null&&Q!==null&&Ub(z,Q,K,Z,!0)}}e:{if(M=T?Fc(T):window,Y=M.nodeName&&M.nodeName.toLowerCase(),Y==="select"||Y==="input"&&M.type==="file")var he=gA;else if(Fb(M))if(rC)he=xA;else{he=vA;var ge=yA}else(Y=M.nodeName)&&Y.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(he=_A);if(he&&(he=he(e,T))){nC(z,he,i,k);break e}ge&&ge(e,M,T),e==="focusout"&&(ge=M._wrapperState)&&ge.controlled&&M.type==="number"&&Fv(M,"number",M.value)}switch(ge=T?Fc(T):window,e){case"focusin":(Fb(ge)||ge.contentEditable==="true")&&(Rc=ge,Gv=T,Yh=null);break;case"focusout":Yh=Gv=Rc=null;break;case"mousedown":Zv=!0;break;case"contextmenu":case"mouseup":case"dragend":Zv=!1,jb(z,i,k);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":jb(z,i,k)}var ue;if(P_)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else zc?eC(e,i)&&(Me="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Me="onCompositionStart");Me&&(QS&&i.locale!=="ko"&&(zc||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&zc&&(ue=JS()):(gs=k,C_="value"in gs?gs.value:gs.textContent,zc=!0)),ge=lm(T,Me),0<ge.length&&(Me=new Ab(Me,e,null,i,k),z.push({event:Me,listeners:ge}),ue?Me.data=ue:(ue=tC(i),ue!==null&&(Me.data=ue)))),(ue=hA?dA(e,i):fA(e,i))&&(T=lm(T,"onBeforeInput"),0<T.length&&(k=new Ab("onBeforeInput","beforeinput",null,i,k),z.push({event:k,listeners:T}),k.data=ue))}fC(z,t)})}function md(e,t,i){return{instance:e,listener:t,currentTarget:i}}function lm(e,t){for(var i=t+"Capture",s=[];e!==null;){var c=e,m=c.stateNode;c.tag===5&&m!==null&&(c=m,m=ld(e,i),m!=null&&s.unshift(md(e,m,c)),m=ld(e,t),m!=null&&s.push(md(e,m,c))),e=e.return}return s}function Ec(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ub(e,t,i,s,c){for(var m=t._reactName,g=[];i!==null&&i!==s;){var h=i,C=h.alternate,T=h.stateNode;if(C!==null&&C===s)break;h.tag===5&&T!==null&&(h=T,c?(C=ld(i,m),C!=null&&g.unshift(md(i,C,h))):c||(C=ld(i,m),C!=null&&g.push(md(i,C,h)))),i=i.return}g.length!==0&&e.push({event:t,listeners:g})}var PA=/\r\n?/g,IA=/\u0000|\uFFFD/g;function Hb(e){return(typeof e=="string"?e:""+e).replace(PA,`
`).replace(IA,"")}function mp(e,t,i){if(t=Hb(t),Hb(e)!==t&&i)throw Error(tt(425))}function cm(){}var Kv=null,Xv=null;function Yv(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jv=typeof setTimeout=="function"?setTimeout:void 0,kA=typeof clearTimeout=="function"?clearTimeout:void 0,Wb=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof Wb<"u"?function(e){return Wb.resolve(null).then(e).catch(AA)}:Jv;function AA(e){setTimeout(function(){throw e})}function Yy(e,t){var i=t,s=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(s===0){e.removeChild(c),hd(t);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=c}while(i);hd(t)}function Cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var fu=Math.random().toString(36).slice(2),ta="__reactFiber$"+fu,gd="__reactProps$"+fu,Da="__reactContainer$"+fu,Qv="__reactEvents$"+fu,zA="__reactListeners$"+fu,RA="__reactHandles$"+fu;function vl(e){var t=e[ta];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Da]||i[ta]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=qb(e);e!==null;){if(i=e[ta])return i;e=qb(e)}return t}e=i,i=e.parentNode}return null}function Bd(e){return e=e[ta]||e[Da],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function $m(e){return e[gd]||null}var e0=[],Dc=-1;function Ls(e){return{current:e}}function Pn(e){0>Dc||(e.current=e0[Dc],e0[Dc]=null,Dc--)}function Cn(e,t){Dc++,e0[Dc]=e.current,e.current=t}var As={},ni=Ls(As),Ei=Ls(!1),Il=As;function Qc(e,t){var i=e.type.contextTypes;if(!i)return As;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var c={},m;for(m in i)c[m]=t[m];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Ti(e){return e=e.childContextTypes,e!=null}function um(){Pn(Ei),Pn(ni)}function Gb(e,t,i){if(ni.current!==As)throw Error(tt(168));Cn(ni,t),Cn(Ei,i)}function mC(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var c in s)if(!(c in t))throw Error(tt(108,yM(e)||"Unknown",c));return Nn({},i,s)}function hm(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||As,Il=ni.current,Cn(ni,e),Cn(Ei,Ei.current),!0}function Zb(e,t,i){var s=e.stateNode;if(!s)throw Error(tt(169));i?(e=mC(e,t,Il),s.__reactInternalMemoizedMergedChildContext=e,Pn(Ei),Pn(ni),Cn(ni,e)):Pn(Ei),Cn(Ei,i)}var Ia=null,Vm=!1,Jy=!1;function gC(e){Ia===null?Ia=[e]:Ia.push(e)}function LA(e){Vm=!0,gC(e)}function Fs(){if(!Jy&&Ia!==null){Jy=!0;var e=0,t=hn;try{var i=Ia;for(hn=1;e<i.length;e++){var s=i[e];do s=s(!0);while(s!==null)}Ia=null,Vm=!1}catch(c){throw Ia!==null&&(Ia=Ia.slice(e+1)),$S(x_,Fs),c}finally{hn=t,Jy=!1}}return null}var Oc=[],Bc=0,dm=null,fm=0,co=[],uo=0,kl=null,Aa=1,za="";function pl(e,t){Oc[Bc++]=fm,Oc[Bc++]=dm,dm=e,fm=t}function yC(e,t,i){co[uo++]=Aa,co[uo++]=za,co[uo++]=kl,kl=e;var s=Aa;e=za;var c=32-Do(s)-1;s&=~(1<<c),i+=1;var m=32-Do(t)+c;if(30<m){var g=c-c%5;m=(s&(1<<g)-1).toString(32),s>>=g,c-=g,Aa=1<<32-Do(t)+c|i<<c|s,za=m+e}else Aa=1<<m|i<<c|s,za=e}function k_(e){e.return!==null&&(pl(e,1),yC(e,1,0))}function M_(e){for(;e===dm;)dm=Oc[--Bc],Oc[Bc]=null,fm=Oc[--Bc],Oc[Bc]=null;for(;e===kl;)kl=co[--uo],co[uo]=null,za=co[--uo],co[uo]=null,Aa=co[--uo],co[uo]=null}var Zi=null,Wi=null,Fn=!1,Fo=null;function vC(e,t){var i=ho(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Kb(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zi=e,Wi=Cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zi=e,Wi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=kl!==null?{id:Aa,overflow:za}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ho(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Zi=e,Wi=null,!0):!1;default:return!1}}function t0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function n0(e){if(Fn){var t=Wi;if(t){var i=t;if(!Kb(e,t)){if(t0(e))throw Error(tt(418));t=Cs(i.nextSibling);var s=Zi;t&&Kb(e,t)?vC(s,i):(e.flags=e.flags&-4097|2,Fn=!1,Zi=e)}}else{if(t0(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Fn=!1,Zi=e}}}function Xb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zi=e}function gp(e){if(e!==Zi)return!1;if(!Fn)return Xb(e),Fn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yv(e.type,e.memoizedProps)),t&&(t=Wi)){if(t0(e))throw _C(),Error(tt(418));for(;t;)vC(e,t),t=Cs(t.nextSibling)}if(Xb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Wi=Cs(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Wi=null}}else Wi=Zi?Cs(e.stateNode.nextSibling):null;return!0}function _C(){for(var e=Wi;e;)e=Cs(e.nextSibling)}function eu(){Wi=Zi=null,Fn=!1}function A_(e){Fo===null?Fo=[e]:Fo.push(e)}var FA=ja.ReactCurrentBatchConfig;function Oh(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(tt(309));var s=i.stateNode}if(!s)throw Error(tt(147,e));var c=s,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(g){var h=c.refs;g===null?delete h[m]:h[m]=g},t._stringRef=m,t)}if(typeof e!="string")throw Error(tt(284));if(!i._owner)throw Error(tt(290,e))}return e}function yp(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yb(e){var t=e._init;return t(e._payload)}function xC(e){function t(U,D){if(e){var H=U.deletions;H===null?(U.deletions=[D],U.flags|=16):H.push(D)}}function i(U,D){if(!e)return null;for(;D!==null;)t(U,D),D=D.sibling;return null}function s(U,D){for(U=new Map;D!==null;)D.key!==null?U.set(D.key,D):U.set(D.index,D),D=D.sibling;return U}function c(U,D){return U=Is(U,D),U.index=0,U.sibling=null,U}function m(U,D,H){return U.index=H,e?(H=U.alternate,H!==null?(H=H.index,H<D?(U.flags|=2,D):H):(U.flags|=2,D)):(U.flags|=1048576,D)}function g(U){return e&&U.alternate===null&&(U.flags|=2),U}function h(U,D,H,ne){return D===null||D.tag!==6?(D=ov(H,U.mode,ne),D.return=U,D):(D=c(D,H),D.return=U,D)}function C(U,D,H,ne){var he=H.type;return he===Ac?k(U,D,H.props.children,ne,H.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ds&&Yb(he)===D.type)?(ne=c(D,H.props),ne.ref=Oh(U,D,H),ne.return=U,ne):(ne=Hp(H.type,H.key,H.props,null,U.mode,ne),ne.ref=Oh(U,D,H),ne.return=U,ne)}function T(U,D,H,ne){return D===null||D.tag!==4||D.stateNode.containerInfo!==H.containerInfo||D.stateNode.implementation!==H.implementation?(D=av(H,U.mode,ne),D.return=U,D):(D=c(D,H.children||[]),D.return=U,D)}function k(U,D,H,ne,he){return D===null||D.tag!==7?(D=El(H,U.mode,ne,he),D.return=U,D):(D=c(D,H),D.return=U,D)}function z(U,D,H){if(typeof D=="string"&&D!==""||typeof D=="number")return D=ov(""+D,U.mode,H),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ap:return H=Hp(D.type,D.key,D.props,null,U.mode,H),H.ref=Oh(U,null,D),H.return=U,H;case Mc:return D=av(D,U.mode,H),D.return=U,D;case ds:var ne=D._init;return z(U,ne(D._payload),H)}if(Uh(D)||zh(D))return D=El(D,U.mode,H,null),D.return=U,D;yp(U,D)}return null}function M(U,D,H,ne){var he=D!==null?D.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return he!==null?null:h(U,D,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case ap:return H.key===he?C(U,D,H,ne):null;case Mc:return H.key===he?T(U,D,H,ne):null;case ds:return he=H._init,M(U,D,he(H._payload),ne)}if(Uh(H)||zh(H))return he!==null?null:k(U,D,H,ne,null);yp(U,H)}return null}function Y(U,D,H,ne,he){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return U=U.get(H)||null,h(D,U,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case ap:return U=U.get(ne.key===null?H:ne.key)||null,C(D,U,ne,he);case Mc:return U=U.get(ne.key===null?H:ne.key)||null,T(D,U,ne,he);case ds:var ge=ne._init;return Y(U,D,H,ge(ne._payload),he)}if(Uh(ne)||zh(ne))return U=U.get(H)||null,k(D,U,ne,he,null);yp(D,ne)}return null}function K(U,D,H,ne){for(var he=null,ge=null,ue=D,Me=D=0,Be=null;ue!==null&&Me<H.length;Me++){ue.index>Me?(Be=ue,ue=null):Be=ue.sibling;var Re=M(U,ue,H[Me],ne);if(Re===null){ue===null&&(ue=Be);break}e&&ue&&Re.alternate===null&&t(U,ue),D=m(Re,D,Me),ge===null?he=Re:ge.sibling=Re,ge=Re,ue=Be}if(Me===H.length)return i(U,ue),Fn&&pl(U,Me),he;if(ue===null){for(;Me<H.length;Me++)ue=z(U,H[Me],ne),ue!==null&&(D=m(ue,D,Me),ge===null?he=ue:ge.sibling=ue,ge=ue);return Fn&&pl(U,Me),he}for(ue=s(U,ue);Me<H.length;Me++)Be=Y(ue,U,Me,H[Me],ne),Be!==null&&(e&&Be.alternate!==null&&ue.delete(Be.key===null?Me:Be.key),D=m(Be,D,Me),ge===null?he=Be:ge.sibling=Be,ge=Be);return e&&ue.forEach(function(He){return t(U,He)}),Fn&&pl(U,Me),he}function Z(U,D,H,ne){var he=zh(H);if(typeof he!="function")throw Error(tt(150));if(H=he.call(H),H==null)throw Error(tt(151));for(var ge=he=null,ue=D,Me=D=0,Be=null,Re=H.next();ue!==null&&!Re.done;Me++,Re=H.next()){ue.index>Me?(Be=ue,ue=null):Be=ue.sibling;var He=M(U,ue,Re.value,ne);if(He===null){ue===null&&(ue=Be);break}e&&ue&&He.alternate===null&&t(U,ue),D=m(He,D,Me),ge===null?he=He:ge.sibling=He,ge=He,ue=Be}if(Re.done)return i(U,ue),Fn&&pl(U,Me),he;if(ue===null){for(;!Re.done;Me++,Re=H.next())Re=z(U,Re.value,ne),Re!==null&&(D=m(Re,D,Me),ge===null?he=Re:ge.sibling=Re,ge=Re);return Fn&&pl(U,Me),he}for(ue=s(U,ue);!Re.done;Me++,Re=H.next())Re=Y(ue,U,Me,Re.value,ne),Re!==null&&(e&&Re.alternate!==null&&ue.delete(Re.key===null?Me:Re.key),D=m(Re,D,Me),ge===null?he=Re:ge.sibling=Re,ge=Re);return e&&ue.forEach(function(rt){return t(U,rt)}),Fn&&pl(U,Me),he}function Q(U,D,H,ne){if(typeof H=="object"&&H!==null&&H.type===Ac&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case ap:e:{for(var he=H.key,ge=D;ge!==null;){if(ge.key===he){if(he=H.type,he===Ac){if(ge.tag===7){i(U,ge.sibling),D=c(ge,H.props.children),D.return=U,U=D;break e}}else if(ge.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ds&&Yb(he)===ge.type){i(U,ge.sibling),D=c(ge,H.props),D.ref=Oh(U,ge,H),D.return=U,U=D;break e}i(U,ge);break}else t(U,ge);ge=ge.sibling}H.type===Ac?(D=El(H.props.children,U.mode,ne,H.key),D.return=U,U=D):(ne=Hp(H.type,H.key,H.props,null,U.mode,ne),ne.ref=Oh(U,D,H),ne.return=U,U=ne)}return g(U);case Mc:e:{for(ge=H.key;D!==null;){if(D.key===ge)if(D.tag===4&&D.stateNode.containerInfo===H.containerInfo&&D.stateNode.implementation===H.implementation){i(U,D.sibling),D=c(D,H.children||[]),D.return=U,U=D;break e}else{i(U,D);break}else t(U,D);D=D.sibling}D=av(H,U.mode,ne),D.return=U,U=D}return g(U);case ds:return ge=H._init,Q(U,D,ge(H._payload),ne)}if(Uh(H))return K(U,D,H,ne);if(zh(H))return Z(U,D,H,ne);yp(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,D!==null&&D.tag===6?(i(U,D.sibling),D=c(D,H),D.return=U,U=D):(i(U,D),D=ov(H,U.mode,ne),D.return=U,U=D),g(U)):i(U,D)}return Q}var tu=xC(!0),bC=xC(!1),pm=Ls(null),mm=null,Nc=null,z_=null;function R_(){z_=Nc=mm=null}function L_(e){var t=pm.current;Pn(pm),e._currentValue=t}function r0(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Kc(e,t){mm=e,z_=Nc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ci=!0),e.firstContext=null)}function po(e){var t=e._currentValue;if(z_!==e)if(e={context:e,memoizedValue:t,next:null},Nc===null){if(mm===null)throw Error(tt(308));Nc=e,mm.dependencies={lanes:0,firstContext:e}}else Nc=Nc.next=e;return t}var _l=null;function F_(e){_l===null?_l=[e]:_l.push(e)}function wC(e,t,i,s){var c=t.interleaved;return c===null?(i.next=i,F_(t)):(i.next=c.next,c.next=i),t.interleaved=i,Oa(e,s)}function Oa(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var fs=!1;function D_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Es(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,on&2){var c=s.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),s.pending=t,Oa(e,i)}return c=s.interleaved,c===null?(t.next=t,F_(s)):(t.next=c.next,c.next=t),s.interleaved=t,Oa(e,i)}function Bp(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,b_(e,i)}}function Jb(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};m===null?c=m=g:m=m.next=g,i=i.next}while(i!==null);m===null?c=m=t:m=m.next=t}else c=m=t;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:m,shared:s.shared,effects:s.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function gm(e,t,i,s){var c=e.updateQueue;fs=!1;var m=c.firstBaseUpdate,g=c.lastBaseUpdate,h=c.shared.pending;if(h!==null){c.shared.pending=null;var C=h,T=C.next;C.next=null,g===null?m=T:g.next=T,g=C;var k=e.alternate;k!==null&&(k=k.updateQueue,h=k.lastBaseUpdate,h!==g&&(h===null?k.firstBaseUpdate=T:h.next=T,k.lastBaseUpdate=C))}if(m!==null){var z=c.baseState;g=0,k=T=C=null,h=m;do{var M=h.lane,Y=h.eventTime;if((s&M)===M){k!==null&&(k=k.next={eventTime:Y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var K=e,Z=h;switch(M=t,Y=i,Z.tag){case 1:if(K=Z.payload,typeof K=="function"){z=K.call(Y,z,M);break e}z=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=Z.payload,M=typeof K=="function"?K.call(Y,z,M):K,M==null)break e;z=Nn({},z,M);break e;case 2:fs=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[h]:M.push(h))}else Y={eventTime:Y,lane:M,tag:h.tag,payload:h.payload,callback:h.callback,next:null},k===null?(T=k=Y,C=z):k=k.next=Y,g|=M;if(h=h.next,h===null){if(h=c.shared.pending,h===null)break;M=h,h=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(k===null&&(C=z),c.baseState=C,c.firstBaseUpdate=T,c.lastBaseUpdate=k,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else m===null&&(c.shared.lanes=0);Al|=g,e.lanes=g,e.memoizedState=z}}function Qb(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],c=s.callback;if(c!==null){if(s.callback=null,s=i,typeof c!="function")throw Error(tt(191,c));c.call(s)}}}var Nd={},ia=Ls(Nd),yd=Ls(Nd),vd=Ls(Nd);function xl(e){if(e===Nd)throw Error(tt(174));return e}function O_(e,t){switch(Cn(vd,t),Cn(yd,e),Cn(ia,Nd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ov(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ov(t,e)}Pn(ia),Cn(ia,t)}function nu(){Pn(ia),Pn(yd),Pn(vd)}function CC(e){xl(vd.current);var t=xl(ia.current),i=Ov(t,e.type);t!==i&&(Cn(yd,e),Cn(ia,i))}function B_(e){yd.current===e&&(Pn(ia),Pn(yd))}var On=Ls(0);function ym(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Qy=[];function N_(){for(var e=0;e<Qy.length;e++)Qy[e]._workInProgressVersionPrimary=null;Qy.length=0}var Np=ja.ReactCurrentDispatcher,ev=ja.ReactCurrentBatchConfig,Ml=0,Bn=null,yr=null,Mr=null,vm=!1,Jh=!1,_d=0,DA=0;function Qr(){throw Error(tt(321))}function j_(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!jo(e[i],t[i]))return!1;return!0}function $_(e,t,i,s,c,m){if(Ml=m,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Np.current=e===null||e.memoizedState===null?jA:$A,e=i(s,c),Jh){m=0;do{if(Jh=!1,_d=0,25<=m)throw Error(tt(301));m+=1,Mr=yr=null,t.updateQueue=null,Np.current=VA,e=i(s,c)}while(Jh)}if(Np.current=_m,t=yr!==null&&yr.next!==null,Ml=0,Mr=yr=Bn=null,vm=!1,t)throw Error(tt(300));return e}function V_(){var e=_d!==0;return _d=0,e}function ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Bn.memoizedState=Mr=e:Mr=Mr.next=e,Mr}function mo(){if(yr===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=yr.next;var t=Mr===null?Bn.memoizedState:Mr.next;if(t!==null)Mr=t,yr=e;else{if(e===null)throw Error(tt(310));yr=e,e={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},Mr===null?Bn.memoizedState=Mr=e:Mr=Mr.next=e}return Mr}function xd(e,t){return typeof t=="function"?t(e):t}function tv(e){var t=mo(),i=t.queue;if(i===null)throw Error(tt(311));i.lastRenderedReducer=e;var s=yr,c=s.baseQueue,m=i.pending;if(m!==null){if(c!==null){var g=c.next;c.next=m.next,m.next=g}s.baseQueue=c=m,i.pending=null}if(c!==null){m=c.next,s=s.baseState;var h=g=null,C=null,T=m;do{var k=T.lane;if((Ml&k)===k)C!==null&&(C=C.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),s=T.hasEagerState?T.eagerState:e(s,T.action);else{var z={lane:k,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};C===null?(h=C=z,g=s):C=C.next=z,Bn.lanes|=k,Al|=k}T=T.next}while(T!==null&&T!==m);C===null?g=s:C.next=h,jo(s,t.memoizedState)||(Ci=!0),t.memoizedState=s,t.baseState=g,t.baseQueue=C,i.lastRenderedState=s}if(e=i.interleaved,e!==null){c=e;do m=c.lane,Bn.lanes|=m,Al|=m,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function nv(e){var t=mo(),i=t.queue;if(i===null)throw Error(tt(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,m=t.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do m=e(m,g.action),g=g.next;while(g!==c);jo(m,t.memoizedState)||(Ci=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),i.lastRenderedState=m}return[m,s]}function EC(){}function TC(e,t){var i=Bn,s=mo(),c=t(),m=!jo(s.memoizedState,c);if(m&&(s.memoizedState=c,Ci=!0),s=s.queue,U_(kC.bind(null,i,s,e),[e]),s.getSnapshot!==t||m||Mr!==null&&Mr.memoizedState.tag&1){if(i.flags|=2048,bd(9,IC.bind(null,i,s,c,t),void 0,null),Ar===null)throw Error(tt(349));Ml&30||PC(i,t,c)}return c}function PC(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function IC(e,t,i,s){t.value=i,t.getSnapshot=s,MC(t)&&AC(e)}function kC(e,t,i){return i(function(){MC(t)&&AC(e)})}function MC(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!jo(e,i)}catch{return!0}}function AC(e){var t=Oa(e,1);t!==null&&Oo(t,e,1,-1)}function ew(e){var t=ea();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xd,lastRenderedState:e},t.queue=e,e=e.dispatch=NA.bind(null,Bn,e),[t.memoizedState,e]}function bd(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e)),e}function zC(){return mo().memoizedState}function jp(e,t,i,s){var c=ea();Bn.flags|=e,c.memoizedState=bd(1|t,i,void 0,s===void 0?null:s)}function Um(e,t,i,s){var c=mo();s=s===void 0?null:s;var m=void 0;if(yr!==null){var g=yr.memoizedState;if(m=g.destroy,s!==null&&j_(s,g.deps)){c.memoizedState=bd(t,i,m,s);return}}Bn.flags|=e,c.memoizedState=bd(1|t,i,m,s)}function tw(e,t){return jp(8390656,8,e,t)}function U_(e,t){return Um(2048,8,e,t)}function RC(e,t){return Um(4,2,e,t)}function LC(e,t){return Um(4,4,e,t)}function FC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DC(e,t,i){return i=i!=null?i.concat([e]):null,Um(4,4,FC.bind(null,t,e),i)}function H_(){}function OC(e,t){var i=mo();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&j_(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function BC(e,t){var i=mo();t=t===void 0?null:t;var s=i.memoizedState;return s!==null&&t!==null&&j_(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function NC(e,t,i){return Ml&21?(jo(i,t)||(i=HS(),Bn.lanes|=i,Al|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ci=!0),e.memoizedState=i)}function OA(e,t){var i=hn;hn=i!==0&&4>i?i:4,e(!0);var s=ev.transition;ev.transition={};try{e(!1),t()}finally{hn=i,ev.transition=s}}function jC(){return mo().memoizedState}function BA(e,t,i){var s=Ps(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},$C(e))VC(t,i);else if(i=wC(e,t,i,s),i!==null){var c=pi();Oo(i,e,s,c),UC(i,t,s)}}function NA(e,t,i){var s=Ps(e),c={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if($C(e))VC(t,c);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var g=t.lastRenderedState,h=m(g,i);if(c.hasEagerState=!0,c.eagerState=h,jo(h,g)){var C=t.interleaved;C===null?(c.next=c,F_(t)):(c.next=C.next,C.next=c),t.interleaved=c;return}}catch{}finally{}i=wC(e,t,c,s),i!==null&&(c=pi(),Oo(i,e,s,c),UC(i,t,s))}}function $C(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function VC(e,t){Jh=vm=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function UC(e,t,i){if(i&4194240){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,b_(e,i)}}var _m={readContext:po,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},jA={readContext:po,useCallback:function(e,t){return ea().memoizedState=[e,t===void 0?null:t],e},useContext:po,useEffect:tw,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,jp(4194308,4,FC.bind(null,t,e),i)},useLayoutEffect:function(e,t){return jp(4194308,4,e,t)},useInsertionEffect:function(e,t){return jp(4,2,e,t)},useMemo:function(e,t){var i=ea();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=ea();return t=i!==void 0?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=BA.bind(null,Bn,e),[s.memoizedState,e]},useRef:function(e){var t=ea();return e={current:e},t.memoizedState=e},useState:ew,useDebugValue:H_,useDeferredValue:function(e){return ea().memoizedState=e},useTransition:function(){var e=ew(!1),t=e[0];return e=OA.bind(null,e[1]),ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=Bn,c=ea();if(Fn){if(i===void 0)throw Error(tt(407));i=i()}else{if(i=t(),Ar===null)throw Error(tt(349));Ml&30||PC(s,t,i)}c.memoizedState=i;var m={value:i,getSnapshot:t};return c.queue=m,tw(kC.bind(null,s,m,e),[e]),s.flags|=2048,bd(9,IC.bind(null,s,m,i,t),void 0,null),i},useId:function(){var e=ea(),t=Ar.identifierPrefix;if(Fn){var i=za,s=Aa;i=(s&~(1<<32-Do(s)-1)).toString(32)+i,t=":"+t+"R"+i,i=_d++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=DA++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$A={readContext:po,useCallback:OC,useContext:po,useEffect:U_,useImperativeHandle:DC,useInsertionEffect:RC,useLayoutEffect:LC,useMemo:BC,useReducer:tv,useRef:zC,useState:function(){return tv(xd)},useDebugValue:H_,useDeferredValue:function(e){var t=mo();return NC(t,yr.memoizedState,e)},useTransition:function(){var e=tv(xd)[0],t=mo().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:TC,useId:jC,unstable_isNewReconciler:!1},VA={readContext:po,useCallback:OC,useContext:po,useEffect:U_,useImperativeHandle:DC,useInsertionEffect:RC,useLayoutEffect:LC,useMemo:BC,useReducer:nv,useRef:zC,useState:function(){return nv(xd)},useDebugValue:H_,useDeferredValue:function(e){var t=mo();return yr===null?t.memoizedState=e:NC(t,yr.memoizedState,e)},useTransition:function(){var e=nv(xd)[0],t=mo().memoizedState;return[e,t]},useMutableSource:EC,useSyncExternalStore:TC,useId:jC,unstable_isNewReconciler:!1};function Ao(e,t){if(e&&e.defaultProps){t=Nn({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function i0(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:Nn({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Hm={isMounted:function(e){return(e=e._reactInternals)?Bl(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=pi(),c=Ps(e),m=Ra(s,c);m.payload=t,i!=null&&(m.callback=i),t=Es(e,m,c),t!==null&&(Oo(t,e,c,s),Bp(t,e,c))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=pi(),c=Ps(e),m=Ra(s,c);m.tag=1,m.payload=t,i!=null&&(m.callback=i),t=Es(e,m,c),t!==null&&(Oo(t,e,c,s),Bp(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=pi(),s=Ps(e),c=Ra(i,s);c.tag=2,t!=null&&(c.callback=t),t=Es(e,c,s),t!==null&&(Oo(t,e,s,i),Bp(t,e,s))}};function nw(e,t,i,s,c,m,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,m,g):t.prototype&&t.prototype.isPureReactComponent?!fd(i,s)||!fd(c,m):!0}function HC(e,t,i){var s=!1,c=As,m=t.contextType;return typeof m=="object"&&m!==null?m=po(m):(c=Ti(t)?Il:ni.current,s=t.contextTypes,m=(s=s!=null)?Qc(e,c):As),t=new t(i,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hm,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=m),t}function rw(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Hm.enqueueReplaceState(t,t.state,null)}function o0(e,t,i,s){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs={},D_(e);var m=t.contextType;typeof m=="object"&&m!==null?c.context=po(m):(m=Ti(t)?Il:ni.current,c.context=Qc(e,m)),c.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(i0(e,t,m,i),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Hm.enqueueReplaceState(c,c.state,null),gm(e,i,c,s),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ru(e,t){try{var i="",s=t;do i+=gM(s),s=s.return;while(s);var c=i}catch(m){c=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:c,digest:null}}function rv(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function a0(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var UA=typeof WeakMap=="function"?WeakMap:Map;function WC(e,t,i){i=Ra(-1,i),i.tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){bm||(bm=!0,g0=s),a0(e,t)},i}function qC(e,t,i){i=Ra(-1,i),i.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var c=t.value;i.payload=function(){return s(c)},i.callback=function(){a0(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(i.callback=function(){a0(e,t),typeof s!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),i}function iw(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new UA;var c=new Set;s.set(t,c)}else c=s.get(t),c===void 0&&(c=new Set,s.set(t,c));c.has(i)||(c.add(i),e=r3.bind(null,e,t,i),t.then(e,e))}function ow(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function aw(e,t,i,s,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ra(-1,1),t.tag=2,Es(i,t,1))),i.lanes|=1),e)}var HA=ja.ReactCurrentOwner,Ci=!1;function fi(e,t,i,s){t.child=e===null?bC(t,null,i,s):tu(t,e.child,i,s)}function sw(e,t,i,s,c){i=i.render;var m=t.ref;return Kc(t,c),s=$_(e,t,i,s,m,c),i=V_(),e!==null&&!Ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ba(e,t,c)):(Fn&&i&&k_(t),t.flags|=1,fi(e,t,s,c),t.child)}function lw(e,t,i,s,c){if(e===null){var m=i.type;return typeof m=="function"&&!J_(m)&&m.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=m,GC(e,t,m,s,c)):(e=Hp(i.type,null,s,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&c)){var g=m.memoizedProps;if(i=i.compare,i=i!==null?i:fd,i(g,s)&&e.ref===t.ref)return Ba(e,t,c)}return t.flags|=1,e=Is(m,s),e.ref=t.ref,e.return=t,t.child=e}function GC(e,t,i,s,c){if(e!==null){var m=e.memoizedProps;if(fd(m,s)&&e.ref===t.ref)if(Ci=!1,t.pendingProps=s=m,(e.lanes&c)!==0)e.flags&131072&&(Ci=!0);else return t.lanes=e.lanes,Ba(e,t,c)}return s0(e,t,i,s,c)}function ZC(e,t,i){var s=t.pendingProps,c=s.children,m=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn($c,Hi),Hi|=i;else{if(!(i&1073741824))return e=m!==null?m.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn($c,Hi),Hi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=m!==null?m.baseLanes:i,Cn($c,Hi),Hi|=s}else m!==null?(s=m.baseLanes|i,t.memoizedState=null):s=i,Cn($c,Hi),Hi|=s;return fi(e,t,c,i),t.child}function KC(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function s0(e,t,i,s,c){var m=Ti(i)?Il:ni.current;return m=Qc(t,m),Kc(t,c),i=$_(e,t,i,s,m,c),s=V_(),e!==null&&!Ci?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ba(e,t,c)):(Fn&&s&&k_(t),t.flags|=1,fi(e,t,i,c),t.child)}function cw(e,t,i,s,c){if(Ti(i)){var m=!0;hm(t)}else m=!1;if(Kc(t,c),t.stateNode===null)$p(e,t),HC(t,i,s),o0(t,i,s,c),s=!0;else if(e===null){var g=t.stateNode,h=t.memoizedProps;g.props=h;var C=g.context,T=i.contextType;typeof T=="object"&&T!==null?T=po(T):(T=Ti(i)?Il:ni.current,T=Qc(t,T));var k=i.getDerivedStateFromProps,z=typeof k=="function"||typeof g.getSnapshotBeforeUpdate=="function";z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(h!==s||C!==T)&&rw(t,g,s,T),fs=!1;var M=t.memoizedState;g.state=M,gm(t,s,g,c),C=t.memoizedState,h!==s||M!==C||Ei.current||fs?(typeof k=="function"&&(i0(t,i,k,s),C=t.memoizedState),(h=fs||nw(t,i,h,s,M,C,T))?(z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=C),g.props=s,g.state=C,g.context=T,s=h):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{g=t.stateNode,SC(e,t),h=t.memoizedProps,T=t.type===t.elementType?h:Ao(t.type,h),g.props=T,z=t.pendingProps,M=g.context,C=i.contextType,typeof C=="object"&&C!==null?C=po(C):(C=Ti(i)?Il:ni.current,C=Qc(t,C));var Y=i.getDerivedStateFromProps;(k=typeof Y=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(h!==z||M!==C)&&rw(t,g,s,C),fs=!1,M=t.memoizedState,g.state=M,gm(t,s,g,c);var K=t.memoizedState;h!==z||M!==K||Ei.current||fs?(typeof Y=="function"&&(i0(t,i,Y,s),K=t.memoizedState),(T=fs||nw(t,i,T,s,M,K,C)||!1)?(k||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,K,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,K,C)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=K),g.props=s,g.state=K,g.context=C,s=T):(typeof g.componentDidUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),s=!1)}return l0(e,t,i,s,m,c)}function l0(e,t,i,s,c,m){KC(e,t);var g=(t.flags&128)!==0;if(!s&&!g)return c&&Zb(t,i,!1),Ba(e,t,m);s=t.stateNode,HA.current=t;var h=g&&typeof i.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&g?(t.child=tu(t,e.child,null,m),t.child=tu(t,null,h,m)):fi(e,t,h,m),t.memoizedState=s.state,c&&Zb(t,i,!0),t.child}function XC(e){var t=e.stateNode;t.pendingContext?Gb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gb(e,t.context,!1),O_(e,t.containerInfo)}function uw(e,t,i,s,c){return eu(),A_(c),t.flags|=256,fi(e,t,i,s),t.child}var c0={dehydrated:null,treeContext:null,retryLane:0};function u0(e){return{baseLanes:e,cachePool:null,transitions:null}}function YC(e,t,i){var s=t.pendingProps,c=On.current,m=!1,g=(t.flags&128)!==0,h;if((h=g)||(h=e!==null&&e.memoizedState===null?!1:(c&2)!==0),h?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Cn(On,c&1),e===null)return n0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(g=s.children,e=s.fallback,m?(s=t.mode,m=t.child,g={mode:"hidden",children:g},!(s&1)&&m!==null?(m.childLanes=0,m.pendingProps=g):m=Gm(g,s,0,null),e=El(e,s,i,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=u0(i),t.memoizedState=c0,e):W_(t,g));if(c=e.memoizedState,c!==null&&(h=c.dehydrated,h!==null))return WA(e,t,g,s,h,c,i);if(m){m=s.fallback,g=t.mode,c=e.child,h=c.sibling;var C={mode:"hidden",children:s.children};return!(g&1)&&t.child!==c?(s=t.child,s.childLanes=0,s.pendingProps=C,t.deletions=null):(s=Is(c,C),s.subtreeFlags=c.subtreeFlags&14680064),h!==null?m=Is(h,m):(m=El(m,g,i,null),m.flags|=2),m.return=t,s.return=t,s.sibling=m,t.child=s,s=m,m=t.child,g=e.child.memoizedState,g=g===null?u0(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},m.memoizedState=g,m.childLanes=e.childLanes&~i,t.memoizedState=c0,s}return m=e.child,e=m.sibling,s=Is(m,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=i),s.return=t,s.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=s,t.memoizedState=null,s}function W_(e,t){return t=Gm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vp(e,t,i,s){return s!==null&&A_(s),tu(t,e.child,null,i),e=W_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function WA(e,t,i,s,c,m,g){if(i)return t.flags&256?(t.flags&=-257,s=rv(Error(tt(422))),vp(e,t,g,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=s.fallback,c=t.mode,s=Gm({mode:"visible",children:s.children},c,0,null),m=El(m,c,g,null),m.flags|=2,s.return=t,m.return=t,s.sibling=m,t.child=s,t.mode&1&&tu(t,e.child,null,g),t.child.memoizedState=u0(g),t.memoizedState=c0,m);if(!(t.mode&1))return vp(e,t,g,null);if(c.data==="$!"){if(s=c.nextSibling&&c.nextSibling.dataset,s)var h=s.dgst;return s=h,m=Error(tt(419)),s=rv(m,s,void 0),vp(e,t,g,s)}if(h=(g&e.childLanes)!==0,Ci||h){if(s=Ar,s!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(s.suspendedLanes|g)?0:c,c!==0&&c!==m.retryLane&&(m.retryLane=c,Oa(e,c),Oo(s,e,c,-1))}return Y_(),s=rv(Error(tt(421))),vp(e,t,g,s)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=i3.bind(null,e),c._reactRetry=t,null):(e=m.treeContext,Wi=Cs(c.nextSibling),Zi=t,Fn=!0,Fo=null,e!==null&&(co[uo++]=Aa,co[uo++]=za,co[uo++]=kl,Aa=e.id,za=e.overflow,kl=t),t=W_(t,s.children),t.flags|=4096,t)}function hw(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),r0(e.return,t,i)}function iv(e,t,i,s,c){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=i,m.tailMode=c)}function JC(e,t,i){var s=t.pendingProps,c=s.revealOrder,m=s.tail;if(fi(e,t,s.children,i),s=On.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hw(e,i,t);else if(e.tag===19)hw(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cn(On,s),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(i=t.child,c=null;i!==null;)e=i.alternate,e!==null&&ym(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=t.child,t.child=null):(c=i.sibling,i.sibling=null),iv(t,!1,c,i,m);break;case"backwards":for(i=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ym(e)===null){t.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}iv(t,!0,i,null,m);break;case"together":iv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $p(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ba(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Al|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,i=Is(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Is(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function qA(e,t,i){switch(t.tag){case 3:XC(t),eu();break;case 5:CC(t);break;case 1:Ti(t.type)&&hm(t);break;case 4:O_(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,c=t.memoizedProps.value;Cn(pm,s._currentValue),s._currentValue=c;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Cn(On,On.current&1),t.flags|=128,null):i&t.child.childLanes?YC(e,t,i):(Cn(On,On.current&1),e=Ba(e,t,i),e!==null?e.sibling:null);Cn(On,On.current&1);break;case 19:if(s=(i&t.childLanes)!==0,e.flags&128){if(s)return JC(e,t,i);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Cn(On,On.current),s)break;return null;case 22:case 23:return t.lanes=0,ZC(e,t,i)}return Ba(e,t,i)}var QC,h0,eE,tE;QC=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};h0=function(){};eE=function(e,t,i,s){var c=e.memoizedProps;if(c!==s){e=t.stateNode,xl(ia.current);var m=null;switch(i){case"input":c=Rv(e,c),s=Rv(e,s),m=[];break;case"select":c=Nn({},c,{value:void 0}),s=Nn({},s,{value:void 0}),m=[];break;case"textarea":c=Dv(e,c),s=Dv(e,s),m=[];break;default:typeof c.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=cm)}Bv(i,s);var g;i=null;for(T in c)if(!s.hasOwnProperty(T)&&c.hasOwnProperty(T)&&c[T]!=null)if(T==="style"){var h=c[T];for(g in h)h.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(ad.hasOwnProperty(T)?m||(m=[]):(m=m||[]).push(T,null));for(T in s){var C=s[T];if(h=c!=null?c[T]:void 0,s.hasOwnProperty(T)&&C!==h&&(C!=null||h!=null))if(T==="style")if(h){for(g in h)!h.hasOwnProperty(g)||C&&C.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in C)C.hasOwnProperty(g)&&h[g]!==C[g]&&(i||(i={}),i[g]=C[g])}else i||(m||(m=[]),m.push(T,i)),i=C;else T==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,h=h?h.__html:void 0,C!=null&&h!==C&&(m=m||[]).push(T,C)):T==="children"?typeof C!="string"&&typeof C!="number"||(m=m||[]).push(T,""+C):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(ad.hasOwnProperty(T)?(C!=null&&T==="onScroll"&&Tn("scroll",e),m||h===C||(m=[])):(m=m||[]).push(T,C))}i&&(m=m||[]).push("style",i);var T=m;(t.updateQueue=T)&&(t.flags|=4)}};tE=function(e,t,i,s){i!==s&&(t.flags|=4)};function Bh(e,t){if(!Fn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ei(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&14680064,s|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function GA(e,t,i){var s=t.pendingProps;switch(M_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(t),null;case 1:return Ti(t.type)&&um(),ei(t),null;case 3:return s=t.stateNode,nu(),Pn(Ei),Pn(ni),N_(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(gp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fo!==null&&(_0(Fo),Fo=null))),h0(e,t),ei(t),null;case 5:B_(t);var c=xl(vd.current);if(i=t.type,e!==null&&t.stateNode!=null)eE(e,t,i,s,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(tt(166));return ei(t),null}if(e=xl(ia.current),gp(t)){s=t.stateNode,i=t.type;var m=t.memoizedProps;switch(s[ta]=t,s[gd]=m,e=(t.mode&1)!==0,i){case"dialog":Tn("cancel",s),Tn("close",s);break;case"iframe":case"object":case"embed":Tn("load",s);break;case"video":case"audio":for(c=0;c<Wh.length;c++)Tn(Wh[c],s);break;case"source":Tn("error",s);break;case"img":case"image":case"link":Tn("error",s),Tn("load",s);break;case"details":Tn("toggle",s);break;case"input":xb(s,m),Tn("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!m.multiple},Tn("invalid",s);break;case"textarea":wb(s,m),Tn("invalid",s)}Bv(i,m),c=null;for(var g in m)if(m.hasOwnProperty(g)){var h=m[g];g==="children"?typeof h=="string"?s.textContent!==h&&(m.suppressHydrationWarning!==!0&&mp(s.textContent,h,e),c=["children",h]):typeof h=="number"&&s.textContent!==""+h&&(m.suppressHydrationWarning!==!0&&mp(s.textContent,h,e),c=["children",""+h]):ad.hasOwnProperty(g)&&h!=null&&g==="onScroll"&&Tn("scroll",s)}switch(i){case"input":sp(s),bb(s,m,!0);break;case"textarea":sp(s),Sb(s);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(s.onclick=cm)}s=c,t.updateQueue=s,s!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kS(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=g.createElement(i,{is:s.is}):(e=g.createElement(i),i==="select"&&(g=e,s.multiple?g.multiple=!0:s.size&&(g.size=s.size))):e=g.createElementNS(e,i),e[ta]=t,e[gd]=s,QC(e,t,!1,!1),t.stateNode=e;e:{switch(g=Nv(i,s),i){case"dialog":Tn("cancel",e),Tn("close",e),c=s;break;case"iframe":case"object":case"embed":Tn("load",e),c=s;break;case"video":case"audio":for(c=0;c<Wh.length;c++)Tn(Wh[c],e);c=s;break;case"source":Tn("error",e),c=s;break;case"img":case"image":case"link":Tn("error",e),Tn("load",e),c=s;break;case"details":Tn("toggle",e),c=s;break;case"input":xb(e,s),c=Rv(e,s),Tn("invalid",e);break;case"option":c=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},c=Nn({},s,{value:void 0}),Tn("invalid",e);break;case"textarea":wb(e,s),c=Dv(e,s),Tn("invalid",e);break;default:c=s}Bv(i,c),h=c;for(m in h)if(h.hasOwnProperty(m)){var C=h[m];m==="style"?zS(e,C):m==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&MS(e,C)):m==="children"?typeof C=="string"?(i!=="textarea"||C!=="")&&sd(e,C):typeof C=="number"&&sd(e,""+C):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(ad.hasOwnProperty(m)?C!=null&&m==="onScroll"&&Tn("scroll",e):C!=null&&m_(e,m,C,g))}switch(i){case"input":sp(e),bb(e,s,!1);break;case"textarea":sp(e),Sb(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ms(s.value));break;case"select":e.multiple=!!s.multiple,m=s.value,m!=null?Wc(e,!!s.multiple,m,!1):s.defaultValue!=null&&Wc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=cm)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ei(t),null;case 6:if(e&&t.stateNode!=null)tE(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(tt(166));if(i=xl(vd.current),xl(ia.current),gp(t)){if(s=t.stateNode,i=t.memoizedProps,s[ta]=t,(m=s.nodeValue!==i)&&(e=Zi,e!==null))switch(e.tag){case 3:mp(s.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mp(s.nodeValue,i,(e.mode&1)!==0)}m&&(t.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[ta]=t,t.stateNode=s}return ei(t),null;case 13:if(Pn(On),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fn&&Wi!==null&&t.mode&1&&!(t.flags&128))_C(),eu(),t.flags|=98560,m=!1;else if(m=gp(t),s!==null&&s.dehydrated!==null){if(e===null){if(!m)throw Error(tt(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(tt(317));m[ta]=t}else eu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ei(t),m=!1}else Fo!==null&&(_0(Fo),Fo=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||On.current&1?vr===0&&(vr=3):Y_())),t.updateQueue!==null&&(t.flags|=4),ei(t),null);case 4:return nu(),h0(e,t),e===null&&pd(t.stateNode.containerInfo),ei(t),null;case 10:return L_(t.type._context),ei(t),null;case 17:return Ti(t.type)&&um(),ei(t),null;case 19:if(Pn(On),m=t.memoizedState,m===null)return ei(t),null;if(s=(t.flags&128)!==0,g=m.rendering,g===null)if(s)Bh(m,!1);else{if(vr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(g=ym(e),g!==null){for(t.flags|=128,Bh(m,!1),s=g.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;i!==null;)m=i,e=s,m.flags&=14680066,g=m.alternate,g===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=g.childLanes,m.lanes=g.lanes,m.child=g.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=g.memoizedProps,m.memoizedState=g.memoizedState,m.updateQueue=g.updateQueue,m.type=g.type,e=g.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Cn(On,On.current&1|2),t.child}e=e.sibling}m.tail!==null&&or()>iu&&(t.flags|=128,s=!0,Bh(m,!1),t.lanes=4194304)}else{if(!s)if(e=ym(g),e!==null){if(t.flags|=128,s=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Bh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!g.alternate&&!Fn)return ei(t),null}else 2*or()-m.renderingStartTime>iu&&i!==1073741824&&(t.flags|=128,s=!0,Bh(m,!1),t.lanes=4194304);m.isBackwards?(g.sibling=t.child,t.child=g):(i=m.last,i!==null?i.sibling=g:t.child=g,m.last=g)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=or(),t.sibling=null,i=On.current,Cn(On,s?i&1|2:i&1),t):(ei(t),null);case 22:case 23:return X_(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Hi&1073741824&&(ei(t),t.subtreeFlags&6&&(t.flags|=8192)):ei(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function ZA(e,t){switch(M_(t),t.tag){case 1:return Ti(t.type)&&um(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nu(),Pn(Ei),Pn(ni),N_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return B_(t),null;case 13:if(Pn(On),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));eu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pn(On),null;case 4:return nu(),null;case 10:return L_(t.type._context),null;case 22:case 23:return X_(),null;case 24:return null;default:return null}}var _p=!1,ti=!1,KA=typeof WeakSet=="function"?WeakSet:Set,_t=null;function jc(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){Gn(e,t,s)}else i.current=null}function d0(e,t,i){try{i()}catch(s){Gn(e,t,s)}}var dw=!1;function XA(e,t){if(Kv=am,e=aC(),I_(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,m=s.focusNode;s=s.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var g=0,h=-1,C=-1,T=0,k=0,z=e,M=null;t:for(;;){for(var Y;z!==i||c!==0&&z.nodeType!==3||(h=g+c),z!==m||s!==0&&z.nodeType!==3||(C=g+s),z.nodeType===3&&(g+=z.nodeValue.length),(Y=z.firstChild)!==null;)M=z,z=Y;for(;;){if(z===e)break t;if(M===i&&++T===c&&(h=g),M===m&&++k===s&&(C=g),(Y=z.nextSibling)!==null)break;z=M,M=z.parentNode}z=Y}i=h===-1||C===-1?null:{start:h,end:C}}else i=null}i=i||{start:0,end:0}}else i=null;for(Xv={focusedElem:e,selectionRange:i},am=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){t=_t;try{var K=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var Z=K.memoizedProps,Q=K.memoizedState,U=t.stateNode,D=U.getSnapshotBeforeUpdate(t.elementType===t.type?Z:Ao(t.type,Z),Q);U.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(ne){Gn(t,t.return,ne)}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}return K=dw,dw=!1,K}function Qh(e,t,i){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var m=c.destroy;c.destroy=void 0,m!==void 0&&d0(t,i,m)}c=c.next}while(c!==s)}}function Wm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function f0(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function nE(e){var t=e.alternate;t!==null&&(e.alternate=null,nE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ta],delete t[gd],delete t[Qv],delete t[zA],delete t[RA])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rE(e){return e.tag===5||e.tag===3||e.tag===4}function fw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function p0(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=cm));else if(s!==4&&(e=e.child,e!==null))for(p0(e,t,i),e=e.sibling;e!==null;)p0(e,t,i),e=e.sibling}function m0(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(m0(e,t,i),e=e.sibling;e!==null;)m0(e,t,i),e=e.sibling}var Ur=null,zo=!1;function us(e,t,i){for(i=i.child;i!==null;)iE(e,t,i),i=i.sibling}function iE(e,t,i){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(Om,i)}catch{}switch(i.tag){case 5:ti||jc(i,t);case 6:var s=Ur,c=zo;Ur=null,us(e,t,i),Ur=s,zo=c,Ur!==null&&(zo?(e=Ur,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Ur.removeChild(i.stateNode));break;case 18:Ur!==null&&(zo?(e=Ur,i=i.stateNode,e.nodeType===8?Yy(e.parentNode,i):e.nodeType===1&&Yy(e,i),hd(e)):Yy(Ur,i.stateNode));break;case 4:s=Ur,c=zo,Ur=i.stateNode.containerInfo,zo=!0,us(e,t,i),Ur=s,zo=c;break;case 0:case 11:case 14:case 15:if(!ti&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){c=s=s.next;do{var m=c,g=m.destroy;m=m.tag,g!==void 0&&(m&2||m&4)&&d0(i,t,g),c=c.next}while(c!==s)}us(e,t,i);break;case 1:if(!ti&&(jc(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(h){Gn(i,t,h)}us(e,t,i);break;case 21:us(e,t,i);break;case 22:i.mode&1?(ti=(s=ti)||i.memoizedState!==null,us(e,t,i),ti=s):us(e,t,i);break;default:us(e,t,i)}}function pw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new KA),t.forEach(function(s){var c=o3.bind(null,e,s);i.has(s)||(i.add(s),s.then(c,c))})}}function ko(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s];try{var m=e,g=t,h=g;e:for(;h!==null;){switch(h.tag){case 5:Ur=h.stateNode,zo=!1;break e;case 3:Ur=h.stateNode.containerInfo,zo=!0;break e;case 4:Ur=h.stateNode.containerInfo,zo=!0;break e}h=h.return}if(Ur===null)throw Error(tt(160));iE(m,g,c),Ur=null,zo=!1;var C=c.alternate;C!==null&&(C.return=null),c.return=null}catch(T){Gn(c,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oE(t,e),t=t.sibling}function oE(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ko(t,e),Qo(e),s&4){try{Qh(3,e,e.return),Wm(3,e)}catch(Z){Gn(e,e.return,Z)}try{Qh(5,e,e.return)}catch(Z){Gn(e,e.return,Z)}}break;case 1:ko(t,e),Qo(e),s&512&&i!==null&&jc(i,i.return);break;case 5:if(ko(t,e),Qo(e),s&512&&i!==null&&jc(i,i.return),e.flags&32){var c=e.stateNode;try{sd(c,"")}catch(Z){Gn(e,e.return,Z)}}if(s&4&&(c=e.stateNode,c!=null)){var m=e.memoizedProps,g=i!==null?i.memoizedProps:m,h=e.type,C=e.updateQueue;if(e.updateQueue=null,C!==null)try{h==="input"&&m.type==="radio"&&m.name!=null&&PS(c,m),Nv(h,g);var T=Nv(h,m);for(g=0;g<C.length;g+=2){var k=C[g],z=C[g+1];k==="style"?zS(c,z):k==="dangerouslySetInnerHTML"?MS(c,z):k==="children"?sd(c,z):m_(c,k,z,T)}switch(h){case"input":Lv(c,m);break;case"textarea":IS(c,m);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!m.multiple;var Y=m.value;Y!=null?Wc(c,!!m.multiple,Y,!1):M!==!!m.multiple&&(m.defaultValue!=null?Wc(c,!!m.multiple,m.defaultValue,!0):Wc(c,!!m.multiple,m.multiple?[]:"",!1))}c[gd]=m}catch(Z){Gn(e,e.return,Z)}}break;case 6:if(ko(t,e),Qo(e),s&4){if(e.stateNode===null)throw Error(tt(162));c=e.stateNode,m=e.memoizedProps;try{c.nodeValue=m}catch(Z){Gn(e,e.return,Z)}}break;case 3:if(ko(t,e),Qo(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{hd(t.containerInfo)}catch(Z){Gn(e,e.return,Z)}break;case 4:ko(t,e),Qo(e);break;case 13:ko(t,e),Qo(e),c=e.child,c.flags&8192&&(m=c.memoizedState!==null,c.stateNode.isHidden=m,!m||c.alternate!==null&&c.alternate.memoizedState!==null||(Z_=or())),s&4&&pw(e);break;case 22:if(k=i!==null&&i.memoizedState!==null,e.mode&1?(ti=(T=ti)||k,ko(t,e),ti=T):ko(t,e),Qo(e),s&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!k&&e.mode&1)for(_t=e,k=e.child;k!==null;){for(z=_t=k;_t!==null;){switch(M=_t,Y=M.child,M.tag){case 0:case 11:case 14:case 15:Qh(4,M,M.return);break;case 1:jc(M,M.return);var K=M.stateNode;if(typeof K.componentWillUnmount=="function"){s=M,i=M.return;try{t=s,K.props=t.memoizedProps,K.state=t.memoizedState,K.componentWillUnmount()}catch(Z){Gn(s,i,Z)}}break;case 5:jc(M,M.return);break;case 22:if(M.memoizedState!==null){gw(z);continue}}Y!==null?(Y.return=M,_t=Y):gw(z)}k=k.sibling}e:for(k=null,z=e;;){if(z.tag===5){if(k===null){k=z;try{c=z.stateNode,T?(m=c.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(h=z.stateNode,C=z.memoizedProps.style,g=C!=null&&C.hasOwnProperty("display")?C.display:null,h.style.display=AS("display",g))}catch(Z){Gn(e,e.return,Z)}}}else if(z.tag===6){if(k===null)try{z.stateNode.nodeValue=T?"":z.memoizedProps}catch(Z){Gn(e,e.return,Z)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;k===z&&(k=null),z=z.return}k===z&&(k=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:ko(t,e),Qo(e),s&4&&pw(e);break;case 21:break;default:ko(t,e),Qo(e)}}function Qo(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(rE(i)){var s=i;break e}i=i.return}throw Error(tt(160))}switch(s.tag){case 5:var c=s.stateNode;s.flags&32&&(sd(c,""),s.flags&=-33);var m=fw(e);m0(e,m,c);break;case 3:case 4:var g=s.stateNode.containerInfo,h=fw(e);p0(e,h,g);break;default:throw Error(tt(161))}}catch(C){Gn(e,e.return,C)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YA(e,t,i){_t=e,aE(e)}function aE(e,t,i){for(var s=(e.mode&1)!==0;_t!==null;){var c=_t,m=c.child;if(c.tag===22&&s){var g=c.memoizedState!==null||_p;if(!g){var h=c.alternate,C=h!==null&&h.memoizedState!==null||ti;h=_p;var T=ti;if(_p=g,(ti=C)&&!T)for(_t=c;_t!==null;)g=_t,C=g.child,g.tag===22&&g.memoizedState!==null?yw(c):C!==null?(C.return=g,_t=C):yw(c);for(;m!==null;)_t=m,aE(m),m=m.sibling;_t=c,_p=h,ti=T}mw(e)}else c.subtreeFlags&8772&&m!==null?(m.return=c,_t=m):mw(e)}}function mw(e){for(;_t!==null;){var t=_t;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ti||Wm(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ti)if(i===null)s.componentDidMount();else{var c=t.elementType===t.type?i.memoizedProps:Ao(t.type,i.memoizedProps);s.componentDidUpdate(c,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&Qb(t,m,s);break;case 3:var g=t.updateQueue;if(g!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}Qb(t,g,i)}break;case 5:var h=t.stateNode;if(i===null&&t.flags&4){i=h;var C=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&i.focus();break;case"img":C.src&&(i.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var k=T.memoizedState;if(k!==null){var z=k.dehydrated;z!==null&&hd(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ti||t.flags&512&&f0(t)}catch(M){Gn(t,t.return,M)}}if(t===e){_t=null;break}if(i=t.sibling,i!==null){i.return=t.return,_t=i;break}_t=t.return}}function gw(e){for(;_t!==null;){var t=_t;if(t===e){_t=null;break}var i=t.sibling;if(i!==null){i.return=t.return,_t=i;break}_t=t.return}}function yw(e){for(;_t!==null;){var t=_t;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Wm(4,t)}catch(C){Gn(t,i,C)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var c=t.return;try{s.componentDidMount()}catch(C){Gn(t,c,C)}}var m=t.return;try{f0(t)}catch(C){Gn(t,m,C)}break;case 5:var g=t.return;try{f0(t)}catch(C){Gn(t,g,C)}}}catch(C){Gn(t,t.return,C)}if(t===e){_t=null;break}var h=t.sibling;if(h!==null){h.return=t.return,_t=h;break}_t=t.return}}var JA=Math.ceil,xm=ja.ReactCurrentDispatcher,q_=ja.ReactCurrentOwner,fo=ja.ReactCurrentBatchConfig,on=0,Ar=null,fr=null,Hr=0,Hi=0,$c=Ls(0),vr=0,wd=null,Al=0,qm=0,G_=0,ed=null,Si=null,Z_=0,iu=1/0,Pa=null,bm=!1,g0=null,Ts=null,xp=!1,ys=null,wm=0,td=0,y0=null,Vp=-1,Up=0;function pi(){return on&6?or():Vp!==-1?Vp:Vp=or()}function Ps(e){return e.mode&1?on&2&&Hr!==0?Hr&-Hr:FA.transition!==null?(Up===0&&(Up=HS()),Up):(e=hn,e!==0||(e=window.event,e=e===void 0?16:YS(e.type)),e):1}function Oo(e,t,i,s){if(50<td)throw td=0,y0=null,Error(tt(185));Dd(e,i,s),(!(on&2)||e!==Ar)&&(e===Ar&&(!(on&2)&&(qm|=i),vr===4&&ms(e,Hr)),Pi(e,s),i===1&&on===0&&!(t.mode&1)&&(iu=or()+500,Vm&&Fs()))}function Pi(e,t){var i=e.callbackNode;FM(e,t);var s=om(e,e===Ar?Hr:0);if(s===0)i!==null&&Tb(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(i!=null&&Tb(i),t===1)e.tag===0?LA(vw.bind(null,e)):gC(vw.bind(null,e)),MA(function(){!(on&6)&&Fs()}),i=null;else{switch(WS(s)){case 1:i=x_;break;case 4:i=VS;break;case 16:i=im;break;case 536870912:i=US;break;default:i=im}i=pE(i,sE.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function sE(e,t){if(Vp=-1,Up=0,on&6)throw Error(tt(327));var i=e.callbackNode;if(Xc()&&e.callbackNode!==i)return null;var s=om(e,e===Ar?Hr:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Sm(e,s);else{t=s;var c=on;on|=2;var m=cE();(Ar!==e||Hr!==t)&&(Pa=null,iu=or()+500,Cl(e,t));do try{t3();break}catch(h){lE(e,h)}while(!0);R_(),xm.current=m,on=c,fr!==null?t=0:(Ar=null,Hr=0,t=vr)}if(t!==0){if(t===2&&(c=Hv(e),c!==0&&(s=c,t=v0(e,c))),t===1)throw i=wd,Cl(e,0),ms(e,s),Pi(e,or()),i;if(t===6)ms(e,s);else{if(c=e.current.alternate,!(s&30)&&!QA(c)&&(t=Sm(e,s),t===2&&(m=Hv(e),m!==0&&(s=m,t=v0(e,m))),t===1))throw i=wd,Cl(e,0),ms(e,s),Pi(e,or()),i;switch(e.finishedWork=c,e.finishedLanes=s,t){case 0:case 1:throw Error(tt(345));case 2:ml(e,Si,Pa);break;case 3:if(ms(e,s),(s&130023424)===s&&(t=Z_+500-or(),10<t)){if(om(e,0)!==0)break;if(c=e.suspendedLanes,(c&s)!==s){pi(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Jv(ml.bind(null,e,Si,Pa),t);break}ml(e,Si,Pa);break;case 4:if(ms(e,s),(s&4194240)===s)break;for(t=e.eventTimes,c=-1;0<s;){var g=31-Do(s);m=1<<g,g=t[g],g>c&&(c=g),s&=~m}if(s=c,s=or()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*JA(s/1960))-s,10<s){e.timeoutHandle=Jv(ml.bind(null,e,Si,Pa),s);break}ml(e,Si,Pa);break;case 5:ml(e,Si,Pa);break;default:throw Error(tt(329))}}}return Pi(e,or()),e.callbackNode===i?sE.bind(null,e):null}function v0(e,t){var i=ed;return e.current.memoizedState.isDehydrated&&(Cl(e,t).flags|=256),e=Sm(e,t),e!==2&&(t=Si,Si=i,t!==null&&_0(t)),e}function _0(e){Si===null?Si=e:Si.push.apply(Si,e)}function QA(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var c=i[s],m=c.getSnapshot;c=c.value;try{if(!jo(m(),c))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ms(e,t){for(t&=~G_,t&=~qm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Do(t),s=1<<i;e[i]=-1,t&=~s}}function vw(e){if(on&6)throw Error(tt(327));Xc();var t=om(e,0);if(!(t&1))return Pi(e,or()),null;var i=Sm(e,t);if(e.tag!==0&&i===2){var s=Hv(e);s!==0&&(t=s,i=v0(e,s))}if(i===1)throw i=wd,Cl(e,0),ms(e,t),Pi(e,or()),i;if(i===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ml(e,Si,Pa),Pi(e,or()),null}function K_(e,t){var i=on;on|=1;try{return e(t)}finally{on=i,on===0&&(iu=or()+500,Vm&&Fs())}}function zl(e){ys!==null&&ys.tag===0&&!(on&6)&&Xc();var t=on;on|=1;var i=fo.transition,s=hn;try{if(fo.transition=null,hn=1,e)return e()}finally{hn=s,fo.transition=i,on=t,!(on&6)&&Fs()}}function X_(){Hi=$c.current,Pn($c)}function Cl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,kA(i)),fr!==null)for(i=fr.return;i!==null;){var s=i;switch(M_(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&um();break;case 3:nu(),Pn(Ei),Pn(ni),N_();break;case 5:B_(s);break;case 4:nu();break;case 13:Pn(On);break;case 19:Pn(On);break;case 10:L_(s.type._context);break;case 22:case 23:X_()}i=i.return}if(Ar=e,fr=e=Is(e.current,null),Hr=Hi=t,vr=0,wd=null,G_=qm=Al=0,Si=ed=null,_l!==null){for(t=0;t<_l.length;t++)if(i=_l[t],s=i.interleaved,s!==null){i.interleaved=null;var c=s.next,m=i.pending;if(m!==null){var g=m.next;m.next=c,s.next=g}i.pending=s}_l=null}return e}function lE(e,t){do{var i=fr;try{if(R_(),Np.current=_m,vm){for(var s=Bn.memoizedState;s!==null;){var c=s.queue;c!==null&&(c.pending=null),s=s.next}vm=!1}if(Ml=0,Mr=yr=Bn=null,Jh=!1,_d=0,q_.current=null,i===null||i.return===null){vr=1,wd=t,fr=null;break}e:{var m=e,g=i.return,h=i,C=t;if(t=Hr,h.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var T=C,k=h,z=k.tag;if(!(k.mode&1)&&(z===0||z===11||z===15)){var M=k.alternate;M?(k.updateQueue=M.updateQueue,k.memoizedState=M.memoizedState,k.lanes=M.lanes):(k.updateQueue=null,k.memoizedState=null)}var Y=ow(g);if(Y!==null){Y.flags&=-257,aw(Y,g,h,m,t),Y.mode&1&&iw(m,T,t),t=Y,C=T;var K=t.updateQueue;if(K===null){var Z=new Set;Z.add(C),t.updateQueue=Z}else K.add(C);break e}else{if(!(t&1)){iw(m,T,t),Y_();break e}C=Error(tt(426))}}else if(Fn&&h.mode&1){var Q=ow(g);if(Q!==null){!(Q.flags&65536)&&(Q.flags|=256),aw(Q,g,h,m,t),A_(ru(C,h));break e}}m=C=ru(C,h),vr!==4&&(vr=2),ed===null?ed=[m]:ed.push(m),m=g;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var U=WC(m,C,t);Jb(m,U);break e;case 1:h=C;var D=m.type,H=m.stateNode;if(!(m.flags&128)&&(typeof D.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ts===null||!Ts.has(H)))){m.flags|=65536,t&=-t,m.lanes|=t;var ne=qC(m,h,t);Jb(m,ne);break e}}m=m.return}while(m!==null)}hE(i)}catch(he){t=he,fr===i&&i!==null&&(fr=i=i.return);continue}break}while(!0)}function cE(){var e=xm.current;return xm.current=_m,e===null?_m:e}function Y_(){(vr===0||vr===3||vr===2)&&(vr=4),Ar===null||!(Al&268435455)&&!(qm&268435455)||ms(Ar,Hr)}function Sm(e,t){var i=on;on|=2;var s=cE();(Ar!==e||Hr!==t)&&(Pa=null,Cl(e,t));do try{e3();break}catch(c){lE(e,c)}while(!0);if(R_(),on=i,xm.current=s,fr!==null)throw Error(tt(261));return Ar=null,Hr=0,vr}function e3(){for(;fr!==null;)uE(fr)}function t3(){for(;fr!==null&&!TM();)uE(fr)}function uE(e){var t=fE(e.alternate,e,Hi);e.memoizedProps=e.pendingProps,t===null?hE(e):fr=t,q_.current=null}function hE(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=ZA(i,t),i!==null){i.flags&=32767,fr=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vr=6,fr=null;return}}else if(i=GA(i,t,Hi),i!==null){fr=i;return}if(t=t.sibling,t!==null){fr=t;return}fr=t=e}while(t!==null);vr===0&&(vr=5)}function ml(e,t,i){var s=hn,c=fo.transition;try{fo.transition=null,hn=1,n3(e,t,i,s)}finally{fo.transition=c,hn=s}return null}function n3(e,t,i,s){do Xc();while(ys!==null);if(on&6)throw Error(tt(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var m=i.lanes|i.childLanes;if(DM(e,m),e===Ar&&(fr=Ar=null,Hr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||xp||(xp=!0,pE(im,function(){return Xc(),null})),m=(i.flags&15990)!==0,i.subtreeFlags&15990||m){m=fo.transition,fo.transition=null;var g=hn;hn=1;var h=on;on|=4,q_.current=null,XA(e,i),oE(i,e),wA(Xv),am=!!Kv,Xv=Kv=null,e.current=i,YA(i),PM(),on=h,hn=g,fo.transition=m}else e.current=i;if(xp&&(xp=!1,ys=e,wm=c),m=e.pendingLanes,m===0&&(Ts=null),MM(i.stateNode),Pi(e,or()),t!==null)for(s=e.onRecoverableError,i=0;i<t.length;i++)c=t[i],s(c.value,{componentStack:c.stack,digest:c.digest});if(bm)throw bm=!1,e=g0,g0=null,e;return wm&1&&e.tag!==0&&Xc(),m=e.pendingLanes,m&1?e===y0?td++:(td=0,y0=e):td=0,Fs(),null}function Xc(){if(ys!==null){var e=WS(wm),t=fo.transition,i=hn;try{if(fo.transition=null,hn=16>e?16:e,ys===null)var s=!1;else{if(e=ys,ys=null,wm=0,on&6)throw Error(tt(331));var c=on;for(on|=4,_t=e.current;_t!==null;){var m=_t,g=m.child;if(_t.flags&16){var h=m.deletions;if(h!==null){for(var C=0;C<h.length;C++){var T=h[C];for(_t=T;_t!==null;){var k=_t;switch(k.tag){case 0:case 11:case 15:Qh(8,k,m)}var z=k.child;if(z!==null)z.return=k,_t=z;else for(;_t!==null;){k=_t;var M=k.sibling,Y=k.return;if(nE(k),k===T){_t=null;break}if(M!==null){M.return=Y,_t=M;break}_t=Y}}}var K=m.alternate;if(K!==null){var Z=K.child;if(Z!==null){K.child=null;do{var Q=Z.sibling;Z.sibling=null,Z=Q}while(Z!==null)}}_t=m}}if(m.subtreeFlags&2064&&g!==null)g.return=m,_t=g;else e:for(;_t!==null;){if(m=_t,m.flags&2048)switch(m.tag){case 0:case 11:case 15:Qh(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,_t=U;break e}_t=m.return}}var D=e.current;for(_t=D;_t!==null;){g=_t;var H=g.child;if(g.subtreeFlags&2064&&H!==null)H.return=g,_t=H;else e:for(g=D;_t!==null;){if(h=_t,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Wm(9,h)}}catch(he){Gn(h,h.return,he)}if(h===g){_t=null;break e}var ne=h.sibling;if(ne!==null){ne.return=h.return,_t=ne;break e}_t=h.return}}if(on=c,Fs(),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(Om,e)}catch{}s=!0}return s}finally{hn=i,fo.transition=t}}return!1}function _w(e,t,i){t=ru(i,t),t=WC(e,t,1),e=Es(e,t,1),t=pi(),e!==null&&(Dd(e,1,t),Pi(e,t))}function Gn(e,t,i){if(e.tag===3)_w(e,e,i);else for(;t!==null;){if(t.tag===3){_w(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ts===null||!Ts.has(s))){e=ru(i,e),e=qC(t,e,1),t=Es(t,e,1),e=pi(),t!==null&&(Dd(t,1,e),Pi(t,e));break}}t=t.return}}function r3(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),t=pi(),e.pingedLanes|=e.suspendedLanes&i,Ar===e&&(Hr&i)===i&&(vr===4||vr===3&&(Hr&130023424)===Hr&&500>or()-Z_?Cl(e,0):G_|=i),Pi(e,t)}function dE(e,t){t===0&&(e.mode&1?(t=up,up<<=1,!(up&130023424)&&(up=4194304)):t=1);var i=pi();e=Oa(e,t),e!==null&&(Dd(e,t,i),Pi(e,i))}function i3(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),dE(e,i)}function o3(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(tt(314))}s!==null&&s.delete(t),dE(e,i)}var fE;fE=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ei.current)Ci=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return Ci=!1,qA(e,t,i);Ci=!!(e.flags&131072)}else Ci=!1,Fn&&t.flags&1048576&&yC(t,fm,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;$p(e,t),e=t.pendingProps;var c=Qc(t,ni.current);Kc(t,i),c=$_(null,t,s,e,c,i);var m=V_();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ti(s)?(m=!0,hm(t)):m=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,D_(t),c.updater=Hm,t.stateNode=c,c._reactInternals=t,o0(t,s,e,i),t=l0(null,t,s,!0,m,i)):(t.tag=0,Fn&&m&&k_(t),fi(null,t,c,i),t=t.child),t;case 16:s=t.elementType;e:{switch($p(e,t),e=t.pendingProps,c=s._init,s=c(s._payload),t.type=s,c=t.tag=s3(s),e=Ao(s,e),c){case 0:t=s0(null,t,s,e,i);break e;case 1:t=cw(null,t,s,e,i);break e;case 11:t=sw(null,t,s,e,i);break e;case 14:t=lw(null,t,s,Ao(s.type,e),i);break e}throw Error(tt(306,s,""))}return t;case 0:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:Ao(s,c),s0(e,t,s,c,i);case 1:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:Ao(s,c),cw(e,t,s,c,i);case 3:e:{if(XC(t),e===null)throw Error(tt(387));s=t.pendingProps,m=t.memoizedState,c=m.element,SC(e,t),gm(t,s,null,i);var g=t.memoizedState;if(s=g.element,m.isDehydrated)if(m={element:s,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){c=ru(Error(tt(423)),t),t=uw(e,t,s,i,c);break e}else if(s!==c){c=ru(Error(tt(424)),t),t=uw(e,t,s,i,c);break e}else for(Wi=Cs(t.stateNode.containerInfo.firstChild),Zi=t,Fn=!0,Fo=null,i=bC(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(eu(),s===c){t=Ba(e,t,i);break e}fi(e,t,s,i)}t=t.child}return t;case 5:return CC(t),e===null&&n0(t),s=t.type,c=t.pendingProps,m=e!==null?e.memoizedProps:null,g=c.children,Yv(s,c)?g=null:m!==null&&Yv(s,m)&&(t.flags|=32),KC(e,t),fi(e,t,g,i),t.child;case 6:return e===null&&n0(t),null;case 13:return YC(e,t,i);case 4:return O_(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=tu(t,null,s,i):fi(e,t,s,i),t.child;case 11:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:Ao(s,c),sw(e,t,s,c,i);case 7:return fi(e,t,t.pendingProps,i),t.child;case 8:return fi(e,t,t.pendingProps.children,i),t.child;case 12:return fi(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,c=t.pendingProps,m=t.memoizedProps,g=c.value,Cn(pm,s._currentValue),s._currentValue=g,m!==null)if(jo(m.value,g)){if(m.children===c.children&&!Ei.current){t=Ba(e,t,i);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var h=m.dependencies;if(h!==null){g=m.child;for(var C=h.firstContext;C!==null;){if(C.context===s){if(m.tag===1){C=Ra(-1,i&-i),C.tag=2;var T=m.updateQueue;if(T!==null){T=T.shared;var k=T.pending;k===null?C.next=C:(C.next=k.next,k.next=C),T.pending=C}}m.lanes|=i,C=m.alternate,C!==null&&(C.lanes|=i),r0(m.return,i,t),h.lanes|=i;break}C=C.next}}else if(m.tag===10)g=m.type===t.type?null:m.child;else if(m.tag===18){if(g=m.return,g===null)throw Error(tt(341));g.lanes|=i,h=g.alternate,h!==null&&(h.lanes|=i),r0(g,i,t),g=m.sibling}else g=m.child;if(g!==null)g.return=m;else for(g=m;g!==null;){if(g===t){g=null;break}if(m=g.sibling,m!==null){m.return=g.return,g=m;break}g=g.return}m=g}fi(e,t,c.children,i),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps.children,Kc(t,i),c=po(c),s=s(c),t.flags|=1,fi(e,t,s,i),t.child;case 14:return s=t.type,c=Ao(s,t.pendingProps),c=Ao(s.type,c),lw(e,t,s,c,i);case 15:return GC(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,c=t.pendingProps,c=t.elementType===s?c:Ao(s,c),$p(e,t),t.tag=1,Ti(s)?(e=!0,hm(t)):e=!1,Kc(t,i),HC(t,s,c),o0(t,s,c,i),l0(null,t,s,!0,e,i);case 19:return JC(e,t,i);case 22:return ZC(e,t,i)}throw Error(tt(156,t.tag))};function pE(e,t){return $S(e,t)}function a3(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(e,t,i,s){return new a3(e,t,i,s)}function J_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function s3(e){if(typeof e=="function")return J_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===y_)return 11;if(e===v_)return 14}return 2}function Is(e,t){var i=e.alternate;return i===null?(i=ho(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Hp(e,t,i,s,c,m){var g=2;if(s=e,typeof e=="function")J_(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Ac:return El(i.children,c,m,t);case g_:g=8,c|=8;break;case kv:return e=ho(12,i,t,c|2),e.elementType=kv,e.lanes=m,e;case Mv:return e=ho(13,i,t,c),e.elementType=Mv,e.lanes=m,e;case Av:return e=ho(19,i,t,c),e.elementType=Av,e.lanes=m,e;case CS:return Gm(i,c,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wS:g=10;break e;case SS:g=9;break e;case y_:g=11;break e;case v_:g=14;break e;case ds:g=16,s=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=ho(g,i,t,c),t.elementType=e,t.type=s,t.lanes=m,t}function El(e,t,i,s){return e=ho(7,e,s,t),e.lanes=i,e}function Gm(e,t,i,s){return e=ho(22,e,s,t),e.elementType=CS,e.lanes=i,e.stateNode={isHidden:!1},e}function ov(e,t,i){return e=ho(6,e,null,t),e.lanes=i,e}function av(e,t,i){return t=ho(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l3(e,t,i,s,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jy(0),this.expirationTimes=jy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jy(0),this.identifierPrefix=s,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Q_(e,t,i,s,c,m,g,h,C){return e=new l3(e,t,i,h,C),t===1?(t=1,m===!0&&(t|=8)):t=0,m=ho(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},D_(m),e}function c3(e,t,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:i}}function mE(e){if(!e)return As;e=e._reactInternals;e:{if(Bl(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ti(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var i=e.type;if(Ti(i))return mC(e,i,t)}return t}function gE(e,t,i,s,c,m,g,h,C){return e=Q_(i,s,!0,e,c,m,g,h,C),e.context=mE(null),i=e.current,s=pi(),c=Ps(i),m=Ra(s,c),m.callback=t??null,Es(i,m,c),e.current.lanes=c,Dd(e,c,s),Pi(e,s),e}function Zm(e,t,i,s){var c=t.current,m=pi(),g=Ps(c);return i=mE(i),t.context===null?t.context=i:t.pendingContext=i,t=Ra(m,g),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Es(c,t,g),e!==null&&(Oo(e,c,g,m),Bp(e,c,g)),g}function Cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function e1(e,t){xw(e,t),(e=e.alternate)&&xw(e,t)}function u3(){return null}var yE=typeof reportError=="function"?reportError:function(e){console.error(e)};function t1(e){this._internalRoot=e}Km.prototype.render=t1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));Zm(e,t,null,null)};Km.prototype.unmount=t1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zl(function(){Zm(null,e,null,null)}),t[Da]=null}};function Km(e){this._internalRoot=e}Km.prototype.unstable_scheduleHydration=function(e){if(e){var t=ZS();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ps.length&&t!==0&&t<ps[i].priority;i++);ps.splice(i,0,e),i===0&&XS(e)}};function n1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bw(){}function h3(e,t,i,s,c){if(c){if(typeof s=="function"){var m=s;s=function(){var T=Cm(g);m.call(T)}}var g=gE(t,s,e,0,null,!1,!1,"",bw);return e._reactRootContainer=g,e[Da]=g.current,pd(e.nodeType===8?e.parentNode:e),zl(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof s=="function"){var h=s;s=function(){var T=Cm(C);h.call(T)}}var C=Q_(e,0,!1,null,null,!1,!1,"",bw);return e._reactRootContainer=C,e[Da]=C.current,pd(e.nodeType===8?e.parentNode:e),zl(function(){Zm(t,C,i,s)}),C}function Ym(e,t,i,s,c){var m=i._reactRootContainer;if(m){var g=m;if(typeof c=="function"){var h=c;c=function(){var C=Cm(g);h.call(C)}}Zm(t,g,e,c)}else g=h3(i,t,e,c,s);return Cm(g)}qS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Hh(t.pendingLanes);i!==0&&(b_(t,i|1),Pi(t,or()),!(on&6)&&(iu=or()+500,Fs()))}break;case 13:zl(function(){var s=Oa(e,1);if(s!==null){var c=pi();Oo(s,e,1,c)}}),e1(e,1)}};w_=function(e){if(e.tag===13){var t=Oa(e,134217728);if(t!==null){var i=pi();Oo(t,e,134217728,i)}e1(e,134217728)}};GS=function(e){if(e.tag===13){var t=Ps(e),i=Oa(e,t);if(i!==null){var s=pi();Oo(i,e,t,s)}e1(e,t)}};ZS=function(){return hn};KS=function(e,t){var i=hn;try{return hn=e,t()}finally{hn=i}};$v=function(e,t,i){switch(t){case"input":if(Lv(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var c=$m(s);if(!c)throw Error(tt(90));TS(s),Lv(s,c)}}}break;case"textarea":IS(e,i);break;case"select":t=i.value,t!=null&&Wc(e,!!i.multiple,t,!1)}};FS=K_;DS=zl;var d3={usingClientEntryPoint:!1,Events:[Bd,Fc,$m,RS,LS,K_]},Nh={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},f3={bundleType:Nh.bundleType,version:Nh.version,rendererPackageName:Nh.rendererPackageName,rendererConfig:Nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ja.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=NS(e),e===null?null:e.stateNode},findFiberByHostInstance:Nh.findFiberByHostInstance||u3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{Om=bp.inject(f3),ra=bp}catch{}}Yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d3;Yi.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n1(t))throw Error(tt(200));return c3(e,t,null,i)};Yi.createRoot=function(e,t){if(!n1(e))throw Error(tt(299));var i=!1,s="",c=yE;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Q_(e,1,!1,null,null,i,!1,s,c),e[Da]=t.current,pd(e.nodeType===8?e.parentNode:e),new t1(t)};Yi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=NS(t),e=e===null?null:e.stateNode,e};Yi.flushSync=function(e){return zl(e)};Yi.hydrate=function(e,t,i){if(!Xm(t))throw Error(tt(200));return Ym(null,e,t,!0,i)};Yi.hydrateRoot=function(e,t,i){if(!n1(e))throw Error(tt(405));var s=i!=null&&i.hydratedSources||null,c=!1,m="",g=yE;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),t=gE(t,null,e,1,i??null,c,!1,m,g),e[Da]=t.current,pd(e),s)for(e=0;e<s.length;e++)i=s[e],c=i._getVersion,c=c(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,c]:t.mutableSourceEagerHydrationData.push(i,c);return new Km(t)};Yi.render=function(e,t,i){if(!Xm(t))throw Error(tt(200));return Ym(null,e,t,!1,i)};Yi.unmountComponentAtNode=function(e){if(!Xm(e))throw Error(tt(40));return e._reactRootContainer?(zl(function(){Ym(null,null,e,!1,function(){e._reactRootContainer=null,e[Da]=null})}),!0):!1};Yi.unstable_batchedUpdates=K_;Yi.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!Xm(i))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return Ym(e,t,i,!1,s)};Yi.version="18.3.1-next-f1338f8080-20240426";function vE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vE)}catch(e){console.error(e)}}vE(),vS.exports=Yi;var pu=vS.exports;const x0=Rd(pu),p3=aS({__proto__:null,default:x0},[pu]);var ww=pu;Pv.createRoot=ww.createRoot,Pv.hydrateRoot=ww.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Sd.apply(this,arguments)}var vs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vs||(vs={}));const Sw="popstate";function m3(e){e===void 0&&(e={});function t(c,m){let{pathname:g="/",search:h="",hash:C=""}=Nl(c.location.hash.substr(1));return!g.startsWith("/")&&!g.startsWith(".")&&(g="/"+g),b0("",{pathname:g,search:h,hash:C},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(c,m){let g=c.document.querySelector("base"),h="";if(g&&g.getAttribute("href")){let C=c.location.href,T=C.indexOf("#");h=T===-1?C:C.slice(0,T)}return h+"#"+(typeof m=="string"?m:Em(m))}function s(c,m){r1(c.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(m)+")")}return y3(t,i,s,e)}function Zn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function r1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function g3(){return Math.random().toString(36).substr(2,8)}function Cw(e,t){return{usr:e.state,key:e.key,idx:t}}function b0(e,t,i,s){return i===void 0&&(i=null),Sd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nl(t):t,{state:i,key:t&&t.key||s||g3()})}function Em(e){let{pathname:t="/",search:i="",hash:s=""}=e;return i&&i!=="?"&&(t+=i.charAt(0)==="?"?i:"?"+i),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Nl(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substr(i),e=e.substr(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function y3(e,t,i,s){s===void 0&&(s={});let{window:c=document.defaultView,v5Compat:m=!1}=s,g=c.history,h=vs.Pop,C=null,T=k();T==null&&(T=0,g.replaceState(Sd({},g.state,{idx:T}),""));function k(){return(g.state||{idx:null}).idx}function z(){h=vs.Pop;let Q=k(),U=Q==null?null:Q-T;T=Q,C&&C({action:h,location:Z.location,delta:U})}function M(Q,U){h=vs.Push;let D=b0(Z.location,Q,U);i&&i(D,Q),T=k()+1;let H=Cw(D,T),ne=Z.createHref(D);try{g.pushState(H,"",ne)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;c.location.assign(ne)}m&&C&&C({action:h,location:Z.location,delta:1})}function Y(Q,U){h=vs.Replace;let D=b0(Z.location,Q,U);i&&i(D,Q),T=k();let H=Cw(D,T),ne=Z.createHref(D);g.replaceState(H,"",ne),m&&C&&C({action:h,location:Z.location,delta:0})}function K(Q){let U=c.location.origin!=="null"?c.location.origin:c.location.href,D=typeof Q=="string"?Q:Em(Q);return D=D.replace(/ $/,"%20"),Zn(U,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,U)}let Z={get action(){return h},get location(){return e(c,g)},listen(Q){if(C)throw new Error("A history only accepts one active listener");return c.addEventListener(Sw,z),C=Q,()=>{c.removeEventListener(Sw,z),C=null}},createHref(Q){return t(c,Q)},createURL:K,encodeLocation(Q){let U=K(Q);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:M,replace:Y,go(Q){return g.go(Q)}};return Z}var Ew;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ew||(Ew={}));function v3(e,t,i){i===void 0&&(i="/");let s=typeof t=="string"?Nl(t):t,c=ou(s.pathname||"/",i);if(c==null)return null;let m=_E(e);_3(m);let g=null;for(let h=0;g==null&&h<m.length;++h){let C=M3(c);g=I3(m[h],C)}return g}function _E(e,t,i,s){t===void 0&&(t=[]),i===void 0&&(i=[]),s===void 0&&(s="");let c=(m,g,h)=>{let C={relativePath:h===void 0?m.path||"":h,caseSensitive:m.caseSensitive===!0,childrenIndex:g,route:m};C.relativePath.startsWith("/")&&(Zn(C.relativePath.startsWith(s),'Absolute route path "'+C.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),C.relativePath=C.relativePath.slice(s.length));let T=ks([s,C.relativePath]),k=i.concat(C);m.children&&m.children.length>0&&(Zn(m.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),_E(m.children,t,k,T)),!(m.path==null&&!m.index)&&t.push({path:T,score:T3(T,m.index),routesMeta:k})};return e.forEach((m,g)=>{var h;if(m.path===""||!((h=m.path)!=null&&h.includes("?")))c(m,g);else for(let C of xE(m.path))c(m,g,C)}),t}function xE(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,c=i.endsWith("?"),m=i.replace(/\?$/,"");if(s.length===0)return c?[m,""]:[m];let g=xE(s.join("/")),h=[];return h.push(...g.map(C=>C===""?m:[m,C].join("/"))),c&&h.push(...g),h.map(C=>e.startsWith("/")&&C===""?"/":C)}function _3(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:P3(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}const x3=/^:[\w-]+$/,b3=3,w3=2,S3=1,C3=10,E3=-2,Tw=e=>e==="*";function T3(e,t){let i=e.split("/"),s=i.length;return i.some(Tw)&&(s+=E3),t&&(s+=w3),i.filter(c=>!Tw(c)).reduce((c,m)=>c+(x3.test(m)?b3:m===""?S3:C3),s)}function P3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,c)=>s===t[c])?e[e.length-1]-t[t.length-1]:0}function I3(e,t){let{routesMeta:i}=e,s={},c="/",m=[];for(let g=0;g<i.length;++g){let h=i[g],C=g===i.length-1,T=c==="/"?t:t.slice(c.length)||"/",k=w0({path:h.relativePath,caseSensitive:h.caseSensitive,end:C},T);if(!k)return null;Object.assign(s,k.params);let z=h.route;m.push({params:s,pathname:ks([c,k.pathname]),pathnameBase:L3(ks([c,k.pathnameBase])),route:z}),k.pathnameBase!=="/"&&(c=ks([c,k.pathnameBase]))}return m}function w0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=k3(e.path,e.caseSensitive,e.end),c=t.match(i);if(!c)return null;let m=c[0],g=m.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:s.reduce((T,k,z)=>{let{paramName:M,isOptional:Y}=k;if(M==="*"){let Z=h[z]||"";g=m.slice(0,m.length-Z.length).replace(/(.)\/+$/,"$1")}const K=h[z];return Y&&!K?T[M]=void 0:T[M]=(K||"").replace(/%2F/g,"/"),T},{}),pathname:m,pathnameBase:g,pattern:e}}function k3(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!0),r1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,h,C)=>(s.push({paramName:h,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),s]}function M3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return r1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ou(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function A3(e,t){t===void 0&&(t="/");let{pathname:i,search:s="",hash:c=""}=typeof e=="string"?Nl(e):e;return{pathname:i?i.startsWith("/")?i:z3(i,t):t,search:F3(s),hash:D3(c)}}function z3(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function sv(e,t,i,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function R3(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function bE(e,t){let i=R3(e);return t?i.map((s,c)=>c===e.length-1?s.pathname:s.pathnameBase):i.map(s=>s.pathnameBase)}function wE(e,t,i,s){s===void 0&&(s=!1);let c;typeof e=="string"?c=Nl(e):(c=Sd({},e),Zn(!c.pathname||!c.pathname.includes("?"),sv("?","pathname","search",c)),Zn(!c.pathname||!c.pathname.includes("#"),sv("#","pathname","hash",c)),Zn(!c.search||!c.search.includes("#"),sv("#","search","hash",c)));let m=e===""||c.pathname==="",g=m?"/":c.pathname,h;if(g==null)h=i;else{let z=t.length-1;if(!s&&g.startsWith("..")){let M=g.split("/");for(;M[0]==="..";)M.shift(),z-=1;c.pathname=M.join("/")}h=z>=0?t[z]:"/"}let C=A3(c,h),T=g&&g!=="/"&&g.endsWith("/"),k=(m||g===".")&&i.endsWith("/");return!C.pathname.endsWith("/")&&(T||k)&&(C.pathname+="/"),C}const ks=e=>e.join("/").replace(/\/\/+/g,"/"),L3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,D3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function O3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const SE=["post","put","patch","delete"];new Set(SE);const B3=["get",...SE];new Set(B3);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cd(){return Cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Cd.apply(this,arguments)}const Jm=N.createContext(null),CE=N.createContext(null),Ds=N.createContext(null),Qm=N.createContext(null),jl=N.createContext({outlet:null,matches:[],isDataRoute:!1}),EE=N.createContext(null);function N3(e,t){let{relative:i}=t===void 0?{}:t;jd()||Zn(!1);let{basename:s,navigator:c}=N.useContext(Ds),{hash:m,pathname:g,search:h}=eg(e,{relative:i}),C=g;return s!=="/"&&(C=g==="/"?s:ks([s,g])),c.createHref({pathname:C,search:h,hash:m})}function jd(){return N.useContext(Qm)!=null}function $d(){return jd()||Zn(!1),N.useContext(Qm).location}function TE(e){N.useContext(Ds).static||N.useLayoutEffect(e)}function j3(){let{isDataRoute:e}=N.useContext(jl);return e?Q3():$3()}function $3(){jd()||Zn(!1);let e=N.useContext(Jm),{basename:t,future:i,navigator:s}=N.useContext(Ds),{matches:c}=N.useContext(jl),{pathname:m}=$d(),g=JSON.stringify(bE(c,i.v7_relativeSplatPath)),h=N.useRef(!1);return TE(()=>{h.current=!0}),N.useCallback(function(T,k){if(k===void 0&&(k={}),!h.current)return;if(typeof T=="number"){s.go(T);return}let z=wE(T,JSON.parse(g),m,k.relative==="path");e==null&&t!=="/"&&(z.pathname=z.pathname==="/"?t:ks([t,z.pathname])),(k.replace?s.replace:s.push)(z,k.state,k)},[t,s,g,m,e])}function eg(e,t){let{relative:i}=t===void 0?{}:t,{future:s}=N.useContext(Ds),{matches:c}=N.useContext(jl),{pathname:m}=$d(),g=JSON.stringify(bE(c,s.v7_relativeSplatPath));return N.useMemo(()=>wE(e,JSON.parse(g),m,i==="path"),[e,g,m,i])}function V3(e,t){return U3(e,t)}function U3(e,t,i,s){jd()||Zn(!1);let{navigator:c}=N.useContext(Ds),{matches:m}=N.useContext(jl),g=m[m.length-1],h=g?g.params:{};g&&g.pathname;let C=g?g.pathnameBase:"/";g&&g.route;let T=$d(),k;if(t){var z;let Q=typeof t=="string"?Nl(t):t;C==="/"||(z=Q.pathname)!=null&&z.startsWith(C)||Zn(!1),k=Q}else k=T;let M=k.pathname||"/",Y=M;if(C!=="/"){let Q=C.replace(/^\//,"").split("/");Y="/"+M.replace(/^\//,"").split("/").slice(Q.length).join("/")}let K=v3(e,{pathname:Y}),Z=Z3(K&&K.map(Q=>Object.assign({},Q,{params:Object.assign({},h,Q.params),pathname:ks([C,c.encodeLocation?c.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?C:ks([C,c.encodeLocation?c.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),m,i,s);return t&&Z?N.createElement(Qm.Provider,{value:{location:Cd({pathname:"/",search:"",hash:"",state:null,key:"default"},k),navigationType:vs.Pop}},Z):Z}function H3(){let e=J3(),t=O3(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),i?N.createElement("pre",{style:c},i):null,null)}const W3=N.createElement(H3,null);class q3 extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,i){return i.location!==t.location||i.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:i.error,location:i.location,revalidation:t.revalidation||i.revalidation}}componentDidCatch(t,i){console.error("React Router caught the following error during render",t,i)}render(){return this.state.error!==void 0?N.createElement(jl.Provider,{value:this.props.routeContext},N.createElement(EE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function G3(e){let{routeContext:t,match:i,children:s}=e,c=N.useContext(Jm);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(jl.Provider,{value:t},s)}function Z3(e,t,i,s){var c;if(t===void 0&&(t=[]),i===void 0&&(i=null),s===void 0&&(s=null),e==null){var m;if((m=i)!=null&&m.errors)e=i.matches;else return null}let g=e,h=(c=i)==null?void 0:c.errors;if(h!=null){let k=g.findIndex(z=>z.route.id&&(h==null?void 0:h[z.route.id])!==void 0);k>=0||Zn(!1),g=g.slice(0,Math.min(g.length,k+1))}let C=!1,T=-1;if(i&&s&&s.v7_partialHydration)for(let k=0;k<g.length;k++){let z=g[k];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(T=k),z.route.id){let{loaderData:M,errors:Y}=i,K=z.route.loader&&M[z.route.id]===void 0&&(!Y||Y[z.route.id]===void 0);if(z.route.lazy||K){C=!0,T>=0?g=g.slice(0,T+1):g=[g[0]];break}}}return g.reduceRight((k,z,M)=>{let Y,K=!1,Z=null,Q=null;i&&(Y=h&&z.route.id?h[z.route.id]:void 0,Z=z.route.errorElement||W3,C&&(T<0&&M===0?(K=!0,Q=null):T===M&&(K=!0,Q=z.route.hydrateFallbackElement||null)));let U=t.concat(g.slice(0,M+1)),D=()=>{let H;return Y?H=Z:K?H=Q:z.route.Component?H=N.createElement(z.route.Component,null):z.route.element?H=z.route.element:H=k,N.createElement(G3,{match:z,routeContext:{outlet:k,matches:U,isDataRoute:i!=null},children:H})};return i&&(z.route.ErrorBoundary||z.route.errorElement||M===0)?N.createElement(q3,{location:i.location,revalidation:i.revalidation,component:Z,error:Y,children:D(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):D()},null)}var PE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(PE||{}),Tm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tm||{});function K3(e){let t=N.useContext(Jm);return t||Zn(!1),t}function X3(e){let t=N.useContext(CE);return t||Zn(!1),t}function Y3(e){let t=N.useContext(jl);return t||Zn(!1),t}function IE(e){let t=Y3(),i=t.matches[t.matches.length-1];return i.route.id||Zn(!1),i.route.id}function J3(){var e;let t=N.useContext(EE),i=X3(Tm.UseRouteError),s=IE(Tm.UseRouteError);return t!==void 0?t:(e=i.errors)==null?void 0:e[s]}function Q3(){let{router:e}=K3(PE.UseNavigateStable),t=IE(Tm.UseNavigateStable),i=N.useRef(!1);return TE(()=>{i.current=!0}),N.useCallback(function(c,m){m===void 0&&(m={}),i.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Cd({fromRouteId:t},m)))},[e,t])}function S0(e){Zn(!1)}function e4(e){let{basename:t="/",children:i=null,location:s,navigationType:c=vs.Pop,navigator:m,static:g=!1,future:h}=e;jd()&&Zn(!1);let C=t.replace(/^\/*/,"/"),T=N.useMemo(()=>({basename:C,navigator:m,static:g,future:Cd({v7_relativeSplatPath:!1},h)}),[C,h,m,g]);typeof s=="string"&&(s=Nl(s));let{pathname:k="/",search:z="",hash:M="",state:Y=null,key:K="default"}=s,Z=N.useMemo(()=>{let Q=ou(k,C);return Q==null?null:{location:{pathname:Q,search:z,hash:M,state:Y,key:K},navigationType:c}},[C,k,z,M,Y,K,c]);return Z==null?null:N.createElement(Ds.Provider,{value:T},N.createElement(Qm.Provider,{children:i,value:Z}))}function t4(e){let{children:t,location:i}=e;return V3(C0(t),i)}new Promise(()=>{});function C0(e,t){t===void 0&&(t=[]);let i=[];return N.Children.forEach(e,(s,c)=>{if(!N.isValidElement(s))return;let m=[...t,c];if(s.type===N.Fragment){i.push.apply(i,C0(s.props.children,m));return}s.type!==S0&&Zn(!1),!s.props.index||!s.props.children||Zn(!1);let g={id:s.props.id||m.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(g.children=C0(s.props.children,m)),i.push(g)}),i}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Pm.apply(this,arguments)}function kE(e,t){if(e==null)return{};var i={},s=Object.keys(e),c,m;for(m=0;m<s.length;m++)c=s[m],!(t.indexOf(c)>=0)&&(i[c]=e[c]);return i}function n4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function r4(e,t){return e.button===0&&(!t||t==="_self")&&!n4(e)}const i4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],o4=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],a4="6";try{window.__reactRouterVersion=a4}catch{}const s4=N.createContext({isTransitioning:!1}),l4="startTransition",Pw=Fd[l4];function c4(e){let{basename:t,children:i,future:s,window:c}=e,m=N.useRef();m.current==null&&(m.current=m3({window:c,v5Compat:!0}));let g=m.current,[h,C]=N.useState({action:g.action,location:g.location}),{v7_startTransition:T}=s||{},k=N.useCallback(z=>{T&&Pw?Pw(()=>C(z)):C(z)},[C,T]);return N.useLayoutEffect(()=>g.listen(k),[g,k]),N.createElement(e4,{basename:t,children:i,location:h.location,navigationType:h.action,navigator:g,future:s})}const u4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",h4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d4=N.forwardRef(function(t,i){let{onClick:s,relative:c,reloadDocument:m,replace:g,state:h,target:C,to:T,preventScrollReset:k,unstable_viewTransition:z}=t,M=kE(t,i4),{basename:Y}=N.useContext(Ds),K,Z=!1;if(typeof T=="string"&&h4.test(T)&&(K=T,u4))try{let H=new URL(window.location.href),ne=T.startsWith("//")?new URL(H.protocol+T):new URL(T),he=ou(ne.pathname,Y);ne.origin===H.origin&&he!=null?T=he+ne.search+ne.hash:Z=!0}catch{}let Q=N3(T,{relative:c}),U=p4(T,{replace:g,state:h,target:C,preventScrollReset:k,relative:c,unstable_viewTransition:z});function D(H){s&&s(H),H.defaultPrevented||U(H)}return N.createElement("a",Pm({},M,{href:K||Q,onClick:Z||m?s:D,ref:i,target:C}))}),Iw=N.forwardRef(function(t,i){let{"aria-current":s="page",caseSensitive:c=!1,className:m="",end:g=!1,style:h,to:C,unstable_viewTransition:T,children:k}=t,z=kE(t,o4),M=eg(C,{relative:z.relative}),Y=$d(),K=N.useContext(CE),{navigator:Z,basename:Q}=N.useContext(Ds),U=K!=null&&m4(M)&&T===!0,D=Z.encodeLocation?Z.encodeLocation(M).pathname:M.pathname,H=Y.pathname,ne=K&&K.navigation&&K.navigation.location?K.navigation.location.pathname:null;c||(H=H.toLowerCase(),ne=ne?ne.toLowerCase():null,D=D.toLowerCase()),ne&&Q&&(ne=ou(ne,Q)||ne);const he=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let ge=H===D||!g&&H.startsWith(D)&&H.charAt(he)==="/",ue=ne!=null&&(ne===D||!g&&ne.startsWith(D)&&ne.charAt(D.length)==="/"),Me={isActive:ge,isPending:ue,isTransitioning:U},Be=ge?s:void 0,Re;typeof m=="function"?Re=m(Me):Re=[m,ge?"active":null,ue?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let He=typeof h=="function"?h(Me):h;return N.createElement(d4,Pm({},z,{"aria-current":Be,className:Re,ref:i,style:He,to:C,unstable_viewTransition:T}),typeof k=="function"?k(Me):k)});var E0;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(E0||(E0={}));var kw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(kw||(kw={}));function f4(e){let t=N.useContext(Jm);return t||Zn(!1),t}function p4(e,t){let{target:i,replace:s,state:c,preventScrollReset:m,relative:g,unstable_viewTransition:h}=t===void 0?{}:t,C=j3(),T=$d(),k=eg(e,{relative:g});return N.useCallback(z=>{if(r4(z,i)){z.preventDefault();let M=s!==void 0?s:Em(T)===Em(k);C(e,{replace:M,state:c,preventScrollReset:m,relative:g,unstable_viewTransition:h})}},[T,C,k,s,c,i,e,m,g,h])}function m4(e,t){t===void 0&&(t={});let i=N.useContext(s4);i==null&&Zn(!1);let{basename:s}=f4(E0.useViewTransitionState),c=eg(e,{relative:t.relative});if(!i.isTransitioning)return!1;let m=ou(i.currentLocation.pathname,s)||i.currentLocation.pathname,g=ou(i.nextLocation.pathname,s)||i.nextLocation.pathname;return w0(c.pathname,g)!=null||w0(c.pathname,m)!=null}const g4="modulepreload",y4=function(e){return"/rail-travel-time/"+e},Mw={},v4=function(t,i,s){let c=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),g=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=Promise.all(i.map(h=>{if(h=y4(h),h in Mw)return;Mw[h]=!0;const C=h.endsWith(".css"),T=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${T}`))return;const k=document.createElement("link");if(k.rel=C?"stylesheet":g4,C||(k.as="script",k.crossOrigin=""),k.href=h,g&&k.setAttribute("nonce",g),document.head.appendChild(k),C)return new Promise((z,M)=>{k.addEventListener("load",z),k.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${h}`)))})}))}return c.then(()=>t()).catch(m=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=m,window.dispatchEvent(g),!g.defaultPrevented)throw m})},_4=N.createContext(null);function x4(e,t){const i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,m=Array.isArray(t)?t[1]:t?t.y:0;return i===c&&s===m}function Ma(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ma(e[i],t[i]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(const c of i)if(!t.hasOwnProperty(c)||!Ma(e[c],t[c]))return!1;return!0}return!1}function b4(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Aw(e,t){if(!e.getProjection)return;const i=e.getProjection(),s=t.getProjection();Ma(i,s)||t.setProjection(i)}function zw(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Rw(e,t){const i=t.viewState||t;let s=!1;if("longitude"in i&&"latitude"in i){const c=e.center;e.center=new c.constructor(i.longitude,i.latitude),s=s||c!==e.center}if("zoom"in i){const c=e.zoom;e.zoom=i.zoom,s=s||c!==e.zoom}if("bearing"in i){const c=e.bearing;e.bearing=i.bearing,s=s||c!==e.bearing}if("pitch"in i){const c=e.pitch;e.pitch=i.pitch,s=s||c!==e.pitch}return i.padding&&!e.isPaddingEqual(i.padding)&&(s=!0,e.padding=i.padding),s}const w4=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Lw(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const s of e.layers)t[s.id]=s;const i=e.layers.map(s=>{let c=null;"interactive"in s&&(c=Object.assign({},s),delete c.interactive);const m=t[s.ref];if(m){c=c||Object.assign({},s),delete c.ref;for(const g of w4)g in m&&(c[g]=m[g])}return c||s});return{...e,layers:i}}var Fw={};const Dw={version:8,sources:{},layers:[]},Ow={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},lv={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Bw={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},S4=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],C4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class au{constructor(t,i,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const m=this.props[Bw[c.type]];m?m(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const m=this.props[Ow[c.type]];m&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),m(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const m=this.props[lv[c.type]];m&&m(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=i,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const i=this.props;this.props=t;const s=this._updateSettings(t,i);s&&this._createShadowTransform(this._map);const c=this._updateSize(t),m=this._updateViewState(t,!0);this._updateStyle(t,i),this._updateStyleComponents(t,i),this._updateHandlers(t,i),(s||c||m&&!this._map.isMoving())&&this.redraw()}static reuse(t,i){const s=au.savedMaps.pop();if(!s)return null;const c=s.map,m=c.getContainer();for(i.className=m.className;m.childNodes.length>0;)i.appendChild(m.childNodes[0]);c._container=i;const g=c._resizeObserver;g&&(g.disconnect(),g.observe(i)),s.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:h}=t;return h&&(h.bounds?c.fitBounds(h.bounds,{...h.fitBoundsOptions,duration:0}):s._updateViewState(h,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),s}_initialize(t){const{props:i}=this,{mapStyle:s=Dw}=i,c={...i,...i.initialViewState,accessToken:i.mapboxAccessToken||E4()||null,container:t,style:Lw(s)},m=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[m.longitude||0,m.latitude||0],zoom:m.zoom||0,pitch:m.pitch||0,bearing:m.bearing||0}),i.gl){const k=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=k,i.gl)}const g=new this._MapClass(c);m.padding&&g.setPadding(m.padding),i.cursor&&(g.getCanvas().style.cursor=i.cursor),this._createShadowTransform(g);const h=g._render;g._render=k=>{this._inRender=!0,h.call(g,k),this._inRender=!1};const C=g._renderTaskQueue.run;g._renderTaskQueue.run=k=>{C.call(g._renderTaskQueue,k),this._onBeforeRepaint()},g.on("render",()=>this._onAfterRepaint());const T=g.fire;g.fire=this._fireEvent.bind(this,T),g.on("resize",()=>{this._renderTransform.resize(g.transform.width,g.transform.height)}),g.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Aw(g.transform,this._renderTransform)}),g.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const k in Ow)g.on(k,this._onPointerEvent);for(const k in lv)g.on(k,this._onCameraEvent);for(const k in Bw)g.on(k,this._onEvent);this._map=g}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),au.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const i=b4(t.transform);t.painter.transform=i,this._renderTransform=i}_updateSize(t){const{viewState:i}=t;if(i){const s=this._map;if(i.width!==s.transform.width||i.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(t,i){if(this._internalUpdate)return!1;const s=this._map,c=this._renderTransform,{zoom:m,pitch:g,bearing:h}=c,C=s.isMoving();C&&(c.cameraElevationReference="sea");const T=Rw(c,{...zw(s.transform),...t});if(C&&(c.cameraElevationReference="ground"),T&&i){const k=this._deferredEvents;k.move=!0,k.zoom||(k.zoom=m!==c.zoom),k.rotate||(k.rotate=h!==c.bearing),k.pitch||(k.pitch=g!==c.pitch)}return C||Rw(s.transform,t),T}_updateSettings(t,i){const s=this._map;let c=!1;for(const m of S4)if(m in t&&!Ma(t[m],i[m])){c=!0;const g=s[`set${m[0].toUpperCase()}${m.slice(1)}`];g==null||g.call(s,t[m])}return c}_updateStyle(t,i){if(t.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==i.mapStyle){const{mapStyle:s=Dw,styleDiffing:c=!0}=t,m={diff:c};return"localIdeographFontFamily"in t&&(m.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(Lw(s),m),!0}return!1}_updateStyleComponents(t,i){const s=this._map;let c=!1;return s.isStyleLoaded()&&("light"in t&&s.setLight&&!Ma(t.light,i.light)&&(c=!0,s.setLight(t.light)),"fog"in t&&s.setFog&&!Ma(t.fog,i.fog)&&(c=!0,s.setFog(t.fog)),"terrain"in t&&s.setTerrain&&!Ma(t.terrain,i.terrain)&&(!t.terrain||s.getSource(t.terrain.source))&&(c=!0,s.setTerrain(t.terrain))),c}_updateHandlers(t,i){var s,c;const m=this._map;let g=!1;for(const h of C4){const C=(s=t[h])!==null&&s!==void 0?s:!0,T=(c=i[h])!==null&&c!==void 0?c:!0;Ma(C,T)||(g=!0,C?m[h].enable(C):m[h].disable())}return g}_queryRenderedFeatures(t){const i=this._map,s=i.transform,{interactiveLayerIds:c=[]}=this.props;try{return i.transform=this._renderTransform,i.queryRenderedFeatures(t,{layers:c.filter(i.getLayer.bind(i))})}catch{return[]}finally{i.transform=s}}_updateHover(t){var i;const{props:s}=this;if(s.interactiveLayerIds&&(s.onMouseMove||s.onMouseEnter||s.onMouseLeave)){const m=t.type,g=((i=this._hoveredFeatures)===null||i===void 0?void 0:i.length)>0,h=this._queryRenderedFeatures(t.point),C=h.length>0;!C&&g&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=h,C&&!g&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=m}else this._hoveredFeatures=null}_fireEvent(t,i,s){const c=this._map,m=c.transform,g=typeof i=="string"?i:i.type;return g==="move"&&this._updateViewState(this.props,!1),g in lv&&(typeof i=="object"&&(i.viewState=zw(m)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,i,s),c.transform=m,c):(t.call(c,i,s),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&t.fire(s);this._internalUpdate=!1;const i=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{Aw(this._renderTransform,i),t.transform=i}}}au.savedMaps=[];function E4(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Fw.MapboxAccessToken}catch{}try{e=e||Fw.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const T4=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function P4(e){if(!e)return null;const t=e.map,i={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:s=>{const c=t.transform;t.transform=e.transform;const m=t.project(s);return t.transform=c,m},unproject:s=>{const c=t.transform;t.transform=e.transform;const m=t.unproject(s);return t.transform=c,m},queryTerrainElevation:(s,c)=>{const m=t.transform;t.transform=e.transform;const g=t.queryTerrainElevation(s,c);return t.transform=m,g},queryRenderedFeatures:(s,c)=>{const m=t.transform;t.transform=e.transform;const g=t.queryRenderedFeatures(s,c);return t.transform=m,g}};for(const s of I4(t))!(s in i)&&!T4.includes(s)&&(i[s]=t[s].bind(t));return i}function I4(e){const t=new Set;let i=e;for(;i;){for(const s of Object.getOwnPropertyNames(i))s[0]!=="_"&&typeof e[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&t.add(s);i=Object.getPrototypeOf(i)}return Array.from(t)}const k4=typeof document<"u"?N.useLayoutEffect:N.useEffect,M4=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function A4(e,t){for(const s of M4)s in t&&(e[s]=t[s]);const{RTLTextPlugin:i="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;i&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(i,s=>{s&&console.error(s)},!0)}const tg=N.createContext(null);function z4(e,t,i){const s=N.useContext(_4),[c,m]=N.useState(null),g=N.useRef(),{current:h}=N.useRef({mapLib:null,map:null});N.useEffect(()=>{const k=e.mapLib;let z=!0,M;return Promise.resolve(k||i).then(Y=>{if(!z)return;if(!Y)throw new Error("Invalid mapLib");const K="Map"in Y?Y:Y.default;if(!K.Map)throw new Error("Invalid mapLib");if(A4(K,e),!K.supported||K.supported(e))e.reuseMaps&&(M=au.reuse(e,g.current)),M||(M=new au(K.Map,e,g.current)),h.map=P4(M),h.mapLib=K,m(M),s==null||s.onMapMount(h.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(Y=>{const{onError:K}=e;K?K({type:"error",target:null,originalEvent:null,error:Y}):console.error(Y)}),()=>{z=!1,M&&(s==null||s.onMapUnmount(e.id),e.reuseMaps?M.recycle():M.destroy())}},[]),k4(()=>{c&&c.setProps(e)}),N.useImperativeHandle(t,()=>h.map,[c]);const C=N.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),T={height:"100%"};return N.createElement("div",{id:e.id,ref:g,style:C},c&&N.createElement(tg.Provider,{value:h},N.createElement("div",{"mapboxgl-children":"",style:T},e.children)))}const R4=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function $l(e,t){if(!e||!t)return;const i=e.style;for(const s in t){const c=t[s];Number.isFinite(c)&&!R4.test(s)?i[s]=`${c}px`:i[s]=c}}function L4(e,t){const{map:i,mapLib:s}=N.useContext(tg),c=N.useRef({props:e});c.current.props=e;const m=N.useMemo(()=>{let Z=!1;N.Children.forEach(e.children,D=>{D&&(Z=!0)});const Q={...e,element:Z?document.createElement("div"):null},U=new s.Marker(Q);return U.setLngLat([e.longitude,e.latitude]),U.getElement().addEventListener("click",D=>{var H,ne;(ne=(H=c.current.props).onClick)===null||ne===void 0||ne.call(H,{type:"click",target:U,originalEvent:D})}),U.on("dragstart",D=>{var H,ne;const he=D;he.lngLat=m.getLngLat(),(ne=(H=c.current.props).onDragStart)===null||ne===void 0||ne.call(H,he)}),U.on("drag",D=>{var H,ne;const he=D;he.lngLat=m.getLngLat(),(ne=(H=c.current.props).onDrag)===null||ne===void 0||ne.call(H,he)}),U.on("dragend",D=>{var H,ne;const he=D;he.lngLat=m.getLngLat(),(ne=(H=c.current.props).onDragEnd)===null||ne===void 0||ne.call(H,he)}),U},[]);N.useEffect(()=>(m.addTo(i.getMap()),()=>{m.remove()}),[]);const{longitude:g,latitude:h,offset:C,style:T,draggable:k=!1,popup:z=null,rotation:M=0,rotationAlignment:Y="auto",pitchAlignment:K="auto"}=e;return N.useEffect(()=>{$l(m.getElement(),T)},[T]),N.useImperativeHandle(t,()=>m,[]),(m.getLngLat().lng!==g||m.getLngLat().lat!==h)&&m.setLngLat([g,h]),C&&!x4(m.getOffset(),C)&&m.setOffset(C),m.isDraggable()!==k&&m.setDraggable(k),m.getRotation()!==M&&m.setRotation(M),m.getRotationAlignment()!==Y&&m.setRotationAlignment(Y),m.getPitchAlignment()!==K&&m.setPitchAlignment(K),m.getPopup()!==z&&m.setPopup(z),pu.createPortal(e.children,m.getElement())}N.memo(N.forwardRef(L4));function Nw(e){return new Set(e?e.trim().split(/\s+/):[])}function F4(e,t){const{map:i,mapLib:s}=N.useContext(tg),c=N.useMemo(()=>document.createElement("div"),[]),m=N.useRef({props:e});m.current.props=e;const g=N.useMemo(()=>{const h={...e},C=new s.Popup(h);return C.setLngLat([e.longitude,e.latitude]),C.once("open",T=>{var k,z;(z=(k=m.current.props).onOpen)===null||z===void 0||z.call(k,T)}),C},[]);if(N.useEffect(()=>{const h=C=>{var T,k;(k=(T=m.current.props).onClose)===null||k===void 0||k.call(T,C)};return g.on("close",h),g.setDOMContent(c).addTo(i.getMap()),()=>{g.off("close",h),g.isOpen()&&g.remove()}},[]),N.useEffect(()=>{$l(g.getElement(),e.style)},[e.style]),N.useImperativeHandle(t,()=>g,[]),g.isOpen()&&((g.getLngLat().lng!==e.longitude||g.getLngLat().lat!==e.latitude)&&g.setLngLat([e.longitude,e.latitude]),e.offset&&!Ma(g.options.offset,e.offset)&&g.setOffset(e.offset),(g.options.anchor!==e.anchor||g.options.maxWidth!==e.maxWidth)&&(g.options.anchor=e.anchor,g.setMaxWidth(e.maxWidth)),g.options.className!==e.className)){const h=Nw(g.options.className),C=Nw(e.className);for(const T of h)C.has(T)||g.removeClassName(T);for(const T of C)h.has(T)||g.addClassName(T);g.options.className=e.className}return pu.createPortal(e.children,c)}N.memo(N.forwardRef(F4));function Vd(e,t,i,s){const c=N.useContext(tg),m=N.useMemo(()=>e(c),[]);return N.useEffect(()=>{const g=t,h=typeof t=="function"&&typeof i=="function"?t:null,C=typeof t=="function"?t:null,{map:T}=c;return T.hasControl(m)||(T.addControl(m,g==null?void 0:g.position),h&&h(c)),()=>{C&&C(c),T.hasControl(m)&&T.removeControl(m)}},[]),m}function D4(e){const t=Vd(({mapLib:i})=>new i.AttributionControl(e),{position:e.position});return N.useEffect(()=>{$l(t._container,e.style)},[e.style]),null}N.memo(D4);function O4(e){const t=Vd(({mapLib:i})=>new i.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return N.useEffect(()=>{$l(t._controlContainer,e.style)},[e.style]),null}N.memo(O4);function B4(e,t){const i=N.useRef({props:e}),s=Vd(({mapLib:c})=>{const m=new c.GeolocateControl(e),g=m._setupUI;return m._setupUI=h=>{m._container.hasChildNodes()||g(h)},m.on("geolocate",h=>{var C,T;(T=(C=i.current.props).onGeolocate)===null||T===void 0||T.call(C,h)}),m.on("error",h=>{var C,T;(T=(C=i.current.props).onError)===null||T===void 0||T.call(C,h)}),m.on("outofmaxbounds",h=>{var C,T;(T=(C=i.current.props).onOutOfMaxBounds)===null||T===void 0||T.call(C,h)}),m.on("trackuserlocationstart",h=>{var C,T;(T=(C=i.current.props).onTrackUserLocationStart)===null||T===void 0||T.call(C,h)}),m.on("trackuserlocationend",h=>{var C,T;(T=(C=i.current.props).onTrackUserLocationEnd)===null||T===void 0||T.call(C,h)}),m},{position:e.position});return i.current.props=e,N.useImperativeHandle(t,()=>s,[]),N.useEffect(()=>{$l(s._container,e.style)},[e.style]),null}N.memo(N.forwardRef(B4));function N4(e){const t=Vd(({mapLib:i})=>new i.NavigationControl(e),{position:e.position});return N.useEffect(()=>{$l(t._container,e.style)},[e.style]),null}N.memo(N4);function j4(e){const t=Vd(({mapLib:m})=>new m.ScaleControl(e),{position:e.position}),i=N.useRef(e),s=i.current;i.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==s.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==s.unit&&t.setUnit(e.unit),N.useEffect(()=>{$l(t._container,c)},[c]),null}N.memo(j4);const $4=v4(()=>import("./mapbox-gl-Xw9KciOA.js").then(e=>e.m),[]),V4=N.forwardRef(function(t,i){return z4(t,i,$4)});var ME={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.2.0/LICENSE.txt
 */(function(e,t){(function(i,s){e.exports=s()})(Vk,function(){var i={},s={};function c(g,h,C){if(s[g]=C,g==="index"){var T="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",k={};return s.shared(k),s.index(i,k),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),i}}c("shared",["exports"],function(g){function h(o,n,a,u){return new(a||(a=Promise))(function(f,v){function _(P){try{S(u.next(P))}catch(R){v(R)}}function b(P){try{S(u.throw(P))}catch(R){v(R)}}function S(P){var R;P.done?f(P.value):(R=P.value,R instanceof a?R:new a(function(L){L(R)})).then(_,b)}S((u=u.apply(o,n||[])).next())})}function C(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}typeof SuppressedError=="function"&&SuppressedError;var T=k;function k(o,n){this.x=o,this.y=n}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,a=o.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),a=Math.sin(o),u=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=u,this},_rotateAround:function(o,n){var a=Math.cos(o),u=Math.sin(o),f=n.y+u*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-u*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(o){return o instanceof k?o:Array.isArray(o)?new k(o[0],o[1]):o};var z=C(T),M=Y;function Y(o,n,a,u){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=u}Y.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,u=0;u<8;u++){var f=this.sampleCurveX(a)-o;if(Math.abs(f)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var _=0,b=1;for(a=o,u=0;u<20&&(f=this.sampleCurveX(a),!(Math.abs(f-o)<n));u++)o>f?_=a:b=a,a=.5*(b-_)+_;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var K=C(M);let Z,Q;function U(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function D(){if(Q==null&&(Q=!1,U())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let u=0;u<5*5;u++){const f=4*u;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(u%5,Math.floor(u/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let u=0;u<5*5*4;u++)if(u%4!=3&&a[u]!==u){Q=!0;break}}}return Q||!1}function H(o,n,a,u){const f=new K(o,n,a,u);return v=>f.solve(v)}const ne=H(.25,.1,.25,1);function he(o,n,a){return Math.min(a,Math.max(n,o))}function ge(o,n,a){const u=a-n,f=((o-n)%u+u)%u+n;return f===n?a:f}function ue(o,...n){for(const a of n)for(const u in a)o[u]=a[u];return o}let Me=1;function Be(o,n,a){const u={};for(const f in o)u[f]=n.call(this,o[f],f,o);return u}function Re(o,n,a){const u={};for(const f in o)n.call(this,o[f],f,o)&&(u[f]=o[f]);return u}function He(o){return Array.isArray(o)?o.map(He):typeof o=="object"&&o?Be(o,He):o}const rt={};function Ze(o){rt[o]||(typeof console<"u"&&console.warn(o),rt[o]=!0)}function qe(o,n,a){return(a.y-o.y)*(n.x-o.x)>(n.y-o.y)*(a.x-o.x)}function ut(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Oe=null;function Pe(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ze(o,n,a,u,f){return h(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(o,{timestamp:0});try{const _=v==null?void 0:v.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const b=_.startsWith("BGR"),S=new Uint8ClampedArray(u*f*4);if(yield v.copyTo(S,function(P,R,L,O,$){const G=4*Math.max(-R,0),X=(Math.max(0,L)-L)*O*4+G,ie=4*O,le=Math.max(0,R),be=Math.max(0,L);return{rect:{x:le,y:be,width:Math.min(P.width,R+O)-le,height:Math.min(P.height,L+$)-be},layout:[{offset:X,stride:ie}]}}(o,n,a,u,f)),b)for(let P=0;P<S.length;P+=4){const R=S[P];S[P]=S[P+2],S[P+2]=R}return S}finally{v.close()}})}let Ve,We;const Xe="AbortError";function wt(){return new Error(Xe)}const Dt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Zt(o){return Dt.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Kt="global-dispatcher";class Ht extends Error{constructor(n,a,u,f){super(`AJAXError: ${a} (${n}): ${u}`),this.status=n,this.statusText=a,this.url=u,this.body=f}}const jn=()=>ut(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,zr=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const u=Zt(o.url);if(u)return u(o,n);if(ut(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Kt},n)}if(!(/^file:/.test(a=o.url)||/^file:/.test(jn())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(u,f){return h(this,void 0,void 0,function*(){const v=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:jn(),signal:f.signal});u.type==="json"&&v.headers.set("Accept","application/json");const _=yield fetch(v);if(!_.ok){const P=yield _.blob();throw new Ht(_.status,_.statusText,u.url,P)}let b;b=u.type==="arrayBuffer"||u.type==="image"?_.arrayBuffer():u.type==="json"?_.json():_.text();const S=yield b;if(f.signal.aborted)throw wt();return{data:S,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(o,n);if(ut(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Kt},n)}var a;return function(u,f){return new Promise((v,_)=>{const b=new XMLHttpRequest;b.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(b.responseType="arraybuffer");for(const S in u.headers)b.setRequestHeader(S,u.headers[S]);u.type==="json"&&(b.responseType="text",b.setRequestHeader("Accept","application/json")),b.withCredentials=u.credentials==="include",b.onerror=()=>{_(new Error(b.statusText))},b.onload=()=>{if(!f.signal.aborted)if((b.status>=200&&b.status<300||b.status===0)&&b.response!==null){let S=b.response;if(u.type==="json")try{S=JSON.parse(b.response)}catch(P){return void _(P)}v({data:S,cacheControl:b.getResponseHeader("Cache-Control"),expires:b.getResponseHeader("Expires")})}else{const S=new Blob([b.response],{type:b.getResponseHeader("Content-Type")});_(new Ht(b.status,b.statusText,u.url,S))}},f.signal.addEventListener("abort",()=>{b.abort(),_(wt())}),b.send(u.body)})}(o,n)};function Rr(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const n=new URL(o),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function ar(o,n,a){a[o]&&a[o].indexOf(n)!==-1||(a[o]=a[o]||[],a[o].push(n))}function sr(o,n,a){if(a&&a[o]){const u=a[o].indexOf(n);u!==-1&&a[o].splice(u,1)}}class Jt{constructor(n,a={}){ue(this,a),this.type=n}}class rn extends Jt{constructor(n,a={}){super("error",ue({error:n},a))}}class Xn{on(n,a){return this._listeners=this._listeners||{},ar(n,a,this._listeners),this}off(n,a){return sr(n,a,this._listeners),sr(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},ar(n,a,this._oneTimeListeners),this):new Promise(u=>this.once(n,u))}fire(n,a){typeof n=="string"&&(n=new Jt(n,a||{}));const u=n.type;if(this.listens(u)){n.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of f)b.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of v)sr(u,b,this._oneTimeListeners),b.call(this,n);const _=this._eventedParent;_&&(ue(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof rn&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Gr(o,n){const a={};for(const u in o)u!=="ref"&&(a[u]=o[u]);return pr.forEach(u=>{u in n&&(a[u]=n[u])}),a}function Pt(o,n){if(Array.isArray(o)){if(!Array.isArray(n)||o.length!==n.length)return!1;for(let a=0;a<o.length;a++)if(!Pt(o[a],n[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&n!==null){if(typeof n!="object"||Object.keys(o).length!==Object.keys(n).length)return!1;for(const a in o)if(!Pt(o[a],n[a]))return!1;return!0}return o===n}function Ot(o,n){o.push(n)}function _n(o,n,a){Ot(a,{command:"addSource",args:[o,n[o]]})}function xr(o,n,a){Ot(n,{command:"removeSource",args:[o]}),a[o]=!0}function Qi(o,n,a,u){xr(o,a,u),_n(o,n,a)}function zi(o,n,a){let u;for(u in o[a])if(Object.prototype.hasOwnProperty.call(o[a],u)&&u!=="data"&&!Pt(o[a][u],n[a][u]))return!1;for(u in n[a])if(Object.prototype.hasOwnProperty.call(n[a],u)&&u!=="data"&&!Pt(o[a][u],n[a][u]))return!1;return!0}function Lr(o,n,a,u,f,v){o=o||{},n=n||{};for(const _ in o)Object.prototype.hasOwnProperty.call(o,_)&&(Pt(o[_],n[_])||a.push({command:v,args:[u,_,n[_],f]}));for(const _ in n)Object.prototype.hasOwnProperty.call(n,_)&&!Object.prototype.hasOwnProperty.call(o,_)&&(Pt(o[_],n[_])||a.push({command:v,args:[u,_,n[_],f]}))}function xn(o){return o.id}function Yn(o,n){return o[n.id]=n,o}class Qe{constructor(n,a,u,f){this.message=(n?`${n}: `:"")+u,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function br(o,...n){for(const a of n)for(const u in a)o[u]=a[u];return o}class wr extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class Vo{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[u,f]of a)this.bindings[u]=f}concat(n){return new Vo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const _o={kind:"null"},Je={kind:"number"},Bt={kind:"string"},It={kind:"boolean"},mr={kind:"color"},lr={kind:"object"},Ct={kind:"value"},Fr={kind:"collator"},vi={kind:"formatted"},In={kind:"padding"},re={kind:"resolvedImage"},j={kind:"variableAnchorOffsetCollection"};function V(o,n){return{kind:"array",itemType:o,N:n}}function W(o){if(o.kind==="array"){const n=W(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ae=[_o,Je,Bt,It,mr,vi,lr,V(Ct),In,re,j];function me(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!me(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const a of ae)if(!me(a,n))return null}}return`Expected ${W(o)} but found ${W(n)} instead.`}function de(o,n){return n.some(a=>a.kind===o.kind)}function ye(o,n){return n.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}function ce(o,n){return o.kind==="array"&&n.kind==="array"?o.itemType.kind===n.itemType.kind&&typeof o.N=="number":o.kind===n.kind}const we=.96422,Ne=.82521,Le=4/29,Ae=6/29,vt=3*Ae*Ae,xt=Ae*Ae*Ae,kt=Math.PI/180,Et=180/Math.PI;function Ut(o){return(o%=360)<0&&(o+=360),o}function qt([o,n,a,u]){let f,v;const _=$n((.2225045*(o=fn(o))+.7168786*(n=fn(n))+.0606169*(a=fn(a)))/1);o===n&&n===a?f=v=_:(f=$n((.4360747*o+.3850649*n+.1430804*a)/we),v=$n((.0139322*o+.0971045*n+.7141733*a)/Ne));const b=116*_-16;return[b<0?0:b,500*(f-_),200*(_-v),u]}function fn(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function $n(o){return o>xt?Math.pow(o,1/3):o/vt+Le}function Nt([o,n,a,u]){let f=(o+16)/116,v=isNaN(n)?f:f+n/500,_=isNaN(a)?f:f-a/200;return f=1*Jn(f),v=we*Jn(v),_=Ne*Jn(_),[bn(3.1338561*v-1.6168667*f-.4906146*_),bn(-.9787684*v+1.9161415*f+.033454*_),bn(.0719453*v-.2289914*f+1.4052427*_),u]}function bn(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Jn(o){return o>Ae?o*o*o:vt*(o-Le)}function Sr(o){return parseInt(o.padEnd(2,o),16)/255}function _i(o,n){return kn(n?o/100:o,0,1)}function kn(o,n,a){return Math.min(Math.max(n,o),a)}function $a(o){return!o.some(Number.isNaN)}const xg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class an{constructor(n,a,u,f=1,v=!0){this.r=n,this.g=a,this.b=u,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,a,u,f]))}static parse(n){if(n instanceof an)return n;if(typeof n!="string")return;const a=function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=xg[u];if(f){const[_,b,S]=f;return[_/255,b/255,S/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const _=u.length<6?1:2;let b=1;return[Sr(u.slice(b,b+=_)),Sr(u.slice(b,b+=_)),Sr(u.slice(b,b+=_)),Sr(u.slice(b,b+_)||"ff")]}if(u.startsWith("rgb")){const _=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[b,S,P,R,L,O,$,G,X,ie,le,be]=_,fe=[R||" ",$||" ",ie].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const _e=[P,O,X].join(""),De=_e==="%%%"?100:_e===""?255:0;if(De){const je=[kn(+S/De,0,1),kn(+L/De,0,1),kn(+G/De,0,1),le?_i(+le,be):1];if($a(je))return je}}return}}const v=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,b,S,P,R,L,O,$,G]=v,X=[S||" ",R||" ",O].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const ie=[+b,kn(+P,0,100),kn(+L,0,100),$?_i(+$,G):1];if($a(ie))return function([le,be,fe,_e]){function De(je){const st=(je+le/30)%12,mt=be*Math.min(fe,1-fe);return fe-mt*Math.max(-1,Math.min(st-3,9-st,1))}return le=Ut(le),be/=100,fe/=100,[De(0),De(8),De(4),_e]}(ie)}}}(n);return a?new an(...a,!1):void 0}get rgb(){const{r:n,g:a,b:u,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,a/v,u/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,u,f,v]=qt(n),_=Math.sqrt(u*u+f*f);return[Math.round(1e4*_)?Ut(Math.atan2(f,u)*Et):NaN,_,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",qt(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,u,f]=this.rgb;return`rgba(${[n,a,u].map(v=>Math.round(255*v)).join(",")},${f})`}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class _u{constructor(n,a,u){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xu{constructor(n,a,u,f,v){this.text=n,this.image=a,this.scale=u,this.fontStack=f,this.textColor=v}}class ri{constructor(n){this.sections=n}static fromString(n){return new ri([new xu(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ri?n:ri.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class ii{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof ii)return n;if(typeof n=="number")return new ii([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new ii(n)}}toString(){return JSON.stringify(this.values)}}const Xd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Cr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Cr)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const u=n[a],f=n[a+1];if(typeof u!="string"||!Xd.has(u)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Cr(n)}}toString(){return JSON.stringify(this.values)}}class xi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new xi({name:n,available:!1}):null}}function Yd(o,n,a,u){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[o,n,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[o,n,a,u]:[o,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof an||o instanceof _u||o instanceof ri||o instanceof ii||o instanceof Cr||o instanceof xi)return!0;if(Array.isArray(o)){for(const n of o)if(!xo(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!xo(o[n]))return!1;return!0}return!1}function Vn(o){if(o===null)return _o;if(typeof o=="string")return Bt;if(typeof o=="boolean")return It;if(typeof o=="number")return Je;if(o instanceof an)return mr;if(o instanceof _u)return Fr;if(o instanceof ri)return vi;if(o instanceof ii)return In;if(o instanceof Cr)return j;if(o instanceof xi)return re;if(Array.isArray(o)){const n=o.length;let a;for(const u of o){const f=Vn(u);if(a){if(a===f)continue;a=Ct;break}a=f}return V(a||Ct,n)}return lr}function Os(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof an||o instanceof ri||o instanceof ii||o instanceof Cr||o instanceof xi?o.toString():JSON.stringify(o)}class sa{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!xo(n[1]))return a.error("invalid value");const u=n[1];let f=Vn(u);const v=a.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new sa(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const la={string:Bt,number:Je,boolean:It,object:lr};class Ri{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let u,f=1;const v=n[0];if(v==="array"){let b,S;if(n.length>2){const P=n[1];if(typeof P!="string"||!(P in la)||P==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=la[P],f++}else b=Ct;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);S=n[2],f++}u=V(b,S)}else{if(!la[v])throw new Error(`Types doesn't contain name = ${v}`);u=la[v]}const _=[];for(;f<n.length;f++){const b=a.parse(n[f],f,Ct);if(!b)return null;_.push(b)}return new Ri(u,_)}evaluate(n){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(n);if(!me(this.type,Vn(u)))return u;if(a===this.args.length-1)throw new Mn(`Expected value to be of type ${W(this.type)}, but found ${W(Vn(u))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Hl={"to-boolean":It,"to-color":mr,"to-number":Je,"to-string":Bt};class eo{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[0];if(!Hl[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&n.length!==2)return a.error("Expected one argument.");const f=Hl[u],v=[];for(let _=1;_<n.length;_++){const b=a.parse(n[_],_,Ct);if(!b)return null;v.push(b)}return new eo(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,u;for(const f of this.args){if(a=f.evaluate(n),u=null,a instanceof an)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Yd(a[0],a[1],a[2],a[3]),!u))return new an(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Mn(u||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const u of this.args){a=u.evaluate(n);const f=ii.parse(a);if(f)return f}throw new Mn(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const u of this.args){a=u.evaluate(n);const f=Cr.parse(a);if(f)return f}throw new Mn(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const u of this.args){if(a=u.evaluate(n),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new Mn(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return ri.fromString(Os(this.args[0].evaluate(n)));case"resolvedImage":return xi.fromString(Os(this.args[0].evaluate(n)));default:return Os(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const bu=["Unknown","Point","LineString","Polygon"];class Va{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?bu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=an.parse(n)),a}}class tn{constructor(n,a,u=[],f,v=new Vo,_=[]){this.registry=n,this.path=u,this.key=u.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=_,this.expectedType=f,this._isConstant=a}parse(n,a,u,f,v={}){return a?this.concat(a,u,f)._parse(n,v):this._parse(n,v)}_parse(n,a){function u(f,v,_){return _==="assert"?new Ri(v,[f]):_==="coerce"?new eo(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let _=v.parse(n,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,S=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||S.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(b.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(b,S))return null}else _=u(_,b,a.typeAnnotation||"coerce");else _=u(_,b,a.typeAnnotation||"coerce");else _=u(_,b,a.typeAnnotation||"coerce");else _=u(_,b,a.typeAnnotation||"assert")}if(!(_ instanceof sa)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const b=new Va;try{_=new sa(_.type,_.evaluate(b))}catch(S){return this.error(S.message),null}}return _}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,u){const f=typeof n=="number"?this.path.concat(n):this.path,v=u?this.scope.concat(u):this.scope;return new tn(this.registry,this._isConstant,f,a||null,v,this.errors)}error(n,...a){const u=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new wr(u,n))}checkSubtype(n,a){const u=me(n,a);return u&&this.error(u),u}}class Wl{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const u=[];for(let v=1;v<n.length-1;v+=2){const _=n[v];if(typeof _!="string")return a.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const b=a.parse(n[v+1],v+1);if(!b)return null;u.push([_,b])}const f=a.parse(n[n.length-1],n.length-1,a.expectedType,u);return f?new Wl(u,f):null}outputDefined(){return this.result.outputDefined()}}class Ua{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=n[1];return a.scope.has(u)?new Ua(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class wu{constructor(n,a,u){this.type=n,this.index=a,this.input=u}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,Je),f=a.parse(n[2],2,V(a.expectedType||Ct));return u&&f?new wu(f.type.itemType,u,f):null}evaluate(n){const a=this.index.evaluate(n),u=this.input.evaluate(n);if(a<0)throw new Mn(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new Mn(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new Mn(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ql{constructor(n,a){this.type=It,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,Ct),f=a.parse(n[2],2,Ct);return u&&f?de(u.type,[It,Bt,Je,_o,Ct])?new ql(u,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(u.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!u)return!1;if(!ye(a,["boolean","string","number","null"]))throw new Mn(`Expected first argument to be of type boolean, string, number or null, but found ${W(Vn(a))} instead.`);if(!ye(u,["string","array"]))throw new Mn(`Expected second argument to be of type array or string, but found ${W(Vn(u))} instead.`);return u.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Bs{constructor(n,a,u){this.type=Je,this.needle=n,this.haystack=a,this.fromIndex=u}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,Ct),f=a.parse(n[2],2,Ct);if(!u||!f)return null;if(!de(u.type,[It,Bt,Je,_o,Ct]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(u.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,Je);return v?new Bs(u,f,v):null}return new Bs(u,f)}evaluate(n){const a=this.needle.evaluate(n),u=this.haystack.evaluate(n);if(!ye(a,["boolean","string","number","null"]))throw new Mn(`Expected first argument to be of type boolean, string, number or null, but found ${W(Vn(a))} instead.`);if(!ye(u,["string","array"]))throw new Mn(`Expected second argument to be of type array or string, but found ${W(Vn(u))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return u.indexOf(a,f)}return u.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Su{constructor(n,a,u,f,v,_){this.inputType=n,this.type=a,this.input=u,this.cases=f,this.outputs=v,this.otherwise=_}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let u,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const v={},_=[];for(let P=2;P<n.length-1;P+=2){let R=n[P];const L=n[P+1];Array.isArray(R)||(R=[R]);const O=a.concat(P);if(R.length===0)return O.error("Expected at least one branch label.");for(const G of R){if(typeof G!="number"&&typeof G!="string")return O.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return O.error("Numeric branch labels must be integer values.");if(u){if(O.checkSubtype(u,Vn(G)))return null}else u=Vn(G);if(v[String(G)]!==void 0)return O.error("Branch labels must be unique.");v[String(G)]=_.length}const $=a.parse(L,P,f);if(!$)return null;f=f||$.type,_.push($)}const b=a.parse(n[1],1,Ct);if(!b)return null;const S=a.parse(n[n.length-1],n.length-1,f);return S?b.type.kind!=="value"&&a.concat(1).checkSubtype(u,b.type)?null:new Su(u,f,b,v,_,S):null}evaluate(n){const a=this.input.evaluate(n);return(Vn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Gl{constructor(n,a,u){this.type=n,this.branches=a,this.otherwise=u}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const f=[];for(let _=1;_<n.length-1;_+=2){const b=a.parse(n[_],_,It);if(!b)return null;const S=a.parse(n[_+1],_+1,u);if(!S)return null;f.push([b,S]),u=u||S.type}const v=a.parse(n[n.length-1],n.length-1,u);if(!v)return null;if(!u)throw new Error("Can't infer output type");return new Gl(u,f,v)}evaluate(n){for(const[a,u]of this.branches)if(a.evaluate(n))return u.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,u]of this.branches)n(a),n(u);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class Ns{constructor(n,a,u,f){this.type=n,this.input=a,this.beginIndex=u,this.endIndex=f}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const u=a.parse(n[1],1,Ct),f=a.parse(n[2],2,Je);if(!u||!f)return null;if(!de(u.type,[V(Ct),Bt,Ct]))return a.error(`Expected first argument to be of type array or string, but found ${W(u.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,Je);return v?new Ns(u.type,u,f,v):null}return new Ns(u.type,u,f)}evaluate(n){const a=this.input.evaluate(n),u=this.beginIndex.evaluate(n);if(!ye(a,["string","array"]))throw new Mn(`Expected first argument to be of type array or string, but found ${W(Vn(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return a.slice(u,f)}return a.slice(u)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Zl(o,n){const a=o.length-1;let u,f,v=0,_=a,b=0;for(;v<=_;)if(b=Math.floor((v+_)/2),u=o[b],f=o[b+1],u<=n){if(b===a||n<f)return b;v=b+1}else{if(!(u>n))throw new Mn("Input is not a number.");_=b-1}return 0}class js{constructor(n,a,u){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[f,v]of u)this.labels.push(f),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(n[1],1,Je);if(!u)return null;const f=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let _=1;_<n.length;_+=2){const b=_===1?-1/0:n[_],S=n[_+1],P=_,R=_+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(f.length&&f[f.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const L=a.parse(S,R,v);if(!L)return null;v=v||L.type,f.push([b,L])}return new js(v,u,f)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return u[0].evaluate(n);const v=a.length;return f>=a[v-1]?u[v-1].evaluate(n):u[Zl(a,f)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function bg(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var wg=Cu;function Cu(o,n,a,u){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(u-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=a,this.p2y=u}Cu.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,u=0;u<8;u++){var f=this.sampleCurveX(a)-o;if(Math.abs(f)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=f/v}var _=0,b=1;for(a=o,u=0;u<20&&(f=this.sampleCurveX(a),!(Math.abs(f-o)<n));u++)o>f?_=a:b=a,a=.5*(b-_)+_;return a},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};var Jd=bg(wg);function ca(o,n,a){return o+a*(n-o)}function Kl(o,n,a){return o.map((u,f)=>ca(u,n[f],a))}const Dr={number:ca,color:function(o,n,a,u="rgb"){switch(u){case"rgb":{const[f,v,_,b]=Kl(o.rgb,n.rgb,a);return new an(f,v,_,b,!1)}case"hcl":{const[f,v,_,b]=o.hcl,[S,P,R,L]=n.hcl;let O,$;if(isNaN(f)||isNaN(S))isNaN(f)?isNaN(S)?O=NaN:(O=S,_!==1&&_!==0||($=P)):(O=f,R!==1&&R!==0||($=v));else{let be=S-f;S>f&&be>180?be-=360:S<f&&f-S>180&&(be+=360),O=f+a*be}const[G,X,ie,le]=function([be,fe,_e,De]){return be=isNaN(be)?0:be*kt,Nt([_e,Math.cos(be)*fe,Math.sin(be)*fe,De])}([O,$??ca(v,P,a),ca(_,R,a),ca(b,L,a)]);return new an(G,X,ie,le,!1)}case"lab":{const[f,v,_,b]=Nt(Kl(o.lab,n.lab,a));return new an(f,v,_,b,!1)}}},array:Kl,padding:function(o,n,a){return new ii(Kl(o.values,n.values,a))},variableAnchorOffsetCollection:function(o,n,a){const u=o.values,f=n.values;if(u.length!==f.length)throw new Mn(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${n.toString()}`);const v=[];for(let _=0;_<u.length;_+=2){if(u[_]!==f[_])throw new Mn(`Cannot interpolate values containing mismatched anchors. from[${_}]: ${u[_]}, to[${_}]: ${f[_]}`);v.push(u[_]);const[b,S]=u[_+1],[P,R]=f[_+1];v.push([ca(b,P,a),ca(S,R,a)])}return new Cr(v)}};class oi{constructor(n,a,u,f,v){this.type=n,this.operator=a,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[_,b]of v)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(n,a,u,f){let v=0;if(n.name==="exponential")v=Eu(a,n.base,u,f);else if(n.name==="linear")v=Eu(a,1,u,f);else if(n.name==="cubic-bezier"){const _=n.controlPoints;v=new Jd(_[0],_[1],_[2],_[3]).solve(Eu(a,1,u,f))}return v}static parse(n,a){let[u,f,v,..._]=n;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const P=f[1];if(typeof P!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:P}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const P=f.slice(1);if(P.length!==4||P.some(R=>typeof R!="number"||R<0||R>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:P}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,Je),!v)return null;const b=[];let S=null;u==="interpolate-hcl"||u==="interpolate-lab"?S=mr:a.expectedType&&a.expectedType.kind!=="value"&&(S=a.expectedType);for(let P=0;P<_.length;P+=2){const R=_[P],L=_[P+1],O=P+3,$=P+4;if(typeof R!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=R)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const G=a.parse(L,$,S);if(!G)return null;S=S||G.type,b.push([R,G])}return ce(S,Je)||ce(S,mr)||ce(S,In)||ce(S,j)||ce(S,V(Je))?new oi(S,u,f,v,b):a.error(`Type ${W(S)} is not interpolatable.`)}evaluate(n){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(n);const f=this.input.evaluate(n);if(f<=a[0])return u[0].evaluate(n);const v=a.length;if(f>=a[v-1])return u[v-1].evaluate(n);const _=Zl(a,f),b=oi.interpolationFactor(this.interpolation,f,a[_],a[_+1]),S=u[_].evaluate(n),P=u[_+1].evaluate(n);switch(this.operator){case"interpolate":return Dr[this.type.kind](S,P,b);case"interpolate-hcl":return Dr.color(S,P,b,"hcl");case"interpolate-lab":return Dr.color(S,P,b,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Eu(o,n,a,u){const f=u-a,v=o-a;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class Xl{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let u=null;const f=a.expectedType;f&&f.kind!=="value"&&(u=f);const v=[];for(const b of n.slice(1)){const S=a.parse(b,1+v.length,u,void 0,{typeAnnotation:"omit"});if(!S)return null;u=u||S.type,v.push(S)}if(!u)throw new Error("No output type");const _=f&&v.some(b=>me(f,b.type));return new Xl(_?Ct:u,v)}evaluate(n){let a,u=null,f=0;for(const v of this.args)if(f++,u=v.evaluate(n),u&&u instanceof xi&&!u.available&&(a||(a=u.name),u=null,f===this.args.length&&(u=a)),u!==null)break;return u}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}function Tu(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Pu(o,n,a,u){return u.compare(n,a)===0}function Ha(o,n,a){const u=o!=="=="&&o!=="!=";return class AE{constructor(v,_,b){this.type=It,this.lhs=v,this.rhs=_,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const b=v[0];let S=_.parse(v[1],1,Ct);if(!S)return null;if(!Tu(b,S.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${W(S.type)}'.`);let P=_.parse(v[2],2,Ct);if(!P)return null;if(!Tu(b,P.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${W(P.type)}'.`);if(S.type.kind!==P.type.kind&&S.type.kind!=="value"&&P.type.kind!=="value")return _.error(`Cannot compare types '${W(S.type)}' and '${W(P.type)}'.`);u&&(S.type.kind==="value"&&P.type.kind!=="value"?S=new Ri(P.type,[S]):S.type.kind!=="value"&&P.type.kind==="value"&&(P=new Ri(S.type,[P])));let R=null;if(v.length===4){if(S.type.kind!=="string"&&P.type.kind!=="string"&&S.type.kind!=="value"&&P.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(R=_.parse(v[3],3,Fr),!R)return null}return new AE(S,P,R)}evaluate(v){const _=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(u&&this.hasUntypedArgument){const S=Vn(_),P=Vn(b);if(S.kind!==P.kind||S.kind!=="string"&&S.kind!=="number")throw new Mn(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${S.kind}, ${P.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const S=Vn(_),P=Vn(b);if(S.kind!=="string"||P.kind!=="string")return n(v,_,b)}return this.collator?a(v,_,b,this.collator.evaluate(v)):n(v,_,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Sg=Ha("==",function(o,n,a){return n===a},Pu),Qd=Ha("!=",function(o,n,a){return n!==a},function(o,n,a,u){return!Pu(0,n,a,u)}),ef=Ha("<",function(o,n,a){return n<a},function(o,n,a,u){return u.compare(n,a)<0}),Cg=Ha(">",function(o,n,a){return n>a},function(o,n,a,u){return u.compare(n,a)>0}),Eg=Ha("<=",function(o,n,a){return n<=a},function(o,n,a,u){return u.compare(n,a)<=0}),Tg=Ha(">=",function(o,n,a){return n>=a},function(o,n,a,u){return u.compare(n,a)>=0});class Yl{constructor(n,a,u){this.type=Fr,this.locale=u,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const u=n[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const f=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,It);if(!f)return null;const v=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,It);if(!v)return null;let _=null;return u.locale&&(_=a.parse(u.locale,1,Bt),!_)?null:new Yl(f,v,_)}evaluate(n){return new _u(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}class Iu{constructor(n,a,u,f,v){this.type=Bt,this.number=n,this.locale=a,this.currency=u,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const u=a.parse(n[1],1,Je);if(!u)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=a.parse(f.locale,1,Bt),!v))return null;let _=null;if(f.currency&&(_=a.parse(f.currency,1,Bt),!_))return null;let b=null;if(f["min-fraction-digits"]&&(b=a.parse(f["min-fraction-digits"],1,Je),!b))return null;let S=null;return f["max-fraction-digits"]&&(S=a.parse(f["max-fraction-digits"],1,Je),!S)?null:new Iu(u,v,_,b,S)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Jl{constructor(n){this.type=vi,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const u=n[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const f=[];let v=!1;for(let _=1;_<=n.length-1;++_){const b=n[_];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let S=null;if(b["font-scale"]&&(S=a.parse(b["font-scale"],1,Je),!S))return null;let P=null;if(b["text-font"]&&(P=a.parse(b["text-font"],1,V(Bt)),!P))return null;let R=null;if(b["text-color"]&&(R=a.parse(b["text-color"],1,mr),!R))return null;const L=f[f.length-1];L.scale=S,L.font=P,L.textColor=R}else{const S=a.parse(n[_],1,Ct);if(!S)return null;const P=S.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:S,scale:null,font:null,textColor:null})}}return new Jl(f)}evaluate(n){return new ri(this.sections.map(a=>{const u=a.content.evaluate(n);return Vn(u)===re?new xu("",u,null,null,null):new xu(Os(u),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class ku{constructor(n){this.type=re,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const u=a.parse(n[1],1,Bt);return u?new ku(u):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),u=xi.fromString(a);return u&&n.availableImages&&(u.available=n.availableImages.indexOf(a)>-1),u}eachChild(n){n(this.input)}outputDefined(){return!1}}class $s{constructor(n){this.type=Je,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const u=a.parse(n[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${W(u.type)} instead.`):new $s(u):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Mn(`Expected value to be of type string or array, but found ${W(Vn(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const ai=8192;function nn(o,n){const a=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(a*f*ai),Math.round(u*f*ai)]}function Mu(o,n){const a=Math.pow(2,n.z);return[(f=(o[0]/ai+n.x)/a,360*f-180),(u=(o[1]/ai+n.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,f}function Vs(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Us(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Pg(o,n,a){const u=o[0]-n[0],f=o[1]-n[1],v=o[0]-a[0],_=o[1]-a[1];return u*_-v*f==0&&u*v<=0&&f*_<=0}function Ql(o,n,a,u){return(f=[u[0]-a[0],u[1]-a[1]])[0]*(v=[n[0]-o[0],n[1]-o[1]])[1]-f[1]*v[0]!=0&&!(!nf(o,n,a,u)||!nf(a,u,o,n));var f,v}function Ig(o,n,a){for(const u of a)for(let f=0;f<u.length-1;++f)if(Ql(o,n,u[f],u[f+1]))return!0;return!1}function Wa(o,n,a=!1){let u=!1;for(const b of n)for(let S=0;S<b.length-1;S++){if(Pg(o,b[S],b[S+1]))return a;(v=b[S])[1]>(f=o)[1]!=(_=b[S+1])[1]>f[1]&&f[0]<(_[0]-v[0])*(f[1]-v[1])/(_[1]-v[1])+v[0]&&(u=!u)}var f,v,_;return u}function kg(o,n){for(const a of n)if(Wa(o,a))return!0;return!1}function tf(o,n){for(const a of o)if(!Wa(a,n))return!1;for(let a=0;a<o.length-1;++a)if(Ig(o[a],o[a+1],n))return!1;return!0}function Mg(o,n){for(const a of n)if(tf(o,a))return!0;return!1}function nf(o,n,a,u){const f=u[0]-a[0],v=u[1]-a[1],_=(o[0]-a[0])*v-f*(o[1]-a[1]),b=(n[0]-a[0])*v-f*(n[1]-a[1]);return _>0&&b<0||_<0&&b>0}function Au(o,n,a){const u=[];for(let f=0;f<o.length;f++){const v=[];for(let _=0;_<o[f].length;_++){const b=nn(o[f][_],a);Vs(n,b),v.push(b)}u.push(v)}return u}function rf(o,n,a){const u=[];for(let f=0;f<o.length;f++){const v=Au(o[f],n,a);u.push(v)}return u}function of(o,n,a,u){if(o[0]<a[0]||o[0]>a[2]){const f=.5*u;let v=o[0]-a[0]>f?-u:a[0]-o[0]>f?u:0;v===0&&(v=o[0]-a[2]>f?-u:a[2]-o[0]>f?u:0),o[0]+=v}Vs(n,o)}function af(o,n,a,u){const f=Math.pow(2,u.z)*ai,v=[u.x*ai,u.y*ai],_=[];for(const b of o)for(const S of b){const P=[S.x+v[0],S.y+v[1]];of(P,n,a,f),_.push(P)}return _}function sf(o,n,a,u){const f=Math.pow(2,u.z)*ai,v=[u.x*ai,u.y*ai],_=[];for(const S of o){const P=[];for(const R of S){const L=[R.x+v[0],R.y+v[1]];Vs(n,L),P.push(L)}_.push(P)}if(n[2]-n[0]<=f/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const S of _)for(const P of S)of(P,n,a,f)}var b;return _}class ua{constructor(n,a){this.type=It,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xo(n[1])){const u=n[1];if(u.type==="FeatureCollection"){const f=[];for(const v of u.features){const{type:_,coordinates:b}=v.geometry;_==="Polygon"&&f.push(b),_==="MultiPolygon"&&f.push(...b)}if(f.length)return new ua(u,{type:"MultiPolygon",coordinates:f})}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new ua(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new ua(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(u.type==="Polygon"){const b=Au(u.coordinates,v,_),S=af(a.geometry(),f,v,_);if(!Us(f,v))return!1;for(const P of S)if(!Wa(P,b))return!1}if(u.type==="MultiPolygon"){const b=rf(u.coordinates,v,_),S=af(a.geometry(),f,v,_);if(!Us(f,v))return!1;for(const P of S)if(!kg(P,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=a.canonicalID();if(u.type==="Polygon"){const b=Au(u.coordinates,v,_),S=sf(a.geometry(),f,v,_);if(!Us(f,v))return!1;for(const P of S)if(!tf(P,b))return!1}if(u.type==="MultiPolygon"){const b=rf(u.coordinates,v,_),S=sf(a.geometry(),f,v,_);if(!Us(f,v))return!1;for(const P of S)if(!Mg(P,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let lf=class{constructor(o=[],n=Ag){if(this.data=o,this.length=this.data.length,this.compare=n,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:n,compare:a}=this,u=n[o];for(;o>0;){const f=o-1>>1,v=n[f];if(a(u,v)>=0)break;n[o]=v,o=f}n[o]=u}_down(o){const{data:n,compare:a}=this,u=this.length>>1,f=n[o];for(;o<u;){let v=1+(o<<1),_=n[v];const b=v+1;if(b<this.length&&a(n[b],_)<0&&(v=b,_=n[b]),a(_,f)>=0)break;n[o]=_,o=v}n[o]=f}};function Ag(o,n){return o<n?-1:o>n?1:0}function zg(o,n,a,u,f){cf(o,n,a,u||o.length-1,f||Rg)}function cf(o,n,a,u,f){for(;u>a;){if(u-a>600){var v=u-a+1,_=n-a+1,b=Math.log(v),S=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*S*(v-S)/v)*(_-v/2<0?-1:1);cf(o,n,Math.max(a,Math.floor(n-_*S/v+P)),Math.min(u,Math.floor(n+(v-_)*S/v+P)),f)}var R=o[n],L=a,O=u;for(Hs(o,a,n),f(o[u],R)>0&&Hs(o,a,u);L<O;){for(Hs(o,L,O),L++,O--;f(o[L],R)<0;)L++;for(;f(o[O],R)>0;)O--}f(o[a],R)===0?Hs(o,a,O):Hs(o,++O,u),O<=n&&(a=O+1),n<=O&&(u=O-1)}}function Hs(o,n,a){var u=o[n];o[n]=o[a],o[a]=u}function Rg(o,n){return o<n?-1:o>n?1:0}function ec(o,n){if(o.length<=1)return[o];const a=[];let u,f;for(const v of o){const _=Fg(v);_!==0&&(v.area=Math.abs(_),f===void 0&&(f=_<0),f===_<0?(u&&a.push(u),u=[v]):u.push(v))}if(u&&a.push(u),n>1)for(let v=0;v<a.length;v++)a[v].length<=n||(zg(a[v],n,1,a[v].length-1,Lg),a[v]=a[v].slice(0,n));return a}function Lg(o,n){return n.area-o.area}function Fg(o){let n=0;for(let a,u,f=0,v=o.length,_=v-1;f<v;_=f++)a=o[f],u=o[_],n+=(u.x-a.x)*(a.y+u.y);return n}const uf=1/298.257223563,hf=uf*(2-uf),df=Math.PI/180;class zu{constructor(n){const a=6378.137*df*1e3,u=Math.cos(n*df),f=1/(1-hf*(1-u*u)),v=Math.sqrt(f);this.kx=a*v*u,this.ky=a*v*f*(1-hf)}distance(n,a){const u=this.wrap(n[0]-a[0])*this.kx,f=(n[1]-a[1])*this.ky;return Math.sqrt(u*u+f*f)}pointOnLine(n,a){let u,f,v,_,b=1/0;for(let S=0;S<n.length-1;S++){let P=n[S][0],R=n[S][1],L=this.wrap(n[S+1][0]-P)*this.kx,O=(n[S+1][1]-R)*this.ky,$=0;L===0&&O===0||($=(this.wrap(a[0]-P)*this.kx*L+(a[1]-R)*this.ky*O)/(L*L+O*O),$>1?(P=n[S+1][0],R=n[S+1][1]):$>0&&(P+=L/this.kx*$,R+=O/this.ky*$)),L=this.wrap(a[0]-P)*this.kx,O=(a[1]-R)*this.ky;const G=L*L+O*O;G<b&&(b=G,u=P,f=R,v=S,_=$)}return{point:[u,f],index:v,t:Math.max(0,Math.min(1,_))}}wrap(n){for(;n<-180;)n+=360;for(;n>180;)n-=360;return n}}function ff(o,n){return n[0]-o[0]}function qa(o){return o[1]-o[0]+1}function bo(o,n){return o[1]>=o[0]&&o[1]<n}function Ru(o,n){if(o[0]>o[1])return[null,null];const a=qa(o);if(n){if(a===2)return[o,null];const f=Math.floor(a/2);return[[o[0],o[0]+f],[o[0]+f,o[1]]]}if(a===1)return[o,null];const u=Math.floor(a/2)-1;return[[o[0],o[0]+u],[o[0]+u+1,o[1]]]}function Lu(o,n){if(!bo(n,o.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let u=n[0];u<=n[1];++u)Vs(a,o[u]);return a}function Fu(o){const n=[1/0,1/0,-1/0,-1/0];for(const a of o)for(const u of a)Vs(n,u);return n}function An(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function Du(o,n,a){if(!An(o)||!An(n))return NaN;let u=0,f=0;return o[2]<n[0]&&(u=n[0]-o[2]),o[0]>n[2]&&(u=o[0]-n[2]),o[1]>n[3]&&(f=o[1]-n[3]),o[3]<n[1]&&(f=n[1]-o[3]),a.distance([0,0],[u,f])}function $t(o,n,a){const u=a.pointOnLine(n,o);return a.distance(o,u.point)}function Ws(o,n,a,u,f){const v=Math.min($t(o,[a,u],f),$t(n,[a,u],f)),_=Math.min($t(a,[o,n],f),$t(u,[o,n],f));return Math.min(v,_)}function wn(o,n,a,u,f){if(!bo(n,o.length)||!bo(u,a.length))return 1/0;let v=1/0;for(let _=n[0];_<n[1];++_){const b=o[_],S=o[_+1];for(let P=u[0];P<u[1];++P){const R=a[P],L=a[P+1];if(Ql(b,S,R,L))return 0;v=Math.min(v,Ws(b,S,R,L,f))}}return v}function gn(o,n,a,u,f){if(!bo(n,o.length)||!bo(u,a.length))return NaN;let v=1/0;for(let _=n[0];_<=n[1];++_)for(let b=u[0];b<=u[1];++b)if(v=Math.min(v,f.distance(o[_],a[b])),v===0)return v;return v}function tc(o,n,a){if(Wa(o,n,!0))return 0;let u=1/0;for(const f of n){const v=f[0],_=f[f.length-1];if(v!==_&&(u=Math.min(u,$t(o,[_,v],a)),u===0))return u;const b=a.pointOnLine(f,o);if(u=Math.min(u,a.distance(o,b.point)),u===0)return u}return u}function pf(o,n,a,u){if(!bo(n,o.length))return NaN;for(let v=n[0];v<=n[1];++v)if(Wa(o[v],a,!0))return 0;let f=1/0;for(let v=n[0];v<n[1];++v){const _=o[v],b=o[v+1];for(const S of a)for(let P=0,R=S.length,L=R-1;P<R;L=P++){const O=S[L],$=S[P];if(Ql(_,b,O,$))return 0;f=Math.min(f,Ws(_,b,O,$,u))}}return f}function mf(o,n){for(const a of o)for(const u of a)if(Wa(u,n,!0))return!0;return!1}function Dg(o,n,a,u=1/0){const f=Fu(o),v=Fu(n);if(u!==1/0&&Du(f,v,a)>=u)return u;if(Us(f,v)){if(mf(o,n))return 0}else if(mf(n,o))return 0;let _=1/0;for(const b of o)for(let S=0,P=b.length,R=P-1;S<P;R=S++){const L=b[R],O=b[S];for(const $ of n)for(let G=0,X=$.length,ie=X-1;G<X;ie=G++){const le=$[ie],be=$[G];if(Ql(L,O,le,be))return 0;_=Math.min(_,Ws(L,O,le,be,a))}}return _}function gf(o,n,a,u,f,v){if(!v)return;const _=Du(Lu(u,v),f,a);_<n&&o.push([_,v,[0,0]])}function nc(o,n,a,u,f,v,_){if(!v||!_)return;const b=Du(Lu(u,v),Lu(f,_),a);b<n&&o.push([b,v,_])}function qs(o,n,a,u,f=1/0){let v=Math.min(u.distance(o[0],a[0][0]),f);if(v===0)return v;const _=new lf([[0,[0,o.length-1],[0,0]]],ff),b=Fu(a);for(;_.length>0;){const S=_.pop();if(S[0]>=v)continue;const P=S[1],R=n?50:100;if(qa(P)<=R){if(!bo(P,o.length))return NaN;if(n){const L=pf(o,P,a,u);if(isNaN(L)||L===0)return L;v=Math.min(v,L)}else for(let L=P[0];L<=P[1];++L){const O=tc(o[L],a,u);if(v=Math.min(v,O),v===0)return 0}}else{const L=Ru(P,n);gf(_,v,u,o,b,L[0]),gf(_,v,u,o,b,L[1])}}return v}function Gs(o,n,a,u,f,v=1/0){let _=Math.min(v,f.distance(o[0],a[0]));if(_===0)return _;const b=new lf([[0,[0,o.length-1],[0,a.length-1]]],ff);for(;b.length>0;){const S=b.pop();if(S[0]>=_)continue;const P=S[1],R=S[2],L=n?50:100,O=u?50:100;if(qa(P)<=L&&qa(R)<=O){if(!bo(P,o.length)&&bo(R,a.length))return NaN;let $;if(n&&u)$=wn(o,P,a,R,f),_=Math.min(_,$);else if(n&&!u){const G=o.slice(P[0],P[1]+1);for(let X=R[0];X<=R[1];++X)if($=$t(a[X],G,f),_=Math.min(_,$),_===0)return _}else if(!n&&u){const G=a.slice(R[0],R[1]+1);for(let X=P[0];X<=P[1];++X)if($=$t(o[X],G,f),_=Math.min(_,$),_===0)return _}else $=gn(o,P,a,R,f),_=Math.min(_,$)}else{const $=Ru(P,n),G=Ru(R,u);nc(b,_,f,o,a,$[0],G[0]),nc(b,_,f,o,a,$[0],G[1]),nc(b,_,f,o,a,$[1],G[0]),nc(b,_,f,o,a,$[1],G[1])}}return _}function rc(o){return o.type==="MultiPolygon"?o.coordinates.map(n=>({type:"Polygon",coordinates:n})):o.type==="MultiLineString"?o.coordinates.map(n=>({type:"LineString",coordinates:n})):o.type==="MultiPoint"?o.coordinates.map(n=>({type:"Point",coordinates:n})):[o]}class Uo{constructor(n,a){this.type=Je,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${n.length-1} instead.`);if(xo(n[1])){const u=n[1];if(u.type==="FeatureCollection")return new Uo(u,u.features.map(f=>rc(f.geometry)).flat());if(u.type==="Feature")return new Uo(u,rc(u.geometry));if("type"in u&&"coordinates"in u)return new Uo(u,rc(u))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,u){const f=a.geometry(),v=f.flat().map(S=>Mu([S.x,S.y],a.canonical));if(f.length===0)return NaN;const _=new zu(v[0][1]);let b=1/0;for(const S of u){switch(S.type){case"Point":b=Math.min(b,Gs(v,!1,[S.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,Gs(v,!1,S.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,qs(v,!1,S.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,u){const f=a.geometry(),v=f.flat().map(S=>Mu([S.x,S.y],a.canonical));if(f.length===0)return NaN;const _=new zu(v[0][1]);let b=1/0;for(const S of u){switch(S.type){case"Point":b=Math.min(b,Gs(v,!0,[S.coordinates],!1,_,b));break;case"LineString":b=Math.min(b,Gs(v,!0,S.coordinates,!0,_,b));break;case"Polygon":b=Math.min(b,qs(v,!0,S.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries);if(n.geometryType()==="Polygon")return function(a,u){const f=a.geometry();if(f.length===0||f[0].length===0)return NaN;const v=ec(f,0).map(S=>S.map(P=>P.map(R=>Mu([R.x,R.y],a.canonical)))),_=new zu(v[0][0][0][1]);let b=1/0;for(const S of u)for(const P of v){switch(S.type){case"Point":b=Math.min(b,qs([S.coordinates],!1,P,_,b));break;case"LineString":b=Math.min(b,qs(S.coordinates,!0,P,_,b));break;case"Polygon":b=Math.min(b,Dg(P,S.coordinates,_,b))}if(b===0)return b}return b}(n,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ho={"==":Sg,"!=":Qd,">":Cg,"<":ef,">=":Tg,"<=":Eg,array:Ri,at:wu,boolean:Ri,case:Gl,coalesce:Xl,collator:Yl,format:Jl,image:ku,in:ql,"index-of":Bs,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:$s,let:Wl,literal:sa,match:Su,number:Ri,"number-format":Iu,object:Ri,slice:Ns,step:js,string:Ri,"to-boolean":eo,"to-color":eo,"to-number":eo,"to-string":eo,var:Ua,within:ua,distance:Uo};class bi{constructor(n,a,u,f){this.name=n,this.type=a,this._evaluate=u,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const u=n[0],f=bi.definitions[u];if(!f)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,_=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=_.filter(([P])=>!Array.isArray(P)||P.length===n.length-1);let S=null;for(const[P,R]of b){S=new tn(a.registry,ic,a.path,null,a.scope);const L=[];let O=!1;for(let $=1;$<n.length;$++){const G=n[$],X=Array.isArray(P)?P[$-1]:P.type,ie=S.parse(G,1+L.length,X);if(!ie){O=!0;break}L.push(ie)}if(!O)if(Array.isArray(P)&&P.length!==L.length)S.error(`Expected ${P.length} arguments, but found ${L.length} instead.`);else{for(let $=0;$<L.length;$++){const G=Array.isArray(P)?P[$]:P.type,X=L[$];S.concat($+1).checkSubtype(G,X.type)}if(S.errors.length===0)return new bi(u,v,R,L)}}if(b.length===1)a.errors.push(...S.errors);else{const P=(b.length?b:_).map(([L])=>{return O=L,Array.isArray(O)?`(${O.map(W).join(", ")})`:`(${W(O.type)}...)`;var O}).join(" | "),R=[];for(let L=1;L<n.length;L++){const O=a.parse(n[L],1+R.length);if(!O)return null;R.push(W(O.type))}a.error(`Expected arguments of type ${P}, but found (${R.join(", ")}) instead.`)}return null}static register(n,a){bi.definitions=a;for(const u in a)n[u]=bi}}function yf(o,[n,a,u,f]){n=n.evaluate(o),a=a.evaluate(o),u=u.evaluate(o);const v=f?f.evaluate(o):1,_=Yd(n,a,u,v);if(_)throw new Mn(_);return new an(n/255,a/255,u/255,v,!1)}function vf(o,n){return o in n}function Ou(o,n){const a=n[o];return a===void 0?null:a}function ha(o){return{type:o}}function ic(o){if(o instanceof Ua)return ic(o.boundExpression);if(o instanceof bi&&o.name==="error"||o instanceof Yl||o instanceof ua||o instanceof Uo)return!1;const n=o instanceof eo||o instanceof Ri;let a=!0;return o.eachChild(u=>{a=n?a&&ic(u):a&&u instanceof sa}),!!a&&oc(o)&&Ks(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oc(o){if(o instanceof bi&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ua||o instanceof Uo)return!1;let n=!0;return o.eachChild(a=>{n&&!oc(a)&&(n=!1)}),n}function Zs(o){if(o instanceof bi&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(a=>{n&&!Zs(a)&&(n=!1)}),n}function Ks(o,n){if(o instanceof bi&&n.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(u=>{a&&!Ks(u,n)&&(a=!1)}),a}function Bu(o){return{result:"success",value:o}}function wo(o){return{result:"error",value:o}}function Ga(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Nu(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function ju(o){return!!o.expression&&o.expression.interpolated}function Xt(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function da(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function ac(o){return o}function $u(o,n){const a=n.type==="color",u=o.stops&&typeof o.stops[0][0]=="object",f=u||!(u||o.property!==void 0),v=o.type||(ju(n)?"exponential":"interval");if(a||n.type==="padding"){const R=a?an.parse:ii.parse;(o=br({},o)).stops&&(o.stops=o.stops.map(L=>[L[0],R(L[1])])),o.default=R(o.default?o.default:n.default)}if(o.colorSpace&&(_=o.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var _;let b,S,P;if(v==="exponential")b=Xs;else if(v==="interval")b=xf;else if(v==="categorical"){b=_f,S=Object.create(null);for(const R of o.stops)S[R[0]]=R[1];P=typeof o.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Og}if(u){const R={},L=[];for(let G=0;G<o.stops.length;G++){const X=o.stops[G],ie=X[0].zoom;R[ie]===void 0&&(R[ie]={zoom:ie,type:o.type,property:o.property,default:o.default,stops:[]},L.push(ie)),R[ie].stops.push([X[0].value,X[1]])}const O=[];for(const G of L)O.push([R[G].zoom,$u(R[G],n)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:oi.interpolationFactor.bind(void 0,$),zoomStops:O.map(G=>G[0]),evaluate:({zoom:G},X)=>Xs({stops:O,base:o.base},n,G).evaluate(G,X)}}if(f){const R=v==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:oi.interpolationFactor.bind(void 0,R),zoomStops:o.stops.map(L=>L[0]),evaluate:({zoom:L})=>b(o,n,L,S,P)}}return{kind:"source",evaluate(R,L){const O=L&&L.properties?L.properties[o.property]:void 0;return O===void 0?fa(o.default,n.default):b(o,n,O,S,P)}}}function fa(o,n,a){return o!==void 0?o:n!==void 0?n:a!==void 0?a:void 0}function _f(o,n,a,u,f){return fa(typeof a===f?u[a]:void 0,o.default,n.default)}function xf(o,n,a){if(Xt(a)!=="number")return fa(o.default,n.default);const u=o.stops.length;if(u===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[u-1][0])return o.stops[u-1][1];const f=Zl(o.stops.map(v=>v[0]),a);return o.stops[f][1]}function Xs(o,n,a){const u=o.base!==void 0?o.base:1;if(Xt(a)!=="number")return fa(o.default,n.default);const f=o.stops.length;if(f===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const v=Zl(o.stops.map(R=>R[0]),a),_=function(R,L,O,$){const G=$-O,X=R-O;return G===0?0:L===1?X/G:(Math.pow(L,X)-1)/(Math.pow(L,G)-1)}(a,u,o.stops[v][0],o.stops[v+1][0]),b=o.stops[v][1],S=o.stops[v+1][1],P=Dr[n.type]||ac;return typeof b.evaluate=="function"?{evaluate(...R){const L=b.evaluate.apply(void 0,R),O=S.evaluate.apply(void 0,R);if(L!==void 0&&O!==void 0)return P(L,O,_,o.colorSpace)}}:P(b,S,_,o.colorSpace)}function Og(o,n,a){switch(n.type){case"color":a=an.parse(a);break;case"formatted":a=ri.fromString(a.toString());break;case"resolvedImage":a=xi.fromString(a.toString());break;case"padding":a=ii.parse(a);break;default:Xt(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return fa(a,o.default,n.default)}bi.register(Ho,{error:[{kind:"error"},[Bt],(o,[n])=>{throw new Mn(n.evaluate(o))}],typeof:[Bt,[Ct],(o,[n])=>W(Vn(n.evaluate(o)))],"to-rgba":[V(Je,4),[mr],(o,[n])=>{const[a,u,f,v]=n.evaluate(o).rgb;return[255*a,255*u,255*f,v]}],rgb:[mr,[Je,Je,Je],yf],rgba:[mr,[Je,Je,Je,Je],yf],has:{type:It,overloads:[[[Bt],(o,[n])=>vf(n.evaluate(o),o.properties())],[[Bt,lr],(o,[n,a])=>vf(n.evaluate(o),a.evaluate(o))]]},get:{type:Ct,overloads:[[[Bt],(o,[n])=>Ou(n.evaluate(o),o.properties())],[[Bt,lr],(o,[n,a])=>Ou(n.evaluate(o),a.evaluate(o))]]},"feature-state":[Ct,[Bt],(o,[n])=>Ou(n.evaluate(o),o.featureState||{})],properties:[lr,[],o=>o.properties()],"geometry-type":[Bt,[],o=>o.geometryType()],id:[Ct,[],o=>o.id()],zoom:[Je,[],o=>o.globals.zoom],"heatmap-density":[Je,[],o=>o.globals.heatmapDensity||0],"line-progress":[Je,[],o=>o.globals.lineProgress||0],accumulated:[Ct,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Je,ha(Je),(o,n)=>{let a=0;for(const u of n)a+=u.evaluate(o);return a}],"*":[Je,ha(Je),(o,n)=>{let a=1;for(const u of n)a*=u.evaluate(o);return a}],"-":{type:Je,overloads:[[[Je,Je],(o,[n,a])=>n.evaluate(o)-a.evaluate(o)],[[Je],(o,[n])=>-n.evaluate(o)]]},"/":[Je,[Je,Je],(o,[n,a])=>n.evaluate(o)/a.evaluate(o)],"%":[Je,[Je,Je],(o,[n,a])=>n.evaluate(o)%a.evaluate(o)],ln2:[Je,[],()=>Math.LN2],pi:[Je,[],()=>Math.PI],e:[Je,[],()=>Math.E],"^":[Je,[Je,Je],(o,[n,a])=>Math.pow(n.evaluate(o),a.evaluate(o))],sqrt:[Je,[Je],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[Je,[Je],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[Je,[Je],(o,[n])=>Math.log(n.evaluate(o))],log2:[Je,[Je],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[Je,[Je],(o,[n])=>Math.sin(n.evaluate(o))],cos:[Je,[Je],(o,[n])=>Math.cos(n.evaluate(o))],tan:[Je,[Je],(o,[n])=>Math.tan(n.evaluate(o))],asin:[Je,[Je],(o,[n])=>Math.asin(n.evaluate(o))],acos:[Je,[Je],(o,[n])=>Math.acos(n.evaluate(o))],atan:[Je,[Je],(o,[n])=>Math.atan(n.evaluate(o))],min:[Je,ha(Je),(o,n)=>Math.min(...n.map(a=>a.evaluate(o)))],max:[Je,ha(Je),(o,n)=>Math.max(...n.map(a=>a.evaluate(o)))],abs:[Je,[Je],(o,[n])=>Math.abs(n.evaluate(o))],round:[Je,[Je],(o,[n])=>{const a=n.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Je,[Je],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[Je,[Je],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[It,[Bt,Ct],(o,[n,a])=>o.properties()[n.value]===a.value],"filter-id-==":[It,[Ct],(o,[n])=>o.id()===n.value],"filter-type-==":[It,[Bt],(o,[n])=>o.geometryType()===n.value],"filter-<":[It,[Bt,Ct],(o,[n,a])=>{const u=o.properties()[n.value],f=a.value;return typeof u==typeof f&&u<f}],"filter-id-<":[It,[Ct],(o,[n])=>{const a=o.id(),u=n.value;return typeof a==typeof u&&a<u}],"filter->":[It,[Bt,Ct],(o,[n,a])=>{const u=o.properties()[n.value],f=a.value;return typeof u==typeof f&&u>f}],"filter-id->":[It,[Ct],(o,[n])=>{const a=o.id(),u=n.value;return typeof a==typeof u&&a>u}],"filter-<=":[It,[Bt,Ct],(o,[n,a])=>{const u=o.properties()[n.value],f=a.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[It,[Ct],(o,[n])=>{const a=o.id(),u=n.value;return typeof a==typeof u&&a<=u}],"filter->=":[It,[Bt,Ct],(o,[n,a])=>{const u=o.properties()[n.value],f=a.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[It,[Ct],(o,[n])=>{const a=o.id(),u=n.value;return typeof a==typeof u&&a>=u}],"filter-has":[It,[Ct],(o,[n])=>n.value in o.properties()],"filter-has-id":[It,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[It,[V(Bt)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[It,[V(Ct)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[It,[Bt,V(Ct)],(o,[n,a])=>a.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[It,[Bt,V(Ct)],(o,[n,a])=>function(u,f,v,_){for(;v<=_;){const b=v+_>>1;if(f[b]===u)return!0;f[b]>u?_=b-1:v=b+1}return!1}(o.properties()[n.value],a.value,0,a.value.length-1)],all:{type:It,overloads:[[[It,It],(o,[n,a])=>n.evaluate(o)&&a.evaluate(o)],[ha(It),(o,n)=>{for(const a of n)if(!a.evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(o,[n,a])=>n.evaluate(o)||a.evaluate(o)],[ha(It),(o,n)=>{for(const a of n)if(a.evaluate(o))return!0;return!1}]]},"!":[It,[It],(o,[n])=>!n.evaluate(o)],"is-supported-script":[It,[Bt],(o,[n])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(n.evaluate(o))}],upcase:[Bt,[Bt],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Bt,[Bt],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Bt,ha(Ct),(o,n)=>n.map(a=>Os(a.evaluate(o))).join("")],"resolved-locale":[Bt,[Fr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Vu{constructor(n,a){var u;this.expression=n,this._warningHistory={},this._evaluator=new Va,this._defaultValue=a?(u=a).type==="color"&&da(u.default)?new an(0,0,0,0):u.type==="color"?an.parse(u.default)||null:u.type==="padding"?ii.parse(u.default)||null:u.type==="variableAnchorOffsetCollection"?Cr.parse(u.default)||null:u.default===void 0?null:u.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,u,f,v,_){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(n,a,u,f,v,_){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Mn(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function sc(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Ho}function lc(o,n){const a=new tn(Ho,ic,[],n?function(f){const v={color:mr,string:Bt,number:Je,enum:Bt,boolean:It,formatted:vi,padding:In,resolvedImage:re,variableAnchorOffsetCollection:j};return f.type==="array"?V(v[f.value]||Ct,f.length):v[f.type]}(n):void 0),u=a.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?Bu(new Vu(u,n)):wo(a.errors)}class Uu{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Zs(a.expression)}evaluateWithoutErrorHandling(n,a,u,f,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,f,v,_)}evaluate(n,a,u,f,v,_){return this._styleExpression.evaluate(n,a,u,f,v,_)}}class Za{constructor(n,a,u,f){this.kind=n,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Zs(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,a,u,f,v,_){return this._styleExpression.evaluateWithoutErrorHandling(n,a,u,f,v,_)}evaluate(n,a,u,f,v,_){return this._styleExpression.evaluate(n,a,u,f,v,_)}interpolationFactor(n,a,u){return this.interpolationType?oi.interpolationFactor(this.interpolationType,n,a,u):0}}function Ys(o,n){const a=lc(o,n);if(a.result==="error")return a;const u=a.value.expression,f=oc(u);if(!f&&!Ga(n))return wo([new wr("","data expressions not supported")]);const v=Ks(u,["zoom"]);if(!v&&!Nu(n))return wo([new wr("","zoom expressions not supported")]);const _=Wo(u);return _||v?_ instanceof wr?wo([_]):_ instanceof oi&&!ju(n)?wo([new wr("",'"interpolate" expressions cannot be used with this property')]):Bu(_?new Za(f?"camera":"composite",a.value,_.labels,_ instanceof oi?_.interpolation:void 0):new Uu(f?"constant":"source",a.value)):wo([new wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Er{constructor(n,a){this._parameters=n,this._specification=a,br(this,$u(this._parameters,this._specification))}static deserialize(n){return new Er(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Wo(o){let n=null;if(o instanceof Wl)n=Wo(o.result);else if(o instanceof Xl){for(const a of o.args)if(n=Wo(a),n)break}else(o instanceof js||o instanceof oi)&&o.input instanceof bi&&o.input.name==="zoom"&&(n=o);return n instanceof wr||o.eachChild(a=>{const u=Wo(a);u instanceof wr?n=u:!n&&u?n=new wr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&u&&n!==u&&(n=new wr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function cc(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!cc(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Bg={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hu(o){if(o==null)return{filter:()=>!0,needGeometry:!1};cc(o)||(o=Ka(o));const n=lc(o,Bg);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,u,f)=>n.value.evaluate(a,u,{},f),needGeometry:Wu(o)}}function Js(o,n){return o<n?-1:o>n?1:0}function Wu(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let n=1;n<o.length;n++)if(Wu(o[n]))return!0;return!1}function Ka(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?qu(o[1],o[2],"=="):n==="!="?qo(qu(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?qu(o[1],o[2],n):n==="any"?(a=o.slice(1),["any"].concat(a.map(Ka))):n==="all"?["all"].concat(o.slice(1).map(Ka)):n==="none"?["all"].concat(o.slice(1).map(Ka).map(qo)):n==="in"?uc(o[1],o.slice(2)):n==="!in"?qo(uc(o[1],o.slice(2))):n==="has"?bf(o[1]):n!=="!has"||qo(bf(o[1]));var a}function qu(o,n,a){switch(o){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,o,n]}}function uc(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",o,["literal",n.sort(Js)]]:["filter-in-small",o,["literal",n]]}}function bf(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function qo(o){return["!",o]}function Gu(o){const n=typeof o;if(n==="number"||n==="boolean"||n==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let f="[";for(const v of o)f+=`${Gu(v)},`;return`${f}]`}const a=Object.keys(o).sort();let u="{";for(let f=0;f<a.length;f++)u+=`${JSON.stringify(a[f])}:${Gu(o[a[f]])},`;return`${u}}`}function Zu(o){let n="";for(const a of pr)n+=`/${Gu(o[a])}`;return n}function Ku(o){const n=o.value;return n?[new Qe(o.key,n,"constants have been deprecated as of v8")]:[]}function Sn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Go(o){if(Array.isArray(o))return o.map(Go);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const a in o)n[a]=Go(o[a]);return n}return Sn(o)}function si(o){const n=o.key,a=o.value,u=o.valueSpec||{},f=o.objectElementValidators||{},v=o.style,_=o.styleSpec,b=o.validateSpec;let S=[];const P=Xt(a);if(P!=="object")return[new Qe(n,a,`object expected, ${P} found`)];for(const R in a){const L=R.split(".")[0],O=u[L]||u["*"];let $;if(f[L])$=f[L];else if(u[L])$=b;else if(f["*"])$=f["*"];else{if(!u["*"]){S.push(new Qe(n,a[R],`unknown property "${R}"`));continue}$=b}S=S.concat($({key:(n&&`${n}.`)+R,value:a[R],valueSpec:O,style:v,styleSpec:_,object:a,objectKey:R,validateSpec:b},a))}for(const R in u)f[R]||u[R].required&&u[R].default===void 0&&a[R]===void 0&&S.push(new Qe(n,a,`missing required property "${R}"`));return S}function Xu(o){const n=o.value,a=o.valueSpec,u=o.style,f=o.styleSpec,v=o.key,_=o.arrayElementValidator||o.validateSpec;if(Xt(n)!=="array")return[new Qe(v,n,`array expected, ${Xt(n)} found`)];if(a.length&&n.length!==a.length)return[new Qe(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new Qe(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let b={type:a.value,values:a.values};f.$version<7&&(b.function=a.function),Xt(a.value)==="object"&&(b=a.value);let S=[];for(let P=0;P<n.length;P++)S=S.concat(_({array:n,arrayIndex:P,value:n[P],valueSpec:b,validateSpec:o.validateSpec,style:u,styleSpec:f,key:`${v}[${P}]`}));return S}function Qs(o){const n=o.key,a=o.value,u=o.valueSpec;let f=Xt(a);return f==="number"&&a!=a&&(f="NaN"),f!=="number"?[new Qe(n,a,`number expected, ${f} found`)]:"minimum"in u&&a<u.minimum?[new Qe(n,a,`${a} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&a>u.maximum?[new Qe(n,a,`${a} is greater than the maximum value ${u.maximum}`)]:[]}function el(o){const n=o.valueSpec,a=Sn(o.value.type);let u,f,v,_={};const b=a!=="categorical"&&o.value.property===void 0,S=!b,P=Xt(o.value.stops)==="array"&&Xt(o.value.stops[0])==="array"&&Xt(o.value.stops[0][0])==="object",R=si({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function($){if(a==="identity")return[new Qe($.key,$.value,'identity function may not have a "stops" property')];let G=[];const X=$.value;return G=G.concat(Xu({key:$.key,value:X,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:L})),Xt(X)==="array"&&X.length===0&&G.push(new Qe($.key,X,"array must have at least one stop")),G},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:n,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return a==="identity"&&b&&R.push(new Qe(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||R.push(new Qe(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!ju(o.valueSpec)&&R.push(new Qe(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(S&&!Ga(o.valueSpec)?R.push(new Qe(o.key,o.value,"property functions not supported")):b&&!Nu(o.valueSpec)&&R.push(new Qe(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!P||o.value.property!==void 0||R.push(new Qe(o.key,o.value,'"property" property is required')),R;function L($){let G=[];const X=$.value,ie=$.key;if(Xt(X)!=="array")return[new Qe(ie,X,`array expected, ${Xt(X)} found`)];if(X.length!==2)return[new Qe(ie,X,`array length 2 expected, length ${X.length} found`)];if(P){if(Xt(X[0])!=="object")return[new Qe(ie,X,`object expected, ${Xt(X[0])} found`)];if(X[0].zoom===void 0)return[new Qe(ie,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Qe(ie,X,"object stop key must have value")];if(v&&v>Sn(X[0].zoom))return[new Qe(ie,X[0].zoom,"stop zoom values must appear in ascending order")];Sn(X[0].zoom)!==v&&(v=Sn(X[0].zoom),f=void 0,_={}),G=G.concat(si({key:`${ie}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Qs,value:O}}))}else G=G.concat(O({key:`${ie}[0]`,value:X[0],valueSpec:{},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},X));return sc(Go(X[1]))?G.concat([new Qe(`${ie}[1]`,X[1],"expressions are not allowed in function stops.")]):G.concat($.validateSpec({key:`${ie}[1]`,value:X[1],valueSpec:n,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function O($,G){const X=Xt($.value),ie=Sn($.value),le=$.value!==null?$.value:G;if(u){if(X!==u)return[new Qe($.key,le,`${X} stop domain type must match previous stop domain type ${u}`)]}else u=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Qe($.key,le,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&a!=="categorical"){let be=`number expected, ${X} found`;return Ga(n)&&a===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe($.key,le,be)]}return a!=="categorical"||X!=="number"||isFinite(ie)&&Math.floor(ie)===ie?a!=="categorical"&&X==="number"&&f!==void 0&&ie<f?[new Qe($.key,le,"stop domain values must appear in ascending order")]:(f=ie,a==="categorical"&&ie in _?[new Qe($.key,le,"stop domain values must be unique")]:(_[ie]=!0,[])):[new Qe($.key,le,`integer expected, found ${ie}`)]}}function pa(o){const n=(o.expressionContext==="property"?Ys:lc)(Go(o.value),o.valueSpec);if(n.result==="error")return n.value.map(u=>new Qe(`${o.key}${u.key}`,o.value,u.message));const a=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new Qe(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Zs(a))return[new Qe(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Zs(a))return[new Qe(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Ks(a,["zoom","feature-state"]))return[new Qe(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!oc(a))return[new Qe(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xa(o){const n=o.key,a=o.value,u=o.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(Sn(a))===-1&&f.push(new Qe(n,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(Sn(a))===-1&&f.push(new Qe(n,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function hc(o){return cc(Go(o.value))?pa(br({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yu(o)}function Yu(o){const n=o.value,a=o.key;if(Xt(n)!=="array")return[new Qe(a,n,`array expected, ${Xt(n)} found`)];const u=o.styleSpec;let f,v=[];if(n.length<1)return[new Qe(a,n,"filter array must have at least 1 element")];switch(v=v.concat(Xa({key:`${a}[0]`,value:n[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),Sn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Sn(n[1])==="$type"&&v.push(new Qe(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Qe(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Xt(n[1]),f!=="string"&&v.push(new Qe(`${a}[1]`,n[1],`string expected, ${f} found`)));for(let _=2;_<n.length;_++)f=Xt(n[_]),Sn(n[1])==="$type"?v=v.concat(Xa({key:`${a}[${_}]`,value:n[_],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Qe(`${a}[${_}]`,n[_],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)v=v.concat(Yu({key:`${a}[${_}]`,value:n[_],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":f=Xt(n[1]),n.length!==2?v.push(new Qe(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Qe(`${a}[1]`,n[1],`string expected, ${f} found`))}return v}function dc(o,n){const a=o.key,u=o.validateSpec,f=o.style,v=o.styleSpec,_=o.value,b=o.objectKey,S=v[`${n}_${o.layerType}`];if(!S)return[];const P=b.match(/^(.*)-transition$/);if(n==="paint"&&P&&S[P[1]]&&S[P[1]].transition)return u({key:a,value:_,valueSpec:v.transition,style:f,styleSpec:v});const R=o.valueSpec||S[b];if(!R)return[new Qe(a,_,`unknown property "${b}"`)];let L;if(Xt(_)==="string"&&Ga(R)&&!R.tokens&&(L=/^{([^}]+)}$/.exec(_)))return[new Qe(a,_,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const O=[];return o.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&O.push(new Qe(a,_,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&da(Go(_))&&Sn(_.type)==="identity"&&O.push(new Qe(a,_,'"text-font" does not support identity functions'))),O.concat(u({key:o.key,value:_,valueSpec:R,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:b}))}function Ju(o){return dc(o,"paint")}function wf(o){return dc(o,"layout")}function Qu(o){let n=[];const a=o.value,u=o.key,f=o.style,v=o.styleSpec;a.type||a.ref||n.push(new Qe(u,a,'either "type" or "ref" is required'));let _=Sn(a.type);const b=Sn(a.ref);if(a.id){const S=Sn(a.id);for(let P=0;P<o.arrayIndex;P++){const R=f.layers[P];Sn(R.id)===S&&n.push(new Qe(u,a.id,`duplicate layer id "${a.id}", previously used at line ${R.id.__line__}`))}}if("ref"in a){let S;["type","source","source-layer","filter","layout"].forEach(P=>{P in a&&n.push(new Qe(u,a[P],`"${P}" is prohibited for ref layers`))}),f.layers.forEach(P=>{Sn(P.id)===b&&(S=P)}),S?S.ref?n.push(new Qe(u,a.ref,"ref cannot reference another ref layer")):_=Sn(S.type):n.push(new Qe(u,a.ref,`ref layer "${b}" not found`))}else if(_!=="background")if(a.source){const S=f.sources&&f.sources[a.source],P=S&&Sn(S.type);S?P==="vector"&&_==="raster"?n.push(new Qe(u,a.source,`layer "${a.id}" requires a raster source`)):P!=="raster-dem"&&_==="hillshade"?n.push(new Qe(u,a.source,`layer "${a.id}" requires a raster-dem source`)):P==="raster"&&_!=="raster"?n.push(new Qe(u,a.source,`layer "${a.id}" requires a vector source`)):P!=="vector"||a["source-layer"]?P==="raster-dem"&&_!=="hillshade"?n.push(new Qe(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!a.paint||!a.paint["line-gradient"]||P==="geojson"&&S.lineMetrics||n.push(new Qe(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Qe(u,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new Qe(u,a.source,`source "${a.source}" not found`))}else n.push(new Qe(u,a,'missing required property "source"'));return n=n.concat(si({key:u,value:a,valueSpec:v.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${u}.type`,value:a.type,valueSpec:v.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:hc,layout:S=>si({layer:a,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>wf(br({layerType:_},P))}}),paint:S=>si({layer:a,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":P=>Ju(br({layerType:_},P))}})}})),n}function ma(o){const n=o.value,a=o.key,u=Xt(n);return u!=="string"?[new Qe(a,n,`string expected, ${u} found`)]:[]}const eh={promoteId:function({key:o,value:n}){if(Xt(n)==="string")return ma({key:o,value:n});{const a=[];for(const u in n)a.push(...ma({key:`${o}.${u}`,value:n[u]}));return a}}};function th(o){const n=o.value,a=o.key,u=o.styleSpec,f=o.style,v=o.validateSpec;if(!n.type)return[new Qe(a,n,'"type" is required')];const _=Sn(n.type);let b;switch(_){case"vector":case"raster":return b=si({key:a,value:n,valueSpec:u[`source_${_.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:eh,validateSpec:v}),b;case"raster-dem":return b=function(S){var P;const R=(P=S.sourceName)!==null&&P!==void 0?P:"",L=S.value,O=S.styleSpec,$=O.source_raster_dem,G=S.style;let X=[];const ie=Xt(L);if(L===void 0)return X;if(ie!=="object")return X.push(new Qe("source_raster_dem",L,`object expected, ${ie} found`)),X;const le=Sn(L.encoding)==="custom",be=["redFactor","greenFactor","blueFactor","baseShift"],fe=S.value.encoding?`"${S.value.encoding}"`:"Default";for(const _e in L)!le&&be.includes(_e)?X.push(new Qe(_e,L[_e],`In "${R}": "${_e}" is only valid when "encoding" is set to "custom". ${fe} encoding found`)):$[_e]?X=X.concat(S.validateSpec({key:_e,value:L[_e],valueSpec:$[_e],validateSpec:S.validateSpec,style:G,styleSpec:O})):X.push(new Qe(_e,L[_e],`unknown property "${_e}"`));return X}({sourceName:a,value:n,style:o.style,styleSpec:u,validateSpec:v}),b;case"geojson":if(b=si({key:a,value:n,valueSpec:u.source_geojson,style:f,styleSpec:u,validateSpec:v,objectElementValidators:eh}),n.cluster)for(const S in n.clusterProperties){const[P,R]=n.clusterProperties[S],L=typeof P=="string"?[P,["accumulated"],["get",S]]:P;b.push(...pa({key:`${a}.${S}.map`,value:R,validateSpec:v,expressionContext:"cluster-map"})),b.push(...pa({key:`${a}.${S}.reduce`,value:L,validateSpec:v,expressionContext:"cluster-reduce"}))}return b;case"video":return si({key:a,value:n,valueSpec:u.source_video,style:f,validateSpec:v,styleSpec:u});case"image":return si({key:a,value:n,valueSpec:u.source_image,style:f,validateSpec:v,styleSpec:u});case"canvas":return[new Qe(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xa({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:u})}}function nh(o){const n=o.value,a=o.styleSpec,u=a.light,f=o.style;let v=[];const _=Xt(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Qe("light",n,`object expected, ${_} found`)]),v;for(const b in n){const S=b.match(/^(.*)-transition$/);v=v.concat(S&&u[S[1]]&&u[S[1]].transition?o.validateSpec({key:b,value:n[b],valueSpec:a.transition,validateSpec:o.validateSpec,style:f,styleSpec:a}):u[b]?o.validateSpec({key:b,value:n[b],valueSpec:u[b],validateSpec:o.validateSpec,style:f,styleSpec:a}):[new Qe(b,n[b],`unknown property "${b}"`)])}return v}function Sf(o){const n=o.value,a=o.styleSpec,u=a.sky,f=o.style,v=Xt(n);if(n===void 0)return[];if(v!=="object")return[new Qe("sky",n,`object expected, ${v} found`)];let _=[];for(const b in n)_=_.concat(u[b]?o.validateSpec({key:b,value:n[b],valueSpec:u[b],style:f,styleSpec:a}):[new Qe(b,n[b],`unknown property "${b}"`)]);return _}function Cf(o){const n=o.value,a=o.styleSpec,u=a.terrain,f=o.style;let v=[];const _=Xt(n);if(n===void 0)return v;if(_!=="object")return v=v.concat([new Qe("terrain",n,`object expected, ${_} found`)]),v;for(const b in n)v=v.concat(u[b]?o.validateSpec({key:b,value:n[b],valueSpec:u[b],validateSpec:o.validateSpec,style:f,styleSpec:a}):[new Qe(b,n[b],`unknown property "${b}"`)]);return v}function rh(o){let n=[];const a=o.value,u=o.key;if(Array.isArray(a)){const f=[],v=[];for(const _ in a)a[_].id&&f.includes(a[_].id)&&n.push(new Qe(u,a,`all the sprites' ids must be unique, but ${a[_].id} is duplicated`)),f.push(a[_].id),a[_].url&&v.includes(a[_].url)&&n.push(new Qe(u,a,`all the sprites' URLs must be unique, but ${a[_].url} is duplicated`)),v.push(a[_].url),n=n.concat(si({key:`${u}[${_}]`,value:a[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return n}return ma({key:u,value:a})}const ih={"*":()=>[],array:Xu,boolean:function(o){const n=o.value,a=o.key,u=Xt(n);return u!=="boolean"?[new Qe(a,n,`boolean expected, ${u} found`)]:[]},number:Qs,color:function(o){const n=o.key,a=o.value,u=Xt(a);return u!=="string"?[new Qe(n,a,`color expected, ${u} found`)]:an.parse(String(a))?[]:[new Qe(n,a,`color expected, "${a}" found`)]},constants:Ku,enum:Xa,filter:hc,function:el,layer:Qu,object:si,source:th,light:nh,sky:Sf,terrain:Cf,string:ma,formatted:function(o){return ma(o).length===0?[]:pa(o)},resolvedImage:function(o){return ma(o).length===0?[]:pa(o)},padding:function(o){const n=o.key,a=o.value;if(Xt(a)==="array"){if(a.length<1||a.length>4)return[new Qe(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const u={type:"number"};let f=[];for(let v=0;v<a.length;v++)f=f.concat(o.validateSpec({key:`${n}[${v}]`,value:a[v],validateSpec:o.validateSpec,valueSpec:u}));return f}return Qs({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(o){const n=o.key,a=o.value,u=Xt(a),f=o.styleSpec;if(u!=="array"||a.length<1||a.length%2!=0)return[new Qe(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<a.length;_+=2)v=v.concat(Xa({key:`${n}[${_}]`,value:a[_],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(Xu({key:`${n}[${_+1}]`,value:a[_+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:f}));return v},sprite:rh};function Ya(o){const n=o.value,a=o.valueSpec,u=o.styleSpec;return o.validateSpec=Ya,a.expression&&da(Sn(n))?el(o):a.expression&&sc(Go(n))?pa(o):a.type&&ih[a.type]?ih[a.type](o):si(br({},o,{valueSpec:a.type?u[a.type]:a}))}function oh(o){const n=o.value,a=o.key,u=ma(o);return u.length||(n.indexOf("{fontstack}")===-1&&u.push(new Qe(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&u.push(new Qe(a,n,'"glyphs" url must include a "{range}" token'))),u}function Zr(o,n=Ie){let a=[];return a=a.concat(Ya({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,validateSpec:Ya,objectElementValidators:{glyphs:oh,"*":()=>[]}})),o.constants&&(a=a.concat(Ku({key:"constants",value:o.constants,style:o,styleSpec:n,validateSpec:Ya}))),fc(a)}function to(o){return function(n){return o({...n,validateSpec:Ya})}}function fc(o){return[].concat(o).sort((n,a)=>n.line-a.line)}function no(o){return function(...n){return fc(o.apply(this,n))}}Zr.source=no(to(th)),Zr.sprite=no(to(rh)),Zr.glyphs=no(to(oh)),Zr.light=no(to(nh)),Zr.sky=no(to(Sf)),Zr.terrain=no(to(Cf)),Zr.layer=no(to(Qu)),Zr.filter=no(to(hc)),Zr.paintProperty=no(to(Ju)),Zr.layoutProperty=no(to(wf));const tl=Zr,Ef=tl.light,Tf=tl.paintProperty,Pf=tl.layoutProperty;function If(o,n){let a=!1;if(n&&n.length)for(const u of n)o.fire(new rn(new Error(u.message))),a=!0;return a}class nl{constructor(n,a,u){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const _=new Int32Array(this.arrayBuffer);n=_[0],this.d=(a=_[1])+2*(u=_[2]);for(let S=0;S<this.d*this.d;S++){const P=_[3+S],R=_[3+S+1];f.push(P===R?null:_.subarray(P,R))}const b=_[3+f.length+1];this.keys=_.subarray(_[3+f.length],b),this.bboxes=_.subarray(b),this.insert=this._insertReadonly}else{this.d=a+2*u;for(let _=0;_<this.d*this.d;_++)f.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=u,this.scale=a/n,this.uid=0;const v=u/a*n;this.min=-v,this.max=n+v}insert(n,a,u,f,v){this._forEachCell(a,u,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,u,f,v,_){this.cells[v].push(_)}query(n,a,u,f,v){const _=this.min,b=this.max;if(n<=_&&a<=_&&b<=u&&b<=f&&!v)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(n,a,u,f,this._queryCell,S,{},v),S}}_queryCell(n,a,u,f,v,_,b,S){const P=this.cells[v];if(P!==null){const R=this.keys,L=this.bboxes;for(let O=0;O<P.length;O++){const $=P[O];if(b[$]===void 0){const G=4*$;(S?S(L[G+0],L[G+1],L[G+2],L[G+3]):n<=L[G+2]&&a<=L[G+3]&&u>=L[G+0]&&f>=L[G+1])?(b[$]=!0,_.push(R[$])):b[$]=!1}}}}_forEachCell(n,a,u,f,v,_,b,S){const P=this._convertToCellCoord(n),R=this._convertToCellCoord(a),L=this._convertToCellCoord(u),O=this._convertToCellCoord(f);for(let $=P;$<=L;$++)for(let G=R;G<=O;G++){const X=this.d*G+$;if((!S||S(this._convertFromCellCoord($),this._convertFromCellCoord(G),this._convertFromCellCoord($+1),this._convertFromCellCoord(G+1)))&&v.call(this,n,a,u,f,X,_,b,S))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let u=0;for(let _=0;_<this.cells.length;_++)u+=this.cells[_].length;const f=new Int32Array(a+u+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=a;for(let _=0;_<n.length;_++){const b=n[_];f[3+_]=v,f.set(b,v),v+=b.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,a){const u=n.toArrayBuffer();return a&&a.push(u),{buffer:u}}static deserialize(n){return new nl(n.buffer)}}const Zo={};function ht(o,n,a={}){if(Zo[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Zo[o]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}ht("Object",Object),ht("TransferableGridIndex",nl),ht("Color",an),ht("Error",Error),ht("AJAXError",Ht),ht("ResolvedImage",xi),ht("StylePropertyFunction",Er),ht("StyleExpression",Vu,{omit:["_evaluator"]}),ht("ZoomDependentExpression",Za),ht("ZoomConstantExpression",Uu),ht("CompoundExpression",bi,{omit:["_evaluate"]});for(const o in Ho)Ho[o]._classRegistryKey||ht(`Expression_${o}`,Ho[o]);function kf(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function ro(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error)return o;if(kf(o)||Pe(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return n&&n.push(a.buffer),a}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const u of o)a.push(ro(u,n));return a}if(typeof o=="object"){const a=o.constructor,u=a._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${a.name}`);if(!Zo[u])throw new Error(`${u} is not registered.`);const f=a.serialize?a.serialize(o,n):{};if(a.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in o){if(!o.hasOwnProperty(v)||Zo[u].omit.indexOf(v)>=0)continue;const _=o[v];f[v]=Zo[u].shallow.indexOf(v)>=0?_:ro(_,n)}o instanceof Error&&(f.message=o.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(f.$name=u),f}throw new Error("can't serialize object of type "+typeof o)}function rl(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||kf(o)||Pe(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(rl);if(typeof o=="object"){const n=o.$name||"Object";if(!Zo[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=Zo[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(o);const u=Object.create(a.prototype);for(const f of Object.keys(o)){if(f==="$name")continue;const v=o[f];u[f]=Zo[n].shallow.indexOf(f)>=0?v:rl(v)}return u}throw new Error("can't deserialize object of type "+typeof o)}class Mf{constructor(){this.first=!0}update(n,a){const u=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=u,!0))}}const at={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ah(o){for(const n of o)if(sh(n.charCodeAt(0)))return!0;return!1}function Af(o){for(const n of o)if(!Ng(n.charCodeAt(0)))return!1;return!0}function Ng(o){return!(at.Arabic(o)||at["Arabic Supplement"](o)||at["Arabic Extended-A"](o)||at["Arabic Presentation Forms-A"](o)||at["Arabic Presentation Forms-B"](o))}function sh(o){return!(o!==746&&o!==747&&(o<4352||!(at["Bopomofo Extended"](o)||at.Bopomofo(o)||at["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||at["CJK Compatibility Ideographs"](o)||at["CJK Compatibility"](o)||at["CJK Radicals Supplement"](o)||at["CJK Strokes"](o)||!(!at["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||at["CJK Unified Ideographs Extension A"](o)||at["CJK Unified Ideographs"](o)||at["Enclosed CJK Letters and Months"](o)||at["Hangul Compatibility Jamo"](o)||at["Hangul Jamo Extended-A"](o)||at["Hangul Jamo Extended-B"](o)||at["Hangul Jamo"](o)||at["Hangul Syllables"](o)||at.Hiragana(o)||at["Ideographic Description Characters"](o)||at.Kanbun(o)||at["Kangxi Radicals"](o)||at["Katakana Phonetic Extensions"](o)||at.Katakana(o)&&o!==12540||!(!at["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!at["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||at["Unified Canadian Aboriginal Syllabics"](o)||at["Unified Canadian Aboriginal Syllabics Extended"](o)||at["Vertical Forms"](o)||at["Yijing Hexagram Symbols"](o)||at["Yi Syllables"](o)||at["Yi Radicals"](o))))}function Ko(o){return!(sh(o)||function(n){return!!(at["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||at["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||at["Letterlike Symbols"](n)||at["Number Forms"](n)||at["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||at["Control Pictures"](n)&&n!==9251||at["Optical Character Recognition"](n)||at["Enclosed Alphanumerics"](n)||at["Geometric Shapes"](n)||at["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||at["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||at["CJK Symbols and Punctuation"](n)||at.Katakana(n)||at["Private Use Area"](n)||at["CJK Compatibility Forms"](n)||at["Small Form Variants"](n)||at["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function lh(o){return o>=1424&&o<=2303||at["Arabic Presentation Forms-A"](o)||at["Arabic Presentation Forms-B"](o)}function ch(o,n){return!(!n&&lh(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||at.Khmer(o))}function zf(o){for(const n of o)if(lh(n.charCodeAt(0)))return!0;return!1}const So=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class yn{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mf,this.transition={})}isSupportedScript(n){return function(a,u){for(const f of a)if(!ch(f.charCodeAt(0),u))return!1;return!0}(n,So.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),u=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*a}}}class ga{constructor(n,a){this.property=n,this.value=a,this.expression=function(u,f){if(da(u))return new Er(u,f);if(sc(u)){const v=Ys(u,f);if(v.result==="error")throw new Error(v.value.map(_=>`${_.key}: ${_.message}`).join(", "));return v.value}{let v=u;return f.type==="color"&&typeof u=="string"?v=an.parse(u):f.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(u)&&(v=Cr.parse(u)):v=ii.parse(u),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,u){return this.property.possiblyEvaluate(this,n,a,u)}}class ya{constructor(n){this.property=n,this.value=new ga(n,void 0)}transitioned(n,a){return new uh(this.property,this.value,a,ue({},n.transition,this.transition),n.now)}untransitioned(){return new uh(this.property,this.value,null,{},0)}}class Rf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return He(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ya(this._values[n].property)),this._values[n].value=new ga(this._values[n].property,a===null?void 0:He(a))}getTransition(n){return He(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ya(this._values[n].property)),this._values[n].transition=He(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u);const f=this.getTransition(a);f!==void 0&&(n[`${a}-transition`]=f)}return n}transitioned(n,a){const u=new Ja(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(n,a._values[f]);return u}untransitioned(){const n=new Ja(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class uh{constructor(n,a,u,f,v){this.property=n,this.value=a,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(n,a,u){const f=n.now||0,v=this.value.possiblyEvaluate(n,a,u),_=this.prior;if(_){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return _.possiblyEvaluate(n,a,u);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,a,u),v,function(S){if(S<=0)return 0;if(S>=1)return 1;const P=S*S,R=P*S;return 4*(S<.5?R:3*(S-P)+R-.75)}(b))}}return v}}class Ja{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,u){const f=new il(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,u);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class jg{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return He(this._values[n].value)}setValue(n,a){this._values[n]=new ga(this._values[n].property,a===null?void 0:He(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(n[a]=u)}return n}possiblyEvaluate(n,a,u){const f=new il(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,a,u);return f}}class io{constructor(n,a,u){this.property=n,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,u,f){return this.property.evaluate(this.value,this.parameters,n,a,u,f)}}class il{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class gt{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,u){const f=Dr[this.specification.type];return f?f(n,a,u):n}}class y{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,u,f){return new io(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},u,f)}:n.expression,a)}interpolate(n,a,u){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new io(this,{kind:"constant",value:void 0},n.parameters);const f=Dr[this.specification.type];if(f){const v=f(n.value.value,a.value.value,u);return new io(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,a,u,f,v,_){return n.kind==="constant"?n.value:n.evaluate(a,u,f,v,_)}}class r extends y{possiblyEvaluate(n,a,u,f){if(n.value===void 0)return new io(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},u,f),_=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(_,_,_,a);return new io(this,{kind:"constant",value:b},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new io(this,{kind:"constant",value:v},a)}return new io(this,n.expression,a)}evaluate(n,a,u,f,v,_){if(n.kind==="source"){const b=n.evaluate(a,u,f,v,_);return this._calculate(b,b,b,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},u,f),n.evaluate({zoom:Math.floor(a.zoom)},u,f),n.evaluate({zoom:Math.floor(a.zoom)+1},u,f),a):n.value}_calculate(n,a,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:u,to:a}}interpolate(n){return n}}class l{constructor(n){this.specification=n}possiblyEvaluate(n,a,u,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},u,f);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new yn(Math.floor(a.zoom-1),a)),n.expression.evaluate(new yn(Math.floor(a.zoom),a)),n.expression.evaluate(new yn(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:u,to:a}}interpolate(n){return n}}class d{constructor(n){this.specification=n}possiblyEvaluate(n,a,u,f){return!!n.expression.evaluate(a,null,{},u,f)}interpolate(){return!1}}class p{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const u=n[a];u.specification.overridable&&this.overridableProperties.push(a);const f=this.defaultPropertyValues[a]=new ga(u,void 0),v=this.defaultTransitionablePropertyValues[a]=new ya(u);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=f.possiblyEvaluate({})}}}ht("DataDrivenProperty",y),ht("DataConstantProperty",gt),ht("CrossFadedDataDrivenProperty",r),ht("CrossFadedProperty",l),ht("ColorRampProperty",d);const x="-transition";class w extends Xn{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new jg(a.layout)),a.paint)){this._transitionablePaint=new Rf(a.paint);for(const u in n.paint)this.setPaintProperty(u,n.paint[u],{validate:!1});for(const u in n.layout)this.setLayoutProperty(u,n.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new il(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,u={}){a!=null&&this._validate(Pf,`layers.${this.id}.layout.${n}`,n,a,u)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(x)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,u={}){if(a!=null&&this._validate(Tf,`layers.${this.id}.paint.${n}`,n,a,u))return!1;if(n.endsWith(x))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",_=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const S=this._transitionablePaint._values[n].value;return S.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(n,b,S)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,u){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Re(n,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(n,a,u,f,v={}){return(!v||v.validate!==!1)&&If(this,n.call(tl,{key:a,layerType:this.type,objectKey:u,value:f,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof io&&Ga(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const E={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class I{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class A{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function F(o,n=1){let a=0,u=0;return{members:o.map(f=>{const v=E[f.type].BYTES_PER_ELEMENT,_=a=B(a,Math.max(n,v)),b=f.components||1;return u=Math.max(u,v),a+=v*b,{name:f.name,type:f.type,components:b,offset:_}}),size:B(a,Math.max(u,n)),alignment:n}}function B(o,n){return Math.ceil(o/n)*n}class q extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.int16[f+0]=a,this.int16[f+1]=u,n}}q.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",q);class ee extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=u,this.int16[v+2]=f,n}}ee.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",ee);class te extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,f)}emplace(n,a,u,f,v){const _=4*n;return this.int16[_+0]=a,this.int16[_+1]=u,this.int16[_+2]=f,this.int16[_+3]=v,n}}te.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",te);class oe extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,u,f,v,_)}emplace(n,a,u,f,v,_,b){const S=6*n;return this.int16[S+0]=a,this.int16[S+1]=u,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=_,this.int16[S+5]=b,n}}oe.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",oe);class J extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,u,f,v,_)}emplace(n,a,u,f,v,_,b){const S=4*n,P=8*n;return this.int16[S+0]=a,this.int16[S+1]=u,this.uint8[P+4]=f,this.uint8[P+5]=v,this.uint8[P+6]=_,this.uint8[P+7]=b,n}}J.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",J);class pe extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.float32[f+0]=a,this.float32[f+1]=u,n}}pe.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",pe);class Ce extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_,b,S,P,R){const L=this.length;return this.resize(L+1),this.emplace(L,n,a,u,f,v,_,b,S,P,R)}emplace(n,a,u,f,v,_,b,S,P,R,L){const O=10*n;return this.uint16[O+0]=a,this.uint16[O+1]=u,this.uint16[O+2]=f,this.uint16[O+3]=v,this.uint16[O+4]=_,this.uint16[O+5]=b,this.uint16[O+6]=S,this.uint16[O+7]=P,this.uint16[O+8]=R,this.uint16[O+9]=L,n}}Ce.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",Ce);class se extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_,b,S,P,R,L,O){const $=this.length;return this.resize($+1),this.emplace($,n,a,u,f,v,_,b,S,P,R,L,O)}emplace(n,a,u,f,v,_,b,S,P,R,L,O,$){const G=12*n;return this.int16[G+0]=a,this.int16[G+1]=u,this.int16[G+2]=f,this.int16[G+3]=v,this.uint16[G+4]=_,this.uint16[G+5]=b,this.uint16[G+6]=S,this.uint16[G+7]=P,this.int16[G+8]=R,this.int16[G+9]=L,this.int16[G+10]=O,this.int16[G+11]=$,n}}se.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",se);class ve extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=u,this.float32[v+2]=f,n}}ve.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",ve);class Ee extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}Ee.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",Ee);class Te extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_,b,S,P){const R=this.length;return this.resize(R+1),this.emplace(R,n,a,u,f,v,_,b,S,P)}emplace(n,a,u,f,v,_,b,S,P,R){const L=10*n,O=5*n;return this.int16[L+0]=a,this.int16[L+1]=u,this.int16[L+2]=f,this.int16[L+3]=v,this.int16[L+4]=_,this.int16[L+5]=b,this.uint32[O+3]=S,this.uint16[L+8]=P,this.uint16[L+9]=R,n}}Te.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",Te);class ke extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,a,u,f,v,_)}emplace(n,a,u,f,v,_,b){const S=6*n;return this.int16[S+0]=a,this.int16[S+1]=u,this.int16[S+2]=f,this.int16[S+3]=v,this.int16[S+4]=_,this.int16[S+5]=b,n}}ke.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",ke);class Ge extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v){const _=this.length;return this.resize(_+1),this.emplace(_,n,a,u,f,v)}emplace(n,a,u,f,v,_){const b=4*n,S=8*n;return this.float32[b+0]=a,this.float32[b+1]=u,this.float32[b+2]=f,this.int16[S+6]=v,this.int16[S+7]=_,n}}Ge.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",Ge);class Ue extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,f)}emplace(n,a,u,f,v){const _=12*n,b=3*n;return this.uint8[_+0]=a,this.uint8[_+1]=u,this.float32[b+1]=f,this.float32[b+2]=v,n}}Ue.prototype.bytesPerElement=12,ht("StructArrayLayout2ub2f12",Ue);class Ye extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=u,this.uint16[v+2]=f,n}}Ye.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",Ye);class ct extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le){const be=this.length;return this.resize(be+1),this.emplace(be,n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le)}emplace(n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le,be){const fe=24*n,_e=12*n,De=48*n;return this.int16[fe+0]=a,this.int16[fe+1]=u,this.uint16[fe+2]=f,this.uint16[fe+3]=v,this.uint32[_e+2]=_,this.uint32[_e+3]=b,this.uint32[_e+4]=S,this.uint16[fe+10]=P,this.uint16[fe+11]=R,this.uint16[fe+12]=L,this.float32[_e+7]=O,this.float32[_e+8]=$,this.uint8[De+36]=G,this.uint8[De+37]=X,this.uint8[De+38]=ie,this.uint32[_e+10]=le,this.int16[fe+22]=be,n}}ct.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ct);class Mt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le,be,fe,_e,De,je,st,mt,it,nt,dt,yt){const ot=this.length;return this.resize(ot+1),this.emplace(ot,n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le,be,fe,_e,De,je,st,mt,it,nt,dt,yt)}emplace(n,a,u,f,v,_,b,S,P,R,L,O,$,G,X,ie,le,be,fe,_e,De,je,st,mt,it,nt,dt,yt,ot){const $e=32*n,pt=16*n;return this.int16[$e+0]=a,this.int16[$e+1]=u,this.int16[$e+2]=f,this.int16[$e+3]=v,this.int16[$e+4]=_,this.int16[$e+5]=b,this.int16[$e+6]=S,this.int16[$e+7]=P,this.uint16[$e+8]=R,this.uint16[$e+9]=L,this.uint16[$e+10]=O,this.uint16[$e+11]=$,this.uint16[$e+12]=G,this.uint16[$e+13]=X,this.uint16[$e+14]=ie,this.uint16[$e+15]=le,this.uint16[$e+16]=be,this.uint16[$e+17]=fe,this.uint16[$e+18]=_e,this.uint16[$e+19]=De,this.uint16[$e+20]=je,this.uint16[$e+21]=st,this.uint16[$e+22]=mt,this.uint32[pt+12]=it,this.float32[pt+13]=nt,this.float32[pt+14]=dt,this.uint16[$e+30]=yt,this.uint16[$e+31]=ot,n}}Mt.prototype.bytesPerElement=64,ht("StructArrayLayout8i15ui1ul2f2ui64",Mt);class et extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}et.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",et);class bt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const v=3*n;return this.uint16[6*n+0]=a,this.float32[v+1]=u,this.float32[v+2]=f,n}}bt.prototype.bytesPerElement=12,ht("StructArrayLayout1ui2f12",bt);class At extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,n,a,u)}emplace(n,a,u,f){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=u,this.uint16[v+3]=f,n}}At.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",At);class Wt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const u=this.length;return this.resize(u+1),this.emplace(u,n,a)}emplace(n,a,u){const f=2*n;return this.uint16[f+0]=a,this.uint16[f+1]=u,n}}Wt.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",Wt);class St extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}St.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",St);class Rt extends A{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,u,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,u,f)}emplace(n,a,u,f,v){const _=4*n;return this.float32[_+0]=a,this.float32[_+1]=u,this.float32[_+2]=f,this.float32[_+3]=v,n}}Rt.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",Rt);class jt extends I{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new z(this.anchorPointX,this.anchorPointY)}}jt.prototype.size=20;class zn extends Te{get(n){return new jt(this,n)}}ht("CollisionBoxArray",zn);class un extends I{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}un.prototype.size=48;class li extends ct{get(n){return new un(this,n)}}ht("PlacedSymbolArray",li);class cr extends I{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}cr.prototype.size=64;class Rn extends Mt{get(n){return new cr(this,n)}}ht("SymbolInstanceArray",Rn);class Kr extends et{getoffsetX(n){return this.float32[1*n+0]}}ht("GlyphOffsetArray",Kr);class Li extends ee{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ht("SymbolLineVertexArray",Li);class oo extends I{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}oo.prototype.size=12;class Xo extends bt{get(n){return new oo(this,n)}}ht("TextAnchorOffsetArray",Xo);class Qa extends I{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qa.prototype.size=8;class va extends At{get(n){return new Qa(this,n)}}ht("FeatureIndexArray",va);class _a extends q{}class Or extends q{}class Tr extends q{}class Br extends oe{}class ol extends J{}class Qn extends pe{}class En extends Ce{}class wi extends se{}class er extends ve{}class $g extends Ee{}class Lf extends ke{}class Vg extends Ue{}class es extends Ye{}class hh extends Wt{}const Ug=F([{name:"a_pos",components:2,type:"Int16"}],4),{members:ts}=Ug;class ur{constructor(n=[]){this.segments=n}prepareSegment(n,a,u,f){let v=this.segments[this.segments.length-1];return n>ur.MAX_VERTEX_ARRAY_LENGTH&&Ze(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ur.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,u,f){return new ur([{vertexOffset:n,primitiveOffset:a,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}function dh(o,n){return 256*(o=he(Math.floor(o),0,255))+he(Math.floor(n),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",ur);const al=F([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ns={exports:{}},fh={exports:{}};fh.exports=function(o,n){var a,u,f,v,_,b,S,P;for(u=o.length-(a=3&o.length),f=n,_=3432918353,b=461845907,P=0;P<u;)S=255&o.charCodeAt(P)|(255&o.charCodeAt(++P))<<8|(255&o.charCodeAt(++P))<<16|(255&o.charCodeAt(++P))<<24,++P,f=27492+(65535&(v=5*(65535&(f=(f^=S=(65535&(S=(S=(65535&S)*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(S=0,a){case 3:S^=(255&o.charCodeAt(P+2))<<16;case 2:S^=(255&o.charCodeAt(P+1))<<8;case 1:f^=S=(65535&(S=(S=(65535&(S^=255&o.charCodeAt(P)))*_+(((S>>>16)*_&65535)<<16)&4294967295)<<15|S>>>17))*b+(((S>>>16)*b&65535)<<16)&4294967295}return f^=o.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var ph=fh.exports,k1={exports:{}};k1.exports=function(o,n){for(var a,u=o.length,f=n^u,v=0;u>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++v;switch(u){case 3:f^=(255&o.charCodeAt(v+2))<<16;case 2:f^=(255&o.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&o.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var M1=ph,KP=k1.exports;ns.exports=M1,ns.exports.murmur3=M1,ns.exports.murmur2=KP;var Hg=C(ns.exports);class Ff{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,u,f){this.ids.push(A1(n)),this.positions.push(a,u,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=A1(n);let u=0,f=this.ids.length-1;for(;u<f;){const _=u+f>>1;this.ids[_]>=a?f=_:u=_+1}const v=[];for(;this.ids[u]===a;)v.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return v}static serialize(n,a){const u=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Wg(u,f,0,u.length-1),a&&a.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(n){const a=new Ff;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function A1(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Hg(String(o))}function Wg(o,n,a,u){for(;a<u;){const f=o[a+u>>1];let v=a-1,_=u+1;for(;;){do v++;while(o[v]<f);do _--;while(o[_]>f);if(v>=_)break;Df(o,v,_),Df(n,3*v,3*_),Df(n,3*v+1,3*_+1),Df(n,3*v+2,3*_+2)}_-a<u-_?(Wg(o,n,a,_),a=_+1):(Wg(o,n,_+1,u),u=_)}}function Df(o,n,a){const u=o[n];o[n]=o[a],o[a]=u}ht("FeaturePositionMap",Ff);class sl{constructor(n,a){this.gl=n.gl,this.location=a}}class Of extends sl{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class z1 extends sl{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class R1 extends sl{constructor(n,a){super(n,a),this.current=an.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const XP=new Float32Array(16);function qg(o){return[dh(255*o.r,255*o.g),dh(255*o.b,255*o.a)]}class mh{constructor(n,a,u){this.value=n,this.uniformNames=a.map(f=>`u_${f}`),this.type=u}setUniform(n,a,u){n.set(u.constantOr(this.value))}getBinding(n,a,u){return this.type==="color"?new R1(n,a):new Of(n,a)}}class pc{constructor(n,a){this.uniformNames=a.map(u=>`u_${u}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,u,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,u){return u.substr(0,9)==="u_pattern"?new z1(n,a):new Of(n,a)}}class xa{constructor(n,a,u,f){this.expression=n,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,a,u,f,v){const _=this.paintVertexArray.length,b=this.expression.evaluate(new yn(0),a,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(_,n,b)}updatePaintArray(n,a,u,f){const v=this.expression.evaluate({zoom:0},u,f);this._setPaintValue(n,a,v)}_setPaintValue(n,a,u){if(this.type==="color"){const f=qg(u);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<a;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Co{constructor(n,a,u,f,v,_){this.expression=n,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,a,u,f,v){const _=this.expression.evaluate(new yn(this.zoom),a,{},f,[],v),b=this.expression.evaluate(new yn(this.zoom+1),a,{},f,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(S,n,_,b)}updatePaintArray(n,a,u,f){const v=this.expression.evaluate({zoom:this.zoom},u,f),_=this.expression.evaluate({zoom:this.zoom+1},u,f);this._setPaintValue(n,a,v,_)}_setPaintValue(n,a,u,f){if(this.type==="color"){const v=qg(u),_=qg(f);for(let b=n;b<a;b++)this.paintVertexArray.emplace(b,v[0],v[1],_[0],_[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const u=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,f=he(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,a,u){return new Of(n,a)}}class rs{constructor(n,a,u,f,v,_){this.expression=n,this.type=a,this.useIntegerZoom=u,this.zoom=f,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,u){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(n,a,u,f,v){this._setPaintValues(n,a,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(n,a,u,f){if(!f||!u)return;const{min:v,mid:_,max:b}=u,S=f[v],P=f[_],R=f[b];if(S&&P&&R)for(let L=n;L<a;L++)this.zoomInPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],P.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(L,P.tl[0],P.tl[1],P.br[0],P.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],P.pixelRatio,R.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,al.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,al.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class L1{constructor(n,a,u){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!u(v))continue;const _=n.paint.get(v);if(!(_ instanceof io&&Ga(_.property.specification)))continue;const b=YP(v,n.type),S=_.value,P=_.property.specification.type,R=_.property.useIntegerZoom,L=_.property.specification["property-type"],O=L==="cross-faded"||L==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=O?new pc(S.value,b):new mh(S.value,b,P),f.push(`/u_${v}`);else if(S.kind==="source"||O){const $=F1(v,P,"source");this.binders[v]=O?new rs(S,P,R,a,$,n.id):new xa(S,b,P,$),f.push(`/a_${v}`)}else{const $=F1(v,P,"composite");this.binders[v]=new Co(S,b,P,R,a,$),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof xa||a instanceof Co?a.maxValue:0}populatePaintArrays(n,a,u,f,v){for(const _ in this.binders){const b=this.binders[_];(b instanceof xa||b instanceof Co||b instanceof rs)&&b.populatePaintArray(n,a,u,f,v)}}setConstantPatternPositions(n,a){for(const u in this.binders){const f=this.binders[u];f instanceof pc&&f.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,u,f,v){let _=!1;for(const b in n){const S=a.getPositions(b);for(const P of S){const R=u.feature(P.index);for(const L in this.binders){const O=this.binders[L];if((O instanceof xa||O instanceof Co||O instanceof rs)&&O.expression.isStateDependent===!0){const $=f.paint.get(L);O.expression=$.value,O.updatePaintArray(P.start,P.end,R,n[b],v),_=!0}}}}return _}defines(){const n=[];for(const a in this.binders){const u=this.binders[a];(u instanceof mh||u instanceof pc)&&n.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof xa||u instanceof Co)for(let f=0;f<u.paintVertexAttributes.length;f++)n.push(u.paintVertexAttributes[f].name);else if(u instanceof rs)for(let f=0;f<al.members.length;f++)n.push(al.members[f].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof mh||u instanceof pc||u instanceof Co)for(const f of u.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const u=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof mh||v instanceof pc||v instanceof Co){for(const _ of v.uniformNames)if(a[_]){const b=v.getBinding(n,a[_],_);u.push({name:_,property:f,binding:b})}}}return u}setUniforms(n,a,u,f){for(const{name:v,property:_,binding:b}of a)this.binders[_].setUniform(b,f,u.get(_),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const u=this.binders[a];if(n&&u instanceof rs){const f=n.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(u instanceof xa||u instanceof Co)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(n){for(const a in this.binders){const u=this.binders[a];(u instanceof xa||u instanceof Co||u instanceof rs)&&u.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof xa||a instanceof Co||a instanceof rs)&&a.destroy()}}}class ll{constructor(n,a,u=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new L1(f,a,u);this.needsUpload=!1,this._featureMap=new Ff,this._bufferOffset=0}populatePaintArrays(n,a,u,f,v,_){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(n,a,f,v,_);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,u,f){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function YP(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function F1(o,n,a){const u={color:{source:pe,composite:Rt},number:{source:et,composite:pe}},f=function(v){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[v]}(o);return f&&f[a]||u[n][a]}ht("ConstantBinder",mh),ht("CrossFadedConstantBinder",pc),ht("SourceExpressionBinder",xa),ht("CrossFadedCompositeBinder",rs),ht("CompositeExpressionBinder",Co),ht("ProgramConfiguration",L1,{omit:["_buffers"]}),ht("ProgramConfigurationSet",ll);const Un=8192,Gg=Math.pow(2,14)-1,D1=-Gg-1;function cl(o){const n=Un/o.extent,a=o.loadGeometry();for(let u=0;u<a.length;u++){const f=a[u];for(let v=0;v<f.length;v++){const _=f[v],b=Math.round(_.x*n),S=Math.round(_.y*n);_.x=he(b,D1,Gg),_.y=he(S,D1,Gg),(b<_.x||b>_.x+1||S<_.y||S>_.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function ul(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?cl(o):[]}}function Bf(o,n,a,u,f){o.emplaceBack(2*n+(u+1)/2,2*a+(f+1)/2)}class Zg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Or,this.indexArray=new es,this.segments=new ur,this.programConfigurations=new ll(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){const f=this.layers[0],v=[];let _=null,b=!1;f.type==="circle"&&(_=f.layout.get("circle-sort-key"),b=!_.isConstant());for(const{feature:S,id:P,index:R,sourceLayerIndex:L}of n){const O=this.layers[0]._featureFilter.needGeometry,$=ul(S,O);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),$,u))continue;const G=b?_.evaluate($,{},u):void 0,X={id:P,properties:S.properties,type:S.type,sourceLayerIndex:L,index:R,geometry:O?$.geometry:cl(S),patterns:{},sortKey:G};v.push(X)}b&&v.sort((S,P)=>S.sortKey-P.sortKey);for(const S of v){const{geometry:P,index:R,sourceLayerIndex:L}=S,O=n[R].feature;this.addFeature(S,P,R,u),a.featureIndex.insert(O,P,R,L,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ts),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,u,f){for(const v of a)for(const _ of v){const b=_.x,S=_.y;if(b<0||b>=Un||S<0||S>=Un)continue;const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),R=P.vertexLength;Bf(this.layoutVertexArray,b,S,-1,-1),Bf(this.layoutVertexArray,b,S,1,-1),Bf(this.layoutVertexArray,b,S,1,1),Bf(this.layoutVertexArray,b,S,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,{},f)}}function O1(o,n){for(let a=0;a<o.length;a++)if(mc(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(mc(o,n[a]))return!0;return!!Kg(o,n)}function JP(o,n,a){return!!mc(o,n)||!!Xg(n,o,a)}function B1(o,n){if(o.length===1)return j1(n,o[0]);for(let a=0;a<n.length;a++){const u=n[a];for(let f=0;f<u.length;f++)if(mc(o,u[f]))return!0}for(let a=0;a<o.length;a++)if(j1(n,o[a]))return!0;for(let a=0;a<n.length;a++)if(Kg(o,n[a]))return!0;return!1}function QP(o,n,a){if(o.length>1){if(Kg(o,n))return!0;for(let u=0;u<n.length;u++)if(Xg(n[u],o,a))return!0}for(let u=0;u<o.length;u++)if(Xg(o[u],n,a))return!0;return!1}function Kg(o,n){if(o.length===0||n.length===0)return!1;for(let a=0;a<o.length-1;a++){const u=o[a],f=o[a+1];for(let v=0;v<n.length-1;v++)if(eI(u,f,n[v],n[v+1]))return!0}return!1}function eI(o,n,a,u){return qe(o,a,u)!==qe(n,a,u)&&qe(o,n,a)!==qe(o,n,u)}function Xg(o,n,a){const u=a*a;if(n.length===1)return o.distSqr(n[0])<u;for(let f=1;f<n.length;f++)if(N1(o,n[f-1],n[f])<u)return!0;return!1}function N1(o,n,a){const u=n.distSqr(a);if(u===0)return o.distSqr(n);const f=((o.x-n.x)*(a.x-n.x)+(o.y-n.y)*(a.y-n.y))/u;return o.distSqr(f<0?n:f>1?a:a.sub(n)._mult(f)._add(n))}function j1(o,n){let a,u,f,v=!1;for(let _=0;_<o.length;_++){a=o[_];for(let b=0,S=a.length-1;b<a.length;S=b++)u=a[b],f=a[S],u.y>n.y!=f.y>n.y&&n.x<(f.x-u.x)*(n.y-u.y)/(f.y-u.y)+u.x&&(v=!v)}return v}function mc(o,n){let a=!1;for(let u=0,f=o.length-1;u<o.length;f=u++){const v=o[u],_=o[f];v.y>n.y!=_.y>n.y&&n.x<(_.x-v.x)*(n.y-v.y)/(_.y-v.y)+v.x&&(a=!a)}return a}function tI(o,n,a){const u=a[0],f=a[2];if(o.x<u.x&&n.x<u.x||o.x>f.x&&n.x>f.x||o.y<u.y&&n.y<u.y||o.y>f.y&&n.y>f.y)return!1;const v=qe(o,n,a[0]);return v!==qe(o,n,a[1])||v!==qe(o,n,a[2])||v!==qe(o,n,a[3])}function gh(o,n,a){const u=n.paint.get(o).value;return u.kind==="constant"?u.value:a.programConfigurations.get(n.id).getMaxValue(o)}function Nf(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function jf(o,n,a,u,f){if(!n[0]&&!n[1])return o;const v=z.convert(n)._mult(f);a==="viewport"&&v._rotate(-u);const _=[];for(let b=0;b<o.length;b++)_.push(o[b].sub(v));return _}let $1,V1;ht("CircleBucket",Zg,{omit:["layers"]});var nI={get paint(){return V1=V1||new p({"circle-radius":new y(Ie.paint_circle["circle-radius"]),"circle-color":new y(Ie.paint_circle["circle-color"]),"circle-blur":new y(Ie.paint_circle["circle-blur"]),"circle-opacity":new y(Ie.paint_circle["circle-opacity"]),"circle-translate":new gt(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new gt(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gt(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gt(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new y(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new y(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new y(Ie.paint_circle["circle-stroke-opacity"])})},get layout(){return $1=$1||new p({"circle-sort-key":new y(Ie.layout_circle["circle-sort-key"])})}},Xr=1e-6,gc=typeof Float32Array<"u"?Float32Array:Array;function Yg(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function U1(o,n,a){var u=n[0],f=n[1],v=n[2],_=n[3],b=n[4],S=n[5],P=n[6],R=n[7],L=n[8],O=n[9],$=n[10],G=n[11],X=n[12],ie=n[13],le=n[14],be=n[15],fe=a[0],_e=a[1],De=a[2],je=a[3];return o[0]=fe*u+_e*b+De*L+je*X,o[1]=fe*f+_e*S+De*O+je*ie,o[2]=fe*v+_e*P+De*$+je*le,o[3]=fe*_+_e*R+De*G+je*be,o[4]=(fe=a[4])*u+(_e=a[5])*b+(De=a[6])*L+(je=a[7])*X,o[5]=fe*f+_e*S+De*O+je*ie,o[6]=fe*v+_e*P+De*$+je*le,o[7]=fe*_+_e*R+De*G+je*be,o[8]=(fe=a[8])*u+(_e=a[9])*b+(De=a[10])*L+(je=a[11])*X,o[9]=fe*f+_e*S+De*O+je*ie,o[10]=fe*v+_e*P+De*$+je*le,o[11]=fe*_+_e*R+De*G+je*be,o[12]=(fe=a[12])*u+(_e=a[13])*b+(De=a[14])*L+(je=a[15])*X,o[13]=fe*f+_e*S+De*O+je*ie,o[14]=fe*v+_e*P+De*$+je*le,o[15]=fe*_+_e*R+De*G+je*be,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var yh,rI=U1;function $f(o,n,a){var u=n[0],f=n[1],v=n[2],_=n[3];return o[0]=a[0]*u+a[4]*f+a[8]*v+a[12]*_,o[1]=a[1]*u+a[5]*f+a[9]*v+a[13]*_,o[2]=a[2]*u+a[6]*f+a[10]*v+a[14]*_,o[3]=a[3]*u+a[7]*f+a[11]*v+a[15]*_,o}yh=new gc(4),gc!=Float32Array&&(yh[0]=0,yh[1]=0,yh[2]=0,yh[3]=0);class iI extends w{constructor(n){super(n,nI)}createBucket(n){return new Zg(n)}queryRadius(n){const a=n;return gh("circle-radius",this,a)+gh("circle-stroke-width",this,a)+Nf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,a,u,f,v,_,b,S){const P=jf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,b),R=this.paint.get("circle-radius").evaluate(a,u)+this.paint.get("circle-stroke-width").evaluate(a,u),L=this.paint.get("circle-pitch-alignment")==="map",O=L?P:function(G,X){return G.map(ie=>H1(ie,X))}(P,S),$=L?R*b:R;for(const G of f)for(const X of G){const ie=L?X:H1(X,S);let le=$;const be=$f([],[X.x,X.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=be[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=_.cameraToCenterDistance/be[3]),JP(O,ie,le))return!0}return!1}}function H1(o,n){const a=$f([],[o.x,o.y,0,1],n);return new z(a[0]/a[3],a[1]/a[3])}class W1 extends Zg{}let q1;ht("HeatmapBucket",W1,{omit:["layers"]});var oI={get paint(){return q1=q1||new p({"heatmap-radius":new y(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new y(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gt(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new d(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gt(Ie.paint_heatmap["heatmap-opacity"])})}};function Jg(o,{width:n,height:a},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*a*u)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*a*u}`)}else f=new Uint8Array(n*a*u);return o.width=n,o.height=a,o.data=f,o}function G1(o,{width:n,height:a},u){if(n===o.width&&a===o.height)return;const f=Jg({},{width:n,height:a},u);Qg(o,f,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,a)},u),o.width=n,o.height=a,o.data=f.data}function Qg(o,n,a,u,f,v){if(f.width===0||f.height===0)return n;if(f.width>o.width||f.height>o.height||a.x>o.width-f.width||a.y>o.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||u.x>n.width-f.width||u.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const _=o.data,b=n.data;if(_===b)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<f.height;S++){const P=((a.y+S)*o.width+a.x)*v,R=((u.y+S)*n.width+u.x)*v;for(let L=0;L<f.width*v;L++)b[R+L]=_[P+L]}return n}class vh{constructor(n,a){Jg(this,n,1,a)}resize(n){G1(this,n,1)}clone(){return new vh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,f,v){Qg(n,a,u,f,v,1)}}class Fi{constructor(n,a){Jg(this,n,4,a)}resize(n){G1(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Fi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,u,f,v){Qg(n,a,u,f,v,4)}}function Z1(o){const n={},a=o.resolution||256,u=o.clips?o.clips.length:1,f=o.image||new Fi({width:a,height:u});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(_,b,S)=>{n[o.evaluationKey]=S;const P=o.expression.evaluate(n);f.data[_+b+0]=Math.floor(255*P.r/P.a),f.data[_+b+1]=Math.floor(255*P.g/P.a),f.data[_+b+2]=Math.floor(255*P.b/P.a),f.data[_+b+3]=Math.floor(255*P.a)};if(o.clips)for(let _=0,b=0;_<u;++_,b+=4*a)for(let S=0,P=0;S<a;S++,P+=4){const R=S/(a-1),{start:L,end:O}=o.clips[_];v(b,P,L*(1-R)+O*R)}else for(let _=0,b=0;_<a;_++,b+=4)v(0,b,_/(a-1));return f}ht("AlphaImage",vh),ht("RGBAImage",Fi);class aI extends w{createBucket(n){return new W1(n)}constructor(n){super(n,oI),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Z1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let K1;var sI={get paint(){return K1=K1||new p({"hillshade-illumination-direction":new gt(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gt(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gt(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gt(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gt(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gt(Ie.paint_hillshade["hillshade-accent-color"])})}};class lI extends w{constructor(n){super(n,sI)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const cI=F([{name:"a_pos",components:2,type:"Int16"}],4),{members:uI}=cI;var ey={exports:{}};function Vf(o,n,a){a=a||2;var u,f,v,_,b,S,P,R=n&&n.length,L=R?n[0]*a:o.length,O=X1(o,0,L,a,!0),$=[];if(!O||O.next===O.prev)return $;if(R&&(O=function(X,ie,le,be){var fe,_e,De,je=[];for(fe=0,_e=ie.length;fe<_e;fe++)(De=X1(X,ie[fe]*be,fe<_e-1?ie[fe+1]*be:X.length,be,!1))===De.next&&(De.steiner=!0),je.push(vI(De));for(je.sort(mI),fe=0;fe<je.length;fe++)le=gI(je[fe],le);return le}(o,n,O,a)),o.length>80*a){u=v=o[0],f=_=o[1];for(var G=a;G<L;G+=a)(b=o[G])<u&&(u=b),(S=o[G+1])<f&&(f=S),b>v&&(v=b),S>_&&(_=S);P=(P=Math.max(v-u,_-f))!==0?32767/P:0}return _h(O,$,a,u,f,P,0),$}function X1(o,n,a,u,f){var v,_;if(f===ry(o,n,a,u)>0)for(v=n;v<a;v+=u)_=Q1(v,o[v],o[v+1],_);else for(v=a-u;v>=n;v-=u)_=Q1(v,o[v],o[v+1],_);return _&&Uf(_,_.next)&&(bh(_),_=_.next),_}function hl(o,n){if(!o)return o;n||(n=o);var a,u=o;do if(a=!1,u.steiner||!Uf(u,u.next)&&Dn(u.prev,u,u.next)!==0)u=u.next;else{if(bh(u),(u=n=u.prev)===u.next)break;a=!0}while(a||u!==n);return n}function _h(o,n,a,u,f,v,_){if(o){!_&&v&&function(R,L,O,$){var G=R;do G.z===0&&(G.z=ty(G.x,G.y,L,O,$)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,function(X){var ie,le,be,fe,_e,De,je,st,mt=1;do{for(le=X,X=null,_e=null,De=0;le;){for(De++,be=le,je=0,ie=0;ie<mt&&(je++,be=be.nextZ);ie++);for(st=mt;je>0||st>0&&be;)je!==0&&(st===0||!be||le.z<=be.z)?(fe=le,le=le.nextZ,je--):(fe=be,be=be.nextZ,st--),_e?_e.nextZ=fe:X=fe,fe.prevZ=_e,_e=fe;le=be}_e.nextZ=null,mt*=2}while(De>1)}(G)}(o,u,f,v);for(var b,S,P=o;o.prev!==o.next;)if(b=o.prev,S=o.next,v?dI(o,u,f,v):hI(o))n.push(b.i/a|0),n.push(o.i/a|0),n.push(S.i/a|0),bh(o),o=S.next,P=S.next;else if((o=S)===P){_?_===1?_h(o=fI(hl(o),n,a),n,a,u,f,v,2):_===2&&pI(o,n,a,u,f,v):_h(hl(o),n,a,u,f,v,1);break}}}function hI(o){var n=o.prev,a=o,u=o.next;if(Dn(n,a,u)>=0)return!1;for(var f=n.x,v=a.x,_=u.x,b=n.y,S=a.y,P=u.y,R=f<v?f<_?f:_:v<_?v:_,L=b<S?b<P?b:P:S<P?S:P,O=f>v?f>_?f:_:v>_?v:_,$=b>S?b>P?b:P:S>P?S:P,G=u.next;G!==n;){if(G.x>=R&&G.x<=O&&G.y>=L&&G.y<=$&&yc(f,b,v,S,_,P,G.x,G.y)&&Dn(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function dI(o,n,a,u){var f=o.prev,v=o,_=o.next;if(Dn(f,v,_)>=0)return!1;for(var b=f.x,S=v.x,P=_.x,R=f.y,L=v.y,O=_.y,$=b<S?b<P?b:P:S<P?S:P,G=R<L?R<O?R:O:L<O?L:O,X=b>S?b>P?b:P:S>P?S:P,ie=R>L?R>O?R:O:L>O?L:O,le=ty($,G,n,a,u),be=ty(X,ie,n,a,u),fe=o.prevZ,_e=o.nextZ;fe&&fe.z>=le&&_e&&_e.z<=be;){if(fe.x>=$&&fe.x<=X&&fe.y>=G&&fe.y<=ie&&fe!==f&&fe!==_&&yc(b,R,S,L,P,O,fe.x,fe.y)&&Dn(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,_e.x>=$&&_e.x<=X&&_e.y>=G&&_e.y<=ie&&_e!==f&&_e!==_&&yc(b,R,S,L,P,O,_e.x,_e.y)&&Dn(_e.prev,_e,_e.next)>=0))return!1;_e=_e.nextZ}for(;fe&&fe.z>=le;){if(fe.x>=$&&fe.x<=X&&fe.y>=G&&fe.y<=ie&&fe!==f&&fe!==_&&yc(b,R,S,L,P,O,fe.x,fe.y)&&Dn(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;_e&&_e.z<=be;){if(_e.x>=$&&_e.x<=X&&_e.y>=G&&_e.y<=ie&&_e!==f&&_e!==_&&yc(b,R,S,L,P,O,_e.x,_e.y)&&Dn(_e.prev,_e,_e.next)>=0)return!1;_e=_e.nextZ}return!0}function fI(o,n,a){var u=o;do{var f=u.prev,v=u.next.next;!Uf(f,v)&&Y1(f,u,u.next,v)&&xh(f,v)&&xh(v,f)&&(n.push(f.i/a|0),n.push(u.i/a|0),n.push(v.i/a|0),bh(u),bh(u.next),u=o=v),u=u.next}while(u!==o);return hl(u)}function pI(o,n,a,u,f,v){var _=o;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&_I(_,b)){var S=J1(_,b);return _=hl(_,_.next),S=hl(S,S.next),_h(_,n,a,u,f,v,0),void _h(S,n,a,u,f,v,0)}b=b.next}_=_.next}while(_!==o)}function mI(o,n){return o.x-n.x}function gI(o,n){var a=function(f,v){var _,b=v,S=f.x,P=f.y,R=-1/0;do{if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){var L=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(L<=S&&L>R&&(R=L,_=b.x<b.next.x?b:b.next,L===S))return _}b=b.next}while(b!==v);if(!_)return null;var O,$=_,G=_.x,X=_.y,ie=1/0;b=_;do S>=b.x&&b.x>=G&&S!==b.x&&yc(P<X?S:R,P,G,X,P<X?R:S,P,b.x,b.y)&&(O=Math.abs(P-b.y)/(S-b.x),xh(b,f)&&(O<ie||O===ie&&(b.x>_.x||b.x===_.x&&yI(_,b)))&&(_=b,ie=O)),b=b.next;while(b!==$);return _}(o,n);if(!a)return n;var u=J1(a,o);return hl(u,u.next),hl(a,a.next)}function yI(o,n){return Dn(o.prev,o,n.prev)<0&&Dn(n.next,o,o.next)<0}function ty(o,n,a,u,f){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-u)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function vI(o){var n=o,a=o;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==o);return a}function yc(o,n,a,u,f,v,_,b){return(f-_)*(n-b)>=(o-_)*(v-b)&&(o-_)*(u-b)>=(a-_)*(n-b)&&(a-_)*(v-b)>=(f-_)*(u-b)}function _I(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(a,u){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==u.i&&f.next.i!==u.i&&Y1(f,f.next,a,u))return!0;f=f.next}while(f!==a);return!1}(o,n)&&(xh(o,n)&&xh(n,o)&&function(a,u){var f=a,v=!1,_=(a.x+u.x)/2,b=(a.y+u.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&_<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==a);return v}(o,n)&&(Dn(o.prev,o,n.prev)||Dn(o,n.prev,n))||Uf(o,n)&&Dn(o.prev,o,o.next)>0&&Dn(n.prev,n,n.next)>0)}function Dn(o,n,a){return(n.y-o.y)*(a.x-n.x)-(n.x-o.x)*(a.y-n.y)}function Uf(o,n){return o.x===n.x&&o.y===n.y}function Y1(o,n,a,u){var f=Wf(Dn(o,n,a)),v=Wf(Dn(o,n,u)),_=Wf(Dn(a,u,o)),b=Wf(Dn(a,u,n));return f!==v&&_!==b||!(f!==0||!Hf(o,a,n))||!(v!==0||!Hf(o,u,n))||!(_!==0||!Hf(a,o,u))||!(b!==0||!Hf(a,n,u))}function Hf(o,n,a){return n.x<=Math.max(o.x,a.x)&&n.x>=Math.min(o.x,a.x)&&n.y<=Math.max(o.y,a.y)&&n.y>=Math.min(o.y,a.y)}function Wf(o){return o>0?1:o<0?-1:0}function xh(o,n){return Dn(o.prev,o,o.next)<0?Dn(o,n,o.next)>=0&&Dn(o,o.prev,n)>=0:Dn(o,n,o.prev)<0||Dn(o,o.next,n)<0}function J1(o,n){var a=new ny(o.i,o.x,o.y),u=new ny(n.i,n.x,n.y),f=o.next,v=n.prev;return o.next=n,n.prev=o,a.next=f,f.prev=a,u.next=a,a.prev=u,v.next=u,u.prev=v,u}function Q1(o,n,a,u){var f=new ny(o,n,a);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function bh(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function ny(o,n,a){this.i=o,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ry(o,n,a,u){for(var f=0,v=n,_=a-u;v<a;v+=u)f+=(o[_]-o[v])*(o[v+1]+o[_+1]),_=v;return f}ey.exports=Vf,ey.exports.default=Vf,Vf.deviation=function(o,n,a,u){var f=n&&n.length,v=Math.abs(ry(o,0,f?n[0]*a:o.length,a));if(f)for(var _=0,b=n.length;_<b;_++)v-=Math.abs(ry(o,n[_]*a,_<b-1?n[_+1]*a:o.length,a));var S=0;for(_=0;_<u.length;_+=3){var P=u[_]*a,R=u[_+1]*a,L=u[_+2]*a;S+=Math.abs((o[P]-o[L])*(o[R+1]-o[P+1])-(o[P]-o[R])*(o[L+1]-o[P+1]))}return v===0&&S===0?0:Math.abs((S-v)/v)},Vf.flatten=function(o){for(var n=o[0][0].length,a={vertices:[],holes:[],dimensions:n},u=0,f=0;f<o.length;f++){for(var v=0;v<o[f].length;v++)for(var _=0;_<n;_++)a.vertices.push(o[f][v][_]);f>0&&a.holes.push(u+=o[f-1].length)}return a};var ex=C(ey.exports);function iy(o,n,a){const u=a.patternDependencies;let f=!1;for(const v of n){const _=v.paint.get(`${o}-pattern`);_.isConstant()||(f=!0);const b=_.constantOr(null);b&&(f=!0,u[b.to]=!0,u[b.from]=!0)}return f}function oy(o,n,a,u,f){const v=f.patternDependencies;for(const _ of n){const b=_.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let S=b.evaluate({zoom:u-1},a,{},f.availableImages),P=b.evaluate({zoom:u},a,{},f.availableImages),R=b.evaluate({zoom:u+1},a,{},f.availableImages);S=S&&S.name?S.name:S,P=P&&P.name?P.name:P,R=R&&R.name?R.name:R,v[S]=!0,v[P]=!0,v[R]=!0,a.patterns[_.id]={min:S,mid:P,max:R}}}return a}class ay{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Tr,this.indexArray=new es,this.indexArray2=new hh,this.programConfigurations=new ll(n.layers,n.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.hasPattern=iy("fill",this.layers,a);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),_=[];for(const{feature:b,id:S,index:P,sourceLayerIndex:R}of n){const L=this.layers[0]._featureFilter.needGeometry,O=ul(b,L);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),O,u))continue;const $=v?f.evaluate(O,{},u,a.availableImages):void 0,G={id:S,properties:b.properties,type:b.type,sourceLayerIndex:R,index:P,geometry:L?O.geometry:cl(b),patterns:{},sortKey:$};_.push(G)}v&&_.sort((b,S)=>b.sortKey-S.sortKey);for(const b of _){const{geometry:S,index:P,sourceLayerIndex:R}=b;if(this.hasPattern){const L=oy("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(b,S,P,u,{});a.featureIndex.insert(n[P].feature,S,P,R,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}addFeatures(n,a,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uI),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,u,f,v){for(const _ of ec(a,500)){let b=0;for(const $ of _)b+=$.length;const S=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),P=S.vertexLength,R=[],L=[];for(const $ of _){if($.length===0)continue;$!==_[0]&&L.push(R.length/2);const G=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),X=G.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(X+$.length-1,X),R.push($[0].x),R.push($[0].y);for(let ie=1;ie<$.length;ie++)this.layoutVertexArray.emplaceBack($[ie].x,$[ie].y),this.indexArray2.emplaceBack(X+ie-1,X+ie),R.push($[ie].x),R.push($[ie].y);G.vertexLength+=$.length,G.primitiveLength+=$.length}const O=ex(R,L);for(let $=0;$<O.length;$+=3)this.indexArray.emplaceBack(P+O[$],P+O[$+1],P+O[$+2]);S.vertexLength+=b,S.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,f)}}let tx,nx;ht("FillBucket",ay,{omit:["layers","patternFeatures"]});var xI={get paint(){return nx=nx||new p({"fill-antialias":new gt(Ie.paint_fill["fill-antialias"]),"fill-opacity":new y(Ie.paint_fill["fill-opacity"]),"fill-color":new y(Ie.paint_fill["fill-color"]),"fill-outline-color":new y(Ie.paint_fill["fill-outline-color"]),"fill-translate":new gt(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new gt(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new r(Ie.paint_fill["fill-pattern"])})},get layout(){return tx=tx||new p({"fill-sort-key":new y(Ie.layout_fill["fill-sort-key"])})}};class bI extends w{constructor(n){super(n,xI)}recalculate(n,a){super.recalculate(n,a);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new ay(n)}queryRadius(){return Nf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,a,u,f,v,_,b){return B1(jf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,b),f)}isTileClipped(){return!0}}const wI=F([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),SI=F([{name:"a_centroid",components:2,type:"Int16"}],4),{members:CI}=wI;var is={},EI=T,rx=vc;function vc(o,n,a,u,f){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=f,o.readFields(TI,this,n)}function TI(o,n,a){o==1?n.id=a.readVarint():o==2?function(u,f){for(var v=u.readVarint()+u.pos;u.pos<v;){var _=f._keys[u.readVarint()],b=f._values[u.readVarint()];f.properties[_]=b}}(a,n):o==3?n.type=a.readVarint():o==4&&(n._geometry=a.pos)}function PI(o){for(var n,a,u=0,f=0,v=o.length,_=v-1;f<v;_=f++)u+=((a=o[_]).x-(n=o[f]).x)*(n.y+a.y);return u}vc.types=["Unknown","Point","LineString","Polygon"],vc.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,a=o.readVarint()+o.pos,u=1,f=0,v=0,_=0,b=[];o.pos<a;){if(f<=0){var S=o.readVarint();u=7&S,f=S>>3}if(f--,u===1||u===2)v+=o.readSVarint(),_+=o.readSVarint(),u===1&&(n&&b.push(n),n=[]),n.push(new EI(v,_));else{if(u!==7)throw new Error("unknown command "+u);n&&n.push(n[0].clone())}}return n&&b.push(n),b},vc.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,a=1,u=0,f=0,v=0,_=1/0,b=-1/0,S=1/0,P=-1/0;o.pos<n;){if(u<=0){var R=o.readVarint();a=7&R,u=R>>3}if(u--,a===1||a===2)(f+=o.readSVarint())<_&&(_=f),f>b&&(b=f),(v+=o.readSVarint())<S&&(S=v),v>P&&(P=v);else if(a!==7)throw new Error("unknown command "+a)}return[_,S,b,P]},vc.prototype.toGeoJSON=function(o,n,a){var u,f,v=this.extent*Math.pow(2,a),_=this.extent*o,b=this.extent*n,S=this.loadGeometry(),P=vc.types[this.type];function R($){for(var G=0;G<$.length;G++){var X=$[G];$[G]=[360*(X.x+_)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(u=0;u<S.length;u++)L[u]=S[u][0];R(S=L);break;case 2:for(u=0;u<S.length;u++)R(S[u]);break;case 3:for(S=function($){var G=$.length;if(G<=1)return[$];for(var X,ie,le=[],be=0;be<G;be++){var fe=PI($[be]);fe!==0&&(ie===void 0&&(ie=fe<0),ie===fe<0?(X&&le.push(X),X=[$[be]]):X.push($[be]))}return X&&le.push(X),le}(S),u=0;u<S.length;u++)for(f=0;f<S[u].length;f++)R(S[u][f])}S.length===1?S=S[0]:P="Multi"+P;var O={type:"Feature",geometry:{type:P,coordinates:S},properties:this.properties};return"id"in this&&(O.id=this.id),O};var II=rx,ix=ox;function ox(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(kI,this,n),this.length=this._features.length}function kI(o,n,a){o===15?n.version=a.readVarint():o===1?n.name=a.readString():o===5?n.extent=a.readVarint():o===2?n._features.push(a.pos):o===3?n._keys.push(a.readString()):o===4&&n._values.push(function(u){for(var f=null,v=u.readVarint()+u.pos;u.pos<v;){var _=u.readVarint()>>3;f=_===1?u.readString():_===2?u.readFloat():_===3?u.readDouble():_===4?u.readVarint64():_===5?u.readVarint():_===6?u.readSVarint():_===7?u.readBoolean():null}return f}(a))}ox.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new II(this._pbf,n,this.extent,this._keys,this._values)};var MI=ix;function AI(o,n,a){if(o===3){var u=new MI(a,a.readVarint()+a.pos);u.length&&(n[u.name]=u)}}is.VectorTile=function(o,n){this.layers=o.readFields(AI,{},n)},is.VectorTileFeature=rx,is.VectorTileLayer=ix;const zI=is.VectorTileFeature.types,sy=Math.pow(2,13);function wh(o,n,a,u,f,v,_,b){o.emplaceBack(n,a,2*Math.floor(u*sy)+_,f*sy*2,v*sy*2,Math.round(b))}class ly{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.centroidVertexArray=new _a,this.indexArray=new es,this.programConfigurations=new ll(n.layers,n.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.features=[],this.hasPattern=iy("fill-extrusion",this.layers,a);for(const{feature:f,id:v,index:_,sourceLayerIndex:b}of n){const S=this.layers[0]._featureFilter.needGeometry,P=ul(f,S);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),P,u))continue;const R={id:v,sourceLayerIndex:b,index:_,geometry:S?P.geometry:cl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(oy("fill-extrusion",this.layers,R,this.zoom,a)):this.addFeature(R,R.geometry,_,u,{}),a.featureIndex.insert(f,R.geometry,_,b,this.index,!0)}}addFeatures(n,a,u){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,a,u)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,CI),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,SI.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,u,f,v){const _={x:0,y:0,vertexCount:0};for(const b of ec(a,500)){let S=0;for(const G of b)S+=G.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const G of b){if(G.length===0||LI(G))continue;let X=0;for(let ie=0;ie<G.length;ie++){const le=G[ie];if(ie>=1){const be=G[ie-1];if(!RI(le,be)){P.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const fe=le.sub(be)._perp()._unit(),_e=be.dist(le);X+_e>32768&&(X=0),wh(this.layoutVertexArray,le.x,le.y,fe.x,fe.y,0,0,X),wh(this.layoutVertexArray,le.x,le.y,fe.x,fe.y,0,1,X),_.x+=2*le.x,_.y+=2*le.y,_.vertexCount+=2,X+=_e,wh(this.layoutVertexArray,be.x,be.y,fe.x,fe.y,0,0,X),wh(this.layoutVertexArray,be.x,be.y,fe.x,fe.y,0,1,X),_.x+=2*be.x,_.y+=2*be.y,_.vertexCount+=2;const De=P.vertexLength;this.indexArray.emplaceBack(De,De+2,De+1),this.indexArray.emplaceBack(De+1,De+2,De+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+S>ur.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),zI[n.type]!=="Polygon")continue;const R=[],L=[],O=P.vertexLength;for(const G of b)if(G.length!==0){G!==b[0]&&L.push(R.length/2);for(let X=0;X<G.length;X++){const ie=G[X];wh(this.layoutVertexArray,ie.x,ie.y,0,0,1,1,0),_.x+=ie.x,_.y+=ie.y,_.vertexCount+=1,R.push(ie.x),R.push(ie.y)}}const $=ex(R,L);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(O+$[G],O+$[G+2],O+$[G+1]);P.primitiveLength+=$.length/3,P.vertexLength+=S}for(let b=0;b<_.vertexCount;b++)this.centroidVertexArray.emplaceBack(Math.floor(_.x/_.vertexCount),Math.floor(_.y/_.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,f)}}function RI(o,n){return o.x===n.x&&(o.x<0||o.x>Un)||o.y===n.y&&(o.y<0||o.y>Un)}function LI(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Un)||o.every(n=>n.y<0)||o.every(n=>n.y>Un)}let ax;ht("FillExtrusionBucket",ly,{omit:["layers","features"]});var FI={get paint(){return ax=ax||new p({"fill-extrusion-opacity":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new y(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new r(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new y(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new y(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gt(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class DI extends w{constructor(n){super(n,FI)}createBucket(n){return new ly(n)}queryRadius(){return Nf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,a,u,f,v,_,b,S){const P=jf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,b),R=this.paint.get("fill-extrusion-height").evaluate(a,u),L=this.paint.get("fill-extrusion-base").evaluate(a,u),O=function(G,X,ie,le){const be=[];for(const fe of G){const _e=[fe.x,fe.y,0,1];$f(_e,_e,X),be.push(new z(_e[0]/_e[3],_e[1]/_e[3]))}return be}(P,S),$=function(G,X,ie,le){const be=[],fe=[],_e=le[8]*X,De=le[9]*X,je=le[10]*X,st=le[11]*X,mt=le[8]*ie,it=le[9]*ie,nt=le[10]*ie,dt=le[11]*ie;for(const yt of G){const ot=[],$e=[];for(const pt of yt){const ft=pt.x,Lt=pt.y,ln=le[0]*ft+le[4]*Lt+le[12],cn=le[1]*ft+le[5]*Lt+le[13],Hn=le[2]*ft+le[6]*Lt+le[14],Oi=le[3]*ft+le[7]*Lt+le[15],Nr=Hn+je,nr=Oi+st,gr=ln+mt,jr=cn+it,Yr=Hn+nt,$r=Oi+dt,Wn=new z((ln+_e)/nr,(cn+De)/nr);Wn.z=Nr/nr,ot.push(Wn);const hr=new z(gr/$r,jr/$r);hr.z=Yr/$r,$e.push(hr)}be.push(ot),fe.push($e)}return[be,fe]}(f,L,R,S);return function(G,X,ie){let le=1/0;B1(ie,X)&&(le=sx(ie,X[0]));for(let be=0;be<X.length;be++){const fe=X[be],_e=G[be];for(let De=0;De<fe.length-1;De++){const je=fe[De],st=[je,fe[De+1],_e[De+1],_e[De],je];O1(ie,st)&&(le=Math.min(le,sx(ie,st)))}}return le!==1/0&&le}($[0],$[1],O)}}function Sh(o,n){return o.x*n.x+o.y*n.y}function sx(o,n){if(o.length===1){let a=0;const u=n[a++];let f;for(;!f||u.equals(f);)if(f=n[a++],!f)return 1/0;for(;a<n.length;a++){const v=n[a],_=o[0],b=f.sub(u),S=v.sub(u),P=_.sub(u),R=Sh(b,b),L=Sh(b,S),O=Sh(S,S),$=Sh(P,b),G=Sh(P,S),X=R*O-L*L,ie=(O*$-L*G)/X,le=(R*G-L*$)/X,be=u.z*(1-ie-le)+f.z*ie+v.z*le;if(isFinite(be))return be}return 1/0}{let a=1/0;for(const u of n)a=Math.min(a,u.z);return a}}const OI=F([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:BI}=OI,NI=F([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jI}=NI,$I=is.VectorTileFeature.types,VI=Math.cos(Math.PI/180*37.5),lx=Math.pow(2,14)/.5;class cy{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new ol,this.layoutVertexArray2=new Qn,this.indexArray=new es,this.programConfigurations=new ll(n.layers,n.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,u){this.hasPattern=iy("line",this.layers,a);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),_=[];for(const{feature:b,id:S,index:P,sourceLayerIndex:R}of n){const L=this.layers[0]._featureFilter.needGeometry,O=ul(b,L);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),O,u))continue;const $=v?f.evaluate(O,{},u):void 0,G={id:S,properties:b.properties,type:b.type,sourceLayerIndex:R,index:P,geometry:L?O.geometry:cl(b),patterns:{},sortKey:$};_.push(G)}v&&_.sort((b,S)=>b.sortKey-S.sortKey);for(const b of _){const{geometry:S,index:P,sourceLayerIndex:R}=b;if(this.hasPattern){const L=oy("line",this.layers,b,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(b,S,P,u,{});a.featureIndex.insert(n[P].feature,S,P,R,this.index)}}update(n,a,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,u)}addFeatures(n,a,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,a,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,jI)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,BI),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,u,f,v){const _=this.layers[0].layout,b=_.get("line-join").evaluate(n,{}),S=_.get("line-cap"),P=_.get("line-miter-limit"),R=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const L of a)this.addLine(L,n,b,S,P,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,u,v,f)}addLine(n,a,u,f,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<n.length-1;le++)this.totalDistance+=n[le].dist(n[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=$I[a.type]==="Polygon";let S=n.length;for(;S>=2&&n[S-1].equals(n[S-2]);)S--;let P=0;for(;P<S-1&&n[P].equals(n[P+1]);)P++;if(S<(b?3:2))return;u==="bevel"&&(v=1.05);const R=this.overscaling<=16?15*Un/(512*this.overscaling):0,L=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,$,G,X,ie;this.e1=this.e2=-1,b&&(O=n[S-2],ie=n[P].sub(O)._unit()._perp());for(let le=P;le<S;le++){if(G=le===S-1?b?n[P+1]:void 0:n[le+1],G&&n[le].equals(G))continue;ie&&(X=ie),O&&($=O),O=n[le],ie=G?G.sub(O)._unit()._perp():X,X=X||ie;let be=X.add(ie);be.x===0&&be.y===0||be._unit();const fe=X.x*ie.x+X.y*ie.y,_e=be.x*ie.x+be.y*ie.y,De=_e!==0?1/_e:1/0,je=2*Math.sqrt(2-2*_e),st=_e<VI&&$&&G,mt=X.x*ie.y-X.y*ie.x>0;if(st&&le>P){const dt=O.dist($);if(dt>2*R){const yt=O.sub(O.sub($)._mult(R/dt)._round());this.updateDistance($,yt),this.addCurrentVertex(yt,X,0,0,L),$=yt}}const it=$&&G;let nt=it?u:b?"butt":f;if(it&&nt==="round"&&(De<_?nt="miter":De<=2&&(nt="fakeround")),nt==="miter"&&De>v&&(nt="bevel"),nt==="bevel"&&(De>2&&(nt="flipbevel"),De<v&&(nt="miter")),$&&this.updateDistance($,O),nt==="miter")be._mult(De),this.addCurrentVertex(O,be,0,0,L);else if(nt==="flipbevel"){if(De>100)be=ie.mult(-1);else{const dt=De*X.add(ie).mag()/X.sub(ie).mag();be._perp()._mult(dt*(mt?-1:1))}this.addCurrentVertex(O,be,0,0,L),this.addCurrentVertex(O,be.mult(-1),0,0,L)}else if(nt==="bevel"||nt==="fakeround"){const dt=-Math.sqrt(De*De-1),yt=mt?dt:0,ot=mt?0:dt;if($&&this.addCurrentVertex(O,X,yt,ot,L),nt==="fakeround"){const $e=Math.round(180*je/Math.PI/20);for(let pt=1;pt<$e;pt++){let ft=pt/$e;if(ft!==.5){const ln=ft-.5;ft+=ft*ln*(ft-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*ln*ln+(.848013+fe*(.215638*fe-1.06021)))}const Lt=ie.sub(X)._mult(ft)._add(X)._unit()._mult(mt?-1:1);this.addHalfVertex(O,Lt.x,Lt.y,!1,mt,0,L)}}G&&this.addCurrentVertex(O,ie,-yt,-ot,L)}else if(nt==="butt")this.addCurrentVertex(O,be,0,0,L);else if(nt==="square"){const dt=$?1:-1;this.addCurrentVertex(O,be,dt,dt,L)}else nt==="round"&&($&&(this.addCurrentVertex(O,X,0,0,L),this.addCurrentVertex(O,X,1,1,L,!0)),G&&(this.addCurrentVertex(O,ie,-1,-1,L,!0),this.addCurrentVertex(O,ie,0,0,L)));if(st&&le<S-1){const dt=O.dist(G);if(dt>2*R){const yt=O.add(G.sub(O)._mult(R/dt)._round());this.updateDistance(O,yt),this.addCurrentVertex(yt,ie,0,0,L),O=yt}}}}addCurrentVertex(n,a,u,f,v,_=!1){const b=a.y*f-a.x,S=-a.y-a.x*f;this.addHalfVertex(n,a.x+a.y*u,a.y-a.x*u,_,!1,u,v),this.addHalfVertex(n,b,S,_,!0,-f,v),this.distance>lx/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,u,f,v,_))}addHalfVertex({x:n,y:a},u,f,v,_,b,S){const P=.5*(this.lineClips?this.scaledDistance*(lx-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(_?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),S.primitiveLength++),_?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let cx,ux;ht("LineBucket",cy,{omit:["layers","patternFeatures"]});var hx={get paint(){return ux=ux||new p({"line-opacity":new y(Ie.paint_line["line-opacity"]),"line-color":new y(Ie.paint_line["line-color"]),"line-translate":new gt(Ie.paint_line["line-translate"]),"line-translate-anchor":new gt(Ie.paint_line["line-translate-anchor"]),"line-width":new y(Ie.paint_line["line-width"]),"line-gap-width":new y(Ie.paint_line["line-gap-width"]),"line-offset":new y(Ie.paint_line["line-offset"]),"line-blur":new y(Ie.paint_line["line-blur"]),"line-dasharray":new l(Ie.paint_line["line-dasharray"]),"line-pattern":new r(Ie.paint_line["line-pattern"]),"line-gradient":new d(Ie.paint_line["line-gradient"])})},get layout(){return cx=cx||new p({"line-cap":new gt(Ie.layout_line["line-cap"]),"line-join":new y(Ie.layout_line["line-join"]),"line-miter-limit":new gt(Ie.layout_line["line-miter-limit"]),"line-round-limit":new gt(Ie.layout_line["line-round-limit"]),"line-sort-key":new y(Ie.layout_line["line-sort-key"])})}};class UI extends y{possiblyEvaluate(n,a){return a=new yn(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,u,f){return a=ue({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,u,f)}}let qf;class HI extends w{constructor(n){super(n,hx),this.gradientVersion=0,qf||(qf=new UI(hx.paint.properties["line-width"].specification),qf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(u){return u._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof js,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=qf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new cy(n)}queryRadius(n){const a=n,u=dx(gh("line-width",this,a),gh("line-gap-width",this,a)),f=gh("line-offset",this,a);return u/2+Math.abs(f)+Nf(this.paint.get("line-translate"))}queryIntersectsFeature(n,a,u,f,v,_,b){const S=jf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,b),P=b/2*dx(this.paint.get("line-width").evaluate(a,u),this.paint.get("line-gap-width").evaluate(a,u)),R=this.paint.get("line-offset").evaluate(a,u);return R&&(f=function(L,O){const $=[];for(let G=0;G<L.length;G++){const X=L[G],ie=[];for(let le=0;le<X.length;le++){const be=X[le-1],fe=X[le],_e=X[le+1],De=le===0?new z(0,0):fe.sub(be)._unit()._perp(),je=le===X.length-1?new z(0,0):_e.sub(fe)._unit()._perp(),st=De._add(je)._unit(),mt=st.x*je.x+st.y*je.y;mt!==0&&st._mult(1/mt),ie.push(st._mult(O)._add(fe))}$.push(ie)}return $}(f,R*b)),function(L,O,$){for(let G=0;G<O.length;G++){const X=O[G];if(L.length>=3){for(let ie=0;ie<X.length;ie++)if(mc(L,X[ie]))return!0}if(QP(L,X,$))return!0}return!1}(S,f,P)}isTileClipped(){return!0}}function dx(o,n){return n>0?n+2*o:o}const WI=F([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qI=F([{name:"a_projected_pos",components:3,type:"Float32"}],4);F([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const GI=F([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);F([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const fx=F([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ZI=F([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function KI(o,n,a){return o.sections.forEach(u=>{u.text=function(f,v,_){const b=v.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),So.applyArabicShaping&&(f=So.applyArabicShaping(f)),f}(u.text,n,a)}),o}F([{name:"triangle",components:3,type:"Uint16"}]),F([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),F([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),F([{type:"Float32",name:"offsetX"}]),F([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),F([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ch={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var tr=24,px=sn,mx=function(o,n,a,u,f){var v,_,b=8*f-u-1,S=(1<<b)-1,P=S>>1,R=-7,L=f-1,O=-1,$=o[n+L];for(L+=O,v=$&(1<<-R)-1,$>>=-R,R+=b;R>0;v=256*v+o[n+L],L+=O,R-=8);for(_=v&(1<<-R)-1,v>>=-R,R+=u;R>0;_=256*_+o[n+L],L+=O,R-=8);if(v===0)v=1-P;else{if(v===S)return _?NaN:1/0*($?-1:1);_+=Math.pow(2,u),v-=P}return($?-1:1)*_*Math.pow(2,v-u)},gx=function(o,n,a,u,f,v){var _,b,S,P=8*v-f-1,R=(1<<P)-1,L=R>>1,O=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=0,G=1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,_=R):(_=Math.floor(Math.log(n)/Math.LN2),n*(S=Math.pow(2,-_))<1&&(_--,S*=2),(n+=_+L>=1?O/S:O*Math.pow(2,1-L))*S>=2&&(_++,S/=2),_+L>=R?(b=0,_=R):_+L>=1?(b=(n*S-1)*Math.pow(2,f),_+=L):(b=n*Math.pow(2,L-1)*Math.pow(2,f),_=0));f>=8;o[a+$]=255&b,$+=G,b/=256,f-=8);for(_=_<<f|b,P+=f;P>0;o[a+$]=255&_,$+=G,_/=256,P-=8);o[a+$-G]|=128*X};function sn(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}sn.Varint=0,sn.Fixed64=1,sn.Bytes=2,sn.Fixed32=5;var uy=4294967296,yx=1/uy,vx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ba(o){return o.type===sn.Bytes?o.readVarint()+o.pos:o.pos+1}function _c(o,n,a){return a?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function _x(o,n,a){var u=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(u);for(var f=a.pos-1;f>=o;f--)a.buf[f+u]=a.buf[f]}function XI(o,n){for(var a=0;a<o.length;a++)n.writeVarint(o[a])}function YI(o,n){for(var a=0;a<o.length;a++)n.writeSVarint(o[a])}function JI(o,n){for(var a=0;a<o.length;a++)n.writeFloat(o[a])}function QI(o,n){for(var a=0;a<o.length;a++)n.writeDouble(o[a])}function ek(o,n){for(var a=0;a<o.length;a++)n.writeBoolean(o[a])}function tk(o,n){for(var a=0;a<o.length;a++)n.writeFixed32(o[a])}function nk(o,n){for(var a=0;a<o.length;a++)n.writeSFixed32(o[a])}function rk(o,n){for(var a=0;a<o.length;a++)n.writeFixed64(o[a])}function ik(o,n){for(var a=0;a<o.length;a++)n.writeSFixed64(o[a])}function Gf(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function xc(o,n,a){o[a]=n,o[a+1]=n>>>8,o[a+2]=n>>>16,o[a+3]=n>>>24}function xx(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}sn.prototype={destroy:function(){this.buf=null},readFields:function(o,n,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),f=u>>3,v=this.pos;this.type=7&u,o(f,n,this),this.pos===v&&this.skip(u)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Gf(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=xx(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Gf(this.buf,this.pos)+Gf(this.buf,this.pos+4)*uy;return this.pos+=8,o},readSFixed64:function(){var o=Gf(this.buf,this.pos)+xx(this.buf,this.pos+4)*uy;return this.pos+=8,o},readFloat:function(){var o=mx(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=mx(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,a,u=this.buf;return n=127&(a=u[this.pos++]),a<128?n:(n|=(127&(a=u[this.pos++]))<<7,a<128?n:(n|=(127&(a=u[this.pos++]))<<14,a<128?n:(n|=(127&(a=u[this.pos++]))<<21,a<128?n:function(f,v,_){var b,S,P=_.buf;if(b=(112&(S=P[_.pos++]))>>4,S<128||(b|=(127&(S=P[_.pos++]))<<3,S<128)||(b|=(127&(S=P[_.pos++]))<<10,S<128)||(b|=(127&(S=P[_.pos++]))<<17,S<128)||(b|=(127&(S=P[_.pos++]))<<24,S<128)||(b|=(1&(S=P[_.pos++]))<<31,S<128))return _c(f,b,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&vx?function(a,u,f){return vx.decode(a.subarray(u,f))}(this.buf,n,o):function(a,u,f){for(var v="",_=u;_<f;){var b,S,P,R=a[_],L=null,O=R>239?4:R>223?3:R>191?2:1;if(_+O>f)break;O===1?R<128&&(L=R):O===2?(192&(b=a[_+1]))==128&&(L=(31&R)<<6|63&b)<=127&&(L=null):O===3?(S=a[_+2],(192&(b=a[_+1]))==128&&(192&S)==128&&((L=(15&R)<<12|(63&b)<<6|63&S)<=2047||L>=55296&&L<=57343)&&(L=null)):O===4&&(S=a[_+2],P=a[_+3],(192&(b=a[_+1]))==128&&(192&S)==128&&(192&P)==128&&((L=(15&R)<<18|(63&b)<<12|(63&S)<<6|63&P)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,O=1):L>65535&&(L-=65536,v+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),v+=String.fromCharCode(L),_+=O}return v}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==sn.Bytes)return o.push(this.readVarint(n));var a=ba(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==sn.Bytes)return o.push(this.readSVarint());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==sn.Bytes)return o.push(this.readBoolean());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==sn.Bytes)return o.push(this.readFloat());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==sn.Bytes)return o.push(this.readDouble());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==sn.Bytes)return o.push(this.readFixed32());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==sn.Bytes)return o.push(this.readSFixed32());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==sn.Bytes)return o.push(this.readFixed64());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==sn.Bytes)return o.push(this.readSFixed64());var n=ba(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===sn.Varint)for(;this.buf[this.pos++]>127;);else if(n===sn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===sn.Fixed32)this.pos+=4;else{if(n!==sn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),xc(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),xc(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),xc(this.buf,-1&o,this.pos),xc(this.buf,Math.floor(o*yx),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),xc(this.buf,-1&o,this.pos),xc(this.buf,Math.floor(o*yx),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,a){var u,f;if(n>=0?(u=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(u=~(-n%4294967296))?u=u+1|0:(u=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,_,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(u,0,a),function(v,_){var b=(7&v)<<4;_.buf[_.pos++]|=b|((v>>>=3)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v|((v>>>=7)?128:0),v&&(_.buf[_.pos++]=127&v)))))}(f,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(u,f,v){for(var _,b,S=0;S<f.length;S++){if((_=f.charCodeAt(S))>55295&&_<57344){if(!b){_>56319||S+1===f.length?(u[v++]=239,u[v++]=191,u[v++]=189):b=_;continue}if(_<56320){u[v++]=239,u[v++]=191,u[v++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(u[v++]=239,u[v++]=191,u[v++]=189,b=null);_<128?u[v++]=_:(_<2048?u[v++]=_>>6|192:(_<65536?u[v++]=_>>12|224:(u[v++]=_>>18|240,u[v++]=_>>12&63|128),u[v++]=_>>6&63|128),u[v++]=63&_|128)}return v}(this.buf,o,this.pos);var a=this.pos-n;a>=128&&_x(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),gx(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),gx(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,n){this.pos++;var a=this.pos;o(n,this);var u=this.pos-a;u>=128&&_x(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,n,a){this.writeTag(o,sn.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,XI,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,YI,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,ek,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,JI,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,QI,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,tk,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,nk,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,rk,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,ik,n)},writeBytesField:function(o,n){this.writeTag(o,sn.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,sn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,sn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,sn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,sn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,sn.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,sn.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,sn.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,sn.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,sn.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,!!n)}};var hy=C(px);const dy=3;function ok(o,n,a){o===1&&a.readMessage(ak,n)}function ak(o,n,a){if(o===3){const{id:u,bitmap:f,width:v,height:_,left:b,top:S,advance:P}=a.readMessage(sk,{});n.push({id:u,bitmap:new vh({width:v+2*dy,height:_+2*dy},f),metrics:{width:v,height:_,left:b,top:S,advance:P}})}}function sk(o,n,a){o===1?n.id=a.readVarint():o===2?n.bitmap=a.readBytes():o===3?n.width=a.readVarint():o===4?n.height=a.readVarint():o===5?n.left=a.readSVarint():o===6?n.top=a.readSVarint():o===7&&(n.advance=a.readVarint())}const bx=dy;function wx(o){let n=0,a=0;for(const _ of o)n+=_.w*_.h,a=Math.max(a,_.w);o.sort((_,b)=>b.h-_.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let f=0,v=0;for(const _ of o)for(let b=u.length-1;b>=0;b--){const S=u[b];if(!(_.w>S.w||_.h>S.h)){if(_.x=S.x,_.y=S.y,v=Math.max(v,_.y+_.h),f=Math.max(f,_.x+_.w),_.w===S.w&&_.h===S.h){const P=u.pop();b<u.length&&(u[b]=P)}else _.h===S.h?(S.x+=_.w,S.w-=_.w):_.w===S.w?(S.y+=_.h,S.h-=_.h):(u.push({x:S.x+_.w,y:S.y,w:S.w-_.w,h:_.h}),S.y+=_.h,S.h-=_.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const ci=1;class fy{constructor(n,{pixelRatio:a,version:u,stretchX:f,stretchY:v,content:_,textFitWidth:b,textFitHeight:S}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=f,this.stretchY=v,this.content=_,this.version=u,this.textFitWidth=b,this.textFitHeight=S}get tl(){return[this.paddedRect.x+ci,this.paddedRect.y+ci]}get br(){return[this.paddedRect.x+this.paddedRect.w-ci,this.paddedRect.y+this.paddedRect.h-ci]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ci)/this.pixelRatio,(this.paddedRect.h-2*ci)/this.pixelRatio]}}class Sx{constructor(n,a){const u={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,u,v),this.addImages(a,f,v);const{w:_,h:b}=wx(v),S=new Fi({width:_||1,height:b||1});for(const P in n){const R=n[P],L=u[P].paddedRect;Fi.copy(R.data,S,{x:0,y:0},{x:L.x+ci,y:L.y+ci},R.data)}for(const P in a){const R=a[P],L=f[P].paddedRect,O=L.x+ci,$=L.y+ci,G=R.data.width,X=R.data.height;Fi.copy(R.data,S,{x:0,y:0},{x:O,y:$},R.data),Fi.copy(R.data,S,{x:0,y:X-1},{x:O,y:$-1},{width:G,height:1}),Fi.copy(R.data,S,{x:0,y:0},{x:O,y:$+X},{width:G,height:1}),Fi.copy(R.data,S,{x:G-1,y:0},{x:O-1,y:$},{width:1,height:X}),Fi.copy(R.data,S,{x:0,y:0},{x:O+G,y:$},{width:1,height:X})}this.image=S,this.iconPositions=u,this.patternPositions=f}addImages(n,a,u){for(const f in n){const v=n[f],_={x:0,y:0,w:v.data.width+2*ci,h:v.data.height+2*ci};u.push(_),a[f]=new fy(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in n.updatedImages)this.patchUpdatedImage(this.iconPositions[u],n.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],n.getImage(u),a)}patchUpdatedImage(n,a,u){if(!n||!a||n.version===a.version)return;n.version=a.version;const[f,v]=n.tl;u.update(a.data,void 0,{x:f,y:v})}}var os;ht("ImagePosition",fy),ht("ImageAtlas",Sx),g.ah=void 0,(os=g.ah||(g.ah={}))[os.none=0]="none",os[os.horizontal=1]="horizontal",os[os.vertical=2]="vertical",os[os.horizontalOnly=3]="horizontalOnly";const Eh=-17;class Th{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const u=new Th;return u.scale=n||1,u.fontStack=a,u}static forImage(n){const a=new Th;return a.imageName=n,a}}class bc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const u=new bc;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?u.addImageSection(v):u.addTextSection(v,a)}return u}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let u=0;u<n.length;u++){const f=n.charCodeAt(u+1)||null,v=n.charCodeAt(u-1)||null;a+=f&&Ko(f)&&!Ch[n[u+1]]||v&&Ko(v)&&!Ch[n[u-1]]||!Ch[n[u]]?n[u]:Ch[n[u]]}return a}(this.text)}trim(){let n=0;for(let u=0;u<this.text.length&&Kf[this.text.charCodeAt(u)];u++)n++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=n&&Kf[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const u=new bc;return u.text=this.text.substring(n,a),u.sectionIndex=this.sectionIndex.slice(n,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Th.forText(n.scale,n.fontStack||a));const u=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(u)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Ze("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Th.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Zf(o,n,a,u,f,v,_,b,S,P,R,L,O,$,G,X){const ie=bc.fromFeature(o,f);let le;L===g.ah.vertical&&ie.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:fe}=So;if(be&&ie.sections.length===1){le=[];const je=be(ie.toString(),py(ie,P,v,n,u,$,G));for(const st of je){const mt=new bc;mt.text=st,mt.sections=ie.sections;for(let it=0;it<st.length;it++)mt.sectionIndex.push(0);le.push(mt)}}else if(fe){le=[];const je=fe(ie.text,ie.sectionIndex,py(ie,P,v,n,u,$,G));for(const st of je){const mt=new bc;mt.text=st[0],mt.sectionIndex=st[1],mt.sections=ie.sections,le.push(mt)}}else le=function(je,st){const mt=[],it=je.text;let nt=0;for(const dt of st)mt.push(je.substring(nt,dt)),nt=dt;return nt<it.length&&mt.push(je.substring(nt,it.length)),mt}(ie,py(ie,P,v,n,u,$,G));const _e=[],De={positionedLines:_e,text:ie.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(je,st,mt,it,nt,dt,yt,ot,$e,pt,ft,Lt){let ln=0,cn=Eh,Hn=0,Oi=0;const Nr=ot==="right"?1:ot==="left"?0:.5;let nr=0;for(const Wn of nt){Wn.trim();const hr=Wn.getMaxScale(),Jr=(hr-1)*tr,ui={positionedGlyphs:[],lineOffset:0};je.positionedLines[nr]=ui;const Ir=ui.positionedGlyphs;let hi=0;if(!Wn.length()){cn+=dt,++nr;continue}for(let Ln=0;Ln<Wn.length();Ln++){const Vt=Wn.getSection(Ln),qn=Wn.getSectionIndex(Ln),kr=Wn.getCharCode(Ln);let rr=0,ao=null,Eo=null,To=null,wa=tr;const so=!($e===g.ah.horizontal||!ft&&!sh(kr)||ft&&(Kf[kr]||(gr=kr,at.Arabic(gr)||at["Arabic Supplement"](gr)||at["Arabic Extended-A"](gr)||at["Arabic Presentation Forms-A"](gr)||at["Arabic Presentation Forms-B"](gr))));if(Vt.imageName){const Ni=it[Vt.imageName];if(!Ni)continue;To=Vt.imageName,je.iconsInText=je.iconsInText||!0,Eo=Ni.paddedRect;const di=Ni.displaySize;Vt.scale=Vt.scale*tr/Lt,ao={width:di[0],height:di[1],left:ci,top:-bx,advance:so?di[1]:di[0]},rr=Jr+(tr-di[1]*Vt.scale),wa=ao.advance;const Sa=so?di[0]*Vt.scale-tr*hr:di[1]*Vt.scale-tr*hr;Sa>0&&Sa>hi&&(hi=Sa)}else{const Ni=mt[Vt.fontStack],di=Ni&&Ni[kr];if(di&&di.rect)Eo=di.rect,ao=di.metrics;else{const Sa=st[Vt.fontStack],Ah=Sa&&Sa[kr];if(!Ah)continue;ao=Ah.metrics}rr=(hr-Vt.scale)*tr}so?(je.verticalizable=!0,Ir.push({glyph:kr,imageName:To,x:ln,y:cn+rr,vertical:so,scale:Vt.scale,fontStack:Vt.fontStack,sectionIndex:qn,metrics:ao,rect:Eo}),ln+=wa*Vt.scale+pt):(Ir.push({glyph:kr,imageName:To,x:ln,y:cn+rr,vertical:so,scale:Vt.scale,fontStack:Vt.fontStack,sectionIndex:qn,metrics:ao,rect:Eo}),ln+=ao.advance*Vt.scale+pt)}Ir.length!==0&&(Hn=Math.max(ln-pt,Hn),uk(Ir,0,Ir.length-1,Nr,hi)),ln=0;const Bi=dt*hr+hi;ui.lineOffset=Math.max(hi,Jr),cn+=Bi,Oi=Math.max(Bi,Oi),++nr}var gr;const jr=cn-Eh,{horizontalAlign:Yr,verticalAlign:$r}=my(yt);(function(Wn,hr,Jr,ui,Ir,hi,Bi,Ln,Vt){const qn=(hr-Jr)*Ir;let kr=0;kr=hi!==Bi?-Ln*ui-Eh:(-ui*Vt+.5)*Bi;for(const rr of Wn)for(const ao of rr.positionedGlyphs)ao.x+=qn,ao.y+=kr})(je.positionedLines,Nr,Yr,$r,Hn,Oi,dt,jr,nt.length),je.top+=-$r*jr,je.bottom=je.top+jr,je.left+=-Yr*Hn,je.right=je.left+Hn}(De,n,a,u,le,_,b,S,L,P,O,X),!function(je){for(const st of je)if(st.positionedGlyphs.length!==0)return!1;return!0}(_e)&&De}const Kf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Cx(o,n,a,u,f,v){if(n.imageName){const _=u[n.imageName];return _?_.displaySize[0]*n.scale*tr/v+f:0}{const _=a[n.fontStack],b=_&&_[o];return b?b.metrics.advance*n.scale+f:0}}function Ex(o,n,a,u){const f=Math.pow(o-n,2);return u?o<n?f/2:2*f:f+Math.abs(a)*a}function ck(o,n,a){let u=0;return o===10&&(u-=1e4),a&&(u+=150),o!==40&&o!==65288||(u+=50),n!==41&&n!==65289||(u+=50),u}function Tx(o,n,a,u,f,v){let _=null,b=Ex(n,a,f,v);for(const S of u){const P=Ex(n-S.x,a,f,v)+S.badness;P<=b&&(_=S,b=P)}return{index:o,x:n,priorBreak:_,badness:b}}function Px(o){return o?Px(o.priorBreak).concat(o.index):[]}function py(o,n,a,u,f,v,_){if(v!=="point")return[];if(!o)return[];const b=[],S=function(O,$,G,X,ie,le){let be=0;for(let fe=0;fe<O.length();fe++){const _e=O.getSection(fe);be+=Cx(O.getCharCode(fe),_e,X,ie,$,le)}return be/Math.max(1,Math.ceil(be/G))}(o,n,a,u,f,_),P=o.text.indexOf("")>=0;let R=0;for(let O=0;O<o.length();O++){const $=o.getSection(O),G=o.getCharCode(O);if(Kf[G]||(R+=Cx(G,$,u,f,n,_)),O<o.length()-1){const X=!((L=G)<11904||!(at["Bopomofo Extended"](L)||at.Bopomofo(L)||at["CJK Compatibility Forms"](L)||at["CJK Compatibility Ideographs"](L)||at["CJK Compatibility"](L)||at["CJK Radicals Supplement"](L)||at["CJK Strokes"](L)||at["CJK Symbols and Punctuation"](L)||at["CJK Unified Ideographs Extension A"](L)||at["CJK Unified Ideographs"](L)||at["Enclosed CJK Letters and Months"](L)||at["Halfwidth and Fullwidth Forms"](L)||at.Hiragana(L)||at["Ideographic Description Characters"](L)||at["Kangxi Radicals"](L)||at["Katakana Phonetic Extensions"](L)||at.Katakana(L)||at["Vertical Forms"](L)||at["Yi Radicals"](L)||at["Yi Syllables"](L)));(lk[G]||X||$.imageName)&&b.push(Tx(O+1,R,S,b,ck(G,o.getCharCode(O+1),X&&P),!1))}}var L;return Px(Tx(o.length(),R,S,b,0,!0))}function my(o){let n=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function uk(o,n,a,u,f){if(!u&&!f)return;const v=o[a],_=(o[a].x+v.metrics.advance*v.scale)*u;for(let b=n;b<=a;b++)o[b].x-=_,o[b].y+=f}function hk(o,n,a){const{horizontalAlign:u,verticalAlign:f}=my(a),v=n[0]-o.displaySize[0]*u,_=n[1]-o.displaySize[1]*f;return{image:o,top:_,bottom:_+o.displaySize[1],left:v,right:v+o.displaySize[0]}}function Ix(o){var n,a;let u=o.left,f=o.top,v=o.right-u,_=o.bottom-f;const b=(n=o.image.textFitWidth)!==null&&n!==void 0?n:"stretchOrShrink",S=(a=o.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",P=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(S==="proportional"){if(b==="stretchOnly"&&v/_<P||b==="proportional"){const R=Math.ceil(_*P);u*=R/v,v=R}}else if(b==="proportional"&&S==="stretchOnly"&&P!==0&&v/_>P){const R=Math.ceil(v/P);f*=R/_,_=R}return{x1:u,y1:f,x2:u+v,y2:f+_}}function kx(o,n,a,u,f,v){const _=o.image;let b;if(_.content){const ie=_.content,le=_.pixelRatio||1;b=[ie[0]/le,ie[1]/le,_.displaySize[0]-ie[2]/le,_.displaySize[1]-ie[3]/le]}const S=n.left*v,P=n.right*v;let R,L,O,$;a==="width"||a==="both"?($=f[0]+S-u[3],L=f[0]+P+u[1]):($=f[0]+(S+P-_.displaySize[0])/2,L=$+_.displaySize[0]);const G=n.top*v,X=n.bottom*v;return a==="height"||a==="both"?(R=f[1]+G-u[0],O=f[1]+X+u[2]):(R=f[1]+(G+X-_.displaySize[1])/2,O=R+_.displaySize[1]),{image:_,top:R,right:L,bottom:O,left:$,collisionPadding:b}}const Ph=255,Yo=128,as=Ph*Yo;function Mx(o,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new yn(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=a;let v=0;for(;v<u.length&&u[v]<=o;)v++;v=Math.max(0,v-1);let _=v;for(;_<u.length&&u[_]<o+1;)_++;_=Math.min(u.length-1,_);const b=u[v],S=u[_];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:S,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:S,minSize:a.evaluate(new yn(b)),maxSize:a.evaluate(new yn(S)),interpolationType:f}}}function gy(o,n,a){let u="never";const f=o.get(n);return f?u=f:o.get(a)&&(u="always"),u}const dk=is.VectorTileFeature.types,fk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xf(o,n,a,u,f,v,_,b,S,P,R,L,O){const $=b?Math.min(as,Math.round(b[0])):0,G=b?Math.min(as,Math.round(b[1])):0;o.emplaceBack(n,a,Math.round(32*u),Math.round(32*f),v,_,($<<1)+(S?1:0),G,16*P,16*R,256*L,256*O)}function yy(o,n,a){o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a),o.emplaceBack(n.x,n.y,a)}function pk(o){for(const n of o.sections)if(zf(n.text))return!0;return!1}class vy{constructor(n){this.layoutVertexArray=new wi,this.indexArray=new es,this.programConfigurations=n,this.segments=new ur,this.dynamicLayoutVertexArray=new er,this.opacityVertexArray=new $g,this.hasVisibleVertices=!1,this.placedSymbolArray=new li}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,WI.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,qI.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fk,!0),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ht("SymbolBuffers",vy);class _y{constructor(n,a,u){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new u,this.segments=new ur,this.collisionVertexArray=new Vg}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,GI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ht("CollisionBuffers",_y);class wc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yg([]),this.placementViewportMatrix=Yg([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mx(this.zoom,a["text-size"]),this.iconSizeData=Mx(this.zoom,a["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),v=u.get("symbol-z-order");this.canOverlap=gy(u,"text-overlap","text-allow-overlap")!=="never"||gy(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map(_=>g.ah[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID}createArrays(){this.text=new vy(new ll(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new vy(new ll(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Kr,this.lineVertexArray=new Li,this.symbolInstances=new Rn,this.textAnchorOffsets=new Xo}calculateGlyphDependencies(n,a,u,f,v){for(let _=0;_<n.length;_++)if(a[n.charCodeAt(_)]=!0,(u||f)&&v){const b=Ch[n.charAt(_)];b&&(a[b.charCodeAt(0)]=!0)}}populate(n,a,u){const f=this.layers[0],v=f.layout,_=v.get("text-font"),b=v.get("text-field"),S=v.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof ri&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),R=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,L=v.get("symbol-sort-key");if(this.features=[],!P&&!R)return;const O=a.iconDependencies,$=a.glyphDependencies,G=a.availableImages,X=new yn(this.zoom);for(const{feature:ie,id:le,index:be,sourceLayerIndex:fe}of n){const _e=f._featureFilter.needGeometry,De=ul(ie,_e);if(!f._featureFilter.filter(X,De,u))continue;let je,st;if(_e||(De.geometry=cl(ie)),P){const it=f.getValueAndResolveTokens("text-field",De,u,G),nt=ri.factory(it),dt=this.hasRTLText=this.hasRTLText||pk(nt);(!dt||So.getRTLTextPluginStatus()==="unavailable"||dt&&So.isParsed())&&(je=KI(nt,f,De))}if(R){const it=f.getValueAndResolveTokens("icon-image",De,u,G);st=it instanceof xi?it:xi.fromString(it)}if(!je&&!st)continue;const mt=this.sortFeaturesByKey?L.evaluate(De,{},u):void 0;if(this.features.push({id:le,text:je,icon:st,index:be,sourceLayerIndex:fe,geometry:De.geometry,properties:ie.properties,type:dk[ie.type],sortKey:mt}),st&&(O[st.name]=!0),je){const it=_.evaluate(De,{},u).join(","),nt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.ah.vertical)>=0;for(const dt of je.sections)if(dt.image)O[dt.image.name]=!0;else{const yt=ah(je.toString()),ot=dt.fontStack||it,$e=$[ot]=$[ot]||{};this.calculateGlyphDependencies(dt.text,$e,nt,this.allowVerticalPlacement,yt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ie){const le={},be={},fe=[];let _e=0;function De(it){fe.push(ie[it]),_e++}function je(it,nt,dt){const yt=be[it];return delete be[it],be[nt]=yt,fe[yt].geometry[0].pop(),fe[yt].geometry[0]=fe[yt].geometry[0].concat(dt[0]),yt}function st(it,nt,dt){const yt=le[nt];return delete le[nt],le[it]=yt,fe[yt].geometry[0].shift(),fe[yt].geometry[0]=dt[0].concat(fe[yt].geometry[0]),yt}function mt(it,nt,dt){const yt=dt?nt[0][nt[0].length-1]:nt[0][0];return`${it}:${yt.x}:${yt.y}`}for(let it=0;it<ie.length;it++){const nt=ie[it],dt=nt.geometry,yt=nt.text?nt.text.toString():null;if(!yt){De(it);continue}const ot=mt(yt,dt),$e=mt(yt,dt,!0);if(ot in be&&$e in le&&be[ot]!==le[$e]){const pt=st(ot,$e,dt),ft=je(ot,$e,fe[pt].geometry);delete le[ot],delete be[$e],be[mt(yt,fe[ft].geometry,!0)]=ft,fe[pt].geometry=null}else ot in be?je(ot,$e,dt):$e in le?st(ot,$e,dt):(De(it),le[ot]=_e-1,be[$e]=_e-1)}return fe.filter(it=>it.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,le)=>ie.sortKey-le.sortKey)}update(n,a,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,u),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const u=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const _={};for(let b=n.segment+1;b<a.length;b++)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:f},b<a.length-1&&(f+=a[b+1].dist(a[b]));for(let b=n.segment||0;b>=0;b--)_[b]={x:a[b].x,y:a[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=a[b-1].dist(a[b]));for(let b=0;b<a.length;b++){const S=_[b];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(n,a,u,f,v,_,b,S,P,R,L,O){const $=n.indexArray,G=n.layoutVertexArray,X=n.segments.prepareSegment(4*a.length,G,$,this.canOverlap?_.sortKey:void 0),ie=this.glyphOffsetArray.length,le=X.vertexLength,be=this.allowVerticalPlacement&&b===g.ah.vertical?Math.PI/2:0,fe=_.text&&_.text.sections;for(let _e=0;_e<a.length;_e++){const{tl:De,tr:je,bl:st,br:mt,tex:it,pixelOffsetTL:nt,pixelOffsetBR:dt,minFontScaleX:yt,minFontScaleY:ot,glyphOffset:$e,isSDF:pt,sectionIndex:ft}=a[_e],Lt=X.vertexLength,ln=$e[1];Xf(G,S.x,S.y,De.x,ln+De.y,it.x,it.y,u,pt,nt.x,nt.y,yt,ot),Xf(G,S.x,S.y,je.x,ln+je.y,it.x+it.w,it.y,u,pt,dt.x,nt.y,yt,ot),Xf(G,S.x,S.y,st.x,ln+st.y,it.x,it.y+it.h,u,pt,nt.x,dt.y,yt,ot),Xf(G,S.x,S.y,mt.x,ln+mt.y,it.x+it.w,it.y+it.h,u,pt,dt.x,dt.y,yt,ot),yy(n.dynamicLayoutVertexArray,S,be),$.emplaceBack(Lt,Lt+1,Lt+2),$.emplaceBack(Lt+1,Lt+2,Lt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($e[0]),_e!==a.length-1&&ft===a[_e+1].sectionIndex||n.programConfigurations.populatePaintArrays(G.length,_,_.index,{},O,fe&&fe[ft])}n.placedSymbolArray.emplaceBack(S.x,S.y,ie,this.glyphOffsetArray.length-ie,le,P,R,S.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],b,0,!1,0,L)}_addCollisionDebugVertex(n,a,u,f,v,_){return a.emplaceBack(0,0),n.emplaceBack(u.x,u.y,f,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(n,a,u,f,v,_,b){const S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),P=S.vertexLength,R=v.layoutVertexArray,L=v.collisionVertexArray,O=b.anchorX,$=b.anchorY;this._addCollisionDebugVertex(R,L,_,O,$,new z(n,a)),this._addCollisionDebugVertex(R,L,_,O,$,new z(u,a)),this._addCollisionDebugVertex(R,L,_,O,$,new z(u,f)),this._addCollisionDebugVertex(R,L,_,O,$,new z(n,f)),S.vertexLength+=4;const G=v.indexArray;G.emplaceBack(P,P+1),G.emplaceBack(P+1,P+2),G.emplaceBack(P+2,P+3),G.emplaceBack(P+3,P),S.primitiveLength+=4}addDebugCollisionBoxes(n,a,u,f){for(let v=n;v<a;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,f?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _y(Lf,fx.members,hh),this.iconCollisionBox=new _y(Lf,fx.members,hh);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,u,f,v,_,b,S,P){const R={};for(let L=a;L<u;L++){const O=n.get(L);R.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},R.textFeatureIndex=O.featureIndex;break}for(let L=f;L<v;L++){const O=n.get(L);R.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},R.verticalTextFeatureIndex=O.featureIndex;break}for(let L=_;L<b;L++){const O=n.get(L);R.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},R.iconFeatureIndex=O.featureIndex;break}for(let L=S;L<P;L++){const O=n.get(L);R.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},R.verticalIconFeatureIndex=O.featureIndex;break}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const u=n.placedSymbolArray.get(a),f=u.vertexStartIndex+4*u.numGlyphs;for(let v=u.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),u=Math.cos(n),f=[],v=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const S=this.symbolInstances.get(b);f.push(0|Math.round(a*S.anchorX+u*S.anchorY)),v.push(S.featureIndex)}return _.sort((b,S)=>f[b]-f[S]||v[S]-v[b]),_}addToSortKeyRanges(n,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach((f,v,_)=>{f>=0&&_.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Ax,zx;ht("SymbolBucket",wc,{omit:["layers","collisionBoxArray","features","compareText"]}),wc.MAX_GLYPHS=65535,wc.addDynamicAttributes=yy;var xy={get paint(){return zx=zx||new p({"icon-opacity":new y(Ie.paint_symbol["icon-opacity"]),"icon-color":new y(Ie.paint_symbol["icon-color"]),"icon-halo-color":new y(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new y(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new y(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new gt(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new gt(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new y(Ie.paint_symbol["text-opacity"]),"text-color":new y(Ie.paint_symbol["text-color"],{runtimeType:mr,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new y(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new y(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new y(Ie.paint_symbol["text-halo-blur"]),"text-translate":new gt(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new gt(Ie.paint_symbol["text-translate-anchor"])})},get layout(){return Ax=Ax||new p({"symbol-placement":new gt(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new gt(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gt(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new y(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gt(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gt(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gt(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gt(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new gt(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gt(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new y(Ie.layout_symbol["icon-size"]),"icon-text-fit":new gt(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gt(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new y(Ie.layout_symbol["icon-image"]),"icon-rotate":new y(Ie.layout_symbol["icon-rotate"]),"icon-padding":new y(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new gt(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new y(Ie.layout_symbol["icon-offset"]),"icon-anchor":new y(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gt(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gt(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gt(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new y(Ie.layout_symbol["text-field"]),"text-font":new y(Ie.layout_symbol["text-font"]),"text-size":new y(Ie.layout_symbol["text-size"]),"text-max-width":new y(Ie.layout_symbol["text-max-width"]),"text-line-height":new gt(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new y(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new y(Ie.layout_symbol["text-justify"]),"text-radial-offset":new y(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gt(Ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new y(Ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new y(Ie.layout_symbol["text-anchor"]),"text-max-angle":new gt(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new gt(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new y(Ie.layout_symbol["text-rotate"]),"text-padding":new gt(Ie.layout_symbol["text-padding"]),"text-keep-upright":new gt(Ie.layout_symbol["text-keep-upright"]),"text-transform":new y(Ie.layout_symbol["text-transform"]),"text-offset":new y(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new gt(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new gt(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new gt(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new gt(Ie.layout_symbol["text-optional"])})}};class Rx{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:_o,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ht("FormatSectionOverride",Rx,{omit:["defaultValue"]});class Yf extends w{constructor(n){super(n,xy)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const v of u)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,u,f){const v=this.layout.get(n).evaluate(a,{},u,f),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||sc(_.value)||!v?v:function(b,S){return S.replace(/{([^{}]+)}/g,(P,R)=>b&&R in b?String(b[R]):"")}(a.properties,v)}createBucket(n){return new wc(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of xy.paint.overridableProperties){if(!Yf.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),u=new Rx(a),f=new Vu(u,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Uu("source",f):new Za("composite",f,a.value.zoomStops),this.paint._values[n]=new io(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&Yf.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const u=n.get("text-field"),f=xy.paint.properties[a];let v=!1;const _=b=>{for(const S of b)if(f.overrides&&f.overrides.hasOverride(S))return void(v=!0)};if(u.value.kind==="constant"&&u.value.value instanceof ri)_(u.value.value.sections);else if(u.value.kind==="source"){const b=P=>{v||(P instanceof sa&&Vn(P.value)===vi?_(P.value.sections):P instanceof Jl?_(P.sections):P.eachChild(b))},S=u.value;S._styleExpression&&b(S._styleExpression.expression)}return v}}let Lx;var mk={get paint(){return Lx=Lx||new p({"background-color":new gt(Ie.paint_background["background-color"]),"background-pattern":new l(Ie.paint_background["background-pattern"]),"background-opacity":new gt(Ie.paint_background["background-opacity"])})}};class gk extends w{constructor(n){super(n,mk)}}let Fx;var yk={get paint(){return Fx=Fx||new p({"raster-opacity":new gt(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new gt(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gt(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gt(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new gt(Ie.paint_raster["raster-saturation"]),"raster-contrast":new gt(Ie.paint_raster["raster-contrast"]),"raster-resampling":new gt(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new gt(Ie.paint_raster["raster-fade-duration"])})}};class vk extends w{constructor(n){super(n,yk)}}class _k extends w{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class xk{constructor(n){this._methodToThrottle=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const by=63710088e-1;class ss{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ss(ge(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,u=this.lat*a,f=n.lat*a,v=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((n.lng-this.lng)*a);return by*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof ss)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new ss(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new ss(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Dx=2*Math.PI*by;function Ox(o){return Dx*Math.cos(o*Math.PI/180)}function Bx(o){return(180+o)/360}function Nx(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function jx(o,n){return o/Ox(n)}function wy(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class Jf{constructor(n,a,u=0){this.x=+n,this.y=+a,this.z=+u}static fromLngLat(n,a=0){const u=ss.convert(n);return new Jf(Bx(u.lng),Nx(u.lat),jx(a,u.lat))}toLngLat(){return new ss(360*this.x-180,wy(this.y))}toAltitude(){return this.z*Ox(wy(this.y))}meterInMercatorCoordinateUnits(){return 1/Dx*(n=wy(this.y),1/Math.cos(n*Math.PI/180));var n}}function $x(o,n,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[o*u-2*Math.PI*6378137/2,n*u-2*Math.PI*6378137/2]}class Sy{constructor(n,a,u){if(n<0||n>25||u<0||u>=Math.pow(2,n)||a<0||a>=Math.pow(2,n))throw new Error(`x=${a}, y=${u}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=u,this.key=Ih(0,n,n,a,u)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,u){const f=(_=this.y,b=this.z,S=$x(256*(v=this.x),256*(_=Math.pow(2,b)-_-1),b),P=$x(256*(v+1),256*(_+1),b),S[0]+","+S[1]+","+P[0]+","+P[1]);var v,_,b,S,P;const R=function(L,O,$){let G,X="";for(let ie=L;ie>0;ie--)G=1<<ie-1,X+=(O&G?1:0)+($&G?2:0);return X}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new z((n.x*a-this.x)*Un,(n.y*a-this.y)*Un)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Vx{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Ih(n,a.z,a.z,a.x,a.y)}}class Di{constructor(n,a,u,f,v){if(n<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${u}`);this.overscaledZ=n,this.wrap=a,this.canonical=new Sy(u,+f,+v),this.key=Ih(a,n,u,f,v)}clone(){return new Di(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new Di(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Di(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-n;return n>this.canonical.z?Ih(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Ih(this.wrap*+a,n,n,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Di(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new Di(a,this.wrap,a,u,f),new Di(a,this.wrap,a,u+1,f),new Di(a,this.wrap,a,u,f+1),new Di(a,this.wrap,a,u+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Di(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Di(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Vx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Jf(n.x-this.wrap,n.y))}}function Ih(o,n,a,u,f){(o*=2)<0&&(o=-1*o-1);const v=1<<a;return(v*v*o+v*f+u).toString(36)+a.toString(36)+n.toString(36)}ht("CanonicalTileID",Sy),ht("OverscaledTileID",Di,{omit:["posMatrix"]});class Ux{constructor(n,a,u,f=1,v=1,_=1,b=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void Ze(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const S=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=_,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<S;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(S,P)]=this.data[this._idx(S-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,S)]=this.data[this._idx(P,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<S;P++)for(let R=0;R<S;R++){const L=this.get(P,R);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(n,a){const u=new Uint8Array(this.data.buffer),f=4*this._idx(n,a);return this.unpack(u[f],u[f+1],u[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,u){return n*this.redFactor+a*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new Fi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,u){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,v=a*this.dim+this.dim,_=u*this.dim,b=u*this.dim+this.dim;switch(a){case-1:f=v-1;break;case 1:v=f+1}switch(u){case-1:_=b-1;break;case 1:b=_+1}const S=-a*this.dim,P=-u*this.dim;for(let R=_;R<b;R++)for(let L=f;L<v;L++)this.data[this._idx(L,R)]=n.data[this._idx(L+S,R+P)]}}ht("DEMData",Ux);class Hx{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const u=n[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Wx{constructor(n,a,u,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=u,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class qx{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new nl(Un,16,0),this.grid3D=new nl(Un,16,0),this.featureIndexArray=new va,this.promoteId=a}insert(n,a,u,f,v,_){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,v);const S=_?this.grid3D:this.grid;for(let P=0;P<a.length;P++){const R=a[P],L=[1/0,1/0,-1/0,-1/0];for(let O=0;O<R.length;O++){const $=R[O];L[0]=Math.min(L[0],$.x),L[1]=Math.min(L[1],$.y),L[2]=Math.max(L[2],$.x),L[3]=Math.max(L[3],$.y)}L[0]<Un&&L[1]<Un&&L[2]>=0&&L[3]>=0&&S.insert(b,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new is.VectorTile(new hy(this.rawTileData)).layers,this.sourceLayerCoder=new Hx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,u,f){this.loadVTLayers();const v=n.params||{},_=Un/n.tileSize/n.scale,b=Hu(v.filter),S=n.queryGeometry,P=n.queryPadding*_,R=Zx(S),L=this.grid.query(R.minX-P,R.minY-P,R.maxX+P,R.maxY+P),O=Zx(n.cameraQueryGeometry),$=this.grid3D.query(O.minX-P,O.minY-P,O.maxX+P,O.maxY+P,(ie,le,be,fe)=>function(_e,De,je,st,mt){for(const nt of _e)if(De<=nt.x&&je<=nt.y&&st>=nt.x&&mt>=nt.y)return!0;const it=[new z(De,je),new z(De,mt),new z(st,mt),new z(st,je)];if(_e.length>2){for(const nt of it)if(mc(_e,nt))return!0}for(let nt=0;nt<_e.length-1;nt++)if(tI(_e[nt],_e[nt+1],it))return!0;return!1}(n.cameraQueryGeometry,ie-P,le-P,be+P,fe+P));for(const ie of $)L.push(ie);L.sort(bk);const G={};let X;for(let ie=0;ie<L.length;ie++){const le=L[ie];if(le===X)continue;X=le;const be=this.featureIndexArray.get(le);let fe=null;this.loadMatchingFeature(G,be.bucketIndex,be.sourceLayerIndex,be.featureIndex,b,v.layers,v.availableImages,a,u,f,(_e,De,je)=>(fe||(fe=cl(_e)),De.queryIntersectsFeature(S,_e,je,fe,this.z,n.transform,_,n.pixelPosMatrix)))}return G}loadMatchingFeature(n,a,u,f,v,_,b,S,P,R,L){const O=this.bucketLayerIDs[a];if(_&&!function(ie,le){for(let be=0;be<ie.length;be++)if(le.indexOf(ie[be])>=0)return!0;return!1}(_,O))return;const $=this.sourceLayerCoder.decode(u),G=this.vtLayers[$].feature(f);if(v.needGeometry){const ie=ul(G,!0);if(!v.filter(new yn(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!v.filter(new yn(this.tileID.overscaledZ),G))return;const X=this.getId(G,$);for(let ie=0;ie<O.length;ie++){const le=O[ie];if(_&&_.indexOf(le)<0)continue;const be=S[le];if(!be)continue;let fe={};X&&R&&(fe=R.getState(be.sourceLayer||"_geojsonTileLayer",X));const _e=ue({},P[le]);_e.paint=Gx(_e.paint,be.paint,G,fe,b),_e.layout=Gx(_e.layout,be.layout,G,fe,b);const De=!L||L(G,be,fe);if(!De)continue;const je=new Wx(G,this.z,this.x,this.y,X);je.layer=_e;let st=n[le];st===void 0&&(st=n[le]=[]),st.push({featureIndex:f,feature:je,intersectionZ:De})}}lookupSymbolFeatures(n,a,u,f,v,_,b,S){const P={};this.loadVTLayers();const R=Hu(v);for(const L of n)this.loadMatchingFeature(P,u,f,L,R,_,b,S,a);return P}hasLayer(n){for(const a of this.bucketLayerIDs)for(const u of a)if(n===u)return!0;return!1}getId(n,a){let u=n.id;return this.promoteId&&(u=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof u=="boolean"&&(u=Number(u))),u}}function Gx(o,n,a,u,f){return Be(o,(v,_)=>{const b=n instanceof il?n.get(_):null;return b&&b.evaluate?b.evaluate(a,u,f):b})}function Zx(o){let n=1/0,a=1/0,u=-1/0,f=-1/0;for(const v of o)n=Math.min(n,v.x),a=Math.min(a,v.y),u=Math.max(u,v.x),f=Math.max(f,v.y);return{minX:n,minY:a,maxX:u,maxY:f}}function bk(o,n){return n-o}function Kx(o,n,a,u,f){const v=[];for(let _=0;_<o.length;_++){const b=o[_];let S;for(let P=0;P<b.length-1;P++){let R=b[P],L=b[P+1];R.x<n&&L.x<n||(R.x<n?R=new z(n,R.y+(n-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<n&&(L=new z(n,R.y+(n-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<a&&L.y<a||(R.y<a?R=new z(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round():L.y<a&&(L=new z(R.x+(a-R.y)/(L.y-R.y)*(L.x-R.x),a)._round()),R.x>=u&&L.x>=u||(R.x>=u?R=new z(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=u&&(L=new z(u,R.y+(u-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=f&&L.y>=f||(R.y>=f?R=new z(R.x+(f-R.y)/(L.y-R.y)*(L.x-R.x),f)._round():L.y>=f&&(L=new z(R.x+(f-R.y)/(L.y-R.y)*(L.x-R.x),f)._round()),S&&R.equals(S[S.length-1])||(S=[R],v.push(S)),S.push(L)))))}}return v}ht("FeatureIndex",qx,{omit:["rawTileData","sourceLayerCoder"]});class ls extends z{constructor(n,a,u,f){super(n,a),this.angle=u,f!==void 0&&(this.segment=f)}clone(){return new ls(this.x,this.y,this.angle,this.segment)}}function Xx(o,n,a,u,f){if(n.segment===void 0||a===0)return!0;let v=n,_=n.segment+1,b=0;for(;b>-a/2;){if(_--,_<0)return!1;b-=o[_].dist(v),v=o[_]}b+=o[_].dist(o[_+1]),_++;const S=[];let P=0;for(;b<a/2;){const R=o[_],L=o[_+1];if(!L)return!1;let O=o[_-1].angleTo(R)-R.angleTo(L);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:b,angleDelta:O}),P+=O;b-S[0].distance>u;)P-=S.shift().angleDelta;if(P>f)return!1;_++,b+=R.dist(L)}return!0}function Yx(o){let n=0;for(let a=0;a<o.length-1;a++)n+=o[a].dist(o[a+1]);return n}function Jx(o,n,a){return o?.6*n*a:0}function Qx(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function wk(o,n,a,u,f,v){const _=Jx(a,f,v),b=Qx(a,u)*v;let S=0;const P=Yx(o)/2;for(let R=0;R<o.length-1;R++){const L=o[R],O=o[R+1],$=L.dist(O);if(S+$>P){const G=(P-S)/$,X=Dr.number(L.x,O.x,G),ie=Dr.number(L.y,O.y,G),le=new ls(X,ie,O.angleTo(L),R);return le._round(),!_||Xx(o,le,b,_,n)?le:void 0}S+=$}}function Sk(o,n,a,u,f,v,_,b,S){const P=Jx(u,v,_),R=Qx(u,f),L=R*_,O=o[0].x===0||o[0].x===S||o[0].y===0||o[0].y===S;return n-L<n/4&&(n=L+n/4),eb(o,O?n/2*b%n:(R/2+2*v)*_*b%n,n,P,a,L,O,!1,S)}function eb(o,n,a,u,f,v,_,b,S){const P=v/2,R=Yx(o);let L=0,O=n-a,$=[];for(let G=0;G<o.length-1;G++){const X=o[G],ie=o[G+1],le=X.dist(ie),be=ie.angleTo(X);for(;O+a<L+le;){O+=a;const fe=(O-L)/le,_e=Dr.number(X.x,ie.x,fe),De=Dr.number(X.y,ie.y,fe);if(_e>=0&&_e<S&&De>=0&&De<S&&O-P>=0&&O+P<=R){const je=new ls(_e,De,be,G);je._round(),u&&!Xx(o,je,v,u,f)||$.push(je)}}L+=le}return b||$.length||_||($=eb(o,L/2,a,u,f,v,_,!0,S)),$}ht("Anchor",ls);const Sc=ci;function tb(o,n,a,u){const f=[],v=o.image,_=v.pixelRatio,b=v.paddedRect.w-2*Sc,S=v.paddedRect.h-2*Sc;let P={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const R=v.stretchX||[[0,b]],L=v.stretchY||[[0,S]],O=($e,pt)=>$e+pt[1]-pt[0],$=R.reduce(O,0),G=L.reduce(O,0),X=b-$,ie=S-G;let le=0,be=$,fe=0,_e=G,De=0,je=X,st=0,mt=ie;if(v.content&&u){const $e=v.content,pt=$e[2]-$e[0],ft=$e[3]-$e[1];(v.textFitWidth||v.textFitHeight)&&(P=Ix(o)),le=Qf(R,0,$e[0]),fe=Qf(L,0,$e[1]),be=Qf(R,$e[0],$e[2]),_e=Qf(L,$e[1],$e[3]),De=$e[0]-le,st=$e[1]-fe,je=pt-be,mt=ft-_e}const it=P.x1,nt=P.y1,dt=P.x2-it,yt=P.y2-nt,ot=($e,pt,ft,Lt)=>{const ln=ep($e.stretch-le,be,dt,it),cn=tp($e.fixed-De,je,$e.stretch,$),Hn=ep(pt.stretch-fe,_e,yt,nt),Oi=tp(pt.fixed-st,mt,pt.stretch,G),Nr=ep(ft.stretch-le,be,dt,it),nr=tp(ft.fixed-De,je,ft.stretch,$),gr=ep(Lt.stretch-fe,_e,yt,nt),jr=tp(Lt.fixed-st,mt,Lt.stretch,G),Yr=new z(ln,Hn),$r=new z(Nr,Hn),Wn=new z(Nr,gr),hr=new z(ln,gr),Jr=new z(cn/_,Oi/_),ui=new z(nr/_,jr/_),Ir=n*Math.PI/180;if(Ir){const Ln=Math.sin(Ir),Vt=Math.cos(Ir),qn=[Vt,-Ln,Ln,Vt];Yr._matMult(qn),$r._matMult(qn),hr._matMult(qn),Wn._matMult(qn)}const hi=$e.stretch+$e.fixed,Bi=pt.stretch+pt.fixed;return{tl:Yr,tr:$r,bl:hr,br:Wn,tex:{x:v.paddedRect.x+Sc+hi,y:v.paddedRect.y+Sc+Bi,w:ft.stretch+ft.fixed-hi,h:Lt.stretch+Lt.fixed-Bi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Jr,pixelOffsetBR:ui,minFontScaleX:je/_/dt,minFontScaleY:mt/_/yt,isSDF:a}};if(u&&(v.stretchX||v.stretchY)){const $e=nb(R,X,$),pt=nb(L,ie,G);for(let ft=0;ft<$e.length-1;ft++){const Lt=$e[ft],ln=$e[ft+1];for(let cn=0;cn<pt.length-1;cn++)f.push(ot(Lt,pt[cn],ln,pt[cn+1]))}}else f.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:S+1}));return f}function Qf(o,n,a){let u=0;for(const f of o)u+=Math.max(n,Math.min(a,f[1]))-Math.max(n,Math.min(a,f[0]));return u}function nb(o,n,a){const u=[{fixed:-Sc,stretch:0}];for(const[f,v]of o){const _=u[u.length-1];u.push({fixed:f-_.stretch,stretch:_.stretch}),u.push({fixed:f-_.stretch,stretch:_.stretch+(v-f)})}return u.push({fixed:n+Sc,stretch:a}),u}function ep(o,n,a,u){return o/n*a+u}function tp(o,n,a,u){return o-n*a/u}class np{constructor(n,a,u,f,v,_,b,S,P,R){var L;if(this.boxStartIndex=n.length,P){let O=_.top,$=_.bottom;const G=_.collisionPadding;G&&(O-=G[1],$+=G[3]);let X=$-O;X>0&&(X=Math.max(10,X),this.circleDiameter=X)}else{const O=!((L=_.image)===null||L===void 0)&&L.content&&(_.image.textFitWidth||_.image.textFitHeight)?Ix(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};O.y1=O.y1*b-S[0],O.y2=O.y2*b+S[2],O.x1=O.x1*b-S[3],O.x2=O.x2*b+S[1];const $=_.collisionPadding;if($&&(O.x1-=$[0]*b,O.y1-=$[1]*b,O.x2+=$[2]*b,O.y2+=$[3]*b),R){const G=new z(O.x1,O.y1),X=new z(O.x2,O.y1),ie=new z(O.x1,O.y2),le=new z(O.x2,O.y2),be=R*Math.PI/180;G._rotate(be),X._rotate(be),ie._rotate(be),le._rotate(be),O.x1=Math.min(G.x,X.x,ie.x,le.x),O.x2=Math.max(G.x,X.x,ie.x,le.x),O.y1=Math.min(G.y,X.y,ie.y,le.y),O.y2=Math.max(G.y,X.y,ie.y,le.y)}n.emplaceBack(a.x,a.y,O.x1,O.y1,O.x2,O.y2,u,f,v)}this.boxEndIndex=n.length}}class Ck{constructor(n=[],a=Ek){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:u}=this,f=a[n];for(;n>0;){const v=n-1>>1,_=a[v];if(u(f,_)>=0)break;a[n]=_,n=v}a[n]=f}_down(n){const{data:a,compare:u}=this,f=this.length>>1,v=a[n];for(;n<f;){let _=1+(n<<1),b=a[_];const S=_+1;if(S<this.length&&u(a[S],b)<0&&(_=S,b=a[S]),u(b,v)>=0)break;a[n]=b,n=_}a[n]=v}}function Ek(o,n){return o<n?-1:o>n?1:0}function Tk(o,n=1,a=!1){let u=1/0,f=1/0,v=-1/0,_=-1/0;const b=o[0];for(let $=0;$<b.length;$++){const G=b[$];(!$||G.x<u)&&(u=G.x),(!$||G.y<f)&&(f=G.y),(!$||G.x>v)&&(v=G.x),(!$||G.y>_)&&(_=G.y)}const S=Math.min(v-u,_-f);let P=S/2;const R=new Ck([],Pk);if(S===0)return new z(u,f);for(let $=u;$<v;$+=S)for(let G=f;G<_;G+=S)R.push(new Cc($+P,G+P,P,o));let L=function($){let G=0,X=0,ie=0;const le=$[0];for(let be=0,fe=le.length,_e=fe-1;be<fe;_e=be++){const De=le[be],je=le[_e],st=De.x*je.y-je.x*De.y;X+=(De.x+je.x)*st,ie+=(De.y+je.y)*st,G+=3*st}return new Cc(X/G,ie/G,0,$)}(o),O=R.length;for(;R.length;){const $=R.pop();($.d>L.d||!L.d)&&(L=$,a&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,O)),$.max-L.d<=n||(P=$.h/2,R.push(new Cc($.p.x-P,$.p.y-P,P,o)),R.push(new Cc($.p.x+P,$.p.y-P,P,o)),R.push(new Cc($.p.x-P,$.p.y+P,P,o)),R.push(new Cc($.p.x+P,$.p.y+P,P,o)),O+=4)}return a&&(console.log(`num probes: ${O}`),console.log(`best distance: ${L.d}`)),L.p}function Pk(o,n){return n.max-o.max}function Cc(o,n,a,u){this.p=new z(o,n),this.h=a,this.d=function(f,v){let _=!1,b=1/0;for(let S=0;S<v.length;S++){const P=v[S];for(let R=0,L=P.length,O=L-1;R<L;O=R++){const $=P[R],G=P[O];$.y>f.y!=G.y>f.y&&f.x<(G.x-$.x)*(f.y-$.y)/(G.y-$.y)+$.x&&(_=!_),b=Math.min(b,N1(f,$,G))}}return(_?1:-1)*Math.sqrt(b)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}var Pr;g.ap=void 0,(Pr=g.ap||(g.ap={}))[Pr.center=1]="center",Pr[Pr.left=2]="left",Pr[Pr.right=3]="right",Pr[Pr.top=4]="top",Pr[Pr.bottom=5]="bottom",Pr[Pr["top-left"]=6]="top-left",Pr[Pr["top-right"]=7]="top-right",Pr[Pr["bottom-left"]=8]="bottom-left",Pr[Pr["bottom-right"]=9]="bottom-right";const cs=7,Cy=Number.POSITIVE_INFINITY;function rb(o,n){return n[1]!==Cy?function(a,u,f){let v=0,_=0;switch(u=Math.abs(u),f=Math.abs(f),a){case"top-right":case"top-left":case"top":_=f-cs;break;case"bottom-right":case"bottom-left":case"bottom":_=-f+cs}switch(a){case"top-right":case"bottom-right":case"right":v=-u;break;case"top-left":case"bottom-left":case"left":v=u}return[v,_]}(o,n[0],n[1]):function(a,u){let f=0,v=0;u<0&&(u=0);const _=u/Math.SQRT2;switch(a){case"top-right":case"top-left":v=_-cs;break;case"bottom-right":case"bottom-left":v=-_+cs;break;case"bottom":v=-u+cs;break;case"top":v=u-cs}switch(a){case"top-right":case"bottom-right":f=-_;break;case"top-left":case"bottom-left":f=_;break;case"left":f=u;break;case"right":f=-u}return[f,v]}(o,n[0])}function ib(o,n,a){var u;const f=o.layout,v=(u=f.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(n,{},a);if(v){const b=v.values,S=[];for(let P=0;P<b.length;P+=2){const R=S[P]=b[P],L=b[P+1].map(O=>O*tr);R.startsWith("top")?L[1]-=cs:R.startsWith("bottom")&&(L[1]+=cs),S[P+1]=L}return new Cr(S)}const _=f.get("text-variable-anchor");if(_){let b;b=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},a)*tr,Cy]:f.get("text-offset").evaluate(n,{},a).map(P=>P*tr);const S=[];for(const P of _)S.push(P,rb(P,b));return new Cr(S)}return null}function Ey(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ik(o,n,a,u,f,v,_,b,S,P,R){let L=v.textMaxSize.evaluate(n,{});L===void 0&&(L=_);const O=o.layers[0].layout,$=O.get("icon-offset").evaluate(n,{},R),G=ab(a.horizontal),X=_/24,ie=o.tilePixelRatio*X,le=o.tilePixelRatio*L/24,be=o.tilePixelRatio*b,fe=o.tilePixelRatio*O.get("symbol-spacing"),_e=O.get("text-padding")*o.tilePixelRatio,De=function($e,pt,ft,Lt=1){const ln=$e.get("icon-padding").evaluate(pt,{},ft),cn=ln&&ln.values;return[cn[0]*Lt,cn[1]*Lt,cn[2]*Lt,cn[3]*Lt]}(O,n,R,o.tilePixelRatio),je=O.get("text-max-angle")/180*Math.PI,st=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",mt=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",it=O.get("symbol-placement"),nt=fe/2,dt=O.get("icon-text-fit");let yt;u&&dt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(yt=kx(u,a.vertical,dt,O.get("icon-text-fit-padding"),$,X)),G&&(u=kx(u,G,dt,O.get("icon-text-fit-padding"),$,X)));const ot=($e,pt)=>{pt.x<0||pt.x>=Un||pt.y<0||pt.y>=Un||function(ft,Lt,ln,cn,Hn,Oi,Nr,nr,gr,jr,Yr,$r,Wn,hr,Jr,ui,Ir,hi,Bi,Ln,Vt,qn,kr,rr,ao){const Eo=ft.addToLineVertexArray(Lt,ln);let To,wa,so,Ni,di=0,Sa=0,Ah=0,ub=0,Ry=-1,Ly=-1;const Ca={};let hb=Hg("");if(ft.allowVerticalPlacement&&cn.vertical){const Vr=nr.layout.get("text-rotate").evaluate(Vt,{},rr)+90;so=new np(gr,Lt,jr,Yr,$r,cn.vertical,Wn,hr,Jr,Vr),Nr&&(Ni=new np(gr,Lt,jr,Yr,$r,Nr,Ir,hi,Jr,Vr))}if(Hn){const Vr=nr.layout.get("icon-rotate").evaluate(Vt,{}),ji=nr.layout.get("icon-text-fit")!=="none",dl=tb(Hn,Vr,kr,ji),Io=Nr?tb(Nr,Vr,kr,ji):void 0;wa=new np(gr,Lt,jr,Yr,$r,Hn,Ir,hi,!1,Vr),di=4*dl.length;const fl=ft.iconSizeData;let Jo=null;fl.kind==="source"?(Jo=[Yo*nr.layout.get("icon-size").evaluate(Vt,{})],Jo[0]>as&&Ze(`${ft.layerIds[0]}: Value for "icon-size" is >= ${Ph}. Reduce your "icon-size".`)):fl.kind==="composite"&&(Jo=[Yo*qn.compositeIconSizes[0].evaluate(Vt,{},rr),Yo*qn.compositeIconSizes[1].evaluate(Vt,{},rr)],(Jo[0]>as||Jo[1]>as)&&Ze(`${ft.layerIds[0]}: Value for "icon-size" is >= ${Ph}. Reduce your "icon-size".`)),ft.addSymbols(ft.icon,dl,Jo,Ln,Bi,Vt,g.ah.none,Lt,Eo.lineStartIndex,Eo.lineLength,-1,rr),Ry=ft.icon.placedSymbolArray.length-1,Io&&(Sa=4*Io.length,ft.addSymbols(ft.icon,Io,Jo,Ln,Bi,Vt,g.ah.vertical,Lt,Eo.lineStartIndex,Eo.lineLength,-1,rr),Ly=ft.icon.placedSymbolArray.length-1)}const db=Object.keys(cn.horizontal);for(const Vr of db){const ji=cn.horizontal[Vr];if(!To){hb=Hg(ji.text);const Io=nr.layout.get("text-rotate").evaluate(Vt,{},rr);To=new np(gr,Lt,jr,Yr,$r,ji,Wn,hr,Jr,Io)}const dl=ji.positionedLines.length===1;if(Ah+=ob(ft,Lt,ji,Oi,nr,Jr,Vt,ui,Eo,cn.vertical?g.ah.horizontal:g.ah.horizontalOnly,dl?db:[Vr],Ca,Ry,qn,rr),dl)break}cn.vertical&&(ub+=ob(ft,Lt,cn.vertical,Oi,nr,Jr,Vt,ui,Eo,g.ah.vertical,["vertical"],Ca,Ly,qn,rr));const Ak=To?To.boxStartIndex:ft.collisionBoxArray.length,zk=To?To.boxEndIndex:ft.collisionBoxArray.length,Rk=so?so.boxStartIndex:ft.collisionBoxArray.length,Lk=so?so.boxEndIndex:ft.collisionBoxArray.length,Fk=wa?wa.boxStartIndex:ft.collisionBoxArray.length,Dk=wa?wa.boxEndIndex:ft.collisionBoxArray.length,Ok=Ni?Ni.boxStartIndex:ft.collisionBoxArray.length,Bk=Ni?Ni.boxEndIndex:ft.collisionBoxArray.length;let Po=-1;const ip=(Vr,ji)=>Vr&&Vr.circleDiameter?Math.max(Vr.circleDiameter,ji):ji;Po=ip(To,Po),Po=ip(so,Po),Po=ip(wa,Po),Po=ip(Ni,Po);const fb=Po>-1?1:0;fb&&(Po*=ao/tr),ft.glyphOffsetArray.length>=wc.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vt.sortKey!==void 0&&ft.addToSortKeyRanges(ft.symbolInstances.length,Vt.sortKey);const Nk=ib(nr,Vt,rr),[jk,$k]=function(Vr,ji){const dl=Vr.length,Io=ji==null?void 0:ji.values;if((Io==null?void 0:Io.length)>0)for(let fl=0;fl<Io.length;fl+=2){const Jo=Io[fl+1];Vr.emplaceBack(g.ap[Io[fl]],Jo[0],Jo[1])}return[dl,Vr.length]}(ft.textAnchorOffsets,Nk);ft.symbolInstances.emplaceBack(Lt.x,Lt.y,Ca.right>=0?Ca.right:-1,Ca.center>=0?Ca.center:-1,Ca.left>=0?Ca.left:-1,Ca.vertical||-1,Ry,Ly,hb,Ak,zk,Rk,Lk,Fk,Dk,Ok,Bk,jr,Ah,ub,di,Sa,fb,0,Wn,Po,jk,$k)}(o,pt,$e,a,u,f,yt,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,ie,[_e,_e,_e,_e],st,S,be,De,mt,$,n,v,P,R,_)};if(it==="line")for(const $e of Kx(n.geometry,0,0,Un,Un)){const pt=Sk($e,fe,je,a.vertical||G,u,24,le,o.overscaling,Un);for(const ft of pt)G&&kk(o,G.text,nt,ft)||ot($e,ft)}else if(it==="line-center"){for(const $e of n.geometry)if($e.length>1){const pt=wk($e,je,a.vertical||G,u,24,le);pt&&ot($e,pt)}}else if(n.type==="Polygon")for(const $e of ec(n.geometry,0)){const pt=Tk($e,16);ot($e[0],new ls(pt.x,pt.y,0))}else if(n.type==="LineString")for(const $e of n.geometry)ot($e,new ls($e[0].x,$e[0].y,0));else if(n.type==="Point")for(const $e of n.geometry)for(const pt of $e)ot([pt],new ls(pt.x,pt.y,0))}function ob(o,n,a,u,f,v,_,b,S,P,R,L,O,$,G){const X=function(be,fe,_e,De,je,st,mt,it){const nt=De.layout.get("text-rotate").evaluate(st,{})*Math.PI/180,dt=[];for(const yt of fe.positionedLines)for(const ot of yt.positionedGlyphs){if(!ot.rect)continue;const $e=ot.rect||{};let pt=bx+1,ft=!0,Lt=1,ln=0;const cn=(je||it)&&ot.vertical,Hn=ot.metrics.advance*ot.scale/2;if(it&&fe.verticalizable&&(ln=yt.lineOffset/2-(ot.imageName?-(tr-ot.metrics.width*ot.scale)/2:(ot.scale-1)*tr)),ot.imageName){const Ln=mt[ot.imageName];ft=Ln.sdf,Lt=Ln.pixelRatio,pt=ci/Lt}const Oi=je?[ot.x+Hn,ot.y]:[0,0];let Nr=je?[0,0]:[ot.x+Hn+_e[0],ot.y+_e[1]-ln],nr=[0,0];cn&&(nr=Nr,Nr=[0,0]);const gr=ot.metrics.isDoubleResolution?2:1,jr=(ot.metrics.left-pt)*ot.scale-Hn+Nr[0],Yr=(-ot.metrics.top-pt)*ot.scale+Nr[1],$r=jr+$e.w/gr*ot.scale/Lt,Wn=Yr+$e.h/gr*ot.scale/Lt,hr=new z(jr,Yr),Jr=new z($r,Yr),ui=new z(jr,Wn),Ir=new z($r,Wn);if(cn){const Ln=new z(-Hn,Hn-Eh),Vt=-Math.PI/2,qn=tr/2-Hn,kr=new z(5-Eh-qn,-(ot.imageName?qn:0)),rr=new z(...nr);hr._rotateAround(Vt,Ln)._add(kr)._add(rr),Jr._rotateAround(Vt,Ln)._add(kr)._add(rr),ui._rotateAround(Vt,Ln)._add(kr)._add(rr),Ir._rotateAround(Vt,Ln)._add(kr)._add(rr)}if(nt){const Ln=Math.sin(nt),Vt=Math.cos(nt),qn=[Vt,-Ln,Ln,Vt];hr._matMult(qn),Jr._matMult(qn),ui._matMult(qn),Ir._matMult(qn)}const hi=new z(0,0),Bi=new z(0,0);dt.push({tl:hr,tr:Jr,bl:ui,br:Ir,tex:$e,writingMode:fe.writingMode,glyphOffset:Oi,sectionIndex:ot.sectionIndex,isSDF:ft,pixelOffsetTL:hi,pixelOffsetBR:Bi,minFontScaleX:0,minFontScaleY:0})}return dt}(0,a,b,f,v,_,u,o.allowVerticalPlacement),ie=o.textSizeData;let le=null;ie.kind==="source"?(le=[Yo*f.layout.get("text-size").evaluate(_,{})],le[0]>as&&Ze(`${o.layerIds[0]}: Value for "text-size" is >= ${Ph}. Reduce your "text-size".`)):ie.kind==="composite"&&(le=[Yo*$.compositeTextSizes[0].evaluate(_,{},G),Yo*$.compositeTextSizes[1].evaluate(_,{},G)],(le[0]>as||le[1]>as)&&Ze(`${o.layerIds[0]}: Value for "text-size" is >= ${Ph}. Reduce your "text-size".`)),o.addSymbols(o.text,X,le,b,v,_,P,n,S.lineStartIndex,S.lineLength,O,G);for(const be of R)L[be]=o.text.placedSymbolArray.length-1;return 4*X.length}function ab(o){for(const n in o)return o[n];return null}function kk(o,n,a,u){const f=o.compareText;if(n in f){const v=f[n];for(let _=v.length-1;_>=0;_--)if(u.dist(v[_])<a)return!0}else f[n]=[];return f[n].push(u),!1}const sb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ty{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,u]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=u>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=sb[15&u];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new Ty(b,_,v,n)}constructor(n,a=64,u=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=u,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=sb.indexOf(this.ArrayType),_=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${u}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+S),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+S,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=n,this.coords[this._pos++]=a,u}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Py(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:b}=this,S=[0,v.length-1,0],P=[];for(;S.length;){const R=S.pop()||0,L=S.pop()||0,O=S.pop()||0;if(L-O<=b){for(let ie=O;ie<=L;ie++){const le=_[2*ie],be=_[2*ie+1];le>=n&&le<=u&&be>=a&&be<=f&&P.push(v[ie])}continue}const $=O+L>>1,G=_[2*$],X=_[2*$+1];G>=n&&G<=u&&X>=a&&X<=f&&P.push(v[$]),(R===0?n<=G:a<=X)&&(S.push(O),S.push($-1),S.push(1-R)),(R===0?u>=G:f>=X)&&(S.push($+1),S.push(L),S.push(1-R))}return P}within(n,a,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:_}=this,b=[0,f.length-1,0],S=[],P=u*u;for(;b.length;){const R=b.pop()||0,L=b.pop()||0,O=b.pop()||0;if(L-O<=_){for(let ie=O;ie<=L;ie++)cb(v[2*ie],v[2*ie+1],n,a)<=P&&S.push(f[ie]);continue}const $=O+L>>1,G=v[2*$],X=v[2*$+1];cb(G,X,n,a)<=P&&S.push(f[$]),(R===0?n-u<=G:a-u<=X)&&(b.push(O),b.push($-1),b.push(1-R)),(R===0?n+u>=G:a+u>=X)&&(b.push($+1),b.push(L),b.push(1-R))}return S}}function Py(o,n,a,u,f,v){if(f-u<=a)return;const _=u+f>>1;lb(o,n,_,u,f,v),Py(o,n,a,u,_-1,1-v),Py(o,n,a,_+1,f,1-v)}function lb(o,n,a,u,f,v){for(;f>u;){if(f-u>600){const P=f-u+1,R=a-u+1,L=Math.log(P),O=.5*Math.exp(2*L/3),$=.5*Math.sqrt(L*O*(P-O)/P)*(R-P/2<0?-1:1);lb(o,n,a,Math.max(u,Math.floor(a-R*O/P+$)),Math.min(f,Math.floor(a+(P-R)*O/P+$)),v)}const _=n[2*a+v];let b=u,S=f;for(kh(o,n,u,a),n[2*f+v]>_&&kh(o,n,u,f);b<S;){for(kh(o,n,b,S),b++,S--;n[2*b+v]<_;)b++;for(;n[2*S+v]>_;)S--}n[2*u+v]===_?kh(o,n,u,S):(S++,kh(o,n,S,f)),S<=a&&(u=S+1),a<=S&&(f=S-1)}}function kh(o,n,a,u){Iy(o,a,u),Iy(n,2*a,2*u),Iy(n,2*a+1,2*u+1)}function Iy(o,n,a){const u=o[n];o[n]=o[a],o[a]=u}function cb(o,n,a,u){const f=o-a,v=n-u;return f*f+v*v}var ky;g.bd=void 0,(ky=g.bd||(g.bd={})).create="create",ky.load="load",ky.fullLoad="fullLoad";let rp=null,Mh=[];const My=1e3/60,Ay="loadTime",zy="fullLoadTime",Mk={mark(o){performance.mark(o)},frame(o){const n=o;rp!=null&&Mh.push(n-rp),rp=n},clearMetrics(){rp=null,Mh=[],performance.clearMeasures(Ay),performance.clearMeasures(zy);for(const o in g.bd)performance.clearMarks(g.bd[o])},getPerformanceMetrics(){performance.measure(Ay,g.bd.create,g.bd.load),performance.measure(zy,g.bd.create,g.bd.fullLoad);const o=performance.getEntriesByName(Ay)[0].duration,n=performance.getEntriesByName(zy)[0].duration,a=Mh.length,u=1/(Mh.reduce((v,_)=>v+_,0)/a/1e3),f=Mh.filter(v=>v>My).reduce((v,_)=>v+(_-My)/My,0);return{loadTime:o,fullLoadTime:n,fps:u,percentDroppedFrames:f/(a+f)*100,totalFrames:a}}};g.$=ur,g.A=gc,g.B=function(o){if(Oe==null){const n=o.navigator?o.navigator.userAgent:null;Oe=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Oe},g.C=class{constructor(o,n){this.target=o,this.mapId=n,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new xk(()=>this.process()),this.subscription=function(a,u,f,v){return a.addEventListener(u,f,!1),{unsubscribe:()=>{a.removeEventListener(u,f,!1)}}}(this.target,"message",a=>this.receive(a)),this.globalScope=ut(self)?o:window}registerMessageHandler(o,n){this.messageHandlers[o]=n}sendAsync(o,n){return new Promise((a,u)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:a,reject:u},n&&n.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const b={id:f,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const v=[],_=Object.assign(Object.assign({},o),{id:f,sourceMapId:this.mapId,origin:location.origin,data:ro(o.data,v)});this.target.postMessage(_,{transfer:v})})}receive(o){const n=o.data,a=n.id;if(!(n.origin!=="file://"&&location.origin!=="file://"&&n.origin!==location.origin||n.targetMapId&&this.mapId!==n.targetMapId)){if(n.type==="<cancel>"){delete this.tasks[a];const u=this.abortControllers[a];return delete this.abortControllers[a],void(u&&u.abort())}if(ut(self)||n.mustQueue)return this.tasks[a]=n,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,n)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){return h(this,void 0,void 0,function*(){if(n.type==="<response>"){const f=this.resolveRejects[o];return delete this.resolveRejects[o],f?void(n.error?f.reject(rl(n.error)):f.resolve(rl(n.data))):void 0}if(!this.messageHandlers[n.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${n.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=rl(n.data),u=new AbortController;this.abortControllers[o]=u;try{const f=yield this.messageHandlers[n.type](n.sourceMapId,a,u);this.completeTask(o,null,f)}catch(f){this.completeTask(o,f)}})}completeTask(o,n,a){const u=[];delete this.abortControllers[o];const f={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:n?ro(n):null,data:ro(a,u)};this.target.postMessage(f,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.D=gt,g.E=Xn,g.F=function(){var o=new gc(16);return gc!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},g.G=Kt,g.H=function(o,n,a){var u,f,v,_,b,S,P,R,L,O,$,G,X=a[0],ie=a[1],le=a[2];return n===o?(o[12]=n[0]*X+n[4]*ie+n[8]*le+n[12],o[13]=n[1]*X+n[5]*ie+n[9]*le+n[13],o[14]=n[2]*X+n[6]*ie+n[10]*le+n[14],o[15]=n[3]*X+n[7]*ie+n[11]*le+n[15]):(f=n[1],v=n[2],_=n[3],b=n[4],S=n[5],P=n[6],R=n[7],L=n[8],O=n[9],$=n[10],G=n[11],o[0]=u=n[0],o[1]=f,o[2]=v,o[3]=_,o[4]=b,o[5]=S,o[6]=P,o[7]=R,o[8]=L,o[9]=O,o[10]=$,o[11]=G,o[12]=u*X+b*ie+L*le+n[12],o[13]=f*X+S*ie+O*le+n[13],o[14]=v*X+P*ie+$*le+n[14],o[15]=_*X+R*ie+G*le+n[15]),o},g.I=fy,g.J=function(o,n,a){var u=a[0],f=a[1],v=a[2];return o[0]=n[0]*u,o[1]=n[1]*u,o[2]=n[2]*u,o[3]=n[3]*u,o[4]=n[4]*f,o[5]=n[5]*f,o[6]=n[6]*f,o[7]=n[7]*f,o[8]=n[8]*v,o[9]=n[9]*v,o[10]=n[10]*v,o[11]=n[11]*v,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},g.K=U1,g.L=function(o,n){const a={};for(let u=0;u<n.length;u++){const f=n[u];f in o&&(a[f]=o[f])}return a},g.M=ss,g.N=Bx,g.O=Nx,g.P=z,g.Q=Di,g.R=Fi,g.S=U,g.T=Rf,g.U=D,g.V=ze,g.W=Un,g.X=F,g.Y=Jf,g.Z=class extends te{},g._=h,g.a=Dt,g.a$=function(o,n,a){return o[0]=n[0]*a[0],o[1]=n[1]*a[1],o[2]=n[2]*a[2],o[3]=n[3]*a[3],o},g.a0=Sy,g.a1=Qe,g.a2=o=>{const n=window.document.createElement("video");return n.muted=!0,new Promise(a=>{n.onloadstart=()=>{a(n)};for(const u of o){const f=window.document.createElement("source");Rr(u)||(n.crossOrigin="Anonymous"),f.src=u,n.appendChild(f)}})},g.a3=function(){return Me++},g.a4=zn,g.a5=wc,g.a6=Hu,g.a7=ul,g.a8=yn,g.a9=Wx,g.aA=He,g.aB=function(o,n){if(!o)return[{command:"setStyle",args:[n]}];let a=[];try{if(!Pt(o.version,n.version))return[{command:"setStyle",args:[n]}];Pt(o.center,n.center)||a.push({command:"setCenter",args:[n.center]}),Pt(o.zoom,n.zoom)||a.push({command:"setZoom",args:[n.zoom]}),Pt(o.bearing,n.bearing)||a.push({command:"setBearing",args:[n.bearing]}),Pt(o.pitch,n.pitch)||a.push({command:"setPitch",args:[n.pitch]}),Pt(o.sprite,n.sprite)||a.push({command:"setSprite",args:[n.sprite]}),Pt(o.glyphs,n.glyphs)||a.push({command:"setGlyphs",args:[n.glyphs]}),Pt(o.transition,n.transition)||a.push({command:"setTransition",args:[n.transition]}),Pt(o.light,n.light)||a.push({command:"setLight",args:[n.light]}),Pt(o.terrain,n.terrain)||a.push({command:"setTerrain",args:[n.terrain]}),Pt(o.sky,n.sky)||a.push({command:"setSky",args:[n.sky]});const u={},f=[];(function(_,b,S,P){let R;for(R in b=b||{},_=_||{})Object.prototype.hasOwnProperty.call(_,R)&&(Object.prototype.hasOwnProperty.call(b,R)||xr(R,S,P));for(R in b)Object.prototype.hasOwnProperty.call(b,R)&&(Object.prototype.hasOwnProperty.call(_,R)?Pt(_[R],b[R])||(_[R].type==="geojson"&&b[R].type==="geojson"&&zi(_,b,R)?Ot(S,{command:"setGeoJSONSourceData",args:[R,b[R].data]}):Qi(R,b,S,P)):_n(R,b,S))})(o.sources,n.sources,f,u);const v=[];o.layers&&o.layers.forEach(_=>{"source"in _&&u[_.source]?a.push({command:"removeLayer",args:[_.id]}):v.push(_)}),a=a.concat(f),function(_,b,S){b=b||[];const P=(_=_||[]).map(xn),R=b.map(xn),L=_.reduce(Yn,{}),O=b.reduce(Yn,{}),$=P.slice(),G=Object.create(null);let X,ie,le,be,fe;for(let _e=0,De=0;_e<P.length;_e++)X=P[_e],Object.prototype.hasOwnProperty.call(O,X)?De++:(Ot(S,{command:"removeLayer",args:[X]}),$.splice($.indexOf(X,De),1));for(let _e=0,De=0;_e<R.length;_e++)X=R[R.length-1-_e],$[$.length-1-_e]!==X&&(Object.prototype.hasOwnProperty.call(L,X)?(Ot(S,{command:"removeLayer",args:[X]}),$.splice($.lastIndexOf(X,$.length-De),1)):De++,be=$[$.length-_e],Ot(S,{command:"addLayer",args:[O[X],be]}),$.splice($.length-_e,0,X),G[X]=!0);for(let _e=0;_e<R.length;_e++)if(X=R[_e],ie=L[X],le=O[X],!G[X]&&!Pt(ie,le))if(Pt(ie.source,le.source)&&Pt(ie["source-layer"],le["source-layer"])&&Pt(ie.type,le.type)){for(fe in Lr(ie.layout,le.layout,S,X,null,"setLayoutProperty"),Lr(ie.paint,le.paint,S,X,null,"setPaintProperty"),Pt(ie.filter,le.filter)||Ot(S,{command:"setFilter",args:[X,le.filter]}),Pt(ie.minzoom,le.minzoom)&&Pt(ie.maxzoom,le.maxzoom)||Ot(S,{command:"setLayerZoomRange",args:[X,le.minzoom,le.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Lr(ie[fe],le[fe],S,X,fe.slice(6),"setPaintProperty"):Pt(ie[fe],le[fe])||Ot(S,{command:"setLayerProperty",args:[X,fe,le[fe]]}));for(fe in le)Object.prototype.hasOwnProperty.call(le,fe)&&!Object.prototype.hasOwnProperty.call(ie,fe)&&fe!=="layout"&&fe!=="paint"&&fe!=="filter"&&fe!=="metadata"&&fe!=="minzoom"&&fe!=="maxzoom"&&(fe.indexOf("paint.")===0?Lr(ie[fe],le[fe],S,X,fe.slice(6),"setPaintProperty"):Pt(ie[fe],le[fe])||Ot(S,{command:"setLayerProperty",args:[X,fe,le[fe]]}))}else Ot(S,{command:"removeLayer",args:[X]}),be=$[$.lastIndexOf(X)+1],Ot(S,{command:"addLayer",args:[le,be]})}(v,n.layers,a)}catch(u){console.warn("Unable to compute style diff:",u),a=[{command:"setStyle",args:[n]}]}return a},g.aC=function(o){const n=[],a=o.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},g.aD=function o(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let u=0;u<n.length;u++)if(!o(n[u],a[u]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const u in n)if(!o(n[u],a[u]))return!1;return!0}return n===a},g.aE=Be,g.aF=Re,g.aG=class extends sl{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},g.aH=Of,g.aI=class extends sl{constructor(o,n){super(o,n),this.current=XP}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},g.aJ=z1,g.aK=class extends sl{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},g.aL=class extends sl{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},g.aM=R1,g.aN=function(o,n,a,u,f,v,_){var b=1/(n-a),S=1/(u-f),P=1/(v-_);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*S,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*P,o[11]=0,o[12]=(n+a)*b,o[13]=(f+u)*S,o[14]=(_+v)*P,o[15]=1,o},g.aO=an,g.aP=rI,g.aQ=class extends Ge{},g.aR=ZI,g.aS=class extends Ye{},g.aT=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},g.aU=Z1,g.aV=_a,g.aW=class extends St{},g.aX=es,g.aY=function(o,n){return o[0]===n[0]&&o[1]===n[1]&&o[2]===n[2]&&o[3]===n[3]&&o[4]===n[4]&&o[5]===n[5]&&o[6]===n[6]&&o[7]===n[7]&&o[8]===n[8]&&o[9]===n[9]&&o[10]===n[10]&&o[11]===n[11]&&o[12]===n[12]&&o[13]===n[13]&&o[14]===n[14]&&o[15]===n[15]},g.aZ=function(o,n){var a=o[0],u=o[1],f=o[2],v=o[3],_=o[4],b=o[5],S=o[6],P=o[7],R=o[8],L=o[9],O=o[10],$=o[11],G=o[12],X=o[13],ie=o[14],le=o[15],be=n[0],fe=n[1],_e=n[2],De=n[3],je=n[4],st=n[5],mt=n[6],it=n[7],nt=n[8],dt=n[9],yt=n[10],ot=n[11],$e=n[12],pt=n[13],ft=n[14],Lt=n[15];return Math.abs(a-be)<=Xr*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(u-fe)<=Xr*Math.max(1,Math.abs(u),Math.abs(fe))&&Math.abs(f-_e)<=Xr*Math.max(1,Math.abs(f),Math.abs(_e))&&Math.abs(v-De)<=Xr*Math.max(1,Math.abs(v),Math.abs(De))&&Math.abs(_-je)<=Xr*Math.max(1,Math.abs(_),Math.abs(je))&&Math.abs(b-st)<=Xr*Math.max(1,Math.abs(b),Math.abs(st))&&Math.abs(S-mt)<=Xr*Math.max(1,Math.abs(S),Math.abs(mt))&&Math.abs(P-it)<=Xr*Math.max(1,Math.abs(P),Math.abs(it))&&Math.abs(R-nt)<=Xr*Math.max(1,Math.abs(R),Math.abs(nt))&&Math.abs(L-dt)<=Xr*Math.max(1,Math.abs(L),Math.abs(dt))&&Math.abs(O-yt)<=Xr*Math.max(1,Math.abs(O),Math.abs(yt))&&Math.abs($-ot)<=Xr*Math.max(1,Math.abs($),Math.abs(ot))&&Math.abs(G-$e)<=Xr*Math.max(1,Math.abs(G),Math.abs($e))&&Math.abs(X-pt)<=Xr*Math.max(1,Math.abs(X),Math.abs(pt))&&Math.abs(ie-ft)<=Xr*Math.max(1,Math.abs(ie),Math.abs(ft))&&Math.abs(le-Lt)<=Xr*Math.max(1,Math.abs(le),Math.abs(Lt))},g.a_=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},g.aa=function(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,f,v)=>{const _=f||v;return n[u]=!_||_.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},g.ab=function(o,n){const a=[];for(const u in o)u in n||a.push(u);return a},g.ac=he,g.ad=function(o,n,a){var u=Math.sin(a),f=Math.cos(a),v=n[0],_=n[1],b=n[2],S=n[3],P=n[4],R=n[5],L=n[6],O=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=v*f+P*u,o[1]=_*f+R*u,o[2]=b*f+L*u,o[3]=S*f+O*u,o[4]=P*f-v*u,o[5]=R*f-_*u,o[6]=L*f-b*u,o[7]=O*f-S*u,o},g.ae=function(o){var n=new gc(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},g.af=$f,g.ag=function(o,n){let a=0,u=0;if(o.kind==="constant")u=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:_}=o,b=f?he(oi.interpolationFactor(f,n,v,_),0,1):0;o.kind==="camera"?u=Dr.number(o.minSize,o.maxSize,b):a=b}return{uSizeT:a,uSize:u}},g.ai=function(o,{uSize:n,uSizeT:a},{lowerSize:u,upperSize:f}){return o.kind==="source"?u/Yo:o.kind==="composite"?Dr.number(u/Yo,f/Yo,a):n},g.aj=yy,g.ak=function(o,n,a,u){const f=n.y-o.y,v=n.x-o.x,_=u.y-a.y,b=u.x-a.x,S=_*v-b*f;if(S===0)return null;const P=(b*(o.y-a.y)-_*(o.x-a.x))/S;return new z(o.x+P*v,o.y+P*f)},g.al=Kx,g.am=O1,g.an=Yg,g.ao=tr,g.aq=gy,g.ar=function(o,n){var a=n[0],u=n[1],f=n[2],v=n[3],_=n[4],b=n[5],S=n[6],P=n[7],R=n[8],L=n[9],O=n[10],$=n[11],G=n[12],X=n[13],ie=n[14],le=n[15],be=a*b-u*_,fe=a*S-f*_,_e=a*P-v*_,De=u*S-f*b,je=u*P-v*b,st=f*P-v*S,mt=R*X-L*G,it=R*ie-O*G,nt=R*le-$*G,dt=L*ie-O*X,yt=L*le-$*X,ot=O*le-$*ie,$e=be*ot-fe*yt+_e*dt+De*nt-je*it+st*mt;return $e?(o[0]=(b*ot-S*yt+P*dt)*($e=1/$e),o[1]=(f*yt-u*ot-v*dt)*$e,o[2]=(X*st-ie*je+le*De)*$e,o[3]=(O*je-L*st-$*De)*$e,o[4]=(S*nt-_*ot-P*it)*$e,o[5]=(a*ot-f*nt+v*it)*$e,o[6]=(ie*_e-G*st-le*fe)*$e,o[7]=(R*st-O*_e+$*fe)*$e,o[8]=(_*yt-b*nt+P*mt)*$e,o[9]=(u*nt-a*yt-v*mt)*$e,o[10]=(G*je-X*_e+le*be)*$e,o[11]=(L*_e-R*je-$*be)*$e,o[12]=(b*it-_*dt-S*mt)*$e,o[13]=(a*dt-u*it+f*mt)*$e,o[14]=(X*fe-G*De-ie*be)*$e,o[15]=(R*De-L*fe+O*be)*$e,o):null},g.as=Ey,g.at=my,g.au=Ty,g.av=function(){const o={},n=Ie.$version;for(const a in Ie.$root){const u=Ie.$root[a];if(u.required){let f=null;f=a==="version"?n:u.type==="array"?[]:{},f!=null&&(o[a]=f)}}return o},g.aw=Mf,g.ax=jn,g.ay=function(o){o=o.slice();const n=Object.create(null);for(let a=0;a<o.length;a++)n[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=Gr(o[a],n[o[a].ref]));return o},g.az=function(o){if(o.type==="custom")return new _k(o);switch(o.type){case"background":return new gk(o);case"circle":return new iI(o);case"fill":return new bI(o);case"fill-extrusion":return new DI(o);case"heatmap":return new aI(o);case"hillshade":return new lI(o);case"line":return new HI(o);case"raster":return new vk(o);case"symbol":return new Yf(o)}},g.b=Pe,g.b0=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},g.b1=ge,g.b2=Vx,g.b3=jx,g.b4=function(o,n,a,u,f){var v,_=1/Math.tan(n/2);return o[0]=_/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=_,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,f!=null&&f!==1/0?(o[10]=(f+u)*(v=1/(u-f)),o[14]=2*f*u*v):(o[10]=-1,o[14]=-2*u),o},g.b5=function(o,n,a){var u=Math.sin(a),f=Math.cos(a),v=n[4],_=n[5],b=n[6],S=n[7],P=n[8],R=n[9],L=n[10],O=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=v*f+P*u,o[5]=_*f+R*u,o[6]=b*f+L*u,o[7]=S*f+O*u,o[8]=P*f-v*u,o[9]=R*f-_*u,o[10]=L*f-b*u,o[11]=O*f-S*u,o},g.b6=H,g.b7=ne,g.b8=function(o){return o*Math.PI/180},g.b9=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},g.bA=So,g.ba=class extends ee{},g.bb=by,g.bc=Mk,g.be=Ht,g.bf=function(o,n){Dt.REGISTERED_PROTOCOLS[o]=n},g.bg=function(o){delete Dt.REGISTERED_PROTOCOLS[o]},g.bh=function(o,n){const a={};for(let f=0;f<o.length;f++){const v=n&&n[o[f].id]||Zu(o[f]);n&&(n[o[f].id]=v);let _=a[v];_||(_=a[v]=[]),_.push(o[f])}const u=[];for(const f in a)u.push(a[f]);return u},g.bi=ht,g.bj=Hx,g.bk=qx,g.bl=Sx,g.bm=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Un/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0],a=n.layout,u=n._unevaluatedLayout._values,f={layoutIconSize:u["icon-size"].possiblyEvaluate(new yn(o.bucket.zoom+1),o.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new yn(o.bucket.zoom+1),o.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new yn(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:P,maxZoom:R}=o.bucket.textSizeData;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new yn(P),o.canonical),u["text-size"].possiblyEvaluate(new yn(R),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:P,maxZoom:R}=o.bucket.iconSizeData;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new yn(P),o.canonical),u["icon-size"].possiblyEvaluate(new yn(R),o.canonical)]}const v=a.get("text-line-height")*tr,_=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",b=a.get("text-keep-upright"),S=a.get("text-size");for(const P of o.bucket.features){const R=a.get("text-font").evaluate(P,{},o.canonical).join(","),L=S.evaluate(P,{},o.canonical),O=f.layoutTextSize.evaluate(P,{},o.canonical),$=f.layoutIconSize.evaluate(P,{},o.canonical),G={horizontal:{},vertical:void 0},X=P.text;let ie,le=[0,0];if(X){const _e=X.toString(),De=a.get("text-letter-spacing").evaluate(P,{},o.canonical)*tr,je=Af(_e)?De:0,st=a.get("text-anchor").evaluate(P,{},o.canonical),mt=ib(n,P,o.canonical);if(!mt){const ot=a.get("text-radial-offset").evaluate(P,{},o.canonical);le=ot?rb(st,[ot*tr,Cy]):a.get("text-offset").evaluate(P,{},o.canonical).map($e=>$e*tr)}let it=_?"center":a.get("text-justify").evaluate(P,{},o.canonical);const nt=a.get("symbol-placement"),dt=nt==="point"?a.get("text-max-width").evaluate(P,{},o.canonical)*tr:0,yt=()=>{o.bucket.allowVerticalPlacement&&ah(_e)&&(G.vertical=Zf(X,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,v,st,"left",je,le,g.ah.vertical,!0,nt,O,L))};if(!_&&mt){const ot=new Set;if(it==="auto")for(let pt=0;pt<mt.values.length;pt+=2)ot.add(Ey(mt.values[pt]));else ot.add(it);let $e=!1;for(const pt of ot)if(!G.horizontal[pt])if($e)G.horizontal[pt]=G.horizontal[0];else{const ft=Zf(X,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,v,"center",pt,je,le,g.ah.horizontal,!1,nt,O,L);ft&&(G.horizontal[pt]=ft,$e=ft.positionedLines.length===1)}yt()}else{it==="auto"&&(it=Ey(st));const ot=Zf(X,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,v,st,it,je,le,g.ah.horizontal,!1,nt,O,L);ot&&(G.horizontal[it]=ot),yt(),ah(_e)&&_&&b&&(G.vertical=Zf(X,o.glyphMap,o.glyphPositions,o.imagePositions,R,dt,v,st,it,je,le,g.ah.vertical,!1,nt,O,L))}}let be=!1;if(P.icon&&P.icon.name){const _e=o.imageMap[P.icon.name];_e&&(ie=hk(o.imagePositions[P.icon.name],a.get("icon-offset").evaluate(P,{},o.canonical),a.get("icon-anchor").evaluate(P,{},o.canonical)),be=!!_e.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=be:o.bucket.sdfIcons!==be&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(_e.pixelRatio!==o.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const fe=ab(G.horizontal)||G.vertical;o.bucket.iconsInText=!!fe&&fe.iconsInText,(fe||ie)&&Ik(o.bucket,P,G,ie,o.imageMap,f,O,$,le,be,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},g.bn=cy,g.bo=ay,g.bp=ly,g.bq=is,g.br=hy,g.bs=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},g.bt=function(o,n,a,u,f){return h(this,void 0,void 0,function*(){if(D())try{return yield ze(o,n,a,u,f)}catch{}return function(v,_,b,S,P){const R=v.width,L=v.height;Ve&&We||(Ve=new OffscreenCanvas(R,L),We=Ve.getContext("2d",{willReadFrequently:!0})),Ve.width=R,Ve.height=L,We.drawImage(v,0,0,R,L);const O=We.getImageData(_,b,S,P);return We.clearRect(0,0,R,L),O.data}(o,n,a,u,f)})},g.bu=Ux,g.bv=C,g.bw=T,g.bx=px,g.by=lc,g.bz=function(o){return o.message===Xe},g.c=wt,g.d=o=>h(void 0,void 0,void 0,function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const n=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(n)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.e=ue,g.f=o=>new Promise((n,a)=>{const u=new Image;u.onload=()=>{n(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=Se})},u.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(o)],{type:"image/png"});u.src=o.byteLength?URL.createObjectURL(f):Se}),g.g=Zt,g.h=(o,n)=>zr(ue(o,{type:"json"}),n),g.i=ut,g.j=rn,g.k=Jt,g.l=(o,n)=>zr(ue(o,{type:"arrayBuffer"}),n),g.m=zr,g.n=function(o){return new hy(o).readFields(ok,[])},g.o=vh,g.p=wx,g.q=p,g.r=Ef,g.s=Rr,g.t=If,g.u=at,g.v=Ie,g.w=Ze,g.x=tl,g.y=function([o,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(a),y:o*Math.sin(n)*Math.sin(a),z:o*Math.cos(a)}},g.z=Dr}),c("worker",["./shared"],function(g){class h{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,V){for(const ae of j){this._layerConfigs[ae.id]=ae;const me=this._layers[ae.id]=g.az(ae);me._featureFilter=g.a6(me.filter),this.keyCache[ae.id]&&delete this.keyCache[ae.id]}for(const ae of V)delete this.keyCache[ae],delete this._layerConfigs[ae],delete this._layers[ae];this.familiesBySource={};const W=g.bh(Object.values(this._layerConfigs),this.keyCache);for(const ae of W){const me=ae.map(Le=>this._layers[Le.id]),de=me[0];if(de.visibility==="none")continue;const ye=de.source||"";let ce=this.familiesBySource[ye];ce||(ce=this.familiesBySource[ye]={});const we=de.sourceLayer||"_geojsonTileLayer";let Ne=ce[we];Ne||(Ne=ce[we]=[]),Ne.push(me)}}}class C{constructor(j){const V={},W=[];for(const ye in j){const ce=j[ye],we=V[ye]={};for(const Ne in ce){const Le=ce[+Ne];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Ae={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};W.push(Ae),we[Ne]={rect:Ae,metrics:Le.metrics}}}const{w:ae,h:me}=g.p(W),de=new g.o({width:ae||1,height:me||1});for(const ye in j){const ce=j[ye];for(const we in ce){const Ne=ce[+we];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const Le=V[ye][we].rect;g.o.copy(Ne.bitmap,de,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Ne.bitmap)}}this.image=de,this.positions=V}}g.bi("GlyphAtlas",C);class T{constructor(j){this.tileID=new g.Q(j.tileID.overscaledZ,j.tileID.wrap,j.tileID.canonical.z,j.tileID.canonical.x,j.tileID.canonical.y),this.uid=j.uid,this.zoom=j.zoom,this.pixelRatio=j.pixelRatio,this.tileSize=j.tileSize,this.source=j.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=j.showCollisionBoxes,this.collectResourceTiming=!!j.collectResourceTiming,this.returnDependencies=!!j.returnDependencies,this.promoteId=j.promoteId,this.inFlightDependencies=[]}parse(j,V,W,ae){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=j,this.collisionBoxArray=new g.a4;const me=new g.bj(Object.keys(j.layers).sort()),de=new g.bk(this.tileID,this.promoteId);de.bucketLayerIDs=[];const ye={},ce={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},we=V.familiesBySource[this.source];for(const Nt in we){const bn=j.layers[Nt];if(!bn)continue;bn.version===1&&g.w(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jn=me.encode(Nt),Sr=[];for(let _i=0;_i<bn.length;_i++){const kn=bn.feature(_i),$a=de.getId(kn,Nt);Sr.push({feature:kn,id:$a,index:_i,sourceLayerIndex:Jn})}for(const _i of we[Nt]){const kn=_i[0];kn.source!==this.source&&g.w(`layer.source = ${kn.source} does not equal this.source = ${this.source}`),kn.minzoom&&this.zoom<Math.floor(kn.minzoom)||kn.maxzoom&&this.zoom>=kn.maxzoom||kn.visibility!=="none"&&(k(_i,this.zoom,W),(ye[kn.id]=kn.createBucket({index:de.bucketLayerIDs.length,layers:_i,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jn,sourceID:this.source})).populate(Sr,ce,this.tileID.canonical),de.bucketLayerIDs.push(_i.map($a=>$a.id)))}}const Ne=g.aE(ce.glyphDependencies,Nt=>Object.keys(Nt).map(Number));this.inFlightDependencies.forEach(Nt=>Nt==null?void 0:Nt.abort()),this.inFlightDependencies=[];let Le=Promise.resolve({});if(Object.keys(Ne).length){const Nt=new AbortController;this.inFlightDependencies.push(Nt),Le=ae.sendAsync({type:"GG",data:{stacks:Ne,source:this.source,tileID:this.tileID,type:"glyphs"}},Nt)}const Ae=Object.keys(ce.iconDependencies);let vt=Promise.resolve({});if(Ae.length){const Nt=new AbortController;this.inFlightDependencies.push(Nt),vt=ae.sendAsync({type:"GI",data:{icons:Ae,source:this.source,tileID:this.tileID,type:"icons"}},Nt)}const xt=Object.keys(ce.patternDependencies);let kt=Promise.resolve({});if(xt.length){const Nt=new AbortController;this.inFlightDependencies.push(Nt),kt=ae.sendAsync({type:"GI",data:{icons:xt,source:this.source,tileID:this.tileID,type:"patterns"}},Nt)}const[Et,Ut,qt]=yield Promise.all([Le,vt,kt]),fn=new C(Et),$n=new g.bl(Ut,qt);for(const Nt in ye){const bn=ye[Nt];bn instanceof g.a5?(k(bn.layers,this.zoom,W),g.bm({bucket:bn,glyphMap:Et,glyphPositions:fn.positions,imageMap:Ut,imagePositions:$n.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):bn.hasPattern&&(bn instanceof g.bn||bn instanceof g.bo||bn instanceof g.bp)&&(k(bn.layers,this.zoom,W),bn.addFeatures(ce,this.tileID.canonical,$n.patternPositions))}return this.status="done",{buckets:Object.values(ye).filter(Nt=>!Nt.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fn.image,imageAtlas:$n,glyphMap:this.returnDependencies?Et:null,iconMap:this.returnDependencies?Ut:null,glyphPositions:this.returnDependencies?fn.positions:null}})}}function k(re,j,V){const W=new g.a8(j);for(const ae of re)ae.recalculate(W,V)}class z{constructor(j,V,W){this.actor=j,this.layerIndex=V,this.availableImages=W,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(j,V){return g._(this,void 0,void 0,function*(){const W=yield g.l(j.request,V);try{return{vectorTile:new g.bq.VectorTile(new g.br(W.data)),rawData:W.data,cacheControl:W.cacheControl,expires:W.expires}}catch(ae){const me=new Uint8Array(W.data);let de=`Unable to parse the tile at ${j.request.url}, `;throw de+=me[0]===31&&me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ae.messge}`,new Error(de)}})}loadTile(j){return g._(this,void 0,void 0,function*(){const V=j.uid,W=!!(j&&j.request&&j.request.collectResourceTiming)&&new g.bs(j.request),ae=new T(j);this.loading[V]=ae;const me=new AbortController;ae.abort=me;try{const de=yield this.loadVectorTile(j,me);if(delete this.loading[V],!de)return null;const ye=de.rawData,ce={};de.expires&&(ce.expires=de.expires),de.cacheControl&&(ce.cacheControl=de.cacheControl);const we={};if(W){const Le=W.finish();Le&&(we.resourceTiming=JSON.parse(JSON.stringify(Le)))}ae.vectorTile=de.vectorTile;const Ne=ae.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[V]=ae,this.fetching[V]={rawTileData:ye,cacheControl:ce,resourceTiming:we};try{const Le=yield Ne;return g.e({rawTileData:ye.slice(0)},Le,ce,we)}finally{delete this.fetching[V]}}catch(de){throw delete this.loading[V],ae.status="done",this.loaded[V]=ae,de}})}reloadTile(j){return g._(this,void 0,void 0,function*(){const V=j.uid;if(!this.loaded||!this.loaded[V])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const W=this.loaded[V];if(W.showCollisionBoxes=j.showCollisionBoxes,W.status==="parsing"){const ae=yield W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor);let me;if(this.fetching[V]){const{rawTileData:de,cacheControl:ye,resourceTiming:ce}=this.fetching[V];delete this.fetching[V],me=g.e({rawTileData:de.slice(0)},ae,ye,ce)}else me=ae;return me}if(W.status==="done"&&W.vectorTile)return W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(j){return g._(this,void 0,void 0,function*(){const V=this.loading,W=j.uid;V&&V[W]&&V[W].abort&&(V[W].abort.abort(),delete V[W])})}removeTile(j){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[j.uid]&&delete this.loaded[j.uid]})}}class M{constructor(){this.loaded={}}loadTile(j){return g._(this,void 0,void 0,function*(){const{uid:V,encoding:W,rawImageData:ae,redFactor:me,greenFactor:de,blueFactor:ye,baseShift:ce}=j,we=ae.width+2,Ne=ae.height+2,Le=g.b(ae)?new g.R({width:we,height:Ne},yield g.bt(ae,-1,-1,we,Ne)):ae,Ae=new g.bu(V,Le,W,me,de,ye,ce);return this.loaded=this.loaded||{},this.loaded[V]=Ae,Ae})}removeTile(j){const V=this.loaded,W=j.uid;V&&V[W]&&delete V[W]}}function Y(re,j){if(re.length!==0){K(re[0],j);for(var V=1;V<re.length;V++)K(re[V],!j)}}function K(re,j){for(var V=0,W=0,ae=0,me=re.length,de=me-1;ae<me;de=ae++){var ye=(re[ae][0]-re[de][0])*(re[de][1]+re[ae][1]),ce=V+ye;W+=Math.abs(V)>=Math.abs(ye)?V-ce+ye:ye-ce+V,V=ce}V+W>=0!=!!j&&re.reverse()}var Z=g.bv(function re(j,V){var W,ae=j&&j.type;if(ae==="FeatureCollection")for(W=0;W<j.features.length;W++)re(j.features[W],V);else if(ae==="GeometryCollection")for(W=0;W<j.geometries.length;W++)re(j.geometries[W],V);else if(ae==="Feature")re(j.geometry,V);else if(ae==="Polygon")Y(j.coordinates,V);else if(ae==="MultiPolygon")for(W=0;W<j.coordinates.length;W++)Y(j.coordinates[W],V);return j});const Q=g.bq.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},D=g.bw,H=g.bq.VectorTileFeature,ne=he;function he(re,j){this.options=j||{},this.features=re,this.length=re.length}function ge(re,j){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=j||4096}he.prototype.feature=function(re){return new ge(this.features[re],this.options.extent)},ge.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var j=0;j<re.length;j++){for(var V=re[j],W=[],ae=0;ae<V.length;ae++)W.push(new D(V[ae][0],V[ae][1]));this.geometry.push(W)}return this.geometry},ge.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,j=1/0,V=-1/0,W=1/0,ae=-1/0,me=0;me<re.length;me++)for(var de=re[me],ye=0;ye<de.length;ye++){var ce=de[ye];j=Math.min(j,ce.x),V=Math.max(V,ce.x),W=Math.min(W,ce.y),ae=Math.max(ae,ce.y)}return[j,W,V,ae]},ge.prototype.toGeoJSON=H.prototype.toGeoJSON;var ue=g.bx,Me=ne;function Be(re){var j=new ue;return function(V,W){for(var ae in V.layers)W.writeMessage(3,Re,V.layers[ae])}(re,j),j.finish()}function Re(re,j){var V;j.writeVarintField(15,re.version||1),j.writeStringField(1,re.name||""),j.writeVarintField(5,re.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<re.length;V++)W.feature=re.feature(V),j.writeMessage(2,He,W);var ae=W.keys;for(V=0;V<ae.length;V++)j.writeStringField(3,ae[V]);var me=W.values;for(V=0;V<me.length;V++)j.writeMessage(4,Oe,me[V])}function He(re,j){var V=re.feature;V.id!==void 0&&j.writeVarintField(1,V.id),j.writeMessage(2,rt,re),j.writeVarintField(3,V.type),j.writeMessage(4,ut,V)}function rt(re,j){var V=re.feature,W=re.keys,ae=re.values,me=re.keycache,de=re.valuecache;for(var ye in V.properties){var ce=V.properties[ye],we=me[ye];if(ce!==null){we===void 0&&(W.push(ye),me[ye]=we=W.length-1),j.writeVarint(we);var Ne=typeof ce;Ne!=="string"&&Ne!=="boolean"&&Ne!=="number"&&(ce=JSON.stringify(ce));var Le=Ne+":"+ce,Ae=de[Le];Ae===void 0&&(ae.push(ce),de[Le]=Ae=ae.length-1),j.writeVarint(Ae)}}}function Ze(re,j){return(j<<3)+(7&re)}function qe(re){return re<<1^re>>31}function ut(re,j){for(var V=re.loadGeometry(),W=re.type,ae=0,me=0,de=V.length,ye=0;ye<de;ye++){var ce=V[ye],we=1;W===1&&(we=ce.length),j.writeVarint(Ze(1,we));for(var Ne=W===3?ce.length-1:ce.length,Le=0;Le<Ne;Le++){Le===1&&W!==1&&j.writeVarint(Ze(2,Ne-1));var Ae=ce[Le].x-ae,vt=ce[Le].y-me;j.writeVarint(qe(Ae)),j.writeVarint(qe(vt)),ae+=Ae,me+=vt}W===3&&j.writeVarint(Ze(7,1))}}function Oe(re,j){var V=typeof re;V==="string"?j.writeStringField(1,re):V==="boolean"?j.writeBooleanField(7,re):V==="number"&&(re%1!=0?j.writeDoubleField(3,re):re<0?j.writeSVarintField(6,re):j.writeVarintField(5,re))}U.exports=Be,U.exports.fromVectorTileJs=Be,U.exports.fromGeojsonVt=function(re,j){j=j||{};var V={};for(var W in re)V[W]=new Me(re[W].features,j),V[W].name=W,V[W].version=j.version,V[W].extent=j.extent;return Be({layers:V})},U.exports.GeoJSONWrapper=Me;var Pe=g.bv(U.exports);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},ze=Math.fround||(Ve=new Float32Array(1),re=>(Ve[0]=+re,Ve[0]));var Ve;const We=3,Xe=5,wt=6;class Dt{constructor(j){this.options=Object.assign(Object.create(Se),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:V,minZoom:W,maxZoom:ae}=this.options;V&&console.time("total time");const me=`prepare ${j.length} points`;V&&console.time(me),this.points=j;const de=[];for(let ce=0;ce<j.length;ce++){const we=j[ce];if(!we.geometry)continue;const[Ne,Le]=we.geometry.coordinates,Ae=ze(Ht(Ne)),vt=ze(jn(Le));de.push(Ae,vt,1/0,ce,-1,1),this.options.reduce&&de.push(0)}let ye=this.trees[ae+1]=this._createTree(de);V&&console.timeEnd(me);for(let ce=ae;ce>=W;ce--){const we=+Date.now();ye=this.trees[ce]=this._createTree(this._cluster(ye,ce)),V&&console.log("z%d: %d clusters in %dms",ce,ye.numItems,+Date.now()-we)}return V&&console.timeEnd("total time"),this}getClusters(j,V){let W=((j[0]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,j[1]));let me=j[2]===180?180:((j[2]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)W=-180,me=180;else if(W>me){const Le=this.getClusters([W,ae,180,de],V),Ae=this.getClusters([-180,ae,me,de],V);return Le.concat(Ae)}const ye=this.trees[this._limitZoom(V)],ce=ye.range(Ht(W),jn(de),Ht(me),jn(ae)),we=ye.data,Ne=[];for(const Le of ce){const Ae=this.stride*Le;Ne.push(we[Ae+Xe]>1?Zt(we,Ae,this.clusterProps):this.points[we[Ae+We]])}return Ne}getChildren(j){const V=this._getOriginId(j),W=this._getOriginZoom(j),ae="No cluster with the specified id.",me=this.trees[W];if(!me)throw new Error(ae);const de=me.data;if(V*this.stride>=de.length)throw new Error(ae);const ye=this.options.radius/(this.options.extent*Math.pow(2,W-1)),ce=me.within(de[V*this.stride],de[V*this.stride+1],ye),we=[];for(const Ne of ce){const Le=Ne*this.stride;de[Le+4]===j&&we.push(de[Le+Xe]>1?Zt(de,Le,this.clusterProps):this.points[de[Le+We]])}if(we.length===0)throw new Error(ae);return we}getLeaves(j,V,W){const ae=[];return this._appendLeaves(ae,j,V=V||10,W=W||0,0),ae}getTile(j,V,W){const ae=this.trees[this._limitZoom(j)],me=Math.pow(2,j),{extent:de,radius:ye}=this.options,ce=ye/de,we=(W-ce)/me,Ne=(W+1+ce)/me,Le={features:[]};return this._addTileFeatures(ae.range((V-ce)/me,we,(V+1+ce)/me,Ne),ae.data,V,W,me,Le),V===0&&this._addTileFeatures(ae.range(1-ce/me,we,1,Ne),ae.data,me,W,me,Le),V===me-1&&this._addTileFeatures(ae.range(0,we,ce/me,Ne),ae.data,-1,W,me,Le),Le.features.length?Le:null}getClusterExpansionZoom(j){let V=this._getOriginZoom(j)-1;for(;V<=this.options.maxZoom;){const W=this.getChildren(j);if(V++,W.length!==1)break;j=W[0].properties.cluster_id}return V}_appendLeaves(j,V,W,ae,me){const de=this.getChildren(V);for(const ye of de){const ce=ye.properties;if(ce&&ce.cluster?me+ce.point_count<=ae?me+=ce.point_count:me=this._appendLeaves(j,ce.cluster_id,W,ae,me):me<ae?me++:j.push(ye),j.length===W)break}return me}_createTree(j){const V=new g.au(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<j.length;W+=this.stride)V.add(j[W],j[W+1]);return V.finish(),V.data=j,V}_addTileFeatures(j,V,W,ae,me,de){for(const ye of j){const ce=ye*this.stride,we=V[ce+Xe]>1;let Ne,Le,Ae;if(we)Ne=Kt(V,ce,this.clusterProps),Le=V[ce],Ae=V[ce+1];else{const kt=this.points[V[ce+We]];Ne=kt.properties;const[Et,Ut]=kt.geometry.coordinates;Le=Ht(Et),Ae=jn(Ut)}const vt={type:1,geometry:[[Math.round(this.options.extent*(Le*me-W)),Math.round(this.options.extent*(Ae*me-ae))]],tags:Ne};let xt;xt=we||this.options.generateId?V[ce+We]:this.points[V[ce+We]].id,xt!==void 0&&(vt.id=xt),de.features.push(vt)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,V){const{radius:W,extent:ae,reduce:me,minPoints:de}=this.options,ye=W/(ae*Math.pow(2,V)),ce=j.data,we=[],Ne=this.stride;for(let Le=0;Le<ce.length;Le+=Ne){if(ce[Le+2]<=V)continue;ce[Le+2]=V;const Ae=ce[Le],vt=ce[Le+1],xt=j.within(ce[Le],ce[Le+1],ye),kt=ce[Le+Xe];let Et=kt;for(const Ut of xt){const qt=Ut*Ne;ce[qt+2]>V&&(Et+=ce[qt+Xe])}if(Et>kt&&Et>=de){let Ut,qt=Ae*kt,fn=vt*kt,$n=-1;const Nt=((Le/Ne|0)<<5)+(V+1)+this.points.length;for(const bn of xt){const Jn=bn*Ne;if(ce[Jn+2]<=V)continue;ce[Jn+2]=V;const Sr=ce[Jn+Xe];qt+=ce[Jn]*Sr,fn+=ce[Jn+1]*Sr,ce[Jn+4]=Nt,me&&(Ut||(Ut=this._map(ce,Le,!0),$n=this.clusterProps.length,this.clusterProps.push(Ut)),me(Ut,this._map(ce,Jn)))}ce[Le+4]=Nt,we.push(qt/Et,fn/Et,1/0,Nt,-1,Et),me&&we.push($n)}else{for(let Ut=0;Ut<Ne;Ut++)we.push(ce[Le+Ut]);if(Et>1)for(const Ut of xt){const qt=Ut*Ne;if(!(ce[qt+2]<=V)){ce[qt+2]=V;for(let fn=0;fn<Ne;fn++)we.push(ce[qt+fn])}}}}return we}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,V,W){if(j[V+Xe]>1){const de=this.clusterProps[j[V+wt]];return W?Object.assign({},de):de}const ae=this.points[j[V+We]].properties,me=this.options.map(ae);return W&&me===ae?Object.assign({},me):me}}function Zt(re,j,V){return{type:"Feature",id:re[j+We],properties:Kt(re,j,V),geometry:{type:"Point",coordinates:[(W=re[j],360*(W-.5)),zr(re[j+1])]}};var W}function Kt(re,j,V){const W=re[j+Xe],ae=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,me=re[j+wt],de=me===-1?{}:Object.assign({},V[me]);return Object.assign(de,{cluster:!0,cluster_id:re[j+We],point_count:W,point_count_abbreviated:ae})}function Ht(re){return re/360+.5}function jn(re){const j=Math.sin(re*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function zr(re){const j=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Rr(re,j,V,W){for(var ae,me=W,de=V-j>>1,ye=V-j,ce=re[j],we=re[j+1],Ne=re[V],Le=re[V+1],Ae=j+3;Ae<V;Ae+=3){var vt=ar(re[Ae],re[Ae+1],ce,we,Ne,Le);if(vt>me)ae=Ae,me=vt;else if(vt===me){var xt=Math.abs(Ae-de);xt<ye&&(ae=Ae,ye=xt)}}me>W&&(ae-j>3&&Rr(re,j,ae,W),re[ae+2]=me,V-ae>3&&Rr(re,ae,V,W))}function ar(re,j,V,W,ae,me){var de=ae-V,ye=me-W;if(de!==0||ye!==0){var ce=((re-V)*de+(j-W)*ye)/(de*de+ye*ye);ce>1?(V=ae,W=me):ce>0&&(V+=de*ce,W+=ye*ce)}return(de=re-V)*de+(ye=j-W)*ye}function sr(re,j,V,W){var ae={id:re===void 0?null:re,type:j,geometry:V,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var de=me.geometry,ye=me.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")Jt(me,de);else if(ye==="Polygon"||ye==="MultiLineString")for(var ce=0;ce<de.length;ce++)Jt(me,de[ce]);else if(ye==="MultiPolygon")for(ce=0;ce<de.length;ce++)for(var we=0;we<de[ce].length;we++)Jt(me,de[ce][we])}(ae),ae}function Jt(re,j){for(var V=0;V<j.length;V+=3)re.minX=Math.min(re.minX,j[V]),re.minY=Math.min(re.minY,j[V+1]),re.maxX=Math.max(re.maxX,j[V]),re.maxY=Math.max(re.maxY,j[V+1])}function rn(re,j,V,W){if(j.geometry){var ae=j.geometry.coordinates,me=j.geometry.type,de=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),ye=[],ce=j.id;if(V.promoteId?ce=j.properties[V.promoteId]:V.generateId&&(ce=W||0),me==="Point")Xn(ae,ye);else if(me==="MultiPoint")for(var we=0;we<ae.length;we++)Xn(ae[we],ye);else if(me==="LineString")Ie(ae,ye,de,!1);else if(me==="MultiLineString"){if(V.lineMetrics){for(we=0;we<ae.length;we++)Ie(ae[we],ye=[],de,!1),re.push(sr(ce,"LineString",ye,j.properties));return}pr(ae,ye,de,!1)}else if(me==="Polygon")pr(ae,ye,de,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(we=0;we<j.geometry.geometries.length;we++)rn(re,{id:ce,geometry:j.geometry.geometries[we],properties:j.properties},V,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(we=0;we<ae.length;we++){var Ne=[];pr(ae[we],Ne,de,!0),ye.push(Ne)}}re.push(sr(ce,me,ye,j.properties))}}function Xn(re,j){j.push(Gr(re[0])),j.push(Pt(re[1])),j.push(0)}function Ie(re,j,V,W){for(var ae,me,de=0,ye=0;ye<re.length;ye++){var ce=Gr(re[ye][0]),we=Pt(re[ye][1]);j.push(ce),j.push(we),j.push(0),ye>0&&(de+=W?(ae*we-ce*me)/2:Math.sqrt(Math.pow(ce-ae,2)+Math.pow(we-me,2))),ae=ce,me=we}var Ne=j.length-3;j[2]=1,Rr(j,0,Ne,V),j[Ne+2]=1,j.size=Math.abs(de),j.start=0,j.end=j.size}function pr(re,j,V,W){for(var ae=0;ae<re.length;ae++){var me=[];Ie(re[ae],me,V,W),j.push(me)}}function Gr(re){return re/360+.5}function Pt(re){var j=Math.sin(re*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function Ot(re,j,V,W,ae,me,de,ye){if(W/=j,me>=(V/=j)&&de<W)return re;if(de<V||me>=W)return null;for(var ce=[],we=0;we<re.length;we++){var Ne=re[we],Le=Ne.geometry,Ae=Ne.type,vt=ae===0?Ne.minX:Ne.minY,xt=ae===0?Ne.maxX:Ne.maxY;if(vt>=V&&xt<W)ce.push(Ne);else if(!(xt<V||vt>=W)){var kt=[];if(Ae==="Point"||Ae==="MultiPoint")_n(Le,kt,V,W,ae);else if(Ae==="LineString")xr(Le,kt,V,W,ae,!1,ye.lineMetrics);else if(Ae==="MultiLineString")zi(Le,kt,V,W,ae,!1);else if(Ae==="Polygon")zi(Le,kt,V,W,ae,!0);else if(Ae==="MultiPolygon")for(var Et=0;Et<Le.length;Et++){var Ut=[];zi(Le[Et],Ut,V,W,ae,!0),Ut.length&&kt.push(Ut)}if(kt.length){if(ye.lineMetrics&&Ae==="LineString"){for(Et=0;Et<kt.length;Et++)ce.push(sr(Ne.id,Ae,kt[Et],Ne.tags));continue}Ae!=="LineString"&&Ae!=="MultiLineString"||(kt.length===1?(Ae="LineString",kt=kt[0]):Ae="MultiLineString"),Ae!=="Point"&&Ae!=="MultiPoint"||(Ae=kt.length===3?"Point":"MultiPoint"),ce.push(sr(Ne.id,Ae,kt,Ne.tags))}}}return ce.length?ce:null}function _n(re,j,V,W,ae){for(var me=0;me<re.length;me+=3){var de=re[me+ae];de>=V&&de<=W&&(j.push(re[me]),j.push(re[me+1]),j.push(re[me+2]))}}function xr(re,j,V,W,ae,me,de){for(var ye,ce,we=Qi(re),Ne=ae===0?xn:Yn,Le=re.start,Ae=0;Ae<re.length-3;Ae+=3){var vt=re[Ae],xt=re[Ae+1],kt=re[Ae+2],Et=re[Ae+3],Ut=re[Ae+4],qt=ae===0?vt:xt,fn=ae===0?Et:Ut,$n=!1;de&&(ye=Math.sqrt(Math.pow(vt-Et,2)+Math.pow(xt-Ut,2))),qt<V?fn>V&&(ce=Ne(we,vt,xt,Et,Ut,V),de&&(we.start=Le+ye*ce)):qt>W?fn<W&&(ce=Ne(we,vt,xt,Et,Ut,W),de&&(we.start=Le+ye*ce)):Lr(we,vt,xt,kt),fn<V&&qt>=V&&(ce=Ne(we,vt,xt,Et,Ut,V),$n=!0),fn>W&&qt<=W&&(ce=Ne(we,vt,xt,Et,Ut,W),$n=!0),!me&&$n&&(de&&(we.end=Le+ye*ce),j.push(we),we=Qi(re)),de&&(Le+=ye)}var Nt=re.length-3;vt=re[Nt],xt=re[Nt+1],kt=re[Nt+2],(qt=ae===0?vt:xt)>=V&&qt<=W&&Lr(we,vt,xt,kt),Nt=we.length-3,me&&Nt>=3&&(we[Nt]!==we[0]||we[Nt+1]!==we[1])&&Lr(we,we[0],we[1],we[2]),we.length&&j.push(we)}function Qi(re){var j=[];return j.size=re.size,j.start=re.start,j.end=re.end,j}function zi(re,j,V,W,ae,me){for(var de=0;de<re.length;de++)xr(re[de],j,V,W,ae,me,!1)}function Lr(re,j,V,W){re.push(j),re.push(V),re.push(W)}function xn(re,j,V,W,ae,me){var de=(me-j)/(W-j);return re.push(me),re.push(V+(ae-V)*de),re.push(1),de}function Yn(re,j,V,W,ae,me){var de=(me-V)/(ae-V);return re.push(j+(W-j)*de),re.push(me),re.push(1),de}function Qe(re,j){for(var V=[],W=0;W<re.length;W++){var ae,me=re[W],de=me.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")ae=br(me.geometry,j);else if(de==="MultiLineString"||de==="Polygon"){ae=[];for(var ye=0;ye<me.geometry.length;ye++)ae.push(br(me.geometry[ye],j))}else if(de==="MultiPolygon")for(ae=[],ye=0;ye<me.geometry.length;ye++){for(var ce=[],we=0;we<me.geometry[ye].length;we++)ce.push(br(me.geometry[ye][we],j));ae.push(ce)}V.push(sr(me.id,de,ae,me.tags))}return V}function br(re,j){var V=[];V.size=re.size,re.start!==void 0&&(V.start=re.start,V.end=re.end);for(var W=0;W<re.length;W+=3)V.push(re[W]+j,re[W+1],re[W+2]);return V}function wr(re,j){if(re.transformed)return re;var V,W,ae,me=1<<re.z,de=re.x,ye=re.y;for(V=0;V<re.features.length;V++){var ce=re.features[V],we=ce.geometry,Ne=ce.type;if(ce.geometry=[],Ne===1)for(W=0;W<we.length;W+=2)ce.geometry.push(Vo(we[W],we[W+1],j,me,de,ye));else for(W=0;W<we.length;W++){var Le=[];for(ae=0;ae<we[W].length;ae+=2)Le.push(Vo(we[W][ae],we[W][ae+1],j,me,de,ye));ce.geometry.push(Le)}}return re.transformed=!0,re}function Vo(re,j,V,W,ae,me){return[Math.round(V*(re*W-ae)),Math.round(V*(j*W-me))]}function _o(re,j,V,W,ae){for(var me=j===ae.maxZoom?0:ae.tolerance/((1<<j)*ae.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:W,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<re.length;ye++){de.numFeatures++,Je(de,re[ye],me,ae);var ce=re[ye].minX,we=re[ye].minY,Ne=re[ye].maxX,Le=re[ye].maxY;ce<de.minX&&(de.minX=ce),we<de.minY&&(de.minY=we),Ne>de.maxX&&(de.maxX=Ne),Le>de.maxY&&(de.maxY=Le)}return de}function Je(re,j,V,W){var ae=j.geometry,me=j.type,de=[];if(me==="Point"||me==="MultiPoint")for(var ye=0;ye<ae.length;ye+=3)de.push(ae[ye]),de.push(ae[ye+1]),re.numPoints++,re.numSimplified++;else if(me==="LineString")Bt(de,ae,re,V,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(ye=0;ye<ae.length;ye++)Bt(de,ae[ye],re,V,me==="Polygon",ye===0);else if(me==="MultiPolygon")for(var ce=0;ce<ae.length;ce++){var we=ae[ce];for(ye=0;ye<we.length;ye++)Bt(de,we[ye],re,V,!0,ye===0)}if(de.length){var Ne=j.tags||null;if(me==="LineString"&&W.lineMetrics){for(var Le in Ne={},j.tags)Ne[Le]=j.tags[Le];Ne.mapbox_clip_start=ae.start/ae.size,Ne.mapbox_clip_end=ae.end/ae.size}var Ae={geometry:de,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:Ne};j.id!==null&&(Ae.id=j.id),re.features.push(Ae)}}function Bt(re,j,V,W,ae,me){var de=W*W;if(W>0&&j.size<(ae?de:W))V.numPoints+=j.length/3;else{for(var ye=[],ce=0;ce<j.length;ce+=3)(W===0||j[ce+2]>de)&&(V.numSimplified++,ye.push(j[ce]),ye.push(j[ce+1])),V.numPoints++;ae&&function(we,Ne){for(var Le=0,Ae=0,vt=we.length,xt=vt-2;Ae<vt;xt=Ae,Ae+=2)Le+=(we[Ae]-we[xt])*(we[Ae+1]+we[xt+1]);if(Le>0===Ne)for(Ae=0,vt=we.length;Ae<vt/2;Ae+=2){var kt=we[Ae],Et=we[Ae+1];we[Ae]=we[vt-2-Ae],we[Ae+1]=we[vt-1-Ae],we[vt-2-Ae]=kt,we[vt-1-Ae]=Et}}(ye,me),re.push(ye)}}function It(re,j){var V=(j=this.options=function(ae,me){for(var de in me)ae[de]=me[de];return ae}(Object.create(this.options),j)).debug;if(V&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var W=function(ae,me){var de=[];if(ae.type==="FeatureCollection")for(var ye=0;ye<ae.features.length;ye++)rn(de,ae.features[ye],me,ye);else rn(de,ae.type==="Feature"?ae:{geometry:ae},me);return de}(re,j);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),W=function(ae,me){var de=me.buffer/me.extent,ye=ae,ce=Ot(ae,1,-1-de,de,0,-1,2,me),we=Ot(ae,1,1-de,2+de,0,-1,2,me);return(ce||we)&&(ye=Ot(ae,1,-de,1+de,0,-1,2,me)||[],ce&&(ye=Qe(ce,1).concat(ye)),we&&(ye=ye.concat(Qe(we,-1)))),ye}(W,j),W.length&&this.splitTile(W,0,0,0),V&&(W.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function mr(re,j,V){return 32*((1<<re)*V+j)+re}function lr(re,j){return j?re.properties[j]:re.id}function Ct(re,j){if(re==null)return!0;if(re.type==="Feature")return lr(re,j)!=null;if(re.type==="FeatureCollection"){const V=new Set;for(const W of re.features){const ae=lr(W,j);if(ae==null||V.has(ae))return!1;V.add(ae)}return!0}return!1}function Fr(re,j){const V=new Map;if(re!=null)if(re.type==="Feature")V.set(lr(re,j),re);else for(const W of re.features)V.set(lr(W,j),W);return V}It.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},It.prototype.splitTile=function(re,j,V,W,ae,me,de){for(var ye=[re,j,V,W],ce=this.options,we=ce.debug;ye.length;){W=ye.pop(),V=ye.pop(),j=ye.pop(),re=ye.pop();var Ne=1<<j,Le=mr(j,V,W),Ae=this.tiles[Le];if(!Ae&&(we>1&&console.time("creation"),Ae=this.tiles[Le]=_o(re,j,V,W,ce),this.tileCoords.push({z:j,x:V,y:W}),we)){we>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,V,W,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));var vt="z"+j;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(Ae.source=re,ae){if(j===ce.maxZoom||j===ae)continue;var xt=1<<ae-j;if(V!==Math.floor(me/xt)||W!==Math.floor(de/xt))continue}else if(j===ce.indexMaxZoom||Ae.numPoints<=ce.indexMaxPoints)continue;if(Ae.source=null,re.length!==0){we>1&&console.time("clipping");var kt,Et,Ut,qt,fn,$n,Nt=.5*ce.buffer/ce.extent,bn=.5-Nt,Jn=.5+Nt,Sr=1+Nt;kt=Et=Ut=qt=null,fn=Ot(re,Ne,V-Nt,V+Jn,0,Ae.minX,Ae.maxX,ce),$n=Ot(re,Ne,V+bn,V+Sr,0,Ae.minX,Ae.maxX,ce),re=null,fn&&(kt=Ot(fn,Ne,W-Nt,W+Jn,1,Ae.minY,Ae.maxY,ce),Et=Ot(fn,Ne,W+bn,W+Sr,1,Ae.minY,Ae.maxY,ce),fn=null),$n&&(Ut=Ot($n,Ne,W-Nt,W+Jn,1,Ae.minY,Ae.maxY,ce),qt=Ot($n,Ne,W+bn,W+Sr,1,Ae.minY,Ae.maxY,ce),$n=null),we>1&&console.timeEnd("clipping"),ye.push(kt||[],j+1,2*V,2*W),ye.push(Et||[],j+1,2*V,2*W+1),ye.push(Ut||[],j+1,2*V+1,2*W),ye.push(qt||[],j+1,2*V+1,2*W+1)}}},It.prototype.getTile=function(re,j,V){var W=this.options,ae=W.extent,me=W.debug;if(re<0||re>24)return null;var de=1<<re,ye=mr(re,j=(j%de+de)%de,V);if(this.tiles[ye])return wr(this.tiles[ye],ae);me>1&&console.log("drilling down to z%d-%d-%d",re,j,V);for(var ce,we=re,Ne=j,Le=V;!ce&&we>0;)we--,Ne=Math.floor(Ne/2),Le=Math.floor(Le/2),ce=this.tiles[mr(we,Ne,Le)];return ce&&ce.source?(me>1&&console.log("found parent tile z%d-%d-%d",we,Ne,Le),me>1&&console.time("drilling down"),this.splitTile(ce.source,we,Ne,Le,re,j,V),me>1&&console.timeEnd("drilling down"),this.tiles[ye]?wr(this.tiles[ye],ae):null):null};class vi extends z{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(j,V){return g._(this,void 0,void 0,function*(){const W=j.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ae=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!ae)return null;const me=new class{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.W,this.length=ye.length,this._features=ye}feature(ye){return new class{constructor(ce){this._feature=ce,this.extent=g.W,this.type=ce.type,this.properties=ce.tags,"id"in ce&&!isNaN(ce.id)&&(this.id=parseInt(ce.id,10))}loadGeometry(){if(this._feature.type===1){const ce=[];for(const we of this._feature.geometry)ce.push([new g.P(we[0],we[1])]);return ce}{const ce=[];for(const we of this._feature.geometry){const Ne=[];for(const Le of we)Ne.push(new g.P(Le[0],Le[1]));ce.push(Ne)}return ce}}toGeoJSON(ce,we,Ne){return Q.call(this,ce,we,Ne)}}(this._features[ye])}}(ae.features);let de=Pe(me);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:me,rawData:de.buffer}})}loadData(j){return g._(this,void 0,void 0,function*(){var V;(V=this._pendingRequest)===null||V===void 0||V.abort();const W=!!(j&&j.request&&j.request.collectResourceTiming)&&new g.bs(j.request);this._pendingRequest=new AbortController;try{let ae=yield this.loadGeoJSON(j,this._pendingRequest);if(delete this._pendingRequest,typeof ae!="object")throw new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`);if(Z(ae,!0),j.filter){const de=g.by(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));ae={type:"FeatureCollection",features:ae.features.filter(ce=>de.value.evaluate({zoom:0},ce))}}this._geoJSONIndex=j.cluster?new Dt(function({superclusterOptions:de,clusterProperties:ye}){if(!ye||!de)return de;const ce={},we={},Ne={accumulated:null,zoom:0},Le={properties:null},Ae=Object.keys(ye);for(const vt of Ae){const[xt,kt]=ye[vt],Et=g.by(kt),Ut=g.by(typeof xt=="string"?[xt,["accumulated"],["get",vt]]:xt);ce[vt]=Et.value,we[vt]=Ut.value}return de.map=vt=>{Le.properties=vt;const xt={};for(const kt of Ae)xt[kt]=ce[kt].evaluate(Ne,Le);return xt},de.reduce=(vt,xt)=>{Le.properties=xt;for(const kt of Ae)Ne.accumulated=vt[kt],vt[kt]=we[kt].evaluate(Ne,Le)},de}(j)).load(ae.features):function(de,ye){return new It(de,ye)}(ae,j.geojsonVtOptions),this.loaded={};const me={};if(W){const de=W.finish();de&&(me.resourceTiming={},me.resourceTiming[j.source]=JSON.parse(JSON.stringify(de)))}return me}catch(ae){if(delete this._pendingRequest,g.bz(ae))return{abandoned:!0};throw ae}})}reloadTile(j){const V=this.loaded;return V&&V[j.uid]?super.reloadTile(j):this.loadTile(j)}loadGeoJSON(j,V){return g._(this,void 0,void 0,function*(){const{promoteId:W}=j;if(j.request){const ae=yield g.h(j.request,V);return this._dataUpdateable=Ct(ae.data,W)?Fr(ae.data,W):void 0,ae.data}if(typeof j.data=="string")try{const ae=JSON.parse(j.data);return this._dataUpdateable=Ct(ae,W)?Fr(ae,W):void 0,ae}catch{throw new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`)}if(!j.dataDiff)throw new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${j.source}`);return function(ae,me,de){var ye,ce,we,Ne;if(me.removeAll&&ae.clear(),me.remove)for(const Le of me.remove)ae.delete(Le);if(me.add)for(const Le of me.add){const Ae=lr(Le,de);Ae!=null&&ae.set(Ae,Le)}if(me.update)for(const Le of me.update){let Ae=ae.get(Le.id);if(Ae==null)continue;const vt=!Le.removeAllProperties&&(((ye=Le.removeProperties)===null||ye===void 0?void 0:ye.length)>0||((ce=Le.addOrUpdateProperties)===null||ce===void 0?void 0:ce.length)>0);if((Le.newGeometry||Le.removeAllProperties||vt)&&(Ae=Object.assign({},Ae),ae.set(Le.id,Ae),vt&&(Ae.properties=Object.assign({},Ae.properties))),Le.newGeometry&&(Ae.geometry=Le.newGeometry),Le.removeAllProperties)Ae.properties={};else if(((we=Le.removeProperties)===null||we===void 0?void 0:we.length)>0)for(const xt of Le.removeProperties)Object.prototype.hasOwnProperty.call(Ae.properties,xt)&&delete Ae.properties[xt];if(((Ne=Le.addOrUpdateProperties)===null||Ne===void 0?void 0:Ne.length)>0)for(const{key:xt,value:kt}of Le.addOrUpdateProperties)Ae.properties[xt]=kt}}(this._dataUpdateable,j.dataDiff,W),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(j){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(j){return this._geoJSONIndex.getClusterExpansionZoom(j.clusterId)}getClusterChildren(j){return this._geoJSONIndex.getChildren(j.clusterId)}getClusterLeaves(j){return this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset)}}class In{constructor(j){this.self=j,this.actor=new g.C(j),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(V,W)=>{if(this.externalWorkerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.externalWorkerSourceTypes[V]=W},this.self.addProtocol=g.bf,this.self.removeProtocol=g.bg,this.self.registerRTLTextPlugin=V=>{if(g.bA.isParsed())throw new Error("RTL text plugin already registered.");g.bA.setMethods(V)},this.actor.registerMessageHandler("LDT",(V,W)=>this._getDEMWorkerSource(V,W.source).loadTile(W)),this.actor.registerMessageHandler("RDT",(V,W)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource(V,W.source).removeTile(W)})),this.actor.registerMessageHandler("GCEZ",(V,W)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(V,W.type,W.source).getClusterExpansionZoom(W)})),this.actor.registerMessageHandler("GCC",(V,W)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(V,W.type,W.source).getClusterChildren(W)})),this.actor.registerMessageHandler("GCL",(V,W)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(V,W.type,W.source).getClusterLeaves(W)})),this.actor.registerMessageHandler("LD",(V,W)=>this._getWorkerSource(V,W.type,W.source).loadData(W)),this.actor.registerMessageHandler("LT",(V,W)=>this._getWorkerSource(V,W.type,W.source).loadTile(W)),this.actor.registerMessageHandler("RT",(V,W)=>this._getWorkerSource(V,W.type,W.source).reloadTile(W)),this.actor.registerMessageHandler("AT",(V,W)=>this._getWorkerSource(V,W.type,W.source).abortTile(W)),this.actor.registerMessageHandler("RMT",(V,W)=>this._getWorkerSource(V,W.type,W.source).removeTile(W)),this.actor.registerMessageHandler("RS",(V,W)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[V]||!this.workerSources[V][W.type]||!this.workerSources[V][W.type][W.source])return;const ae=this.workerSources[V][W.type][W.source];delete this.workerSources[V][W.type][W.source],ae.removeSource!==void 0&&ae.removeSource(W)})),this.actor.registerMessageHandler("RM",V=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[V],delete this.availableImages[V],delete this.workerSources[V],delete this.demWorkerSources[V]})),this.actor.registerMessageHandler("SR",(V,W)=>g._(this,void 0,void 0,function*(){this.referrer=W})),this.actor.registerMessageHandler("SRPS",(V,W)=>this._syncRTLPluginState(V,W)),this.actor.registerMessageHandler("IS",(V,W)=>g._(this,void 0,void 0,function*(){this.self.importScripts(W)})),this.actor.registerMessageHandler("SI",(V,W)=>this._setImages(V,W)),this.actor.registerMessageHandler("UL",(V,W)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(V).update(W.layers,W.removedIds)})),this.actor.registerMessageHandler("SL",(V,W)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(V).replace(W)}))}_setImages(j,V){return g._(this,void 0,void 0,function*(){this.availableImages[j]=V;for(const W in this.workerSources[j]){const ae=this.workerSources[j][W];for(const me in ae)ae[me].availableImages=V}})}_syncRTLPluginState(j,V){return g._(this,void 0,void 0,function*(){if(g.bA.isParsed())return g.bA.getState();if(V.pluginStatus!=="loading")return g.bA.setState(V),V;const W=V.pluginURL;if(this.self.importScripts(W),g.bA.isParsed()){const ae={pluginStatus:"loaded",pluginURL:W};return g.bA.setState(ae),ae}throw g.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${W}`)})}_getAvailableImages(j){let V=this.availableImages[j];return V||(V=[]),V}_getLayerIndex(j){let V=this.layerIndexes[j];return V||(V=this.layerIndexes[j]=new h),V}_getWorkerSource(j,V,W){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][V]||(this.workerSources[j][V]={}),!this.workerSources[j][V][W]){const ae={sendAsync:(me,de)=>(me.targetMapId=j,this.actor.sendAsync(me,de))};switch(V){case"vector":this.workerSources[j][V][W]=new z(ae,this._getLayerIndex(j),this._getAvailableImages(j));break;case"geojson":this.workerSources[j][V][W]=new vi(ae,this._getLayerIndex(j),this._getAvailableImages(j));break;default:this.workerSources[j][V][W]=new this.externalWorkerSourceTypes[V](ae,this._getLayerIndex(j),this._getAvailableImages(j))}}return this.workerSources[j][V][W]}_getDEMWorkerSource(j,V){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][V]||(this.demWorkerSources[j][V]=new M),this.demWorkerSources[j][V]}}return g.i(self)&&(self.worker=new In(self)),In}),c("index",["exports","./shared"],function(g,h){var C="4.2.0";let T,k;const z={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((r,l)=>{const d=requestAnimationFrame(r);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),l(h.c())})}),getImageData(y,r=0){return this.getImageCanvasContext(y).getImageData(-r,-r,y.width+2*r,y.height+2*r)},getImageCanvasContext(y){const r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=y.width,r.height=y.height,l.drawImage(y,0,0,y.width,y.height),l},resolveURL:y=>(T||(T=document.createElement("a")),T.href=y,T.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class M{static testProp(r){if(!M.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in M.docStyle)return r[l];return r[0]}static create(r,l,d){const p=window.document.createElement(r);return l!==void 0&&(p.className=l),d&&d.appendChild(p),p}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){M.docStyle&&M.selectProp&&(M.userSelect=M.docStyle[M.selectProp],M.docStyle[M.selectProp]="none")}static enableDrag(){M.docStyle&&M.selectProp&&(M.docStyle[M.selectProp]=M.userSelect)}static setTransform(r,l){r.style[M.transformProp]=l}static addEventListener(r,l,d,p={}){r.addEventListener(l,d,"passive"in p?p:p.capture)}static removeEventListener(r,l,d,p={}){r.removeEventListener(l,d,"passive"in p?p:p.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",M.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",M.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",M.suppressClickInternal,!0)},0)}static getScale(r){const l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){const p=l.boundingClientRect;return new h.P((d.clientX-p.left)/l.x-r.clientLeft,(d.clientY-p.top)/l.y-r.clientTop)}static mousePos(r,l){const d=M.getScale(r);return M.getPoint(r,d,l)}static touchPos(r,l){const d=[],p=M.getScale(r);for(let x=0;x<l.length;x++)d.push(M.getPoint(r,p,l[x]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}M.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,M.selectProp=M.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),M.transformProp=M.testProp(["transform","WebkitTransform"]);const Y={supported:!1,testSupport:function(y){!Q&&Z&&(U?D(y):K=y)}};let K,Z,Q=!1,U=!1;function D(y){const r=y.createTexture();y.bindTexture(y.TEXTURE_2D,r);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,Z),y.isContextLost())return;Y.supported=!0}catch{}y.deleteTexture(r),Q=!0}var H;typeof document<"u"&&(Z=document.createElement("img"),Z.onload=()=>{K&&D(K),K=null,U=!0},Z.onerror=()=>{Q=!0,K=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let r,l,d,p;y.resetRequestQueue=()=>{r=[],l=0,d=0,p={}},y.addThrottleControl=I=>{const A=d++;return p[A]=I,A},y.removeThrottleControl=I=>{delete p[I],w()},y.getImage=(I,A,F=!0)=>new Promise((B,q)=>{Y.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),h.e(I,{type:"image"}),r.push({abortController:A,requestParameters:I,supportImageRefresh:F,state:"queued",onError:ee=>{q(ee)},onSuccess:ee=>{B(ee)}}),w()});const x=I=>h._(this,void 0,void 0,function*(){I.state="running";const{requestParameters:A,supportImageRefresh:F,onError:B,onSuccess:q,abortController:ee}=I,te=F===!1&&!h.i(self)&&!h.g(A.url)&&(!A.headers||Object.keys(A.headers).reduce((pe,Ce)=>pe&&Ce==="accept",!0));l++;const oe=te?E(A,ee):h.m(A,ee);try{const pe=yield oe;delete I.abortController,I.state="completed",pe.data instanceof HTMLImageElement||h.b(pe.data)?q(pe):pe.data&&q({data:yield(J=pe.data,typeof createImageBitmap=="function"?h.d(J):h.f(J)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete I.abortController,B(pe)}finally{l--,w()}var J}),w=()=>{const I=(()=>{for(const A of Object.keys(p))if(p[A]())return!0;return!1})()?h.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:h.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let A=l;A<I&&r.length>0;A++){const F=r.shift();F.abortController.signal.aborted?A--:x(F)}},E=(I,A)=>new Promise((F,B)=>{const q=new Image,ee=I.url,te=I.credentials;te&&te==="include"?q.crossOrigin="use-credentials":(te&&te==="same-origin"||!h.s(ee))&&(q.crossOrigin="anonymous"),A.signal.addEventListener("abort",()=>{q.src="",B(h.c())}),q.fetchPriority="high",q.onload=()=>{q.onerror=q.onload=null,F({data:q})},q.onerror=()=>{q.onerror=q.onload=null,A.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},q.src=ee})}(H||(H={})),H.resetRequestQueue();class ne{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}normalizeSpriteURL(r,l,d){const p=function(x){const w=x.match(he);if(!w)throw new Error(`Unable to parse URL "${x}"`);return{protocol:w[1],authority:w[2],path:w[3]||"/",params:w[4]?w[4].split("&"):[]}}(r);return p.path+=`${l}${d}`,function(x){const w=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${w}`}(p)}setTransformRequest(r){this._transformRequestFn=r}}const he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ge(y){var r=new h.A(3);return r[0]=y[0],r[1]=y[1],r[2]=y[2],r}var ue,Me=function(y,r,l){return y[0]=r[0]-l[0],y[1]=r[1]-l[1],y[2]=r[2]-l[2],y};ue=new h.A(3),h.A!=Float32Array&&(ue[0]=0,ue[1]=0,ue[2]=0);var Be=function(y){var r=y[0],l=y[1];return r*r+l*l};function Re(y){const r=[];if(typeof y=="string")r.push({id:"default",url:y});else if(y&&y.length>0){const l=[];for(const{id:d,url:p}of y){const x=`${d}${p}`;l.indexOf(x)===-1&&(l.push(x),r.push({id:d,url:p}))}}return r}(function(){var y=new h.A(2);h.A!=Float32Array&&(y[0]=0,y[1]=0)})();class He{constructor(r,l,d,p){this.context=r,this.format=d,this.texture=r.gl.createTexture(),this.update(l,p)}update(r,l,d){const{width:p,height:x}=r,w=!(this.size&&this.size[0]===p&&this.size[1]===x||d),{context:E}=this,{gl:I}=E;if(this.useMipmap=!!(l&&l.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!l||l.premultiply!==!1)),w)this.size=[p,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||h.b(r)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,r):I.texImage2D(I.TEXTURE_2D,0,this.format,p,x,0,this.format,I.UNSIGNED_BYTE,r.data);else{const{x:A,y:F}=d||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||h.b(r)?I.texSubImage2D(I.TEXTURE_2D,0,A,F,I.RGBA,I.UNSIGNED_BYTE,r):I.texSubImage2D(I.TEXTURE_2D,0,A,F,p,x,I.RGBA,I.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(r,l,d){const{context:p}=this,{gl:x}=p;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||r),this.filter=r),l!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,l),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function rt(y){const{userImage:r}=y;return!!(r&&r.render&&r.render())&&(y.data.replace(new Uint8Array(r.data.buffer)),!0)}class Ze extends h.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new h.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){const l=this.images[r];if(l&&!l.data&&l.spriteData){const d=l.spriteData;l.data=new h.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0;const p=l.data||l.spriteData;return this._validateStretch(l.stretchX,p&&p.width)||(this.fire(new h.j(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,p&&p.height)||(this.fire(new h.j(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new h.j(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(const p of r){if(p[0]<d||p[1]<p[0]||l<p[1])return!1;d=p[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;const d=l.spriteData,p=d&&d.width||l.data.width,x=d&&d.height||l.data.height;return!(r[0]<0||p<r[0]||r[1]<0||x<r[1]||r[2]<0||p<r[2]||r[3]<0||x<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){const p=this.getImage(r);if(d&&(p.data.width!==l.data.width||p.data.height!==l.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=p.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){const l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let p=!0;if(!this.isLoaded())for(const x of r)this.images[x]||(p=!1);this.isLoaded()||p?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){const l={};for(const d of r){let p=this.getImage(d);p||(this.fire(new h.k("styleimagemissing",{id:d})),p=this.getImage(d)),p?l[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:h.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){const l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},x=new h.I(p,d);this.patterns[r]={bin:p,position:x}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new He(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const x in this.patterns)r.push(this.patterns[x].bin);const{w:l,h:d}=h.p(r),p=this.atlasImage;p.resize({width:l||1,height:d||1});for(const x in this.patterns){const{bin:w}=this.patterns[x],E=w.x+1,I=w.y+1,A=this.getImage(x).data,F=A.width,B=A.height;h.R.copy(A,p,{x:0,y:0},{x:E,y:I},{width:F,height:B}),h.R.copy(A,p,{x:0,y:B-1},{x:E,y:I-1},{width:F,height:1}),h.R.copy(A,p,{x:0,y:0},{x:E,y:I+B},{width:F,height:1}),h.R.copy(A,p,{x:F-1,y:0},{x:E-1,y:I},{width:1,height:B}),h.R.copy(A,p,{x:0,y:0},{x:E+F,y:I},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const d=this.getImage(l);d||h.w(`Image with ID: "${l}" was not found`),rt(d)&&this.updateImage(l,d)}}}const qe=1e20;function ut(y,r,l,d,p,x,w,E,I){for(let A=r;A<r+d;A++)Oe(y,l*x+A,x,p,w,E,I);for(let A=l;A<l+p;A++)Oe(y,A*x+r,1,d,w,E,I)}function Oe(y,r,l,d,p,x,w){x[0]=0,w[0]=-qe,w[1]=qe,p[0]=y[r];for(let E=1,I=0,A=0;E<d;E++){p[E]=y[r+E*l];const F=E*E;do{const B=x[I];A=(p[E]-p[B]+F-B*B)/(E-B)/2}while(A<=w[I]&&--I>-1);I++,x[I]=E,w[I]=A,w[I+1]=qe}for(let E=0,I=0;E<d;E++){for(;w[I+1]<E;)I++;const A=x[I],F=E-A;y[r+E*l]=p[A]+F*F}}class Pe{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return h._(this,void 0,void 0,function*(){const l=[];for(const x in r)for(const w of r[x])l.push(this._getAndCacheGlyphsPromise(x,w));const d=yield Promise.all(l),p={};for(const{stack:x,id:w,glyph:E}of d)p[x]||(p[x]={}),p[x][w]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return p})}_getAndCacheGlyphsPromise(r,l){return h._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[l];if(p!==void 0)return{stack:r,id:l,glyph:p};if(p=this._tinySDF(d,r,l),p)return d.glyphs[l]=p,{stack:r,id:l,glyph:p};const x=Math.floor(l/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[x])return{stack:r,id:l,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[x]){const E=Pe.loadGlyphRange(r,x,this.url,this.requestManager);d.requests[x]=E}const w=yield d.requests[x];for(const E in w)this._doesCharSupportLocalGlyph(+E)||(d.glyphs[+E]=w[+E]);return d.ranges[x]=!0,{stack:r,id:l,glyph:w[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(h.u["CJK Unified Ideographs"](r)||h.u["Hangul Syllables"](r)||h.u.Hiragana(r)||h.u.Katakana(r))}_tinySDF(r,l,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let x=r.tinySDF;if(!x){let E="400";/bold/i.test(l)?E="900":/medium/i.test(l)?E="500":/light/i.test(l)&&(E="200"),x=r.tinySDF=new Pe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:E})}const w=x.draw(String.fromCharCode(d));return{id:d,bitmap:new h.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}Pe.loadGlyphRange=function(y,r,l,d){return h._(this,void 0,void 0,function*(){const p=256*r,x=p+255,w=d.transformRequest(l.replace("{fontstack}",y).replace("{range}",`${p}-${x}`),"Glyphs"),E=yield h.l(w,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${r}, ${p}-${x}`);const I={};for(const A of h.n(E.data))I[A.id]=A;return I})},Pe.TinySDF=class{constructor({fontSize:y=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:x="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=d,this.radius=l;const E=this.size=y+4*r,I=this._createCanvas(E),A=this.ctx=I.getContext("2d",{willReadFrequently:!0});A.font=`${w} ${x} ${y}px ${p}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(y){const r=document.createElement("canvas");return r.width=r.height=y,r}draw(y){const{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:x}=this.ctx.measureText(y),w=Math.ceil(l),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-p))),I=Math.min(this.size-this.buffer,w+Math.ceil(d)),A=E+2*this.buffer,F=I+2*this.buffer,B=Math.max(A*F,0),q=new Uint8ClampedArray(B),ee={data:q,width:A,height:F,glyphWidth:E,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(E===0||I===0)return ee;const{ctx:te,buffer:oe,gridInner:J,gridOuter:pe}=this;te.clearRect(oe,oe,E,I),te.fillText(y,oe,oe+w);const Ce=te.getImageData(oe,oe,E,I);pe.fill(qe,0,B),J.fill(0,0,B);for(let se=0;se<I;se++)for(let ve=0;ve<E;ve++){const Ee=Ce.data[4*(se*E+ve)+3]/255;if(Ee===0)continue;const Te=(se+oe)*A+ve+oe;if(Ee===1)pe[Te]=0,J[Te]=qe;else{const ke=.5-Ee;pe[Te]=ke>0?ke*ke:0,J[Te]=ke<0?ke*ke:0}}ut(pe,0,0,A,F,A,this.f,this.v,this.z),ut(J,oe,oe,E,I,A,this.f,this.v,this.z);for(let se=0;se<B;se++){const ve=Math.sqrt(pe[se])-Math.sqrt(J[se]);q[se]=Math.round(255-255*(ve/this.radius+this.cutoff))}return ee}};class Se{constructor(){this.specification=h.v.light.position}possiblyEvaluate(r,l){return h.y(r.expression.evaluate(l))}interpolate(r,l,d){return{x:h.z.number(r.x,l.x,d),y:h.z.number(r.y,l.y,d),z:h.z.number(r.z,l.z,d)}}}let ze;class Ve extends h.E{constructor(r){super(),ze=ze||new h.q({anchor:new h.D(h.v.light.anchor),position:new Se,color:new h.D(h.v.light.color),intensity:new h.D(h.v.light.intensity)}),this._transitionable=new h.T(ze),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(h.r,r,l))for(const d in r){const p=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&h.t(this,r.call(h.x,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:h.v}))}}class We{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){const d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){const p=[];let x=r.length%2==1?-r[r.length-1]*d:0,w=r[0]*d,E=!0;p.push({left:x,right:w,isDash:E,zeroLength:r[0]===0});let I=r[0];for(let A=1;A<r.length;A++){E=!E;const F=r[A];x=I*d,I+=F,w=I*d,p.push({left:x,right:w,isDash:E,zeroLength:F===0})}return p}addRoundDash(r,l,d){const p=l/2;for(let x=-d;x<=d;x++){const w=this.width*(this.nextRow+d+x);let E=0,I=r[E];for(let A=0;A<this.width;A++){A/I.right>1&&(I=r[++E]);const F=Math.abs(A-I.left),B=Math.abs(A-I.right),q=Math.min(F,B);let ee;const te=x/d*(p+1);if(I.isDash){const oe=p-Math.abs(te);ee=Math.sqrt(q*q+oe*oe)}else ee=p-Math.sqrt(q*q+te*te);this.data[w+A]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(r){for(let E=r.length-1;E>=0;--E){const I=r[E],A=r[E+1];I.zeroLength?r.splice(E,1):A&&A.isDash===I.isDash&&(A.left=I.left,r.splice(E,1))}const l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);const p=this.width*this.nextRow;let x=0,w=r[x];for(let E=0;E<this.width;E++){E/w.right>1&&(w=r[++x]);const I=Math.abs(E-w.left),A=Math.abs(E-w.right),F=Math.min(I,A);this.data[p+E]=Math.max(0,Math.min(255,(w.isDash?F:-F)+128))}}addDash(r,l){const d=l?7:0,p=2*d+1;if(this.nextRow+p>this.height)return h.w("LineAtlas out of space"),null;let x=0;for(let E=0;E<r.length;E++)x+=r[E];if(x!==0){const E=this.width/x,I=this.getDashRanges(r,this.width,E);l?this.addRoundDash(I,E,d):this.addRegularDash(I)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:x};return this.nextRow+=p,this.dirty=!0,w}bind(r){const l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Xe="maplibre_preloaded_worker_pool";class wt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<wt.workerCount;)this.workers.push(new Worker(h.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Xe]}numActive(){return Object.keys(this.active).length}}const Dt=Math.floor(z.hardwareConcurrency/2);let Zt,Kt;function Ht(){return Zt||(Zt=new wt),Zt}wt.workerCount=h.B(globalThis)?Math.max(Math.min(Dt,3),1):1;class jn{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;const d=this.workerPool.acquire(l);for(let p=0;p<d.length;p++){const x=new h.C(d[p],l);x.name=`Worker ${p}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(const d of this.actors)d.registerMessageHandler(r,l)}}function zr(){return Kt||(Kt=new jn(Ht(),h.G),Kt.registerMessageHandler("GR",(y,r,l)=>h.m(r,l))),Kt}function Rr(y,r){const l=h.F();return h.H(l,l,[1,1,0]),h.J(l,l,[.5*y.width,.5*y.height,1]),h.K(l,l,y.calculatePosMatrix(r.toUnwrapped()))}function ar(y,r,l,d,p,x){const w=function(B,q,ee){if(B)for(const te of B){const oe=q[te];if(oe&&oe.source===ee&&oe.type==="fill-extrusion")return!0}else for(const te in q){const oe=q[te];if(oe.source===ee&&oe.type==="fill-extrusion")return!0}return!1}(p&&p.layers,r,y.id),E=x.maxPitchScaleFactor(),I=y.tilesIn(d,E,w);I.sort(sr);const A=[];for(const B of I)A.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(r,l,y._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,p,x,E,Rr(y.transform,B.tileID))});const F=function(B){const q={},ee={};for(const te of B){const oe=te.queryResults,J=te.wrappedTileID,pe=ee[J]=ee[J]||{};for(const Ce in oe){const se=oe[Ce],ve=pe[Ce]=pe[Ce]||{},Ee=q[Ce]=q[Ce]||[];for(const Te of se)ve[Te.featureIndex]||(ve[Te.featureIndex]=!0,Ee.push(Te))}}return q}(A);for(const B in F)F[B].forEach(q=>{const ee=q.feature,te=y.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=te});return F}function sr(y,r){const l=y.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function Jt(y,r,l){return h._(this,void 0,void 0,function*(){let d=y;if(y.url?d=(yield h.h(r.transformRequest(y.url,"Source"),l)).data:yield z.frameAsync(l),!d)return null;const p=h.L(h.e(d,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(x=>x.id)),p})}class rn{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof h.M?new h.M(r.lng,r.lat):h.M.convert(r),this}setSouthWest(r){return this._sw=r instanceof h.M?new h.M(r.lng,r.lat):h.M.convert(r),this}extend(r){const l=this._sw,d=this._ne;let p,x;if(r instanceof h.M)p=r,x=r;else{if(!(r instanceof rn))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(rn.convert(r)):this.extend(h.M.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(h.M.convert(r)):this;if(p=r._sw,x=r._ne,!p||!x)return this}return l||d?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),d.lng=Math.max(x.lng,d.lng),d.lat=Math.max(x.lat,d.lat)):(this._sw=new h.M(p.lng,p.lat),this._ne=new h.M(x.lng,x.lat)),this}getCenter(){return new h.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new h.M(this.getWest(),this.getNorth())}getSouthEast(){return new h.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:l,lat:d}=h.M.convert(r);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(r){return r instanceof rn?r:r&&new rn(r)}static fromLngLat(r,l=0){const d=360*l/40075017,p=d/Math.cos(Math.PI/180*r.lat);return new rn(new h.M(r.lng-p,r.lat-d),new h.M(r.lng+p,r.lat+d))}}class Xn{constructor(r,l,d){this.bounds=rn.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const l=Math.pow(2,r.z),d=Math.floor(h.N(this.bounds.getWest())*l),p=Math.floor(h.O(this.bounds.getNorth())*l),x=Math.ceil(h.N(this.bounds.getEast())*l),w=Math.ceil(h.O(this.bounds.getSouth())*l);return r.x>=d&&r.x<x&&r.y>=p&&r.y<w}}class Ie extends h.E{constructor(r,l,d,p){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,h.e(this,h.L(l,["url","scheme","tileSize","promoteId"])),this._options=h.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Jt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(h.e(this,r),r.bounds&&(this.tileBounds=new Xn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new h.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return h.e({},this._options)}loadTile(r){return h._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((x,w)=>{r.reloadPromise={resolve:x,reject:w}})}else r.actor=this.dispatcher.getActor(),p="LT";r.abortController=new AbortController;try{const x=yield r.actor.sendAsync({type:p,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,x)}catch(x){if(delete r.abortController,r.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){const d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return h._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return h._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class pr extends h.E{constructor(r,l,d,p){super(),this.id=r,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=h.e({type:"raster"},l),h.e(this,h.L(l,["url","scheme","tileSize"]))}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Jt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(h.e(this,r),r.bounds&&(this.tileBounds=new Xn(r.bounds,this.minzoom,this.maxzoom)),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new h.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return h.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return h._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const d=yield H.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,x=p.gl,w=d.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new He(p,w,x.RGBA,{useMipmap:!0}),r.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),p.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,p.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,p.extTextureFilterAnisotropicMax)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return h._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return h._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Gr extends pr{constructor(r,l,d,p){super(r,l,d,p),this.type="raster-dem",this.maxzoom=22,this._options=h.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return h._(this,void 0,void 0,function*(){const l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const p=yield H.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(p&&p.data){const x=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&r.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=h.b(x)&&h.S()?x:yield this.readImageNow(x),E={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const I=yield r.actor.sendAsync({type:"LDT",data:E});r.dem=I,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(p){if(delete r.abortController,r.aborted)r.state="unloaded";else if(p)throw r.state="errored",p}})}readImageNow(r){return h._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&h.U()){const l=r.width+2,d=r.height+2;try{return new h.R({width:l,height:d},yield h.V(r,-1,-1,l,d))}catch{}}return z.getImageData(r,1)})}_getNeighboringTiles(r){const l=r.canonical,d=Math.pow(2,l.z),p=(l.x-1+d)%d,x=l.x===0?r.wrap-1:r.wrap,w=(l.x+1+d)%d,E=l.x+1===d?r.wrap+1:r.wrap,I={};return I[new h.Q(r.overscaledZ,x,l.z,p,l.y).key]={backfilled:!1},I[new h.Q(r.overscaledZ,E,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(I[new h.Q(r.overscaledZ,x,l.z,p,l.y-1).key]={backfilled:!1},I[new h.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new h.Q(r.overscaledZ,E,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<d&&(I[new h.Q(r.overscaledZ,x,l.z,p,l.y+1).key]={backfilled:!1},I[new h.Q(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new h.Q(r.overscaledZ,E,l.z,w,l.y+1).key]={backfilled:!1}),I}unloadTile(r){return h._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Pt extends h.E{constructor(r,l,d,p){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=l.data,this._options=h.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=h.W/this.tileSize;this.workerOptions=h.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:h.W,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:h.W,radius:(l.clusterRadius||50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return h._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(r){return h._(this,void 0,void 0,function*(){const l=h.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(z.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new h.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new h.k("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&h.e(x,{resourceTiming:p}),this.fire(new h.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new h.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new h.k("dataabort",{dataType:"source"}));this.fire(new h.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(r){return h._(this,void 0,void 0,function*(){const l=r.actor?"RT":"LT";r.actor=this.actor;const d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const p=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(p,this.map.painter,l==="RT")})}abortTile(r){return h._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return h._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return h.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ot=h.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _n extends h.E{constructor(r,l,d,p){super(),this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=l}load(r){return h._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new h.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield H.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new h.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new h.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const l=r.map(h.Y.fromLngLat);this.tileID=function(p){let x=1/0,w=1/0,E=-1/0,I=-1/0;for(const q of p)x=Math.min(x,q.x),w=Math.min(w,q.y),E=Math.max(E,q.x),I=Math.max(I,q.y);const A=Math.max(E-x,I-w),F=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),B=Math.pow(2,F);return new h.a0(F,Math.floor((x+E)/2*B),Math.floor((w+I)/2*B))}(l),this.minzoom=this.maxzoom=this.tileID.z;const d=l.map(p=>this.tileID.getTilePoint(p)._round());return this._boundsArray=new h.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,h.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,h.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,h.W,h.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new h.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ot.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new He(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const x=this.tiles[p];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return h._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class xr extends _n{constructor(r,l,d,p){super(r,l,d,p),this.roundZoom=!0,this.type="video",this.options=l}load(){return h._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield h.a2(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new h.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new h.j(new h.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Ot.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new He(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const x=this.tiles[p];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Qi extends _n{constructor(r,l,d,p){super(r,l,d,p),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(w=>typeof w!="number"))||this.fire(new h.j(new h.a1(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new h.j(new h.a1(`sources.${r}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new h.j(new h.a1(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new h.j(new h.a1(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new h.j(new h.a1(`sources.${r}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return h._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new h.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,Ot.members)),this.boundsSegments||(this.boundsSegments=h.$.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new He(l,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const x in this.tiles){const w=this.tiles[x];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new h.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const zi={},Lr=y=>{switch(y){case"geojson":return Pt;case"image":return _n;case"raster":return pr;case"raster-dem":return Gr;case"vector":return Ie;case"video":return xr;case"canvas":return Qi}return zi[y]},xn="RTLPluginLoaded";class Yn extends h.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=zr()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return h._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return h._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new h.k(xn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Qe=null;function br(){return Qe||(Qe=new Yn),Qe}class wr{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=h.a3(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(p,x){const w={};if(!x)return w;for(const E of p){const I=E.layerIds.map(A=>x.getLayer(A)).filter(Boolean);if(I.length!==0){E.layers=I,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(A=>I.filter(F=>F.id===A)[0]));for(const A of I)w[A.id]=E}}return w}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const x=this.buckets[p];if(x instanceof h.a5){if(this.hasSymbolBuckets=!0,!d)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const x=this.buckets[p];if(x instanceof h.a5&&x.hasRTLText){this.hasRTLText=!0,br().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const x=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(x))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new h.a4}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(r)}const l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new He(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new He(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,p,x,w,E,I,A,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:x,scale:w,tileSize:this.tileSize,pixelPosMatrix:F,transform:I,params:E,queryPadding:this.queryPadding*A},r,l,d):{}}querySourceFeatures(r,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),x=l&&l.sourceLayer?l.sourceLayer:"",w=p._geojsonTileLayer||p[x];if(!w)return;const E=h.a6(l&&l.filter),{z:I,x:A,y:F}=this.tileID.canonical,B={z:I,x:A,y:F};for(let q=0;q<w.length;q++){const ee=w.feature(q);if(E.needGeometry){const J=h.a7(ee,!0);if(!E.filter(new h.a8(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!E.filter(new h.a8(this.tileID.overscaledZ),ee))continue;const te=d.getId(ee,x),oe=new h.a9(ee,I,A,F,te);oe.tile=B,r.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const l=this.expirationTime;if(r.cacheControl){const d=h.aa(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const x=this.expirationTime-l;x?this.expirationTime=d+Math.max(x,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!l.style.hasLayer(p))continue;const x=this.buckets[p],w=x.layers[0].sourceLayer||"_geojsonTileLayer",E=d[w],I=r[w];if(!E||!I||Object.keys(I).length===0)continue;x.update(I,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const A=l&&l.style&&l.style.getLayer(p);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=z.now()+r}setDependencies(r,l){const d={};for(const p of l)d[p]=!0;this.dependencies[r]=d}hasDependency(r,l){for(const d of r){const p=this.dependencies[d];if(p){for(const x of l)if(p[x])return!0}}return!1}}class Vo{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(const r in this.data)for(const l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){const p=r.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const x={value:l,timeout:void 0};if(d!==void 0&&(x.timeout=setTimeout(()=>{this.remove(r,x)},d)),this.data[p].push(x),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){const l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;const d=r.wrapped().key,p=l===void 0?0:this.data[d].indexOf(l),x=this.data[d][p];return this.data[d].splice(p,1),x.timeout&&clearTimeout(x.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(x.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){const l=[];for(const d in this.data)for(const p of this.data[d])r(p.value)||l.push(p);for(const d of l)this.remove(d.value.tileID,d)}}class _o{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){const p=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][p]=this.stateChanges[r][p]||{},h.e(this.stateChanges[r][p],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(const x in this.state[r])x!==p&&(this.deletedStates[r][x]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][p]===null){this.deletedStates[r][p]={};for(const x in this.state[r][p])d[x]||(this.deletedStates[r][p][x]=null)}else for(const x in d)this.deletedStates[r]&&this.deletedStates[r][p]&&this.deletedStates[r][p][x]===null&&delete this.deletedStates[r][p][x]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;const p=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][p]!==null&&(this.deletedStates[r][p]=this.deletedStates[r][p]||{},this.deletedStates[r][p][d]=null);else if(l!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][p])for(d in this.deletedStates[r][p]={},this.stateChanges[r][p])this.deletedStates[r][p][d]=null;else this.deletedStates[r][p]=null;else this.deletedStates[r]=null}getState(r,l){const d=String(l),p=h.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const x=this.deletedStates[r][l];if(x===null)return{};for(const w in x)delete p[w]}return p}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const x={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),h.e(this.state[p][w],this.stateChanges[p][w]),x[w]=this.state[p][w];d[p]=x}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const x={};if(this.deletedStates[p]===null)for(const w in this.state[p])x[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const E of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][E];x[w]=this.state[p][w]}d[p]=d[p]||{},h.e(d[p],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in r)r[p].setFeatureState(d,l)}}class Je extends h.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,x,w,E)=>{const I=new(Lr(x.type))(p,x,w,E);if(I.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${I.id}`);return I})(r,l,d,this),this._tiles={},this._cache=new Vo(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _o,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return h._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(p){r.state="errored",p.status!==404?this._source.fire(new h.j(p,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new h.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Bt).map(r=>r.key)}getRenderableIds(r){const l=[];for(const d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,p)=>{const x=d.tileID,w=p.tileID,E=new h.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),I=new h.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-w.overscaledZ||I.y-E.y||I.x-E.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(Bt).map(d=>d.key)}hasRenderableParent(r){const l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return h._(this,void 0,void 0,function*(){const d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=z.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new h.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const x=l[p];if(r.neighboringTiles&&r.neighboringTiles[x]){const w=this.getTileByID(x);d(r,w),d(w,r)}}function d(p,x){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=x.tileID.canonical.x-p.tileID.canonical.x;const E=x.tileID.canonical.y-p.tileID.canonical.y,I=Math.pow(2,p.tileID.canonical.z),A=x.tileID.key;w===0&&E===0||Math.abs(E)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),x.dem&&p.dem&&(p.dem.backfillBorder(x.dem,w,E),p.neighboringTiles&&p.neighboringTiles[A]&&(p.neighboringTiles[A].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,p){for(const x in this._tiles){let w=this._tiles[x];if(p[x]||!w.hasData()||w.tileID.overscaledZ<=l||w.tileID.overscaledZ>d)continue;let E=w.tileID;for(;w&&w.tileID.overscaledZ>l+1;){const A=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[A.key],w&&w.hasData()&&(E=A)}let I=E;for(;I.overscaledZ>l;)if(I=I.scaledTo(I.overscaledZ-1),r[I.key]){p[E.key]=E;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){const d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){const p=r.scaledTo(d),x=this._getLoadedTile(p);if(x)return x}}_getLoadedTile(r){const l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,p=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?h.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(x)}handleWrapJump(r){const l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){const d={};for(const p in this._tiles){const x=this._tiles[p];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+l),d[x.tileID.key]=x}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new h.Q(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(d=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(d=d.filter(F=>this._source.hasTile(F)))):d=[];const p=r.coveringZoomLevel(this._source),x=Math.max(p-Je.maxOverzooming,this._source.minzoom),w=Math.max(p+Je.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const B of d)if(B.canonical.z>this._source.minzoom){const q=B.scaledTo(B.canonical.z-1);F[q.key]=q;const ee=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));F[ee.key]=ee}d=d.concat(Object.values(F))}const E=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new h.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(d,p);if(It(this._source.type)){const F={},B={},q=Object.keys(I),ee=z.now();for(const te of q){const oe=I[te],J=this._tiles[te];if(!J||J.fadeEndTime!==0&&J.fadeEndTime<=ee)continue;const pe=this.findLoadedParent(oe,x);pe&&(this._addTile(pe.tileID),F[pe.tileID.key]=pe.tileID),B[te]=oe}this._retainLoadedChildren(B,p,w,I);for(const te in F)I[te]||(this._coveredTiles[te]=!0,I[te]=F[te]);if(l){const te={},oe={};for(const J of d)this._tiles[J.key].hasData()?te[J.key]=J:oe[J.key]=J;for(const J in oe){const pe=oe[J].children(this._source.maxzoom);this._tiles[pe[0].key]&&this._tiles[pe[1].key]&&this._tiles[pe[2].key]&&this._tiles[pe[3].key]&&(te[pe[0].key]=I[pe[0].key]=pe[0],te[pe[1].key]=I[pe[1].key]=pe[1],te[pe[2].key]=I[pe[2].key]=pe[2],te[pe[3].key]=I[pe[3].key]=pe[3],delete oe[J])}for(const J in oe){const pe=this.findLoadedParent(oe[J],this._source.minzoom);if(pe){te[pe.tileID.key]=I[pe.tileID.key]=pe.tileID;for(const Ce in te)te[Ce].isChildOf(pe.tileID)&&delete te[Ce]}}for(const J in this._tiles)te[J]||(this._coveredTiles[J]=!0)}}for(const F in I)this._tiles[F].clearFadeHold();const A=h.ab(this._tiles,I);for(const F of A){const B=this._tiles[F];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;const p={},x={},w=Math.max(l-Je.maxOverzooming,this._source.minzoom),E=Math.max(l+Je.maxUnderzooming,this._source.minzoom),I={};for(const A of r){const F=this._addTile(A);p[A.key]=A,F.hasData()||l<this._source.maxzoom&&(I[A.key]=A)}this._retainLoadedChildren(I,l,E,p);for(const A of r){let F=this._tiles[A.key];if(F.hasData())continue;if(l+1>this._source.maxzoom){const q=A.children(this._source.maxzoom)[0],ee=this.getTile(q);if(ee&&ee.hasData()){p[q.key]=q;continue}}else{const q=A.children(this._source.maxzoom);if(p[q[0].key]&&p[q[1].key]&&p[q[2].key]&&p[q[3].key])continue}let B=F.wasRequested();for(let q=A.overscaledZ-1;q>=w;--q){const ee=A.scaledTo(q);if(x[ee.key])break;if(x[ee.key]=!0,F=this.getTile(ee),!F&&B&&(F=this._addTile(ee)),F){const te=F.hasData();if((te||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||B)&&(p[ee.key]=ee),B=F.wasRequested(),te)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const l=[];let d,p=this._tiles[r].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}l.push(p.key);const x=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(x),d)break;p=x}for(const x of l)this._loadedParentTiles[x]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));const d=l;return l||(l=new wr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new h.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}_removeTile(r){const l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){const l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){const p=[],x=this.transform;if(!x)return p;const w=d?x.getCameraQueryGeometry(r):r,E=r.map(te=>x.pointCoordinate(te,this.terrain)),I=w.map(te=>x.pointCoordinate(te,this.terrain)),A=this.getIds();let F=1/0,B=1/0,q=-1/0,ee=-1/0;for(const te of I)F=Math.min(F,te.x),B=Math.min(B,te.y),q=Math.max(q,te.x),ee=Math.max(ee,te.y);for(let te=0;te<A.length;te++){const oe=this._tiles[A[te]];if(oe.holdingForFade())continue;const J=oe.tileID,pe=Math.pow(2,x.zoom-oe.tileID.overscaledZ),Ce=l*oe.queryPadding*h.W/oe.tileSize/pe,se=[J.getTilePoint(new h.Y(F,B)),J.getTilePoint(new h.Y(q,ee))];if(se[0].x-Ce<h.W&&se[0].y-Ce<h.W&&se[1].x+Ce>=0&&se[1].y+Ce>=0){const ve=E.map(Te=>J.getTilePoint(Te)),Ee=I.map(Te=>J.getTilePoint(Te));p.push({tile:oe,tileID:J,queryGeometry:ve,cameraQueryGeometry:Ee,scale:pe})}}return p}getVisibleCoordinates(r){const l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);for(const d of l)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(It(this._source.type)){const r=z.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){const p=this._tiles[r];p&&p.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(const d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function Bt(y,r){const l=Math.abs(2*y.wrap)-+(y.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return y.overscaledZ-r.overscaledZ||d-l||r.canonical.y-y.canonical.y||r.canonical.x-y.canonical.x}function It(y){return y==="raster"||y==="image"||y==="video"}Je.maxOverzooming=10,Je.maxUnderzooming=3;class mr{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=h.ac(r,0,1);let l=1,d=this._distances[l];const p=r*this.paddedLength+this.padding;for(;d<p&&l<this._distances.length;)d=this._distances[++l];const x=l-1,w=this._distances[x],E=d-w,I=E>0?(p-w)/E:0;return this.points[x].mult(1-I).add(this.points[l].mult(I))}}function lr(y,r){let l=!0;return y==="always"||y!=="never"&&r!=="never"||(l=!1),l}class Ct{constructor(r,l,d){const p=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,p,x){this._forEachCell(l,d,p,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(x)}insertCircle(r,l,d,p){this._forEachCell(l-p,d-p,l+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(p)}_insertBoxCell(r,l,d,p,x,w){this.boxCells[x].push(w)}_insertCircleCell(r,l,d,p,x,w){this.circleCells[x].push(w)}_query(r,l,d,p,x,w,E){if(d<0||r>this.width||p<0||l>this.height)return[];const I=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=p){if(x)return[{key:null,x1:r,y1:l,x2:d,y2:p}];for(let A=0;A<this.boxKeys.length;A++)I.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){const F=this.circles[3*A],B=this.circles[3*A+1],q=this.circles[3*A+2];I.push({key:this.circleKeys[A],x1:F-q,y1:B-q,x2:F+q,y2:B+q})}}else this._forEachCell(r,l,d,p,this._queryCell,I,{hitTest:x,overlapMode:w,seenUids:{box:{},circle:{}}},E);return I}query(r,l,d,p){return this._query(r,l,d,p,!1,null)}hitTest(r,l,d,p,x,w){return this._query(r,l,d,p,!0,x,w).length>0}hitTestCircle(r,l,d,p,x){const w=r-d,E=r+d,I=l-d,A=l+d;if(E<0||w>this.width||A<0||I>this.height)return!1;const F=[];return this._forEachCell(w,I,E,A,this._queryCellCircle,F,{hitTest:!0,overlapMode:p,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},x),F.length>0}_queryCell(r,l,d,p,x,w,E,I){const{seenUids:A,hitTest:F,overlapMode:B}=E,q=this.boxCells[x];if(q!==null){const te=this.bboxes;for(const oe of q)if(!A.box[oe]){A.box[oe]=!0;const J=4*oe,pe=this.boxKeys[oe];if(r<=te[J+2]&&l<=te[J+3]&&d>=te[J+0]&&p>=te[J+1]&&(!I||I(pe))&&(!F||!lr(B,pe.overlapMode))&&(w.push({key:pe,x1:te[J],y1:te[J+1],x2:te[J+2],y2:te[J+3]}),F))return!0}}const ee=this.circleCells[x];if(ee!==null){const te=this.circles;for(const oe of ee)if(!A.circle[oe]){A.circle[oe]=!0;const J=3*oe,pe=this.circleKeys[oe];if(this._circleAndRectCollide(te[J],te[J+1],te[J+2],r,l,d,p)&&(!I||I(pe))&&(!F||!lr(B,pe.overlapMode))){const Ce=te[J],se=te[J+1],ve=te[J+2];if(w.push({key:pe,x1:Ce-ve,y1:se-ve,x2:Ce+ve,y2:se+ve}),F)return!0}}}return!1}_queryCellCircle(r,l,d,p,x,w,E,I){const{circle:A,seenUids:F,overlapMode:B}=E,q=this.boxCells[x];if(q!==null){const te=this.bboxes;for(const oe of q)if(!F.box[oe]){F.box[oe]=!0;const J=4*oe,pe=this.boxKeys[oe];if(this._circleAndRectCollide(A.x,A.y,A.radius,te[J+0],te[J+1],te[J+2],te[J+3])&&(!I||I(pe))&&!lr(B,pe.overlapMode))return w.push(!0),!0}}const ee=this.circleCells[x];if(ee!==null){const te=this.circles;for(const oe of ee)if(!F.circle[oe]){F.circle[oe]=!0;const J=3*oe,pe=this.circleKeys[oe];if(this._circlesCollide(te[J],te[J+1],te[J+2],A.x,A.y,A.radius)&&(!I||I(pe))&&!lr(B,pe.overlapMode))return w.push(!0),!0}}}_forEachCell(r,l,d,p,x,w,E,I){const A=this._convertToXCellCoord(r),F=this._convertToYCellCoord(l),B=this._convertToXCellCoord(d),q=this._convertToYCellCoord(p);for(let ee=A;ee<=B;ee++)for(let te=F;te<=q;te++)if(x.call(this,r,l,d,p,this.xCellCount*te+ee,w,E,I))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,p,x,w){const E=p-r,I=x-l,A=d+w;return A*A>E*E+I*I}_circleAndRectCollide(r,l,d,p,x,w,E){const I=(w-p)/2,A=Math.abs(r-(p+I));if(A>I+d)return!1;const F=(E-x)/2,B=Math.abs(l-(x+F));if(B>F+d)return!1;if(A<=I||B<=F)return!0;const q=A-I,ee=B-F;return q*q+ee*ee<=d*d}}function Fr(y,r,l,d,p){const x=h.F();return r?(h.J(x,x,[1/p,1/p,1]),l||h.ad(x,x,d.angle)):h.K(x,d.labelPlaneMatrix,y),x}function vi(y,r,l,d,p){if(r){const x=h.ae(y);return h.J(x,x,[p,p,1]),l||h.ad(x,x,-d.angle),x}return d.glCoordMatrix}function In(y,r,l){let d;l?(d=[y.x,y.y,l(y.x,y.y),1],h.af(d,d,r)):(d=[y.x,y.y,0,1],vt(d,d,r));const p=d[3];return{point:new h.P(d[0]/p,d[1]/p),signedDistanceFromCamera:p}}function re(y,r){return .5+y/r*.5}function j(y,r){const l=y[0]/y[3],d=y[1]/y[3];return l>=-r[0]&&l<=r[0]&&d>=-r[1]&&d<=r[1]}function V(y,r,l,d,p,x,w,E,I,A){const F=d?y.textSizeData:y.iconSizeData,B=h.ag(F,l.transform.zoom),q=[256/l.width*2+1,256/l.height*2+1],ee=d?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ee.clear();const te=y.lineVertexArray,oe=d?y.text.placedSymbolArray:y.icon.placedSymbolArray,J=l.transform.width/l.transform.height;let pe=!1;for(let Ce=0;Ce<oe.length;Ce++){const se=oe.get(Ce);if(se.hidden||se.writingMode===h.ah.vertical&&!pe){Ae(se.numGlyphs,ee);continue}let ve;if(pe=!1,A?(ve=[se.anchorX,se.anchorY,A(se.anchorX,se.anchorY),1],h.af(ve,ve,r)):(ve=[se.anchorX,se.anchorY,0,1],vt(ve,ve,r)),!j(ve,q)){Ae(se.numGlyphs,ee);continue}const Ee=re(l.transform.cameraToCenterDistance,ve[3]),Te=h.ai(F,B,se),ke=w?Te/Ee:Te*Ee,Ge=new h.P(se.anchorX,se.anchorY),Ue=In(Ge,p,A).point,Ye={projections:{},offsets:{}},ct=me(se,ke,!1,E,r,p,x,y.glyphOffsetArray,te,ee,Ue,Ge,Ye,J,I,A);pe=ct.useVertical,(ct.notEnoughRoom||pe||ct.needsFlipping&&me(se,ke,!0,E,r,p,x,y.glyphOffsetArray,te,ee,Ue,Ge,Ye,J,I,A).notEnoughRoom)&&Ae(se.numGlyphs,ee)}d?y.text.dynamicLayoutVertexBuffer.updateData(ee):y.icon.dynamicLayoutVertexBuffer.updateData(ee)}function W(y,r,l,d,p,x,w,E,I,A,F,B,q){const ee=E.glyphStartIndex+E.numGlyphs,te=E.lineStartIndex,oe=E.lineStartIndex+E.lineLength,J=r.getoffsetX(E.glyphStartIndex),pe=r.getoffsetX(ee-1),Ce=Ne(y*J,l,d,p,x,w,E.segment,te,oe,I,A,F,B,q);if(!Ce)return null;const se=Ne(y*pe,l,d,p,x,w,E.segment,te,oe,I,A,F,B,q);return se?{first:Ce,last:se}:null}function ae(y,r,l,d){return y===h.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(y===h.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function me(y,r,l,d,p,x,w,E,I,A,F,B,q,ee,te,oe){const J=r/24,pe=y.lineOffsetX*J,Ce=y.lineOffsetY*J;let se;if(y.numGlyphs>1){const ve=y.glyphStartIndex+y.numGlyphs,Ee=y.lineStartIndex,Te=y.lineStartIndex+y.lineLength,ke=W(J,E,pe,Ce,l,F,B,y,I,x,q,te,oe);if(!ke)return{notEnoughRoom:!0};const Ge=In(ke.first.point,w,oe).point,Ue=In(ke.last.point,w,oe).point;if(d&&!l){const Ye=ae(y.writingMode,Ge,Ue,ee);if(Ye)return Ye}se=[ke.first];for(let Ye=y.glyphStartIndex+1;Ye<ve-1;Ye++)se.push(Ne(J*E.getoffsetX(Ye),pe,Ce,l,F,B,y.segment,Ee,Te,I,x,q,te,oe));se.push(ke.last)}else{if(d&&!l){const Ee=In(B,p,oe).point,Te=y.lineStartIndex+y.segment+1,ke=new h.P(I.getx(Te),I.gety(Te)),Ge=In(ke,p,oe),Ue=Ge.signedDistanceFromCamera>0?Ge.point:de(B,ke,Ee,1,p,oe),Ye=ae(y.writingMode,Ee,Ue,ee);if(Ye)return Ye}const ve=Ne(J*E.getoffsetX(y.glyphStartIndex),pe,Ce,l,F,B,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,I,x,q,te,oe);if(!ve)return{notEnoughRoom:!0};se=[ve]}for(const ve of se)h.aj(A,ve.point,ve.angle);return{}}function de(y,r,l,d,p,x){const w=In(y.add(y.sub(r)._unit()),p,x).point,E=l.sub(w);return l.add(E._mult(d/E.mag()))}function ye(y,r){const{projectionCache:l,lineVertexArray:d,labelPlaneMatrix:p,tileAnchorPoint:x,distanceFromAnchor:w,getElevation:E,previousVertex:I,direction:A,absOffsetX:F}=r;if(l.projections[y])return l.projections[y];const B=new h.P(d.getx(y),d.gety(y)),q=In(B,p,E);if(q.signedDistanceFromCamera>0)return l.projections[y]=q.point,q.point;const ee=y-A;return de(w===0?x:new h.P(d.getx(ee),d.gety(ee)),B,I,F-w+1,p,E)}function ce(y,r,l){return y._unit()._perp()._mult(r*l)}function we(y,r,l,d,p,x,w,E){const{projectionCache:I,direction:A}=E;if(I.offsets[y])return I.offsets[y];const F=l.add(r);if(y+A<d||y+A>=p)return I.offsets[y]=F,F;const B=ye(y+A,E),q=ce(B.sub(l),w,A),ee=l.add(q),te=B.add(q);return I.offsets[y]=h.ak(x,F,ee,te)||F,I.offsets[y]}function Ne(y,r,l,d,p,x,w,E,I,A,F,B,q,ee){const te=d?y-r:y+r;let oe=te>0?1:-1,J=0;d&&(oe*=-1,J=Math.PI),oe<0&&(J+=Math.PI);let pe,Ce,se=oe>0?E+w:E+w+1,ve=p,Ee=p,Te=0,ke=0;const Ge=Math.abs(te),Ue=[];let Ye;for(;Te+ke<=Ge;){if(se+=oe,se<E||se>=I)return null;Te+=ke,Ee=ve,Ce=pe;const et={projectionCache:B,lineVertexArray:A,labelPlaneMatrix:F,tileAnchorPoint:x,distanceFromAnchor:Te,getElevation:ee,previousVertex:Ee,direction:oe,absOffsetX:Ge};if(ve=ye(se,et),l===0)Ue.push(Ee),Ye=ve.sub(Ee);else{let bt;const At=ve.sub(Ee);bt=At.mag()===0?ce(ye(se+oe,et).sub(ve),l,oe):ce(At,l,oe),Ce||(Ce=Ee.add(bt)),pe=we(se,bt,ve,E,I,Ce,l,et),Ue.push(Ce),Ye=pe.sub(Ce)}ke=Ye.mag()}const ct=Ye._mult((Ge-Te)/ke)._add(Ce||Ee),Mt=J+Math.atan2(ve.y-Ee.y,ve.x-Ee.x);return Ue.push(ct),{point:ct,angle:q?Mt:0,path:Ue}}const Le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ae(y,r){for(let l=0;l<y;l++){const d=r.length;r.resize(d+4),r.float32.set(Le,3*d)}}function vt(y,r,l){const d=r[0],p=r[1];return y[0]=l[0]*d+l[4]*p+l[12],y[1]=l[1]*d+l[5]*p+l[13],y[3]=l[3]*d+l[7]*p+l[15],y}const xt=100;class kt{constructor(r,l=new Ct(r.width+200,r.height+200,25),d=new Ct(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=d,this.pitchfactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+xt,this.screenBottomBoundary=r.height+xt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,p,x,w){const E=this.projectAndGetPerspectiveRatio(p,r.anchorPointX,r.anchorPointY,w),I=d*E.perspectiveRatio,A=r.x1*I+E.point.x,F=r.y1*I+E.point.y,B=r.x2*I+E.point.x,q=r.y2*I+E.point.y;return!this.isInsideGrid(A,F,B,q)||l!=="always"&&this.grid.hitTest(A,F,B,q,l,x)||E.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[A,F,B,q],offscreen:this.isOffscreen(A,F,B,q)}}placeCollisionCircles(r,l,d,p,x,w,E,I,A,F,B,q,ee,te){const oe=[],J=new h.P(l.anchorX,l.anchorY),pe=In(J,w,te),Ce=re(this.transform.cameraToCenterDistance,pe.signedDistanceFromCamera),se=(F?x/Ce:x*Ce)/h.ao,ve=In(J,E,te).point,Ee=W(se,p,l.lineOffsetX*se,l.lineOffsetY*se,!1,ve,J,l,d,E,{projections:{},offsets:{}},!1,te);let Te=!1,ke=!1,Ge=!0;if(Ee){const Ue=.5*q*Ce+ee,Ye=new h.P(-100,-100),ct=new h.P(this.screenRightBoundary,this.screenBottomBoundary),Mt=new mr,et=Ee.first,bt=Ee.last;let At=[];for(let Rt=et.path.length-1;Rt>=1;Rt--)At.push(et.path[Rt]);for(let Rt=1;Rt<bt.path.length;Rt++)At.push(bt.path[Rt]);const Wt=2.5*Ue;if(I){const Rt=At.map(jt=>In(jt,I,te));At=Rt.some(jt=>jt.signedDistanceFromCamera<=0)?[]:Rt.map(jt=>jt.point)}let St=[];if(At.length>0){const Rt=At[0].clone(),jt=At[0].clone();for(let zn=1;zn<At.length;zn++)Rt.x=Math.min(Rt.x,At[zn].x),Rt.y=Math.min(Rt.y,At[zn].y),jt.x=Math.max(jt.x,At[zn].x),jt.y=Math.max(jt.y,At[zn].y);St=Rt.x>=Ye.x&&jt.x<=ct.x&&Rt.y>=Ye.y&&jt.y<=ct.y?[At]:jt.x<Ye.x||Rt.x>ct.x||jt.y<Ye.y||Rt.y>ct.y?[]:h.al([At],Ye.x,Ye.y,ct.x,ct.y)}for(const Rt of St){Mt.reset(Rt,.25*Ue);let jt=0;jt=Mt.length<=.5*Ue?1:Math.ceil(Mt.paddedLength/Wt)+1;for(let zn=0;zn<jt;zn++){const un=zn/Math.max(jt-1,1),li=Mt.lerp(un),cr=li.x+xt,Rn=li.y+xt;oe.push(cr,Rn,Ue,0);const Kr=cr-Ue,Li=Rn-Ue,oo=cr+Ue,Xo=Rn+Ue;if(Ge=Ge&&this.isOffscreen(Kr,Li,oo,Xo),ke=ke||this.isInsideGrid(Kr,Li,oo,Xo),r!=="always"&&this.grid.hitTestCircle(cr,Rn,Ue,r,B)&&(Te=!0,!A))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!A&&Te||!ke||Ce<this.perspectiveRatioCutoff?[]:oe,offscreen:Ge,collisionDetected:Te}}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let d=1/0,p=1/0,x=-1/0,w=-1/0;for(const F of r){const B=new h.P(F.x+xt,F.y+xt);d=Math.min(d,B.x),p=Math.min(p,B.y),x=Math.max(x,B.x),w=Math.max(w,B.y),l.push(B)}const E=this.grid.query(d,p,x,w).concat(this.ignoredGrid.query(d,p,x,w)),I={},A={};for(const F of E){const B=F.key;if(I[B.bucketInstanceId]===void 0&&(I[B.bucketInstanceId]={}),I[B.bucketInstanceId][B.featureIndex])continue;const q=[new h.P(F.x1,F.y1),new h.P(F.x2,F.y1),new h.P(F.x2,F.y2),new h.P(F.x1,F.y2)];h.am(l,q)&&(I[B.bucketInstanceId][B.featureIndex]=!0,A[B.bucketInstanceId]===void 0&&(A[B.bucketInstanceId]=[]),A[B.bucketInstanceId].push(B.featureIndex))}return A}insertCollisionBox(r,l,d,p,x,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:x,collisionGroupID:w,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,p,x,w){const E=d?this.ignoredGrid:this.grid,I={bucketInstanceId:p,featureIndex:x,collisionGroupID:w,overlapMode:l};for(let A=0;A<r.length;A+=4)E.insertCircle(I,r[A],r[A+1],r[A+2])}projectAndGetPerspectiveRatio(r,l,d,p){let x;return p?(x=[l,d,p(l,d),1],h.af(x,x,r)):(x=[l,d,0,1],vt(x,x,r)),{point:new h.P((x[0]/x[3]+1)/2*this.transform.width+xt,(-x[1]/x[3]+1)/2*this.transform.height+xt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(r,l,d,p){return d<xt||r>=this.screenRightBoundary||p<xt||l>this.screenBottomBoundary}isInsideGrid(r,l,d,p){return d>=0&&r<this.gridRightBoundary&&p>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const r=h.an([]);return h.H(r,r,[-100,-100,0]),r}}function Et(y,r,l){return r*(h.W/(y.tileSize*Math.pow(2,l-y.tileID.overscaledZ)))}class Ut{constructor(r,l,d,p){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class qt{constructor(r,l,d,p,x){this.text=new Ut(r?r.text:null,l,d,x),this.icon=new Ut(r?r.icon:null,l,p,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fn{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class $n{constructor(){this.invProjMatrix=h.F(),this.viewportMatrix=h.F(),this.circles=[]}}class Nt{constructor(r,l,d,p,x){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=x}}class bn{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function Jn(y,r,l,d,p){const{horizontalAlign:x,verticalAlign:w}=h.at(y);return new h.P(-(x-.5)*r+d[0]*p,-(w-.5)*l+d[1]*p)}function Sr(y,r,l,d,p,x){const{x1:w,x2:E,y1:I,y2:A,anchorPointX:F,anchorPointY:B}=y,q=new h.P(r,l);return d&&q._rotate(p?x:-x),{x1:w+q.x,y1:I+q.y,x2:E+q.x,y2:A+q.y,anchorPointX:F,anchorPointY:B}}class _i{constructor(r,l,d,p,x){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new kt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new bn(p),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(r,l,d,p){const x=d.getBucket(l),w=d.latestFeatureIndex;if(!x||!w||l.id!==x.layerIds[0])return;const E=d.collisionBoxArray,I=x.layers[0].layout,A=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),F=d.tileSize/h.W,B=this.transform.calculatePosMatrix(d.tileID.toUnwrapped()),q=I.get("text-pitch-alignment")==="map",ee=I.get("text-rotation-alignment")==="map",te=Et(d,1,this.transform.zoom),oe=Fr(B,q,ee,this.transform,te);let J=null;if(q){const Ce=vi(B,q,ee,this.transform,te);J=h.K([],this.transform.labelPlaneMatrix,Ce)}this.retainedQueryData[x.bucketInstanceId]=new Nt(x.bucketInstanceId,w,x.sourceLayerIndex,x.index,d.tileID);const pe={bucket:x,layout:I,posMatrix:B,textLabelPlaneMatrix:oe,labelToScreenMatrix:J,scale:A,textPixelRatio:F,holdingForFade:d.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:h.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(p)for(const Ce of x.sortKeyRanges){const{sortKey:se,symbolInstanceStart:ve,symbolInstanceEnd:Ee}=Ce;r.push({sortKey:se,symbolInstanceStart:ve,symbolInstanceEnd:Ee,parameters:pe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:pe})}attemptAnchorPlacement(r,l,d,p,x,w,E,I,A,F,B,q,ee,te,oe,J){const pe=h.ap[r.textAnchor],Ce=[r.textOffset0,r.textOffset1],se=Jn(pe,d,p,Ce,x),ve=this.collisionIndex.placeCollisionBox(Sr(l,se.x,se.y,w,E,this.transform.angle),B,I,A,F.predicate,J);if((!oe||this.collisionIndex.placeCollisionBox(Sr(oe,se.x,se.y,w,E,this.transform.angle),B,I,A,F.predicate,J).box.length!==0)&&ve.box.length>0){let Ee;if(this.prevPlacement&&this.prevPlacement.variableOffsets[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID]&&this.prevPlacement.placements[q.crossTileID].text&&(Ee=this.prevPlacement.variableOffsets[q.crossTileID].anchor),q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[q.crossTileID]={textOffset:Ce,width:d,height:p,anchor:pe,textBoxScale:x,prevAnchor:Ee},this.markUsedJustification(ee,pe,q,te),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,te,q),this.placedOrientations[q.crossTileID]=te),{shift:se,placedGlyphBoxes:ve}}}placeLayerBucketPart(r,l,d){const{bucket:p,layout:x,posMatrix:w,textLabelPlaneMatrix:E,labelToScreenMatrix:I,textPixelRatio:A,holdingForFade:F,collisionBoxArray:B,partiallyEvaluatedTextSize:q,collisionGroup:ee}=r.parameters,te=x.get("text-optional"),oe=x.get("icon-optional"),J=h.aq(x,"text-overlap","text-allow-overlap"),pe=J==="always",Ce=h.aq(x,"icon-overlap","icon-allow-overlap"),se=Ce==="always",ve=x.get("text-rotation-alignment")==="map",Ee=x.get("text-pitch-alignment")==="map",Te=x.get("icon-text-fit")!=="none",ke=x.get("symbol-z-order")==="viewport-y",Ge=pe&&(se||!p.hasIconData()||oe),Ue=se&&(pe||!p.hasTextData()||te);!p.collisionArrays&&B&&p.deserializeCollisionBoxes(B);const Ye=this.retainedQueryData[p.bucketInstanceId].tileID,ct=this.terrain?(et,bt)=>this.terrain.getElevation(Ye,et,bt):null,Mt=(et,bt)=>{var At,Wt;if(l[et.crossTileID])return;if(F)return void(this.placements[et.crossTileID]=new fn(!1,!1,!1));let St=!1,Rt=!1,jt=!0,zn=null,un={box:null,offscreen:null},li={box:null,offscreen:null},cr=null,Rn=null,Kr=null,Li=0,oo=0,Xo=0;bt.textFeatureIndex?Li=bt.textFeatureIndex:et.useRuntimeCollisionCircles&&(Li=et.featureIndex),bt.verticalTextFeatureIndex&&(oo=bt.verticalTextFeatureIndex);const Qa=bt.textBox;if(Qa){const Or=Qn=>{let En=h.ah.horizontal;if(p.allowVerticalPlacement&&!Qn&&this.prevPlacement){const wi=this.prevPlacement.placedOrientations[et.crossTileID];wi&&(this.placedOrientations[et.crossTileID]=wi,En=wi,this.markUsedOrientation(p,En,et))}return En},Tr=(Qn,En)=>{if(p.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&bt.verticalTextBox){for(const wi of p.writingModes)if(wi===h.ah.vertical?(un=En(),li=un):un=Qn(),un&&un.box&&un.box.length)break}else un=Qn()},Br=et.textAnchorOffsetStartIndex,ol=et.textAnchorOffsetEndIndex;if(ol===Br){const Qn=(En,wi)=>{const er=this.collisionIndex.placeCollisionBox(En,J,A,w,ee.predicate,ct);return er&&er.box&&er.box.length&&(this.markUsedOrientation(p,wi,et),this.placedOrientations[et.crossTileID]=wi),er};Tr(()=>Qn(Qa,h.ah.horizontal),()=>{const En=bt.verticalTextBox;return p.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&En?Qn(En,h.ah.vertical):{box:null,offscreen:null}}),Or(un&&un.box&&un.box.length)}else{let Qn=h.ap[(Wt=(At=this.prevPlacement)===null||At===void 0?void 0:At.variableOffsets[et.crossTileID])===null||Wt===void 0?void 0:Wt.anchor];const En=(er,$g,Lf)=>{const Vg=er.x2-er.x1,es=er.y2-er.y1,hh=et.textBoxScale,Ug=Te&&Ce==="never"?$g:null;let ts={box:[],offscreen:!1},ur=J==="never"?1:2,dh="never";Qn&&ur++;for(let al=0;al<ur;al++){for(let ns=Br;ns<ol;ns++){const fh=p.textAnchorOffsets.get(ns);if(Qn&&fh.textAnchor!==Qn)continue;const ph=this.attemptAnchorPlacement(fh,er,Vg,es,hh,ve,Ee,A,w,ee,dh,et,p,Lf,Ug,ct);if(ph&&(ts=ph.placedGlyphBoxes,ts&&ts.box&&ts.box.length))return St=!0,zn=ph.shift,ts}Qn?Qn=null:dh=J}return ts};Tr(()=>En(Qa,bt.iconBox,h.ah.horizontal),()=>{const er=bt.verticalTextBox;return p.allowVerticalPlacement&&!(un&&un.box&&un.box.length)&&et.numVerticalGlyphVertices>0&&er?En(er,bt.verticalIconBox,h.ah.vertical):{box:null,offscreen:null}}),un&&(St=un.box,jt=un.offscreen);const wi=Or(un&&un.box);if(!St&&this.prevPlacement){const er=this.prevPlacement.variableOffsets[et.crossTileID];er&&(this.variableOffsets[et.crossTileID]=er,this.markUsedJustification(p,er.anchor,et,wi))}}}if(cr=un,St=cr&&cr.box&&cr.box.length>0,jt=cr&&cr.offscreen,et.useRuntimeCollisionCircles){const Or=p.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),Tr=h.ai(p.textSizeData,q,Or),Br=x.get("text-padding");Rn=this.collisionIndex.placeCollisionCircles(J,Or,p.lineVertexArray,p.glyphOffsetArray,Tr,w,E,I,d,Ee,ee.predicate,et.collisionCircleDiameter,Br,ct),Rn.circles.length&&Rn.collisionDetected&&!d&&h.w("Collisions detected, but collision boxes are not shown"),St=pe||Rn.circles.length>0&&!Rn.collisionDetected,jt=jt&&Rn.offscreen}if(bt.iconFeatureIndex&&(Xo=bt.iconFeatureIndex),bt.iconBox){const Or=Tr=>{const Br=Te&&zn?Sr(Tr,zn.x,zn.y,ve,Ee,this.transform.angle):Tr;return this.collisionIndex.placeCollisionBox(Br,Ce,A,w,ee.predicate,ct)};li&&li.box&&li.box.length&&bt.verticalIconBox?(Kr=Or(bt.verticalIconBox),Rt=Kr.box.length>0):(Kr=Or(bt.iconBox),Rt=Kr.box.length>0),jt=jt&&Kr.offscreen}const va=te||et.numHorizontalGlyphVertices===0&&et.numVerticalGlyphVertices===0,_a=oe||et.numIconVertices===0;if(va||_a?_a?va||(Rt=Rt&&St):St=Rt&&St:Rt=St=Rt&&St,St&&cr&&cr.box&&this.collisionIndex.insertCollisionBox(cr.box,J,x.get("text-ignore-placement"),p.bucketInstanceId,li&&li.box&&oo?oo:Li,ee.ID),Rt&&Kr&&this.collisionIndex.insertCollisionBox(Kr.box,Ce,x.get("icon-ignore-placement"),p.bucketInstanceId,Xo,ee.ID),Rn&&(St&&this.collisionIndex.insertCollisionCircles(Rn.circles,J,x.get("text-ignore-placement"),p.bucketInstanceId,Li,ee.ID),d)){const Or=p.bucketInstanceId;let Tr=this.collisionCircleArrays[Or];Tr===void 0&&(Tr=this.collisionCircleArrays[Or]=new $n);for(let Br=0;Br<Rn.circles.length;Br+=4)Tr.circles.push(Rn.circles[Br+0]),Tr.circles.push(Rn.circles[Br+1]),Tr.circles.push(Rn.circles[Br+2]),Tr.circles.push(Rn.collisionDetected?1:0)}if(et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[et.crossTileID]=new fn(St||Ge,Rt||Ue,jt||p.justReloaded),l[et.crossTileID]=!0};if(ke){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const et=p.getSortedSymbolIndexes(this.transform.angle);for(let bt=et.length-1;bt>=0;--bt){const At=et[bt];Mt(p.symbolInstances.get(At),p.collisionArrays[At])}}else for(let et=r.symbolInstanceStart;et<r.symbolInstanceEnd;et++)Mt(p.symbolInstances.get(et),p.collisionArrays[et]);if(d&&p.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[p.bucketInstanceId];h.ar(et.invProjMatrix,w),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}markUsedJustification(r,l,d,p){let x;x=p===h.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[h.as(l)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const E of w)E>=0&&(r.text.placedSymbolArray.get(E).crossTileID=x>=0&&E!==x?0:d.crossTileID)}markUsedOrientation(r,l,d){const p=l===h.ah.horizontal||l===h.ah.horizontalOnly?l:0,x=l===h.ah.vertical?l:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const E of w)r.text.placedSymbolArray.get(E).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const p=l?l.symbolFadeChange(r):1,x=l?l.opacities:{},w=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(const I in this.placements){const A=this.placements[I],F=x[I];F?(this.opacities[I]=new qt(F,p,A.text,A.icon),d=d||A.text!==F.text.placed||A.icon!==F.icon.placed):(this.opacities[I]=new qt(null,p,A.text,A.icon,A.skipFade),d=d||A.text||A.icon)}for(const I in x){const A=x[I];if(!this.opacities[I]){const F=new qt(A,p,!1,!1);F.isHidden()||(this.opacities[I]=F,d=d||A.text.placed||A.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in E)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=E[I]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){const d={};for(const p of l){const x=p.getBucket(r);x&&p.latestFeatureIndex&&r.id===x.layerIds[0]&&this.updateBucketOpacities(x,d,p.collisionBoxArray)}}updateBucketOpacities(r,l,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const p=r.layers[0],x=p.layout,w=new qt(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),I=x.get("icon-allow-overlap"),A=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=x.get("text-rotation-alignment")==="map",B=x.get("text-pitch-alignment")==="map",q=x.get("icon-text-fit")!=="none",ee=new qt(null,0,E&&(I||!r.hasIconData()||x.get("icon-optional")),I&&(E||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);const te=(oe,J,pe)=>{for(let Ce=0;Ce<J/4;Ce++)oe.opacityVertexArray.emplaceBack(pe);oe.hasVisibleVertices=oe.hasVisibleVertices||pe!==Cr};for(let oe=0;oe<r.symbolInstances.length;oe++){const J=r.symbolInstances.get(oe),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:Ce,crossTileID:se}=J;let ve=this.opacities[se];l[se]?ve=w:ve||(ve=ee,this.opacities[se]=ve),l[se]=!0;const Ee=J.numIconVertices>0,Te=this.placedOrientations[J.crossTileID],ke=Te===h.ah.vertical,Ge=Te===h.ah.horizontal||Te===h.ah.horizontalOnly;if(pe>0||Ce>0){const Ue=Xd(ve.text);te(r.text,pe,ke?Cr:Ue),te(r.text,Ce,Ge?Cr:Ue);const Ye=ve.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(et=>{et>=0&&(r.text.placedSymbolArray.get(et).hidden=Ye||ke?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=Ye||Ge?1:0);const ct=this.variableOffsets[J.crossTileID];ct&&this.markUsedJustification(r,ct.anchor,J,Te);const Mt=this.placedOrientations[J.crossTileID];Mt&&(this.markUsedJustification(r,"left",J,Mt),this.markUsedOrientation(r,Mt,J))}if(Ee){const Ue=Xd(ve.icon),Ye=!(q&&J.verticalPlacedIconSymbolIndex&&ke);J.placedIconSymbolIndex>=0&&(te(r.icon,J.numIconVertices,Ye?Ue:Cr),r.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=ve.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(te(r.icon,J.numVerticalIconVertices,Ye?Cr:Ue),r.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Ue=r.collisionArrays[oe];if(Ue){let Ye=new h.P(0,0);if(Ue.textBox||Ue.verticalTextBox){let Mt=!0;if(A){const et=this.variableOffsets[se];et?(Ye=Jn(et.anchor,et.width,et.height,et.textOffset,et.textBoxScale),F&&Ye._rotate(B?this.transform.angle:-this.transform.angle)):Mt=!1}Ue.textBox&&kn(r.textCollisionBox.collisionVertexArray,ve.text.placed,!Mt||ke,Ye.x,Ye.y),Ue.verticalTextBox&&kn(r.textCollisionBox.collisionVertexArray,ve.text.placed,!Mt||Ge,Ye.x,Ye.y)}const ct=!!(!Ge&&Ue.verticalIconBox);Ue.iconBox&&kn(r.iconCollisionBox.collisionVertexArray,ve.icon.placed,ct,q?Ye.x:0,q?Ye.y:0),Ue.verticalIconBox&&kn(r.iconCollisionBox.collisionVertexArray,ve.icon.placed,!ct,q?Ye.x:0,q?Ye.y:0)}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const oe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=oe.invProjMatrix,r.placementViewportMatrix=oe.viewportMatrix,r.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){const d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function kn(y,r,l,d,p){y.emplaceBack(r?1:0,l?1:0,d||0,p||0),y.emplaceBack(r?1:0,l?1:0,d||0,p||0),y.emplaceBack(r?1:0,l?1:0,d||0,p||0),y.emplaceBack(r?1:0,l?1:0,d||0,p||0)}const $a=Math.pow(2,25),xg=Math.pow(2,24),an=Math.pow(2,17),_u=Math.pow(2,16),xu=Math.pow(2,9),ri=Math.pow(2,8),ii=Math.pow(2,1);function Xd(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const r=y.placed?1:0,l=Math.floor(127*y.opacity);return l*$a+r*xg+l*an+r*_u+l*xu+r*ri+l*ii+r}const Cr=0;class xi{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,p,x){const w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(w,p,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,I)=>E.sortKey-I.sortKey));this._currentPartIndex<w.length;)if(l.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,x())return!0;return!1}}class Yd{constructor(r,l,d,p,x,w,E,I){this.placement=new _i(r,l,w,E,I),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){const p=z.now(),x=()=>!this._forceFullPlacement&&z.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=l[r[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new xi(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const xo=512/h.W/2;class Vn{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let x=0;x<l.length;x++){const w=l.get(x),E=w.key,I=p.get(E);I?I.push(w):p.set(E,[w])}for(const[x,w]of p){const E={positions:w.map(I=>({x:Math.floor(I.anchorX*xo),y:Math.floor(I.anchorY*xo)})),crossTileIDs:w.map(I=>I.crossTileID)};if(E.positions.length>128){const I=new h.au(E.positions.length,16,Uint16Array);for(const{x:A,y:F}of E.positions)I.add(A,F);I.finish(),delete E.positions,E.index=I}this._symbolsByKey[x]=E}}getScaledCoordinates(r,l){const{x:d,y:p,z:x}=this.tileID.canonical,{x:w,y:E,z:I}=l.canonical,A=xo/Math.pow(2,I-x),F=(E*h.W+r.anchorY)*A,B=p*h.W*xo;return{x:Math.floor((w*h.W+r.anchorX)*A-d*h.W*xo),y:Math.floor(F-B)}}findMatches(r,l,d){const p=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let x=0;x<r.length;x++){const w=r.get(x);if(w.crossTileID)continue;const E=this._symbolsByKey[w.key];if(!E)continue;const I=this.getScaledCoordinates(w,l);if(E.index){const A=E.index.range(I.x-p,I.y-p,I.x+p,I.y+p).sort();for(const F of A){const B=E.crossTileIDs[F];if(!d[B]){d[B]=!0,w.crossTileID=B;break}}}else if(E.positions)for(let A=0;A<E.positions.length;A++){const F=E.positions[A],B=E.crossTileIDs[A];if(Math.abs(F.x-I.x)<=p&&Math.abs(F.y-I.y)<=p&&!d[B]){d[B]=!0,w.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Os{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class sa{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const l=Math.round((r-this.lng)/360);if(l!==0)for(const d in this.indexes){const p=this.indexes[d],x={};for(const w in p){const E=p[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),x[E.tileID.key]=E}this.indexes[d]=x}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let x=0;x<l.symbolInstances.length;x++)l.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const p=this.usedCrossTileIDs[r.overscaledZ];for(const x in this.indexes){const w=this.indexes[x];if(Number(x)>r.overscaledZ)for(const E in w){const I=w[E];I.tileID.isChildOf(r)&&I.findMatches(l.symbolInstances,r,p)}else{const E=w[r.scaledTo(Number(x)).key];E&&E.findMatches(l.symbolInstances,r,p)}}for(let x=0;x<l.symbolInstances.length;x++){const w=l.symbolInstances.get(x);w.crossTileID||(w.crossTileID=d.generate(),p[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Vn(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(const d of l.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[r][p]}removeStaleBuckets(r){let l=!1;for(const d in this.indexes){const p=this.indexes[d];for(const x in p)r[p[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[x]),delete p[x],l=!0)}return l}}class Mn{constructor(){this.layerIndexes={},this.crossTileIDs=new Os,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let p=this.layerIndexes[r.id];p===void 0&&(p=this.layerIndexes[r.id]=new sa);let x=!1;const w={};p.handleWrapJump(d);for(const E of l){const I=E.getBucket(r);I&&r.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(E.tileID,I,this.crossTileIDs)&&(x=!0),w[I.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(x=!0),x}pruneUnusedLayers(r){const l={};r.forEach(d=>{l[d]=!0});for(const d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}const la=(y,r)=>h.t(y,r&&r.filter(l=>l.identifier!=="source.canvas")),Ri=h.av();class Hl extends h.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=r,this.dispatcher=new jn(Ht(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new Ze,this.imageManager.setEventedParent(this),this.glyphManager=new Pe(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new We(256,512),this.crossTileSymbolIndex=new Mn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new h.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",h.ax()),br().on(xn,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const x=p.getSource();if(x&&x.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===x.id&&this._validateLayer(E)}})}loadURL(r,l={},d){this.fire(new h.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const p=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController,h.h(p,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,l,d)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new h.j(x))})}loadJSON(r,l={},d){this.fire(new h.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new h.k("dataloading",{dataType:"style"})),this._load(Ri,{validate:!1})}_load(r,l,d){var p;const x=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!la(this,h.x(x))){this._loaded=!0,this.stylesheet=x;for(const w in x.sources)this.addSource(w,x.sources[w],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Ve(this.stylesheet.light),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new h.k("data",{dataType:"style"})),this.fire(new h.k("style.load"))}}_createLayers(){const r=h.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of r){const d=h.az(l);d.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=d}}_loadSprite(r,l=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,w,E,I){return h._(this,void 0,void 0,function*(){const A=Re(x),F=E>1?"@2x":"",B={},q={};for(const{id:ee,url:te}of A){const oe=w.transformRequest(w.normalizeSpriteURL(te,F,".json"),"SpriteJSON");B[ee]=h.h(oe,I);const J=w.transformRequest(w.normalizeSpriteURL(te,F,".png"),"SpriteImage");q[ee]=H.getImage(J,I)}return yield Promise.all([...Object.values(B),...Object.values(q)]),function(ee,te){return h._(this,void 0,void 0,function*(){const oe={};for(const J in ee){oe[J]={};const pe=z.getImageCanvasContext((yield te[J]).data),Ce=(yield ee[J]).data;for(const se in Ce){const{width:ve,height:Ee,x:Te,y:ke,sdf:Ge,pixelRatio:Ue,stretchX:Ye,stretchY:ct,content:Mt,textFitWidth:et,textFitHeight:bt}=Ce[se];oe[J][se]={data:null,pixelRatio:Ue,sdf:Ge,stretchX:Ye,stretchY:ct,content:Mt,textFitWidth:et,textFitHeight:bt,spriteData:{width:ve,height:Ee,x:Te,y:ke,context:pe}}}}return oe})}(B,q)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const w in x){this._spritesImagesIds[w]=[];const E=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(I=>!(I in x)):[];for(const I of E)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in x[w]){const A=w==="default"?I:`${w}:${I}`;this._spritesImagesIds[w].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,x[w][I],!1):this.imageManager.addImage(A,x[w][I]),l&&(this._changedImages[A]=!0)}}}).catch(x=>{this._spriteRequest=null,p=x,this.fire(new h.j(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}_validateLayer(r){const l=this.sourceCaches[r.source];if(!l)return;const d=r.sourceLayer;if(!d)return;const p=l.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new h.j(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r){const l=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l);const d=[];for(const p of r)l[p]&&d.push(l[p]);return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const l=Object.keys(this._layers);for(const d of l){const p=this._layers[d];p.type!=="custom"&&(r[d]=p.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const l=this._changed;if(l){const p=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(p.length||x.length)&&this._updateWorkerLayers(p,x);for(const w in this._updatedSources){const E=this._updatedSources[w];if(E==="reload")this._reloadSource(w);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const x=this.sourceCaches[p];d[p]=x.used,x.used=!1}for(const p of this._order){const x=this._layers[p];x.recalculate(r,this._availableImages),!x.isHidden(r.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const p in d){const x=this.sourceCaches[p];!!d[p]!=!!x.used&&x.fire(new h.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(r),this.z=r.zoom,l&&this.fire(new h.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();const p=this.serialize();if(r=l.transformStyle?l.transformStyle(p,r):r,((d=l.validate)===null||d===void 0||d)&&la(this,h.x(r)))return!1;(r=h.aA(r)).layers=h.ay(r.layers);const x=h.aB(p,r),w=this._getOperationsToPerform(x);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const E of w.operations)E();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const l=[],d=[];for(const p of r)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":l.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":l.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setTransition":l.push(()=>{});break;default:d.push(p.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new h.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new h.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(h.x.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const p=this.sourceCaches[r]=new Je(r,l,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:r})),p.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===r)return this.fire(new h.j(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));const l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new h.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();const p=r.id;if(this.getLayer(p))return void this.fire(new h.j(new Error(`Layer "${p}" already exists on this map.`)));let x;if(r.type==="custom"){if(la(this,h.aC(r)))return;x=h.az(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(p,r.source),r=h.aA(r),r=h.e(r,{source:p})),this._validate(h.x.layer,`layers.${p}`,r,{arrayIndex:-1},d))return;x=h.az(r),this._validateLayer(x),x.setEventedParent(this,{layer:{id:p}})}const w=l?this._order.indexOf(l):this._order.length;if(l&&w===-1)this.fire(new h.j(new Error(`Cannot add layer "${p}" before non-existing layer "${l}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=x,this._removedLayers[p]&&x.source&&x.type!=="custom"){const E=this._removedLayers[p];delete this._removedLayers[p],E.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new h.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;const d=this._order.indexOf(r);this._order.splice(d,1);const p=l?this._order.indexOf(l):this._order.length;l&&p===-1?this.fire(new h.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(p,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const l=this._layers[r];if(!l)return void this.fire(new h.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);const d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();const p=this.getLayer(r);p?p.minzoom===l&&p.maxzoom===d||(l!=null&&(p.minzoom=l),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new h.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();const p=this.getLayer(r);if(p){if(!h.aD(p.filter,l))return l==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(h.x.filter,`layers.${p.id}.filter`,l,null,d)||(p.filter=h.aA(l),this._updateLayer(p)))}else this.fire(new h.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return h.aA(this.getLayer(r).filter)}setLayoutProperty(r,l,d,p={}){this._checkLoaded();const x=this.getLayer(r);x?h.aD(x.getLayoutProperty(l),d)||(x.setLayoutProperty(l,d,p),this._updateLayer(x)):this.fire(new h.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){const d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new h.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,p={}){this._checkLoaded();const x=this.getLayer(r);x?h.aD(x.getPaintProperty(l),d)||(x.setPaintProperty(l,d,p)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new h.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();const d=r.source,p=r.sourceLayer,x=this.sourceCaches[d];if(x===void 0)return void this.fire(new h.j(new Error(`The source '${d}' does not exist in the map's style.`)));const w=x.getSource().type;w==="geojson"&&p?this.fire(new h.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(r.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(p,r.id,l)):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();const d=r.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new h.j(new Error(`The source '${d}' does not exist in the map's style.`)));const x=p.getSource().type,w=x==="vector"?r.sourceLayer:void 0;x!=="vector"||w?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new h.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,r.id,l):this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const l=r.source,d=r.sourceLayer,p=this.sourceCaches[l];if(p!==void 0)return p.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new h.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,r.id)):void this.fire(new h.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new h.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return h.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=h.aE(this.sourceCaches,x=>x.serialize()),l=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,p=this.stylesheet;return h.aF({version:p.version,name:p.name,metadata:p.metadata,light:p.light,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:r,layers:l,terrain:d},x=>x!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const l=w=>this._layers[w].type==="fill-extrusion",d={},p=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(l(E)){d[E]=w;for(const I of r){const A=I[E];if(A)for(const F of A)p.push(F)}}}p.sort((w,E)=>E.intersectionZ-w.intersectionZ);const x=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(l(E))for(let I=p.length-1;I>=0;I--){const A=p[I].feature;if(d[A.layer.id]<w)break;x.push(A),p.pop()}else for(const I of r){const A=I[E];if(A)for(const F of A)x.push(F.feature)}}return x}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(h.x.filter,"queryRenderedFeatures.filter",l.filter,null,l);const p={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new h.j(new Error("parameters.layers must be an Array."))),[];for(const E of l.layers){const I=this._layers[E];if(!I)return this.fire(new h.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];p[I.source]=!0}}const x=[];l.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const E in this.sourceCaches)l.layers&&!p[E]||x.push(ar(this.sourceCaches[E],this._layers,w,r,l,d));return this.placement&&x.push(function(E,I,A,F,B,q,ee){const te={},oe=q.queryRenderedSymbols(F),J=[];for(const pe of Object.keys(oe).map(Number))J.push(ee[pe]);J.sort(sr);for(const pe of J){const Ce=pe.featureIndex.lookupSymbolFeatures(oe[pe.bucketInstanceId],I,pe.bucketIndex,pe.sourceLayerIndex,B.filter,B.layers,B.availableImages,E);for(const se in Ce){const ve=te[se]=te[se]||[],Ee=Ce[se];Ee.sort((Te,ke)=>{const Ge=pe.featureSortOrder;if(Ge){const Ue=Ge.indexOf(Te.featureIndex);return Ge.indexOf(ke.featureIndex)-Ue}return ke.featureIndex-Te.featureIndex});for(const Te of Ee)ve.push(Te)}}for(const pe in te)te[pe].forEach(Ce=>{const se=Ce.feature,ve=A[E[pe].source].getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=ve});return te}(this._layers,w,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(r,l){l&&l.filter&&this._validate(h.x.filter,"querySourceFeatures.filter",l.filter,null,l);const d=this.sourceCaches[r];return d?function(p,x){const w=p.getRenderableIds().map(A=>p.getTileByID(A)),E=[],I={};for(let A=0;A<w.length;A++){const F=w[A],B=F.tileID.canonical.key;I[B]||(I[B]=!0,F.querySourceFeatures(E,x))}return E}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const w in r)if(!h.aD(r[w],d[w])){p=!0;break}if(!p)return;const x={now:z.now(),transition:h.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(x)}_validate(r,l,d,p,x={}){return(!x||x.validate!==!1)&&la(this,r.call(h.x,h.e({key:l,style:this.serialize(),value:d,styleSpec:h.v},p)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),br().off(xn,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,p,x=!1){let w=!1,E=!1;const I={};for(const A of this._order){const F=this._layers[A];if(F.type!=="symbol")continue;if(!I[F.source]){const q=this.sourceCaches[F.source];I[F.source]=q.getRenderableIds(!0).map(ee=>q.getTileByID(ee)).sort((ee,te)=>te.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(te.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(F,I[F.source],r.center.lng);w=w||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z.now(),r.zoom))&&(this.pauseablePlacement=new Yd(r,this.map.terrain,this._order,x,l,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const A of this._order){const F=this._layers[A];F.type==="symbol"&&this.placement.updateLayerOpacities(F,I[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return h._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return h._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(l.stacks),p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(h.x.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},p){this._checkLoaded();const x=[{id:r,url:l}],w=[...Re(this.stylesheet.sprite),...x];this._validate(h.x.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(x,!0,p))}removeSprite(r){this._checkLoaded();const l=Re(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(const d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new h.k("data",{dataType:"style"}))}else this.fire(new h.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(h.x.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var eo=h.X([{name:"a_pos",type:"Int16",components:2}]),bu="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Va={prelude:tn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:tn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:tn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:tn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:tn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:tn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:tn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:tn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:tn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",bu),terrainDepth:tn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",bu),terrainCoords:tn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",bu)};function tn(y,r){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/attribute ([\w]+) ([\w]+)/g),p=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=x?x.concat(p):p,E={};return{fragmentSource:y=y.replace(l,(I,A,F,B,q)=>(E[q]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
varying ${F} ${B} ${q};
#else
uniform ${F} ${B} u_${q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${q}
    ${F} ${B} ${q} = u_${q};
#endif
`)),vertexSource:r=r.replace(l,(I,A,F,B,q)=>{const ee=B==="float"?"vec2":"vec4",te=q.match(/color/)?"color":ee;return E[q]?A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${F} ${ee} a_${q};
varying ${F} ${B} ${q};
#else
uniform ${F} ${B} u_${q};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = a_${q};
#else
    ${F} ${B} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${q} = unpack_mix_${te}(a_${q}, u_${q}_t);
#else
    ${F} ${B} ${q} = u_${q};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${q}
uniform lowp float u_${q}_t;
attribute ${F} ${ee} a_${q};
#else
uniform ${F} ${B} u_${q};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${q}
    ${F} ${B} ${q} = a_${q};
#else
    ${F} ${B} ${q} = u_${q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${q}
    ${F} ${B} ${q} = unpack_mix_${te}(a_${q}, u_${q}_t);
#else
    ${F} ${B} ${q} = u_${q};
#endif
`}),staticAttributes:d,staticUniforms:w}}class Wl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,p,x,w,E,I,A){this.context=r;let F=this.boundPaintVertexBuffers.length!==p.length;for(let B=0;!F&&B<p.length;B++)this.boundPaintVertexBuffers[B]!==p[B]&&(F=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||F||this.boundIndexBuffer!==x||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==A?this.freshBind(l,d,p,x,w,E,I,A):(r.bindVertexArray.set(this.vao),E&&E.bind(),x&&x.dynamicDraw&&x.bind(),I&&I.bind(),A&&A.bind())}freshBind(r,l,d,p,x,w,E,I){const A=r.numAttributes,F=this.context,B=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=I,l.enableAttributes(B,r);for(const q of d)q.enableAttributes(B,r);w&&w.enableAttributes(B,r),E&&E.enableAttributes(B,r),I&&I.enableAttributes(B,r),l.bind(),l.setVertexAttribPointers(B,r,x);for(const q of d)q.bind(),q.setVertexAttribPointers(B,r,x);w&&(w.bind(),w.setVertexAttribPointers(B,r,x)),p&&p.bind(),E&&(E.bind(),E.setVertexAttribPointers(B,r,x)),I&&(I.bind(),I.setVertexAttribPointers(B,r,x)),F.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Ua(y){const r=[];for(let l=0;l<y.length;l++){if(y[l]===null)continue;const d=y[l].split(" ");r.push(d.pop())}return r}class wu{constructor(r,l,d,p,x,w){const E=r.gl;this.program=E.createProgram();const I=Ua(l.staticAttributes),A=d?d.getBinderAttributes():[],F=I.concat(A),B=Va.prelude.staticUniforms?Ua(Va.prelude.staticUniforms):[],q=l.staticUniforms?Ua(l.staticUniforms):[],ee=d?d.getBinderUniforms():[],te=B.concat(q).concat(ee),oe=[];for(const Te of te)oe.indexOf(Te)<0&&oe.push(Te);const J=d?d.defines():[];x&&J.push("#define OVERDRAW_INSPECTOR;"),w&&J.push("#define TERRAIN3D;");const pe=J.concat(Va.prelude.fragmentSource,l.fragmentSource).join(`
`),Ce=J.concat(Va.prelude.vertexSource,l.vertexSource).join(`
`),se=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(se,pe),E.compileShader(se),!E.getShaderParameter(se,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(se)}`);E.attachShader(this.program,se);const ve=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ve,Ce),E.compileShader(ve),!E.getShaderParameter(ve,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(ve)}`);E.attachShader(this.program,ve),this.attributes={};const Ee={};this.numAttributes=F.length;for(let Te=0;Te<this.numAttributes;Te++)F[Te]&&(E.bindAttribLocation(this.program,Te,F[Te]),this.attributes[F[Te]]=Te);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(ve),E.deleteShader(se);for(let Te=0;Te<oe.length;Te++){const ke=oe[Te];if(ke&&!Ee[ke]){const Ge=E.getUniformLocation(this.program,ke);Ge&&(Ee[ke]=Ge)}}this.fixedUniforms=p(r,Ee),this.terrainUniforms=((Te,ke)=>({u_depth:new h.aG(Te,ke.u_depth),u_terrain:new h.aG(Te,ke.u_terrain),u_terrain_dim:new h.aH(Te,ke.u_terrain_dim),u_terrain_matrix:new h.aI(Te,ke.u_terrain_matrix),u_terrain_unpack:new h.aJ(Te,ke.u_terrain_unpack),u_terrain_exaggeration:new h.aH(Te,ke.u_terrain_exaggeration)}))(r,Ee),this.binderUniforms=d?d.getUniforms(r,Ee):[]}draw(r,l,d,p,x,w,E,I,A,F,B,q,ee,te,oe,J,pe,Ce){const se=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(p),r.setColorMode(x),r.setCullFace(w),I){r.activeTexture.set(se.TEXTURE2),se.bindTexture(se.TEXTURE_2D,I.depthTexture),r.activeTexture.set(se.TEXTURE3),se.bindTexture(se.TEXTURE_2D,I.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(I[Ee])}for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(E[Ee]);oe&&oe.setUniforms(r,this.binderUniforms,ee,{zoom:te});let ve=0;switch(l){case se.LINES:ve=2;break;case se.TRIANGLES:ve=3;break;case se.LINE_STRIP:ve=1}for(const Ee of q.get()){const Te=Ee.vaos||(Ee.vaos={});(Te[A]||(Te[A]=new Wl)).bind(r,this,F,oe?oe.getPaintVertexBuffers():[],B,Ee.vertexOffset,J,pe,Ce),se.drawElements(l,Ee.primitiveLength*ve,se.UNSIGNED_SHORT,Ee.primitiveOffset*ve*2)}}}function ql(y,r,l){const d=1/Et(l,1,r.transform.tileZoom),p=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,r.transform.tileZoom)/p,w=x*(l.tileID.canonical.x+l.tileID.wrap*p),E=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[w>>16,E>>16],u_pixel_coord_lower:[65535&w,65535&E]}}const Bs=(y,r,l,d)=>{const p=r.style.light,x=p.properties.get("position"),w=[x.x,x.y,x.z],E=function(){var A=new h.A(9);return h.A!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}();p.properties.get("anchor")==="viewport"&&function(A,F){var B=Math.sin(F),q=Math.cos(F);A[0]=q,A[1]=B,A[2]=0,A[3]=-B,A[4]=q,A[5]=0,A[6]=0,A[7]=0,A[8]=1}(E,-r.transform.angle),function(A,F,B){var q=F[0],ee=F[1],te=F[2];A[0]=q*B[0]+ee*B[3]+te*B[6],A[1]=q*B[1]+ee*B[4]+te*B[7],A[2]=q*B[2]+ee*B[5]+te*B[8]}(w,w,E);const I=p.properties.get("color");return{u_matrix:y,u_lightpos:w,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+l,u_opacity:d}},Su=(y,r,l,d,p,x,w)=>h.e(Bs(y,r,l,d),ql(x,r,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),Gl=y=>({u_matrix:y}),Ns=(y,r,l,d)=>h.e(Gl(y),ql(l,r,d)),Zl=(y,r)=>({u_matrix:y,u_world:r}),js=(y,r,l,d,p)=>h.e(Ns(y,r,l,d),{u_world:p}),bg=(y,r,l,d)=>{const p=y.transform;let x,w;if(d.paint.get("circle-pitch-alignment")==="map"){const E=Et(l,1,p.zoom);x=!0,w=[E,E]}else x=!1,w=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(r.posMatrix,l,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:w}},wg=(y,r,l)=>{const d=Et(l,1,r.zoom),p=Math.pow(2,r.zoom-l.tileID.overscaledZ),x=l.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:r.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[r.pixelsToGLUnits[0]/(d*p),r.pixelsToGLUnits[1]/(d*p)],u_overscale_factor:x}},Cu=(y,r,l=1)=>({u_matrix:y,u_color:r,u_overlay:0,u_overlay_scale:l}),Jd=y=>({u_matrix:y}),ca=(y,r,l,d)=>({u_matrix:y,u_extrude_scale:Et(r,1,l),u_intensity:d});function Kl(y,r){const l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new h.Y(0,d/l).toLngLat().lat,new h.Y(0,(d+1)/l).toLngLat().lat]}const Dr=(y,r,l,d)=>{const p=y.transform;return{u_matrix:Pu(y,r,l,d),u_ratio:1/Et(r,1,p.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},oi=(y,r,l,d,p)=>h.e(Dr(y,r,l,p),{u_image:0,u_image_height:d}),Eu=(y,r,l,d,p)=>{const x=y.transform,w=Tu(r,x);return{u_matrix:Pu(y,r,l,p),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Et(r,1,x.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Xl=(y,r,l,d,p,x)=>{const w=y.lineAtlas,E=Tu(r,y.transform),I=l.layout.get("line-cap")==="round",A=w.getDash(d.from,I),F=w.getDash(d.to,I),B=A.width*p.fromScale,q=F.width*p.toScale;return h.e(Dr(y,r,l,x),{u_patternscale_a:[E/B,-A.height/2],u_patternscale_b:[E/q,-F.height/2],u_sdfgamma:w.width/(256*Math.min(B,q)*y.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:F.y,u_mix:p.t})};function Tu(y,r){return 1/Et(y,1,r.tileZoom)}function Pu(y,r,l,d){return y.translatePosMatrix(d?d.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Ha=(y,r,l,d,p)=>{return{u_matrix:y,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(x=p.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Sg(p.paint.get("raster-hue-rotate"))};var x,w};function Sg(y){y*=Math.PI/180;const r=Math.sin(y),l=Math.cos(y);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}const Qd=(y,r,l,d,p,x,w,E,I,A)=>{const F=p.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:F.width/F.height,u_fade_change:p.options.fadeDuration?p.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:w,u_coord_matrix:E,u_is_text:+I,u_pitch_with_map:+d,u_texsize:A,u_texture:0}},ef=(y,r,l,d,p,x,w,E,I,A,F)=>{const B=p.transform;return h.e(Qd(y,r,l,d,p,x,w,E,I,A),{u_gamma_scale:d?Math.cos(B._pitch)*B.cameraToCenterDistance:1,u_device_pixel_ratio:p.pixelRatio,u_is_halo:+F})},Cg=(y,r,l,d,p,x,w,E,I,A)=>h.e(ef(y,r,l,d,p,x,w,E,!0,I,!0),{u_texsize_icon:A,u_texture_icon:1}),Eg=(y,r,l)=>({u_matrix:y,u_opacity:r,u_color:l}),Tg=(y,r,l,d,p,x)=>h.e(function(w,E,I,A){const F=I.imageManager.getPattern(w.from.toString()),B=I.imageManager.getPattern(w.to.toString()),{width:q,height:ee}=I.imageManager.getPixelSize(),te=Math.pow(2,A.tileID.overscaledZ),oe=A.tileSize*Math.pow(2,I.transform.tileZoom)/te,J=oe*(A.tileID.canonical.x+A.tileID.wrap*te),pe=oe*A.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[q,ee],u_mix:E.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Et(A,1,I.transform.tileZoom),u_pixel_coord_upper:[J>>16,pe>>16],u_pixel_coord_lower:[65535&J,65535&pe]}}(d,x,l,p),{u_matrix:y,u_opacity:r}),Yl={fillExtrusion:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_lightpos:new h.aK(y,r.u_lightpos),u_lightintensity:new h.aH(y,r.u_lightintensity),u_lightcolor:new h.aK(y,r.u_lightcolor),u_vertical_gradient:new h.aH(y,r.u_vertical_gradient),u_opacity:new h.aH(y,r.u_opacity)}),fillExtrusionPattern:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_lightpos:new h.aK(y,r.u_lightpos),u_lightintensity:new h.aH(y,r.u_lightintensity),u_lightcolor:new h.aK(y,r.u_lightcolor),u_vertical_gradient:new h.aH(y,r.u_vertical_gradient),u_height_factor:new h.aH(y,r.u_height_factor),u_image:new h.aG(y,r.u_image),u_texsize:new h.aL(y,r.u_texsize),u_pixel_coord_upper:new h.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new h.aL(y,r.u_pixel_coord_lower),u_scale:new h.aK(y,r.u_scale),u_fade:new h.aH(y,r.u_fade),u_opacity:new h.aH(y,r.u_opacity)}),fill:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix)}),fillPattern:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_image:new h.aG(y,r.u_image),u_texsize:new h.aL(y,r.u_texsize),u_pixel_coord_upper:new h.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new h.aL(y,r.u_pixel_coord_lower),u_scale:new h.aK(y,r.u_scale),u_fade:new h.aH(y,r.u_fade)}),fillOutline:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_world:new h.aL(y,r.u_world)}),fillOutlinePattern:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_world:new h.aL(y,r.u_world),u_image:new h.aG(y,r.u_image),u_texsize:new h.aL(y,r.u_texsize),u_pixel_coord_upper:new h.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new h.aL(y,r.u_pixel_coord_lower),u_scale:new h.aK(y,r.u_scale),u_fade:new h.aH(y,r.u_fade)}),circle:(y,r)=>({u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_scale_with_map:new h.aG(y,r.u_scale_with_map),u_pitch_with_map:new h.aG(y,r.u_pitch_with_map),u_extrude_scale:new h.aL(y,r.u_extrude_scale),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_matrix:new h.aI(y,r.u_matrix)}),collisionBox:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_pixels_to_tile_units:new h.aH(y,r.u_pixels_to_tile_units),u_extrude_scale:new h.aL(y,r.u_extrude_scale),u_overscale_factor:new h.aH(y,r.u_overscale_factor)}),collisionCircle:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_inv_matrix:new h.aI(y,r.u_inv_matrix),u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_viewport_size:new h.aL(y,r.u_viewport_size)}),debug:(y,r)=>({u_color:new h.aM(y,r.u_color),u_matrix:new h.aI(y,r.u_matrix),u_overlay:new h.aG(y,r.u_overlay),u_overlay_scale:new h.aH(y,r.u_overlay_scale)}),clippingMask:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix)}),heatmap:(y,r)=>({u_extrude_scale:new h.aH(y,r.u_extrude_scale),u_intensity:new h.aH(y,r.u_intensity),u_matrix:new h.aI(y,r.u_matrix)}),heatmapTexture:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_world:new h.aL(y,r.u_world),u_image:new h.aG(y,r.u_image),u_color_ramp:new h.aG(y,r.u_color_ramp),u_opacity:new h.aH(y,r.u_opacity)}),hillshade:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_image:new h.aG(y,r.u_image),u_latrange:new h.aL(y,r.u_latrange),u_light:new h.aL(y,r.u_light),u_shadow:new h.aM(y,r.u_shadow),u_highlight:new h.aM(y,r.u_highlight),u_accent:new h.aM(y,r.u_accent)}),hillshadePrepare:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_image:new h.aG(y,r.u_image),u_dimension:new h.aL(y,r.u_dimension),u_zoom:new h.aH(y,r.u_zoom),u_unpack:new h.aJ(y,r.u_unpack)}),line:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_ratio:new h.aH(y,r.u_ratio),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new h.aL(y,r.u_units_to_pixels)}),lineGradient:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_ratio:new h.aH(y,r.u_ratio),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new h.aL(y,r.u_units_to_pixels),u_image:new h.aG(y,r.u_image),u_image_height:new h.aH(y,r.u_image_height)}),linePattern:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_texsize:new h.aL(y,r.u_texsize),u_ratio:new h.aH(y,r.u_ratio),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_image:new h.aG(y,r.u_image),u_units_to_pixels:new h.aL(y,r.u_units_to_pixels),u_scale:new h.aK(y,r.u_scale),u_fade:new h.aH(y,r.u_fade)}),lineSDF:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_ratio:new h.aH(y,r.u_ratio),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_units_to_pixels:new h.aL(y,r.u_units_to_pixels),u_patternscale_a:new h.aL(y,r.u_patternscale_a),u_patternscale_b:new h.aL(y,r.u_patternscale_b),u_sdfgamma:new h.aH(y,r.u_sdfgamma),u_image:new h.aG(y,r.u_image),u_tex_y_a:new h.aH(y,r.u_tex_y_a),u_tex_y_b:new h.aH(y,r.u_tex_y_b),u_mix:new h.aH(y,r.u_mix)}),raster:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_tl_parent:new h.aL(y,r.u_tl_parent),u_scale_parent:new h.aH(y,r.u_scale_parent),u_buffer_scale:new h.aH(y,r.u_buffer_scale),u_fade_t:new h.aH(y,r.u_fade_t),u_opacity:new h.aH(y,r.u_opacity),u_image0:new h.aG(y,r.u_image0),u_image1:new h.aG(y,r.u_image1),u_brightness_low:new h.aH(y,r.u_brightness_low),u_brightness_high:new h.aH(y,r.u_brightness_high),u_saturation_factor:new h.aH(y,r.u_saturation_factor),u_contrast_factor:new h.aH(y,r.u_contrast_factor),u_spin_weights:new h.aK(y,r.u_spin_weights)}),symbolIcon:(y,r)=>({u_is_size_zoom_constant:new h.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aG(y,r.u_is_size_feature_constant),u_size_t:new h.aH(y,r.u_size_t),u_size:new h.aH(y,r.u_size),u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_pitch:new h.aH(y,r.u_pitch),u_rotate_symbol:new h.aG(y,r.u_rotate_symbol),u_aspect_ratio:new h.aH(y,r.u_aspect_ratio),u_fade_change:new h.aH(y,r.u_fade_change),u_matrix:new h.aI(y,r.u_matrix),u_label_plane_matrix:new h.aI(y,r.u_label_plane_matrix),u_coord_matrix:new h.aI(y,r.u_coord_matrix),u_is_text:new h.aG(y,r.u_is_text),u_pitch_with_map:new h.aG(y,r.u_pitch_with_map),u_texsize:new h.aL(y,r.u_texsize),u_texture:new h.aG(y,r.u_texture)}),symbolSDF:(y,r)=>({u_is_size_zoom_constant:new h.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aG(y,r.u_is_size_feature_constant),u_size_t:new h.aH(y,r.u_size_t),u_size:new h.aH(y,r.u_size),u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_pitch:new h.aH(y,r.u_pitch),u_rotate_symbol:new h.aG(y,r.u_rotate_symbol),u_aspect_ratio:new h.aH(y,r.u_aspect_ratio),u_fade_change:new h.aH(y,r.u_fade_change),u_matrix:new h.aI(y,r.u_matrix),u_label_plane_matrix:new h.aI(y,r.u_label_plane_matrix),u_coord_matrix:new h.aI(y,r.u_coord_matrix),u_is_text:new h.aG(y,r.u_is_text),u_pitch_with_map:new h.aG(y,r.u_pitch_with_map),u_texsize:new h.aL(y,r.u_texsize),u_texture:new h.aG(y,r.u_texture),u_gamma_scale:new h.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_is_halo:new h.aG(y,r.u_is_halo)}),symbolTextAndIcon:(y,r)=>({u_is_size_zoom_constant:new h.aG(y,r.u_is_size_zoom_constant),u_is_size_feature_constant:new h.aG(y,r.u_is_size_feature_constant),u_size_t:new h.aH(y,r.u_size_t),u_size:new h.aH(y,r.u_size),u_camera_to_center_distance:new h.aH(y,r.u_camera_to_center_distance),u_pitch:new h.aH(y,r.u_pitch),u_rotate_symbol:new h.aG(y,r.u_rotate_symbol),u_aspect_ratio:new h.aH(y,r.u_aspect_ratio),u_fade_change:new h.aH(y,r.u_fade_change),u_matrix:new h.aI(y,r.u_matrix),u_label_plane_matrix:new h.aI(y,r.u_label_plane_matrix),u_coord_matrix:new h.aI(y,r.u_coord_matrix),u_is_text:new h.aG(y,r.u_is_text),u_pitch_with_map:new h.aG(y,r.u_pitch_with_map),u_texsize:new h.aL(y,r.u_texsize),u_texsize_icon:new h.aL(y,r.u_texsize_icon),u_texture:new h.aG(y,r.u_texture),u_texture_icon:new h.aG(y,r.u_texture_icon),u_gamma_scale:new h.aH(y,r.u_gamma_scale),u_device_pixel_ratio:new h.aH(y,r.u_device_pixel_ratio),u_is_halo:new h.aG(y,r.u_is_halo)}),background:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_opacity:new h.aH(y,r.u_opacity),u_color:new h.aM(y,r.u_color)}),backgroundPattern:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_opacity:new h.aH(y,r.u_opacity),u_image:new h.aG(y,r.u_image),u_pattern_tl_a:new h.aL(y,r.u_pattern_tl_a),u_pattern_br_a:new h.aL(y,r.u_pattern_br_a),u_pattern_tl_b:new h.aL(y,r.u_pattern_tl_b),u_pattern_br_b:new h.aL(y,r.u_pattern_br_b),u_texsize:new h.aL(y,r.u_texsize),u_mix:new h.aH(y,r.u_mix),u_pattern_size_a:new h.aL(y,r.u_pattern_size_a),u_pattern_size_b:new h.aL(y,r.u_pattern_size_b),u_scale_a:new h.aH(y,r.u_scale_a),u_scale_b:new h.aH(y,r.u_scale_b),u_pixel_coord_upper:new h.aL(y,r.u_pixel_coord_upper),u_pixel_coord_lower:new h.aL(y,r.u_pixel_coord_lower),u_tile_units_to_pixels:new h.aH(y,r.u_tile_units_to_pixels)}),terrain:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_texture:new h.aG(y,r.u_texture),u_ele_delta:new h.aH(y,r.u_ele_delta)}),terrainDepth:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_ele_delta:new h.aH(y,r.u_ele_delta)}),terrainCoords:(y,r)=>({u_matrix:new h.aI(y,r.u_matrix),u_texture:new h.aG(y,r.u_texture),u_terrain_coords_id:new h.aH(y,r.u_terrain_coords_id),u_ele_delta:new h.aH(y,r.u_ele_delta)})};class Iu{constructor(r,l,d){this.context=r;const p=r.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ku{constructor(r,l,d,p){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=p,this.context=r;const x=r.gl;this.buffer=x.createBuffer(),r.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){const p=l.attributes[this.attributes[d].name];p!==void 0&&r.enableVertexAttribArray(p)}}setVertexAttribPointers(r,l,d){for(let p=0;p<this.attributes.length;p++){const x=this.attributes[p],w=l.attributes[x.name];w!==void 0&&r.vertexAttribPointer(w,x.components,r[Jl[x.type]],!1,this.itemSize,x.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const $s=new WeakMap;function ai(y){var r;if($s.has(y))return $s.get(y);{const l=(r=y.getParameter(y.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return $s.set(y,l),l}}class nn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Mu extends nn{getDefault(){return h.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Vs extends nn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class Us extends nn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Pg extends nn{getDefault(){return[!0,!0,!0,!0]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ql extends nn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Ig extends nn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Wa extends nn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class kg extends nn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class tf extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class Mg extends nn{getDefault(){return[0,1]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class nf extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class Au extends nn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class rf extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class of extends nn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class af extends nn{getDefault(){return h.aO.transparent}set(r){const l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class sf extends nn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class ua extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class lf extends nn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Ag extends nn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class zg extends nn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class cf extends nn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Hs extends nn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Rg extends nn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class ec extends nn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Lg extends nn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Fg extends nn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class uf extends nn{getDefault(){return null}set(r){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class hf extends nn{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;const d=this.gl;ai(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class df extends nn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class zu extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class ff extends nn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class qa extends nn{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class bo extends qa{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Ru extends qa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Lu extends qa{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Fu{constructor(r,l,d,p,x){this.context=r,this.width=l,this.height=d;const w=r.gl,E=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new bo(r,E),p)this.depthAttachment=x?new Lu(r,E):new Ru(r,E);else if(x)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){const d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class An{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}An.Replace=[1,0],An.disabled=new An(An.Replace,h.aO.transparent,[!1,!1,!1,!1]),An.unblended=new An(An.Replace,h.aO.transparent,[!0,!0,!0,!0]),An.alphaBlended=new An([1,771],h.aO.transparent,[!0,!0,!0,!0]);class Du{constructor(r){var l,d;if(this.gl=r,this.clearColor=new Mu(this),this.clearDepth=new Vs(this),this.clearStencil=new Us(this),this.colorMask=new Pg(this),this.depthMask=new Ql(this),this.stencilMask=new Ig(this),this.stencilFunc=new Wa(this),this.stencilOp=new kg(this),this.stencilTest=new tf(this),this.depthRange=new Mg(this),this.depthTest=new nf(this),this.depthFunc=new Au(this),this.blend=new rf(this),this.blendFunc=new of(this),this.blendColor=new af(this),this.blendEquation=new sf(this),this.cullFace=new ua(this),this.cullFaceSide=new lf(this),this.frontFace=new Ag(this),this.program=new zg(this),this.activeTexture=new cf(this),this.viewport=new Hs(this),this.bindFramebuffer=new Rg(this),this.bindRenderbuffer=new ec(this),this.bindTexture=new Lg(this),this.bindVertexBuffer=new Fg(this),this.bindElementBuffer=new uf(this),this.bindVertexArray=new hf(this),this.pixelStoreUnpack=new df(this),this.pixelStoreUnpackPremultiplyAlpha=new zu(this),this.pixelStoreUnpackFlipY=new ff(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),ai(r)){this.HALF_FLOAT=r.HALF_FLOAT;const p=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const p=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new Iu(this,r,l)}createVertexBuffer(r,l,d){return new ku(this,r,l,d)}createRenderbuffer(r,l,d){const p=this.gl,x=p.createRenderbuffer();return this.bindRenderbuffer.set(x),p.renderbufferStorage(p.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),x}createFramebuffer(r,l,d,p){return new Fu(this,r,l,d,p)}clear({color:r,depth:l,stencil:d}){const p=this.gl;let x=0;r&&(x|=p.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(x|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(x|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(x)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){h.aD(r.blendFunction,An.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return ai(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return ai(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class $t{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}$t.ReadOnly=!1,$t.ReadWrite=!0,$t.disabled=new $t(519,$t.ReadOnly,[0,1]);const Ws=7680;class wn{constructor(r,l,d,p,x,w){this.test=r,this.ref=l,this.mask=d,this.fail=p,this.depthFail=x,this.pass=w}}wn.disabled=new wn({func:519,mask:0},0,0,Ws,Ws,Ws);class gn{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}let tc;function pf(y,r,l,d,p,x,w){const E=y.context,I=E.gl,A=y.useProgram("collisionBox"),F=[];let B=0,q=0;for(let se=0;se<d.length;se++){const ve=d[se],Ee=r.getTile(ve),Te=Ee.getBucket(l);if(!Te)continue;let ke=ve.posMatrix;p[0]===0&&p[1]===0||(ke=y.translatePosMatrix(ve.posMatrix,Ee,p,x));const Ge=w?Te.textCollisionBox:Te.iconCollisionBox,Ue=Te.collisionCircleArray;if(Ue.length>0){const Ye=h.F(),ct=ke;h.aP(Ye,Te.placementInvProjMatrix,y.transform.glCoordMatrix),h.aP(Ye,Ye,Te.placementViewportMatrix),F.push({circleArray:Ue,circleOffset:q,transform:ct,invTransform:Ye,coord:ve}),B+=Ue.length/4,q=B}Ge&&A.draw(E,I.LINES,$t.disabled,wn.disabled,y.colorModeForRenderPass(),gn.disabled,wg(ke,y.transform,Ee),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),l.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,null,y.transform.zoom,null,null,Ge.collisionVertexBuffer)}if(!w||!F.length)return;const ee=y.useProgram("collisionCircle"),te=new h.aQ;te.resize(4*B),te._trim();let oe=0;for(const se of F)for(let ve=0;ve<se.circleArray.length/4;ve++){const Ee=4*ve,Te=se.circleArray[Ee+0],ke=se.circleArray[Ee+1],Ge=se.circleArray[Ee+2],Ue=se.circleArray[Ee+3];te.emplace(oe++,Te,ke,Ge,Ue,0),te.emplace(oe++,Te,ke,Ge,Ue,1),te.emplace(oe++,Te,ke,Ge,Ue,2),te.emplace(oe++,Te,ke,Ge,Ue,3)}(!tc||tc.length<2*B)&&(tc=function(se){const ve=2*se,Ee=new h.aS;Ee.resize(ve),Ee._trim();for(let Te=0;Te<ve;Te++){const ke=6*Te;Ee.uint16[ke+0]=4*Te+0,Ee.uint16[ke+1]=4*Te+1,Ee.uint16[ke+2]=4*Te+2,Ee.uint16[ke+3]=4*Te+2,Ee.uint16[ke+4]=4*Te+3,Ee.uint16[ke+5]=4*Te+0}return Ee}(B));const J=E.createIndexBuffer(tc,!0),pe=E.createVertexBuffer(te,h.aR.members,!0);for(const se of F){const ve={u_matrix:se.transform,u_inv_matrix:se.invTransform,u_camera_to_center_distance:(Ce=y.transform).cameraToCenterDistance,u_viewport_size:[Ce.width,Ce.height]};ee.draw(E,I.TRIANGLES,$t.disabled,wn.disabled,y.colorModeForRenderPass(),gn.disabled,ve,y.style.map.terrain&&y.style.map.terrain.getTerrainData(se.coord),l.id,pe,J,h.$.simpleSegment(0,2*se.circleOffset,se.circleArray.length,se.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ce;pe.destroy(),J.destroy()}gn.disabled=new gn(!1,1029,2305),gn.backCCW=new gn(!0,1029,2305);const mf=h.an(new Float32Array(16));function Dg(y,r,l,d,p,x){const{horizontalAlign:w,verticalAlign:E}=h.at(y);return new h.P((-(w-.5)*r/p+d[0])*x,(-(E-.5)*l/p+d[1])*x)}function gf(y,r,l,d,p,x,w,E,I,A,F){const B=y.text.placedSymbolArray,q=y.text.dynamicLayoutVertexArray,ee=y.icon.dynamicLayoutVertexArray,te={};q.clear();for(let oe=0;oe<B.length;oe++){const J=B.get(oe),pe=J.hidden||!J.crossTileID||y.allowVerticalPlacement&&!J.placedOrientation?null:d[J.crossTileID];if(pe){const Ce=new h.P(J.anchorX,J.anchorY),se=In(Ce,l?w:x,F),ve=re(p.cameraToCenterDistance,se.signedDistanceFromCamera);let Ee=h.ai(y.textSizeData,I,J)*ve/h.ao;l&&(Ee*=y.tilePixelRatio/E);const{width:Te,height:ke,anchor:Ge,textOffset:Ue,textBoxScale:Ye}=pe,ct=Dg(Ge,Te,ke,Ue,Ye,Ee),Mt=l?In(Ce.add(ct),x,F).point:se.point.add(r?ct.rotate(-p.angle):ct),et=y.allowVerticalPlacement&&J.placedOrientation===h.ah.vertical?Math.PI/2:0;for(let bt=0;bt<J.numGlyphs;bt++)h.aj(q,Mt,et);A&&J.associatedIconIndex>=0&&(te[J.associatedIconIndex]={shiftedAnchor:Mt,angle:et})}else Ae(J.numGlyphs,q)}if(A){ee.clear();const oe=y.icon.placedSymbolArray;for(let J=0;J<oe.length;J++){const pe=oe.get(J);if(pe.hidden)Ae(pe.numGlyphs,ee);else{const Ce=te[J];if(Ce)for(let se=0;se<pe.numGlyphs;se++)h.aj(ee,Ce.shiftedAnchor,Ce.angle);else Ae(pe.numGlyphs,ee)}}y.icon.dynamicLayoutVertexBuffer.updateData(ee)}y.text.dynamicLayoutVertexBuffer.updateData(q)}function nc(y,r,l){return l.iconsInText&&r?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function qs(y,r,l,d,p,x,w,E,I,A,F,B){const q=y.context,ee=q.gl,te=y.transform,oe=E==="map",J=I==="map",pe=E!=="viewport"&&l.layout.get("symbol-placement")!=="point",Ce=oe&&!J&&!pe,se=!l.layout.get("symbol-sort-key").isConstant();let ve=!1;const Ee=y.depthModeForSublayer(0,$t.ReadOnly),Te=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ke=[];for(const Ge of d){const Ue=r.getTile(Ge),Ye=Ue.getBucket(l);if(!Ye)continue;const ct=p?Ye.text:Ye.icon;if(!ct||!ct.segments.get().length||!ct.hasVisibleVertices)continue;const Mt=ct.programConfigurations.get(l.id),et=p||Ye.sdfIcons,bt=p?Ye.textSizeData:Ye.iconSizeData,At=J||te.pitch!==0,Wt=y.useProgram(nc(et,p,Ye),Mt),St=h.ag(bt,te.zoom),Rt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ge);let jt,zn,un,li,cr=[0,0],Rn=null;if(p)zn=Ue.glyphAtlasTexture,un=ee.LINEAR,jt=Ue.glyphAtlasTexture.size,Ye.iconsInText&&(cr=Ue.imageAtlasTexture.size,Rn=Ue.imageAtlasTexture,li=At||y.options.rotating||y.options.zooming||bt.kind==="composite"||bt.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const Qn=l.layout.get("icon-size").constantOr(0)!==1||Ye.iconsNeedLinear;zn=Ue.imageAtlasTexture,un=et||y.options.rotating||y.options.zooming||Qn||At?ee.LINEAR:ee.NEAREST,jt=Ue.imageAtlasTexture.size}const Kr=Et(Ue,1,y.transform.zoom),Li=Fr(Ge.posMatrix,J,oe,y.transform,Kr),oo=vi(Ge.posMatrix,J,oe,y.transform,Kr),Xo=Te&&Ye.hasTextData(),Qa=l.layout.get("icon-text-fit")!=="none"&&Xo&&Ye.hasIconData();if(pe){const Qn=y.style.map.terrain?(wi,er)=>y.style.map.terrain.getElevation(Ge,wi,er):null,En=l.layout.get("text-rotation-alignment")==="map";V(Ye,Ge.posMatrix,y,p,Li,oo,J,A,En,Qn)}const va=y.translatePosMatrix(Ge.posMatrix,Ue,x,w),_a=pe||p&&Te||Qa?mf:Li,Or=y.translatePosMatrix(oo,Ue,x,w,!0),Tr=et&&l.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Br;Br=et?Ye.iconsInText?Cg(bt.kind,St,Ce,J,y,va,_a,Or,jt,cr):ef(bt.kind,St,Ce,J,y,va,_a,Or,p,jt,!0):Qd(bt.kind,St,Ce,J,y,va,_a,Or,p,jt);const ol={program:Wt,buffers:ct,uniformValues:Br,atlasTexture:zn,atlasTextureIcon:Rn,atlasInterpolation:un,atlasInterpolationIcon:li,isSDF:et,hasHalo:Tr};if(se&&Ye.canOverlap){ve=!0;const Qn=ct.segments.get();for(const En of Qn)ke.push({segments:new h.$([En]),sortKey:En.sortKey,state:ol,terrainData:Rt})}else ke.push({segments:ct.segments,sortKey:0,state:ol,terrainData:Rt})}ve&&ke.sort((Ge,Ue)=>Ge.sortKey-Ue.sortKey);for(const Ge of ke){const Ue=Ge.state;if(q.activeTexture.set(ee.TEXTURE0),Ue.atlasTexture.bind(Ue.atlasInterpolation,ee.CLAMP_TO_EDGE),Ue.atlasTextureIcon&&(q.activeTexture.set(ee.TEXTURE1),Ue.atlasTextureIcon&&Ue.atlasTextureIcon.bind(Ue.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Ue.isSDF){const Ye=Ue.uniformValues;Ue.hasHalo&&(Ye.u_is_halo=1,Gs(Ue.buffers,Ge.segments,l,y,Ue.program,Ee,F,B,Ye,Ge.terrainData)),Ye.u_is_halo=0}Gs(Ue.buffers,Ge.segments,l,y,Ue.program,Ee,F,B,Ue.uniformValues,Ge.terrainData)}}function Gs(y,r,l,d,p,x,w,E,I,A){const F=d.context;p.draw(F,F.gl.TRIANGLES,x,w,E,gn.disabled,I,A,l.id,y.layoutVertexBuffer,y.indexBuffer,r,l.paint,d.transform.zoom,y.programConfigurations.get(l.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function rc(y,r,l,d,p){if(!l||!d||!d.imageAtlas)return;const x=d.imageAtlas.patternPositions;let w=x[l.to.toString()],E=x[l.from.toString()];if(!w&&E&&(w=E),!E&&w&&(E=w),!w||!E){const I=p.getPaintProperty(r);w=x[I],E=x[I]}w&&E&&y.setConstantPatternPositions(w,E)}function Uo(y,r,l,d,p,x,w){const E=y.context.gl,I="fill-pattern",A=l.paint.get(I),F=A&&A.constantOr(1),B=l.getCrossfadeParameters();let q,ee,te,oe,J;w?(ee=F&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=E.LINES):(ee=F?"fillPattern":"fill",q=E.TRIANGLES);const pe=A.constantOr(null);for(const Ce of d){const se=r.getTile(Ce);if(F&&!se.patternsLoaded())continue;const ve=se.getBucket(l);if(!ve)continue;const Ee=ve.programConfigurations.get(l.id),Te=y.useProgram(ee,Ee),ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ce);F&&(y.context.activeTexture.set(E.TEXTURE0),se.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Ee.updatePaintBuffers(B)),rc(Ee,I,pe,se,l);const Ge=ke?Ce:null,Ue=y.translatePosMatrix(Ge?Ge.posMatrix:Ce.posMatrix,se,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(w){oe=ve.indexBuffer2,J=ve.segments2;const Ye=[E.drawingBufferWidth,E.drawingBufferHeight];te=ee==="fillOutlinePattern"&&F?js(Ue,y,B,se,Ye):Zl(Ue,Ye)}else oe=ve.indexBuffer,J=ve.segments,te=F?Ns(Ue,y,B,se):Gl(Ue);Te.draw(y.context,q,p,y.stencilModeForClipping(Ce),x,gn.disabled,te,ke,l.id,ve.layoutVertexBuffer,oe,J,l.paint,y.transform.zoom,Ee)}}function Ho(y,r,l,d,p,x,w){const E=y.context,I=E.gl,A="fill-extrusion-pattern",F=l.paint.get(A),B=F.constantOr(1),q=l.getCrossfadeParameters(),ee=l.paint.get("fill-extrusion-opacity"),te=F.constantOr(null);for(const oe of d){const J=r.getTile(oe),pe=J.getBucket(l);if(!pe)continue;const Ce=y.style.map.terrain&&y.style.map.terrain.getTerrainData(oe),se=pe.programConfigurations.get(l.id),ve=y.useProgram(B?"fillExtrusionPattern":"fillExtrusion",se);B&&(y.context.activeTexture.set(I.TEXTURE0),J.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),se.updatePaintBuffers(q)),rc(se,A,te,J,l);const Ee=y.translatePosMatrix(oe.posMatrix,J,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Te=l.paint.get("fill-extrusion-vertical-gradient"),ke=B?Su(Ee,y,Te,ee,oe,q,J):Bs(Ee,y,Te,ee);ve.draw(E,E.gl.TRIANGLES,p,x,w,gn.backCCW,ke,Ce,l.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,l.paint,y.transform.zoom,se,y.style.map.terrain&&pe.centroidVertexBuffer)}}function bi(y,r,l,d,p,x,w){const E=y.context,I=E.gl,A=l.fbo;if(!A)return;const F=y.useProgram("hillshade"),B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(r);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,A.colorAttachment.get()),F.draw(E,I.TRIANGLES,p,x,w,gn.disabled,((q,ee,te,oe)=>{const J=te.paint.get("hillshade-shadow-color"),pe=te.paint.get("hillshade-highlight-color"),Ce=te.paint.get("hillshade-accent-color");let se=te.paint.get("hillshade-illumination-direction")*(Math.PI/180);te.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=q.transform.angle);const ve=!q.options.moving;return{u_matrix:oe?oe.posMatrix:q.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),ve),u_image:0,u_latrange:Kl(0,ee.tileID),u_light:[te.paint.get("hillshade-exaggeration"),se],u_shadow:J,u_highlight:pe,u_accent:Ce}})(y,l,d,B?r:null),B,d.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function yf(y,r,l,d,p,x){const w=y.context,E=w.gl,I=r.dem;if(I&&I.data){const A=I.dim,F=I.stride,B=I.getPixels();if(w.activeTexture.set(E.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||y.getTileTexture(F),r.demTexture){const ee=r.demTexture;ee.update(B,{premultiply:!1}),ee.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else r.demTexture=new He(w,B,E.RGBA,{premultiply:!1}),r.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);w.activeTexture.set(E.TEXTURE0);let q=r.fbo;if(!q){const ee=new He(w,{width:A,height:A,data:null},E.RGBA);ee.bind(E.LINEAR,E.CLAMP_TO_EDGE),q=r.fbo=w.createFramebuffer(A,A,!0,!1),q.colorAttachment.set(ee.texture)}w.bindFramebuffer.set(q.framebuffer),w.viewport.set([0,0,A,A]),y.useProgram("hillshadePrepare").draw(w,E.TRIANGLES,d,p,x,gn.disabled,((ee,te)=>{const oe=te.stride,J=h.F();return h.aN(J,0,h.W,-h.W,0,0,1),h.H(J,J,[0,-h.W,0]),{u_matrix:J,u_image:1,u_dimension:[oe,oe],u_zoom:ee.overscaledZ,u_unpack:te.getUnpackVector()}})(r.tileID,I),null,l.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function vf(y,r,l,d,p,x){const w=d.paint.get("raster-fade-duration");if(!x&&w>0){const E=z.now(),I=(E-y.timeAdded)/w,A=r?(E-r.timeAdded)/w:-1,F=l.getSource(),B=p.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),q=!r||Math.abs(r.tileID.overscaledZ-B)>Math.abs(y.tileID.overscaledZ-B),ee=q&&y.refreshedUponExpiration?1:h.ac(q?I:1-A,0,1);return y.refreshedUponExpiration&&I>=1&&(y.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Ou=new h.aO(1,0,0,1),ha=new h.aO(0,1,0,1),ic=new h.aO(0,0,1,1),oc=new h.aO(1,0,1,1),Zs=new h.aO(0,1,1,1);function Ks(y,r,l,d){wo(y,0,r+l/2,y.transform.width,l,d)}function Bu(y,r,l,d){wo(y,r-l/2,0,l,y.transform.height,d)}function wo(y,r,l,d,p,x){const w=y.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(r*y.pixelRatio,l*y.pixelRatio,d*y.pixelRatio,p*y.pixelRatio),w.clear({color:x}),E.disable(E.SCISSOR_TEST)}function Ga(y,r,l){const d=y.context,p=d.gl,x=l.posMatrix,w=y.useProgram("debug"),E=$t.disabled,I=wn.disabled,A=y.colorModeForRenderPass(),F="$debug",B=y.style.map.terrain&&y.style.map.terrain.getTerrainData(l);d.activeTexture.set(p.TEXTURE0);const q=r.getTileByID(l.key).latestRawTileData,ee=Math.floor((q&&q.byteLength||0)/1024),te=r.getTile(l).tileSize,oe=512/Math.min(te,512)*(l.overscaledZ/y.transform.zoom)*.5;let J=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(J+=` => ${l.overscaledZ}`),function(pe,Ce){pe.initDebugOverlayCanvas();const se=pe.debugOverlayCanvas,ve=pe.context.gl,Ee=pe.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,se.width,se.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(Ce,5,5),Ee.strokeText(Ce,5,5),pe.debugOverlayTexture.update(se),pe.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(y,`${J} ${ee}kB`),w.draw(d,p.TRIANGLES,E,I,An.alphaBlended,gn.disabled,Cu(x,h.aO.transparent,oe),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),w.draw(d,p.LINE_STRIP,E,I,A,gn.disabled,Cu(x,h.aO.red),B,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Nu(y,r,l){const d=y.context,p=d.gl,x=y.colorModeForRenderPass(),w=new $t(p.LEQUAL,$t.ReadWrite,y.depthRangeFor3D),E=y.useProgram("terrain"),I=r.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,y.width,y.height]);for(const A of l){const F=y.renderToTexture.getTexture(A),B=r.getTerrainData(A.tileID);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,F.texture);const q={u_matrix:y.transform.calculatePosMatrix(A.tileID.toUnwrapped()),u_texture:0,u_ele_delta:r.getMeshFrameDelta(y.transform.zoom)};E.draw(d,p.TRIANGLES,w,wn.disabled,x,gn.backCCW,q,B,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class ju{constructor(r,l){this.context=new Du(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:h.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Je.maxUnderzooming+Je.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mn}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const r=this.context,l=new h.aV;l.emplaceBack(0,0),l.emplaceBack(h.W,0),l.emplaceBack(0,h.W),l.emplaceBack(h.W,h.W),this.tileExtentBuffer=r.createVertexBuffer(l,eo.members),this.tileExtentSegments=h.$.simpleSegment(0,0,4,2);const d=new h.aV;d.emplaceBack(0,0),d.emplaceBack(h.W,0),d.emplaceBack(0,h.W),d.emplaceBack(h.W,h.W),this.debugBuffer=r.createVertexBuffer(d,eo.members),this.debugSegments=h.$.simpleSegment(0,0,4,5);const p=new h.Z;p.emplaceBack(0,0,0,0),p.emplaceBack(h.W,0,h.W,0),p.emplaceBack(0,h.W,0,h.W),p.emplaceBack(h.W,h.W,h.W,h.W),this.rasterBoundsBuffer=r.createVertexBuffer(p,Ot.members),this.rasterBoundsSegments=h.$.simpleSegment(0,0,4,2);const x=new h.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,eo.members),this.viewportSegments=h.$.simpleSegment(0,0,4,2);const w=new h.aW;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);const E=new h.aX;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E);const I=this.context.gl;this.stencilClearMode=new wn({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=h.F();h.aN(d,0,this.width,this.height,0,0,1),h.J(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,$t.disabled,this.stencilClearMode,An.disabled,gn.disabled,Jd(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;const d=this.context,p=d.gl;this.nextStencilID+l.length>256&&this.clearStencil(),d.setColorMode(An.disabled),d.setDepthMode($t.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of l){const E=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);x.draw(d,p.TRIANGLES,$t.disabled,new wn({func:p.ALWAYS,mask:0},E,255,p.KEEP,p.KEEP,p.REPLACE),An.disabled,gn.disabled,Jd(w.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,l=this.context.gl;return new wn({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){const l=this.context.gl;return new wn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){const l=this.context.gl,d=r.sort((w,E)=>E.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,x=d[0].overscaledZ-p+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const w={};for(let E=0;E<x;E++)w[E+p]=new wn({func:l.GEQUAL,mask:255},E+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=x,[w,d]}return[{[p]:wn.disabled},d]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new An([r.CONSTANT_COLOR,r.ONE],new h.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?An.unblended:An.alphaBlended}depthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return $t.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new $t(d||this.context.gl.LEQUAL,l,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(z.now()),this.imageManager.beginFrame();const d=this.style._order,p=this.style.sourceCaches,x={},w={},E={};for(const I in p){const A=p[I];A.used&&A.prepare(this.context),x[I]=A.getVisibleCoordinates(),w[I]=x[I].slice().reverse(),E[I]=A.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<d.length;I++)if(this.style._layers[d[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const I of d){const A=this.style._layers[I];if(!A.hasOffscreenPass()||A.isHidden(this.transform.zoom))continue;const F=w[A.source];(A.type==="custom"||F.length)&&this.renderLayer(this,p[A.source],A,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?h.aO.black:h.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[d[this.currentLayer]],A=p[I.source],F=x[I.source];this._renderTileClippingMasks(I,F),this.renderLayer(this,A,I,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const I=this.style._layers[d[this.currentLayer]],A=p[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const F=(I.type==="symbol"?E:w)[I.source];this._renderTileClippingMasks(I,x[I.source]),this.renderLayer(this,A,I,F)}if(this.options.showTileBoundaries){const I=function(A,F){let B=null;const q=Object.values(A._layers).flatMap(J=>J.source&&!J.isHidden(F)?[A.sourceCaches[J.source]]:[]),ee=q.filter(J=>J.getSource().type==="vector"),te=q.filter(J=>J.getSource().type!=="vector"),oe=J=>{(!B||B.getSource().maxzoom<J.getSource().maxzoom)&&(B=J)};return ee.forEach(J=>oe(J)),B||te.forEach(J=>oe(J)),B}(this.style,this.transform.zoom);I&&function(A,F,B){for(let q=0;q<B.length;q++)Ga(A,F,B[q])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const A=I.transform.padding;Ks(I,I.transform.height-(A.top||0),3,Ou),Ks(I,A.bottom||0,3,ha),Bu(I,A.left||0,3,ic),Bu(I,I.transform.width-(A.right||0),3,oc);const F=I.transform.centerPoint;(function(B,q,ee,te){wo(B,q-1,ee-10,2,20,te),wo(B,q-10,ee-1,20,2,te)})(I,F.x,I.transform.height-F.y,Zs)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,d=this.transform.projMatrix;let p=this.terrainFacilitator.dirty;p||(p=r?!h.aY(l,d):!h.aZ(l,d)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(h.a_(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,w){const E=x.context,I=E.gl,A=An.unblended,F=new $t(I.LEQUAL,$t.ReadWrite,[0,1]),B=w.getTerrainMesh(),q=w.sourceCache.getRenderableTiles(),ee=x.useProgram("terrainDepth");E.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),E.clear({color:h.aO.transparent,depth:1});for(const te of q){const oe=w.getTerrainData(te.tileID),J={u_matrix:x.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(x.transform.zoom)};ee.draw(E,I.TRIANGLES,F,wn.disabled,A,gn.backCCW,J,oe,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,w){const E=x.context,I=E.gl,A=An.unblended,F=new $t(I.LEQUAL,$t.ReadWrite,[0,1]),B=w.getTerrainMesh(),q=w.getCoordsTexture(),ee=w.sourceCache.getRenderableTiles(),te=x.useProgram("terrainCoords");E.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),E.clear({color:h.aO.transparent,depth:1}),w.coordsIndex=[];for(const oe of ee){const J=w.getTerrainData(oe.tileID);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,q.texture);const pe={u_matrix:x.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(x.transform.zoom)};te.draw(E,I.TRIANGLES,F,wn.disabled,A,gn.backCCW,pe,J,"terrain",B.vertexBuffer,B.indexBuffer,B.segments),w.coordsIndex.push(oe.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,p){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(p||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(x,w,E,I,A){if(x.renderPass!=="translucent")return;const F=wn.disabled,B=x.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(q,ee,te,oe,J,pe,Ce){const se=ee.transform,ve=J==="map",Ee=pe==="map";for(const Te of q){const ke=oe.getTile(Te),Ge=ke.getBucket(te);if(!Ge||!Ge.text||!Ge.text.segments.get().length)continue;const Ue=h.ag(Ge.textSizeData,se.zoom),Ye=Et(ke,1,ee.transform.zoom),ct=Fr(Te.posMatrix,Ee,ve,ee.transform,Ye),Mt=te.layout.get("icon-text-fit")!=="none"&&Ge.hasIconData();if(Ue){const et=Math.pow(2,se.zoom-ke.tileID.overscaledZ);gf(Ge,ve,Ee,Ce,se,ct,Te.posMatrix,et,Ue,Mt,ee.style.map.terrain?(bt,At)=>ee.style.map.terrain.getElevation(Te,bt,At):null)}}}(I,x,E,w,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),A),E.paint.get("icon-opacity").constantOr(1)!==0&&qs(x,w,E,I,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),F,B),E.paint.get("text-opacity").constantOr(1)!==0&&qs(x,w,E,I,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),F,B),w.map.showCollisionBoxes&&(pf(x,w,E,I,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),!0),pf(x,w,E,I,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),!1))})(r,l,d,p,this.style.placement.variableOffsets);break;case"circle":(function(x,w,E,I){if(x.renderPass!=="translucent")return;const A=E.paint.get("circle-opacity"),F=E.paint.get("circle-stroke-width"),B=E.paint.get("circle-stroke-opacity"),q=!E.layout.get("circle-sort-key").isConstant();if(A.constantOr(1)===0&&(F.constantOr(1)===0||B.constantOr(1)===0))return;const ee=x.context,te=ee.gl,oe=x.depthModeForSublayer(0,$t.ReadOnly),J=wn.disabled,pe=x.colorModeForRenderPass(),Ce=[];for(let se=0;se<I.length;se++){const ve=I[se],Ee=w.getTile(ve),Te=Ee.getBucket(E);if(!Te)continue;const ke=Te.programConfigurations.get(E.id),Ge=x.useProgram("circle",ke),Ue=Te.layoutVertexBuffer,Ye=Te.indexBuffer,ct=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ve),Mt={programConfiguration:ke,program:Ge,layoutVertexBuffer:Ue,indexBuffer:Ye,uniformValues:bg(x,ve,Ee,E),terrainData:ct};if(q){const et=Te.segments.get();for(const bt of et)Ce.push({segments:new h.$([bt]),sortKey:bt.sortKey,state:Mt})}else Ce.push({segments:Te.segments,sortKey:0,state:Mt})}q&&Ce.sort((se,ve)=>se.sortKey-ve.sortKey);for(const se of Ce){const{programConfiguration:ve,program:Ee,layoutVertexBuffer:Te,indexBuffer:ke,uniformValues:Ge,terrainData:Ue}=se.state;Ee.draw(ee,te.TRIANGLES,oe,J,pe,gn.disabled,Ge,Ue,E.id,Te,ke,se.segments,E.paint,x.transform.zoom,ve)}})(r,l,d,p);break;case"heatmap":(function(x,w,E,I){if(E.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const A=x.context,F=A.gl,B=wn.disabled,q=new An([F.ONE,F.ONE],h.aO.transparent,[!0,!0,!0,!0]);(function(ee,te,oe){const J=ee.gl;ee.activeTexture.set(J.TEXTURE1),ee.viewport.set([0,0,te.width/4,te.height/4]);let pe=oe.heatmapFbo;if(pe)J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),ee.bindFramebuffer.set(pe.framebuffer);else{const Ce=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ce),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),pe=oe.heatmapFbo=ee.createFramebuffer(te.width/4,te.height/4,!1,!1),function(se,ve,Ee,Te){var ke,Ge;const Ue=se.gl,Ye=(ke=se.HALF_FLOAT)!==null&&ke!==void 0?ke:Ue.UNSIGNED_BYTE,ct=(Ge=se.RGBA16F)!==null&&Ge!==void 0?Ge:Ue.RGBA;Ue.texImage2D(Ue.TEXTURE_2D,0,ct,ve.width/4,ve.height/4,0,Ue.RGBA,Ye,null),Te.colorAttachment.set(Ee)}(ee,te,Ce,pe)}})(A,x,E),A.clear({color:h.aO.transparent});for(let ee=0;ee<I.length;ee++){const te=I[ee];if(w.hasRenderableParent(te))continue;const oe=w.getTile(te),J=oe.getBucket(E);if(!J)continue;const pe=J.programConfigurations.get(E.id),Ce=x.useProgram("heatmap",pe),{zoom:se}=x.transform;Ce.draw(A,F.TRIANGLES,$t.disabled,B,q,gn.disabled,ca(te.posMatrix,oe,se,E.paint.get("heatmap-intensity")),null,E.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,E.paint,x.transform.zoom,pe)}A.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(A,F){const B=A.context,q=B.gl,ee=F.heatmapFbo;if(!ee)return;B.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,ee.colorAttachment.get()),B.activeTexture.set(q.TEXTURE1);let te=F.colorRampTexture;te||(te=F.colorRampTexture=new He(B,F.colorRamp,q.RGBA)),te.bind(q.LINEAR,q.CLAMP_TO_EDGE),A.useProgram("heatmapTexture").draw(B,q.TRIANGLES,$t.disabled,wn.disabled,A.colorModeForRenderPass(),gn.disabled,((oe,J,pe,Ce)=>{const se=h.F();h.aN(se,0,oe.width,oe.height,0,0,1);const ve=oe.context.gl;return{u_matrix:se,u_world:[ve.drawingBufferWidth,ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}})(A,F),null,F.id,A.viewportBuffer,A.quadTriangleIndexBuffer,A.viewportSegments,F.paint,A.transform.zoom)}(x,E))})(r,l,d,p);break;case"line":(function(x,w,E,I){if(x.renderPass!=="translucent")return;const A=E.paint.get("line-opacity"),F=E.paint.get("line-width");if(A.constantOr(1)===0||F.constantOr(1)===0)return;const B=x.depthModeForSublayer(0,$t.ReadOnly),q=x.colorModeForRenderPass(),ee=E.paint.get("line-dasharray"),te=E.paint.get("line-pattern"),oe=te.constantOr(1),J=E.paint.get("line-gradient"),pe=E.getCrossfadeParameters(),Ce=oe?"linePattern":ee?"lineSDF":J?"lineGradient":"line",se=x.context,ve=se.gl;let Ee=!0;for(const Te of I){const ke=w.getTile(Te);if(oe&&!ke.patternsLoaded())continue;const Ge=ke.getBucket(E);if(!Ge)continue;const Ue=Ge.programConfigurations.get(E.id),Ye=x.context.program.get(),ct=x.useProgram(Ce,Ue),Mt=Ee||ct.program!==Ye,et=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Te),bt=te.constantOr(null);if(bt&&ke.imageAtlas){const St=ke.imageAtlas,Rt=St.patternPositions[bt.to.toString()],jt=St.patternPositions[bt.from.toString()];Rt&&jt&&Ue.setConstantPatternPositions(Rt,jt)}const At=et?Te:null,Wt=oe?Eu(x,ke,E,pe,At):ee?Xl(x,ke,E,ee,pe,At):J?oi(x,ke,E,Ge.lineClipsArray.length,At):Dr(x,ke,E,At);if(oe)se.activeTexture.set(ve.TEXTURE0),ke.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Ue.updatePaintBuffers(pe);else if(ee&&(Mt||x.lineAtlas.dirty))se.activeTexture.set(ve.TEXTURE0),x.lineAtlas.bind(se);else if(J){const St=Ge.gradients[E.id];let Rt=St.texture;if(E.gradientVersion!==St.version){let jt=256;if(E.stepInterpolant){const zn=w.getSource().maxzoom,un=Te.canonical.z===zn?Math.ceil(1<<x.transform.maxZoom-Te.canonical.z):1;jt=h.ac(h.aT(Ge.maxLineLength/h.W*1024*un),256,se.maxTextureSize)}St.gradient=h.aU({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:jt,image:St.gradient||void 0,clips:Ge.lineClipsArray}),St.texture?St.texture.update(St.gradient):St.texture=new He(se,St.gradient,ve.RGBA),St.version=E.gradientVersion,Rt=St.texture}se.activeTexture.set(ve.TEXTURE0),Rt.bind(E.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}ct.draw(se,ve.TRIANGLES,B,x.stencilModeForClipping(Te),q,gn.disabled,Wt,et,E.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,E.paint,x.transform.zoom,Ue,Ge.layoutVertexBuffer2),Ee=!1}})(r,l,d,p);break;case"fill":(function(x,w,E,I){const A=E.paint.get("fill-color"),F=E.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const B=x.colorModeForRenderPass(),q=E.paint.get("fill-pattern"),ee=x.opaquePassEnabledForLayer()&&!q.constantOr(1)&&A.constantOr(h.aO.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===ee){const te=x.depthModeForSublayer(1,x.renderPass==="opaque"?$t.ReadWrite:$t.ReadOnly);Uo(x,w,E,I,te,B,!1)}if(x.renderPass==="translucent"&&E.paint.get("fill-antialias")){const te=x.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,$t.ReadOnly);Uo(x,w,E,I,te,B,!0)}})(r,l,d,p);break;case"fill-extrusion":(function(x,w,E,I){const A=E.paint.get("fill-extrusion-opacity");if(A!==0&&x.renderPass==="translucent"){const F=new $t(x.context.gl.LEQUAL,$t.ReadWrite,x.depthRangeFor3D);if(A!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))Ho(x,w,E,I,F,wn.disabled,An.disabled),Ho(x,w,E,I,F,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const B=x.colorModeForRenderPass();Ho(x,w,E,I,F,wn.disabled,B)}}})(r,l,d,p);break;case"hillshade":(function(x,w,E,I){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const A=x.context,F=x.depthModeForSublayer(0,$t.ReadOnly),B=x.colorModeForRenderPass(),[q,ee]=x.renderPass==="translucent"?x.stencilConfigForOverlap(I):[{},I];for(const te of ee){const oe=w.getTile(te);oe.needsHillshadePrepare!==void 0&&oe.needsHillshadePrepare&&x.renderPass==="offscreen"?yf(x,oe,E,F,wn.disabled,B):x.renderPass==="translucent"&&bi(x,te,oe,E,F,q[te.overscaledZ],B)}A.viewport.set([0,0,x.width,x.height])})(r,l,d,p);break;case"raster":(function(x,w,E,I){if(x.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!I.length)return;const A=x.context,F=A.gl,B=w.getSource(),q=x.useProgram("raster"),ee=x.colorModeForRenderPass(),[te,oe]=B instanceof _n?[{},I]:x.stencilConfigForOverlap(I),J=oe[oe.length-1].overscaledZ,pe=!x.options.moving;for(const Ce of oe){const se=x.depthModeForSublayer(Ce.overscaledZ-J,E.paint.get("raster-opacity")===1?$t.ReadWrite:$t.ReadOnly,F.LESS),ve=w.getTile(Ce);ve.registerFadeDuration(E.paint.get("raster-fade-duration"));const Ee=w.findLoadedParent(Ce,0),Te=vf(ve,Ee,w,E,x.transform,x.style.map.terrain);let ke,Ge;const Ue=E.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;A.activeTexture.set(F.TEXTURE0),ve.texture.bind(Ue,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),A.activeTexture.set(F.TEXTURE1),Ee?(Ee.texture.bind(Ue,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),ke=Math.pow(2,Ee.tileID.overscaledZ-ve.tileID.overscaledZ),Ge=[ve.tileID.canonical.x*ke%1,ve.tileID.canonical.y*ke%1]):ve.texture.bind(Ue,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const Ye=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ce),ct=Ye?Ce:null,Mt=ct?ct.posMatrix:x.transform.calculatePosMatrix(Ce.toUnwrapped(),pe),et=Ha(Mt,Ge||[0,0],ke||1,Te,E);B instanceof _n?q.draw(A,F.TRIANGLES,se,wn.disabled,ee,gn.disabled,et,Ye,E.id,B.boundsBuffer,x.quadTriangleIndexBuffer,B.boundsSegments):q.draw(A,F.TRIANGLES,se,te[Ce.overscaledZ],ee,gn.disabled,et,Ye,E.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(r,l,d,p);break;case"background":(function(x,w,E,I){const A=E.paint.get("background-color"),F=E.paint.get("background-opacity");if(F===0)return;const B=x.context,q=B.gl,ee=x.transform,te=ee.tileSize,oe=E.paint.get("background-pattern");if(x.isPatternMissing(oe))return;const J=!oe&&A.a===1&&F===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==J)return;const pe=wn.disabled,Ce=x.depthModeForSublayer(0,J==="opaque"?$t.ReadWrite:$t.ReadOnly),se=x.colorModeForRenderPass(),ve=x.useProgram(oe?"backgroundPattern":"background"),Ee=I||ee.coveringTiles({tileSize:te,terrain:x.style.map.terrain});oe&&(B.activeTexture.set(q.TEXTURE0),x.imageManager.bind(x.context));const Te=E.getCrossfadeParameters();for(const ke of Ee){const Ge=I?ke.posMatrix:x.transform.calculatePosMatrix(ke.toUnwrapped()),Ue=oe?Tg(Ge,F,x,oe,{tileID:ke,tileSize:te},Te):Eg(Ge,F,A),Ye=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ke);ve.draw(B,q.TRIANGLES,Ce,pe,se,gn.disabled,Ue,Ye,E.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(r,0,d,p);break;case"custom":(function(x,w,E){const I=x.context,A=E.implementation;if(x.renderPass==="offscreen"){const F=A.prerender;F&&(x.setCustomLayerDefaults(),I.setColorMode(x.colorModeForRenderPass()),F.call(A,I.gl,x.transform.customLayerMatrix()),I.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),I.setColorMode(x.colorModeForRenderPass()),I.setStencilMode(wn.disabled);const F=A.renderingMode==="3d"?new $t(x.context.gl.LEQUAL,$t.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,$t.ReadOnly);I.setDepthMode(F),A.render(I.gl,x.transform.customLayerMatrix()),I.setDirty(),x.setBaseState(),I.bindFramebuffer.set(null)}})(r,0,d)}}translatePosMatrix(r,l,d,p,x){if(!d[0]&&!d[1])return r;const w=x?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(w){const A=Math.sin(w),F=Math.cos(w);d=[d[0]*F-d[1]*A,d[0]*A+d[1]*F]}const E=[x?d[0]:Et(l,d[0],this.transform.zoom),x?d[1]:Et(l,d[1],this.transform.zoom),0],I=new Float32Array(16);return h.H(I,r,E),I}saveTileTexture(r){const l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l){this.cache=this.cache||{};const d=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new wu(this.context,Va[r],l,Yl[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new He(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class Xt{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,d){const p=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const I=1/(E=h.af([],E,r))[3]/l*p;return h.a$(E,E,[I,I,1/E[3],I])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const I=function(q,ee){var te=ee[0],oe=ee[1],J=ee[2],pe=te*te+oe*oe+J*J;return pe>0&&(pe=1/Math.sqrt(pe)),q[0]=ee[0]*pe,q[1]=ee[1]*pe,q[2]=ee[2]*pe,q}([],function(q,ee,te){var oe=ee[0],J=ee[1],pe=ee[2],Ce=te[0],se=te[1],ve=te[2];return q[0]=J*ve-pe*se,q[1]=pe*Ce-oe*ve,q[2]=oe*se-J*Ce,q}([],Me([],x[E[0]],x[E[1]]),Me([],x[E[2]],x[E[1]]))),A=-((F=I)[0]*(B=x[E[1]])[0]+F[1]*B[1]+F[2]*B[2]);var F,B;return I.concat(A)});return new Xt(x,w)}}class da{constructor(r,l){this.min=r,this.max=l,this.center=function(d,p,x){return d[0]=.5*p[0],d[1]=.5*p[1],d[2]=.5*p[2],d}([],function(d,p,x){return d[0]=p[0]+x[0],d[1]=p[1]+x[1],d[2]=p[2]+x[2],d}([],this.min,this.max))}quadrant(r){const l=[r%2==0,r<2],d=ge(this.min),p=ge(this.max);for(let x=0;x<l.length;x++)d[x]=l[x]?this.min[x]:this.center[x],p[x]=l[x]?this.center[x]:this.max[x];return p[2]=this.max[2],new da(d,p)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let p=0;p<r.planes.length;p++){const x=r.planes[p];let w=0;for(let E=0;E<l.length;E++)h.b0(x,l[E])>=0&&w++;if(w===0)return 0;w!==l.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let x=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let E=0;E<r.points.length;E++){const I=r.points[E][p]-this.min[p];x=Math.min(x,I),w=Math.max(w,I)}if(w<0||x>this.max[p]-this.min[p])return 0}return 1}}class ac{constructor(r=0,l=0,d=0,p=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=p}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=h.z.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=h.z.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=h.z.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=h.z.number(r.right,l.right,d)),this}getCenter(r,l){const d=h.ac((this.left+r-this.right)/2,0,r),p=h.ac((this.top+l-this.bottom)/2,0,l);return new h.P(d,p)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new ac(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const $u=85.051129;class fa{constructor(r,l,d,p,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=d??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new h.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ac,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new fa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new h.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const l=-h.b1(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var d=new h.A(4);return h.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,p,x){var w=p[0],E=p[1],I=p[2],A=p[3],F=Math.sin(x),B=Math.cos(x);d[0]=w*B+I*F,d[1]=E*B+A*F,d[2]=w*-F+I*B,d[3]=E*-F+A*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const l=h.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){const l=[new h.b2(0,r)];if(this._renderWorldCopies){const d=this.pointCoordinate(new h.P(0,0)),p=this.pointCoordinate(new h.P(this.width,0)),x=this.pointCoordinate(new h.P(this.width,this.height)),w=this.pointCoordinate(new h.P(0,this.height)),E=Math.floor(Math.min(d.x,p.x,x.x,w.x)),I=Math.floor(Math.max(d.x,p.x,x.x,w.x)),A=1;for(let F=E-A;F<=I+A;F++)F!==0&&l.push(new h.b2(F,r))}return l}coveringTiles(r){var l,d;let p=this.coveringZoomLevel(r);const x=p;if(r.minzoom!==void 0&&p<r.minzoom)return[];r.maxzoom!==void 0&&p>r.maxzoom&&(p=r.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),E=h.Y.fromLngLat(this.center),I=Math.pow(2,p),A=[I*w.x,I*w.y,0],F=[I*E.x,I*E.y,0],B=Xt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p);let q=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(q=p);const ee=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,te=se=>({aabb:new da([se*I,0,0],[(se+1)*I,I,0]),zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),oe=[],J=[],pe=p,Ce=r.reparseOverscaled?x:p;if(this._renderWorldCopies)for(let se=1;se<=3;se++)oe.push(te(-se)),oe.push(te(se));for(oe.push(te(0));oe.length>0;){const se=oe.pop(),ve=se.x,Ee=se.y;let Te=se.fullyVisible;if(!Te){const ct=se.aabb.intersects(B);if(ct===0)continue;Te=ct===2}const ke=r.terrain?A:F,Ge=se.aabb.distanceX(ke),Ue=se.aabb.distanceY(ke),Ye=Math.max(Math.abs(Ge),Math.abs(Ue));if(se.zoom===pe||Ye>ee+(1<<pe-se.zoom)-2&&se.zoom>=q){const ct=pe-se.zoom,Mt=A[0]-.5-(ve<<ct),et=A[1]-.5-(Ee<<ct);J.push({tileID:new h.Q(se.zoom===pe?Ce:se.zoom,se.wrap,se.zoom,ve,Ee),distanceSq:Be([F[0]-.5-ve,F[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(Mt*Mt+et*et)})}else for(let ct=0;ct<4;ct++){const Mt=(ve<<1)+ct%2,et=(Ee<<1)+(ct>>1),bt=se.zoom+1;let At=se.aabb.quadrant(ct);if(r.terrain){const Wt=new h.Q(bt,se.wrap,bt,Mt,et),St=r.terrain.getMinMaxElevation(Wt),Rt=(l=St.minElevation)!==null&&l!==void 0?l:this.elevation,jt=(d=St.maxElevation)!==null&&d!==void 0?d:this.elevation;At=new da([At.min[0],At.min[1],Rt],[At.max[0],At.max[1],jt])}oe.push({aabb:At,zoom:bt,x:Mt,y:et,wrap:se.wrap,fullyVisible:Te})}}return J.sort((se,ve)=>se.distanceSq-ve.distanceSq).map(se=>se.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const l=h.ac(r.lat,-85.051129,$u);return new h.P(h.N(r.lng)*this.worldSize,h.O(l)*this.worldSize)}unproject(r){return new h.Y(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const l=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,r),x=r.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-x))return;const w=d+l-x,E=Math.cos(this._pitch)*this.cameraToCenterDistance/w/h.b3(1,p.lat),I=this.scaleZoom(E/this.tileSize);this._elevation=x,this._center=p,this.zoom=I}setLocationAtPoint(r,l){const d=this.pointCoordinate(l),p=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(r),w=new h.Y(x.x-(d.x-p.x),x.y-(d.y-p.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return h.Y.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){const q=l.pointCoordinate(r);if(q!=null)return q}const d=[r.x,r.y,0,1],p=[r.x,r.y,1,1];h.af(d,d,this.pixelMatrixInverse),h.af(p,p,this.pixelMatrixInverse);const x=d[3],w=p[3],E=d[1]/x,I=p[1]/w,A=d[2]/x,F=p[2]/w,B=A===F?0:(0-A)/(F-A);return new h.Y(h.z.number(d[0]/x,p[0]/w,B)/this.worldSize,h.z.number(E,I,B)/this.worldSize)}coordinatePoint(r,l=0,d=this.pixelMatrix){const p=[r.x*this.worldSize,r.y*this.worldSize,l,1];return h.af(p,p,d),new h.P(p[0]/p[3],p[1]/p[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new rn().extend(this.pointLocation(new h.P(0,r))).extend(this.pointLocation(new h.P(this.width,r))).extend(this.pointLocation(new h.P(this.width,this.height))).extend(this.pointLocation(new h.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new rn([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,$u])}calculatePosMatrix(r,l=!1){const d=r.key,p=l?this._alignedPosMatrixCache:this._posMatrixCache;if(p[d])return p[d];const x=r.canonical,w=this.worldSize/this.zoomScale(x.z),E=x.x+Math.pow(2,x.z)*r.wrap,I=h.an(new Float64Array(16));return h.H(I,I,[E*w,x.y*w,0]),h.J(I,I,[w/h.W,w/h.W,1]),h.K(I,l?this.alignedProjMatrix:this.projMatrix,I),p[d]=new Float32Array(I),p[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=h.ac(+l,this.minZoom,this.maxZoom);const d={center:new h.M(r.lng,r.lat),zoom:l};let p=this.lngRange;if(!this._renderWorldCopies&&p===null){const se=179.9999999999;p=[-se,se]}const x=this.tileSize*this.zoomScale(d.zoom);let w=0,E=x,I=0,A=x,F=0,B=0;const{x:q,y:ee}=this.size;if(this.latRange){const se=this.latRange;w=h.O(se[1])*x,E=h.O(se[0])*x,E-w<ee&&(F=ee/(E-w))}p&&(I=h.b1(h.N(p[0])*x,0,x),A=h.b1(h.N(p[1])*x,0,x),A<I&&(A+=x),A-I<q&&(B=q/(A-I)));const{x:te,y:oe}=this.project.call({worldSize:x},r);let J,pe;const Ce=Math.max(B||0,F||0);if(Ce){const se=new h.P(B?(A+I)/2:te,F?(E+w)/2:oe);return d.center=this.unproject.call({worldSize:x},se).wrap(),d.zoom+=this.scaleZoom(Ce),d}if(this.latRange){const se=ee/2;oe-se<w&&(pe=w+se),oe+se>E&&(pe=E-se)}if(p){const se=(I+A)/2;let ve=te;this._renderWorldCopies&&(ve=h.b1(te,se-x/2,se+x/2));const Ee=q/2;ve-Ee<I&&(J=I+Ee),ve+Ee>A&&(J=A-Ee)}if(J!==void 0||pe!==void 0){const se=new h.P(J??te,pe??oe);d.center=this.unproject.call({worldSize:x},se).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=d,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,l=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=h.b3(1,this.center.lat)*this.worldSize;let p=h.an(new Float64Array(16));h.J(p,p,[this.width/2,-this.height/2,1]),h.H(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=h.an(new Float64Array(16)),h.J(p,p,[1,-1,1]),h.H(p,p,[-1,-1,0]),h.J(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),E=x-w*this._pixelPerMeter/Math.cos(this._pitch),I=w<0?E:x,A=Math.PI/2+this._pitch,F=this._fov*(.5+r.y/this.height),B=Math.sin(F)*I/Math.sin(h.ac(Math.PI-A-F,.01,Math.PI-.01)),q=this.getHorizon(),ee=2*Math.atan(q/this.cameraToCenterDistance)*(.5+r.y/(2*q)),te=Math.sin(ee)*I/Math.sin(h.ac(Math.PI-A-ee,.01,Math.PI-.01)),oe=Math.min(B,te),J=1.01*(Math.cos(Math.PI/2-this._pitch)*oe+I),pe=this.height/50;p=new Float64Array(16),h.b4(p,this._fov,this.width/this.height,pe,J),p[8]=2*-r.x/this.width,p[9]=2*r.y/this.height,h.J(p,p,[1,-1,1]),h.H(p,p,[0,0,-this.cameraToCenterDistance]),h.b5(p,p,this._pitch),h.ad(p,p,this.angle),h.H(p,p,[-l,-d,0]),this.mercatorMatrix=h.J([],p,[this.worldSize,this.worldSize,this.worldSize]),h.J(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=h.K(new Float64Array(16),this.labelPlaneMatrix,p),h.H(p,p,[0,0,-this.elevation]),this.projMatrix=p,this.invProjMatrix=h.ar([],p),this.pixelMatrix3D=h.K(new Float64Array(16),this.labelPlaneMatrix,p);const Ce=this.width%2/2,se=this.height%2/2,ve=Math.cos(this.angle),Ee=Math.sin(this.angle),Te=l-Math.round(l)+ve*Ce+Ee*se,ke=d-Math.round(d)+ve*se+Ee*Ce,Ge=new Float64Array(p);if(h.H(Ge,Ge,[Te>.5?Te-1:Te,ke>.5?ke-1:ke,0]),this.alignedProjMatrix=Ge,p=h.ar(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new h.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return h.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new h.P(0,r))}getCameraQueryGeometry(r){const l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let d=l.x,p=l.y,x=l.x,w=l.y;for(const E of r)d=Math.min(d,E.x),p=Math.min(p,E.y),x=Math.max(x,E.x),w=Math.max(w,E.y);return[new h.P(d,p),new h.P(x,p),new h.P(x,w),new h.P(d,w),new h.P(d,p)]}}lngLatToCameraDepth(r,l){const d=this.locationCoordinate(r),p=[d.x*this.worldSize,d.y*this.worldSize,l,1];return h.af(p,p,this.projMatrix),p[2]/p[3]}}function _f(y,r){let l,d=!1,p=null,x=null;const w=()=>{p=null,d&&(y.apply(x,l),p=setTimeout(w,r),d=!1)};return(...E)=>(d=!0,x=this,l=E,p||w(),p)}class xf{constructor(r){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}},this._updateHash=_f(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(r){const l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,p),w=Math.round(l.lng*x)/x,E=Math.round(l.lat*x)/x,I=this._map.getBearing(),A=this._map.getPitch();let F="";if(F+=r?`/${w}/${E}/${d}`:`${d}/${E}/${w}`,(I||A)&&(F+="/"+Math.round(10*I)/10),A&&(F+=`/${Math.round(A)}`),this._hashName){const B=this._hashName;let q=!1;const ee=window.location.hash.slice(1).split("&").map(te=>{const oe=te.split("=")[0];return oe===B?(q=!0,`${oe}=${F}`):te}).filter(te=>te);return q||ee.push(`${B}=${F}`),`#${ee.join("&")}`}return`#${F}`}}const Xs={linearity:.3,easing:h.b6(0,0,.3,1)},Og=h.e({deceleration:2500,maxSpeed:1400},Xs),Vu=h.e({deceleration:20,maxSpeed:1400},Xs),sc=h.e({deceleration:1e3,maxSpeed:360},Xs),lc=h.e({deceleration:1e3,maxSpeed:90},Xs);class Uu{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,l=z.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new h.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)l.zoom+=x.zoomDelta||0,l.bearing+=x.bearingDelta||0,l.pitch+=x.pitchDelta||0,x.panDelta&&l.pan._add(x.panDelta),x.around&&(l.around=x.around),x.pinchAround&&(l.pinchAround=x.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(l.pan.mag()){const x=Ys(l.pan.mag(),d,h.e({},Og,r||{}));p.offset=l.pan.mult(x.amount/l.pan.mag()),p.center=this._map.transform.center,Za(p,x)}if(l.zoom){const x=Ys(l.zoom,d,Vu);p.zoom=this._map.transform.zoom+x.amount,Za(p,x)}if(l.bearing){const x=Ys(l.bearing,d,sc);p.bearing=this._map.transform.bearing+h.ac(x.amount,-179,179),Za(p,x)}if(l.pitch){const x=Ys(l.pitch,d,lc);p.pitch=this._map.transform.pitch+x.amount,Za(p,x)}if(p.zoom||p.bearing){const x=l.pinchAround===void 0?l.around:l.pinchAround;p.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),h.e(p,{noMoveStart:!0})}}function Za(y,r){(!y.duration||y.duration<r.duration)&&(y.duration=r.duration,y.easing=r.easing)}function Ys(y,r,l){const{maxSpeed:d,linearity:p,deceleration:x}=l,w=h.ac(y*p/(r/1e3),-d,d),E=Math.abs(w)/(x*p);return{easing:l.easing,duration:1e3*E,amount:w*(E/2)}}class Er extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,p={}){const x=M.mousePos(l.getCanvas(),d),w=l.unproject(x);super(r,h.e({point:x,lngLat:w,originalEvent:d},p)),this._defaultPrevented=!1,this.target=l}}class Wo extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){const p=r==="touchend"?d.changedTouches:d.touches,x=M.touchPos(l.getCanvasContainer(),p),w=x.map(I=>l.unproject(I)),E=x.reduce((I,A,F,B)=>I.add(A.div(B.length)),new h.P(0,0));super(r,{points:x,point:E,lngLats:w,lngLat:l.unproject(E),originalEvent:d}),this._defaultPrevented=!1}}class cc extends h.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class Bg{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new cc(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new Er(r.type,this._map,r))}mouseup(r){this._map.fire(new Er(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Er(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Er(r.type,this._map,r))}mouseover(r){this._map.fire(new Er(r.type,this._map,r))}mouseout(r){this._map.fire(new Er(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Wo(r.type,this._map,r))}touchmove(r){this._map.fire(new Wo(r.type,this._map,r))}touchend(r){this._map.fire(new Wo(r.type,this._map,r))}touchcancel(r){this._map.fire(new Wo(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hu{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Er(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Er("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Er(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Js{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(h.P.convert(r),this._map.terrain)}}class Wu{constructor(r,l){this._map=r,this._tr=new Js(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(M.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;const d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=M.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const x=Math.min(p.x,d.x),w=Math.max(p.x,d.x),E=Math.min(p.y,d.y),I=Math.max(p.y,d.y);M.setTransform(this._box,`translate(${x}px,${E}px)`),this._box.style.width=w-x+"px",this._box.style.height=I-E+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;const d=this._startPos,p=l;if(this.reset(),M.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new h.k("boxzoomend",{originalEvent:r})),{cameraAnimation:x=>x.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(M.remove(this._box),this._box=null),M.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new h.k(r,{originalEvent:l}))}}function Ka(y,r){if(y.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${r.length}`);const l={};for(let d=0;d<y.length;d++)l[y[d].identifier]=r[d];return l}class qu{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const x=new h.P(0,0);for(const w of p)x._add(w);return x.div(p.length)}(l),this.touches=Ka(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;const p=Ka(d,l);for(const x in this.touches){const w=p[x];(!w||w.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class uc{constructor(r){this.singleTap=new qu(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){const p=this.singleTap.touchend(r,l,d);if(p){const x=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(x&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class bf{constructor(r){this._tr=new Js(r),this._zoomIn=new uc({numTouches:1,numTaps:2}),this._zoomOut=new uc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){const p=this._zoomIn.touchend(r,l,d),x=this._zoomOut.touchend(r,l,d),w=this._tr;return p?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:r})}):x?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(x)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qo{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const p=l.length?l[0]:l;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&M.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Gu={0:1,2:2};class Zu{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const l=M.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){const p=Gu[d];return l.buttons===void 0||(l.buttons&p)!==p}(r,this._eventButton)}isValidEndEvent(r){return M.mouseButton(r)===this._eventButton}}class Ku{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Sn=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=r=>{r.preventDefault()}},Go=({enable:y,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{const d=new Zu({checkCorrectEvent:p=>M.mouseButton(p)===0&&p.ctrlKey||M.mouseButton(p)===2});return new qo({clickTolerance:r,move:(p,x)=>({bearingDelta:(x.x-p.x)*l}),moveStateManager:d,enable:y,assignEvents:Sn})},si=({enable:y,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{const d=new Zu({checkCorrectEvent:p=>M.mouseButton(p)===0&&p.ctrlKey||M.mouseButton(p)===2});return new qo({clickTolerance:r,move:(p,x)=>({pitchDelta:(x.y-p.y)*l}),moveStateManager:d,enable:y,assignEvents:Sn})};class Xu{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new h.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active&&!(d.length<this.minTouchs()))return r.preventDefault(),this._calculateTransform(r,l,d)}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);const p=Ka(d,l),x=new h.P(0,0),w=new h.P(0,0);let E=0;for(const A in p){const F=p[A],B=this._touches[A];B&&(x._add(F),w._add(F.sub(B)),E++,p[A]=F)}if(this._touches=p,E<this.minTouchs()||!w.mag())return;const I=w.div(E);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(E),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();const[p,x]=this._firstTwoTouches,w=el(d,l,p),E=el(d,l,x);if(!w||!E)return;const I=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],I,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;const[p,x]=this._firstTwoTouches,w=el(d,l,p),E=el(d,l,x);w&&E||(this._active&&M.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function el(y,r,l){for(let d=0;d<y.length;d++)if(y[d].identifier===l)return r[d]}function pa(y,r){return Math.log(y/r)/Math.LN2}class Xa extends Qs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){const d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(pa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pa(this._distance,d),pinchAround:l}}}function hc(y,r){return 180*y.angleWith(r)/Math.PI}class Yu extends Qs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){const p=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:hc(this._vector,p),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const l=25/(Math.PI*this._minDiameter)*360,d=hc(r,this._startVector);return Math.abs(d)<l}}function dc(y){return Math.abs(y.y)>Math.abs(y.x)}class Ju extends Qs{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,dc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=r[0].sub(this._lastPoints[0]),x=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,x,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(p.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;const p=r.mag()>=2,x=l.mag()>=2;if(!p&&!x)return;if(!p||!x)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=r.y>0==l.y>0;return dc(r)&&dc(l)&&w}}const wf={panStep:100,bearingStep:15,pitchStep:10};class Qu{constructor(r){this._tr=new Js(r);const l=wf;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,p=0,x=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),x=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),x=1);break;case 38:r.shiftKey?p=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?p=-1:(r.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:E=>{const I=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:ma,zoom:l?Math.round(I.zoom)+l*(r.shiftKey?2:1):I.zoom,bearing:I.bearing+d*this._bearingStep,pitch:I.pitch+p*this._pitchStep,offset:[-x*this._panStep,-w*this._panStep],center:I.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ma(y){return y*(2-y)}const eh=4.000244140625;class th{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Js(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(r){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!r[this._map.cooperativeGestures._bypassKey])return;let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const d=z.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%eh==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(p*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=M.mousePos(this._map.getCanvas(),r),d=this._tr;this._around=l.y>d.transform.height/2-d.transform.getHorizon()?h.M.convert(this._aroundCenter?d.center:d.unproject(l)):h.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>eh?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&I!==0&&(I=1/I);const A=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(A*I))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,d=this._startZoom,p=this._easing;let x,w=!1;if(this._type==="wheel"&&d&&p){const E=Math.min((z.now()-this._lastWheelEventTime)/200,1),I=p(E);x=h.z.number(d,l,I),E<1?this._frameId||(this._frameId=!0):w=!0}else x=l,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:x-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=h.b7;if(this._prevEase){const d=this._prevEase,p=(z.now()-d.start)/d.duration,x=d.easing(p+.01)-d.easing(p),w=.27/Math.sqrt(x*x+1e-4)*.01,E=Math.sqrt(.0729-w*w);l=h.b6(w,E,.25,1)}return this._prevEase={start:z.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class nh{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Sf{constructor(r){this._tr=new Js(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cf{constructor(){this._tap=new uc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){const p=l[0],x=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;x&&w?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=l[0],x=p.y-this._swipePoint.y;return this._swipePoint=p,r.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(r,l,d);p&&(this._tapTime=r.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rh{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ih{constructor(r,l,d){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ya{constructor(r,l,d,p){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class oh{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=M.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=l,this._container.appendChild(p);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=d,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(M.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(r){this._onCooperativeGesture(r.touches.length===1)}wheel(r){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!r[this._bypassKey])}_onCooperativeGesture(r){this._enabled&&r&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Zr=y=>y.zoom||y.drag||y.pitch||y.rotate;class to extends h.k{}function fc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class no{constructor(r,l){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,x)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,E={needsRenderFrame:!1},I={},A={},F=p.touches,B=F?this._getMapTouches(F):void 0,q=B?M.touchPos(this._map.getCanvas(),B):M.mousePos(this._map.getCanvas(),p);for(const{handlerName:oe,handler:J,allowed:pe}of this._handlers){if(!J.isEnabled())continue;let Ce;this._blockedByActive(A,pe,oe)?J.reset():J[x||p.type]&&(Ce=J[x||p.type](p,q,B),this.mergeHandlerResult(E,I,Ce,oe,w),Ce&&Ce.needsRenderFrame&&this._triggerRenderFrame()),(Ce||J.isActive())&&(A[oe]=J)}const ee={};for(const oe in this._previousActiveHandlers)A[oe]||(ee[oe]=w);this._previousActiveHandlers=A,(Object.keys(ee).length||fc(E))&&(this._changes.push([E,I,ee]),this._triggerRenderFrame()),(Object.keys(A).length||fc(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=E;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Uu(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,x,w]of this._listeners)M.addEventListener(p,x,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[r,l,d]of this._listeners)M.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){const l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new Bg(l,r));const p=l.boxZoom=new Wu(l,r);this._add("boxZoom",p),r.interactive&&r.boxZoom&&p.enable();const x=l.cooperativeGestures=new oh(l,r.cooperativeGestures);this._add("cooperativeGestures",x),r.cooperativeGestures&&x.enable();const w=new bf(l),E=new Sf(l);l.doubleClickZoom=new nh(E,w),this._add("tapZoom",w),this._add("clickZoom",E),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();const I=new Cf;this._add("tapDragZoom",I);const A=l.touchPitch=new Ju(l);this._add("touchPitch",A),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);const F=Go(r),B=si(r);l.dragRotate=new ih(r,F,B),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();const q=(({enable:Ce,clickTolerance:se})=>{const ve=new Zu({checkCorrectEvent:Ee=>M.mouseButton(Ee)===0&&!Ee.ctrlKey});return new qo({clickTolerance:se,move:(Ee,Te)=>({around:Te,panDelta:Te.sub(Ee)}),activateOnStart:!0,moveStateManager:ve,enable:Ce,assignEvents:Sn})})(r),ee=new Xu(r,l);l.dragPan=new rh(d,q,ee),this._add("mousePan",q),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);const te=new Yu,oe=new Xa;l.touchZoomRotate=new Ya(d,oe,te,I),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);const J=l.scrollZoom=new th(l,()=>this._triggerRenderFrame());this._add("scrollZoom",J,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);const pe=l.keyboard=new Qu(l);this._add("keyboard",pe),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Hu(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Zr(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(const p in r)if(p!==d&&(!l||l.indexOf(p)<0))return!0;return!1}_getMapTouches(r){const l=[];for(const d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,p,x){if(!d)return;h.e(r,d);const w={handlerName:p,originalEvent:d.originalEvent||x};d.zoomDelta!==void 0&&(l.zoom=w),d.panDelta!==void 0&&(l.drag=w),d.pitchDelta!==void 0&&(l.pitch=w),d.bearingDelta!==void 0&&(l.rotate=w)}_applyChanges(){const r={},l={},d={};for(const[p,x,w]of this._changes)p.panDelta&&(r.panDelta=(r.panDelta||new h.P(0,0))._add(p.panDelta)),p.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(r.around=p.around),p.pinchAround!==void 0&&(r.pinchAround=p.pinchAround),p.noInertia&&(r.noInertia=p.noInertia),h.e(l,x),h.e(d,w);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){const p=this._map,x=p._getTransformForUpdate(),w=p.terrain;if(!(fc(r)||w&&this._terrainMovement))return this._fireEvents(l,d,!0);let{panDelta:E,zoomDelta:I,bearingDelta:A,pitchDelta:F,around:B,pinchAround:q}=r;q!==void 0&&(B=q),p._stop(!0),B=B||p.transform.centerPoint;const ee=x.pointLocation(E?B.sub(E):B);A&&(x.bearing+=A),F&&(x.pitch+=F),I&&(x.zoom+=I),w?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(E)):x.setLocationAtPoint(ee,B):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(ee,B),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(p.terrain)})):x.setLocationAtPoint(ee,B),p._applyUpdatedTransform(x),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){const p=Zr(this._eventsInProgress),x=Zr(r),w={};for(const F in r){const{originalEvent:B}=r[F];this._eventsInProgress[F]||(w[`${F}start`]=B),this._eventsInProgress[F]=r[F]}!p&&x&&this._fireEvent("movestart",x.originalEvent);for(const F in w)this._fireEvent(F,w[F]);x&&this._fireEvent("move",x.originalEvent);for(const F in r){const{originalEvent:B}=r[F];this._fireEvent(F,B)}const E={};let I;for(const F in this._eventsInProgress){const{handlerName:B,originalEvent:q}=this._eventsInProgress[F];this._handlersById[B].isActive()||(delete this._eventsInProgress[F],I=l[B]||q,E[`${F}end`]=I)}for(const F in E)this._fireEvent(F,E[F]);const A=Zr(this._eventsInProgress);if(d&&(p||x)&&!A){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;!F||!F.essential&&z.prefersReducedMotion?(this._map.fire(new h.k("moveend",{originalEvent:I})),B(this._map.getBearing())&&this._map.resetNorth()):(B(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new h.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new to("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class tl extends h.E{constructor(r,l){super(),this._renderFrameCallback=()=>{const d=Math.min((z.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new h.M(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,d){return r=h.P.convert(r).mult(-1),this.panTo(this.transform.center,h.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(h.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(h.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(h.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,h.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(h.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=rn.convert(r);const d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,p){const x={top:0,bottom:0,right:0,left:0};if(typeof(p=h.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const ct=p.padding;p.padding={top:ct,bottom:ct,right:ct,left:ct}}p.padding=h.e(x,p.padding);const w=this.transform,E=w.padding,I=new rn(r,l),A=w.project(I.getNorthWest()),F=w.project(I.getNorthEast()),B=w.project(I.getSouthEast()),q=w.project(I.getSouthWest()),ee=h.b8(-d),te=A.rotate(ee),oe=F.rotate(ee),J=B.rotate(ee),pe=q.rotate(ee),Ce=new h.P(Math.max(te.x,oe.x,pe.x,J.x),Math.max(te.y,oe.y,pe.y,J.y)),se=new h.P(Math.min(te.x,oe.x,pe.x,J.x),Math.min(te.y,oe.y,pe.y,J.y)),ve=Ce.sub(se),Ee=(w.width-(E.left+E.right+p.padding.left+p.padding.right))/ve.x,Te=(w.height-(E.top+E.bottom+p.padding.top+p.padding.bottom))/ve.y;if(Te<0||Ee<0)return void h.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ke=Math.min(w.scaleZoom(w.scale*Math.min(Ee,Te)),p.maxZoom),Ge=h.P.convert(p.offset),Ue=new h.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(h.b8(d)),Ye=Ge.add(Ue).mult(w.scale/w.zoomScale(ke));return{center:w.unproject(A.add(B).div(2).sub(Ye)),zoom:ke,bearing:d}}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,p,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(h.P.convert(r)),this.transform.pointLocation(h.P.convert(l)),d,p),p,x)}_fitInternal(r,l,d){return r?(delete(l=h.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();const d=this._getTransformForUpdate();let p=!1,x=!1,w=!1;return"zoom"in r&&d.zoom!==+r.zoom&&(p=!0,d.zoom=+r.zoom),r.center!==void 0&&(d.center=h.M.convert(r.center)),"bearing"in r&&d.bearing!==+r.bearing&&(x=!0,d.bearing=+r.bearing),"pitch"in r&&d.pitch!==+r.pitch&&(w=!0,d.pitch=+r.pitch),r.padding==null||d.isPaddingEqual(r.padding)||(d.padding=r.padding),this._applyUpdatedTransform(d),this.fire(new h.k("movestart",l)).fire(new h.k("move",l)),p&&this.fire(new h.k("zoomstart",l)).fire(new h.k("zoom",l)).fire(new h.k("zoomend",l)),x&&this.fire(new h.k("rotatestart",l)).fire(new h.k("rotate",l)).fire(new h.k("rotateend",l)),w&&this.fire(new h.k("pitchstart",l)).fire(new h.k("pitch",l)).fire(new h.k("pitchend",l)),this.fire(new h.k("moveend",l))}calculateCameraOptionsFromTo(r,l,d,p=0){const x=h.Y.fromLngLat(r,l),w=h.Y.fromLngLat(d,p),E=w.x-x.x,I=w.y-x.y,A=w.z-x.z,F=Math.hypot(E,I,A);if(F===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(E,I),q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),ee=180*Math.atan2(E,-I)/Math.PI;let te=180*Math.acos(B/F)/Math.PI;return te=A<0?90-te:90+te,{center:w.toLngLat(),zoom:q,pitch:te,bearing:ee}}easeTo(r,l){var d;this._stop(!1,r.easeId),((r=h.e({offset:[0,0],duration:500,easing:h.b7},r)).animate===!1||!r.essential&&z.prefersReducedMotion)&&(r.duration=0);const p=this._getTransformForUpdate(),x=this.getZoom(),w=this.getBearing(),E=this.getPitch(),I=this.getPadding(),A="bearing"in r?this._normalizeBearing(r.bearing,w):w,F="pitch"in r?+r.pitch:E,B="padding"in r?r.padding:p.padding,q=h.P.convert(r.offset);let ee=p.centerPoint.add(q);const te=p.pointLocation(ee),{center:oe,zoom:J}=p.getConstrained(h.M.convert(r.center||te),(d=r.zoom)!==null&&d!==void 0?d:x);this._normalizeCenter(oe);const pe=p.project(te),Ce=p.project(oe).sub(pe),se=p.zoomScale(J-x);let ve,Ee;r.around&&(ve=h.M.convert(r.around),Ee=p.locationPoint(ve));const Te={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==x,this._rotating=this._rotating||w!==A,this._pitching=this._pitching||F!==E,this._padding=!p.isPaddingEqual(B),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,Te),this.terrain&&this._prepareElevation(oe),this._ease(ke=>{if(this._zooming&&(p.zoom=h.z.number(x,J,ke)),this._rotating&&(p.bearing=h.z.number(w,A,ke)),this._pitching&&(p.pitch=h.z.number(E,F,ke)),this._padding&&(p.interpolatePadding(I,B,ke),ee=p.centerPoint.add(q)),this.terrain&&!r.freezeElevation&&this._updateElevation(ke),ve)p.setLocationAtPoint(ve,Ee);else{const Ge=p.zoomScale(p.zoom-x),Ue=J>x?Math.min(2,se):Math.max(.5,se),Ye=Math.pow(Ue,1-ke),ct=p.unproject(pe.add(Ce.mult(ke*Ye)).mult(Ge));p.setLocationAtPoint(p.renderWorldCopies?ct.wrap():ct,ee)}this._applyUpdatedTransform(p),this._fireMoveEvents(l)},ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(l,ke)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new h.k("movestart",r)),this._zooming&&!d.zooming&&this.fire(new h.k("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new h.k("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new h.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=h.z.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(r){if(!this.transformCameraUpdate)return;const l=r.clone(),{center:d,zoom:p,pitch:x,bearing:w,elevation:E}=this.transformCameraUpdate(l);d&&(l.center=d),p!==void 0&&(l.zoom=p),x!==void 0&&(l.pitch=x),w!==void 0&&(l.bearing=w),E!==void 0&&(l.elevation=E),this.transform.apply(l)}_fireMoveEvents(r){this.fire(new h.k("move",r)),this._zooming&&this.fire(new h.k("zoom",r)),this._rotating&&this.fire(new h.k("rotate",r)),this._pitching&&this.fire(new h.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const d=this._zooming,p=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new h.k("zoomend",r)),p&&this.fire(new h.k("rotateend",r)),x&&this.fire(new h.k("pitchend",r)),this.fire(new h.k("moveend",r))}flyTo(r,l){var d;if(!r.essential&&z.prefersReducedMotion){const Wt=h.L(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Wt,l)}this.stop(),r=h.e({offset:[0,0],speed:1.2,curve:1.42,easing:h.b7},r);const p=this._getTransformForUpdate(),x=this.getZoom(),w=this.getBearing(),E=this.getPitch(),I=this.getPadding(),A="bearing"in r?this._normalizeBearing(r.bearing,w):w,F="pitch"in r?+r.pitch:E,B="padding"in r?r.padding:p.padding,q=h.P.convert(r.offset);let ee=p.centerPoint.add(q);const te=p.pointLocation(ee),{center:oe,zoom:J}=p.getConstrained(h.M.convert(r.center||te),(d=r.zoom)!==null&&d!==void 0?d:x);this._normalizeCenter(oe);const pe=p.zoomScale(J-x),Ce=p.project(te),se=p.project(oe).sub(Ce);let ve=r.curve;const Ee=Math.max(p.width,p.height),Te=Ee/pe,ke=se.mag();if("minZoom"in r){const Wt=h.ac(Math.min(r.minZoom,x,J),p.minZoom,p.maxZoom),St=Ee/p.zoomScale(Wt-x);ve=Math.sqrt(St/ke*2)}const Ge=ve*ve;function Ue(Wt){const St=(Te*Te-Ee*Ee+(Wt?-1:1)*Ge*Ge*ke*ke)/(2*(Wt?Te:Ee)*Ge*ke);return Math.log(Math.sqrt(St*St+1)-St)}function Ye(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function ct(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}const Mt=Ue(!1);let et=function(Wt){return ct(Mt)/ct(Mt+ve*Wt)},bt=function(Wt){return Ee*((ct(Mt)*(Ye(St=Mt+ve*Wt)/ct(St))-Ye(Mt))/Ge)/ke;var St},At=(Ue(!0)-Mt)/ve;if(Math.abs(ke)<1e-6||!isFinite(At)){if(Math.abs(Ee-Te)<1e-6)return this.easeTo(r,l);const Wt=Te<Ee?-1:1;At=Math.abs(Math.log(Te/Ee))/ve,bt=()=>0,et=St=>Math.exp(Wt*ve*St)}return r.duration="duration"in r?+r.duration:1e3*At/("screenSpeed"in r?+r.screenSpeed/ve:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==A,this._pitching=F!==E,this._padding=!p.isPaddingEqual(B),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(oe),this._ease(Wt=>{const St=Wt*At,Rt=1/et(St);p.zoom=Wt===1?J:x+p.scaleZoom(Rt),this._rotating&&(p.bearing=h.z.number(w,A,Wt)),this._pitching&&(p.pitch=h.z.number(E,F,Wt)),this._padding&&(p.interpolatePadding(I,B,Wt),ee=p.centerPoint.add(q)),this.terrain&&!r.freezeElevation&&this._updateElevation(Wt);const jt=Wt===1?oe:p.unproject(Ce.add(se.mult(bt(St))).mult(Rt));p.setLocationAtPoint(p.renderWorldCopies?jt.wrap():jt,ee),this._applyUpdatedTransform(p),this._fireMoveEvents(l)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}if(!r){const d=this.handlers;d&&d.stop(!1)}return this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=z.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=h.b1(r,-180,180);const d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}_normalizeCenter(r){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const d=r.lng-l.center.lng;r.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(h.M.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Ef={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Tf{constructor(r=Ef){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=M.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=M.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=M.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){M.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){const d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const l=this._map.style.sourceCaches;for(const p in l){const x=l[p];if(x.used||x.usedForTerrain){const w=x.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(p=>String(p).trim()),r.sort((p,x)=>p.length-x.length),r=r.filter((p,x)=>{for(let w=x+1;w<r.length;w++)if(r[w].indexOf(p)>=0)return!1;return!0});const d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pf{constructor(r={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=M.create("div","maplibregl-ctrl");const l=M.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){M.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class If{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){const l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(const p of d)if(p.id===r)return void(p.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var nl=h.X([{name:"a_pos3d",type:"Int16",components:3}]);class Zo extends h.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];const d={};for(const p of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),h.aN(p.posMatrix,0,h.W,0,h.W,0,1),this._tiles[p.key]=new wr(p,this.tileSize));for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(r){for(const l in this._tiles){const d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const l={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID;if(p.canonical.equals(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16),h.aN(x.posMatrix,0,h.W,0,h.W,0,1),l[d]=x}else if(p.canonical.isChildOf(r.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const w=p.canonical.z-r.canonical.z,E=p.canonical.x-(p.canonical.x>>w<<w),I=p.canonical.y-(p.canonical.y>>w<<w),A=h.W>>w;h.aN(x.posMatrix,0,A,0,A,0,1),h.H(x.posMatrix,x.posMatrix,[-E*A,-I*A,0]),l[d]=x}else if(r.canonical.isChildOf(p.canonical)){const x=r.clone();x.posMatrix=new Float64Array(16);const w=r.canonical.z-p.canonical.z,E=r.canonical.x-(r.canonical.x>>w<<w),I=r.canonical.y-(r.canonical.y>>w<<w),A=h.W>>w;h.aN(x.posMatrix,0,h.W,0,h.W,0,1),h.H(x.posMatrix,x.posMatrix,[E*A,I*A,0]),h.J(x.posMatrix,x.posMatrix,[1/2**w,1/2**w,0]),l[d]=x}}return l}getSourceTile(r,l){const d=this.sourceCache._source;let p=r.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(p).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!x||!x.dem)&&l)for(;p>=d.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(r.scaledTo(p--).key);return x}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class ht{constructor(r,l,d){this.painter=r,this.sourceCache=new Zo(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,p=h.W){var x;if(!(l>=0&&l<p&&d>=0&&d<p))return 0;const w=this.getTerrainData(r),E=(x=w.tile)===null||x===void 0?void 0:x.dem;if(!E)return 0;const I=function(te,oe,J){var pe=oe[0],Ce=oe[1];return te[0]=J[0]*pe+J[4]*Ce+J[12],te[1]=J[1]*pe+J[5]*Ce+J[13],te}([],[l/p*h.W,d/p*h.W],w.u_terrain_matrix),A=[I[0]*E.dim,I[1]*E.dim],F=Math.floor(A[0]),B=Math.floor(A[1]),q=A[0]-F,ee=A[1]-B;return E.get(F,B)*(1-q)*(1-ee)+E.get(F+1,B)*q*(1-ee)+E.get(F,B+1)*(1-q)*ee+E.get(F+1,B+1)*q*ee}getElevationForLngLatZoom(r,l){const{tileID:d,mercatorX:p,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,p%h.W,x%h.W,h.W)}getElevation(r,l,d,p=h.W){return this.getDEMElevation(r,l,d,p)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const p=this.painter.context,x=new h.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new He(p,x,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new He(p,new h.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=h.an([])}const l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const p=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new He(p,l.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),l.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let x=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=p?x=r.canonical.z-p:h.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=r.canonical.x-(r.canonical.x>>x<<x),E=r.canonical.y-(r.canonical.y>>x<<x),I=h.b9(new Float64Array(16),[1/(h.W<<x),1/(h.W<<x),0]);h.H(I,I,[w*h.W,E*h.W,0]),this._demMatrixCache[r.key]={matrix:I,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){const l=this.painter,d=l.width/devicePixelRatio,p=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new He(l.context,{width:d,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new He(l.context,{width:d,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,w=0;x<this._coordsTextureSize;x++)for(let E=0;E<this._coordsTextureSize;E++,w+=4)l[w+0]=255&E,l[w+1]=255&x,l[w+2]=E>>8<<4|x>>8,l[w+3]=0;const d=new h.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),p=new He(r,d,r.gl.RGBA,{premultiply:!1});return p.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),d=this.painter.context,p=d.gl,x=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(x,E-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);const I=l[0]+(l[2]>>4<<8),A=l[1]+((15&l[2])<<8),F=this.coordsIndex[255-l[3]],B=F&&this.sourceCache.getTileByID(F);if(!B)return null;const q=this._coordsTextureSize,ee=(1<<B.tileID.canonical.z)*q;return new h.Y((B.tileID.canonical.x*q+I)/ee+B.tileID.wrap,(B.tileID.canonical.y*q+A)/ee,this.getElevation(B.tileID,I,A,q))}depthAtPoint(r){const l=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,l=new h.ba,d=new h.aX,p=this.meshSize,x=h.W/p,w=p*p;for(let B=0;B<=p;B++)for(let q=0;q<=p;q++)l.emplaceBack(q*x,B*x,0);for(let B=0;B<w;B+=p+1)for(let q=0;q<p;q++)d.emplaceBack(q+B,p+q+B+1,p+q+B+2),d.emplaceBack(q+B,p+q+B+2,q+B+1);const E=l.length,I=E+2*(p+1);for(const B of[0,1])for(let q=0;q<=p;q++)for(const ee of[0,1])l.emplaceBack(q*x,B*h.W,ee);for(let B=0;B<2*p;B+=2)d.emplaceBack(I+B,I+B+1,I+B+3),d.emplaceBack(I+B,I+B+3,I+B+2),d.emplaceBack(E+B,E+B+3,E+B+1),d.emplaceBack(E+B,E+B+2,E+B+3);const A=l.length,F=A+2*(p+1);for(const B of[0,1])for(let q=0;q<=p;q++)for(const ee of[0,1])l.emplaceBack(B*h.W,q*x,ee);for(let B=0;B<2*p;B+=2)d.emplaceBack(A+B,A+B+1,A+B+3),d.emplaceBack(A+B,A+B+3,A+B+2),d.emplaceBack(F+B,F+B+3,F+B+1),d.emplaceBack(F+B,F+B+2,F+B+3);return this._mesh={indexBuffer:r.createIndexBuffer(d),vertexBuffer:r.createVertexBuffer(l,nl.members),segments:h.$.simpleSegment(0,0,l.length,d.length)},this._mesh}getMeshFrameDelta(r){return 2*Math.PI*h.bb/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){const l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){const d=h.Y.fromLngLat(r.wrap()),p=(1<<l)*h.W,x=d.x*p,w=d.y*p,E=Math.floor(x/h.W),I=Math.floor(w/h.W);return{tileID:new h.Q(l,0,l,E,I),mercatorX:x,mercatorY:w}}}class kf{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new He(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const ro={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class rl{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new kf(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsDescendingInv={};for(const d in r.sourceCaches){this._coordsDescendingInv[d]={};const p=r.sourceCaches[d].getVisibleCoordinates();for(const x of p){const w=this.terrain.sourceCache.getTerrainCoords(x);for(const E in w)this._coordsDescendingInv[d][E]||(this._coordsDescendingInv[d][E]=[]),this._coordsDescendingInv[d][E].push(w[E])}}this._coordsDescendingInvStr={};for(const d of r._order){const p=r._layers[d],x=p.source;if(ro[p.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const w in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][w]=this._coordsDescendingInv[x][w].map(E=>E.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[p][d.tileID.key];x&&x!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const l=r.type,d=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(ro[l]&&(this._prevType&&ro[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!p))return!0;if(ro[this._prevType]||ro[l]&&p){this._prevType=l;const x=this._stacks.length-1,w=this._stacks[x]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Nu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[x]){const A=this.pool.getObjectForId(E.rtt[x].id);if(A.stamp===E.rtt[x].stamp){this.pool.useObject(A);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),E.rtt[x]={id:I.id,stamp:I.stamp},d.context.bindFramebuffer.set(I.fbo.framebuffer),d.context.clear({color:h.aO.transparent,stencil:0}),d.currentStencilSource=void 0;for(let A=0;A<w.length;A++){const F=d.style._layers[w[A]],B=F.source?this._coordsDescendingInv[F.source][E.tileID.key]:[E.tileID];d.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),d._renderTileClippingMasks(F,B),d.renderLayer(d,d.style.sourceCaches[F.source],F,B),F.source&&(E.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][E.tileID.key])}}return Nu(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ro[l]}return!1}}const Mf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},at=C,ah={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Ef,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:h.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Af=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Ng={showCompass:!0,showZoom:!0,visualizePitch:!1};class sh{constructor(r,l,d=!1){this.mousedown=w=>{this.startMouse(h.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),M.mousePos(this.element,w)),M.addEventListener(window,"mousemove",this.mousemove),M.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,M.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=M.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),M.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=M.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=r.dragRotate._mouseRotate.getClickTolerance(),x=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=Go({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:E,bearingDegreesPerPixelMoved:I=.8})=>{const A=new Ku;return new qo({clickTolerance:E,move:(F,B)=>({bearingDelta:(B.x-F.x)*I}),moveStateManager:A,enable:w,assignEvents:Af})})({clickTolerance:p,enable:!0}),this.map=r,d&&(this.mousePitch=si({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:E,pitchDegreesPerPixelMoved:I=-.5})=>{const A=new Ku;return new qo({clickTolerance:E,move:(F,B)=>({pitchDelta:(B.y-F.y)*I}),moveStateManager:A,enable:w,assignEvents:Af})})({clickTolerance:x,enable:!0})),M.addEventListener(l,"mousedown",this.mousedown),M.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),M.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),M.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),M.disableDrag()}moveMouse(r,l){const d=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(r,l)||{};if(p&&d.setBearing(d.getBearing()+p),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(r,l)||{};x&&d.setPitch(d.getPitch()+x)}}moveTouch(r,l){const d=this.map,{bearingDelta:p}=this.touchRotate.dragMove(r,l)||{};if(p&&d.setBearing(d.getBearing()+p),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(r,l)||{};x&&d.setPitch(d.getPitch()+x)}}off(){const r=this.element;M.removeEventListener(r,"mousedown",this.mousedown),M.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend),M.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){M.enableDrag(),M.removeEventListener(window,"mousemove",this.mousemove),M.removeEventListener(window,"mouseup",this.mouseup),M.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),M.removeEventListener(window,"touchend",this.touchend)}}let Ko;function lh(y,r,l){const d=new h.M(y.lng,y.lat);if(y=new h.M(y.lng,y.lat),r){const p=new h.M(y.lng-360,y.lat),x=new h.M(y.lng+360,y.lat),w=l.locationPoint(y).distSqr(r);l.locationPoint(p).distSqr(r)<w?y=p:l.locationPoint(x).distSqr(r)<w&&(y=x)}for(;Math.abs(y.lng-l.center.lng)>180;){const p=l.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=l.width&&p.y<=l.height)break;y.lng>l.center.lng?y.lng-=360:y.lng+=360}return y.lng!==d.lng&&l.locationPoint(y).y>l.height/2-l.getHorizon()?y:d}const ch={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zf(y,r,l){const d=y.classList;for(const p in ch)d.remove(`maplibregl-${l}-anchor-${p}`);d.add(`maplibregl-${l}-anchor-${r}`)}class So extends h.E{constructor(r){if(super(),this._onKeyPress=l=>{const d=l.code,p=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=l=>{const d=l.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=l=>{var d;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?lh(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),M.setTransform(this._element,`${ch[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${x}`),z.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new h.k("dragstart"))),this.fire(new h.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new h.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=h.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=M.create("div"),this._element.setAttribute("aria-label","Map marker");const l=M.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${p}px`),l.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const x=M.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const w=M.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const E=M.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of I){const Ce=M.createNS("http://www.w3.org/2000/svg","ellipse");Ce.setAttributeNS(null,"opacity","0.04"),Ce.setAttributeNS(null,"cx","10.5"),Ce.setAttributeNS(null,"cy","5.80029008"),Ce.setAttributeNS(null,"rx",pe.rx),Ce.setAttributeNS(null,"ry",pe.ry),E.appendChild(Ce)}const A=M.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);const F=M.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(F);const B=M.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const q=M.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(q);const ee=M.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const te=M.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const oe=M.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#000000"),oe.setAttributeNS(null,"opacity","0.25"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962");const J=M.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),te.appendChild(oe),te.appendChild(J),w.appendChild(E),w.appendChild(A),w.appendChild(B),w.appendChild(ee),w.appendChild(te),l.appendChild(w),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(l),this._offset=h.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),zf(this._element,this._anchor,"marker"),r&&r.className)for(const l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),M.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=h.M.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const p=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,x=p.terrain.depthAtPoint(this._pos),w=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,w)-x<.006)return void(this._element.style.opacity=this._opacity);const E=-this._offset.y/p.transform._pixelPerMeter,I=Math.sin(p.getPitch()*Math.PI/180)*E,A=p.terrain.depthAtPoint(new h.P(this._pos.x,this._pos.y-this._offset.y)),F=p.transform.lngLatToCameraDepth(this._lngLat,w+I)-A>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=h.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const yn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ga=0,ya=!1;const Rf={maxWidth:100,unit:"metric"};function uh(y,r,l){const d=l&&l.maxWidth||100,p=y._container.clientHeight/2,x=y.unproject([0,p]),w=y.unproject([d,p]),E=x.distanceTo(w);if(l&&l.unit==="imperial"){const I=3.2808*E;I>5280?Ja(r,d,I/5280,y._getUIString("ScaleControl.Miles")):Ja(r,d,I,y._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Ja(r,d,E/1852,y._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Ja(r,d,E/1e3,y._getUIString("ScaleControl.Kilometers")):Ja(r,d,E,y._getUIString("ScaleControl.Meters"))}function Ja(y,r,l,d){const p=function(x){const w=Math.pow(10,`${Math.floor(x)}`.length-1);let E=x/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(I){const A=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*A)/A}(E),w*E}(l);y.style.width=r*(p/l)+"px",y.innerHTML=`${p}&nbsp;${d}`}const jg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},io=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function il(y){if(y){if(typeof y=="number"){const r=Math.round(Math.abs(y)/Math.SQRT2);return{center:new h.P(0,0),top:new h.P(0,y),"top-left":new h.P(r,r),"top-right":new h.P(-r,r),bottom:new h.P(0,-y),"bottom-left":new h.P(r,-r),"bottom-right":new h.P(-r,-r),left:new h.P(y,0),right:new h.P(-y,0)}}if(y instanceof h.P||Array.isArray(y)){const r=h.P.convert(y);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:h.P.convert(y.center||[0,0]),top:h.P.convert(y.top||[0,0]),"top-left":h.P.convert(y["top-left"]||[0,0]),"top-right":h.P.convert(y["top-right"]||[0,0]),bottom:h.P.convert(y.bottom||[0,0]),"bottom-left":h.P.convert(y["bottom-left"]||[0,0]),"bottom-right":h.P.convert(y["bottom-right"]||[0,0]),left:h.P.convert(y.left||[0,0]),right:h.P.convert(y.right||[0,0])}}return il(new h.P(0,0))}const gt=C;g.AJAXError=h.be,g.Evented=h.E,g.LngLat=h.M,g.MercatorCoordinate=h.Y,g.Point=h.P,g.addProtocol=h.bf,g.config=h.a,g.removeProtocol=h.bg,g.AttributionControl=Tf,g.BoxZoomHandler=Wu,g.CanvasSource=Qi,g.CooperativeGesturesHandler=oh,g.DoubleClickZoomHandler=nh,g.DragPanHandler=rh,g.DragRotateHandler=ih,g.EdgeInsets=ac,g.FullscreenControl=class extends h.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:h.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){M.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=M.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);M.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new h.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new h.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=Pt,g.GeolocateControl=class extends h.E{constructor(y){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new h.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new h.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const l=new h.M(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,p=this._map.getBearing(),x=h.e({bearing:p},this.options.fitBoundsOptions),w=rn.fromLngLat(l,d);this._map.fitBounds(w,x,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const l=new h.M(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&ya)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new h.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=r=>{if(this._map){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=M.create("button","maplibregl-ctrl-geolocate",this._container),M.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",r===!1){h.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=M.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new So({element:this._dotElement}),this._circleElement=M.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new So({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new h.k("trackuserlocationend")))})}},this.options=h.e({},yn,y)}onAdd(y){return this._map=y,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return h._(this,arguments,void 0,function*(r=!1){if(Ko!==void 0&&!r)return Ko;if(window.navigator.permissions===void 0)return Ko=!!window.navigator.geolocation,Ko;try{Ko=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ko=!!window.navigator.geolocation}return Ko})}().then(r=>this._setupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),M.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ga=0,ya=!1}_isOutOfMapMaxBounds(y){const r=this._map.getMaxBounds(),l=y.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),r=y.getSouthEast(),l=y.getNorthEast(),d=r.distanceTo(l),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return h.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new h.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ga--,ya=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new h.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new h.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ga++,ga>1?(y={maximumAge:6e5,timeout:0},ya=!0):(y=this.options.positionOptions,ya=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.Hash=xf,g.ImageSource=_n,g.KeyboardHandler=Qu,g.LngLatBounds=rn,g.LogoControl=Pf,g.Map=class extends tl{constructor(y){if(h.bc.mark(h.bd.create),(y=h.e({},ah,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new fa(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._contextLost=r=>{r.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new h.k("webglcontextlost",{originalEvent:r}))},this._contextRestored=r=>{this._setupPainter(),this.resize(),this._update(),this.fire(new h.k("webglcontextrestored",{originalEvent:r}))},this._onMapScroll=r=>{if(r.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new If,this._controls=[],this._mapId=h.a3(),this._locale=h.e({},Mf,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=H.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let r=!1;const l=_f(d=>{this._trackResize&&!this._removed&&this.resize(d)._update()},50);this._resizeObserver=new ResizeObserver(d=>{r?l(d):r=!0}),this._resizeObserver.observe(this._container)}this.handlers=new no(this,y),this._hash=y.hash&&new xf(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,h.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Tf(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new Pf,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",r=>{this._update(r.dataType==="style"),this.fire(new h.k(`${r.dataType}data`,r))}),this.on("dataloading",r=>{this.fire(new h.k(`${r.dataType}dataloading`,r))}),this.on("dataabort",r=>{this.fire(new h.k("sourcedataabort",r))})}_getMapId(){return this._mapId}addControl(y,r){if(r===void 0&&(r=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new h.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=y.onAdd(this);this._controls.push(y);const d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new h.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(y);return r>-1&&this._controls.splice(r,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,r,l,d)}resize(y){var r;const l=this._containerDimensions(),d=l[0],p=l[1],x=this._getClampedPixelRatio(d,p);if(this._resizeCanvas(d,p,x),this.painter.resize(d,p,x),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const I=this._getClampedPixelRatio(d,p);this._resizeCanvas(d,p,I),this.painter.resize(d,p,I)}this.transform.resize(d,p),(r=this._requestedCameraState)===null||r===void 0||r.resize(d,p);const w=!this._moving;return w&&(this.stop(),this.fire(new h.k("movestart",y)).fire(new h.k("move",y))),this.fire(new h.k("resize",y)),w&&this.fire(new h.k("moveend",y)),this}_getClampedPixelRatio(y,r){const{0:l,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),x=y*p,w=r*p;return Math.min(x>l?l/x:1,w>d?d/w:1)*p}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(rn.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(h.M.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(h.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,r,l){if(y==="mouseenter"||y==="mouseover"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:x=>{const w=this.getLayer(r)?this.queryRenderedFeatures(x.point,{layers:[r]}):[];w.length?d||(d=!0,l.call(this,new Er(y,this,x.originalEvent,{features:w}))):d=!1},mouseout:()=>{d=!1}}}}if(y==="mouseleave"||y==="mouseout"){let d=!1;return{layer:r,listener:l,delegates:{mousemove:w=>{(this.getLayer(r)?this.queryRenderedFeatures(w.point,{layers:[r]}):[]).length?d=!0:d&&(d=!1,l.call(this,new Er(y,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,l.call(this,new Er(y,this,w.originalEvent)))}}}}{const d=p=>{const x=this.getLayer(r)?this.queryRenderedFeatures(p.point,{layers:[r]}):[];x.length&&(p.features=x,l.call(this,p),delete p.features)};return{layer:r,listener:l,delegates:{[y]:d}}}}on(y,r,l){if(l===void 0)return super.on(y,r);const d=this._createDelegatedListener(y,r,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(d);for(const p in d.delegates)this.on(p,d.delegates[p]);return this}once(y,r,l){if(l===void 0)return super.once(y,r);const d=this._createDelegatedListener(y,r,l);for(const p in d.delegates)this.once(p,d.delegates[p]);return this}off(y,r,l){return l===void 0?super.off(y,r):(this._delegatedListeners&&this._delegatedListeners[y]&&(d=>{const p=this._delegatedListeners[y];for(let x=0;x<p.length;x++){const w=p[x];if(w.layer===r&&w.listener===l){for(const E in w.delegates)this.off(E,w.delegates[E]);return p.splice(x,1),this}}})(),this)}queryRenderedFeatures(y,r){if(!this.style)return[];let l;const d=y instanceof h.P||Array.isArray(y),p=d?y:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:y)||{},p instanceof h.P||typeof p[0]=="number")l=[h.P.convert(p)];else{const x=h.P.convert(p[0]),w=h.P.convert(p[1]);l=[x,new h.P(w.x,x.y),w,new h.P(x.x,w.y),x]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(y,r){return this.style.querySourceFeatures(y,r)}setStyle(y,r){return(r=h.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(y,r))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const r=this._locale[y];if(r==null)throw new Error(`Missing UI string '${y}'`);return r}_updateStyle(y,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,r));const l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Hl(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,r,l):this.style.loadJSON(y,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Hl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,r){if(typeof y=="string"){const l=this._requestManager.transformRequest(y,"Style");h.h(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new h.j(d))})}else typeof y=="object"&&this._updateDiff(y,r)}_updateDiff(y,r){try{this.style.setState(y,r)&&this._update(!0)}catch(l){h.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(y,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():h.w("There is no style added to the map.")}addSource(y,r){return this._lazyInitEmptyStyle(),this.style.addSource(y,r),this._update(!0)}isSourceLoaded(y){const r=this.style&&this.style.sourceCaches[y];if(r!==void 0)return r.loaded();this.fire(new h.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const r=this.style.sourceCaches[y.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&r.reload();for(const l in this.style._layers){const d=this.style._layers[l];d.type==="hillshade"&&d.source===y.source&&h.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ht(this.painter,r,y),this.painter.renderToTexture=new rl(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new h.k("terrain",{terrain:y})),this}getTerrain(){var y,r;return(r=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const r in y){const l=y[r]._tiles;for(const d in l){const p=l[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,r,l={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:x,stretchY:w,content:E,textFitWidth:I,textFitHeight:A}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||h.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:B,data:q}=r,ee=r;return this.style.addImage(y,{data:new h.R({width:F,height:B},new Uint8Array(q)),pixelRatio:d,stretchX:x,stretchY:w,content:E,textFitWidth:I,textFitHeight:A,sdf:p,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,y),this}}{const{width:F,height:B,data:q}=z.getImageData(r);this.style.addImage(y,{data:new h.R({width:F,height:B},q),pixelRatio:d,stretchX:x,stretchY:w,content:E,textFitWidth:I,textFitHeight:A,sdf:p,version:0})}}updateImage(y,r){const l=this.style.getImage(y);if(!l)return this.fire(new h.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=r instanceof HTMLImageElement||h.b(r)?z.getImageData(r):r,{width:p,height:x,data:w}=d;if(p===void 0||x===void 0)return this.fire(new h.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==l.data.width||x!==l.data.height)return this.fire(new h.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(r instanceof HTMLImageElement||h.b(r));return l.data.replace(w,E),this.style.updateImage(y,l),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new h.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return H.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,r){return this._lazyInitEmptyStyle(),this.style.addLayer(y,r),this._update(!0)}moveLayer(y,r){return this.style.moveLayer(y,r),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,r,l){return this.style.setLayerZoomRange(y,r,l),this._update(!0)}setFilter(y,r,l={}){return this.style.setFilter(y,r,l),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,r,l,d={}){return this.style.setPaintProperty(y,r,l,d),this._update(!0)}getPaintProperty(y,r){return this.style.getPaintProperty(y,r)}setLayoutProperty(y,r,l,d={}){return this.style.setLayoutProperty(y,r,l,d),this._update(!0)}getLayoutProperty(y,r){return this.style.getLayoutProperty(y,r)}setGlyphs(y,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,r,l,d=>{d||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,r,l=>{l||this._update(!0)}),this}setLight(y,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,r),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,r){return this.style.setFeatureState(y,r),this._update()}removeFeatureState(y,r){return this.style.removeFeatureState(y,r),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,r=0;return this._container&&(y=this._container.clientWidth||400,r=this._container.clientHeight||300),[y,r]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const r=this._canvasContainer=M.create("div","maplibregl-canvas-container",y);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=M.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);const p=this._controlContainer=M.create("div","maplibregl-control-container",y),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{x[w]=M.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,r,l){this._canvas.width=Math.floor(l*y),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:y},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});const l=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!l){const d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new ju(l,this.transform),Y.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,x=z.now();this.style.zoomHistory.update(p,x);const w=new h.a8(p,{now:x,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=w.crossFadingFactor();E===1&&E===this._crossFadingFactor||(l=!0,this._crossFadingFactor=E),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new h.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,h.bc.mark(h.bd.load),this.fire(new h.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new h.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,h.bc.mark(h.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),H.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),M.remove(this._canvasContainer),M.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),h.bc.clearMetrics(),this._removed=!0,this.fire(new h.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frameAsync(this._frameRequest).then(y=>{h.bc.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return at}getCameraTargetElevation(){return this.transform.elevation}},g.MapMouseEvent=Er,g.MapTouchEvent=Wo,g.MapWheelEvent=cc,g.Marker=So,g.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{const d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=h.e({},Ng,y),this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),M.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=M.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){M.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,r){const l=M.create("button",y,this._container);return l.type="button",l.addEventListener("click",r),l}},g.Popup=class extends h.E{constructor(y){super(),this.remove=()=>(this._content&&M.remove(this._content),this._container&&(M.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new h.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=M.create("div","maplibregl-popup",this._map.getContainer()),this._tip=M.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?lh(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;const d=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const x=il(this.options.offset);if(!p){const E=this._container.offsetWidth,I=this._container.offsetHeight;let A;A=d.y+x.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<E/2?A.push("left"):d.x>this._map.transform.width-E/2&&A.push("right"),p=A.length===0?"bottom":A.join("-")}let w=d.add(x[p]);this.options.subpixelPositioning||(w=w.round()),M.setTransform(this._container,`${ch[p]} translate(${w.x}px,${w.y}px)`),zf(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=h.e(Object.create(jg),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new h.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=h.M.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const r=document.createDocumentFragment(),l=document.createElement("body");let d;for(l.innerHTML=y;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=M.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=M.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(io);y&&y.focus()}},g.RasterDEMTileSource=Gr,g.RasterTileSource=pr,g.ScaleControl=class{constructor(y){this._onMove=()=>{uh(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,uh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Rf),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){M.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=th,g.Style=Hl,g.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=M.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=M.create("button","maplibregl-ctrl-terrain",this._container),M.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){M.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=Ju,g.TwoFingersTouchRotateHandler=Yu,g.TwoFingersTouchZoomHandler=Xa,g.TwoFingersTouchZoomRotateHandler=Ya,g.VectorTileSource=Ie,g.VideoSource=xr,g.addSourceType=(y,r)=>h._(void 0,void 0,void 0,function*(){if(Lr(y))throw new Error(`A source type called "${y}" already exists.`);((l,d)=>{zi[l]=d})(y,r)}),g.clearPrewarmedResources=function(){const y=Zt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Xe),Zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.getMaxParallelImageRequests=function(){return h.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return br().getRTLTextPluginStatus()},g.getVersion=function(){return gt},g.getWorkerCount=function(){return wt.workerCount},g.getWorkerUrl=function(){return h.a.WORKER_URL},g.importScriptInWorkers=function(y){return zr().broadcast("IS",y)},g.prewarm=function(){Ht().acquire(Xe)},g.setMaxParallelImageRequests=function(y){h.a.MAX_PARALLEL_IMAGE_REQUESTS=y},g.setRTLTextPlugin=function(y,r){return br().setRTLTextPlugin(y,r)},g.setWorkerCount=function(y){wt.workerCount=y},g.setWorkerUrl=function(y){h.a.WORKER_URL=y}});var m=i;return m})})(ME);var U4=ME.exports;const H4=Rd(U4),W4=()=>xe.jsx(V4,{mapLib:H4,initialViewState:{latitude:55,longitude:20,zoom:3.5},style:{width:"100vw",height:"100vh"},mapStyle:"https://api.maptiler.com/maps/1eee1315-3e82-45cd-be7b-b93892ad86a4/style.json?key=vqiY7LIwUds5wXs9vJpE"});var zE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function i(){for(var m="",g=0;g<arguments.length;g++){var h=arguments[g];h&&(m=c(m,s(h)))}return m}function s(m){if(typeof m=="string"||typeof m=="number")return m;if(typeof m!="object")return"";if(Array.isArray(m))return i.apply(null,m);if(m.toString!==Object.prototype.toString&&!m.toString.toString().includes("[native code]"))return m.toString();var g="";for(var h in m)t.call(m,h)&&m[h]&&(g=c(g,h));return g}function c(m,g){return g?m?m+" "+g:m+g:m}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(zE);var q4=zE.exports;const mn=Rd(q4);function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Kn.apply(null,arguments)}var RE={exports:{}},dn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=Symbol.for("react.element"),o1=Symbol.for("react.portal"),ng=Symbol.for("react.fragment"),rg=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),og=Symbol.for("react.provider"),ag=Symbol.for("react.context"),G4=Symbol.for("react.server_context"),sg=Symbol.for("react.forward_ref"),lg=Symbol.for("react.suspense"),cg=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),hg=Symbol.for("react.lazy"),Z4=Symbol.for("react.offscreen"),LE;LE=Symbol.for("react.module.reference");function yo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case i1:switch(e=e.type,e){case ng:case ig:case rg:case lg:case cg:return e;default:switch(e=e&&e.$$typeof,e){case G4:case ag:case sg:case hg:case ug:case og:return e;default:return t}}case o1:return t}}}dn.ContextConsumer=ag;dn.ContextProvider=og;dn.Element=i1;dn.ForwardRef=sg;dn.Fragment=ng;dn.Lazy=hg;dn.Memo=ug;dn.Portal=o1;dn.Profiler=ig;dn.StrictMode=rg;dn.Suspense=lg;dn.SuspenseList=cg;dn.isAsyncMode=function(){return!1};dn.isConcurrentMode=function(){return!1};dn.isContextConsumer=function(e){return yo(e)===ag};dn.isContextProvider=function(e){return yo(e)===og};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===i1};dn.isForwardRef=function(e){return yo(e)===sg};dn.isFragment=function(e){return yo(e)===ng};dn.isLazy=function(e){return yo(e)===hg};dn.isMemo=function(e){return yo(e)===ug};dn.isPortal=function(e){return yo(e)===o1};dn.isProfiler=function(e){return yo(e)===ig};dn.isStrictMode=function(e){return yo(e)===rg};dn.isSuspense=function(e){return yo(e)===lg};dn.isSuspenseList=function(e){return yo(e)===cg};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ng||e===ig||e===rg||e===lg||e===cg||e===Z4||typeof e=="object"&&e!==null&&(e.$$typeof===hg||e.$$typeof===ug||e.$$typeof===og||e.$$typeof===ag||e.$$typeof===sg||e.$$typeof===LE||e.getModuleId!==void 0)};dn.typeOf=yo;RE.exports=dn;var Wp=RE.exports;function T0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return lt.Children.forEach(e,function(s){s==null&&!t.keepEmpty||(Array.isArray(s)?i=i.concat(T0(s)):Wp.isFragment(s)&&s.props?i=i.concat(T0(s.props.children,t)):i.push(s))}),i}var P0={},K4=function(t){};function X4(e,t){}function Y4(e,t){}function J4(){P0={}}function FE(e,t,i){!t&&!P0[i]&&(e(!1,i),P0[i]=!0)}function Ki(e,t){FE(X4,e,t)}function Q4(e,t){FE(Y4,e,t)}Ki.preMessage=K4;Ki.resetWarned=J4;Ki.noteOnce=Q4;function Gt(e){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(e)}function e5(e,t){if(Gt(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t||"default");if(Gt(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DE(e){var t=e5(e,"string");return Gt(t)=="symbol"?t:t+""}function Fe(e,t,i){return(t=DE(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function jw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,s)}return i}function Ke(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(i),!0).forEach(function(s){Fe(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jw(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function $w(e){return e instanceof HTMLElement||e instanceof SVGElement}function t5(e){return e&&Gt(e)==="object"&&$w(e.nativeElement)?e.nativeElement:$w(e)?e:null}function n5(e){var t=t5(e);if(t)return t;if(e instanceof lt.Component){var i;return(i=x0.findDOMNode)===null||i===void 0?void 0:i.call(x0,e)}return null}function a1(e,t,i){var s=N.useRef({});return(!("value"in s.current)||i(s.current.condition,t))&&(s.current.value=e(),s.current.condition=t),s.current.value}var OE=function(t,i){typeof t=="function"?t(i):Gt(t)==="object"&&t&&"current"in t&&(t.current=i)},dg=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];var c=i.filter(Boolean);return c.length<=1?c[0]:function(m){i.forEach(function(g){OE(g,m)})}},BE=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return a1(function(){return dg.apply(void 0,i)},i,function(c,m){return c.length!==m.length||c.every(function(g,h){return g!==m[h]})})},s1=function(t){var i,s,c=Wp.isMemo(t)?t.type.type:t.type;return!(typeof c=="function"&&!((i=c.prototype)!==null&&i!==void 0&&i.render)&&c.$$typeof!==Wp.ForwardRef||typeof t=="function"&&!((s=t.prototype)!==null&&s!==void 0&&s.render)&&t.$$typeof!==Wp.ForwardRef)};function ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vw(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,DE(s.key),s)}}function Mi(e,t,i){return t&&Vw(e.prototype,t),i&&Vw(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ed(e,t){return Ed=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},Ed(e,t)}function mu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ed(e,t)}function Rl(e){return Rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rl(e)}function fg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fg=function(){return!!e})()}function en(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(e,t){if(t&&(Gt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}function pg(e){var t=fg();return function(){var i,s=Rl(e);if(t){var c=Rl(this).constructor;i=Reflect.construct(s,arguments,c)}else i=s.apply(this,arguments);return NE(this,i)}}function r5(e,t){var i=Ke({},e);return Array.isArray(t)&&t.forEach(function(s){delete i[s]}),i}function I0(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function i5(e){if(Array.isArray(e))return I0(e)}function jE(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function l1(e,t){if(e){if(typeof e=="string")return I0(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I0(e,t):void 0}}function o5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tt(e){return i5(e)||jE(e)||l1(e)||o5()}var $E=function(t){return+setTimeout(t,16)},VE=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&($E=function(t){return window.requestAnimationFrame(t)},VE=function(t){return window.cancelAnimationFrame(t)});var Uw=0,c1=new Map;function UE(e){c1.delete(e)}var Ll=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Uw+=1;var s=Uw;function c(m){if(m===0)UE(s),t();else{var g=$E(function(){c(m-1)});c1.set(s,g)}}return c(i),s};Ll.cancel=function(e){var t=c1.get(e);return UE(e),VE(t)};function HE(e){if(Array.isArray(e))return e}function a5(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var s,c,m,g,h=[],C=!0,T=!1;try{if(m=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;C=!1}else for(;!(C=(s=m.call(i)).done)&&(h.push(s.value),h.length!==t);C=!0);}catch(k){T=!0,c=k}finally{try{if(!C&&i.return!=null&&(g=i.return(),Object(g)!==g))return}finally{if(T)throw c}}return h}}function WE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(e,t){return HE(e)||a5(e,t)||l1(e,t)||WE()}function Td(e){for(var t=0,i,s=0,c=e.length;c>=4;++s,c-=4)i=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Ii(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function k0(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var Hw="data-rc-order",Ww="data-rc-priority",s5="rc-util-key",M0=new Map;function qE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):s5}function mg(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function l5(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function u1(e){return Array.from((M0.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function GE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Ii())return null;var i=t.csp,s=t.prepend,c=t.priority,m=c===void 0?0:c,g=l5(s),h=g==="prependQueue",C=document.createElement("style");C.setAttribute(Hw,g),h&&m&&C.setAttribute(Ww,"".concat(m)),i!=null&&i.nonce&&(C.nonce=i==null?void 0:i.nonce),C.innerHTML=e;var T=mg(t),k=T.firstChild;if(s){if(h){var z=(t.styles||u1(T)).filter(function(M){if(!["prepend","prependQueue"].includes(M.getAttribute(Hw)))return!1;var Y=Number(M.getAttribute(Ww)||0);return m>=Y});if(z.length)return T.insertBefore(C,z[z.length-1].nextSibling),C}T.insertBefore(C,k)}else T.appendChild(C);return C}function ZE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=mg(t);return(t.styles||u1(i)).find(function(s){return s.getAttribute(qE(t))===e})}function Pd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=ZE(e,t);if(i){var s=mg(t);s.removeChild(i)}}function c5(e,t){var i=M0.get(e);if(!i||!k0(document,i)){var s=GE("",t),c=s.parentNode;M0.set(e,c),e.removeChild(s)}}function La(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=mg(i),c=u1(s),m=Ke(Ke({},i),{},{styles:c});c5(s,m);var g=ZE(t,m);if(g){var h,C;if((h=m.csp)!==null&&h!==void 0&&h.nonce&&g.nonce!==((C=m.csp)===null||C===void 0?void 0:C.nonce)){var T;g.nonce=(T=m.csp)===null||T===void 0?void 0:T.nonce}return g.innerHTML!==e&&(g.innerHTML=e),g}var k=GE(e,m);return k.setAttribute(qE(m),t),k}function u5(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function zs(e,t){if(e==null)return{};var i,s,c=u5(e,t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(s=0;s<m.length;s++)i=m[s],t.indexOf(i)>=0||{}.propertyIsEnumerable.call(e,i)&&(c[i]=e[i])}return c}function A0(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=new Set;function c(m,g){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=s.has(m);if(Ki(!C,"Warning: There may be circular references"),C)return!1;if(m===g)return!0;if(i&&h>1)return!1;s.add(m);var T=h+1;if(Array.isArray(m)){if(!Array.isArray(g)||m.length!==g.length)return!1;for(var k=0;k<m.length;k++)if(!c(m[k],g[k],T))return!1;return!0}if(m&&g&&Gt(m)==="object"&&Gt(g)==="object"){var z=Object.keys(m);return z.length!==Object.keys(g).length?!1:z.every(function(M){return c(m[M],g[M],T)})}return!1}return c(e,t)}var h5="%";function z0(e){return e.join(h5)}var d5=function(){function e(t){ki(this,e),Fe(this,"instanceId",void 0),Fe(this,"cache",new Map),this.instanceId=t}return Mi(e,[{key:"get",value:function(i){return this.opGet(z0(i))}},{key:"opGet",value:function(i){return this.cache.get(i)||null}},{key:"update",value:function(i,s){return this.opUpdate(z0(i),s)}},{key:"opUpdate",value:function(i,s){var c=this.cache.get(i),m=s(c);m===null?this.cache.delete(i):this.cache.set(i,m)}}]),e}(),su="data-token-hash",Bo="data-css-hash",_s="__cssinjs_instance__";function f5(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(Bo,"]"))||[],i=document.head.firstChild;Array.from(t).forEach(function(c){c[_s]=c[_s]||e,c[_s]===e&&document.head.insertBefore(c,i)});var s={};Array.from(document.querySelectorAll("style[".concat(Bo,"]"))).forEach(function(c){var m=c.getAttribute(Bo);if(s[m]){if(c[_s]===e){var g;(g=c.parentNode)===null||g===void 0||g.removeChild(c)}}else s[m]=!0})}return new d5(e)}var gg=N.createContext({hashPriority:"low",cache:f5(),defaultCache:!0});function p5(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var h1=function(){function e(){ki(this,e),Fe(this,"cache",void 0),Fe(this,"keys",void 0),Fe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Mi(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(i){var s,c,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g={map:this.cache};return i.forEach(function(h){if(!g)g=void 0;else{var C;g=(C=g)===null||C===void 0||(C=C.map)===null||C===void 0?void 0:C.get(h)}}),(s=g)!==null&&s!==void 0&&s.value&&m&&(g.value[1]=this.cacheCallTimes++),(c=g)===null||c===void 0?void 0:c.value}},{key:"get",value:function(i){var s;return(s=this.internalGet(i,!0))===null||s===void 0?void 0:s[0]}},{key:"has",value:function(i){return!!this.internalGet(i)}},{key:"set",value:function(i,s){var c=this;if(!this.has(i)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var m=this.keys.reduce(function(T,k){var z=Ft(T,2),M=z[1];return c.internalGet(k)[1]<M?[k,c.internalGet(k)[1]]:T},[this.keys[0],this.cacheCallTimes]),g=Ft(m,1),h=g[0];this.delete(h)}this.keys.push(i)}var C=this.cache;i.forEach(function(T,k){if(k===i.length-1)C.set(T,{value:[s,c.cacheCallTimes++]});else{var z=C.get(T);z?z.map||(z.map=new Map):C.set(T,{map:new Map}),C=C.get(T).map}})}},{key:"deleteByPath",value:function(i,s){var c=i.get(s[0]);if(s.length===1){var m;return c.map?i.set(s[0],{map:c.map}):i.delete(s[0]),(m=c.value)===null||m===void 0?void 0:m[0]}var g=this.deleteByPath(c.map,s.slice(1));return(!c.map||c.map.size===0)&&!c.value&&i.delete(s[0]),g}},{key:"delete",value:function(i){if(this.has(i))return this.keys=this.keys.filter(function(s){return!p5(s,i)}),this.deleteByPath(this.cache,i)}}]),e}();Fe(h1,"MAX_CACHE_SIZE",20);Fe(h1,"MAX_CACHE_OFFSET",5);var qw=0,KE=function(){function e(t){ki(this,e),Fe(this,"derivatives",void 0),Fe(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=qw,t.length===0&&(t.length>0,void 0),qw+=1}return Mi(e,[{key:"getDerivativeToken",value:function(i){return this.derivatives.reduce(function(s,c){return c(i,s)},void 0)}}]),e}(),cv=new h1;function R0(e){var t=Array.isArray(e)?e:[e];return cv.has(t)||cv.set(t,new KE(t)),cv.get(t)}var m5=new WeakMap,uv={};function g5(e,t){for(var i=m5,s=0;s<t.length;s+=1){var c=t[s];i.has(c)||i.set(c,new WeakMap),i=i.get(c)}return i.has(uv)||i.set(uv,e()),i.get(uv)}var Gw=new WeakMap;function nd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=Gw.get(e)||"";return i||(Object.keys(e).forEach(function(s){var c=e[s];i+=s,c instanceof KE?i+=c.id:c&&Gt(c)==="object"?i+=nd(c,t):i+=c}),t&&(i=Td(i)),Gw.set(e,i)),i}function Zw(e,t){return Td("".concat(t,"_").concat(nd(e,!0)))}var L0=Ii();function vn(e){return typeof e=="number"?"".concat(e,"px"):e}function Im(e,t,i){var s,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(m)return e;var g=Ke(Ke({},c),{},(s={},Fe(s,su,t),Fe(s,Bo,i),s)),h=Object.keys(g).map(function(C){var T=g[C];return T?"".concat(C,'="').concat(T,'"'):null}).filter(function(C){return C}).join(" ");return"<style ".concat(h,">").concat(e,"</style>")}var XE=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(i?"".concat(i,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},y5=function(t,i,s){return Object.keys(t).length?".".concat(i).concat(s!=null&&s.scope?".".concat(s.scope):"","{").concat(Object.entries(t).map(function(c){var m=Ft(c,2),g=m[0],h=m[1];return"".concat(g,":").concat(h,";")}).join(""),"}"):""},YE=function(t,i,s){var c={},m={};return Object.entries(t).forEach(function(g){var h,C,T=Ft(g,2),k=T[0],z=T[1];if(s!=null&&(h=s.preserve)!==null&&h!==void 0&&h[k])m[k]=z;else if((typeof z=="string"||typeof z=="number")&&!(s!=null&&(C=s.ignore)!==null&&C!==void 0&&C[k])){var M,Y=XE(k,s==null?void 0:s.prefix);c[Y]=typeof z=="number"&&!(s!=null&&(M=s.unitless)!==null&&M!==void 0&&M[k])?"".concat(z,"px"):String(z),m[k]="var(".concat(Y,")")}}),[m,y5(c,i,{scope:s==null?void 0:s.scope})]},Kw=Ii()?N.useLayoutEffect:N.useEffect,km=function(t,i){var s=N.useRef(!0);Kw(function(){return t(s.current)},i),Kw(function(){return s.current=!1,function(){s.current=!0}},[])},v5=Ke({},Fd),Xw=v5.useInsertionEffect,_5=function(t,i,s){N.useMemo(t,s),km(function(){return i(!0)},s)},x5=Xw?function(e,t,i){return Xw(function(){return e(),t()},i)}:_5,b5=Ke({},Fd),w5=b5.useInsertionEffect,S5=function(t){var i=[],s=!1;function c(m){s||i.push(m)}return N.useEffect(function(){return s=!1,function(){s=!0,i.length&&i.forEach(function(m){return m()})}},t),c},C5=function(){return function(t){t()}},E5=typeof w5<"u"?S5:C5;function d1(e,t,i,s,c){var m=N.useContext(gg),g=m.cache,h=[e].concat(Tt(t)),C=z0(h),T=E5([C]),k=function(K){g.opUpdate(C,function(Z){var Q=Z||[void 0,void 0],U=Ft(Q,2),D=U[0],H=D===void 0?0:D,ne=U[1],he=ne,ge=he||i(),ue=[H,ge];return K?K(ue):ue})};N.useMemo(function(){k()},[C]);var z=g.opGet(C),M=z[1];return x5(function(){c==null||c(M)},function(Y){return k(function(K){var Z=Ft(K,2),Q=Z[0],U=Z[1];return Y&&Q===0&&(c==null||c(M)),[Q+1,U]}),function(){g.opUpdate(C,function(K){var Z=K||[],Q=Ft(Z,2),U=Q[0],D=U===void 0?0:U,H=Q[1],ne=D-1;return ne===0?(T(function(){(Y||!g.opGet(C))&&(s==null||s(H,!1))}),null):[D-1,H]})}},[C]),M}var T5={},P5="css",yl=new Map;function I5(e){yl.set(e,(yl.get(e)||0)+1)}function k5(e,t){if(typeof document<"u"){var i=document.querySelectorAll("style[".concat(su,'="').concat(e,'"]'));i.forEach(function(s){if(s[_s]===t){var c;(c=s.parentNode)===null||c===void 0||c.removeChild(s)}})}}var M5=0;function A5(e,t){yl.set(e,(yl.get(e)||0)-1);var i=Array.from(yl.keys()),s=i.filter(function(c){var m=yl.get(c)||0;return m<=0});i.length-s.length>M5&&s.forEach(function(c){k5(c,t),yl.delete(c)})}var z5=function(t,i,s,c){var m=s.getDerivativeToken(t),g=Ke(Ke({},m),i);return c&&(g=c(g)),g},JE="token";function R5(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=N.useContext(gg),c=s.cache.instanceId,m=s.container,g=i.salt,h=g===void 0?"":g,C=i.override,T=C===void 0?T5:C,k=i.formatToken,z=i.getComputedToken,M=i.cssVar,Y=g5(function(){return Object.assign.apply(Object,[{}].concat(Tt(t)))},t),K=nd(Y),Z=nd(T),Q=M?nd(M):"",U=d1(JE,[h,e.id,K,Z,Q],function(){var D,H=z?z(Y,T,e):z5(Y,T,e,k),ne=Ke({},H),he="";if(M){var ge=YE(H,M.key,{prefix:M.prefix,ignore:M.ignore,unitless:M.unitless,preserve:M.preserve}),ue=Ft(ge,2);H=ue[0],he=ue[1]}var Me=Zw(H,h);H._tokenKey=Me,ne._tokenKey=Zw(ne,h);var Be=(D=M==null?void 0:M.key)!==null&&D!==void 0?D:Me;H._themeKey=Be,I5(Be);var Re="".concat(P5,"-").concat(Td(Me));return H._hashId=Re,[H,Re,ne,he,(M==null?void 0:M.key)||""]},function(D){A5(D[0]._themeKey,c)},function(D){var H=Ft(D,4),ne=H[0],he=H[3];if(M&&he){var ge=La(he,Td("css-variables-".concat(ne._themeKey)),{mark:Bo,prepend:"queue",attachTo:m,priority:-999});ge[_s]=c,ge.setAttribute(su,ne._themeKey)}});return U}var L5=function(t,i,s){var c=Ft(t,5),m=c[2],g=c[3],h=c[4],C=s||{},T=C.plain;if(!g)return null;var k=m._tokenKey,z=-999,M={"data-rc-order":"prependQueue","data-rc-priority":"".concat(z)},Y=Im(g,h,k,M,T);return[z,k,Y]},F5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},QE="comm",eT="rule",tT="decl",D5="@import",O5="@keyframes",B5="@layer",nT=Math.abs,f1=String.fromCharCode;function rT(e){return e.trim()}function qp(e,t,i){return e.replace(t,i)}function N5(e,t,i){return e.indexOf(t,i)}function Id(e,t){return e.charCodeAt(t)|0}function kd(e,t,i){return e.slice(t,i)}function ka(e){return e.length}function j5(e){return e.length}function wp(e,t){return t.push(e),e}var yg=1,lu=1,iT=0,go=0,dr=0,gu="";function p1(e,t,i,s,c,m,g,h){return{value:e,root:t,parent:i,type:s,props:c,children:m,line:yg,column:lu,length:g,return:"",siblings:h}}function $5(){return dr}function V5(){return dr=go>0?Id(gu,--go):0,lu--,dr===10&&(lu=1,yg--),dr}function No(){return dr=go<iT?Id(gu,go++):0,lu++,dr===10&&(lu=1,yg++),dr}function Tl(){return Id(gu,go)}function Gp(){return go}function vg(e,t){return kd(gu,e,t)}function F0(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function U5(e){return yg=lu=1,iT=ka(gu=e),go=0,[]}function H5(e){return gu="",e}function hv(e){return rT(vg(go-1,D0(e===91?e+2:e===40?e+1:e)))}function W5(e){for(;(dr=Tl())&&dr<33;)No();return F0(e)>2||F0(dr)>3?"":" "}function q5(e,t){for(;--t&&No()&&!(dr<48||dr>102||dr>57&&dr<65||dr>70&&dr<97););return vg(e,Gp()+(t<6&&Tl()==32&&No()==32))}function D0(e){for(;No();)switch(dr){case e:return go;case 34:case 39:e!==34&&e!==39&&D0(dr);break;case 40:e===41&&D0(e);break;case 92:No();break}return go}function G5(e,t){for(;No()&&e+dr!==57;)if(e+dr===84&&Tl()===47)break;return"/*"+vg(t,go-1)+"*"+f1(e===47?e:No())}function Z5(e){for(;!F0(Tl());)No();return vg(e,go)}function K5(e){return H5(Zp("",null,null,null,[""],e=U5(e),0,[0],e))}function Zp(e,t,i,s,c,m,g,h,C){for(var T=0,k=0,z=g,M=0,Y=0,K=0,Z=1,Q=1,U=1,D=0,H="",ne=c,he=m,ge=s,ue=H;Q;)switch(K=D,D=No()){case 40:if(K!=108&&Id(ue,z-1)==58){N5(ue+=qp(hv(D),"&","&\f"),"&\f",nT(T?h[T-1]:0))!=-1&&(U=-1);break}case 34:case 39:case 91:ue+=hv(D);break;case 9:case 10:case 13:case 32:ue+=W5(K);break;case 92:ue+=q5(Gp()-1,7);continue;case 47:switch(Tl()){case 42:case 47:wp(X5(G5(No(),Gp()),t,i,C),C);break;default:ue+="/"}break;case 123*Z:h[T++]=ka(ue)*U;case 125*Z:case 59:case 0:switch(D){case 0:case 125:Q=0;case 59+k:U==-1&&(ue=qp(ue,/\f/g,"")),Y>0&&ka(ue)-z&&wp(Y>32?Jw(ue+";",s,i,z-1,C):Jw(qp(ue," ","")+";",s,i,z-2,C),C);break;case 59:ue+=";";default:if(wp(ge=Yw(ue,t,i,T,k,c,h,H,ne=[],he=[],z,m),m),D===123)if(k===0)Zp(ue,t,ge,ge,ne,m,z,h,he);else switch(M===99&&Id(ue,3)===110?100:M){case 100:case 108:case 109:case 115:Zp(e,ge,ge,s&&wp(Yw(e,ge,ge,0,0,c,h,H,c,ne=[],z,he),he),c,he,z,h,s?ne:he);break;default:Zp(ue,ge,ge,ge,[""],he,0,h,he)}}T=k=Y=0,Z=U=1,H=ue="",z=g;break;case 58:z=1+ka(ue),Y=K;default:if(Z<1){if(D==123)--Z;else if(D==125&&Z++==0&&V5()==125)continue}switch(ue+=f1(D),D*Z){case 38:U=k>0?1:(ue+="\f",-1);break;case 44:h[T++]=(ka(ue)-1)*U,U=1;break;case 64:Tl()===45&&(ue+=hv(No())),M=Tl(),k=z=ka(H=ue+=Z5(Gp())),D++;break;case 45:K===45&&ka(ue)==2&&(Z=0)}}return m}function Yw(e,t,i,s,c,m,g,h,C,T,k,z){for(var M=c-1,Y=c===0?m:[""],K=j5(Y),Z=0,Q=0,U=0;Z<s;++Z)for(var D=0,H=kd(e,M+1,M=nT(Q=g[Z])),ne=e;D<K;++D)(ne=rT(Q>0?Y[D]+" "+H:qp(H,/&\f/g,Y[D])))&&(C[U++]=ne);return p1(e,t,i,c===0?eT:h,C,T,k,z)}function X5(e,t,i,s){return p1(e,t,i,QE,f1($5()),kd(e,2,-2),0,s)}function Jw(e,t,i,s,c){return p1(e,t,i,tT,kd(e,0,s),kd(e,s+1,-1),s,c)}function O0(e,t){for(var i="",s=0;s<e.length;s++)i+=t(e[s],s,e,t)||"";return i}function Y5(e,t,i,s){switch(e.type){case B5:if(e.children.length)break;case D5:case tT:return e.return=e.return||e.value;case QE:return"";case O5:return e.return=e.value+"{"+O0(e.children,s)+"}";case eT:if(!ka(e.value=e.props.join(",")))return""}return ka(i=O0(e.children,s))?e.return=e.value+"{"+i+"}":""}var Qw="data-ant-cssinjs-cache-path",oT="_FILE_STYLE__",Pl,aT=!0;function J5(){if(!Pl&&(Pl={},Ii())){var e=document.createElement("div");e.className=Qw,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(c){var m=c.split(":"),g=Ft(m,2),h=g[0],C=g[1];Pl[h]=C});var i=document.querySelector("style[".concat(Qw,"]"));if(i){var s;aT=!1,(s=i.parentNode)===null||s===void 0||s.removeChild(i)}document.body.removeChild(e)}}function Q5(e){return J5(),!!Pl[e]}function ez(e){var t=Pl[e],i=null;if(t&&Ii())if(aT)i=oT;else{var s=document.querySelector("style[".concat(Bo,'="').concat(Pl[e],'"]'));s?i=s.innerHTML:delete Pl[e]}return[i,t]}var tz="_skip_check_",sT="_multi_value_";function Kp(e){var t=O0(K5(e),Y5);return t.replace(/\{%%%\:[^;];}/g,";")}function nz(e){return Gt(e)==="object"&&e&&(tz in e||sT in e)}function rz(e,t,i){if(!t)return e;var s=".".concat(t),c=i==="low"?":where(".concat(s,")"):s,m=e.split(",").map(function(g){var h,C=g.trim().split(/\s+/),T=C[0]||"",k=((h=T.match(/^\w+/))===null||h===void 0?void 0:h[0])||"";return T="".concat(k).concat(c).concat(T.slice(k.length)),[T].concat(Tt(C.slice(1))).join(" ")});return m.join(",")}var iz=function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},c=s.root,m=s.injectHash,g=s.parentSelectors,h=i.hashId,C=i.layer;i.path;var T=i.hashPriority,k=i.transformers,z=k===void 0?[]:k;i.linters;var M="",Y={};function K(U){var D=U.getName(h);if(!Y[D]){var H=e(U.style,i,{root:!1,parentSelectors:g}),ne=Ft(H,1),he=ne[0];Y[D]="@keyframes ".concat(U.getName(h)).concat(he)}}function Z(U){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return U.forEach(function(H){Array.isArray(H)?Z(H,D):H&&D.push(H)}),D}var Q=Z(Array.isArray(t)?t:[t]);return Q.forEach(function(U){var D=typeof U=="string"&&!c?{}:U;if(typeof D=="string")M+="".concat(D,`
`);else if(D._keyframe)K(D);else{var H=z.reduce(function(ne,he){var ge;return(he==null||(ge=he.visit)===null||ge===void 0?void 0:ge.call(he,ne))||ne},D);Object.keys(H).forEach(function(ne){var he=H[ne];if(Gt(he)==="object"&&he&&(ne!=="animationName"||!he._keyframe)&&!nz(he)){var ge=!1,ue=ne.trim(),Me=!1;(c||m)&&h?ue.startsWith("@")?ge=!0:ue=rz(ne,h,T):c&&!h&&(ue==="&"||ue==="")&&(ue="",Me=!0);var Be=e(he,i,{root:Me,injectHash:ge,parentSelectors:[].concat(Tt(g),[ue])}),Re=Ft(Be,2),He=Re[0],rt=Re[1];Y=Ke(Ke({},Y),rt),M+="".concat(ue).concat(He)}else{let ut=function(Oe,Pe){var Se=Oe.replace(/[A-Z]/g,function(Ve){return"-".concat(Ve.toLowerCase())}),ze=Pe;!F5[Oe]&&typeof ze=="number"&&ze!==0&&(ze="".concat(ze,"px")),Oe==="animationName"&&Pe!==null&&Pe!==void 0&&Pe._keyframe&&(K(Pe),ze=Pe.getName(h)),M+="".concat(Se,":").concat(ze,";")};var Ze,qe=(Ze=he==null?void 0:he.value)!==null&&Ze!==void 0?Ze:he;Gt(he)==="object"&&he!==null&&he!==void 0&&he[sT]&&Array.isArray(qe)?qe.forEach(function(Oe){ut(ne,Oe)}):ut(ne,qe)}})}}),c?C&&(M="@layer ".concat(C.name," {").concat(M,"}"),C.dependencies&&(Y["@layer ".concat(C.name)]=C.dependencies.map(function(U){return"@layer ".concat(U,", ").concat(C.name,";")}).join(`
`))):M="{".concat(M,"}"),[M,Y]};function lT(e,t){return Td("".concat(e.join("%")).concat(t))}function oz(){return null}var cT="style";function B0(e,t){var i=e.token,s=e.path,c=e.hashId,m=e.layer,g=e.nonce,h=e.clientOnly,C=e.order,T=C===void 0?0:C,k=N.useContext(gg),z=k.autoClear;k.mock;var M=k.defaultCache,Y=k.hashPriority,K=k.container,Z=k.ssrInline,Q=k.transformers,U=k.linters,D=k.cache,H=k.layer,ne=i._tokenKey,he=[ne];H&&he.push("layer"),he.push.apply(he,Tt(s));var ge=L0,ue=d1(cT,he,function(){var rt=he.join("|");if(Q5(rt)){var Ze=ez(rt),qe=Ft(Ze,2),ut=qe[0],Oe=qe[1];if(ut)return[ut,ne,Oe,{},h,T]}var Pe=t(),Se=iz(Pe,{hashId:c,hashPriority:Y,layer:H?m:void 0,path:s.join("-"),transformers:Q,linters:U}),ze=Ft(Se,2),Ve=ze[0],We=ze[1],Xe=Kp(Ve),wt=lT(he,Xe);return[Xe,ne,wt,We,h,T]},function(rt,Ze){var qe=Ft(rt,3),ut=qe[2];(Ze||z)&&L0&&Pd(ut,{mark:Bo})},function(rt){var Ze=Ft(rt,4),qe=Ze[0];Ze[1];var ut=Ze[2],Oe=Ze[3];if(ge&&qe!==oT){var Pe={mark:Bo,prepend:H?!1:"queue",attachTo:K,priority:T},Se=typeof g=="function"?g():g;Se&&(Pe.csp={nonce:Se});var ze=[],Ve=[];Object.keys(Oe).forEach(function(Xe){Xe.startsWith("@layer")?ze.push(Xe):Ve.push(Xe)}),ze.forEach(function(Xe){La(Kp(Oe[Xe]),"_layer-".concat(Xe),Ke(Ke({},Pe),{},{prepend:!0}))});var We=La(qe,ut,Pe);We[_s]=D.instanceId,We.setAttribute(su,ne),Ve.forEach(function(Xe){La(Kp(Oe[Xe]),"_effect-".concat(Xe),Pe)})}}),Me=Ft(ue,3),Be=Me[0],Re=Me[1],He=Me[2];return function(rt){var Ze;if(!Z||ge||!M)Ze=N.createElement(oz,null);else{var qe;Ze=N.createElement("style",Kn({},(qe={},Fe(qe,su,Re),Fe(qe,Bo,He),qe),{dangerouslySetInnerHTML:{__html:Be}}))}return N.createElement(N.Fragment,null,Ze,rt)}}var az=function(t,i,s){var c=Ft(t,6),m=c[0],g=c[1],h=c[2],C=c[3],T=c[4],k=c[5],z=s||{},M=z.plain;if(T)return null;var Y=m,K={"data-rc-order":"prependQueue","data-rc-priority":"".concat(k)};return Y=Im(m,g,h,K,M),C&&Object.keys(C).forEach(function(Z){if(!i[Z]){i[Z]=!0;var Q=Kp(C[Z]),U=Im(Q,g,"_effect-".concat(Z),K,M);Z.startsWith("@layer")?Y=U+Y:Y+=U}}),[k,h,Y]},uT="cssVar",sz=function(t,i){var s=t.key,c=t.prefix,m=t.unitless,g=t.ignore,h=t.token,C=t.scope,T=C===void 0?"":C,k=N.useContext(gg),z=k.cache.instanceId,M=k.container,Y=h._tokenKey,K=[].concat(Tt(t.path),[s,T,Y]),Z=d1(uT,K,function(){var Q=i(),U=YE(Q,s,{prefix:c,unitless:m,ignore:g,scope:T}),D=Ft(U,2),H=D[0],ne=D[1],he=lT(K,ne);return[H,ne,he,s]},function(Q){var U=Ft(Q,3),D=U[2];L0&&Pd(D,{mark:Bo})},function(Q){var U=Ft(Q,3),D=U[1],H=U[2];if(D){var ne=La(D,H,{mark:Bo,prepend:"queue",attachTo:M,priority:-999});ne[_s]=z,ne.setAttribute(su,s)}});return Z},lz=function(t,i,s){var c=Ft(t,4),m=c[1],g=c[2],h=c[3],C=s||{},T=C.plain;if(!m)return null;var k=-999,z={"data-rc-order":"prependQueue","data-rc-priority":"".concat(k)},M=Im(m,h,g,z,T);return[k,g,M]},jh;jh={},Fe(jh,cT,az),Fe(jh,JE,L5),Fe(jh,uT,lz);var Ai=function(){function e(t,i){ki(this,e),Fe(this,"name",void 0),Fe(this,"style",void 0),Fe(this,"_keyframe",!0),this.name=t,this.style=i}return Mi(e,[{key:"getName",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return i?"".concat(i,"-").concat(this.name):this.name}}]),e}();function Tc(e){return e.notSplit=!0,e}Tc(["borderTop","borderBottom"]),Tc(["borderTop"]),Tc(["borderBottom"]),Tc(["borderLeft","borderRight"]),Tc(["borderLeft"]),Tc(["borderRight"]);var m1=N.createContext({});function cz(e){return HE(e)||jE(e)||l1(e)||WE()}function na(e,t){for(var i=e,s=0;s<t.length;s+=1){if(i==null)return;i=i[t[s]]}return i}function hT(e,t,i,s){if(!t.length)return i;var c=cz(t),m=c[0],g=c.slice(1),h;return!e&&typeof m=="number"?h=[]:Array.isArray(e)?h=Tt(e):h=Ke({},e),s&&i===void 0&&g.length===1?delete h[m][g[0]]:h[m]=hT(h[m],g,i,s),h}function Ro(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&s&&i===void 0&&!na(e,t.slice(0,-1))?e:hT(e,t,i,s)}function uz(e){return Gt(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function e2(e){return Array.isArray(e)?[]:{}}var hz=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Vc(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=e2(t[0]);return t.forEach(function(c){function m(g,h){var C=new Set(h),T=na(c,g),k=Array.isArray(T);if(k||uz(T)){if(!C.has(T)){C.add(T);var z=na(s,g);k?s=Ro(s,g,[]):(!z||Gt(z)!=="object")&&(s=Ro(s,g,e2(T))),hz(T).forEach(function(M){m([].concat(Tt(g),[M]),C)})}}else s=Ro(s,g,T)}m([])}),s}const dz=N.createContext({}),fz=N.createContext(void 0);var pz={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},mz={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const dT={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},t2={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},mz),timePickerLocale:Object.assign({},dT)},$i="${label} is not a valid ${type}",Fl={locale:"en",Pagination:pz,DatePicker:t2,TimePicker:dT,Calendar:t2,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:$i,method:$i,array:$i,object:$i,number:$i,date:$i,boolean:$i,integer:$i,float:$i,regexp:$i,email:$i,url:$i,hex:$i},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};let Xp=Object.assign({},Fl.Modal),Yp=[];const n2=()=>Yp.reduce((e,t)=>Object.assign(Object.assign({},e),t),Fl.Modal);function gz(e){if(e){const t=Object.assign({},e);return Yp.push(t),Xp=n2(),()=>{Yp=Yp.filter(i=>i!==t),Xp=n2()}}Xp=Object.assign({},Fl.Modal)}function fT(){return Xp}const g1=N.createContext(void 0),y1=(e,t)=>{const i=N.useContext(g1),s=N.useMemo(()=>{var m;const g=t||Fl[e],h=(m=i==null?void 0:i[e])!==null&&m!==void 0?m:{};return Object.assign(Object.assign({},typeof g=="function"?g():g),h||{})},[e,t,i]),c=N.useMemo(()=>{const m=i==null?void 0:i.locale;return i!=null&&i.exist&&!m?Fl.locale:m},[i]);return[s,c]},yz="internalMark",vz=e=>{const{locale:t={},children:i,_ANT_MARK__:s}=e;N.useEffect(()=>gz(t&&t.Modal),[t]);const c=N.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return N.createElement(g1.Provider,{value:c},i)};function Wr(e,t){_z(e)&&(e="100%");var i=xz(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Sp(e){return Math.min(1,Math.max(0,e))}function _z(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function xz(e){return typeof e=="string"&&e.indexOf("%")!==-1}function pT(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Cp(e){return e<=1?"".concat(Number(e)*100,"%"):e}function bl(e){return e.length===1?"0"+e:String(e)}function bz(e,t,i){return{r:Wr(e,255)*255,g:Wr(t,255)*255,b:Wr(i,255)*255}}function r2(e,t,i){e=Wr(e,255),t=Wr(t,255),i=Wr(i,255);var s=Math.max(e,t,i),c=Math.min(e,t,i),m=0,g=0,h=(s+c)/2;if(s===c)g=0,m=0;else{var C=s-c;switch(g=h>.5?C/(2-s-c):C/(s+c),s){case e:m=(t-i)/C+(t<i?6:0);break;case t:m=(i-e)/C+2;break;case i:m=(e-t)/C+4;break}m/=6}return{h:m,s:g,l:h}}function dv(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*(6*i):i<1/2?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function wz(e,t,i){var s,c,m;if(e=Wr(e,360),t=Wr(t,100),i=Wr(i,100),t===0)c=i,m=i,s=i;else{var g=i<.5?i*(1+t):i+t-i*t,h=2*i-g;s=dv(h,g,e+1/3),c=dv(h,g,e),m=dv(h,g,e-1/3)}return{r:s*255,g:c*255,b:m*255}}function N0(e,t,i){e=Wr(e,255),t=Wr(t,255),i=Wr(i,255);var s=Math.max(e,t,i),c=Math.min(e,t,i),m=0,g=s,h=s-c,C=s===0?0:h/s;if(s===c)m=0;else{switch(s){case e:m=(t-i)/h+(t<i?6:0);break;case t:m=(i-e)/h+2;break;case i:m=(e-t)/h+4;break}m/=6}return{h:m,s:C,v:g}}function Sz(e,t,i){e=Wr(e,360)*6,t=Wr(t,100),i=Wr(i,100);var s=Math.floor(e),c=e-s,m=i*(1-t),g=i*(1-c*t),h=i*(1-(1-c)*t),C=s%6,T=[i,g,m,m,h,i][C],k=[h,i,i,g,m,m][C],z=[m,m,h,i,i,g][C];return{r:T*255,g:k*255,b:z*255}}function j0(e,t,i,s){var c=[bl(Math.round(e).toString(16)),bl(Math.round(t).toString(16)),bl(Math.round(i).toString(16))];return s&&c[0].startsWith(c[0].charAt(1))&&c[1].startsWith(c[1].charAt(1))&&c[2].startsWith(c[2].charAt(1))?c[0].charAt(0)+c[1].charAt(0)+c[2].charAt(0):c.join("")}function Cz(e,t,i,s,c){var m=[bl(Math.round(e).toString(16)),bl(Math.round(t).toString(16)),bl(Math.round(i).toString(16)),bl(Ez(s))];return c&&m[0].startsWith(m[0].charAt(1))&&m[1].startsWith(m[1].charAt(1))&&m[2].startsWith(m[2].charAt(1))&&m[3].startsWith(m[3].charAt(1))?m[0].charAt(0)+m[1].charAt(0)+m[2].charAt(0)+m[3].charAt(0):m.join("")}function Ez(e){return Math.round(parseFloat(e)*255).toString(16)}function i2(e){return Ui(e)/255}function Ui(e){return parseInt(e,16)}function Tz(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var $0={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function kc(e){var t={r:0,g:0,b:0},i=1,s=null,c=null,m=null,g=!1,h=!1;return typeof e=="string"&&(e=kz(e)),typeof e=="object"&&(Ea(e.r)&&Ea(e.g)&&Ea(e.b)?(t=bz(e.r,e.g,e.b),g=!0,h=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ea(e.h)&&Ea(e.s)&&Ea(e.v)?(s=Cp(e.s),c=Cp(e.v),t=Sz(e.h,s,c),g=!0,h="hsv"):Ea(e.h)&&Ea(e.s)&&Ea(e.l)&&(s=Cp(e.s),m=Cp(e.l),t=wz(e.h,s,m),g=!0,h="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=pT(i),{ok:g,format:e.format||h,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var Pz="[-\\+]?\\d+%?",Iz="[-\\+]?\\d*\\.\\d+%?",xs="(?:".concat(Iz,")|(?:").concat(Pz,")"),fv="[\\s|\\(]+(".concat(xs,")[,|\\s]+(").concat(xs,")[,|\\s]+(").concat(xs,")\\s*\\)?"),pv="[\\s|\\(]+(".concat(xs,")[,|\\s]+(").concat(xs,")[,|\\s]+(").concat(xs,")[,|\\s]+(").concat(xs,")\\s*\\)?"),Mo={CSS_UNIT:new RegExp(xs),rgb:new RegExp("rgb"+fv),rgba:new RegExp("rgba"+pv),hsl:new RegExp("hsl"+fv),hsla:new RegExp("hsla"+pv),hsv:new RegExp("hsv"+fv),hsva:new RegExp("hsva"+pv),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function kz(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if($0[e])e=$0[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i=Mo.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=Mo.rgba.exec(e),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Mo.hsl.exec(e),i?{h:i[1],s:i[2],l:i[3]}:(i=Mo.hsla.exec(e),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Mo.hsv.exec(e),i?{h:i[1],s:i[2],v:i[3]}:(i=Mo.hsva.exec(e),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Mo.hex8.exec(e),i?{r:Ui(i[1]),g:Ui(i[2]),b:Ui(i[3]),a:i2(i[4]),format:t?"name":"hex8"}:(i=Mo.hex6.exec(e),i?{r:Ui(i[1]),g:Ui(i[2]),b:Ui(i[3]),format:t?"name":"hex"}:(i=Mo.hex4.exec(e),i?{r:Ui(i[1]+i[1]),g:Ui(i[2]+i[2]),b:Ui(i[3]+i[3]),a:i2(i[4]+i[4]),format:t?"name":"hex8"}:(i=Mo.hex3.exec(e),i?{r:Ui(i[1]+i[1]),g:Ui(i[2]+i[2]),b:Ui(i[3]+i[3]),format:t?"name":"hex"}:!1)))))))))}function Ea(e){return!!Mo.CSS_UNIT.exec(String(e))}var qi=function(){function e(t,i){t===void 0&&(t=""),i===void 0&&(i={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=Tz(t)),this.originalInput=t;var c=kc(t);this.originalInput=t,this.r=c.r,this.g=c.g,this.b=c.b,this.a=c.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=i.format)!==null&&s!==void 0?s:c.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=c.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),i,s,c,m=t.r/255,g=t.g/255,h=t.b/255;return m<=.03928?i=m/12.92:i=Math.pow((m+.055)/1.055,2.4),g<=.03928?s=g/12.92:s=Math.pow((g+.055)/1.055,2.4),h<=.03928?c=h/12.92:c=Math.pow((h+.055)/1.055,2.4),.2126*i+.7152*s+.0722*c},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=pT(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=N0(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=N0(this.r,this.g,this.b),i=Math.round(t.h*360),s=Math.round(t.s*100),c=Math.round(t.v*100);return this.a===1?"hsv(".concat(i,", ").concat(s,"%, ").concat(c,"%)"):"hsva(".concat(i,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=r2(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=r2(this.r,this.g,this.b),i=Math.round(t.h*360),s=Math.round(t.s*100),c=Math.round(t.l*100);return this.a===1?"hsl(".concat(i,", ").concat(s,"%, ").concat(c,"%)"):"hsla(".concat(i,", ").concat(s,"%, ").concat(c,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),j0(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Cz(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),i=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(i,", ").concat(s,")"):"rgba(".concat(t,", ").concat(i,", ").concat(s,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(i){return"".concat(Math.round(Wr(i,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(i){return Math.round(Wr(i,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+j0(this.r,this.g,this.b,!1),i=0,s=Object.entries($0);i<s.length;i++){var c=s[i],m=c[0],g=c[1];if(t===g)return m}return!1},e.prototype.toString=function(t){var i=!!t;t=t??this.format;var s=!1,c=this.a<1&&this.a>=0,m=!i&&c&&(t.startsWith("hex")||t==="name");return m?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=Sp(i.l),new e(i)},e.prototype.brighten=function(t){t===void 0&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(255*-(t/100)))),i.g=Math.max(0,Math.min(255,i.g-Math.round(255*-(t/100)))),i.b=Math.max(0,Math.min(255,i.b-Math.round(255*-(t/100)))),new e(i)},e.prototype.darken=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=Sp(i.l),new e(i)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=Sp(i.s),new e(i)},e.prototype.saturate=function(t){t===void 0&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=Sp(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),s=(i.h+t)%360;return i.h=s<0?360+s:s,new e(i)},e.prototype.mix=function(t,i){i===void 0&&(i=50);var s=this.toRgb(),c=new e(t).toRgb(),m=i/100,g={r:(c.r-s.r)*m+s.r,g:(c.g-s.g)*m+s.g,b:(c.b-s.b)*m+s.b,a:(c.a-s.a)*m+s.a};return new e(g)},e.prototype.analogous=function(t,i){t===void 0&&(t=6),i===void 0&&(i=30);var s=this.toHsl(),c=360/i,m=[this];for(s.h=(s.h-(c*t>>1)+720)%360;--t;)s.h=(s.h+c)%360,m.push(new e(s));return m},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var i=this.toHsv(),s=i.h,c=i.s,m=i.v,g=[],h=1/t;t--;)g.push(new e({h:s,s:c,v:m})),m=(m+h)%1;return g},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),s=new e(t).toRgb(),c=i.a+s.a*(1-i.a);return new e({r:(i.r*i.a+s.r*s.a*(1-i.a))/c,g:(i.g*i.a+s.g*s.a*(1-i.a))/c,b:(i.b*i.a+s.b*s.a*(1-i.a))/c,a:c})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),s=i.h,c=[this],m=360/t,g=1;g<t;g++)c.push(new e({h:(s+g*m)%360,s:i.s,l:i.l}));return c},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}(),Ep=2,o2=.16,Mz=.05,Az=.05,zz=.15,mT=5,gT=4,Rz=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function a2(e){var t=e.r,i=e.g,s=e.b,c=N0(t,i,s);return{h:c.h*360,s:c.s,v:c.v}}function Tp(e){var t=e.r,i=e.g,s=e.b;return"#".concat(j0(t,i,s,!1))}function Lz(e,t,i){var s=i/100,c={r:(t.r-e.r)*s+e.r,g:(t.g-e.g)*s+e.g,b:(t.b-e.b)*s+e.b};return c}function s2(e,t,i){var s;return Math.round(e.h)>=60&&Math.round(e.h)<=240?s=i?Math.round(e.h)-Ep*t:Math.round(e.h)+Ep*t:s=i?Math.round(e.h)+Ep*t:Math.round(e.h)-Ep*t,s<0?s+=360:s>=360&&(s-=360),s}function l2(e,t,i){if(e.h===0&&e.s===0)return e.s;var s;return i?s=e.s-o2*t:t===gT?s=e.s+o2:s=e.s+Mz*t,s>1&&(s=1),i&&t===mT&&s>.1&&(s=.1),s<.06&&(s=.06),Number(s.toFixed(2))}function c2(e,t,i){var s;return i?s=e.v+Az*t:s=e.v-zz*t,s>1&&(s=1),Number(s.toFixed(2))}function Dl(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],s=kc(e),c=mT;c>0;c-=1){var m=a2(s),g=Tp(kc({h:s2(m,c,!0),s:l2(m,c,!0),v:c2(m,c,!0)}));i.push(g)}i.push(Tp(s));for(var h=1;h<=gT;h+=1){var C=a2(s),T=Tp(kc({h:s2(C,h),s:l2(C,h),v:c2(C,h)}));i.push(T)}return t.theme==="dark"?Rz.map(function(k){var z=k.index,M=k.opacity,Y=Tp(Lz(kc(t.backgroundColor||"#141414"),kc(i[z]),M*100));return Y}):i}var mv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Jp={},gv={};Object.keys(mv).forEach(function(e){Jp[e]=Dl(mv[e]),Jp[e].primary=Jp[e][5],gv[e]=Dl(mv[e],{theme:"dark",backgroundColor:"#141414"}),gv[e].primary=gv[e][5]});var Fz=Jp.blue;const yT={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Md=Object.assign(Object.assign({},yT),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function Dz(e,t){let{generateColorPalettes:i,generateNeutralColorPalettes:s}=t;const{colorSuccess:c,colorWarning:m,colorError:g,colorInfo:h,colorPrimary:C,colorBgBase:T,colorTextBase:k}=e,z=i(C),M=i(c),Y=i(m),K=i(g),Z=i(h),Q=s(T,k),U=e.colorLink||e.colorInfo,D=i(U);return Object.assign(Object.assign({},Q),{colorPrimaryBg:z[1],colorPrimaryBgHover:z[2],colorPrimaryBorder:z[3],colorPrimaryBorderHover:z[4],colorPrimaryHover:z[5],colorPrimary:z[6],colorPrimaryActive:z[7],colorPrimaryTextHover:z[8],colorPrimaryText:z[9],colorPrimaryTextActive:z[10],colorSuccessBg:M[1],colorSuccessBgHover:M[2],colorSuccessBorder:M[3],colorSuccessBorderHover:M[4],colorSuccessHover:M[4],colorSuccess:M[6],colorSuccessActive:M[7],colorSuccessTextHover:M[8],colorSuccessText:M[9],colorSuccessTextActive:M[10],colorErrorBg:K[1],colorErrorBgHover:K[2],colorErrorBgActive:K[3],colorErrorBorder:K[3],colorErrorBorderHover:K[4],colorErrorHover:K[5],colorError:K[6],colorErrorActive:K[7],colorErrorTextHover:K[8],colorErrorText:K[9],colorErrorTextActive:K[10],colorWarningBg:Y[1],colorWarningBgHover:Y[2],colorWarningBorder:Y[3],colorWarningBorderHover:Y[4],colorWarningHover:Y[4],colorWarning:Y[6],colorWarningActive:Y[7],colorWarningTextHover:Y[8],colorWarningText:Y[9],colorWarningTextActive:Y[10],colorInfoBg:Z[1],colorInfoBgHover:Z[2],colorInfoBorder:Z[3],colorInfoBorderHover:Z[4],colorInfoHover:Z[4],colorInfo:Z[6],colorInfoActive:Z[7],colorInfoTextHover:Z[8],colorInfoText:Z[9],colorInfoTextActive:Z[10],colorLinkHover:D[4],colorLink:D[6],colorLinkActive:D[7],colorBgMask:new qi("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const Oz=e=>{let t=e,i=e,s=e,c=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?s=1:e>=6&&(s=2),e>4&&e<8?c=4:e>=8&&(c=6),{borderRadius:e,borderRadiusXS:s,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:c}};function Bz(e){const{motionUnit:t,motionBase:i,borderRadius:s,lineWidth:c}=e;return Object.assign({motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+t*2).toFixed(1)}s`,motionDurationSlow:`${(i+t*3).toFixed(1)}s`,lineWidthBold:c+1},Oz(s))}const Nz=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function Qp(e){return(e+8)/e}function jz(e){const t=new Array(10).fill(null).map((i,s)=>{const c=s-1,m=e*Math.pow(2.71828,c/5),g=s>1?Math.floor(m):Math.ceil(m);return Math.floor(g/2)*2});return t[1]=e,t.map(i=>({size:i,lineHeight:Qp(i)}))}const $z=e=>{const t=jz(e),i=t.map(k=>k.size),s=t.map(k=>k.lineHeight),c=i[1],m=i[0],g=i[2],h=s[1],C=s[0],T=s[2];return{fontSizeSM:m,fontSize:c,fontSizeLG:g,fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:h,lineHeightLG:T,lineHeightSM:C,fontHeight:Math.round(h*c),fontHeightLG:Math.round(T*g),fontHeightSM:Math.round(C*m),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}};function Vz(e){const{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}const Ta=(e,t)=>new qi(e).setAlpha(t).toRgbString(),$h=(e,t)=>new qi(e).darken(t).toHexString(),Uz=e=>{const t=Dl(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},Hz=(e,t)=>{const i=e||"#fff",s=t||"#000";return{colorBgBase:i,colorTextBase:s,colorText:Ta(s,.88),colorTextSecondary:Ta(s,.65),colorTextTertiary:Ta(s,.45),colorTextQuaternary:Ta(s,.25),colorFill:Ta(s,.15),colorFillSecondary:Ta(s,.06),colorFillTertiary:Ta(s,.04),colorFillQuaternary:Ta(s,.02),colorBgLayout:$h(i,4),colorBgContainer:$h(i,0),colorBgElevated:$h(i,0),colorBgSpotlight:Ta(s,.85),colorBgBlur:"transparent",colorBorder:$h(i,15),colorBorderSecondary:$h(i,6)}};function Wz(e){const t=Object.keys(yT).map(i=>{const s=Dl(e[i]);return new Array(10).fill(1).reduce((c,m,g)=>(c[`${i}-${g+1}`]=s[g],c[`${i}${g+1}`]=s[g],c),{})}).reduce((i,s)=>(i=Object.assign(Object.assign({},i),s),i),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),Dz(e,{generateColorPalettes:Uz,generateNeutralColorPalettes:Hz})),$z(e.fontSize)),Vz(e)),Nz(e)),Bz(e))}const vT=R0(Wz),V0={token:Md,override:{override:Md},hashed:!0},_T=lt.createContext(V0),v1="anticon",qz=(e,t)=>t||(e?`ant-${e}`:"ant"),vo=N.createContext({getPrefixCls:qz,iconPrefixCls:v1}),Gz=`-ant-${Date.now()}-${Math.random()}`;function Zz(e,t){const i={},s=(g,h)=>{let C=g.clone();return C=(h==null?void 0:h(C))||C,C.toRgbString()},c=(g,h)=>{const C=new qi(g),T=Dl(C.toRgbString());i[`${h}-color`]=s(C),i[`${h}-color-disabled`]=T[1],i[`${h}-color-hover`]=T[4],i[`${h}-color-active`]=T[6],i[`${h}-color-outline`]=C.clone().setAlpha(.2).toRgbString(),i[`${h}-color-deprecated-bg`]=T[0],i[`${h}-color-deprecated-border`]=T[2]};if(t.primaryColor){c(t.primaryColor,"primary");const g=new qi(t.primaryColor),h=Dl(g.toRgbString());h.forEach((T,k)=>{i[`primary-${k+1}`]=T}),i["primary-color-deprecated-l-35"]=s(g,T=>T.lighten(35)),i["primary-color-deprecated-l-20"]=s(g,T=>T.lighten(20)),i["primary-color-deprecated-t-20"]=s(g,T=>T.tint(20)),i["primary-color-deprecated-t-50"]=s(g,T=>T.tint(50)),i["primary-color-deprecated-f-12"]=s(g,T=>T.setAlpha(T.getAlpha()*.12));const C=new qi(h[0]);i["primary-color-active-deprecated-f-30"]=s(C,T=>T.setAlpha(T.getAlpha()*.3)),i["primary-color-active-deprecated-d-02"]=s(C,T=>T.darken(2))}return t.successColor&&c(t.successColor,"success"),t.warningColor&&c(t.warningColor,"warning"),t.errorColor&&c(t.errorColor,"error"),t.infoColor&&c(t.infoColor,"info"),`
  :root {
    ${Object.keys(i).map(g=>`--${e}-${g}: ${i[g]};`).join(`
`)}
  }
  `.trim()}function Kz(e,t){const i=Zz(e,t);Ii()&&La(i,`${Gz}-dynamic-theme`)}const Mm=N.createContext(!1),xT=e=>{let{children:t,disabled:i}=e;const s=N.useContext(Mm);return N.createElement(Mm.Provider,{value:i??s},t)},cu=N.createContext(void 0),Xz=e=>{let{children:t,size:i}=e;const s=N.useContext(cu);return N.createElement(cu.Provider,{value:i||s},t)};function Yz(){const e=N.useContext(Mm),t=N.useContext(cu);return{componentDisabled:e,componentSize:t}}const Jz="5.17.3";function yv(e){return e>=0&&e<=255}function Pp(e,t){const{r:i,g:s,b:c,a:m}=new qi(e).toRgb();if(m<1)return e;const{r:g,g:h,b:C}=new qi(t).toRgb();for(let T=.01;T<=1;T+=.01){const k=Math.round((i-g*(1-T))/T),z=Math.round((s-h*(1-T))/T),M=Math.round((c-C*(1-T))/T);if(yv(k)&&yv(z)&&yv(M))return new qi({r:k,g:z,b:M,a:Math.round(T*100)/100}).toRgbString()}return new qi({r:i,g:s,b:c,a:1}).toRgbString()}var Qz=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};function bT(e){const{override:t}=e,i=Qz(e,["override"]),s=Object.assign({},t);Object.keys(Md).forEach(M=>{delete s[M]});const c=Object.assign(Object.assign({},i),s),m=480,g=576,h=768,C=992,T=1200,k=1600;if(c.motion===!1){const M="0s";c.motionDurationFast=M,c.motionDurationMid=M,c.motionDurationSlow=M}return Object.assign(Object.assign(Object.assign({},c),{colorFillContent:c.colorFillSecondary,colorFillContentHover:c.colorFill,colorFillAlter:c.colorFillQuaternary,colorBgContainerDisabled:c.colorFillTertiary,colorBorderBg:c.colorBgContainer,colorSplit:Pp(c.colorBorderSecondary,c.colorBgContainer),colorTextPlaceholder:c.colorTextQuaternary,colorTextDisabled:c.colorTextQuaternary,colorTextHeading:c.colorText,colorTextLabel:c.colorTextSecondary,colorTextDescription:c.colorTextTertiary,colorTextLightSolid:c.colorWhite,colorHighlight:c.colorError,colorBgTextHover:c.colorFillSecondary,colorBgTextActive:c.colorFill,colorIcon:c.colorTextTertiary,colorIconHover:c.colorText,colorErrorOutline:Pp(c.colorErrorBg,c.colorBgContainer),colorWarningOutline:Pp(c.colorWarningBg,c.colorBgContainer),fontSizeIcon:c.fontSizeSM,lineWidthFocus:c.lineWidth*4,lineWidth:c.lineWidth,controlOutlineWidth:c.lineWidth*2,controlInteractiveSize:c.controlHeight/2,controlItemBgHover:c.colorFillTertiary,controlItemBgActive:c.colorPrimaryBg,controlItemBgActiveHover:c.colorPrimaryBgHover,controlItemBgActiveDisabled:c.colorFill,controlTmpOutline:c.colorFillQuaternary,controlOutline:Pp(c.colorPrimaryBg,c.colorBgContainer),lineType:c.lineType,borderRadius:c.borderRadius,borderRadiusXS:c.borderRadiusXS,borderRadiusSM:c.borderRadiusSM,borderRadiusLG:c.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:c.sizeXXS,paddingXS:c.sizeXS,paddingSM:c.sizeSM,padding:c.size,paddingMD:c.sizeMD,paddingLG:c.sizeLG,paddingXL:c.sizeXL,paddingContentHorizontalLG:c.sizeLG,paddingContentVerticalLG:c.sizeMS,paddingContentHorizontal:c.sizeMS,paddingContentVertical:c.sizeSM,paddingContentHorizontalSM:c.size,paddingContentVerticalSM:c.sizeXS,marginXXS:c.sizeXXS,marginXS:c.sizeXS,marginSM:c.sizeSM,margin:c.size,marginMD:c.sizeMD,marginLG:c.sizeLG,marginXL:c.sizeXL,marginXXL:c.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:m,screenXSMin:m,screenXSMax:g-1,screenSM:g,screenSMMin:g,screenSMMax:h-1,screenMD:h,screenMDMin:h,screenMDMax:C-1,screenLG:C,screenLGMin:C,screenLGMax:T-1,screenXL:T,screenXLMin:T,screenXLMax:k-1,screenXXL:k,screenXXLMin:k,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new qi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new qi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new qi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),s)}var u2=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};const wT={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},ST={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},eR={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},CT=(e,t,i)=>{const s=i.getDerivativeToken(e),{override:c}=t,m=u2(t,["override"]);let g=Object.assign(Object.assign({},s),{override:c});return g=bT(g),m&&Object.entries(m).forEach(h=>{let[C,T]=h;const{theme:k}=T,z=u2(T,["theme"]);let M=z;k&&(M=CT(Object.assign(Object.assign({},g),z),{override:z},k)),g[C]=M}),g};function oa(){const{token:e,hashed:t,theme:i,override:s,cssVar:c}=lt.useContext(_T),m=`${Jz}-${t||""}`,g=i||vT,[h,C,T]=R5(g,[Md,e],{salt:m,override:s,getComputedToken:CT,formatToken:bT,cssVar:c&&{prefix:c.prefix,key:c.key,unitless:wT,ignore:ST,preserve:eR}});return[g,T,t?C:"",h,c]}function ET(e,t,i){return t=Rl(t),NE(e,fg()?Reflect.construct(t,[],Rl(e).constructor):t.apply(e,i))}let TT=Mi(function e(){ki(this,e)});const PT="CALC_UNIT",tR=new RegExp(PT,"g");function vv(e){return typeof e=="number"?`${e}${PT}`:e}let nR=function(e){function t(i){var s;return ki(this,t),s=ET(this,t),s.result="",i instanceof t?s.result=`(${i.result})`:typeof i=="number"?s.result=vv(i):typeof i=="string"&&(s.result=i),s}return mu(t,e),Mi(t,[{key:"add",value:function(s){return s instanceof t?this.result=`${this.result} + ${s.getResult()}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} + ${vv(s)}`),this.lowPriority=!0,this}},{key:"sub",value:function(s){return s instanceof t?this.result=`${this.result} - ${s.getResult()}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} - ${vv(s)}`),this.lowPriority=!0,this}},{key:"mul",value:function(s){return this.lowPriority&&(this.result=`(${this.result})`),s instanceof t?this.result=`${this.result} * ${s.getResult(!0)}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} * ${s}`),this.lowPriority=!1,this}},{key:"div",value:function(s){return this.lowPriority&&(this.result=`(${this.result})`),s instanceof t?this.result=`${this.result} / ${s.getResult(!0)}`:(typeof s=="number"||typeof s=="string")&&(this.result=`${this.result} / ${s}`),this.lowPriority=!1,this}},{key:"getResult",value:function(s){return this.lowPriority||s?`(${this.result})`:this.result}},{key:"equal",value:function(s){const{unit:c=!0}=s||{};return this.result=this.result.replace(tR,c?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}])}(TT),rR=function(e){function t(i){var s;return ki(this,t),s=ET(this,t),s.result=0,i instanceof t?s.result=i.result:typeof i=="number"&&(s.result=i),s}return mu(t,e),Mi(t,[{key:"add",value:function(s){return s instanceof t?this.result+=s.result:typeof s=="number"&&(this.result+=s),this}},{key:"sub",value:function(s){return s instanceof t?this.result-=s.result:typeof s=="number"&&(this.result-=s),this}},{key:"mul",value:function(s){return s instanceof t?this.result*=s.result:typeof s=="number"&&(this.result*=s),this}},{key:"div",value:function(s){return s instanceof t?this.result/=s.result:typeof s=="number"&&(this.result/=s),this}},{key:"equal",value:function(){return this.result}}])}(TT);const iR=e=>{const t=e==="css"?nR:rR;return i=>new t(i)};function _1(e){var t=N.useRef();t.current=e;var i=N.useCallback(function(){for(var s,c=arguments.length,m=new Array(c),g=0;g<c;g++)m[g]=arguments[g];return(s=t.current)===null||s===void 0?void 0:s.call.apply(s,[t].concat(m))},[]);return i}function rd(e){var t=N.useRef(!1),i=N.useState(e),s=Ft(i,2),c=s[0],m=s[1];N.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function g(h,C){C&&t.current||m(h)}return[c,g]}const oR=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},aR=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),sR=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),lR=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active,\n  &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),cR=(e,t,i,s)=>{const c=`[class^="${t}"], [class*=" ${t}"]`,m=i?`.${i}`:c,g={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let h={};return s!==!1&&(h={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[m]:Object.assign(Object.assign(Object.assign({},h),g),{[c]:g})}},uR=e=>({outline:`${vn(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),IT=e=>({"&:focus-visible":Object.assign({},uR(e))});function hR(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return`max(${i.map(c=>vn(c)).join(",")})`},min:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return`min(${i.map(c=>vn(c)).join(",")})`}}}const kT=typeof CSSINJS_STATISTIC<"u";let U0=!0;function Vl(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!kT)return Object.assign.apply(Object,[{}].concat(t));U0=!1;const s={};return t.forEach(c=>{Object.keys(c).forEach(g=>{Object.defineProperty(s,g,{configurable:!0,enumerable:!0,get:()=>c[g]})})}),U0=!0,s}const h2={};function dR(){}const fR=e=>{let t,i=e,s=dR;return kT&&typeof Proxy<"u"&&(t=new Set,i=new Proxy(e,{get(c,m){return U0&&t.add(m),c[m]}}),s=(c,m)=>{var g;h2[c]={global:Array.from(t),component:Object.assign(Object.assign({},(g=h2[c])===null||g===void 0?void 0:g.component),m)}}),{token:i,keys:t,flush:s}},MT=(e,t)=>{const[i,s]=oa();return B0({theme:i,token:s,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[{[`.${e}`]:Object.assign(Object.assign({},aR()),{[`.${e} .${e}-icon`]:{display:"block"}})}])},AT=(e,t,i)=>{var s;return typeof i=="function"?i(Vl(t,(s=t[e])!==null&&s!==void 0?s:{})):i??{}},zT=(e,t,i,s)=>{const c=Object.assign({},t[e]);if(s!=null&&s.deprecatedTokens){const{deprecatedTokens:g}=s;g.forEach(h=>{let[C,T]=h;var k;(c!=null&&c[C]||c!=null&&c[T])&&((k=c[T])!==null&&k!==void 0||(c[T]=c==null?void 0:c[C]))})}const m=Object.assign(Object.assign({},i),c);return Object.keys(m).forEach(g=>{m[g]===t[g]&&delete m[g]}),m},pR=(e,t)=>`${[t,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function x1(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=Array.isArray(e)?e:[e,e],[m]=c,g=c.join("-");return function(h){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;const[T,k,z,M,Y]=oa(),{getPrefixCls:K,iconPrefixCls:Z,csp:Q}=N.useContext(vo),U=K(),D=Y?"css":"js",H=iR(D),{max:ne,min:he}=hR(D),ge={theme:T,token:M,hashId:z,nonce:()=>Q==null?void 0:Q.nonce,clientOnly:s.clientOnly,layer:{name:"antd"},order:s.order||-999};return B0(Object.assign(Object.assign({},ge),{clientOnly:!1,path:["Shared",U]}),()=>[{"&":lR(M)}]),MT(Z,Q),[B0(Object.assign(Object.assign({},ge),{path:[g,h,Z]}),()=>{if(s.injectStyle===!1)return[];const{token:Me,flush:Be}=fR(M),Re=AT(m,k,i),He=`.${h}`,rt=zT(m,k,Re,{deprecatedTokens:s.deprecatedTokens});Y&&Object.keys(Re).forEach(ut=>{Re[ut]=`var(${XE(ut,pR(m,Y.prefix))})`});const Ze=Vl(Me,{componentCls:He,prefixCls:h,iconCls:`.${Z}`,antCls:`.${U}`,calc:H,max:ne,min:he},Y?Re:rt),qe=t(Ze,{hashId:z,prefixCls:h,rootPrefixCls:U,iconPrefixCls:Z});return Be(m,rt),[s.resetStyle===!1?null:cR(Ze,h,C,s.resetFont),qe]}),z]}}const RT=(e,t,i,s)=>{const c=x1(e,t,i,Object.assign({resetStyle:!1,order:-998},s));return g=>{let{prefixCls:h,rootCls:C=h}=g;return c(h,C),null}},mR=(e,t,i)=>{function s(T){return`${e}${T.slice(0,1).toUpperCase()}${T.slice(1)}`}const{unitless:c={},injectStyle:m=!0}=i??{},g={[s("zIndexPopup")]:!0};Object.keys(c).forEach(T=>{g[s(T)]=c[T]});const h=T=>{let{rootCls:k,cssVar:z}=T;const[,M]=oa();return sz({path:[e],prefix:z.prefix,key:z==null?void 0:z.key,unitless:Object.assign(Object.assign({},wT),g),ignore:ST,token:M,scope:k},()=>{const Y=AT(e,M,t),K=zT(e,M,Y,{deprecatedTokens:i==null?void 0:i.deprecatedTokens});return Object.keys(Y).forEach(Z=>{K[s(Z)]=K[Z],delete K[Z]}),K}),null};return T=>{const[,,,,k]=oa();return[z=>m&&k?lt.createElement(lt.Fragment,null,lt.createElement(h,{rootCls:T,cssVar:k,component:e}),z):z,k==null?void 0:k.key]}},LT=(e,t,i,s)=>{const c=x1(e,t,i,s),m=mR(Array.isArray(e)?e[0]:e,i,s);return function(g){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g;const[,C]=c(g,h),[T,k]=m(h);return[T,C,k]}},gR=Object.assign({},Fd),{useId:d2}=gR,yR=()=>"",vR=typeof d2>"u"?yR:d2;function _R(e,t,i){var s;const c=e||{},m=c.inherit===!1||!t?Object.assign(Object.assign({},V0),{hashed:(s=t==null?void 0:t.hashed)!==null&&s!==void 0?s:V0.hashed,cssVar:t==null?void 0:t.cssVar}):t,g=vR();return a1(()=>{var h,C;if(!e)return t;const T=Object.assign({},m.components);Object.keys(e.components||{}).forEach(M=>{T[M]=Object.assign(Object.assign({},T[M]),e.components[M])});const k=`css-var-${g.replace(/:/g,"")}`,z=((h=c.cssVar)!==null&&h!==void 0?h:m.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:i==null?void 0:i.prefixCls},typeof m.cssVar=="object"?m.cssVar:{}),typeof c.cssVar=="object"?c.cssVar:{}),{key:typeof c.cssVar=="object"&&((C=c.cssVar)===null||C===void 0?void 0:C.key)||k});return Object.assign(Object.assign(Object.assign({},m),c),{token:Object.assign(Object.assign({},m.token),c.token),components:T,cssVar:z})},[c,m],(h,C)=>h.some((T,k)=>{const z=C[k];return!A0(T,z,!0)}))}var xR=["children"],FT=N.createContext({});function bR(e){var t=e.children,i=zs(e,xR);return N.createElement(FT.Provider,{value:i},t)}var wR=function(e){mu(i,e);var t=pg(i);function i(){return ki(this,i),t.apply(this,arguments)}return Mi(i,[{key:"render",value:function(){return this.props.children}}]),i}(N.Component),hs="none",Ip="appear",kp="enter",Mp="leave",f2="none",Lo="prepare",Uc="start",Hc="active",b1="end",DT="prepared";function p2(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit".concat(e)]="webkit".concat(t),i["Moz".concat(e)]="moz".concat(t),i["ms".concat(e)]="MS".concat(t),i["O".concat(e)]="o".concat(t.toLowerCase()),i}function SR(e,t){var i={animationend:p2("Animation","AnimationEnd"),transitionend:p2("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}var CR=SR(Ii(),typeof window<"u"?window:{}),OT={};if(Ii()){var ER=document.createElement("div");OT=ER.style}var Ap={};function BT(e){if(Ap[e])return Ap[e];var t=CR[e];if(t)for(var i=Object.keys(t),s=i.length,c=0;c<s;c+=1){var m=i[c];if(Object.prototype.hasOwnProperty.call(t,m)&&m in OT)return Ap[e]=t[m],Ap[e]}return""}var NT=BT("animationend"),jT=BT("transitionend"),$T=!!(NT&&jT),m2=NT||"animationend",g2=jT||"transitionend";function y2(e,t){if(!e)return null;if(Gt(e)==="object"){var i=t.replace(/-\w/g,function(s){return s[1].toUpperCase()});return e[i]}return"".concat(e,"-").concat(t)}const TR=function(e){var t=N.useRef();function i(c){c&&(c.removeEventListener(g2,e),c.removeEventListener(m2,e))}function s(c){t.current&&t.current!==c&&i(t.current),c&&c!==t.current&&(c.addEventListener(g2,e),c.addEventListener(m2,e),t.current=c)}return N.useEffect(function(){return function(){i(t.current)}},[]),[s,i]};var VT=Ii()?N.useLayoutEffect:N.useEffect;const PR=function(){var e=N.useRef(null);function t(){Ll.cancel(e.current)}function i(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var m=Ll(function(){c<=1?s({isCanceled:function(){return m!==e.current}}):i(s,c-1)});e.current=m}return N.useEffect(function(){return function(){t()}},[]),[i,t]};var IR=[Lo,Uc,Hc,b1],kR=[Lo,DT],UT=!1,MR=!0;function HT(e){return e===Hc||e===b1}const AR=function(e,t,i){var s=rd(f2),c=Ft(s,2),m=c[0],g=c[1],h=PR(),C=Ft(h,2),T=C[0],k=C[1];function z(){g(Lo,!0)}var M=t?kR:IR;return VT(function(){if(m!==f2&&m!==b1){var Y=M.indexOf(m),K=M[Y+1],Z=i(m);Z===UT?g(K,!0):K&&T(function(Q){function U(){Q.isCanceled()||g(K,!0)}Z===!0?U():Promise.resolve(Z).then(U)})}},[e,m]),N.useEffect(function(){return function(){k()}},[]),[z,m]};function zR(e,t,i,s){var c=s.motionEnter,m=c===void 0?!0:c,g=s.motionAppear,h=g===void 0?!0:g,C=s.motionLeave,T=C===void 0?!0:C,k=s.motionDeadline,z=s.motionLeaveImmediately,M=s.onAppearPrepare,Y=s.onEnterPrepare,K=s.onLeavePrepare,Z=s.onAppearStart,Q=s.onEnterStart,U=s.onLeaveStart,D=s.onAppearActive,H=s.onEnterActive,ne=s.onLeaveActive,he=s.onAppearEnd,ge=s.onEnterEnd,ue=s.onLeaveEnd,Me=s.onVisibleChanged,Be=rd(),Re=Ft(Be,2),He=Re[0],rt=Re[1],Ze=rd(hs),qe=Ft(Ze,2),ut=qe[0],Oe=qe[1],Pe=rd(null),Se=Ft(Pe,2),ze=Se[0],Ve=Se[1],We=N.useRef(!1),Xe=N.useRef(null);function wt(){return i()}var Dt=N.useRef(!1);function Zt(){Oe(hs,!0),Ve(null,!0)}var Kt=_1(function(Pt){if(ut!==hs){var Ot=wt();if(!(Pt&&!Pt.deadline&&Pt.target!==Ot)){var _n=Dt.current,xr;ut===Ip&&_n?xr=he==null?void 0:he(Ot,Pt):ut===kp&&_n?xr=ge==null?void 0:ge(Ot,Pt):ut===Mp&&_n&&(xr=ue==null?void 0:ue(Ot,Pt)),_n&&xr!==!1&&Zt()}}}),Ht=TR(Kt),jn=Ft(Ht,1),zr=jn[0],Rr=function(Ot){switch(Ot){case Ip:return Fe(Fe(Fe({},Lo,M),Uc,Z),Hc,D);case kp:return Fe(Fe(Fe({},Lo,Y),Uc,Q),Hc,H);case Mp:return Fe(Fe(Fe({},Lo,K),Uc,U),Hc,ne);default:return{}}},ar=N.useMemo(function(){return Rr(ut)},[ut]),sr=AR(ut,!e,function(Pt){if(Pt===Lo){var Ot=ar[Lo];return Ot?Ot(wt()):UT}if(Xn in ar){var _n;Ve(((_n=ar[Xn])===null||_n===void 0?void 0:_n.call(ar,wt(),null))||null)}return Xn===Hc&&ut!==hs&&(zr(wt()),k>0&&(clearTimeout(Xe.current),Xe.current=setTimeout(function(){Kt({deadline:!0})},k))),Xn===DT&&Zt(),MR}),Jt=Ft(sr,2),rn=Jt[0],Xn=Jt[1],Ie=HT(Xn);Dt.current=Ie,VT(function(){rt(t);var Pt=We.current;We.current=!0;var Ot;!Pt&&t&&h&&(Ot=Ip),Pt&&t&&m&&(Ot=kp),(Pt&&!t&&T||!Pt&&z&&!t&&T)&&(Ot=Mp);var _n=Rr(Ot);Ot&&(e||_n[Lo])?(Oe(Ot),rn()):Oe(hs)},[t]),N.useEffect(function(){(ut===Ip&&!h||ut===kp&&!m||ut===Mp&&!T)&&Oe(hs)},[h,m,T]),N.useEffect(function(){return function(){We.current=!1,clearTimeout(Xe.current)}},[]);var pr=N.useRef(!1);N.useEffect(function(){He&&(pr.current=!0),He!==void 0&&ut===hs&&((pr.current||He)&&(Me==null||Me(He)),pr.current=!0)},[He,ut]);var Gr=ze;return ar[Lo]&&Xn===Uc&&(Gr=Ke({transition:"none"},Gr)),[ut,Xn,Gr,He??t]}function RR(e){var t=e;Gt(e)==="object"&&(t=e.transitionSupport);function i(c,m){return!!(c.motionName&&t&&m!==!1)}var s=N.forwardRef(function(c,m){var g=c.visible,h=g===void 0?!0:g,C=c.removeOnLeave,T=C===void 0?!0:C,k=c.forceRender,z=c.children,M=c.motionName,Y=c.leavedClassName,K=c.eventProps,Z=N.useContext(FT),Q=Z.motion,U=i(c,Q),D=N.useRef(),H=N.useRef();function ne(){try{return D.current instanceof HTMLElement?D.current:n5(H.current)}catch{return null}}var he=zR(U,h,ne,c),ge=Ft(he,4),ue=ge[0],Me=ge[1],Be=ge[2],Re=ge[3],He=N.useRef(Re);Re&&(He.current=!0);var rt=N.useCallback(function(ze){D.current=ze,OE(m,ze)},[m]),Ze,qe=Ke(Ke({},K),{},{visible:h});if(!z)Ze=null;else if(ue===hs)Re?Ze=z(Ke({},qe),rt):!T&&He.current&&Y?Ze=z(Ke(Ke({},qe),{},{className:Y}),rt):k||!T&&!Y?Ze=z(Ke(Ke({},qe),{},{style:{display:"none"}}),rt):Ze=null;else{var ut;Me===Lo?ut="prepare":HT(Me)?ut="active":Me===Uc&&(ut="start");var Oe=y2(M,"".concat(ue,"-").concat(ut));Ze=z(Ke(Ke({},qe),{},{className:mn(y2(M,ue),Fe(Fe({},Oe,Oe&&ut),M,typeof M=="string")),style:Be}),rt)}if(N.isValidElement(Ze)&&s1(Ze)){var Pe=Ze,Se=Pe.ref;Se||(Ze=N.cloneElement(Ze,{ref:rt}))}return N.createElement(wR,{ref:H},Ze)});return s.displayName="CSSMotion",s}const Ud=RR($T);var H0="add",W0="keep",q0="remove",_v="removed";function LR(e){var t;return e&&Gt(e)==="object"&&"key"in e?t=e:t={key:e},Ke(Ke({},t),{},{key:String(t.key)})}function G0(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(LR)}function FR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=[],s=0,c=t.length,m=G0(e),g=G0(t);m.forEach(function(T){for(var k=!1,z=s;z<c;z+=1){var M=g[z];if(M.key===T.key){s<z&&(i=i.concat(g.slice(s,z).map(function(Y){return Ke(Ke({},Y),{},{status:H0})})),s=z),i.push(Ke(Ke({},M),{},{status:W0})),s+=1,k=!0;break}}k||i.push(Ke(Ke({},T),{},{status:q0}))}),s<c&&(i=i.concat(g.slice(s).map(function(T){return Ke(Ke({},T),{},{status:H0})})));var h={};i.forEach(function(T){var k=T.key;h[k]=(h[k]||0)+1});var C=Object.keys(h).filter(function(T){return h[T]>1});return C.forEach(function(T){i=i.filter(function(k){var z=k.key,M=k.status;return z!==T||M!==q0}),i.forEach(function(k){k.key===T&&(k.status=W0)})}),i}var DR=["component","children","onVisibleChanged","onAllRemoved"],OR=["status"],BR=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function NR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ud,i=function(s){mu(m,s);var c=pg(m);function m(){var g;ki(this,m);for(var h=arguments.length,C=new Array(h),T=0;T<h;T++)C[T]=arguments[T];return g=c.call.apply(c,[this].concat(C)),Fe(en(g),"state",{keyEntities:[]}),Fe(en(g),"removeKey",function(k){var z=g.state.keyEntities,M=z.map(function(Y){return Y.key!==k?Y:Ke(Ke({},Y),{},{status:_v})});return g.setState({keyEntities:M}),M.filter(function(Y){var K=Y.status;return K!==_v}).length}),g}return Mi(m,[{key:"render",value:function(){var h=this,C=this.state.keyEntities,T=this.props,k=T.component,z=T.children,M=T.onVisibleChanged,Y=T.onAllRemoved,K=zs(T,DR),Z=k||N.Fragment,Q={};return BR.forEach(function(U){Q[U]=K[U],delete K[U]}),delete K.keys,N.createElement(Z,K,C.map(function(U,D){var H=U.status,ne=zs(U,OR),he=H===H0||H===W0;return N.createElement(t,Kn({},Q,{key:ne.key,visible:he,eventProps:ne,onVisibleChanged:function(ue){if(M==null||M(ue,{key:ne.key}),!ue){var Me=h.removeKey(ne.key);Me===0&&Y&&Y()}}}),function(ge,ue){return z(Ke(Ke({},ge),{},{index:D}),ue)})}))}}],[{key:"getDerivedStateFromProps",value:function(h,C){var T=h.keys,k=C.keyEntities,z=G0(T),M=FR(k,z);return{keyEntities:M.filter(function(Y){var K=k.find(function(Z){var Q=Z.key;return Y.key===Q});return!(K&&K.status===_v&&Y.status===q0)})}}}]),m}(N.Component);return Fe(i,"defaultProps",{component:"div"}),i}NR($T);function jR(e){const{children:t}=e,[,i]=oa(),{motion:s}=i,c=N.useRef(!1);return c.current=c.current||s===!1,c.current?N.createElement(bR,{motion:s},t):t}const $R=()=>null;var VR=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};const UR=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],HR="ant";let Am,WT,qT,GT;function em(){return Am||HR}function WR(){return WT||v1}function qR(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const GR=e=>{const{prefixCls:t,iconPrefixCls:i,theme:s,holderRender:c}=e;t!==void 0&&(Am=t),i!==void 0&&(WT=i),"holderRender"in e&&(GT=c),s&&(qR(s)?Kz(em(),s):qT=s)},ZR=()=>({getPrefixCls:(e,t)=>t||(e?`${em()}-${e}`:em()),getIconPrefixCls:WR,getRootPrefixCls:()=>Am||em(),getTheme:()=>qT,holderRender:GT}),KR=e=>{const{children:t,csp:i,autoInsertSpaceInButton:s,alert:c,anchor:m,form:g,locale:h,componentSize:C,direction:T,space:k,virtual:z,dropdownMatchSelectWidth:M,popupMatchSelectWidth:Y,popupOverflow:K,legacyLocale:Z,parentContext:Q,iconPrefixCls:U,theme:D,componentDisabled:H,segmented:ne,statistic:he,spin:ge,calendar:ue,carousel:Me,cascader:Be,collapse:Re,typography:He,checkbox:rt,descriptions:Ze,divider:qe,drawer:ut,skeleton:Oe,steps:Pe,image:Se,layout:ze,list:Ve,mentions:We,modal:Xe,progress:wt,result:Dt,slider:Zt,breadcrumb:Kt,menu:Ht,pagination:jn,input:zr,textArea:Rr,empty:ar,badge:sr,radio:Jt,rate:rn,switch:Xn,transfer:Ie,avatar:pr,message:Gr,tag:Pt,table:Ot,card:_n,tabs:xr,timeline:Qi,timePicker:zi,upload:Lr,notification:xn,tree:Yn,colorPicker:Qe,datePicker:br,rangePicker:wr,flex:Vo,wave:_o,dropdown:Je,warning:Bt,tour:It,floatButtonGroup:mr}=e,lr=N.useCallback((de,ye)=>{const{prefixCls:ce}=e;if(ye)return ye;const we=ce||Q.getPrefixCls("");return de?`${we}-${de}`:we},[Q.getPrefixCls,e.prefixCls]),Ct=U||Q.iconPrefixCls||v1,Fr=i||Q.csp;MT(Ct,Fr);const vi=_R(D,Q.theme,{prefixCls:lr("")}),In={csp:Fr,autoInsertSpaceInButton:s,alert:c,anchor:m,locale:h||Z,direction:T,space:k,virtual:z,popupMatchSelectWidth:Y??M,popupOverflow:K,getPrefixCls:lr,iconPrefixCls:Ct,theme:vi,segmented:ne,statistic:he,spin:ge,calendar:ue,carousel:Me,cascader:Be,collapse:Re,typography:He,checkbox:rt,descriptions:Ze,divider:qe,drawer:ut,skeleton:Oe,steps:Pe,image:Se,input:zr,textArea:Rr,layout:ze,list:Ve,mentions:We,modal:Xe,progress:wt,result:Dt,slider:Zt,breadcrumb:Kt,menu:Ht,pagination:jn,empty:ar,badge:sr,radio:Jt,rate:rn,switch:Xn,transfer:Ie,avatar:pr,message:Gr,tag:Pt,table:Ot,card:_n,tabs:xr,timeline:Qi,timePicker:zi,upload:Lr,notification:xn,tree:Yn,colorPicker:Qe,datePicker:br,rangePicker:wr,flex:Vo,wave:_o,dropdown:Je,warning:Bt,tour:It,floatButtonGroup:mr},re=Object.assign({},Q);Object.keys(In).forEach(de=>{In[de]!==void 0&&(re[de]=In[de])}),UR.forEach(de=>{const ye=e[de];ye&&(re[de]=ye)}),typeof s<"u"&&(re.button=Object.assign({autoInsertSpace:s},re.button));const j=a1(()=>re,re,(de,ye)=>{const ce=Object.keys(de),we=Object.keys(ye);return ce.length!==we.length||ce.some(Ne=>de[Ne]!==ye[Ne])}),V=N.useMemo(()=>({prefixCls:Ct,csp:Fr}),[Ct,Fr]);let W=N.createElement(N.Fragment,null,N.createElement($R,{dropdownMatchSelectWidth:M}),t);const ae=N.useMemo(()=>{var de,ye,ce,we;return Vc(((de=Fl.Form)===null||de===void 0?void 0:de.defaultValidateMessages)||{},((ce=(ye=j.locale)===null||ye===void 0?void 0:ye.Form)===null||ce===void 0?void 0:ce.defaultValidateMessages)||{},((we=j.form)===null||we===void 0?void 0:we.validateMessages)||{},(g==null?void 0:g.validateMessages)||{})},[j,g==null?void 0:g.validateMessages]);Object.keys(ae).length>0&&(W=N.createElement(fz.Provider,{value:ae},W)),h&&(W=N.createElement(vz,{locale:h,_ANT_MARK__:yz},W)),(Ct||Fr)&&(W=N.createElement(m1.Provider,{value:V},W)),C&&(W=N.createElement(Xz,{size:C},W)),W=N.createElement(jR,null,W);const me=N.useMemo(()=>{const de=vi||{},{algorithm:ye,token:ce,components:we,cssVar:Ne}=de,Le=VR(de,["algorithm","token","components","cssVar"]),Ae=ye&&(!Array.isArray(ye)||ye.length>0)?R0(ye):vT,vt={};Object.entries(we||{}).forEach(kt=>{let[Et,Ut]=kt;const qt=Object.assign({},Ut);"algorithm"in qt&&(qt.algorithm===!0?qt.theme=Ae:(Array.isArray(qt.algorithm)||typeof qt.algorithm=="function")&&(qt.theme=R0(qt.algorithm)),delete qt.algorithm),vt[Et]=qt});const xt=Object.assign(Object.assign({},Md),ce);return Object.assign(Object.assign({},Le),{theme:Ae,token:xt,components:vt,override:Object.assign({override:xt},vt),cssVar:Ne})},[vi]);return D&&(W=N.createElement(_T.Provider,{value:me},W)),j.warning&&(W=N.createElement(dz.Provider,{value:j.warning},W)),H!==void 0&&(W=N.createElement(xT,{disabled:H},W)),N.createElement(vo.Provider,{value:j},W)},yu=e=>{const t=N.useContext(vo),i=N.useContext(g1);return N.createElement(KR,Object.assign({parentContext:t,legacyLocale:i},e))};yu.ConfigContext=vo;yu.SizeContext=cu;yu.config=GR;yu.useConfig=Yz;Object.defineProperty(yu,"SizeContext",{get:()=>cu});const w1=yu;var XR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function ZT(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function YR(e){return ZT(e)instanceof ShadowRoot}function JR(e){return YR(e)?ZT(e):null}function QR(e){return e.replace(/-(.)/g,function(t,i){return i.toUpperCase()})}function eL(e,t){Ki(e,"[@ant-design/icons] ".concat(t))}function v2(e){return Gt(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(Gt(e.icon)==="object"||typeof e.icon=="function")}function _2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,i){var s=e[i];switch(i){case"class":t.className=s,delete t.class;break;default:delete t[i],t[QR(i)]=s}return t},{})}function Z0(e,t,i){return i?lt.createElement(e.tag,Ke(Ke({key:t},_2(e.attrs)),i),(e.children||[]).map(function(s,c){return Z0(s,"".concat(t,"-").concat(e.tag,"-").concat(c))})):lt.createElement(e.tag,Ke({key:t},_2(e.attrs)),(e.children||[]).map(function(s,c){return Z0(s,"".concat(t,"-").concat(e.tag,"-").concat(c))}))}function KT(e){return Dl(e)[0]}function XT(e){return e?Array.isArray(e)?e:[e]:[]}var tL=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,nL=function(t){var i=N.useContext(m1),s=i.csp,c=i.prefixCls,m=tL;c&&(m=m.replace(/anticon/g,c)),N.useEffect(function(){var g=t.current,h=JR(g);La(m,"@ant-design-icons",{prepend:!0,csp:s,attachTo:h})},[])},rL=["icon","className","onClick","style","primaryColor","secondaryColor"],id={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function iL(e){var t=e.primaryColor,i=e.secondaryColor;id.primaryColor=t,id.secondaryColor=i||KT(t),id.calculated=!!i}function oL(){return Ke({},id)}var vu=function(t){var i=t.icon,s=t.className,c=t.onClick,m=t.style,g=t.primaryColor,h=t.secondaryColor,C=zs(t,rL),T=N.useRef(),k=id;if(g&&(k={primaryColor:g,secondaryColor:h||KT(g)}),nL(T),eL(v2(i),"icon should be icon definiton, but got ".concat(i)),!v2(i))return null;var z=i;return z&&typeof z.icon=="function"&&(z=Ke(Ke({},z),{},{icon:z.icon(k.primaryColor,k.secondaryColor)})),Z0(z.icon,"svg-".concat(z.name),Ke(Ke({className:s,onClick:c,style:m,"data-icon":z.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C),{},{ref:T}))};vu.displayName="IconReact";vu.getTwoToneColors=oL;vu.setTwoToneColors=iL;function YT(e){var t=XT(e),i=Ft(t,2),s=i[0],c=i[1];return vu.setTwoToneColors({primaryColor:s,secondaryColor:c})}function aL(){var e=vu.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var sL=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];YT(Fz.primary);var aa=N.forwardRef(function(e,t){var i=e.className,s=e.icon,c=e.spin,m=e.rotate,g=e.tabIndex,h=e.onClick,C=e.twoToneColor,T=zs(e,sL),k=N.useContext(m1),z=k.prefixCls,M=z===void 0?"anticon":z,Y=k.rootClassName,K=mn(Y,M,Fe(Fe({},"".concat(M,"-").concat(s.name),!!s.name),"".concat(M,"-spin"),!!c||s.name==="loading"),i),Z=g;Z===void 0&&h&&(Z=-1);var Q=m?{msTransform:"rotate(".concat(m,"deg)"),transform:"rotate(".concat(m,"deg)")}:void 0,U=XT(C),D=Ft(U,2),H=D[0],ne=D[1];return N.createElement("span",Kn({role:"img","aria-label":s.name},T,{ref:t,tabIndex:Z,onClick:h,className:K}),N.createElement(vu,{icon:s,primaryColor:H,secondaryColor:ne,style:Q}))});aa.displayName="AntdIcon";aa.getTwoToneColor=aL;aa.setTwoToneColor=YT;var lL=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:XR}))},cL=N.forwardRef(lL),uL={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},hL=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:uL}))},dL=N.forwardRef(hL),fL={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},pL=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:fL}))},S1=N.forwardRef(pL),mL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},gL=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:mL}))},yL=N.forwardRef(gL),vL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},_L=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:vL}))},xL=N.forwardRef(_L),bL=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,wL=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,SL="".concat(bL," ").concat(wL).split(/[\s\n]+/),CL="aria-",EL="data-";function x2(e,t){return e.indexOf(t)===0}function C1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i;t===!1?i={aria:!0,data:!0,attr:!0}:t===!0?i={aria:!0}:i=Ke({},t);var s={};return Object.keys(e).forEach(function(c){(i.aria&&(c==="role"||x2(c,CL))||i.data&&x2(c,EL)||i.attr&&SL.includes(c))&&(s[c]=e[c])}),s}function TL(e){return e&&lt.isValidElement(e)&&e.type===lt.Fragment}const PL=(e,t,i)=>lt.isValidElement(e)?lt.cloneElement(e,typeof i=="function"?i(e.props||{}):i):t;function JT(e,t){return PL(e,e,t)}const QT=e=>{const[,,,,t]=oa();return t?`${e}-css-var`:""};var zt={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var i=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||i>=zt.F1&&i<=zt.F12)return!1;switch(i){case zt.ALT:case zt.CAPS_LOCK:case zt.CONTEXT_MENU:case zt.CTRL:case zt.DOWN:case zt.END:case zt.ESC:case zt.HOME:case zt.INSERT:case zt.LEFT:case zt.MAC_FF_META:case zt.META:case zt.NUMLOCK:case zt.NUM_CENTER:case zt.PAGE_DOWN:case zt.PAGE_UP:case zt.PAUSE:case zt.PRINT_SCREEN:case zt.RIGHT:case zt.SHIFT:case zt.UP:case zt.WIN_KEY:case zt.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=zt.ZERO&&t<=zt.NINE||t>=zt.NUM_ZERO&&t<=zt.NUM_MULTIPLY||t>=zt.A&&t<=zt.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case zt.SPACE:case zt.QUESTION_MARK:case zt.NUM_PLUS:case zt.NUM_MINUS:case zt.NUM_PERIOD:case zt.NUM_DIVISION:case zt.SEMICOLON:case zt.DASH:case zt.EQUALS:case zt.COMMA:case zt.PERIOD:case zt.SLASH:case zt.APOSTROPHE:case zt.SINGLE_QUOTE:case zt.OPEN_SQUARE_BRACKET:case zt.BACKSLASH:case zt.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},IL={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},kL=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:IL}))},ML=N.forwardRef(kL);const eP=lt.createContext(void 0),gl=100,AL=10,tP=gl*AL,nP={Modal:gl,Drawer:gl,Popover:gl,Popconfirm:gl,Tooltip:gl,Tour:gl},zL={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function RL(e){return e in nP}function LL(e,t){const[,i]=oa(),s=lt.useContext(eP),c=RL(e);if(t!==void 0)return[t,t];let m=s??0;return c?(m+=(s?0:i.zIndexPopupBase)+nP[e],m=Math.min(m,i.zIndexPopupBase+tP)):m+=zL[e],[s===void 0?t:m,m]}function FL(){const[e,t]=N.useState([]),i=N.useCallback(s=>(t(c=>[].concat(Tt(c),[s])),()=>{t(c=>c.filter(m=>m!==s))}),[]);return[e,i]}function mi(){mi=function(){return t};var e,t={},i=Object.prototype,s=i.hasOwnProperty,c=Object.defineProperty||function(Oe,Pe,Se){Oe[Pe]=Se.value},m=typeof Symbol=="function"?Symbol:{},g=m.iterator||"@@iterator",h=m.asyncIterator||"@@asyncIterator",C=m.toStringTag||"@@toStringTag";function T(Oe,Pe,Se){return Object.defineProperty(Oe,Pe,{value:Se,enumerable:!0,configurable:!0,writable:!0}),Oe[Pe]}try{T({},"")}catch{T=function(Se,ze,Ve){return Se[ze]=Ve}}function k(Oe,Pe,Se,ze){var Ve=Pe&&Pe.prototype instanceof U?Pe:U,We=Object.create(Ve.prototype),Xe=new qe(ze||[]);return c(We,"_invoke",{value:Re(Oe,Se,Xe)}),We}function z(Oe,Pe,Se){try{return{type:"normal",arg:Oe.call(Pe,Se)}}catch(ze){return{type:"throw",arg:ze}}}t.wrap=k;var M="suspendedStart",Y="suspendedYield",K="executing",Z="completed",Q={};function U(){}function D(){}function H(){}var ne={};T(ne,g,function(){return this});var he=Object.getPrototypeOf,ge=he&&he(he(ut([])));ge&&ge!==i&&s.call(ge,g)&&(ne=ge);var ue=H.prototype=U.prototype=Object.create(ne);function Me(Oe){["next","throw","return"].forEach(function(Pe){T(Oe,Pe,function(Se){return this._invoke(Pe,Se)})})}function Be(Oe,Pe){function Se(Ve,We,Xe,wt){var Dt=z(Oe[Ve],Oe,We);if(Dt.type!=="throw"){var Zt=Dt.arg,Kt=Zt.value;return Kt&&Gt(Kt)=="object"&&s.call(Kt,"__await")?Pe.resolve(Kt.__await).then(function(Ht){Se("next",Ht,Xe,wt)},function(Ht){Se("throw",Ht,Xe,wt)}):Pe.resolve(Kt).then(function(Ht){Zt.value=Ht,Xe(Zt)},function(Ht){return Se("throw",Ht,Xe,wt)})}wt(Dt.arg)}var ze;c(this,"_invoke",{value:function(We,Xe){function wt(){return new Pe(function(Dt,Zt){Se(We,Xe,Dt,Zt)})}return ze=ze?ze.then(wt,wt):wt()}})}function Re(Oe,Pe,Se){var ze=M;return function(Ve,We){if(ze===K)throw Error("Generator is already running");if(ze===Z){if(Ve==="throw")throw We;return{value:e,done:!0}}for(Se.method=Ve,Se.arg=We;;){var Xe=Se.delegate;if(Xe){var wt=He(Xe,Se);if(wt){if(wt===Q)continue;return wt}}if(Se.method==="next")Se.sent=Se._sent=Se.arg;else if(Se.method==="throw"){if(ze===M)throw ze=Z,Se.arg;Se.dispatchException(Se.arg)}else Se.method==="return"&&Se.abrupt("return",Se.arg);ze=K;var Dt=z(Oe,Pe,Se);if(Dt.type==="normal"){if(ze=Se.done?Z:Y,Dt.arg===Q)continue;return{value:Dt.arg,done:Se.done}}Dt.type==="throw"&&(ze=Z,Se.method="throw",Se.arg=Dt.arg)}}}function He(Oe,Pe){var Se=Pe.method,ze=Oe.iterator[Se];if(ze===e)return Pe.delegate=null,Se==="throw"&&Oe.iterator.return&&(Pe.method="return",Pe.arg=e,He(Oe,Pe),Pe.method==="throw")||Se!=="return"&&(Pe.method="throw",Pe.arg=new TypeError("The iterator does not provide a '"+Se+"' method")),Q;var Ve=z(ze,Oe.iterator,Pe.arg);if(Ve.type==="throw")return Pe.method="throw",Pe.arg=Ve.arg,Pe.delegate=null,Q;var We=Ve.arg;return We?We.done?(Pe[Oe.resultName]=We.value,Pe.next=Oe.nextLoc,Pe.method!=="return"&&(Pe.method="next",Pe.arg=e),Pe.delegate=null,Q):We:(Pe.method="throw",Pe.arg=new TypeError("iterator result is not an object"),Pe.delegate=null,Q)}function rt(Oe){var Pe={tryLoc:Oe[0]};1 in Oe&&(Pe.catchLoc=Oe[1]),2 in Oe&&(Pe.finallyLoc=Oe[2],Pe.afterLoc=Oe[3]),this.tryEntries.push(Pe)}function Ze(Oe){var Pe=Oe.completion||{};Pe.type="normal",delete Pe.arg,Oe.completion=Pe}function qe(Oe){this.tryEntries=[{tryLoc:"root"}],Oe.forEach(rt,this),this.reset(!0)}function ut(Oe){if(Oe||Oe===""){var Pe=Oe[g];if(Pe)return Pe.call(Oe);if(typeof Oe.next=="function")return Oe;if(!isNaN(Oe.length)){var Se=-1,ze=function Ve(){for(;++Se<Oe.length;)if(s.call(Oe,Se))return Ve.value=Oe[Se],Ve.done=!1,Ve;return Ve.value=e,Ve.done=!0,Ve};return ze.next=ze}}throw new TypeError(Gt(Oe)+" is not iterable")}return D.prototype=H,c(ue,"constructor",{value:H,configurable:!0}),c(H,"constructor",{value:D,configurable:!0}),D.displayName=T(H,C,"GeneratorFunction"),t.isGeneratorFunction=function(Oe){var Pe=typeof Oe=="function"&&Oe.constructor;return!!Pe&&(Pe===D||(Pe.displayName||Pe.name)==="GeneratorFunction")},t.mark=function(Oe){return Object.setPrototypeOf?Object.setPrototypeOf(Oe,H):(Oe.__proto__=H,T(Oe,C,"GeneratorFunction")),Oe.prototype=Object.create(ue),Oe},t.awrap=function(Oe){return{__await:Oe}},Me(Be.prototype),T(Be.prototype,h,function(){return this}),t.AsyncIterator=Be,t.async=function(Oe,Pe,Se,ze,Ve){Ve===void 0&&(Ve=Promise);var We=new Be(k(Oe,Pe,Se,ze),Ve);return t.isGeneratorFunction(Pe)?We:We.next().then(function(Xe){return Xe.done?Xe.value:We.next()})},Me(ue),T(ue,C,"Generator"),T(ue,g,function(){return this}),T(ue,"toString",function(){return"[object Generator]"}),t.keys=function(Oe){var Pe=Object(Oe),Se=[];for(var ze in Pe)Se.push(ze);return Se.reverse(),function Ve(){for(;Se.length;){var We=Se.pop();if(We in Pe)return Ve.value=We,Ve.done=!1,Ve}return Ve.done=!0,Ve}},t.values=ut,qe.prototype={constructor:qe,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ze),!Pe)for(var Se in this)Se.charAt(0)==="t"&&s.call(this,Se)&&!isNaN(+Se.slice(1))&&(this[Se]=e)},stop:function(){this.done=!0;var Pe=this.tryEntries[0].completion;if(Pe.type==="throw")throw Pe.arg;return this.rval},dispatchException:function(Pe){if(this.done)throw Pe;var Se=this;function ze(Zt,Kt){return Xe.type="throw",Xe.arg=Pe,Se.next=Zt,Kt&&(Se.method="next",Se.arg=e),!!Kt}for(var Ve=this.tryEntries.length-1;Ve>=0;--Ve){var We=this.tryEntries[Ve],Xe=We.completion;if(We.tryLoc==="root")return ze("end");if(We.tryLoc<=this.prev){var wt=s.call(We,"catchLoc"),Dt=s.call(We,"finallyLoc");if(wt&&Dt){if(this.prev<We.catchLoc)return ze(We.catchLoc,!0);if(this.prev<We.finallyLoc)return ze(We.finallyLoc)}else if(wt){if(this.prev<We.catchLoc)return ze(We.catchLoc,!0)}else{if(!Dt)throw Error("try statement without catch or finally");if(this.prev<We.finallyLoc)return ze(We.finallyLoc)}}}},abrupt:function(Pe,Se){for(var ze=this.tryEntries.length-1;ze>=0;--ze){var Ve=this.tryEntries[ze];if(Ve.tryLoc<=this.prev&&s.call(Ve,"finallyLoc")&&this.prev<Ve.finallyLoc){var We=Ve;break}}We&&(Pe==="break"||Pe==="continue")&&We.tryLoc<=Se&&Se<=We.finallyLoc&&(We=null);var Xe=We?We.completion:{};return Xe.type=Pe,Xe.arg=Se,We?(this.method="next",this.next=We.finallyLoc,Q):this.complete(Xe)},complete:function(Pe,Se){if(Pe.type==="throw")throw Pe.arg;return Pe.type==="break"||Pe.type==="continue"?this.next=Pe.arg:Pe.type==="return"?(this.rval=this.arg=Pe.arg,this.method="return",this.next="end"):Pe.type==="normal"&&Se&&(this.next=Se),Q},finish:function(Pe){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var ze=this.tryEntries[Se];if(ze.finallyLoc===Pe)return this.complete(ze.completion,ze.afterLoc),Ze(ze),Q}},catch:function(Pe){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var ze=this.tryEntries[Se];if(ze.tryLoc===Pe){var Ve=ze.completion;if(Ve.type==="throw"){var We=Ve.arg;Ze(ze)}return We}}throw Error("illegal catch attempt")},delegateYield:function(Pe,Se,ze){return this.delegate={iterator:ut(Pe),resultName:Se,nextLoc:ze},this.method==="next"&&(this.arg=e),Q}},t}function b2(e,t,i,s,c,m,g){try{var h=e[m](g),C=h.value}catch(T){return void i(T)}h.done?t(C):Promise.resolve(C).then(s,c)}function Ul(e){return function(){var t=this,i=arguments;return new Promise(function(s,c){var m=e.apply(t,i);function g(C){b2(m,s,c,g,h,"next",C)}function h(C){b2(m,s,c,g,h,"throw",C)}g(void 0)})}}var Hd=Ke({},p3),DL=Hd.version,OL=Hd.render,BL=Hd.unmountComponentAtNode,_g;try{var NL=Number((DL||"").split(".")[0]);NL>=18&&(_g=Hd.createRoot)}catch{}function w2(e){var t=Hd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&Gt(t)==="object"&&(t.usingClientEntryPoint=e)}var zm="__rc_react_root__";function jL(e,t){w2(!0);var i=t[zm]||_g(t);w2(!1),i.render(e),t[zm]=i}function $L(e,t){OL(e,t)}function rP(e,t){if(_g){jL(e,t);return}$L(e,t)}function VL(e){return K0.apply(this,arguments)}function K0(){return K0=Ul(mi().mark(function e(t){return mi().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.resolve().then(function(){var c;(c=t[zm])===null||c===void 0||c.unmount(),delete t[zm]}));case 1:case"end":return s.stop()}},e)})),K0.apply(this,arguments)}function UL(e){BL(e)}function iP(e){return X0.apply(this,arguments)}function X0(){return X0=Ul(mi().mark(function e(t){return mi().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(_g===void 0){s.next=2;break}return s.abrupt("return",VL(t));case 2:UL(t);case 3:case"end":return s.stop()}},e)})),X0.apply(this,arguments)}const Rm=(e,t,i)=>i!==void 0?i:`${e}-${t}`,HL=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),i=t.width,s=t.height;if(i||s)return!0}if(e.getBoundingClientRect){var c=e.getBoundingClientRect(),m=c.width,g=c.height;if(m||g)return!0}}return!1},WL=e=>{const{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},qL=x1("Wave",e=>[WL(e)]),oP="ant-wave-target";function GL(e){const t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}function xv(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&GL(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function ZL(e){const{borderTopColor:t,borderColor:i,backgroundColor:s}=getComputedStyle(e);return xv(t)?t:xv(i)?i:xv(s)?s:null}function bv(e){return Number.isNaN(e)?0:e}const KL=e=>{const{className:t,target:i,component:s}=e,c=N.useRef(null),[m,g]=N.useState(null),[h,C]=N.useState([]),[T,k]=N.useState(0),[z,M]=N.useState(0),[Y,K]=N.useState(0),[Z,Q]=N.useState(0),[U,D]=N.useState(!1),H={left:T,top:z,width:Y,height:Z,borderRadius:h.map(ge=>`${ge}px`).join(" ")};m&&(H["--wave-color"]=m);function ne(){const ge=getComputedStyle(i);g(ZL(i));const ue=ge.position==="static",{borderLeftWidth:Me,borderTopWidth:Be}=ge;k(ue?i.offsetLeft:bv(-parseFloat(Me))),M(ue?i.offsetTop:bv(-parseFloat(Be))),K(i.offsetWidth),Q(i.offsetHeight);const{borderTopLeftRadius:Re,borderTopRightRadius:He,borderBottomLeftRadius:rt,borderBottomRightRadius:Ze}=ge;C([Re,He,Ze,rt].map(qe=>bv(parseFloat(qe))))}if(N.useEffect(()=>{if(i){const ge=Ll(()=>{ne(),D(!0)});let ue;return typeof ResizeObserver<"u"&&(ue=new ResizeObserver(ne),ue.observe(i)),()=>{Ll.cancel(ge),ue==null||ue.disconnect()}}},[]),!U)return null;const he=(s==="Checkbox"||s==="Radio")&&(i==null?void 0:i.classList.contains(oP));return N.createElement(Ud,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(ge,ue)=>{var Me;if(ue.deadline||ue.propertyName==="opacity"){const Be=(Me=c.current)===null||Me===void 0?void 0:Me.parentElement;iP(Be).then(()=>{Be==null||Be.remove()})}return!1}},(ge,ue)=>{let{className:Me}=ge;return N.createElement("div",{ref:dg(c,ue),className:mn(t,{"wave-quick":he},Me),style:H})})},XL=(e,t)=>{var i;const{component:s}=t;if(s==="Checkbox"&&!(!((i=e.querySelector("input"))===null||i===void 0)&&i.checked))return;const c=document.createElement("div");c.style.position="absolute",c.style.left="0px",c.style.top="0px",e==null||e.insertBefore(c,e==null?void 0:e.firstChild),rP(N.createElement(KL,Object.assign({},t,{target:e})),c)},YL=(e,t,i)=>{const{wave:s}=N.useContext(vo),[,c,m]=oa(),g=_1(T=>{const k=e.current;if(s!=null&&s.disabled||!k)return;const z=k.querySelector(`.${oP}`)||k,{showEffect:M}=s||{};(M||XL)(z,{className:t,token:c,component:i,event:T,hashId:m})}),h=N.useRef();return T=>{Ll.cancel(h.current),h.current=Ll(()=>{g(T)})}},JL=e=>{const{children:t,disabled:i,component:s}=e,{getPrefixCls:c}=N.useContext(vo),m=N.useRef(null),g=c("wave"),[,h]=qL(g),C=YL(m,mn(g,h),s);if(lt.useEffect(()=>{const k=m.current;if(!k||k.nodeType!==1||i)return;const z=M=>{!HL(M.target)||!k.getAttribute||k.getAttribute("disabled")||k.disabled||k.className.includes("disabled")||k.className.includes("-leave")||C(M)};return k.addEventListener("click",z,!0),()=>{k.removeEventListener("click",z,!0)}},[i]),!lt.isValidElement(t))return t??null;const T=s1(t)?dg(t.ref,m):m;return JT(t,{ref:T})},QL=e=>{const t=lt.useContext(cu);return lt.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},aP=N.createContext(null),e6=(e,t)=>{const i=N.useContext(aP),s=N.useMemo(()=>{if(!i)return"";const{compactDirection:c,isFirstItem:m,isLastItem:g}=i,h=c==="vertical"?"-vertical-":"-";return mn(`${e}-compact${h}item`,{[`${e}-compact${h}first-item`]:m,[`${e}-compact${h}last-item`]:g,[`${e}-compact${h}item-rtl`]:t==="rtl"})},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:s}},t6=e=>{let{children:t}=e;return N.createElement(aP.Provider,{value:null},t)};var n6=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};const sP=N.createContext(void 0),r6=e=>{const{getPrefixCls:t,direction:i}=N.useContext(vo),{prefixCls:s,size:c,className:m}=e,g=n6(e,["prefixCls","size","className"]),h=t("btn-group",s),[,,C]=oa();let T="";switch(c){case"large":T="lg";break;case"small":T="sm";break}const k=mn(h,{[`${h}-${T}`]:T,[`${h}-rtl`]:i==="rtl"},m,C);return N.createElement(sP.Provider,{value:c},N.createElement("div",Object.assign({},g,{className:k})))},S2=/^[\u4e00-\u9fa5]{2}$/,Y0=S2.test.bind(S2);function lP(e){return e==="danger"?{danger:!0}:{type:e}}function C2(e){return typeof e=="string"}function wv(e){return e==="text"||e==="link"}function i6(e,t){if(e==null)return;const i=t?" ":"";return typeof e!="string"&&typeof e!="number"&&C2(e.type)&&Y0(e.props.children)?JT(e,{children:e.props.children.split("").join(i)}):C2(e)?Y0(e)?lt.createElement("span",null,e.split("").join(i)):lt.createElement("span",null,e):TL(e)?lt.createElement("span",null,e):e}function o6(e,t){let i=!1;const s=[];return lt.Children.forEach(e,c=>{const m=typeof c,g=m==="string"||m==="number";if(i&&g){const h=s.length-1,C=s[h];s[h]=`${C}${c}`}else s.push(c);i=g}),lt.Children.map(s,c=>i6(c,t))}const cP=N.forwardRef((e,t)=>{const{className:i,style:s,children:c,prefixCls:m}=e,g=mn(`${m}-icon`,i);return lt.createElement("span",{ref:t,className:g,style:s},c)}),E2=N.forwardRef((e,t)=>{const{prefixCls:i,className:s,style:c,iconClassName:m,iconPosition:g="start"}=e,h=mn(s,{[`${i}-loading-icon-end`]:g==="end",[`${i}-loading-icon`]:g==="start"});return lt.createElement(cP,{prefixCls:i,className:h,style:c,ref:t},lt.createElement(ML,{className:m}))}),Sv=()=>({width:0,opacity:0,transform:"scale(0)"}),Cv=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),a6=e=>{const{prefixCls:t,loading:i,existIcon:s,className:c,style:m,iconPosition:g}=e,h=!!i;return s?lt.createElement(E2,{prefixCls:t,className:c,style:m,iconPosition:g}):lt.createElement(Ud,{visible:h,motionName:`${t}-loading-icon-motion`,motionLeave:h,removeOnLeave:!0,onAppearStart:Sv,onAppearActive:Cv,onEnterStart:Sv,onEnterActive:Cv,onLeaveStart:Cv,onLeaveActive:Sv},(C,T)=>{let{className:k,style:z}=C;return lt.createElement(E2,{prefixCls:t,className:c,style:Object.assign(Object.assign({},m),z),ref:T,iconClassName:k,iconPosition:g})})},T2=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),s6=e=>{const{componentCls:t,fontSize:i,lineWidth:s,groupBorderColor:c,colorErrorHover:m}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(s).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},T2(`${t}-primary`,c),T2(`${t}-danger`,m)]}},uP=e=>{const{paddingInline:t,onlyIconSize:i,paddingBlock:s}=e;return Vl(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:s,buttonIconOnlyFontSize:i})},hP=e=>{var t,i,s,c,m,g;const h=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,C=(i=e.contentFontSizeSM)!==null&&i!==void 0?i:e.fontSize,T=(s=e.contentFontSizeLG)!==null&&s!==void 0?s:e.fontSizeLG,k=(c=e.contentLineHeight)!==null&&c!==void 0?c:Qp(h),z=(m=e.contentLineHeightSM)!==null&&m!==void 0?m:Qp(C),M=(g=e.contentLineHeightLG)!==null&&g!==void 0?g:Qp(T);return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:e.fontSizeLG,onlyIconSizeSM:e.fontSizeLG-2,onlyIconSizeLG:e.fontSizeLG+2,groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:e.colorBgTextHover,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,contentFontSize:h,contentFontSizeSM:C,contentFontSizeLG:T,contentLineHeight:k,contentLineHeightSM:z,contentLineHeightLG:M,paddingBlock:Math.max((e.controlHeight-h*k)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-C*z)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-T*M)/2-e.lineWidth,0)}},l6=e=>{const{componentCls:t,iconCls:i,fontWeight:s}=e;return{[t]:{outline:"none",position:"relative",display:"inline-block",fontWeight:s,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${vn(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${t}-icon`]:{lineHeight:0,"&-end":{marginInlineStart:e.marginXS}},[`> ${i} + span, > span + ${i}`]:{marginInlineStart:e.marginXS},[`&:not(${t}-icon-only) > ${t}-icon`]:{[`&${t}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:e.marginXS},[`&${t}-loading-icon-end`]:{marginInlineStart:e.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},IT(e)),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${i})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${t}-compact-item`]:{flex:"none"}}}},Na=(e,t,i)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":i}}),c6=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),u6=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),h6=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),Ad=(e,t,i,s,c,m,g,h)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:i||void 0,background:t,borderColor:s||void 0,boxShadow:"none"},Na(e,Object.assign({background:t},g),Object.assign({background:t},h))),{"&:disabled":{cursor:"not-allowed",color:c||void 0,borderColor:m||void 0}})}),E1=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},h6(e))}),dP=e=>Object.assign({},E1(e)),Lm=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),fP=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},dP(e)),{background:e.defaultBg,borderColor:e.defaultBorderColor,color:e.defaultColor,boxShadow:e.defaultShadow}),Na(e.componentCls,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),Ad(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Na(e.componentCls,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Ad(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),E1(e))}),d6=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},dP(e)),{color:e.primaryColor,background:e.colorPrimary,boxShadow:e.primaryShadow}),Na(e.componentCls,{color:e.colorTextLightSolid,background:e.colorPrimaryHover},{color:e.colorTextLightSolid,background:e.colorPrimaryActive})),Ad(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:e.colorError,boxShadow:e.dangerShadow,color:e.dangerColor},Na(e.componentCls,{background:e.colorErrorHover},{background:e.colorErrorActive})),Ad(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),E1(e))}),f6=e=>Object.assign(Object.assign({},fP(e)),{borderStyle:"dashed"}),p6=e=>Object.assign(Object.assign(Object.assign({color:e.colorLink},Na(e.componentCls,{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),Lm(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Na(e.componentCls,{color:e.colorErrorHover},{color:e.colorErrorActive})),Lm(e))}),m6=e=>Object.assign(Object.assign(Object.assign({},Na(e.componentCls,{color:e.colorText,background:e.textHoverBg},{color:e.colorText,background:e.colorBgTextActive})),Lm(e)),{[`&${e.componentCls}-dangerous`]:Object.assign(Object.assign({color:e.colorError},Lm(e)),Na(e.componentCls,{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive}))}),g6=e=>{const{componentCls:t}=e;return{[`${t}-default`]:fP(e),[`${t}-primary`]:d6(e),[`${t}-dashed`]:f6(e),[`${t}-link`]:p6(e),[`${t}-text`]:m6(e),[`${t}-ghost`]:Ad(e.componentCls,e.ghostBg,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)}},T1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:i,controlHeight:s,fontSize:c,lineHeight:m,borderRadius:g,buttonPaddingHorizontal:h,iconCls:C,buttonPaddingVertical:T}=e,k=`${i}-icon-only`;return[{[`${t}`]:{fontSize:c,lineHeight:m,height:s,padding:`${vn(T)} ${vn(h)}`,borderRadius:g,[`&${k}`]:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:s,paddingInlineStart:0,paddingInlineEnd:0,[`&${i}-round`]:{width:"auto"},[C]:{fontSize:e.buttonIconOnlyFontSize}},[`&${i}-loading`]:{opacity:e.opacityLoading,cursor:"default"},[`${i}-loading-icon`]:{transition:`width ${e.motionDurationSlow} ${e.motionEaseInOut}, opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`}}},{[`${i}${i}-circle${t}`]:c6(e)},{[`${i}${i}-round${t}`]:u6(e)}]},y6=e=>{const t=Vl(e,{fontSize:e.contentFontSize,lineHeight:e.contentLineHeight});return T1(t,e.componentCls)},v6=e=>{const t=Vl(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,lineHeight:e.contentLineHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:e.paddingBlockSM,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return T1(t,`${e.componentCls}-sm`)},_6=e=>{const t=Vl(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,lineHeight:e.contentLineHeightLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:e.paddingBlockLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return T1(t,`${e.componentCls}-lg`)},x6=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},b6=LT("Button",e=>{const t=uP(e);return[l6(t),y6(t),v6(t),_6(t),x6(t),g6(t),s6(t)]},hP,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function w6(e,t,i){const{focusElCls:s,focus:c,borderElCls:m}=i,g=m?"> *":"",h=["hover",c?"focus":null,"active"].filter(Boolean).map(C=>`&:${C} ${g}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[h]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${g}`]:{zIndex:0}})}}function S6(e,t,i){const{borderElCls:s}=i,c=s?`> ${s}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${c}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${c}, &${e}-sm ${c}, &${e}-lg ${c}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function C6(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:i}=e,s=`${i}-compact`;return{[s]:Object.assign(Object.assign({},w6(e,s,t)),S6(i,s,t))}}function E6(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function T6(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function P6(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},E6(e,t)),T6(e.componentCls,t))}}const I6=e=>{const{componentCls:t,calc:i}=e;return{[t]:{[`&-compact-item${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:i(e.lineWidth).mul(-1).equal(),insetInlineStart:i(e.lineWidth).mul(-1).equal(),display:"inline-block",width:e.lineWidth,height:`calc(100% + ${vn(e.lineWidth)} * 2)`,backgroundColor:e.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${t}-primary`]:{[`&:not([disabled]) + ${t}-compact-vertical-item${t}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:i(e.lineWidth).mul(-1).equal(),insetInlineStart:i(e.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${vn(e.lineWidth)} * 2)`,height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}}}}}},k6=RT(["Button","compact"],e=>{const t=uP(e);return[C6(t),P6(t),I6(t)]},hP);var M6=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};function A6(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const z6=lt.forwardRef((e,t)=>{var i,s,c;const{loading:m=!1,prefixCls:g,type:h,danger:C,shape:T="default",size:k,styles:z,disabled:M,className:Y,rootClassName:K,children:Z,icon:Q,iconPosition:U="start",ghost:D=!1,block:H=!1,htmlType:ne="button",classNames:he,style:ge={},autoInsertSpace:ue}=e,Me=M6(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace"]),Be=h||"default",{getPrefixCls:Re,direction:He,button:rt}=N.useContext(vo),Ze=(i=ue??(rt==null?void 0:rt.autoInsertSpace))!==null&&i!==void 0?i:!0,qe=Re("btn",g),[ut,Oe,Pe]=b6(qe),Se=N.useContext(Mm),ze=M??Se,Ve=N.useContext(sP),We=N.useMemo(()=>A6(m),[m]),[Xe,wt]=N.useState(We.loading),[Dt,Zt]=N.useState(!1),Ht=dg(t,N.createRef()),jn=N.Children.count(Z)===1&&!Q&&!wv(Be);N.useEffect(()=>{let xn=null;We.delay>0?xn=setTimeout(()=>{xn=null,wt(!0)},We.delay):wt(We.loading);function Yn(){xn&&(clearTimeout(xn),xn=null)}return Yn},[We]),N.useEffect(()=>{if(!Ht||!Ht.current||!Ze)return;const xn=Ht.current.textContent;jn&&Y0(xn)?Dt||Zt(!0):Dt&&Zt(!1)},[Ht]);const zr=xn=>{const{onClick:Yn}=e;if(Xe||ze){xn.preventDefault();return}Yn==null||Yn(xn)},{compactSize:Rr,compactItemClassnames:ar}=e6(qe,He),sr={large:"lg",small:"sm",middle:void 0},Jt=QL(xn=>{var Yn,Qe;return(Qe=(Yn=k??Rr)!==null&&Yn!==void 0?Yn:Ve)!==null&&Qe!==void 0?Qe:xn}),rn=Jt&&sr[Jt]||"",Xn=Xe?"loading":Q,Ie=r5(Me,["navigate"]),pr=mn(qe,Oe,Pe,{[`${qe}-${T}`]:T!=="default"&&T,[`${qe}-${Be}`]:Be,[`${qe}-${rn}`]:rn,[`${qe}-icon-only`]:!Z&&Z!==0&&!!Xn,[`${qe}-background-ghost`]:D&&!wv(Be),[`${qe}-loading`]:Xe,[`${qe}-two-chinese-chars`]:Dt&&Ze&&!Xe,[`${qe}-block`]:H,[`${qe}-dangerous`]:!!C,[`${qe}-rtl`]:He==="rtl"},ar,Y,K,rt==null?void 0:rt.className),Gr=Object.assign(Object.assign({},rt==null?void 0:rt.style),ge),Pt=U==="end"&&Z&&Z!==0&&Xn,Ot=mn(he==null?void 0:he.icon,(s=rt==null?void 0:rt.classNames)===null||s===void 0?void 0:s.icon,{[`${qe}-icon-end`]:Pt}),_n=Object.assign(Object.assign({},(z==null?void 0:z.icon)||{}),((c=rt==null?void 0:rt.styles)===null||c===void 0?void 0:c.icon)||{}),xr=Q&&!Xe?lt.createElement(cP,{prefixCls:qe,className:Ot,style:_n},Q):lt.createElement(a6,{existIcon:!!Q,prefixCls:qe,loading:!!Xe,iconPosition:U}),Qi=Z||Z===0?o6(Z,jn&&Ze):null,zi=(xn,Yn)=>U==="start"?lt.createElement(lt.Fragment,null,xn,Yn):lt.createElement(lt.Fragment,null,Yn,xn);if(Ie.href!==void 0)return ut(lt.createElement("a",Object.assign({},Ie,{className:mn(pr,{[`${qe}-disabled`]:ze}),href:ze?void 0:Ie.href,style:Gr,onClick:zr,ref:Ht,tabIndex:ze?-1:0}),zi(xr,Qi)));let Lr=lt.createElement("button",Object.assign({},Me,{type:ne,className:pr,style:Gr,onClick:zr,disabled:ze,ref:Ht}),zi(xr,Qi),!!ar&&lt.createElement(k6,{key:"compact",prefixCls:qe}));return wv(Be)||(Lr=lt.createElement(JL,{component:"Button",disabled:!!Xe},Lr)),ut(Lr)}),Wd=z6;Wd.Group=r6;Wd.__ANT_BUTTON=!0;function P2(e){return!!(e&&e.then)}const pP=e=>{const{type:t,children:i,prefixCls:s,buttonProps:c,close:m,autoFocus:g,emitEvent:h,isSilent:C,quitOnNullishReturnValue:T,actionFn:k}=e,z=N.useRef(!1),M=N.useRef(null),[Y,K]=rd(!1),Z=function(){m==null||m.apply(void 0,arguments)};N.useEffect(()=>{let D=null;return g&&(D=setTimeout(()=>{var H;(H=M.current)===null||H===void 0||H.focus()})),()=>{D&&clearTimeout(D)}},[]);const Q=D=>{P2(D)&&(K(!0),D.then(function(){K(!1,!0),Z.apply(void 0,arguments),z.current=!1},H=>{if(K(!1,!0),z.current=!1,!(C!=null&&C()))return Promise.reject(H)}))},U=D=>{if(z.current)return;if(z.current=!0,!k){Z();return}let H;if(h){if(H=k(D),T&&!P2(H)){z.current=!1,Z(D);return}}else if(k.length)H=k(m),z.current=!1;else if(H=k(),!H){Z();return}Q(H)};return N.createElement(Wd,Object.assign({},lP(t),{onClick:U,loading:Y,prefixCls:s},c,{ref:M}),i)},qd=lt.createContext({}),{Provider:mP}=qd,I2=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:i,isSilent:s,mergedOkCancel:c,rootPrefixCls:m,close:g,onCancel:h,onConfirm:C}=N.useContext(qd);return c?lt.createElement(pP,{isSilent:s,actionFn:h,close:function(){g==null||g.apply(void 0,arguments),C==null||C(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${m}-btn`},i):null},k2=()=>{const{autoFocusButton:e,close:t,isSilent:i,okButtonProps:s,rootPrefixCls:c,okTextLocale:m,okType:g,onConfirm:h,onOk:C}=N.useContext(qd);return lt.createElement(pP,{isSilent:i,type:g||"primary",actionFn:C,close:function(){t==null||t.apply(void 0,arguments),h==null||h(!0)},autoFocus:e==="ok",buttonProps:s,prefixCls:`${c}-btn`},m)};var gP=N.createContext(null),M2=[];function R6(e,t){var i=N.useState(function(){if(!Ii())return null;var K=document.createElement("div");return K}),s=Ft(i,1),c=s[0],m=N.useRef(!1),g=N.useContext(gP),h=N.useState(M2),C=Ft(h,2),T=C[0],k=C[1],z=g||(m.current?void 0:function(K){k(function(Z){var Q=[K].concat(Tt(Z));return Q})});function M(){c.parentElement||document.body.appendChild(c),m.current=!0}function Y(){var K;(K=c.parentElement)===null||K===void 0||K.removeChild(c),m.current=!1}return km(function(){return e?g?g(M):M():Y(),Y},[e]),km(function(){T.length&&(T.forEach(function(K){return K()}),k(M2))},[T]),[c,z]}function L6(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),i=document.createElement("div");i.id=t;var s=i.style;s.position="absolute",s.left="0",s.top="0",s.width="100px",s.height="100px",s.overflow="scroll";var c,m;if(e){var g=getComputedStyle(e);s.scrollbarColor=g.scrollbarColor,s.scrollbarWidth=g.scrollbarWidth;var h=getComputedStyle(e,"::-webkit-scrollbar"),C=parseInt(h.width,10),T=parseInt(h.height,10);try{var k=C?"width: ".concat(h.width,";"):"",z=T?"height: ".concat(h.height,";"):"";La(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(k,`
`).concat(z,`
}`),t)}catch(K){console.error(K),c=C,m=T}}document.body.appendChild(i);var M=e&&c&&!isNaN(c)?c:i.offsetWidth-i.clientWidth,Y=e&&m&&!isNaN(m)?m:i.offsetHeight-i.clientHeight;return document.body.removeChild(i),Pd(t),{width:M,height:Y}}function F6(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:L6(e)}function D6(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var O6="rc-util-locker-".concat(Date.now()),A2=0;function B6(e){var t=!!e,i=N.useState(function(){return A2+=1,"".concat(O6,"_").concat(A2)}),s=Ft(i,1),c=s[0];km(function(){if(t){var m=F6(document.body).width,g=D6();La(`
html body {
  overflow-y: hidden;
  `.concat(g?"width: calc(100% - ".concat(m,"px);"):"",`
}`),c)}else Pd(c);return function(){Pd(c)}},[t,c])}var N6=!1;function j6(e){return N6}var z2=function(t){return t===!1?!1:!Ii()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},$6=N.forwardRef(function(e,t){var i=e.open,s=e.autoLock,c=e.getContainer;e.debug;var m=e.autoDestroy,g=m===void 0?!0:m,h=e.children,C=N.useState(i),T=Ft(C,2),k=T[0],z=T[1],M=k||i;N.useEffect(function(){(g||i)&&z(i)},[i,g]);var Y=N.useState(function(){return z2(c)}),K=Ft(Y,2),Z=K[0],Q=K[1];N.useEffect(function(){var He=z2(c);Q(He??null)});var U=R6(M&&!Z),D=Ft(U,2),H=D[0],ne=D[1],he=Z??H;B6(s&&i&&Ii()&&(he===H||he===document.body));var ge=null;if(h&&s1(h)&&t){var ue=h;ge=ue.ref}var Me=BE(ge,t);if(!M||!Ii()||Z===void 0)return null;var Be=he===!1||j6(),Re=h;return t&&(Re=N.cloneElement(h,{ref:Me})),N.createElement(gP.Provider,{value:ne},Be?Re:pu.createPortal(Re,he))}),yP=N.createContext({});function V6(){var e=Ke({},Fd);return e.useId}var R2=0,L2=V6();const U6=L2?function(t){var i=L2();return t||i}:function(t){var i=N.useState("ssr-id"),s=Ft(i,2),c=s[0],m=s[1];return N.useEffect(function(){var g=R2;R2+=1,m("rc_unique_".concat(g))},[]),t||c};function F2(e,t,i){var s=t;return!s&&i&&(s="".concat(e,"-").concat(i)),s}function D2(e,t){var i=e["page".concat(t?"Y":"X","Offset")],s="scroll".concat(t?"Top":"Left");if(typeof i!="number"){var c=e.document;i=c.documentElement[s],typeof i!="number"&&(i=c.body[s])}return i}function H6(e){var t=e.getBoundingClientRect(),i={left:t.left,top:t.top},s=e.ownerDocument,c=s.defaultView||s.parentWindow;return i.left+=D2(c),i.top+=D2(c,!0),i}const W6=N.memo(function(e){var t=e.children;return t},function(e,t){var i=t.shouldUpdate;return!i});var O2={width:0,height:0,overflow:"hidden",outline:"none"},q6={outline:"none"},vP=lt.forwardRef(function(e,t){var i=e.prefixCls,s=e.className,c=e.style,m=e.title,g=e.ariaId,h=e.footer,C=e.closable,T=e.closeIcon,k=e.onClose,z=e.children,M=e.bodyStyle,Y=e.bodyProps,K=e.modalRender,Z=e.onMouseDown,Q=e.onMouseUp,U=e.holderRef,D=e.visible,H=e.forceRender,ne=e.width,he=e.height,ge=e.classNames,ue=e.styles,Me=lt.useContext(yP),Be=Me.panel,Re=BE(U,Be),He=N.useRef(),rt=N.useRef(),Ze=N.useRef();lt.useImperativeHandle(t,function(){return{focus:function(){var Xe;(Xe=Ze.current)===null||Xe===void 0||Xe.focus()},changeActive:function(Xe){var wt=document,Dt=wt.activeElement;Xe&&Dt===rt.current?He.current.focus():!Xe&&Dt===He.current&&rt.current.focus()}}});var qe={};ne!==void 0&&(qe.width=ne),he!==void 0&&(qe.height=he);var ut;h&&(ut=lt.createElement("div",{className:mn("".concat(i,"-footer"),ge==null?void 0:ge.footer),style:Ke({},ue==null?void 0:ue.footer)},h));var Oe;m&&(Oe=lt.createElement("div",{className:mn("".concat(i,"-header"),ge==null?void 0:ge.header),style:Ke({},ue==null?void 0:ue.header)},lt.createElement("div",{className:"".concat(i,"-title"),id:g},m)));var Pe=N.useMemo(function(){return Gt(C)==="object"&&C!==null?C:C?{closeIcon:T??lt.createElement("span",{className:"".concat(i,"-close-x")})}:{}},[C,T]),Se=C1(Pe,!0),ze;C&&(ze=lt.createElement("button",Kn({type:"button",onClick:k,"aria-label":"Close"},Se,{className:"".concat(i,"-close")}),Pe.closeIcon));var Ve=lt.createElement("div",{className:mn("".concat(i,"-content"),ge==null?void 0:ge.content),style:ue==null?void 0:ue.content},ze,Oe,lt.createElement("div",Kn({className:mn("".concat(i,"-body"),ge==null?void 0:ge.body),style:Ke(Ke({},M),ue==null?void 0:ue.body)},Y),z),ut);return lt.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":m?g:null,"aria-modal":"true",ref:Re,style:Ke(Ke({},c),qe),className:mn(i,s),onMouseDown:Z,onMouseUp:Q},lt.createElement("div",{tabIndex:0,ref:He,style:O2,"aria-hidden":"true"}),lt.createElement("div",{ref:Ze,tabIndex:-1,style:q6},lt.createElement(W6,{shouldUpdate:D||H},K?K(Ve):Ve)),lt.createElement("div",{tabIndex:0,ref:rt,style:O2,"aria-hidden":"true"}))}),_P=N.forwardRef(function(e,t){var i=e.prefixCls,s=e.title,c=e.style,m=e.className,g=e.visible,h=e.forceRender,C=e.destroyOnClose,T=e.motionName,k=e.ariaId,z=e.onVisibleChanged,M=e.mousePosition,Y=N.useRef(),K=N.useState(),Z=Ft(K,2),Q=Z[0],U=Z[1],D={};Q&&(D.transformOrigin=Q);function H(){var ne=H6(Y.current);U(M?"".concat(M.x-ne.left,"px ").concat(M.y-ne.top,"px"):"")}return N.createElement(Ud,{visible:g,onVisibleChanged:z,onAppearPrepare:H,onEnterPrepare:H,forceRender:h,motionName:T,removeOnLeave:C,ref:Y},function(ne,he){var ge=ne.className,ue=ne.style;return N.createElement(vP,Kn({},e,{ref:t,title:s,ariaId:k,prefixCls:i,holderRef:he,style:Ke(Ke(Ke({},ue),c),D),className:mn(m,ge)}))})});_P.displayName="Content";function G6(e){var t=e.prefixCls,i=e.style,s=e.visible,c=e.maskProps,m=e.motionName,g=e.className;return N.createElement(Ud,{key:"mask",visible:s,motionName:m,leavedClassName:"".concat(t,"-mask-hidden")},function(h,C){var T=h.className,k=h.style;return N.createElement("div",Kn({ref:C,style:Ke(Ke({},k),i),className:mn("".concat(t,"-mask"),T,g)},c))})}function Z6(e){var t=e.prefixCls,i=t===void 0?"rc-dialog":t,s=e.zIndex,c=e.visible,m=c===void 0?!1:c,g=e.keyboard,h=g===void 0?!0:g,C=e.focusTriggerAfterClose,T=C===void 0?!0:C,k=e.wrapStyle,z=e.wrapClassName,M=e.wrapProps,Y=e.onClose,K=e.afterOpenChange,Z=e.afterClose,Q=e.transitionName,U=e.animation,D=e.closable,H=D===void 0?!0:D,ne=e.mask,he=ne===void 0?!0:ne,ge=e.maskTransitionName,ue=e.maskAnimation,Me=e.maskClosable,Be=Me===void 0?!0:Me,Re=e.maskStyle,He=e.maskProps,rt=e.rootClassName,Ze=e.classNames,qe=e.styles,ut=N.useRef(),Oe=N.useRef(),Pe=N.useRef(),Se=N.useState(m),ze=Ft(Se,2),Ve=ze[0],We=ze[1],Xe=U6();function wt(){k0(Oe.current,document.activeElement)||(ut.current=document.activeElement)}function Dt(){if(!k0(Oe.current,document.activeElement)){var Jt;(Jt=Pe.current)===null||Jt===void 0||Jt.focus()}}function Zt(Jt){if(Jt)Dt();else{if(We(!1),he&&ut.current&&T){try{ut.current.focus({preventScroll:!0})}catch{}ut.current=null}Ve&&(Z==null||Z())}K==null||K(Jt)}function Kt(Jt){Y==null||Y(Jt)}var Ht=N.useRef(!1),jn=N.useRef(),zr=function(){clearTimeout(jn.current),Ht.current=!0},Rr=function(){jn.current=setTimeout(function(){Ht.current=!1})},ar=null;Be&&(ar=function(rn){Ht.current?Ht.current=!1:Oe.current===rn.target&&Kt(rn)});function sr(Jt){if(h&&Jt.keyCode===zt.ESC){Jt.stopPropagation(),Kt(Jt);return}m&&Jt.keyCode===zt.TAB&&Pe.current.changeActive(!Jt.shiftKey)}return N.useEffect(function(){m&&(We(!0),wt())},[m]),N.useEffect(function(){return function(){clearTimeout(jn.current)}},[]),N.createElement("div",Kn({className:mn("".concat(i,"-root"),rt)},C1(e,{data:!0})),N.createElement(G6,{prefixCls:i,visible:he&&m,motionName:F2(i,ge,ue),style:Ke(Ke({zIndex:s},Re),qe==null?void 0:qe.mask),maskProps:He,className:Ze==null?void 0:Ze.mask}),N.createElement("div",Kn({tabIndex:-1,onKeyDown:sr,className:mn("".concat(i,"-wrap"),z,Ze==null?void 0:Ze.wrapper),ref:Oe,onClick:ar,style:Ke(Ke(Ke({zIndex:s},k),qe==null?void 0:qe.wrapper),{},{display:Ve?null:"none"})},M),N.createElement(_P,Kn({},e,{onMouseDown:zr,onMouseUp:Rr,ref:Pe,closable:H,ariaId:Xe,prefixCls:i,visible:m&&Ve,onClose:Kt,onVisibleChanged:Zt,motionName:F2(i,Q,U)}))))}var xP=function(t){var i=t.visible,s=t.getContainer,c=t.forceRender,m=t.destroyOnClose,g=m===void 0?!1:m,h=t.afterClose,C=t.panelRef,T=N.useState(i),k=Ft(T,2),z=k[0],M=k[1],Y=N.useMemo(function(){return{panel:C}},[C]);return N.useEffect(function(){i&&M(!0)},[i]),!c&&g&&!z?null:N.createElement(yP.Provider,{value:Y},N.createElement($6,{open:i||c||z,autoDestroy:!1,getContainer:s,autoLock:i||z},N.createElement(Z6,Kn({},t,{destroyOnClose:g,afterClose:function(){h==null||h(),M(!1)}}))))};xP.displayName="Dialog";function B2(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function N2(e){const{closable:t,closeIcon:i}=e||{};return lt.useMemo(()=>{if(!t&&(t===!1||i===!1||i===null))return!1;if(t===void 0&&i===void 0)return null;let s={closeIcon:typeof i!="boolean"&&i!==null?i:void 0};return t&&typeof t=="object"&&(s=Object.assign(Object.assign({},s),t)),s},[t,i])}function j2(){const e={};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return i.forEach(c=>{c&&Object.keys(c).forEach(m=>{c[m]!==void 0&&(e[m]=c[m])})}),e}const K6={};function X6(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:K6;const s=N2(e),c=N2(t),m=lt.useMemo(()=>Object.assign({closeIcon:lt.createElement(S1,null)},i),[i]),g=lt.useMemo(()=>s===!1?!1:s?j2(m,c,s):c===!1?!1:c?j2(m,c):m.closable?m:!1,[s,c,m]);return lt.useMemo(()=>{if(g===!1)return[!1,null];const{closeIconRender:h}=m,{closeIcon:C}=g;let T=C;if(T!=null){h&&(T=h(C));const k=C1(g,!0);Object.keys(k).length&&(T=lt.isValidElement(T)?lt.cloneElement(T,k):lt.createElement("span",Object.assign({},k),T))}return[!0,T]},[g,m])}const Y6=()=>Ii()&&window.document.documentElement;var wl="RC_FORM_INTERNAL_HOOKS",pn=function(){Ki(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},uu=N.createContext({getFieldValue:pn,getFieldsValue:pn,getFieldError:pn,getFieldWarning:pn,getFieldsError:pn,isFieldsTouched:pn,isFieldTouched:pn,isFieldValidating:pn,isFieldsValidating:pn,resetFields:pn,setFields:pn,setFieldValue:pn,setFieldsValue:pn,validateFields:pn,submit:pn,getInternalHooks:function(){return pn(),{dispatch:pn,initEntityValue:pn,registerField:pn,useSubscribe:pn,setInitialValues:pn,destroyForm:pn,setCallbacks:pn,registerWatch:pn,getFields:pn,setValidateMessages:pn,setPreserve:pn,getInitialValue:pn}}}),Fm=N.createContext(null);function J0(e){return e==null?[]:Array.isArray(e)?e:[e]}function J6(e){return e&&!!e._init}function Q0(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var e_=Q0();function Q6(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function eF(e,t,i){if(fg())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var c=new(e.bind.apply(e,s));return i&&Ed(c,i.prototype),c}function t_(e){var t=typeof Map=="function"?new Map:void 0;return t_=function(s){if(s===null||!Q6(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,c)}function c(){return eF(s,arguments,Rl(this).constructor)}return c.prototype=Object.create(s.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Ed(c,s)},t_(e)}var tF=/%[sdj%]/g,nF=function(){};function n_(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var s=i.field;t[s]=t[s]||[],t[s].push(i)}),t}function Gi(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var c=0,m=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var g=e.replace(tF,function(h){if(h==="%%")return"%";if(c>=m)return h;switch(h){case"%s":return String(i[c++]);case"%d":return Number(i[c++]);case"%j":try{return JSON.stringify(i[c++])}catch{return"[Circular]"}break;default:return h}});return g}return e}function rF(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function _r(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||rF(t)&&typeof e=="string"&&!e)}function iF(e,t,i){var s=[],c=0,m=e.length;function g(h){s.push.apply(s,Tt(h||[])),c++,c===m&&i(s)}e.forEach(function(h){t(h,g)})}function $2(e,t,i){var s=0,c=e.length;function m(g){if(g&&g.length){i(g);return}var h=s;s=s+1,h<c?t(e[h],m):i([])}m([])}function oF(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,Tt(e[i]||[]))}),t}var V2=function(e){mu(i,e);var t=pg(i);function i(s,c){var m;return ki(this,i),m=t.call(this,"Async Validation Error"),Fe(en(m),"errors",void 0),Fe(en(m),"fields",void 0),m.errors=s,m.fields=c,m}return Mi(i)}(t_(Error));function aF(e,t,i,s,c){if(t.first){var m=new Promise(function(M,Y){var K=function(U){return s(U),U.length?Y(new V2(U,n_(U))):M(c)},Z=oF(e);$2(Z,i,K)});return m.catch(function(M){return M}),m}var g=t.firstFields===!0?Object.keys(e):t.firstFields||[],h=Object.keys(e),C=h.length,T=0,k=[],z=new Promise(function(M,Y){var K=function(Q){if(k.push.apply(k,Q),T++,T===C)return s(k),k.length?Y(new V2(k,n_(k))):M(c)};h.length||(s(k),M(c)),h.forEach(function(Z){var Q=e[Z];g.indexOf(Z)!==-1?$2(Q,i,K):iF(Q,i,K)})});return z.catch(function(M){return M}),z}function sF(e){return!!(e&&e.message!==void 0)}function lF(e,t){for(var i=e,s=0;s<t.length;s++){if(i==null)return i;i=i[t[s]]}return i}function U2(e,t){return function(i){var s;return e.fullFields?s=lF(t,e.fullFields):s=t[i.field||e.fullField],sF(i)?(i.field=i.field||e.fullField,i.fieldValue=s,i):{message:typeof i=="function"?i():i,fieldValue:s,field:i.field||e.fullField}}}function H2(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];Gt(s)==="object"&&Gt(e[i])==="object"?e[i]=Ke(Ke({},e[i]),s):e[i]=s}}return e}var Pc="enum",cF=function(t,i,s,c,m){t[Pc]=Array.isArray(t[Pc])?t[Pc]:[],t[Pc].indexOf(i)===-1&&c.push(Gi(m.messages[Pc],t.fullField,t[Pc].join(", ")))},uF=function(t,i,s,c,m){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||c.push(Gi(m.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var g=new RegExp(t.pattern);g.test(i)||c.push(Gi(m.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},hF=function(t,i,s,c,m){var g=typeof t.len=="number",h=typeof t.min=="number",C=typeof t.max=="number",T=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=i,z=null,M=typeof i=="number",Y=typeof i=="string",K=Array.isArray(i);if(M?z="number":Y?z="string":K&&(z="array"),!z)return!1;K&&(k=i.length),Y&&(k=i.replace(T,"_").length),g?k!==t.len&&c.push(Gi(m.messages[z].len,t.fullField,t.len)):h&&!C&&k<t.min?c.push(Gi(m.messages[z].min,t.fullField,t.min)):C&&!h&&k>t.max?c.push(Gi(m.messages[z].max,t.fullField,t.max)):h&&C&&(k<t.min||k>t.max)&&c.push(Gi(m.messages[z].range,t.fullField,t.min,t.max))},bP=function(t,i,s,c,m,g){t.required&&(!s.hasOwnProperty(t.field)||_r(i,g||t.type))&&c.push(Gi(m.messages.required,t.fullField))},zp;const dF=function(){if(zp)return zp;var e="[a-fA-F\\d:]",t=function(ge){return ge&&ge.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",s="[a-fA-F\\d]{1,4}",c=["(?:".concat(s,":){7}(?:").concat(s,"|:)"),"(?:".concat(s,":){6}(?:").concat(i,"|:").concat(s,"|:)"),"(?:".concat(s,":){5}(?::").concat(i,"|(?::").concat(s,"){1,2}|:)"),"(?:".concat(s,":){4}(?:(?::").concat(s,"){0,1}:").concat(i,"|(?::").concat(s,"){1,3}|:)"),"(?:".concat(s,":){3}(?:(?::").concat(s,"){0,2}:").concat(i,"|(?::").concat(s,"){1,4}|:)"),"(?:".concat(s,":){2}(?:(?::").concat(s,"){0,3}:").concat(i,"|(?::").concat(s,"){1,5}|:)"),"(?:".concat(s,":){1}(?:(?::").concat(s,"){0,4}:").concat(i,"|(?::").concat(s,"){1,6}|:)"),"(?::(?:(?::".concat(s,"){0,5}:").concat(i,"|(?::").concat(s,"){1,7}|:))")],m="(?:%[0-9a-zA-Z]{1,})?",g="(?:".concat(c.join("|"),")").concat(m),h=new RegExp("(?:^".concat(i,"$)|(?:^").concat(g,"$)")),C=new RegExp("^".concat(i,"$")),T=new RegExp("^".concat(g,"$")),k=function(ge){return ge&&ge.exact?h:new RegExp("(?:".concat(t(ge)).concat(i).concat(t(ge),")|(?:").concat(t(ge)).concat(g).concat(t(ge),")"),"g")};k.v4=function(he){return he&&he.exact?C:new RegExp("".concat(t(he)).concat(i).concat(t(he)),"g")},k.v6=function(he){return he&&he.exact?T:new RegExp("".concat(t(he)).concat(g).concat(t(he)),"g")};var z="(?:(?:[a-z]+:)?//)",M="(?:\\S+(?::\\S*)?@)?",Y=k.v4().source,K=k.v6().source,Z="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",Q="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",U="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",D="(?::\\d{2,5})?",H='(?:[/?#][^\\s"]*)?',ne="(?:".concat(z,"|www\\.)").concat(M,"(?:localhost|").concat(Y,"|").concat(K,"|").concat(Z).concat(Q).concat(U,")").concat(D).concat(H);return zp=new RegExp("(?:^".concat(ne,"$)"),"i"),zp};var W2={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},qh={integer:function(t){return qh.number(t)&&parseInt(t,10)===t},float:function(t){return qh.number(t)&&!qh.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return Gt(t)==="object"&&!qh.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(W2.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(dF())},hex:function(t){return typeof t=="string"&&!!t.match(W2.hex)}},fF=function(t,i,s,c,m){if(t.required&&i===void 0){bP(t,i,s,c,m);return}var g=["integer","float","array","regexp","object","method","email","number","date","url","hex"],h=t.type;g.indexOf(h)>-1?qh[h](i)||c.push(Gi(m.messages.types[h],t.fullField,t.type)):h&&Gt(i)!==t.type&&c.push(Gi(m.messages.types[h],t.fullField,t.type))},pF=function(t,i,s,c,m){(/^\s+$/.test(i)||i==="")&&c.push(Gi(m.messages.whitespace,t.fullField))};const Qt={required:bP,whitespace:pF,type:fF,range:hF,enum:cF,pattern:uF};var mF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m)}s(g)},gF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(i==null&&!t.required)return s();Qt.required(t,i,c,g,m,"array"),i!=null&&(Qt.type(t,i,c,g,m),Qt.range(t,i,c,g,m))}s(g)},yF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&Qt.type(t,i,c,g,m)}s(g)},vF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i,"date")&&!t.required)return s();if(Qt.required(t,i,c,g,m),!_r(i,"date")){var C;i instanceof Date?C=i:C=new Date(i),Qt.type(t,C,c,g,m),C&&Qt.range(t,C.getTime(),c,g,m)}}s(g)},_F="enum",xF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&Qt[_F](t,i,c,g,m)}s(g)},bF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&(Qt.type(t,i,c,g,m),Qt.range(t,i,c,g,m))}s(g)},wF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&(Qt.type(t,i,c,g,m),Qt.range(t,i,c,g,m))}s(g)},SF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&Qt.type(t,i,c,g,m)}s(g)},CF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(i===""&&(i=void 0),_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&(Qt.type(t,i,c,g,m),Qt.range(t,i,c,g,m))}s(g)},EF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),i!==void 0&&Qt.type(t,i,c,g,m)}s(g)},TF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i,"string")&&!t.required)return s();Qt.required(t,i,c,g,m),_r(i,"string")||Qt.pattern(t,i,c,g,m)}s(g)},PF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i)&&!t.required)return s();Qt.required(t,i,c,g,m),_r(i)||Qt.type(t,i,c,g,m)}s(g)},IF=function(t,i,s,c,m){var g=[],h=Array.isArray(i)?"array":Gt(i);Qt.required(t,i,c,g,m,h),s(g)},kF=function(t,i,s,c,m){var g=[],h=t.required||!t.required&&c.hasOwnProperty(t.field);if(h){if(_r(i,"string")&&!t.required)return s();Qt.required(t,i,c,g,m,"string"),_r(i,"string")||(Qt.type(t,i,c,g,m),Qt.range(t,i,c,g,m),Qt.pattern(t,i,c,g,m),t.whitespace===!0&&Qt.whitespace(t,i,c,g,m))}s(g)},Ev=function(t,i,s,c,m){var g=t.type,h=[],C=t.required||!t.required&&c.hasOwnProperty(t.field);if(C){if(_r(i,g)&&!t.required)return s();Qt.required(t,i,c,h,m,g),_r(i,g)||Qt.type(t,i,c,h,m)}s(h)};const od={string:kF,method:SF,number:CF,boolean:yF,regexp:PF,integer:wF,float:bF,array:gF,object:EF,enum:xF,pattern:TF,date:vF,url:Ev,hex:Ev,email:Ev,required:IF,any:mF};var Gd=function(){function e(t){ki(this,e),Fe(this,"rules",null),Fe(this,"_messages",e_),this.define(t)}return Mi(e,[{key:"define",value:function(i){var s=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(Gt(i)!=="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(c){var m=i[c];s.rules[c]=Array.isArray(m)?m:[m]})}},{key:"messages",value:function(i){return i&&(this._messages=H2(Q0(),i)),this._messages}},{key:"validate",value:function(i){var s=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},g=i,h=c,C=m;if(typeof h=="function"&&(C=h,h={}),!this.rules||Object.keys(this.rules).length===0)return C&&C(null,g),Promise.resolve(g);function T(K){var Z=[],Q={};function U(H){if(Array.isArray(H)){var ne;Z=(ne=Z).concat.apply(ne,Tt(H))}else Z.push(H)}for(var D=0;D<K.length;D++)U(K[D]);Z.length?(Q=n_(Z),C(Z,Q)):C(null,g)}if(h.messages){var k=this.messages();k===e_&&(k=Q0()),H2(k,h.messages),h.messages=k}else h.messages=this.messages();var z={},M=h.keys||Object.keys(this.rules);M.forEach(function(K){var Z=s.rules[K],Q=g[K];Z.forEach(function(U){var D=U;typeof D.transform=="function"&&(g===i&&(g=Ke({},g)),Q=g[K]=D.transform(Q),Q!=null&&(D.type=D.type||(Array.isArray(Q)?"array":Gt(Q)))),typeof D=="function"?D={validator:D}:D=Ke({},D),D.validator=s.getValidationMethod(D),D.validator&&(D.field=K,D.fullField=D.fullField||K,D.type=s.getType(D),z[K]=z[K]||[],z[K].push({rule:D,value:Q,source:g,field:K}))})});var Y={};return aF(z,h,function(K,Z){var Q=K.rule,U=(Q.type==="object"||Q.type==="array")&&(Gt(Q.fields)==="object"||Gt(Q.defaultField)==="object");U=U&&(Q.required||!Q.required&&K.value),Q.field=K.field;function D(ue,Me){return Ke(Ke({},Me),{},{fullField:"".concat(Q.fullField,".").concat(ue),fullFields:Q.fullFields?[].concat(Tt(Q.fullFields),[ue]):[ue]})}function H(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Me=Array.isArray(ue)?ue:[ue];!h.suppressWarning&&Me.length&&e.warning("async-validator:",Me),Me.length&&Q.message!==void 0&&(Me=[].concat(Q.message));var Be=Me.map(U2(Q,g));if(h.first&&Be.length)return Y[Q.field]=1,Z(Be);if(!U)Z(Be);else{if(Q.required&&!K.value)return Q.message!==void 0?Be=[].concat(Q.message).map(U2(Q,g)):h.error&&(Be=[h.error(Q,Gi(h.messages.required,Q.field))]),Z(Be);var Re={};Q.defaultField&&Object.keys(K.value).map(function(Ze){Re[Ze]=Q.defaultField}),Re=Ke(Ke({},Re),K.rule.fields);var He={};Object.keys(Re).forEach(function(Ze){var qe=Re[Ze],ut=Array.isArray(qe)?qe:[qe];He[Ze]=ut.map(D.bind(null,Ze))});var rt=new e(He);rt.messages(h.messages),K.rule.options&&(K.rule.options.messages=h.messages,K.rule.options.error=h.error),rt.validate(K.value,K.rule.options||h,function(Ze){var qe=[];Be&&Be.length&&qe.push.apply(qe,Tt(Be)),Ze&&Ze.length&&qe.push.apply(qe,Tt(Ze)),Z(qe.length?qe:null)})}}var ne;if(Q.asyncValidator)ne=Q.asyncValidator(Q,K.value,H,K.source,h);else if(Q.validator){try{ne=Q.validator(Q,K.value,H,K.source,h)}catch(ue){var he,ge;(he=(ge=console).error)===null||he===void 0||he.call(ge,ue),h.suppressValidatorError||setTimeout(function(){throw ue},0),H(ue.message)}ne===!0?H():ne===!1?H(typeof Q.message=="function"?Q.message(Q.fullField||Q.field):Q.message||"".concat(Q.fullField||Q.field," fails")):ne instanceof Array?H(ne):ne instanceof Error&&H(ne.message)}ne&&ne.then&&ne.then(function(){return H()},function(ue){return H(ue)})},function(K){T(K)},g)}},{key:"getType",value:function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!od.hasOwnProperty(i.type))throw new Error(Gi("Unknown rule type %s",i.type));return i.type||"string"}},{key:"getValidationMethod",value:function(i){if(typeof i.validator=="function")return i.validator;var s=Object.keys(i),c=s.indexOf("message");return c!==-1&&s.splice(c,1),s.length===1&&s[0]==="required"?od.required:od[this.getType(i)]||void 0}}]),e}();Fe(Gd,"register",function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");od[t]=i});Fe(Gd,"warning",nF);Fe(Gd,"messages",e_);Fe(Gd,"validators",od);var Vi="'${name}' is not a valid ${type}",wP={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Vi,method:Vi,array:Vi,object:Vi,number:Vi,date:Vi,boolean:Vi,integer:Vi,float:Vi,regexp:Vi,email:Vi,url:Vi,hex:Vi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},q2=Gd;function MF(e,t){return e.replace(/\$\{\w+\}/g,function(i){var s=i.slice(2,-1);return t[s]})}var G2="CODE_LOGIC_ERROR";function r_(e,t,i,s,c){return i_.apply(this,arguments)}function i_(){return i_=Ul(mi().mark(function e(t,i,s,c,m){var g,h,C,T,k,z,M,Y,K;return mi().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return g=Ke({},s),delete g.ruleIndex,q2.warning=function(){},g.validator&&(h=g.validator,g.validator=function(){try{return h.apply(void 0,arguments)}catch(U){return console.error(U),Promise.reject(G2)}}),C=null,g&&g.type==="array"&&g.defaultField&&(C=g.defaultField,delete g.defaultField),T=new q2(Fe({},t,[g])),k=Vc(wP,c.validateMessages),T.messages(k),z=[],Q.prev=10,Q.next=13,Promise.resolve(T.validate(Fe({},t,i),Ke({},c)));case 13:Q.next=18;break;case 15:Q.prev=15,Q.t0=Q.catch(10),Q.t0.errors&&(z=Q.t0.errors.map(function(U,D){var H=U.message,ne=H===G2?k.default:H;return N.isValidElement(ne)?N.cloneElement(ne,{key:"error_".concat(D)}):ne}));case 18:if(!(!z.length&&C)){Q.next=23;break}return Q.next=21,Promise.all(i.map(function(U,D){return r_("".concat(t,".").concat(D),U,C,c,m)}));case 21:return M=Q.sent,Q.abrupt("return",M.reduce(function(U,D){return[].concat(Tt(U),Tt(D))},[]));case 23:return Y=Ke(Ke({},s),{},{name:t,enum:(s.enum||[]).join(", ")},m),K=z.map(function(U){return typeof U=="string"?MF(U,Y):U}),Q.abrupt("return",K);case 26:case"end":return Q.stop()}},e,null,[[10,15]])})),i_.apply(this,arguments)}function AF(e,t,i,s,c,m){var g=e.join("."),h=i.map(function(k,z){var M=k.validator,Y=Ke(Ke({},k),{},{ruleIndex:z});return M&&(Y.validator=function(K,Z,Q){var U=!1,D=function(){for(var he=arguments.length,ge=new Array(he),ue=0;ue<he;ue++)ge[ue]=arguments[ue];Promise.resolve().then(function(){Ki(!U,"Your validator function has already return a promise. `callback` will be ignored."),U||Q.apply(void 0,ge)})},H=M(K,Z,D);U=H&&typeof H.then=="function"&&typeof H.catch=="function",Ki(U,"`callback` is deprecated. Please return a promise instead."),U&&H.then(function(){Q()}).catch(function(ne){Q(ne||" ")})}),Y}).sort(function(k,z){var M=k.warningOnly,Y=k.ruleIndex,K=z.warningOnly,Z=z.ruleIndex;return!!M==!!K?Y-Z:M?1:-1}),C;if(c===!0)C=new Promise(function(){var k=Ul(mi().mark(function z(M,Y){var K,Z,Q;return mi().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:K=0;case 1:if(!(K<h.length)){D.next=12;break}return Z=h[K],D.next=5,r_(g,t,Z,s,m);case 5:if(Q=D.sent,!Q.length){D.next=9;break}return Y([{errors:Q,rule:Z}]),D.abrupt("return");case 9:K+=1,D.next=1;break;case 12:M([]);case 13:case"end":return D.stop()}},z)}));return function(z,M){return k.apply(this,arguments)}}());else{var T=h.map(function(k){return r_(g,t,k,s,m).then(function(z){return{errors:z,rule:k}})});C=(c?RF(T):zF(T)).then(function(k){return Promise.reject(k)})}return C.catch(function(k){return k}),C}function zF(e){return o_.apply(this,arguments)}function o_(){return o_=Ul(mi().mark(function e(t){return mi().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Promise.all(t).then(function(c){var m,g=(m=[]).concat.apply(m,Tt(c));return g}));case 1:case"end":return s.stop()}},e)})),o_.apply(this,arguments)}function RF(e){return a_.apply(this,arguments)}function a_(){return a_=Ul(mi().mark(function e(t){var i;return mi().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=0,c.abrupt("return",new Promise(function(m){t.forEach(function(g){g.then(function(h){h.errors.length&&m([h]),i+=1,i===t.length&&m([])})})}));case 2:case"end":return c.stop()}},e)})),a_.apply(this,arguments)}function ir(e){return J0(e)}function Z2(e,t){var i={};return t.forEach(function(s){var c=na(e,s);i=Ro(i,s,c)}),i}function Yc(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(s){return SP(t,s,i)})}function SP(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!i&&e.length!==t.length?!1:t.every(function(s,c){return e[c]===s})}function LF(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||Gt(e)!=="object"||Gt(t)!=="object")return!1;var i=Object.keys(e),s=Object.keys(t),c=new Set([].concat(i,s));return Tt(c).every(function(m){var g=e[m],h=t[m];return typeof g=="function"&&typeof h=="function"?!0:g===h})}function FF(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&Gt(t.target)==="object"&&e in t.target?t.target[e]:t}function K2(e,t,i){var s=e.length;if(t<0||t>=s||i<0||i>=s)return e;var c=e[t],m=t-i;return m>0?[].concat(Tt(e.slice(0,i)),[c],Tt(e.slice(i,t)),Tt(e.slice(t+1,s))):m<0?[].concat(Tt(e.slice(0,t)),Tt(e.slice(t+1,i+1)),[c],Tt(e.slice(i+1,s))):e}var DF=["name"],lo=[];function X2(e,t,i,s,c,m){return typeof e=="function"?e(t,i,"source"in m?{source:m.source}:{}):s!==c}var P1=function(e){mu(i,e);var t=pg(i);function i(s){var c;if(ki(this,i),c=t.call(this,s),Fe(en(c),"state",{resetCount:0}),Fe(en(c),"cancelRegisterFunc",null),Fe(en(c),"mounted",!1),Fe(en(c),"touched",!1),Fe(en(c),"dirty",!1),Fe(en(c),"validatePromise",void 0),Fe(en(c),"prevValidating",void 0),Fe(en(c),"errors",lo),Fe(en(c),"warnings",lo),Fe(en(c),"cancelRegister",function(){var C=c.props,T=C.preserve,k=C.isListField,z=C.name;c.cancelRegisterFunc&&c.cancelRegisterFunc(k,T,ir(z)),c.cancelRegisterFunc=null}),Fe(en(c),"getNamePath",function(){var C=c.props,T=C.name,k=C.fieldContext,z=k.prefixName,M=z===void 0?[]:z;return T!==void 0?[].concat(Tt(M),Tt(T)):[]}),Fe(en(c),"getRules",function(){var C=c.props,T=C.rules,k=T===void 0?[]:T,z=C.fieldContext;return k.map(function(M){return typeof M=="function"?M(z):M})}),Fe(en(c),"refresh",function(){c.mounted&&c.setState(function(C){var T=C.resetCount;return{resetCount:T+1}})}),Fe(en(c),"metaCache",null),Fe(en(c),"triggerMetaEvent",function(C){var T=c.props.onMetaChange;if(T){var k=Ke(Ke({},c.getMeta()),{},{destroy:C});A0(c.metaCache,k)||T(k),c.metaCache=k}else c.metaCache=null}),Fe(en(c),"onStoreChange",function(C,T,k){var z=c.props,M=z.shouldUpdate,Y=z.dependencies,K=Y===void 0?[]:Y,Z=z.onReset,Q=k.store,U=c.getNamePath(),D=c.getValue(C),H=c.getValue(Q),ne=T&&Yc(T,U);switch(k.type==="valueUpdate"&&k.source==="external"&&!A0(D,H)&&(c.touched=!0,c.dirty=!0,c.validatePromise=null,c.errors=lo,c.warnings=lo,c.triggerMetaEvent()),k.type){case"reset":if(!T||ne){c.touched=!1,c.dirty=!1,c.validatePromise=void 0,c.errors=lo,c.warnings=lo,c.triggerMetaEvent(),Z==null||Z(),c.refresh();return}break;case"remove":{if(M){c.reRender();return}break}case"setField":{var he=k.data;if(ne){"touched"in he&&(c.touched=he.touched),"validating"in he&&!("originRCField"in he)&&(c.validatePromise=he.validating?Promise.resolve([]):null),"errors"in he&&(c.errors=he.errors||lo),"warnings"in he&&(c.warnings=he.warnings||lo),c.dirty=!0,c.triggerMetaEvent(),c.reRender();return}else if("value"in he&&Yc(T,U,!0)){c.reRender();return}if(M&&!U.length&&X2(M,C,Q,D,H,k)){c.reRender();return}break}case"dependenciesUpdate":{var ge=K.map(ir);if(ge.some(function(ue){return Yc(k.relatedFields,ue)})){c.reRender();return}break}default:if(ne||(!K.length||U.length||M)&&X2(M,C,Q,D,H,k)){c.reRender();return}break}M===!0&&c.reRender()}),Fe(en(c),"validateRules",function(C){var T=c.getNamePath(),k=c.getValue(),z=C||{},M=z.triggerName,Y=z.validateOnly,K=Y===void 0?!1:Y,Z=Promise.resolve().then(Ul(mi().mark(function Q(){var U,D,H,ne,he,ge,ue;return mi().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(c.mounted){Be.next=2;break}return Be.abrupt("return",[]);case 2:if(U=c.props,D=U.validateFirst,H=D===void 0?!1:D,ne=U.messageVariables,he=U.validateDebounce,ge=c.getRules(),M&&(ge=ge.filter(function(Re){return Re}).filter(function(Re){var He=Re.validateTrigger;if(!He)return!0;var rt=J0(He);return rt.includes(M)})),!(he&&M)){Be.next=10;break}return Be.next=8,new Promise(function(Re){setTimeout(Re,he)});case 8:if(c.validatePromise===Z){Be.next=10;break}return Be.abrupt("return",[]);case 10:return ue=AF(T,k,ge,C,H,ne),ue.catch(function(Re){return Re}).then(function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lo;if(c.validatePromise===Z){var He;c.validatePromise=null;var rt=[],Ze=[];(He=Re.forEach)===null||He===void 0||He.call(Re,function(qe){var ut=qe.rule.warningOnly,Oe=qe.errors,Pe=Oe===void 0?lo:Oe;ut?Ze.push.apply(Ze,Tt(Pe)):rt.push.apply(rt,Tt(Pe))}),c.errors=rt,c.warnings=Ze,c.triggerMetaEvent(),c.reRender()}}),Be.abrupt("return",ue);case 13:case"end":return Be.stop()}},Q)})));return K||(c.validatePromise=Z,c.dirty=!0,c.errors=lo,c.warnings=lo,c.triggerMetaEvent(),c.reRender()),Z}),Fe(en(c),"isFieldValidating",function(){return!!c.validatePromise}),Fe(en(c),"isFieldTouched",function(){return c.touched}),Fe(en(c),"isFieldDirty",function(){if(c.dirty||c.props.initialValue!==void 0)return!0;var C=c.props.fieldContext,T=C.getInternalHooks(wl),k=T.getInitialValue;return k(c.getNamePath())!==void 0}),Fe(en(c),"getErrors",function(){return c.errors}),Fe(en(c),"getWarnings",function(){return c.warnings}),Fe(en(c),"isListField",function(){return c.props.isListField}),Fe(en(c),"isList",function(){return c.props.isList}),Fe(en(c),"isPreserve",function(){return c.props.preserve}),Fe(en(c),"getMeta",function(){c.prevValidating=c.isFieldValidating();var C={touched:c.isFieldTouched(),validating:c.prevValidating,errors:c.errors,warnings:c.warnings,name:c.getNamePath(),validated:c.validatePromise===null};return C}),Fe(en(c),"getOnlyChild",function(C){if(typeof C=="function"){var T=c.getMeta();return Ke(Ke({},c.getOnlyChild(C(c.getControlled(),T,c.props.fieldContext))),{},{isFunction:!0})}var k=T0(C);return k.length!==1||!N.isValidElement(k[0])?{child:k,isFunction:!1}:{child:k[0],isFunction:!1}}),Fe(en(c),"getValue",function(C){var T=c.props.fieldContext.getFieldsValue,k=c.getNamePath();return na(C||T(!0),k)}),Fe(en(c),"getControlled",function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=c.props,k=T.name,z=T.trigger,M=T.validateTrigger,Y=T.getValueFromEvent,K=T.normalize,Z=T.valuePropName,Q=T.getValueProps,U=T.fieldContext,D=M!==void 0?M:U.validateTrigger,H=c.getNamePath(),ne=U.getInternalHooks,he=U.getFieldsValue,ge=ne(wl),ue=ge.dispatch,Me=c.getValue(),Be=Q||function(qe){return Fe({},Z,qe)},Re=C[z],He=k!==void 0?Be(Me):{},rt=Ke(Ke({},C),He);rt[z]=function(){c.touched=!0,c.dirty=!0,c.triggerMetaEvent();for(var qe,ut=arguments.length,Oe=new Array(ut),Pe=0;Pe<ut;Pe++)Oe[Pe]=arguments[Pe];Y?qe=Y.apply(void 0,Oe):qe=FF.apply(void 0,[Z].concat(Oe)),K&&(qe=K(qe,Me,he(!0))),ue({type:"updateValue",namePath:H,value:qe}),Re&&Re.apply(void 0,Oe)};var Ze=J0(D||[]);return Ze.forEach(function(qe){var ut=rt[qe];rt[qe]=function(){ut&&ut.apply(void 0,arguments);var Oe=c.props.rules;Oe&&Oe.length&&ue({type:"validateField",namePath:H,triggerName:qe})}}),rt}),s.fieldContext){var m=s.fieldContext.getInternalHooks,g=m(wl),h=g.initEntityValue;h(en(c))}return c}return Mi(i,[{key:"componentDidMount",value:function(){var c=this.props,m=c.shouldUpdate,g=c.fieldContext;if(this.mounted=!0,g){var h=g.getInternalHooks,C=h(wl),T=C.registerField;this.cancelRegisterFunc=T(this)}m===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var c=this.state.resetCount,m=this.props.children,g=this.getOnlyChild(m),h=g.child,C=g.isFunction,T;return C?T=h:N.isValidElement(h)?T=N.cloneElement(h,this.getControlled(h.props)):(Ki(!h,"`children` of Field is not validate ReactElement."),T=h),N.createElement(N.Fragment,{key:c},T)}}]),i}(N.Component);Fe(P1,"contextType",uu);Fe(P1,"defaultProps",{trigger:"onChange",valuePropName:"value"});function CP(e){var t=e.name,i=zs(e,DF),s=N.useContext(uu),c=N.useContext(Fm),m=t!==void 0?ir(t):void 0,g="keep";return i.isListField||(g="_".concat((m||[]).join("_"))),N.createElement(P1,Kn({key:g,name:m,isListField:!!c},i,{fieldContext:s}))}function OF(e){var t=e.name,i=e.initialValue,s=e.children,c=e.rules,m=e.validateTrigger,g=e.isListField,h=N.useContext(uu),C=N.useContext(Fm),T=N.useRef({keys:[],id:0}),k=T.current,z=N.useMemo(function(){var Z=ir(h.prefixName)||[];return[].concat(Tt(Z),Tt(ir(t)))},[h.prefixName,t]),M=N.useMemo(function(){return Ke(Ke({},h),{},{prefixName:z})},[h,z]),Y=N.useMemo(function(){return{getKey:function(Q){var U=z.length,D=Q[U];return[k.keys[D],Q.slice(U+1)]}}},[z]);if(typeof s!="function")return Ki(!1,"Form.List only accepts function as children."),null;var K=function(Q,U,D){var H=D.source;return H==="internal"?!1:Q!==U};return N.createElement(Fm.Provider,{value:Y},N.createElement(uu.Provider,{value:M},N.createElement(CP,{name:[],shouldUpdate:K,rules:c,validateTrigger:m,initialValue:i,isList:!0,isListField:g??!!C},function(Z,Q){var U=Z.value,D=U===void 0?[]:U,H=Z.onChange,ne=h.getFieldValue,he=function(){var Be=ne(z||[]);return Be||[]},ge={add:function(Be,Re){var He=he();Re>=0&&Re<=He.length?(k.keys=[].concat(Tt(k.keys.slice(0,Re)),[k.id],Tt(k.keys.slice(Re))),H([].concat(Tt(He.slice(0,Re)),[Be],Tt(He.slice(Re))))):(k.keys=[].concat(Tt(k.keys),[k.id]),H([].concat(Tt(He),[Be]))),k.id+=1},remove:function(Be){var Re=he(),He=new Set(Array.isArray(Be)?Be:[Be]);He.size<=0||(k.keys=k.keys.filter(function(rt,Ze){return!He.has(Ze)}),H(Re.filter(function(rt,Ze){return!He.has(Ze)})))},move:function(Be,Re){if(Be!==Re){var He=he();Be<0||Be>=He.length||Re<0||Re>=He.length||(k.keys=K2(k.keys,Be,Re),H(K2(He,Be,Re)))}}},ue=D||[];return Array.isArray(ue)||(ue=[]),s(ue.map(function(Me,Be){var Re=k.keys[Be];return Re===void 0&&(k.keys[Be]=k.id,Re=k.keys[Be],k.id+=1),{name:Be,key:Re,isListField:!0}}),ge,Q)})))}function BF(e){var t=!1,i=e.length,s=[];return e.length?new Promise(function(c,m){e.forEach(function(g,h){g.catch(function(C){return t=!0,C}).then(function(C){i-=1,s[h]=C,!(i>0)&&(t&&m(s),c(s))})})}):Promise.resolve([])}var EP="__@field_split__";function Tv(e){return e.map(function(t){return"".concat(Gt(t),":").concat(t)}).join(EP)}var Ic=function(){function e(){ki(this,e),Fe(this,"kvs",new Map)}return Mi(e,[{key:"set",value:function(i,s){this.kvs.set(Tv(i),s)}},{key:"get",value:function(i){return this.kvs.get(Tv(i))}},{key:"update",value:function(i,s){var c=this.get(i),m=s(c);m?this.set(i,m):this.delete(i)}},{key:"delete",value:function(i){this.kvs.delete(Tv(i))}},{key:"map",value:function(i){return Tt(this.kvs.entries()).map(function(s){var c=Ft(s,2),m=c[0],g=c[1],h=m.split(EP);return i({key:h.map(function(C){var T=C.match(/^([^:]*):(.*)$/),k=Ft(T,3),z=k[1],M=k[2];return z==="number"?Number(M):M}),value:g})})}},{key:"toJSON",value:function(){var i={};return this.map(function(s){var c=s.key,m=s.value;return i[c.join(".")]=m,null}),i}}]),e}(),NF=["name"],jF=Mi(function e(t){var i=this;ki(this,e),Fe(this,"formHooked",!1),Fe(this,"forceRootUpdate",void 0),Fe(this,"subscribable",!0),Fe(this,"store",{}),Fe(this,"fieldEntities",[]),Fe(this,"initialValues",{}),Fe(this,"callbacks",{}),Fe(this,"validateMessages",null),Fe(this,"preserve",null),Fe(this,"lastValidatePromise",null),Fe(this,"getForm",function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}}),Fe(this,"getInternalHooks",function(s){return s===wl?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):(Ki(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Fe(this,"useSubscribe",function(s){i.subscribable=s}),Fe(this,"prevWithoutPreserves",null),Fe(this,"setInitialValues",function(s,c){if(i.initialValues=s||{},c){var m,g=Vc(s,i.store);(m=i.prevWithoutPreserves)===null||m===void 0||m.map(function(h){var C=h.key;g=Ro(g,C,na(s,C))}),i.prevWithoutPreserves=null,i.updateStore(g)}}),Fe(this,"destroyForm",function(){var s=new Ic;i.getFieldEntities(!0).forEach(function(c){i.isMergedPreserve(c.isPreserve())||s.set(c.getNamePath(),!0)}),i.prevWithoutPreserves=s}),Fe(this,"getInitialValue",function(s){var c=na(i.initialValues,s);return s.length?Vc(c):c}),Fe(this,"setCallbacks",function(s){i.callbacks=s}),Fe(this,"setValidateMessages",function(s){i.validateMessages=s}),Fe(this,"setPreserve",function(s){i.preserve=s}),Fe(this,"watchList",[]),Fe(this,"registerWatch",function(s){return i.watchList.push(s),function(){i.watchList=i.watchList.filter(function(c){return c!==s})}}),Fe(this,"notifyWatch",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(i.watchList.length){var c=i.getFieldsValue(),m=i.getFieldsValue(!0);i.watchList.forEach(function(g){g(c,m,s)})}}),Fe(this,"timeoutId",null),Fe(this,"warningUnhooked",function(){}),Fe(this,"updateStore",function(s){i.store=s}),Fe(this,"getFieldEntities",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return s?i.fieldEntities.filter(function(c){return c.getNamePath().length}):i.fieldEntities}),Fe(this,"getFieldsMap",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,c=new Ic;return i.getFieldEntities(s).forEach(function(m){var g=m.getNamePath();c.set(g,m)}),c}),Fe(this,"getFieldEntitiesForNamePathList",function(s){if(!s)return i.getFieldEntities(!0);var c=i.getFieldsMap(!0);return s.map(function(m){var g=ir(m);return c.get(g)||{INVALIDATE_NAME_PATH:ir(m)}})}),Fe(this,"getFieldsValue",function(s,c){i.warningUnhooked();var m,g,h;if(s===!0||Array.isArray(s)?(m=s,g=c):s&&Gt(s)==="object"&&(h=s.strict,g=s.filter),m===!0&&!g)return i.store;var C=i.getFieldEntitiesForNamePathList(Array.isArray(m)?m:null),T=[];return C.forEach(function(k){var z,M,Y="INVALIDATE_NAME_PATH"in k?k.INVALIDATE_NAME_PATH:k.getNamePath();if(h){var K,Z;if((K=(Z=k).isList)!==null&&K!==void 0&&K.call(Z))return}else if(!m&&(z=(M=k).isListField)!==null&&z!==void 0&&z.call(M))return;if(!g)T.push(Y);else{var Q="getMeta"in k?k.getMeta():null;g(Q)&&T.push(Y)}}),Z2(i.store,T.map(ir))}),Fe(this,"getFieldValue",function(s){i.warningUnhooked();var c=ir(s);return na(i.store,c)}),Fe(this,"getFieldsError",function(s){i.warningUnhooked();var c=i.getFieldEntitiesForNamePathList(s);return c.map(function(m,g){return m&&!("INVALIDATE_NAME_PATH"in m)?{name:m.getNamePath(),errors:m.getErrors(),warnings:m.getWarnings()}:{name:ir(s[g]),errors:[],warnings:[]}})}),Fe(this,"getFieldError",function(s){i.warningUnhooked();var c=ir(s),m=i.getFieldsError([c])[0];return m.errors}),Fe(this,"getFieldWarning",function(s){i.warningUnhooked();var c=ir(s),m=i.getFieldsError([c])[0];return m.warnings}),Fe(this,"isFieldsTouched",function(){i.warningUnhooked();for(var s=arguments.length,c=new Array(s),m=0;m<s;m++)c[m]=arguments[m];var g=c[0],h=c[1],C,T=!1;c.length===0?C=null:c.length===1?Array.isArray(g)?(C=g.map(ir),T=!1):(C=null,T=g):(C=g.map(ir),T=h);var k=i.getFieldEntities(!0),z=function(Q){return Q.isFieldTouched()};if(!C)return T?k.every(function(Z){return z(Z)||Z.isList()}):k.some(z);var M=new Ic;C.forEach(function(Z){M.set(Z,[])}),k.forEach(function(Z){var Q=Z.getNamePath();C.forEach(function(U){U.every(function(D,H){return Q[H]===D})&&M.update(U,function(D){return[].concat(Tt(D),[Z])})})});var Y=function(Q){return Q.some(z)},K=M.map(function(Z){var Q=Z.value;return Q});return T?K.every(Y):K.some(Y)}),Fe(this,"isFieldTouched",function(s){return i.warningUnhooked(),i.isFieldsTouched([s])}),Fe(this,"isFieldsValidating",function(s){i.warningUnhooked();var c=i.getFieldEntities();if(!s)return c.some(function(g){return g.isFieldValidating()});var m=s.map(ir);return c.some(function(g){var h=g.getNamePath();return Yc(m,h)&&g.isFieldValidating()})}),Fe(this,"isFieldValidating",function(s){return i.warningUnhooked(),i.isFieldsValidating([s])}),Fe(this,"resetWithFieldInitialValue",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=new Ic,m=i.getFieldEntities(!0);m.forEach(function(C){var T=C.props.initialValue,k=C.getNamePath();if(T!==void 0){var z=c.get(k)||new Set;z.add({entity:C,value:T}),c.set(k,z)}});var g=function(T){T.forEach(function(k){var z=k.props.initialValue;if(z!==void 0){var M=k.getNamePath(),Y=i.getInitialValue(M);if(Y!==void 0)Ki(!1,"Form already set 'initialValues' with path '".concat(M.join("."),"'. Field can not overwrite it."));else{var K=c.get(M);if(K&&K.size>1)Ki(!1,"Multiple Field with path '".concat(M.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(K){var Z=i.getFieldValue(M),Q=k.isListField();!Q&&(!s.skipExist||Z===void 0)&&i.updateStore(Ro(i.store,M,Tt(K)[0].value))}}}})},h;s.entities?h=s.entities:s.namePathList?(h=[],s.namePathList.forEach(function(C){var T=c.get(C);if(T){var k;(k=h).push.apply(k,Tt(Tt(T).map(function(z){return z.entity})))}})):h=m,g(h)}),Fe(this,"resetFields",function(s){i.warningUnhooked();var c=i.store;if(!s){i.updateStore(Vc(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(c,null,{type:"reset"}),i.notifyWatch();return}var m=s.map(ir);m.forEach(function(g){var h=i.getInitialValue(g);i.updateStore(Ro(i.store,g,h))}),i.resetWithFieldInitialValue({namePathList:m}),i.notifyObservers(c,m,{type:"reset"}),i.notifyWatch(m)}),Fe(this,"setFields",function(s){i.warningUnhooked();var c=i.store,m=[];s.forEach(function(g){var h=g.name,C=zs(g,NF),T=ir(h);m.push(T),"value"in C&&i.updateStore(Ro(i.store,T,C.value)),i.notifyObservers(c,[T],{type:"setField",data:g})}),i.notifyWatch(m)}),Fe(this,"getFields",function(){var s=i.getFieldEntities(!0),c=s.map(function(m){var g=m.getNamePath(),h=m.getMeta(),C=Ke(Ke({},h),{},{name:g,value:i.getFieldValue(g)});return Object.defineProperty(C,"originRCField",{value:!0}),C});return c}),Fe(this,"initEntityValue",function(s){var c=s.props.initialValue;if(c!==void 0){var m=s.getNamePath(),g=na(i.store,m);g===void 0&&i.updateStore(Ro(i.store,m,c))}}),Fe(this,"isMergedPreserve",function(s){var c=s!==void 0?s:i.preserve;return c??!0}),Fe(this,"registerField",function(s){i.fieldEntities.push(s);var c=s.getNamePath();if(i.notifyWatch([c]),s.props.initialValue!==void 0){var m=i.store;i.resetWithFieldInitialValue({entities:[s],skipExist:!0}),i.notifyObservers(m,[s.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(g,h){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter(function(z){return z!==s}),!i.isMergedPreserve(h)&&(!g||C.length>1)){var T=g?void 0:i.getInitialValue(c);if(c.length&&i.getFieldValue(c)!==T&&i.fieldEntities.every(function(z){return!SP(z.getNamePath(),c)})){var k=i.store;i.updateStore(Ro(k,c,T,!0)),i.notifyObservers(k,[c],{type:"remove"}),i.triggerDependenciesUpdate(k,c)}}i.notifyWatch([c])}}),Fe(this,"dispatch",function(s){switch(s.type){case"updateValue":{var c=s.namePath,m=s.value;i.updateValue(c,m);break}case"validateField":{var g=s.namePath,h=s.triggerName;i.validateFields([g],{triggerName:h});break}}}),Fe(this,"notifyObservers",function(s,c,m){if(i.subscribable){var g=Ke(Ke({},m),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach(function(h){var C=h.onStoreChange;C(s,c,g)})}else i.forceRootUpdate()}),Fe(this,"triggerDependenciesUpdate",function(s,c){var m=i.getDependencyChildrenFields(c);return m.length&&i.validateFields(m),i.notifyObservers(s,m,{type:"dependenciesUpdate",relatedFields:[c].concat(Tt(m))}),m}),Fe(this,"updateValue",function(s,c){var m=ir(s),g=i.store;i.updateStore(Ro(i.store,m,c)),i.notifyObservers(g,[m],{type:"valueUpdate",source:"internal"}),i.notifyWatch([m]);var h=i.triggerDependenciesUpdate(g,m),C=i.callbacks.onValuesChange;if(C){var T=Z2(i.store,[m]);C(T,i.getFieldsValue())}i.triggerOnFieldsChange([m].concat(Tt(h)))}),Fe(this,"setFieldsValue",function(s){i.warningUnhooked();var c=i.store;if(s){var m=Vc(i.store,s);i.updateStore(m)}i.notifyObservers(c,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()}),Fe(this,"setFieldValue",function(s,c){i.setFields([{name:s,value:c}])}),Fe(this,"getDependencyChildrenFields",function(s){var c=new Set,m=[],g=new Ic;i.getFieldEntities().forEach(function(C){var T=C.props.dependencies;(T||[]).forEach(function(k){var z=ir(k);g.update(z,function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return M.add(C),M})})});var h=function C(T){var k=g.get(T)||new Set;k.forEach(function(z){if(!c.has(z)){c.add(z);var M=z.getNamePath();z.isFieldDirty()&&M.length&&(m.push(M),C(M))}})};return h(s),m}),Fe(this,"triggerOnFieldsChange",function(s,c){var m=i.callbacks.onFieldsChange;if(m){var g=i.getFields();if(c){var h=new Ic;c.forEach(function(T){var k=T.name,z=T.errors;h.set(k,z)}),g.forEach(function(T){T.errors=h.get(T.name)||T.errors})}var C=g.filter(function(T){var k=T.name;return Yc(s,k)});C.length&&m(C,g)}}),Fe(this,"validateFields",function(s,c){i.warningUnhooked();var m,g;Array.isArray(s)||typeof s=="string"||typeof c=="string"?(m=s,g=c):g=s;var h=!!m,C=h?m.map(ir):[],T=[],k=String(Date.now()),z=new Set,M=g||{},Y=M.recursive,K=M.dirty;i.getFieldEntities(!0).forEach(function(D){if(h||C.push(D.getNamePath()),!(!D.props.rules||!D.props.rules.length)&&!(K&&!D.isFieldDirty())){var H=D.getNamePath();if(z.add(H.join(k)),!h||Yc(C,H,Y)){var ne=D.validateRules(Ke({validateMessages:Ke(Ke({},wP),i.validateMessages)},g));T.push(ne.then(function(){return{name:H,errors:[],warnings:[]}}).catch(function(he){var ge,ue=[],Me=[];return(ge=he.forEach)===null||ge===void 0||ge.call(he,function(Be){var Re=Be.rule.warningOnly,He=Be.errors;Re?Me.push.apply(Me,Tt(He)):ue.push.apply(ue,Tt(He))}),ue.length?Promise.reject({name:H,errors:ue,warnings:Me}):{name:H,errors:ue,warnings:Me}}))}}});var Z=BF(T);i.lastValidatePromise=Z,Z.catch(function(D){return D}).then(function(D){var H=D.map(function(ne){var he=ne.name;return he});i.notifyObservers(i.store,H,{type:"validateFinish"}),i.triggerOnFieldsChange(H,D)});var Q=Z.then(function(){return i.lastValidatePromise===Z?Promise.resolve(i.getFieldsValue(C)):Promise.reject([])}).catch(function(D){var H=D.filter(function(ne){return ne&&ne.errors.length});return Promise.reject({values:i.getFieldsValue(C),errorFields:H,outOfDate:i.lastValidatePromise!==Z})});Q.catch(function(D){return D});var U=C.filter(function(D){return z.has(D.join(k))});return i.triggerOnFieldsChange(U),Q}),Fe(this,"submit",function(){i.warningUnhooked(),i.validateFields().then(function(s){var c=i.callbacks.onFinish;if(c)try{c(s)}catch(m){console.error(m)}}).catch(function(s){var c=i.callbacks.onFinishFailed;c&&c(s)})}),this.forceRootUpdate=t});function TP(e){var t=N.useRef(),i=N.useState({}),s=Ft(i,2),c=s[1];if(!t.current)if(e)t.current=e;else{var m=function(){c({})},g=new jF(m);t.current=g.getForm()}return[t.current]}var s_=N.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),$F=function(t){var i=t.validateMessages,s=t.onFormChange,c=t.onFormFinish,m=t.children,g=N.useContext(s_),h=N.useRef({});return N.createElement(s_.Provider,{value:Ke(Ke({},g),{},{validateMessages:Ke(Ke({},g.validateMessages),i),triggerFormChange:function(T,k){s&&s(T,{changedFields:k,forms:h.current}),g.triggerFormChange(T,k)},triggerFormFinish:function(T,k){c&&c(T,{values:k,forms:h.current}),g.triggerFormFinish(T,k)},registerForm:function(T,k){T&&(h.current=Ke(Ke({},h.current),{},Fe({},T,k))),g.registerForm(T,k)},unregisterForm:function(T){var k=Ke({},h.current);delete k[T],h.current=k,g.unregisterForm(T)}})},m)},VF=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],UF=function(t,i){var s=t.name,c=t.initialValues,m=t.fields,g=t.form,h=t.preserve,C=t.children,T=t.component,k=T===void 0?"form":T,z=t.validateMessages,M=t.validateTrigger,Y=M===void 0?"onChange":M,K=t.onValuesChange,Z=t.onFieldsChange,Q=t.onFinish,U=t.onFinishFailed,D=zs(t,VF),H=N.useContext(s_),ne=TP(g),he=Ft(ne,1),ge=he[0],ue=ge.getInternalHooks(wl),Me=ue.useSubscribe,Be=ue.setInitialValues,Re=ue.setCallbacks,He=ue.setValidateMessages,rt=ue.setPreserve,Ze=ue.destroyForm;N.useImperativeHandle(i,function(){return ge}),N.useEffect(function(){return H.registerForm(s,ge),function(){H.unregisterForm(s)}},[H,ge,s]),He(Ke(Ke({},H.validateMessages),z)),Re({onValuesChange:K,onFieldsChange:function(Xe){if(H.triggerFormChange(s,Xe),Z){for(var wt=arguments.length,Dt=new Array(wt>1?wt-1:0),Zt=1;Zt<wt;Zt++)Dt[Zt-1]=arguments[Zt];Z.apply(void 0,[Xe].concat(Dt))}},onFinish:function(Xe){H.triggerFormFinish(s,Xe),Q&&Q(Xe)},onFinishFailed:U}),rt(h);var qe=N.useRef(null);Be(c,!qe.current),qe.current||(qe.current=!0),N.useEffect(function(){return Ze},[]);var ut,Oe=typeof C=="function";if(Oe){var Pe=ge.getFieldsValue(!0);ut=C(Pe,ge)}else ut=C;Me(!Oe);var Se=N.useRef();N.useEffect(function(){LF(Se.current||[],m||[])||ge.setFields(m||[]),Se.current=m},[m,ge]);var ze=N.useMemo(function(){return Ke(Ke({},ge),{},{validateTrigger:Y})},[ge,Y]),Ve=N.createElement(Fm.Provider,{value:null},N.createElement(uu.Provider,{value:ze},ut));return k===!1?Ve:N.createElement(k,Kn({},D,{onSubmit:function(Xe){Xe.preventDefault(),Xe.stopPropagation(),ge.submit()},onReset:function(Xe){var wt;Xe.preventDefault(),ge.resetFields(),(wt=D.onReset)===null||wt===void 0||wt.call(D,Xe)}}),Ve)};function Y2(e){try{return JSON.stringify(e)}catch{return Math.random()}}function HF(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=t[0],c=t[1],m=c===void 0?{}:c,g=J6(m)?{form:m}:m,h=g.form,C=N.useState(),T=Ft(C,2),k=T[0],z=T[1],M=N.useMemo(function(){return Y2(k)},[k]),Y=N.useRef(M);Y.current=M;var K=N.useContext(uu),Z=h||K,Q=Z&&Z._init,U=ir(s),D=N.useRef(U);return D.current=U,N.useEffect(function(){if(Q){var H=Z.getFieldsValue,ne=Z.getInternalHooks,he=ne(wl),ge=he.registerWatch,ue=function(He,rt){var Ze=g.preserve?rt:He;return typeof s=="function"?s(Ze):na(Ze,D.current)},Me=ge(function(Re,He){var rt=ue(Re,He),Ze=Y2(rt);Y.current!==Ze&&(Y.current=Ze,z(rt))}),Be=ue(H(),H(!0));return k!==Be&&z(Be),Me}},[Q]),k}var WF=N.forwardRef(UF),Zd=WF;Zd.FormProvider=$F;Zd.Field=CP;Zd.List=OF;Zd.useForm=TP;Zd.useWatch=HF;const J2=N.createContext({}),qF=e=>{let{children:t,status:i,override:s}=e;const c=N.useContext(J2),m=N.useMemo(()=>{const g=Object.assign({},c);return s&&delete g.isFormItemInput,i&&(delete g.status,delete g.hasFeedback,delete g.feedbackIcon),g},[i,s,c]);return N.createElement(J2.Provider,{value:m},t)};function Q2(){}const GF=N.createContext({add:Q2,remove:Q2});function ZF(e){const t=N.useContext(GF),i=N.useRef();return _1(c=>{if(c){const m=e?c.querySelector(e):c;t.add(m),i.current=m}else t.remove(i.current)})}const eS=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:i}=N.useContext(qd);return lt.createElement(Wd,Object.assign({onClick:i},e),t)},tS=()=>{const{confirmLoading:e,okButtonProps:t,okType:i,okTextLocale:s,onOk:c}=N.useContext(qd);return lt.createElement(Wd,Object.assign({},lP(i),{loading:e,onClick:c},t),s)};function PP(e,t){return lt.createElement("span",{className:`${e}-close-x`},t||lt.createElement(S1,{className:`${e}-close-icon`}))}const IP=e=>{const{okText:t,okType:i="primary",cancelText:s,confirmLoading:c,onOk:m,onCancel:g,okButtonProps:h,cancelButtonProps:C,footer:T}=e,[k]=y1("Modal",fT()),z=t||(k==null?void 0:k.okText),M=s||(k==null?void 0:k.cancelText),Y={confirmLoading:c,okButtonProps:h,cancelButtonProps:C,okTextLocale:z,cancelTextLocale:M,okType:i,onOk:m,onCancel:g},K=lt.useMemo(()=>Y,Tt(Object.values(Y)));let Z;return typeof T=="function"||typeof T>"u"?(Z=lt.createElement(lt.Fragment,null,lt.createElement(eS,null),lt.createElement(tS,null)),typeof T=="function"&&(Z=T(Z,{OkBtn:tS,CancelBtn:eS})),Z=lt.createElement(mP,{value:K},Z)):Z=T,lt.createElement(xT,{disabled:!1},Z)},KF=e=>({animationDuration:e,animationFillMode:"both"}),XF=e=>({animationDuration:e,animationFillMode:"both"}),kP=function(e,t,i,s){const m=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${m}${e}-enter,
      ${m}${e}-appear
    `]:Object.assign(Object.assign({},KF(s)),{animationPlayState:"paused"}),[`${m}${e}-leave`]:Object.assign(Object.assign({},XF(s)),{animationPlayState:"paused"}),[`
      ${m}${e}-enter${e}-enter-active,
      ${m}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${m}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}},YF=new Ai("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),JF=new Ai("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),QF=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:i}=e,s=`${i}-fade`,c=t?"&":"";return[kP(s,YF,JF,e.motionDurationMid,t),{[`
        ${c}${s}-enter,
        ${c}${s}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${c}${s}-leave`]:{animationTimingFunction:"linear"}}]},eD=new Ai("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),tD=new Ai("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),nS=new Ai("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),rS=new Ai("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),nD=new Ai("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),rD=new Ai("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),iD=new Ai("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),oD=new Ai("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),aD=new Ai("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),sD=new Ai("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),lD=new Ai("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),cD=new Ai("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),uD={zoom:{inKeyframes:eD,outKeyframes:tD},"zoom-big":{inKeyframes:nS,outKeyframes:rS},"zoom-big-fast":{inKeyframes:nS,outKeyframes:rS},"zoom-left":{inKeyframes:iD,outKeyframes:oD},"zoom-right":{inKeyframes:aD,outKeyframes:sD},"zoom-up":{inKeyframes:nD,outKeyframes:rD},"zoom-down":{inKeyframes:lD,outKeyframes:cD}},hD=(e,t)=>{const{antCls:i}=e,s=`${i}-${t}`,{inKeyframes:c,outKeyframes:m}=uD[t];return[kP(s,c,m,e.motionDurationMid),{[`
        ${s}-enter,
        ${s}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]};function iS(e){return{position:e,inset:0}}const dD=e=>{const{componentCls:t,antCls:i}=e;return[{[`${t}-root`]:{[`${t}${i}-zoom-enter, ${t}${i}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${i}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},iS("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},iS("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:QF(e)}]},fD=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${vn(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},oR(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${vn(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:`${vn(e.modalCloseBtnSize)}`,justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},IT(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${vn(e.borderRadiusLG)} ${vn(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},pD=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},MP=e=>{const t=e.padding,i=e.fontSizeHeading5,s=e.lineHeightHeading5;return Vl(e,{modalHeaderHeight:e.calc(e.calc(s).mul(i).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},AP=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${vn(e.paddingMD)} ${vn(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${vn(e.padding)} ${vn(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${vn(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${vn(e.paddingXS)} ${vn(e.padding)}`:0,footerBorderTop:e.wireframe?`${vn(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${vn(e.borderRadiusLG)} ${vn(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${vn(e.padding*2)} ${vn(e.padding*2)} ${vn(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),zP=LT("Modal",e=>{const t=MP(e);return[fD(t),pD(t),dD(t),hD(t,"zoom")]},AP,{unitless:{titleLineHeight:!0}});var mD=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};let l_;const gD=e=>{l_={x:e.pageX,y:e.pageY},setTimeout(()=>{l_=null},100)};Y6()&&document.documentElement.addEventListener("click",gD,!0);const RP=e=>{var t;const{getPopupContainer:i,getPrefixCls:s,direction:c,modal:m}=N.useContext(vo),g=Ve=>{const{onCancel:We}=e;We==null||We(Ve)},h=Ve=>{const{onOk:We}=e;We==null||We(Ve)},{prefixCls:C,className:T,rootClassName:k,open:z,wrapClassName:M,centered:Y,getContainer:K,focusTriggerAfterClose:Z=!0,style:Q,visible:U,width:D=520,footer:H,classNames:ne,styles:he}=e,ge=mD(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles"]),ue=s("modal",C),Me=s(),Be=QT(ue),[Re,He,rt]=zP(ue,Be),Ze=mn(M,{[`${ue}-centered`]:!!Y,[`${ue}-wrap-rtl`]:c==="rtl"}),qe=H!==null&&N.createElement(IP,Object.assign({},e,{onOk:h,onCancel:g})),[ut,Oe]=X6(B2(e),B2(m),{closable:!0,closeIcon:N.createElement(S1,{className:`${ue}-close-icon`}),closeIconRender:Ve=>PP(ue,Ve)}),Pe=ZF(`.${ue}-content`),[Se,ze]=LL("Modal",ge.zIndex);return Re(N.createElement(t6,null,N.createElement(qF,{status:!0,override:!0},N.createElement(eP.Provider,{value:ze},N.createElement(xP,Object.assign({width:D},ge,{zIndex:Se,getContainer:K===void 0?i:K,prefixCls:ue,rootClassName:mn(He,k,rt,Be),footer:qe,visible:z??U,mousePosition:(t=ge.mousePosition)!==null&&t!==void 0?t:l_,onClose:g,closable:ut,closeIcon:Oe,focusTriggerAfterClose:Z,transitionName:Rm(Me,"zoom",e.transitionName),maskTransitionName:Rm(Me,"fade",e.maskTransitionName),className:mn(He,T,m==null?void 0:m.className),style:Object.assign(Object.assign({},m==null?void 0:m.style),Q),classNames:Object.assign(Object.assign(Object.assign({},m==null?void 0:m.classNames),ne),{wrapper:mn(Ze,ne==null?void 0:ne.wrapper)}),styles:Object.assign(Object.assign({},m==null?void 0:m.styles),he),panelRef:Pe}))))))},yD=e=>{const{componentCls:t,titleFontSize:i,titleLineHeight:s,modalConfirmIconSize:c,fontSize:m,lineHeight:g,modalTitleHeight:h,fontHeight:C,confirmBodyPadding:T}=e,k=`${t}-confirm`;return{[k]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${k}-body-wrapper`]:Object.assign({},sR()),[`&${t} ${t}-body`]:{padding:T},[`${k}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:c,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(C).sub(c).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(h).sub(c).equal()).div(2).equal()}},[`${k}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS},[`${e.iconCls} + ${k}-paragraph`]:{maxWidth:`calc(100% - ${vn(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${k}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:i,lineHeight:s},[`${k}-content`]:{color:e.colorText,fontSize:m,lineHeight:g},[`${k}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${k}-error ${k}-body > ${e.iconCls}`]:{color:e.colorError},[`${k}-warning ${k}-body > ${e.iconCls},
        ${k}-confirm ${k}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${k}-info ${k}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${k}-success ${k}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},vD=RT(["Modal","confirm"],e=>{const t=MP(e);return[yD(t)]},AP,{order:-1e3});var _D=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};function LP(e){const{prefixCls:t,icon:i,okText:s,cancelText:c,confirmPrefixCls:m,type:g,okCancel:h,footer:C,locale:T}=e,k=_D(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let z=i;if(!i&&i!==null)switch(g){case"info":z=N.createElement(xL,null);break;case"success":z=N.createElement(cL,null);break;case"error":z=N.createElement(dL,null);break;default:z=N.createElement(yL,null)}const M=h??g==="confirm",Y=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[K]=y1("Modal"),Z=T||K,Q=s||(M?Z==null?void 0:Z.okText:Z==null?void 0:Z.justOkText),U=c||(Z==null?void 0:Z.cancelText),D=Object.assign({autoFocusButton:Y,cancelTextLocale:U,okTextLocale:Q,mergedOkCancel:M},k),H=N.useMemo(()=>D,Tt(Object.values(D))),ne=N.createElement(N.Fragment,null,N.createElement(I2,null),N.createElement(k2,null)),he=e.title!==void 0&&e.title!==null,ge=`${m}-body`;return N.createElement("div",{className:`${m}-body-wrapper`},N.createElement("div",{className:mn(ge,{[`${ge}-has-title`]:he})},z,N.createElement("div",{className:`${m}-paragraph`},he&&N.createElement("span",{className:`${m}-title`},e.title),N.createElement("div",{className:`${m}-content`},e.content))),C===void 0||typeof C=="function"?N.createElement(mP,{value:H},N.createElement("div",{className:`${m}-btns`},typeof C=="function"?C(ne,{OkBtn:k2,CancelBtn:I2}):ne)):C,N.createElement(vD,{prefixCls:t}))}const xD=e=>{const{close:t,zIndex:i,afterClose:s,open:c,keyboard:m,centered:g,getContainer:h,maskStyle:C,direction:T,prefixCls:k,wrapClassName:z,rootPrefixCls:M,bodyStyle:Y,closable:K=!1,closeIcon:Z,modalRender:Q,focusTriggerAfterClose:U,onConfirm:D,styles:H}=e,ne=`${k}-confirm`,he=e.width||416,ge=e.style||{},ue=e.mask===void 0?!0:e.mask,Me=e.maskClosable===void 0?!1:e.maskClosable,Be=mn(ne,`${ne}-${e.type}`,{[`${ne}-rtl`]:T==="rtl"},e.className),[,Re]=oa(),He=N.useMemo(()=>i!==void 0?i:Re.zIndexPopupBase+tP,[i,Re]);return N.createElement(RP,{prefixCls:k,className:Be,wrapClassName:mn({[`${ne}-centered`]:!!e.centered},z),onCancel:()=>{t==null||t({triggerCancel:!0}),D==null||D(!1)},open:c,title:"",footer:null,transitionName:Rm(M||"","zoom",e.transitionName),maskTransitionName:Rm(M||"","fade",e.maskTransitionName),mask:ue,maskClosable:Me,style:ge,styles:Object.assign({body:Y,mask:C},H),width:he,zIndex:He,afterClose:s,keyboard:m,centered:g,getContainer:h,closable:K,closeIcon:Z,modalRender:Q,focusTriggerAfterClose:U},N.createElement(LP,Object.assign({},e,{confirmPrefixCls:ne})))},FP=e=>{const{rootPrefixCls:t,iconPrefixCls:i,direction:s,theme:c}=e;return N.createElement(w1,{prefixCls:t,iconPrefixCls:i,direction:s,theme:c},N.createElement(xD,Object.assign({},e)))},Sl=[];let DP="";function OP(){return DP}const bD=e=>{var t,i;const{prefixCls:s,getContainer:c,direction:m}=e,g=fT(),h=N.useContext(vo),C=OP()||h.getPrefixCls(),T=s||`${C}-modal`;let k=c;return k===!1&&(k=void 0),lt.createElement(FP,Object.assign({},e,{rootPrefixCls:C,prefixCls:T,iconPrefixCls:h.iconPrefixCls,theme:h.theme,direction:m??h.direction,locale:(i=(t=h.locale)===null||t===void 0?void 0:t.Modal)!==null&&i!==void 0?i:g,getContainer:k}))};function Kd(e){const t=ZR(),i=document.createDocumentFragment();let s=Object.assign(Object.assign({},e),{close:h,open:!0}),c;function m(){for(var T=arguments.length,k=new Array(T),z=0;z<T;z++)k[z]=arguments[z];const M=k.some(Y=>Y&&Y.triggerCancel);e.onCancel&&M&&e.onCancel.apply(e,[()=>{}].concat(Tt(k.slice(1))));for(let Y=0;Y<Sl.length;Y++)if(Sl[Y]===h){Sl.splice(Y,1);break}iP(i)}function g(T){clearTimeout(c),c=setTimeout(()=>{const k=t.getPrefixCls(void 0,OP()),z=t.getIconPrefixCls(),M=t.getTheme(),Y=lt.createElement(bD,Object.assign({},T));rP(lt.createElement(w1,{prefixCls:k,iconPrefixCls:z,theme:M},t.holderRender?t.holderRender(Y):Y),i)})}function h(){for(var T=arguments.length,k=new Array(T),z=0;z<T;z++)k[z]=arguments[z];s=Object.assign(Object.assign({},s),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),m.apply(this,k)}}),s.visible&&delete s.visible,g(s)}function C(T){typeof T=="function"?s=T(s):s=Object.assign(Object.assign({},s),T),g(s)}return g(s),Sl.push(h),{destroy:h,update:C}}function BP(e){return Object.assign(Object.assign({},e),{type:"warning"})}function NP(e){return Object.assign(Object.assign({},e),{type:"info"})}function jP(e){return Object.assign(Object.assign({},e),{type:"success"})}function $P(e){return Object.assign(Object.assign({},e),{type:"error"})}function VP(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function wD(e){let{rootPrefixCls:t}=e;DP=t}var SD=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};const CD=(e,t)=>{var i,{afterClose:s,config:c}=e,m=SD(e,["afterClose","config"]);const[g,h]=N.useState(!0),[C,T]=N.useState(c),{direction:k,getPrefixCls:z}=N.useContext(vo),M=z("modal"),Y=z(),K=()=>{var D;s(),(D=C.afterClose)===null||D===void 0||D.call(C)},Z=function(){h(!1);for(var D=arguments.length,H=new Array(D),ne=0;ne<D;ne++)H[ne]=arguments[ne];const he=H.some(ge=>ge&&ge.triggerCancel);C.onCancel&&he&&C.onCancel.apply(C,[()=>{}].concat(Tt(H.slice(1))))};N.useImperativeHandle(t,()=>({destroy:Z,update:D=>{T(H=>Object.assign(Object.assign({},H),D))}}));const Q=(i=C.okCancel)!==null&&i!==void 0?i:C.type==="confirm",[U]=y1("Modal",Fl.Modal);return N.createElement(FP,Object.assign({prefixCls:M,rootPrefixCls:Y},C,{close:Z,open:g,afterClose:K,okText:C.okText||(Q?U==null?void 0:U.okText:U==null?void 0:U.justOkText),direction:C.direction||k,cancelText:C.cancelText||(U==null?void 0:U.cancelText)},m))},ED=N.forwardRef(CD);let oS=0;const TD=N.memo(N.forwardRef((e,t)=>{const[i,s]=FL();return N.useImperativeHandle(t,()=>({patchElement:s}),[]),N.createElement(N.Fragment,null,i)}));function PD(){const e=N.useRef(null),[t,i]=N.useState([]);N.useEffect(()=>{t.length&&(Tt(t).forEach(g=>{g()}),i([]))},[t]);const s=N.useCallback(m=>function(h){var C;oS+=1;const T=N.createRef();let k;const z=new Promise(Q=>{k=Q});let M=!1,Y;const K=N.createElement(ED,{key:`modal-${oS}`,config:m(h),ref:T,afterClose:()=>{Y==null||Y()},isSilent:()=>M,onConfirm:Q=>{k(Q)}});return Y=(C=e.current)===null||C===void 0?void 0:C.patchElement(K),Y&&Sl.push(Y),{destroy:()=>{function Q(){var U;(U=T.current)===null||U===void 0||U.destroy()}T.current?Q():i(U=>[].concat(Tt(U),[Q]))},update:Q=>{function U(){var D;(D=T.current)===null||D===void 0||D.update(Q)}T.current?U():i(D=>[].concat(Tt(D),[U]))},then:Q=>(M=!0,z.then(Q))}},[]);return[N.useMemo(()=>({info:s(NP),success:s(jP),error:s($P),warning:s(BP),confirm:s(VP)}),[]),N.createElement(TD,{key:"modal-holder",ref:e})]}function ID(e){return t=>N.createElement(w1,{theme:{token:{motion:!1,zIndexPopupBase:0}}},N.createElement(e,Object.assign({},t)))}var kD=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(e);c<s.length;c++)t.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(e,s[c])&&(i[s[c]]=e[s[c]]);return i};const MD=e=>{const{prefixCls:t,className:i,closeIcon:s,closable:c,type:m,title:g,children:h,footer:C}=e,T=kD(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:k}=N.useContext(vo),z=k(),M=t||k("modal"),Y=QT(z),[K,Z,Q]=zP(M,Y),U=`${M}-confirm`;let D={};return m?D={closable:c??!1,title:"",footer:"",children:N.createElement(LP,Object.assign({},e,{prefixCls:M,confirmPrefixCls:U,rootPrefixCls:z,content:h}))}:D={closable:c??!0,title:g,footer:C!==null&&N.createElement(IP,Object.assign({},e)),children:h},K(N.createElement(vP,Object.assign({prefixCls:M,className:mn(Z,`${M}-pure-panel`,m&&U,m&&`${U}-${m}`,i,Q,Y)},T,{closeIcon:PP(M,s),closable:c},D)))},AD=ID(MD);function UP(e){return Kd(BP(e))}const $o=RP;$o.useModal=PD;$o.info=function(t){return Kd(NP(t))};$o.success=function(t){return Kd(jP(t))};$o.error=function(t){return Kd($P(t))};$o.warning=UP;$o.warn=UP;$o.confirm=function(t){return Kd(VP(t))};$o.destroyAll=function(){for(;Sl.length;){const t=Sl.pop();t&&t()}};$o.config=wD;$o._InternalPanelDoNotUseOrYouWillBeFired=AD;var HP={exports:{}},zD="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",RD=zD,LD=RD;function WP(){}function qP(){}qP.resetWarningCache=WP;var FD=function(){function e(s,c,m,g,h,C){if(C!==LD){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:qP,resetWarningCache:WP};return i.PropTypes=i,i};HP.exports=FD();var DD=HP.exports;const zd=Rd(DD),OD="/rail-travel-time/assets/bellaLogo-CJF_RcKL.jpg",BD="/rail-travel-time/assets/piaLogo-D2p6NiLB.jpg",ND="/rail-travel-time/assets/ricaLogo-m0Bjzvzp.jpg",jD="/rail-travel-time/assets/stefLogo-j7w7ueal.jpeg",GP=({isOpened:e,onCancel:t})=>xe.jsx($o,{footer:null,open:e,onCancel:t,destroyOnClose:!0,classNames:{body:"modal"},children:xe.jsxs("div",{className:"info-content",children:[xe.jsx("h2",{children:"Dear traveller,"}),xe.jsxs("p",{children:['You have found your way to the "European Train Travel Times Map"! Travelling by train is one of the most sunstainable modes of travelling and we are happy to offer you this interactive map to efficiently explore your next travel possibilities. Simply choose your city of departure and city of destination from the drop-down menu on the left and you will be shown the average travel time between both. As another option, choose your preferred travel time durancy and you will be shown travel connections across Europe. ',xe.jsx("br",{}),"Happy and safe travels!"]}),xe.jsx("h2",{children:"Authors"}),xe.jsx("p",{children:'This interactive webmap was created in a group project in the framework of the lectures "Web Mapping" and "Multimedia Technqiues" in the summer semester 2024 at TU Wien. The members of the wonderful team are following:'}),xe.jsxs("div",{className:"image-container",children:[xe.jsxs("div",{className:"image-wrapper",children:[xe.jsx("img",{src:BD,alt:"Pia - The Biking Webmap Hero",className:"round-image"}),xe.jsxs("div",{className:"caption",children:[xe.jsx("b",{children:"Pia"}),xe.jsx("br",{}),"Biking Webmapper"]})]}),xe.jsxs("div",{className:"image-wrapper",children:[xe.jsx("img",{src:OD,alt:"Bella - The GIS Queen",className:"round-image"}),xe.jsxs("div",{className:"caption",children:[xe.jsx("b",{children:"Bella"}),xe.jsx("br",{}),"GIS Queen"]})]}),xe.jsxs("div",{className:"image-wrapper",children:[xe.jsx("img",{src:ND,alt:"Rica - The Creative Investigator",className:"round-image"}),xe.jsxs("div",{className:"caption",children:[xe.jsx("b",{children:"Rica"}),xe.jsx("br",{}),"Smart Investigator"]})]}),xe.jsxs("div",{className:"image-wrapper",children:[xe.jsx("img",{src:jD,alt:"Stef - The Platypus",className:"round-image"}),xe.jsxs("div",{className:"caption",children:[xe.jsx("b",{children:"Stef"}),xe.jsx("br",{}),"The Platypus"]})]})]}),xe.jsx("h2",{children:"Data source & license"}),xe.jsx("p",{children:xe.jsxs("ul",{className:"info-list",children:[xe.jsx("li",{children:"Basemap: MapTiler API (License: OdbL)"}),xe.jsx("li",{children:"Train travel times:"}),xe.jsx("li",{children:"Train travel API:"})]})})]})});GP.propTypes={isOpened:zd.bool.isRequired,onCancel:zd.func.isRequired};var $D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},VD=function(t,i){return N.createElement(aa,Kn({},t,{ref:i,icon:$D}))},UD=N.forwardRef(VD);const I1=({toggleMenu:e,isMenuOpen:t})=>{const[i,s]=N.useState(!1);return xe.jsxs(xe.Fragment,{children:[xe.jsx("div",{className:"header",children:xe.jsxs("nav",{className:"topNavBar",children:[typeof t<"u"?xe.jsx("div",{className:"burgerMenu",onClick:e,children:t?"":""}):xe.jsx("div",{}),xe.jsxs("ul",{className:"topNavList",children:[xe.jsx("li",{className:"topNavItem",children:xe.jsx(Iw,{to:"/",className:"topNavLink",children:"Map"})}),xe.jsx("li",{className:"topNavItem",children:xe.jsx(Iw,{to:"/info",className:"topNavLink",children:"Railways Info"})}),xe.jsx("li",{className:"topNavItem",children:xe.jsx(UD,{className:"topNavLink infoButton",onClick:()=>s(!0)})})]})]})}),i&&xe.jsx(GP,{isOpened:i,onCancel:()=>s(!1)})]})};I1.propTypes={toggleMenu:zd.func,isMenuOpen:zd.bool};const HD=({content:e})=>xe.jsx("div",{children:e==="averagetimes"?xe.jsx("div",{children:"Display average times content here"}):xe.jsx("div",{children:"Display time table content here"})}),ZP=({isMenuOpen:e})=>{const[t,i]=N.useState("averagetimes"),s=k=>{i(k.target.value)},[c,m]=N.useState(""),[g,h]=N.useState(""),C=k=>{m(k.target.value)},T=k=>{h(k.target.value)};return xe.jsx("div",{className:`sideNavContainer ${e?"open":""}`,children:xe.jsxs("div",{className:"contentContainer",children:[xe.jsx("h2",{children:"select your travel route"}),xe.jsxs("div",{className:"radioContainer",children:[xe.jsxs("label",{children:[xe.jsx("input",{type:"radio",value:"averagetimes",name:"radioGroup",defaultChecked:!0,onChange:s})," average times"]}),xe.jsxs("label",{children:[xe.jsx("input",{type:"radio",value:"timetable",name:"radioGroup",onChange:s})," time table"]})]}),xe.jsxs("div",{className:"selectContainer",children:[xe.jsx("p",{children:"from"}),xe.jsxs("select",{className:"selectItem",onChange:C,children:[xe.jsx("option",{children:"city"}),xe.jsx("option",{children:"city 1"}),xe.jsx("option",{children:"city 2"}),xe.jsx("option",{children:"city 3"})]})]}),xe.jsxs("div",{className:"selectContainer",children:[xe.jsx("p",{children:"to"}),xe.jsxs("select",{className:"selectItem",onChange:T,children:[xe.jsx("option",{children:"city"}),xe.jsx("option",{children:"city 1"}),xe.jsx("option",{children:"city 2"}),xe.jsx("option",{children:"city 3"})]})]}),xe.jsx(HD,{content:t})]})})};ZP.propTypes={isMenuOpen:zd.bool};const WD=()=>{const[e,t]=N.useState(!0),i=()=>{t(!e)};return xe.jsxs(xe.Fragment,{children:[xe.jsx(I1,{toggleMenu:i,isMenuOpen:e}),xe.jsx(ZP,{isMenuOpen:e})]})},qD=()=>xe.jsxs("div",{className:"infoPage",children:[xe.jsxs("h2",{children:[xe.jsx("br",{}),xe.jsx("br",{}),"Brief History of Rail Transport Around the World",xe.jsx("br",{}),xe.jsx("br",{})]}),xe.jsxs("div",{className:"history-boxes",children:[xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"1) Ancient Systems"}),xe.jsxs("p",{children:["Evidence suggests a 6-to-8.5 kilometer paved trackway (Diolkos) in Greece transported boats across the Isthmus of Corinth around 600 BCE. Wheeled vehicles pulled by humans and animals ran in limestone grooves.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"2) Pre-Steam (1500s-1800s)"}),xe.jsxs("p",{children:["Wooden rails were introduced with wagonways used in mines. Metal rails followed, with cast iron replaced by more durable wrought iron. The flanged wheel by John Curr revolutionized rail design.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"3) Steam Power (1800s-1900s)"}),xe.jsxs("p",{children:['The first full-scale steam locomotive was built in the UK by Richard Trevithick in 1804. The "Locomotion" by George Stephenson became the first public steam railway. Steam remained dominant for over a century.',xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"4) Electric Power (Late 1800s-Present)"}),xe.jsxs("p",{children:["The first electric locomotive, powered by batteries, was built by Robert Davidson in Scotland in 1837. Early electric trams emerged in the 1880s. Italian railways became the first to use electric traction for an entire main line in 1902.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"5) Diesel Power (1900s-Present)"}),xe.jsxs("p",{children:["Early examples of internal combustion engines appeared in the late 1800s, but the first successful diesel locomotive wasn't operational until 1912 in Switzerland. The development of a reliable electrical control system led to widespread adoption of diesel-electric locomotives.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsxs("div",{className:"history-box",children:[xe.jsx("h3",{children:"6) High-Speed Rail (1960s-Present)"}),xe.jsxs("p",{children:["Japan's Tokaido Shinkansen line became the first high-speed rail system in 1964, reaching speeds exceeding 300 km/h. High-speed rail has expanded to numerous countries, offering a faster and more sustainable alternative to air travel.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]})]}),xe.jsxs("h2",{children:[xe.jsx("br",{}),"The European Railway",xe.jsx("br",{}),xe.jsx("br",{})]}),xe.jsxs("div",{className:"image-text-container1",children:[xe.jsx("img",{src:"src/components/infoContent/First-railway-Europe-country.jpeg",alt:"First railway in Europe"}),xe.jsxs("div",{className:"text-content1",children:[xe.jsx("h3",{children:"The Beginnings:"}),xe.jsxs("p",{children:["Belgium took the lead in the Industrial Revolution on the Continent starting in the 1820s. It provided an ideal model for showing the value of the railways for speeding the industrial revolution. After splitting from the Netherlands in 1830, the new country decided to stimulate industry. It planned and funded a simple cross-shaped system that connected the major cities, ports and mining areas and linked to neighboring countries. Unusually, the Belgian state became a major contributor to early rail development and championed the creation of a national network with no duplication of lines. Belgium thus became the railway center of the region. Profits were low but the infrastructure necessary for rapid industrial growth was put in place. The first railway in Belgium, running from northern Brussels to Mechelen, was completed in May 1835.",xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]})]}),xe.jsxs("div",{className:"image-text-container2",children:[xe.jsxs("div",{className:"text-content2",children:[xe.jsx("h3",{children:"Country Differences:"}),xe.jsxs("p",{children:["The 2017 European Railway Performance Index ranked the performance of national rail systems as follows:",xe.jsxs("ul",{class:"bullet-list",children:[xe.jsx("li",{children:"Tier One: Switzerland, Denmark, Finland, Germany, Austria, Sweden, and France."}),xe.jsx("li",{children:"Tier Two: Great Britain, the Netherlands, Luxembourg, Spain, the Czech Republic, Norway, Belgium, and Italy."}),xe.jsx("li",{children:" Tier Three: Lithuania, Slovenia, Ireland, Hungary, Latvia, Slovakia, Poland, Portugal, Romania, and Bulgaria."})]})]}),xe.jsxs("p",{children:["One of the main differences between the countries lays in the electrification of lines.",xe.jsx("br",{}),`15 kV AC has been used in Germany, Austria, Switzerland, Norway and Sweden since 1912, while the Netherlands and France use 1500 V DC. France and Croatia also use 25 kV AC, Belgium, Italy and Slovenia use 3 kV DC. All this makes the construction of truly pan-European vehicles a challenging task and, until recent developments in locomotive construction, was mostly ruled out as being impractical and too expensive. The development of an integrated European high-speed rail network is overcoming some of these differences. All high-speed lines outside of Russia, including those built in Spain and Portugal, use 1,435 mm (4 ft 8+12 in) standard gauge tracks. Likewise all European high-speed lines, outside of Germany, Austria and Italy use 25 kV AC electrification (Electrification of high-speed rail in Italy is mixed 3 kV DC and 25 kV AC). This means that by 2020 high-speed trains can travel from Italy to the United Kingdom, or Portugal to the Netherlands without the need for multi-voltage systems or breaks of gauge  or they could, if they didn't have to commute from one high-speed line to the next over "classical" lines using a different voltage and/or frequency.`,xe.jsx("br",{}),xe.jsx("span",{class:"sourcetext",children:"(Retrieved on 6.6.2024 from https://en.wikipedia.org/wiki/History_of_rail_transport. License: CC BY-SA 4.0)"})]})]}),xe.jsx("img",{src:"src/components/infoContent/electrification.png",alt:"First railway in Europe"})]}),xe.jsxs("div",{children:[xe.jsx("h3",{children:"Why Choose Train Travel Across Europe?"}),xe.jsx("p",{children:"Train travel offers a more eco-friendly alternative to air travel. It's also a comfortable and scenic way to explore Europe, allowing you to witness diverse landscapes as you journey between destinations."})]})]}),GD="/rail-travel-time/assets/train-wgbmlnfC.mp3",ZD=()=>(N.useEffect(()=>{const e=document.getElementById("train_with_sound"),t=document.getElementById("music"),i=()=>{t.play()},s=()=>{t.pause(),t.currentTime=0};return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",s),()=>{e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",s)}},[]),xe.jsxs("div",{className:"train-motion",children:[xe.jsx("div",{className:"train",children:xe.jsxs("svg",{id:"train_with_sound",width:"70.68px",height:"60px",viewBox:"0 0 1512.2 1781.2",xmlns:"http://www.w3.org/2000/svg",baseProfile:"tiny",children:[xe.jsxs("g",{id:"train",strokeWidth:"0px",fill:"#000000",children:[xe.jsx("path",{className:"cls-1",d:"M477.8,1354.2h0c1.3.5,2.8,1,3.3,1,.8,0,27.7-45.6,27.7-47,0-2.3-24.2-9.5-35.7-10.6l-6.5-.6v54.5l4.5,1c2.4.5,5.5,1.4,6.8,1.9Z"}),xe.jsx("path",{className:"cls-1",d:"M442.9,1350.1h0c2.5,4.1,3.6,5.3,4.8,4.8.8-.3,4.4-1.3,7.9-2.1l6.3-1.5v-54.2l-6.3.7c-15.3,1.6-36.7,9.1-35.4,12.4.6,1.6,16.3,29,22.8,39.9Z"}),xe.jsx("path",{className:"cls-1",d:"M408.3,1356.4h0s21.9,12.7,21.9,12.7l5.7-5.7c3.1-3.1,5.6-5.9,5.6-6.2-.2-.6-23.1-40.4-25.2-43.7l-1.3-2.1-4.4,3c-10.7,7.3-28,26.8-25.3,28.6.7.4,11,6.5,23.1,13.5Z"}),xe.jsx("path",{className:"cls-1",d:"M1770.7,1445.3c-2.9-3-50-44.3-104.6-91.8l-99.4-86.4-.5-18.9c-.9-32.2-6.5-38.3-35.8-38.9-24.6-.5-24.1-3.9.5-3.9s30.5-2.8,36.8-14.2l2.8-5,.3-96c.3-124.7,2.1-119-38.5-119.9l-17.6-.4v-12.9c0-19.4-4-28.1-15.4-33.4l-4.7-2.2h-101.1c-95.9,0-101.1-.1-100.7-1.7,2.1-7.7,76.4-211.5,78-214,8.5-13.2,4.7-30.5-8.2-37.9-92-52.4-96.1-53.9-140.8-54-44.7,0-34.9-2.9-89,26.4-24.2,13.2-45.6,24.4-47.4,25-18.9,6.2-20.4,19.9-6.5,57.8,13.8,37.6,71.3,197.2,71.3,197.8s-47.8.4-106.2.3l-106.2-.2-.2-26.4-.2-26.4,9.5-.4c31.8-1.3,42.9-54.3,14.9-70.8l-4.4-2.6h-403.1l-4.2,2.5c-11.5,6.8-13.6,12.1-13.6,34.1,0,18.4.4,20,6,27.1,2.6,3.2,2.9,4.3,2.9,9.9v6.2l-6.1,2.7c-34.8,15.2-52.5,46.5-74.4,132-9.9,38.8-15.5,46.9-45.5,66.5-2.1,1.3-11.1,7.3-20.2,13.2-49.6,32.4-71.5,62.1-80.8,109.9l-2.1,10.9h-15.1c-33.5,0-38.4,5.8-38.4,45.5s1.4,35.4,13.8,42.2l5,2.8,44.4.5,44.4.5-3.3,4c-32,38.2-38.4,95.3-15.8,140.2,51.5,102.3,200,92.8,238.3-15.3,4.9-13.7,7.2-14,11.3-1.4,15.8,48.5,59.2,83.3,110.9,88.9h0c58.1,6.3,116.1-31.4,135-87.8l3.2-9.5h133.4l2.3,8c29.3,102.6,176.1,104.9,209,3.3,1.2-3.6,2.3-5.9,2.6-5.2,35.8,101.8,171.3,109.6,207.3,11.9,3-8.1,2.4-3.9-1.1,8.3-6.5,22.5-3,35,11.9,42l4.2,2,168.3.2c148.4.2,168.8,0,172.4-1.2,19.2-6.5,24.6-29,10.5-43.7ZM1491.5,1093l.2-90.7,25.1-.2,25.1-.2v91h0s0,90.9,0,90.9h-50.6l.2-90.7ZM1139.3,668.6l46.6-22.9h67.6l45.3,22.7c24.9,12.5,45.3,23,45.3,23.4h0c0,.4-56.5.7-125.6.7-69.1,0-125.6-.2-125.6-.5s20.9-10.8,46.5-23.4ZM1095.6,702.7c0-.5,51.9-.8,123.3-.8s123.3.3,123.3.6-18.2,51.3-40.4,113.2c-22.2,61.9-40.8,113.8-41.3,115.2h0s-.9,2.6-.9,2.6h-40.5s-40.5,0-40.5,0l-7.2-19.9c-35-96.7-75.8-210.1-75.8-210.8ZM1200.6,953h284.1v287.8h-568.1v-287.8h284.1ZM560.3,830.8v-8h386.2v15.9h-386.2v-8ZM908.1,843.4v397.5h-335.6v-397.5h335.6ZM338.2,1238.7c.2-52.8,23.7-90.5,79.2-126.8,51-33.4,59.1-43.5,69.4-87.1,12.8-54.2,17.5-70.2,25.5-86.2,10.8-21.8,27-35,45.1-36.8l4.9-.5v169.8h0s0,169.8,0,169.8h-224.1v-2.1ZM485.7,1493.1h0c-81.4,16.6-147.8-64.6-115.7-141.6,24.8-59.5,101.8-81.2,154.3-43.5,73,52.4,49.1,167.2-38.6,185.1ZM746,1493.3h0c-6.8,1.8-32.9,3.3-38,2.1-1-.2-4.2-.9-7-1.4-123.4-23.7-98.5-211.9,26.9-203.9,116.9,7.5,131.6,172.8,18.1,203.2ZM1108.3,1482.8h0c-50.8,12.8-100.4-24.3-102.4-76.5-2.9-76.5,87.7-115.8,141.3-61.3,44.5,45.2,22.7,122.3-38.9,137.8ZM1320.4,1482.7h0c-67.2,16.1-123.8-52.4-95-114.9,25.7-55.6,101.9-65,139.7-17.2,37.6,47.5,13.7,118.1-44.7,132.1ZM911.9,1278.3H286.6v-25.3h1250.6v25.3h-625.3ZM1586.5,1468.7c-159.4,0-162.9,0-162.3-1.8.5-1.5,46.3-167.3,49.3-178.5l1-3.5h32.5s32.5,0,32.5,0l104.1,91c57.2,50,104.5,91.4,104.9,91.9h0c.5.5-61.1.9-162,.9Z"}),xe.jsx("path",{className:"cls-1",d:"M593.2,866.8v84.7c0,46.6.3,85,.6,85.3h0c.3.4,16.3.5,35.4.4l34.8-.2.2-85.1.2-85.1h-71.3Z"}),xe.jsx("path",{className:"cls-1",d:"M423.4,1389.1l.5-2.6c.3-1.4,1.3-5,2.2-8l1.7-5.4-2-1.2c-5-3.1-41.5-23.9-43-24.5-3.3-1.2-10.8,20.2-12.4,35.4h0s-.7,6.3-.7,6.3h53.6Z"}),xe.jsx("polygon",{className:"cls-1",points:"698.4 952.3 698.4 952.3 698.1 1037.4 791.4 1037.4 884.7 1037.4 884.7 952.1 884.7 866.8 791.7 867 698.6 867.3 698.4 952.3"}),xe.jsx("path",{className:"cls-1",d:"M1300.9,1367.9c-38.7.1-48.4,52.5-12.6,67.5h0c8,3.4,20,2.9,28-1,33.7-16.5,22.1-66.7-15.5-66.6ZM1315.4,1431.2h0c-31.7,15.6-61.2-23.6-37.8-50.2,7.4-8.4,20-12.3,30.9-9.5,29.2,7.5,33.7,46.5,6.9,59.7Z"}),xe.jsx("path",{className:"cls-1",d:"M500.3,1374.3c.2.7,1.3,4.3,2.3,8l2,6.8h27s27,0,27,0v4.7h-27s-27,0-27,0l-1.6,6.3c-.9,3.5-1.8,7-2.1,7.8-.5,1.2,4.5,4.4,22.8,15,20.5,11.8,23.3,13.7,22.5,15.2-1.3,2.5-.9,2.7-25.3-11.4l-22.7-13.1-3.7,4.2c-2,2.3-4.7,5-5.9,5.9l-2.2,1.7,13.1,22.6c14,24.2,13.9,24,11.4,25.4-1.4.8-3.4-2.2-15-22.4l-13.4-23.3-3.2,1.3c-1.8.7-5.3,1.8-7.9,2.4l-4.7,1v53.3h-4.7v-53.4l-3.5-.6c-1.9-.3-5.7-1.3-8.3-2.2l-4.8-1.7-13.4,23.3c-7.4,12.8-13.2,23.5-13,23.7,2.4,2.4,19.9,8.6,29.2,10.4h0c74.2,14.1,133.7-63.6,102.2-133.7-2.6-5.9-52.1,16.5-50.2,22.7Z"}),xe.jsx("path",{className:"cls-1",d:"M774.6,1314.3l-4.6-3.1-3.7,6.3c-2,3.5-8.2,14.1-13.7,23.7l-10,17.3,5.7,5.4h0c3.1,3,6.1,5.3,6.6,5.2,2.1-.5,46.4-26.5,46.4-27.2,0-3.2-18.2-22-26.7-27.6Z"}),xe.jsx("path",{className:"cls-1",d:"M664.4,1356.7h0c12.1,7,22.3,12.6,22.6,12.5.3-.1,3.1-2.6,6.2-5.4l5.6-5.2-13.2-23.1c-7.3-12.7-13.5-23.1-13.8-23.1-4.2-.3-32.5,28.8-30.2,31,.4.4,10.6,6.4,22.8,13.4Z"}),xe.jsx("path",{className:"cls-1",d:"M683.6,1408.4c-.3-1.1-1.3-4.8-2.1-8.3l-1.5-6.3h-53.4l.6,6.8c.8,9.2,3.7,20.9,7.2,29.3h0c1.6,3.8,3.1,7,3.3,7,3.1,0,46.4-26.9,45.8-28.5Z"}),xe.jsx("path",{className:"cls-1",d:"M653.6,1389.1h26.7l.5-2.6c.3-1.4,1.4-4.9,2.3-7.7,1-2.8,1.5-5.3,1.1-5.4-.4-.1-10.8-6.1-23.2-13.3l-22.5-13-2.1,4.2c-4.6,9-9.6,28-9.6,36.6h0c0,1.1,4.2,1.3,26.7,1.3Z"}),xe.jsx("path",{className:"cls-1",d:"M757.6,1376.7c.7,1.4,1.8,4.8,2.4,7.5l1.2,4.9h54.2v4.7h-54.2l-.6,4.3c-.4,2.4-1.3,6-2,8.1-1.1,3.1-1.1,4-.2,4.6.7.4,11.2,6.5,23.4,13.6,19.6,11.3,22.1,13,21.3,14.5-1.3,2.5-.4,2.9-25.1-11.4l-22.7-13.1-5.9,6-5.9,6,13,22.6c12.4,21.4,14.2,25.9,10.5,25.1-.8-.2-7.4-10.5-14.6-23l-13.1-22.7-3.5,1.4c-1.9.8-5.4,1.7-7.7,2.1l-4.2.7-.2,26.9-.2,26.9h-4.7v-53.4l-2.6-.5c-1.4-.3-5.1-1.3-8.2-2.3-3.1-1-5.7-1.7-5.8-1.6-.8.8-26.6,45.9-26.6,46.5,0,2.1,21.3,9.5,32.6,11.3h0c72.5,11.5,129.7-65.3,99.3-133.3-3.5-7.8-.7-8.5-25.8,6-28.8,16.6-25.8,14.5-24.3,17.5Z"}),xe.jsx("path",{className:"cls-1",d:"M698.1,1426.6l-5.9-6-5.9-6-22.9,13.2c-12.6,7.2-22.9,13.2-23.1,13.4-1.5,1.4,15.9,21,24.3,27.3h0c3.1,2.3,5.9,4.2,6.2,4.2s6.6-10.3,13.9-23l13.3-23Z"}),xe.jsx("path",{className:"cls-1",d:"M701.2,1353.3h0c1.4,2.2,2.3,2.9,3.4,2.4,2.6-1.1,10.8-3.2,12.5-3.2s1.7-1.7,1.7-27.2v-27.2h-2.7c-12.5,0-40.5,9.1-39.1,12.8.5,1.3,19.9,35.2,24.2,42.4Z"}),xe.jsx("path",{className:"cls-1",d:"M441.2,1425.8l-5.9-6.1-5.9-6.1-21.4,12.4c-11.8,6.8-22.2,12.8-23.1,13.3-3.3,1.9,12.8,21,25.1,29.7h0s4.7,3.3,4.7,3.3l1.3-2.5c.7-1.4,6.7-11.9,13.3-23.3l12-20.8Z"}),xe.jsx("path",{className:"cls-1",d:"M426.6,1408.2c-.1-.9-.9-4.5-1.7-8l-1.6-6.3h-53.5l.6,6.5c.9,9,3.8,20.5,7.2,28.8h0c1.6,3.8,3.2,6.9,3.5,6.9,2.7-.1,45.6-26.4,45.4-27.8Z"}),xe.jsx("path",{className:"cls-1",d:"M1064.1,1377.9c-18.6,18.3-11,50.6,13.6,58.4h0c21.9,6.9,44.8-8.8,45.9-31.5,1.6-32.6-36.3-49.7-59.5-26.9ZM1102.5,1431.8h0c-20.7,10.1-45.8-5.6-45.6-28.7.3-34.4,45.4-45,60.5-14.2,7.8,15.9,1.2,35.1-14.9,42.9Z"}),xe.jsx("path",{className:"cls-1",d:"M735.7,1355.4h0c.8.5,1.8.8,2.3.6.8-.3,27.5-45.3,27.6-46.6.2-2.9-28.8-11.2-39-11.2h-3.2v54.1l5.4,1.1c3,.6,6,1.5,6.8,2Z"}),xe.jsx("path",{className:"cls-1",d:"M519.6,1315c-3.6-2.5-6.6-4.5-6.7-4.3-.7.9-25.9,45.1-26.3,46-.3.7,2,3.7,5,6.8h0s5.4,5.6,5.4,5.6l3-1.6c6.6-3.5,43-24.6,43.8-25.3,2.3-2-13.4-19.5-24.2-27.2Z"})]}),xe.jsxs("g",{id:"svg-steam",fillOpacity:"0",strokeOpacity:"0",children:[xe.jsx("path",{className:"cls-1",d:"M197.3,145.6c-6.3-3.2-7.8-4.4-9.8-7.9-16.1-29.6-52.5-38.6-80.7-20.1-2.3,1.5-2.5,1.4-7.3-1.7-38.3-25.8-88.4,12.3-73.6,56l1.9,5.5-7.7,7.6c-39.5,39.3-16.7,106.5,38.8,114.1h0c25.5,3.5,53.5-10.5,66.4-33.1l2.5-4.5h7.1c11.2,0,22.9-5.2,28.6-12.7,2.3-3,2.4-3,11.9-3.5,55.3-2.7,71.1-75.1,21.8-99.8ZM166.7,235.1l-6.3-1.3-.9,2.6c-4,11.6-20,18.4-32.7,14-4.6-1.6-5-1.6-5.5-.2-5.6,17.9-22.7,33.8-40.8,38.1h0c-61,14.4-96.1-69.4-42.8-102.3,3-1.9,5.5-3.5,5.5-3.7s-1.3-2.3-2.8-4.7c-24-37.9,28.6-79.2,59.2-46.5l4.2,4.5,3.7-3.2c22-19.3,59.9-11.6,72.2,14.7,2.5,5.2,2.9,5.7,7.5,7.1,48.8,15.4,29.5,91.6-20.5,81Z"}),xe.jsx("path",{className:"cls-1",d:"M725.9,172.7l.8-6.4c3.9-29.6-10.3-68.7-31.4-86.5-12.1-10.2-47.6-21.2-59.2-18.3-2,.5-2.3,0-3.4-4-21.3-78.7-138.1-73.5-154.2,7-.6,3-.7,3-6,3-52.7,0-100.6,48.2-102.9,103.7-3.5,83.2,83.7,140.2,157.5,102.9l4.4-2.2,5.9,4.8c15.5,12.5,36.1,16.9,54.9,11.7l5.8-1.6,3.2,2.8c10.4,9.1,25.1,16.3,40,19.5h0c71.6,15.4,129-68.8,88.8-130l-4.1-6.2ZM674.8,291.5h0c-24,6.7-48.3,0-66.7-18.1l-7.4-7.3-5.5,2.9c-20.3,10.8-45.6,3.8-56.8-15.8l-2.6-4.6-8.1,5.4c-59.8,40.1-141.3-3.8-141.4-76.1,0-54.7,50.4-99.5,102.4-91l5.4.9v-7.2c0-41.2,41.9-71,81.1-57.7,24.5,8.3,38.7,26.8,42.2,55l.5,4.3,5.8-.8c48.6-7,93,40.4,83.7,89.5l-1.5,8.2,4.3,5.2c30,36.8,11.1,94.3-35.3,107.3Z"}),xe.jsx("polygon",{className:"cls-1",points:"1248.4 535.7 1248.4 535.7 1248.4 535.7 1248.4 535.7"}),xe.jsx("path",{className:"cls-1",d:"M1328.7,251.9c-3.1-1.9-4.8-3.5-4.6-4.4.2-.8,1.3-4.8,2.4-8.9,27.4-102-98.9-177.3-175-104.4l-4.9,4.7-5.4-3.3c-111.4-67-248.9,34.9-216.8,160.6,15.1,59.2,61.9,99.5,126.5,109.2,3.2.5,3.3.6,4.9,7.2,6.3,26,27.2,48.1,53.6,56.6l6.5,2.1,3.1,9.5c14.2,43.4,50.4,74,94.6,79.7h0c65.6,8.6,126.1-41.8,128.7-107.3l.5-13.1,4.1-4.6c51.9-57.9,43.2-146.4-18.2-183.7ZM1323.7,424.1l-7,7.4v15.1c-.4,44-27,78.7-68.3,89.2,0,0,0,0,0,0h0s0,0,0,0c-54,13.6-106.6-23.6-112.7-79.9l-.6-5.9h-5.8c-30.6,0-57.4-30-54.4-60.9l.6-6.1h-13c-95.8-.4-153.7-108-101.3-188.2,40.8-62.4,127.6-74.4,182.9-25.3,4.3,3.8,4.9,4.1,5.7,2.6,27.7-47.6,91.8-56.3,130.5-17.8,25.8,25.7,31.4,68.2,12.9,99.3-1.8,3-3.2,5.6-3,5.7.1.1,2.6,1.4,5.4,2.8,61.3,30.8,75.5,112.4,28.1,162Z"})]})]})}),xe.jsx("audio",{id:"music",src:GD})]})),KD=()=>xe.jsxs(xe.Fragment,{children:[xe.jsx(WD,{}),xe.jsx(W4,{}),xe.jsx(ZD,{})]}),XD=()=>xe.jsxs(xe.Fragment,{children:[xe.jsx(I1,{}),xe.jsx(qD,{})]});function YD(){return xe.jsx("div",{className:"appContainer",children:xe.jsx(c4,{children:xe.jsxs(t4,{children:[xe.jsx(S0,{path:"/",element:xe.jsx(KD,{})}),xe.jsx(S0,{path:"/info",element:xe.jsx(XD,{})})]})})})}Pv.createRoot(document.getElementById("root")).render(xe.jsx(lt.StrictMode,{children:xe.jsx(YD,{})}));export{Vk as c,Rd as g};
